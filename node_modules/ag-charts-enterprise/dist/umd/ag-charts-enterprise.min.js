(function(ff,vo){typeof exports=="object"&&typeof module=="object"?module.exports=vo():typeof define=="function"&&define.amd?define("agCharts",[],vo):typeof exports=="object"?exports.agCharts=vo():ff.agCharts=vo()})(this,()=>{var ff={},vo={exports:ff};if(typeof BMt>"u")var BMt=function(e){throw new Error("Unknown module: "+e)};var jx=Object.defineProperty,bO=Object.getOwnPropertyDescriptor,vO=Object.getOwnPropertyNames,k5=Object.prototype.hasOwnProperty,k=(t,e)=>function(){return t&&(e=(0,t[vO(t)[0]])(t=0)),e},cn=(t,e)=>{for(var i in e)jx(t,i,{get:e[i],enumerable:!0})},I5=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of vO(e))!k5.call(t,n)&&n!==i&&jx(t,n,{get:()=>e[n],enumerable:!(s=bO(e,n))||s.enumerable});return t},w=t=>I5(jx({},"__esModule",{value:!0}),t),S=(t,e,i,s)=>{for(var n=s>1?void 0:s?bO(e,i):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&jx(e,i,n),n},st={};cn(st,{error:()=>MO,errorOnce:()=>L5,log:()=>A5,logGroup:()=>T5,reset:()=>w5,table:()=>C5,warn:()=>SO,warnOnce:()=>mf});function A5(...t){console.log(...t)}function SO(t,...e){console.warn(`AG Charts - ${t}`,...e)}function MO(t,...e){typeof t=="object"?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)}function C5(...t){console.table(...t)}function DO(t,e,i){let s;t instanceof Error?s=t.message:typeof t=="string"?s=t:typeof t=="object"?s=JSON.stringify(t):s=String(t);const n=`${e}: ${s}`;Gx.has(n)||(i(t),Gx.add(n))}function mf(t,...e){DO(t,"Logger.warn",i=>SO(i,...e))}function L5(t,...e){DO(t,"Logger.error",i=>MO(i,...e))}function w5(){Gx.clear()}function T5(t,e){console.groupCollapsed(t);try{return e()}finally{console.groupEnd()}}var Gx,fk=k({"packages/ag-charts-core/src/globals/logger.ts"(){"use strict";Gx=new Set}}),mk,N5=k({"packages/ag-charts-core/src/interfaces/moduleDefinition.ts"(){"use strict";mk=(t=>(t.Axis="axis",t.Chart="chart",t.Preset="preset",t.Plugin="plugin",t.Series="series",t))(mk||{})}}),Gs={};cn(Gs,{detectChartDefinition:()=>R5,getAxisModule:()=>B5,getPresetModule:()=>z5,getSeriesModule:()=>F5,hasModule:()=>E5,listModulesByType:()=>P5,register:()=>kO,registerMany:()=>O5,reset:()=>_5});function kO(t){const e=qo.get(t.name);if(e&&(e.enterprise||!t.enterprise))throw new Error(`AG Charts - Module '${t.name}' already registered`);qo.set(t.name,t)}function O5(t){for(const e of t)kO(e)}function _5(){qo.clear()}function E5(t){return qo.has(t)}function*P5(t){for(const e of qo.values())yf(t,e)&&(yield e)}function R5(t){for(const e of qo.values())if(yf("chart",e)&&e.detect(t))return e;throw new Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function B5(t){const e=qo.get(t);if(yf("axis",e))return e}function z5(t){const e=qo.get(t);if(yf("preset",e))return e}function F5(t){const e=qo.get(t);if(yf("series",e))return e}function yf(t,e){return e?.type===t}var qo,j5=k({"packages/ag-charts-core/src/globals/moduleRegistry.ts"(){"use strict";qo=new Map}}),G5=k({"packages/ag-charts-core/src/globals/index.ts"(){"use strict";fk(),j5()}}),V5=k({"packages/ag-charts-core/src/interfaces/globalTypes.ts"(){"use strict"}}),Rh,W5=k({"packages/ag-charts-core/src/classes/eventEmitter.ts"(){"use strict";Rh=class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)||this.events.set(t,new Set),this.events.get(t)?.add(e),()=>this.off(t,e)}off(t,e){const i=this.events.get(t);i&&(i.delete(e),i.size===0&&this.events.delete(t))}emit(t,e){this.events.get(t)?.forEach(i=>i(e))}clear(t){t?this.events.delete(t):this.events.clear()}}}});function So(t){return t?Mo.document?.[t]:Mo.document}function be(t){return t?Mo.window?.[t]:Mo.window}function IO(t){Mo.document=t}function AO(t){Mo.window=t}var Mo,Vx=k({"packages/ag-charts-core/src/utils/dom/globalsProxy.ts"(){"use strict";Mo={},typeof window<"u"?Mo.window=window:typeof global<"u"&&(Mo.window=global.window),typeof document<"u"?Mo.document=document:typeof global<"u"&&(Mo.document=global.document)}});function Bt(t,e,i){const s=So().createElement(t);if(typeof e=="object"&&(i=e,e=void 0),e)for(const n of e.split(" "))s.classList.add(n);return i&&Object.assign(s.style,i),s}function ui(t){return So().createElementNS("http://www.w3.org/2000/svg",t)}var CO=k({"packages/ag-charts-core/src/utils/dom/domElements.ts"(){"use strict";Vx()}});function LO(t,e){const i=So("body"),s=Bt("a",{display:"none"});s.href=t,s.download=e,i.appendChild(s),s.click(),setTimeout(()=>i.removeChild(s))}var H5=k({"packages/ag-charts-core/src/utils/dom/domDownload.ts"(){"use strict";CO(),Vx()}});function wO(t){const e=be("Option"),{style:i}=new e;return i.color=t,i.color||null}var U5=k({"packages/ag-charts-core/src/utils/dom/domUtils.ts"(){"use strict";Vx()}}),TO=k({"packages/ag-charts-core/src/utils/dom/index.ts"(){"use strict";H5(),CO(),U5(),Vx()}});function Bh(t){return t!=null}function zt(t){return Array.isArray(t)}function NO(t){return typeof t=="boolean"}function zh(t){return t instanceof Date}function Wx(t){return zh(t)&&!isNaN(Number(t))}function OO(t){return t instanceof RegExp}function Do(t){return typeof t=="function"}function Se(t){return typeof t=="object"&&t!==null&&!zt(t)}function $5(t){return zt(t)||Me(t)}function Me(t){return typeof t=="object"&&t!==null&&t.constructor?.name==="Object"}function Ji(t){return typeof t=="string"}function xf(t){return typeof t=="number"}function re(t){return Number.isFinite(t)}function _O(t){return typeof window<"u"&&t instanceof HTMLElement}function K5(t,e){return Ji(e)&&Object.keys(t).includes(e)}function Hx(t,e){return Object.values(t).includes(e)}function bf(t){return typeof t=="symbol"}function EO(t){return Ji(t)&&(t==="none"||wO(t)!=null)}function Y5(t,e){return t in e}var vf=k({"packages/ag-charts-core/src/utils/typeGuards.ts"(){"use strict";TO()}});function Z5(t,e=0,i){const{leading:s=!1,trailing:n=!0,maxWait:a=1/0}=i??{};let o,r;if(a<e)throw new Error("Value of maxWait cannot be lower than waitMs.");function l(...c){if(s&&!r){r=Date.now(),o=setTimeout(()=>r=null,e),t(...c);return}let h=e;if(a!==1/0&&r){const u=Date.now()-r;e>a-u&&(h=a-u)}clearTimeout(o),r??(r=Date.now()),o=setTimeout(()=>{r=null,n&&t(...c)},h)}return Object.assign(l,{cancel(){clearTimeout(o),r=null}})}function yk(t,e,i){const{leading:s=!0,trailing:n=!0}=i??{};let a,o,r=!1;function l(){n&&o?(a=setTimeout(l,e),t(...o)):r=!1,o=null}function c(...h){r?o=h:(r=!0,a=setTimeout(l,e),s?t(...h):o=h)}return Object.assign(c,{cancel(){clearTimeout(a),r=!1,o=null}})}function xk(t,e,i=""){try{return t(...e)}catch(s){const n=i?` \`${i}\``:"";mf(`Uncaught exception in user callback${n}`,s)}}var PO=k({"packages/ag-charts-core/src/utils/functions.ts"(){"use strict";fk()}});function Yd(t,e="and",i=String,s=1/0){if(t.length===0)return"";if(t.length===1)return i(t[0]);t=t.map(i);const n=t.pop();if(t.length>=s){const a=t.length-(s-1);return`${t.slice(0,s-1).join(", ")}, and ${a} more ${e} ${n}`}return`${t.join(", ")} ${e} ${n}`}function Ux(t,e=1/0){if(typeof t=="number"){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}const i=JSON.stringify(t)??typeof t;return i.length>e?`${i.slice(0,e)}... (+${i.length-e} characters)`:i}function RO(t){let e=1;for(let i=0;i<t.length;i++)t.charCodeAt(i)===10&&e++;return e}function BO(t,e){if(t===e)return 0;const[i,s]=t.length<e.length?[t,e]:[e,t],n=i.length,a=s.length;let o=new Array(n+1).fill(0).map((l,c)=>c),r=new Array(n+1);for(let l=1;l<=a;l++){r[0]=l;for(let c=1;c<=n;c++){const h=s[l-1]===i[c-1]?0:1;r[c]=Math.min(o[c]+1,r[c-1]+1,o[c-1]+h)}[o,r]=[r,o]}return o[n]}var zO=k({"packages/ag-charts-core/src/utils/strings.ts"(){"use strict"}});function Sf(t,e){return re(e)?`${t}[${e}]`:t?`${t}.${e}`:e}function Vs(t,e,i=""){if(!Se(t))return{cleared:null,invalid:[new ac("required","an object",t,i)]};const s={},n=[],a=new Set(Object.keys(t)),o=[];if(Zd in e){const r=Object.keys(e),l=e[Zd];if(t.type!=null&&r.includes(t.type)||t.type==null&&l!=null){const{type:c=l,...h}=t,u=Vs(h,e[c],i);Object.assign(s,{type:c},u.cleared);for(const d of u.invalid)d.setUnionType(c,i);n.push(...u.invalid)}else{const c=Yd(r,"or",h=>`'${h}'`);n.push(new ac("required",`a keyword such as ${c}`,t.type,i,"type"))}return{cleared:s,invalid:n}}for(const r of Object.keys(e)){const l=e[r],c=l[bk],h=t[r];if(a.delete(r),typeof h>"u"&&(l[vk]||o.push(r),!c))continue;const u=Sf(i,r);if(Do(l)){const p=l(h,{options:t,path:u});if(typeof p=="object"){if(n.push(...p.invalid),p.valid){s[r]=p.cleared;continue}else if(Fh(p.invalid,u))continue}else if(p){s[r]=h;continue}n.push(new ac(c?"required":"invalid",l[Jn],h,i,r))}else{const d=Vs(h,l,u);d.cleared!=null&&(s[r]=d.cleared),n.push(...d.invalid)}}for(const r of a){const l=t[r];typeof l>"u"||n.push(new Df(o,l,i,r))}return{cleared:s,invalid:n}}function X5(t,e,i=2){const s=[],n=t.toLowerCase(),a=jO.get(n);for(const o of e){const r=o.toLowerCase();(a?.has(o)||r.includes(n)||BO(n,r)<=i)&&s.push(o)}return s}function te(t,e){return Object.assign(Do(t)?(i,s)=>t(i,s):{...t},{[Jn]:e})}function pt(t){return Object.assign(Do(t)?(e,i)=>t(e,i):ts(t),{[bk]:!0,[Jn]:t[Jn]})}function At(t){return Object.assign(Do(t)?(e,i)=>t(e,i):ts(t),{[vk]:!0,[Jn]:t[Jn]})}function lt(...t){Se(t[0])&&(t=Object.values(t[0]));const e=Yd(t,"or",i=>`'${i}'`);return te(i=>t.includes(i),`a keyword such as ${e}`)}function Fh(t,e){return t.some(i=>i.type==="required"&&i.path===e)}function FO(t,e){return i=>{if(i instanceof Df)return mf(`Callback \`${t.path}\` returned an unknown property \`${Sf(i.path,i.key)}\`${i.getPostfix()}`);const s=Ux(i.value,50);mf(i.key?`Callback \`${t.path}\` returned an invalid property \`${Sf(i.path,i.key)}\`: \`${s}\`; expecting ${i.description}, ignoring.`:`Callback \`${t.path}\` returned an invalid value \`${s}\`; expecting ${e??i.description}, ignoring.`)}}var Jn,bk,Mf,vk,Zd,jO,Sk,ac,Df,ts,jh,De,Pt,kf,GO,Ws,K,he,yt,Ea,Tt,et,Xd,J,$x,Gh,Kx,Yx,Mk,U,If,St,Pa,Qo,ke,Zx,kt,es,qd,Ce,Dk=k({"packages/ag-charts-core/src/utils/validation.ts"(){"use strict";fk(),PO(),zO(),vf(),Jn=Symbol("description"),bk=Symbol("required"),Mf=Symbol("marked"),vk=Symbol("undocumented"),Zd=Symbol("union"),jO=[["placement","position"],["padding","spacing","gap"],["color","fill","stroke"],["whisker","wick"],["nodeClick","seriesNodeClick"],["nodeDoubleClick","seriesNodeDoubleClick"],["src","url"]].reduce((t,e)=>{for(const i of e)t.set(i.toLowerCase(),new Set(e.filter(s=>s!==i)));return t},new Map),Sk=(t=>(t.Invalid="invalid",t.Required="required",t.Unknown="unknown",t))(Sk||{}),ac=class{constructor(t,e,i,s,n){this.type=t,this.description=e,this.value=i,this.path=s,this.key=n}setUnionType(t,e){if(this.path.startsWith(e)){const i=this.path.slice(e.length);this.altPath=`${e}[type=${t}]${i}`}}getPrefix(){const{altPath:t=this.path,key:e}=this;return!t&&!e?"Value":`Option \`${e?Sf(t,e):t}\``}toString(){const{description:t="unknown",type:e,value:i}=this;return e==="required"&&i==null?`${this.getPrefix()} is required and has not been provided; expecting ${t}, ignoring.`:`${this.getPrefix()} cannot be set to \`${Ux(i,50)}\`; expecting ${t}, ignoring.`}},Df=class extends ac{constructor(t,e,i,s){super("unknown",void 0,e,i,s),this.suggestions=t,this.key=s}getPrefix(){return`Unknown option \`${Sf(this.path,this.key)}\``}getPostfix(){const t=Yd(X5(this.key,this.suggestions),"or",e=>`\`${e}\``);return t?`; Did you mean ${t}? Ignoring.`:", ignoring."}toString(){return`${this.getPrefix()}${this.getPostfix()}`}},ts=(t,e="an object")=>te((i,s)=>{const n=Vs(i,t,s.path);return{valid:!Fh(n.invalid,s.path),cleared:n.cleared,invalid:n.invalid}},e),jh=(t,e,i)=>({...t,[Jn]:e,[Zd]:i}),De=(...t)=>te((e,i)=>{const s=[];for(const n of t){const a=n(e,i);if(typeof a=="object"){if(s.push(...a.invalid),!a.valid)return{valid:!1,cleared:e,invalid:s};e=a.cleared}else if(!a)return!1}return{valid:!0,cleared:e,invalid:s}},t.map(e=>e[Jn]).filter(Boolean).join(" and ")),Pt=(...t)=>te((e,i)=>{for(const s of t){const n=s(e,i);if(typeof n=="object"?n.valid:n)return n}return!1},t.map(e=>e[Jn]).filter(Boolean).join(" or ")),kf=t=>re(t)||Wx(t),GO=t=>zh(t)||(re(t)||Ji(t))&&Wx(new Date(t)),Ws=te(zt,"an array"),K=te(NO,"a boolean"),he=te(Do,"a function"),yt=te(EO,"a color string"),Ea=te(GO,"a date"),Tt=te(Bh,"a defined value"),et=te(re,"a number"),Xd=te(Se,"an object"),J=te(Ji,"a string"),$x=te(t=>typeof HTMLElement>"u"||t instanceof HTMLElement,"an html element"),Gh=(t,e=1/0)=>{let i;return e===1/0?i=`an array of at least ${t} items`:t===e?i=`an array of exactly ${t} items`:t===0?i=`an array of no more than ${e} items`:i=`an array of at least ${t} and no more than ${e} items`,te(s=>zt(s)&&s.length>=t&&s.length<=e,i)},Kx=(t,e=1/0)=>{let i;return e===1/0?i=`a string of at least ${t} characters`:t===e?i=`an string of exactly ${t} characters`:t===0?i=`an string of no more than ${e} characters`:i=`an string of at least ${t} and no more than ${e} characters`,te(s=>Ji(s)&&s.length>=t&&s.length<=e,i)},Yx=(t,e=!0)=>te(i=>re(i)&&(i>t||e&&i===t),`a number greater than ${e?"or equal to ":""}${t}`),Mk=(t,e)=>te(i=>re(i)&&i>=t&&i<=e,`a number between ${t} and ${e} inclusive`),U=Yx(0),If=Yx(0,!1),St=Mk(0,1),Pa=t=>te((e,{options:i})=>!kf(e)||!kf(i[t])||e<i[t],`the value to be less than \`${t}\``),Qo=t=>te((e,{options:i})=>!kf(e)||!kf(i[t])||e>i[t],`the value to be greater than \`${t}\``),ke=t=>te(e=>t===e,`the value ${JSON.stringify(t)}`),Zx=(t,e)=>te(i=>i instanceof t,e??`an instance of ${t.name}`),kt=(t,e,i=!0)=>te((s,n)=>{if(!zt(s))return!1;let a=i;const o=[],r=[],l=c=>a=i?a&&c:a||c;if(s.length===0)return{valid:!0,cleared:o,invalid:r};for(let c=0;c<s.length;c++){const h=s[c],u=t(h,{options:h,path:`${n.path}[${c}]`});typeof u=="object"?(a=l(u.valid),r.push(...u.invalid),u.cleared!=null&&o.push(u.cleared)):(a=l(u),u&&o.push(h))}return{valid:a,cleared:a||!i?o:null,invalid:r}},e??`${t[Jn]} array`),es=(t,e="an object array")=>te((i,s)=>{if(!zt(i))return!1;const n=[],a=[];for(let o=0;o<i.length;o++){const r=`${s.path}[${o}]`,l=Vs(i[o],t,r);Fh(l.invalid,r)||n.push(l.cleared),a.push(...l.invalid)}return{valid:!0,cleared:n,invalid:a}},e),qd=(t,e)=>te((i,s)=>Do(i)?Mf in i?!0:{valid:!0,cleared:Object.assign((...a)=>{const o=xk(i,a);if(o==null)return;const r=t(o,{options:o,path:""});if(typeof r=="object"){if(r.invalid.forEach(FO(s,e??t[Jn])),r.valid)return r.cleared}else{if(r)return o;mf(`Callback \`${s.path}\` returned an invalid value \`${Ux(o,50)}\`; expecting ${e??t[Jn]}, ignoring.`)}},{[Mf]:!0}),invalid:[]}:!1,"a function"),Ce=(t,e="an object")=>te((i,s)=>Do(i)?Mf in i?!0:{valid:!0,cleared:Object.assign((...a)=>{const o=xk(i,a,s.path);if(o==null)return;const r=Vs(o,t);return r.invalid.forEach(FO(s,e)),r.cleared},{[Mf]:!0}),invalid:[]}:!1,"a function")}}),Qd,VO,Xx,Af,qx,Cf,ct,kk,Ik,Ak,WO,Ra,gt,vt,Qx,Lf,ve,q5=k({"packages/ag-charts-core/src/options/commonOptionsDefs.ts"(){"use strict";vf(),Dk(),Qd=t=>{if(!Se(t))return!1;const e=Object.keys(t);return e.length===1&&e[0].startsWith("$")},VO=ts({color:yt,stop:St},""),Xx=te(t=>{let e=-1/0;for(const i of t)if(i?.stop!=null){if(i.stop<e)return!1;e=i.stop}return!0},"color stops to be defined in ascending order"),Af=De(Gh(2),kt(VO),Xx),qx=lt("axis","item","series"),Cf=ts({type:pt(ke("gradient")),colorStops:pt(Af),rotation:et,gradient:At(lt("linear","radial","conic")),bounds:At(qx),reverse:At(K)},"a gradient object with color stops"),ct={stroke:yt,strokeWidth:U,strokeOpacity:St},kk=ts({type:pt(ke("gradient")),gradient:pt(lt("linear","radial","conic")),bounds:pt(qx),colorStops:pt(Pt(Af,De(Gh(2),kt(yt)))),rotation:pt(et),reverse:pt(K)}),Ik=ts({type:pt(ke("pattern")),pattern:pt(lt("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),path:Kx(2),width:pt(U),height:pt(U),fill:pt(yt),fillOpacity:pt(St),backgroundFill:pt(yt),backgroundFillOpacity:pt(St),padding:pt(U),rotation:pt(et),scale:pt(U),stroke:pt(yt),strokeWidth:pt(U),strokeOpacity:pt(St)}),Ak=ts({type:pt(ke("image")),url:J,width:U,height:U,rotation:pt(et),backgroundFill:pt(yt),backgroundFillOpacity:St,fit:pt(lt("stretch","contain","cover")),repeat:pt(lt("repeat","repeat-x","repeat-y","no-repeat"))}),WO=jh({gradient:{colorStops:Af,rotation:et,gradient:At(lt("linear","radial","conic")),bounds:At(qx),reverse:At(K)},pattern:{pattern:lt("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),path:Kx(2),width:U,height:U,rotation:et,scale:U,fill:yt,fillOpacity:St,backgroundFill:yt,backgroundFillOpacity:St,...ct,padding:At(U)},image:{url:pt(J),backgroundFill:yt,backgroundFillOpacity:St,width:U,height:U,fit:lt("stretch","contain","cover","none"),repeat:lt("repeat","repeat-x","repeat-y","no-repeat"),rotation:et}},"a color object"),Ra=Pt(yt,ts(WO,"a color object")),gt={fill:Ra,fillOpacity:St},gt.fillGradientDefaults=At(kk),gt.fillPatternDefaults=At(Ik),gt.fillImageDefaults=At(Ak),vt={lineDash:kt(U),lineDashOffset:et},Qx=ts({googleFont:J},"google font"),Lf=Pt(J,Qd,Qx,kt(Pt(J,Qx))),ve={color:yt,fontFamily:Lf,fontSize:U,fontStyle:lt("normal","italic","oblique"),fontWeight:Pt(U,lt("normal","bold","bolder","lighter"))}}});function wf(t){return typeof t>"u"?[]:Array.isArray(t)?t:[t]}function HO(t){return Array.from(new Set(t))}function Jx(t,e){return t.reduce((i,s)=>{const n=e(s);return i[n]??(i[n]=[]),i[n].push(s),i},{})}function Jo(t,e){if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!Jo(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function Jd(t,e,i=0){if(t.length===0)return[];const s=[];for(let n=0;n<e;n++)s.push(t.at((n+i)%t.length));return s}function UO(t,e){const i=new Map;return e.forEach((s,n)=>{i.set(s,n)}),t.sort((s,n)=>{const a=i.get(s)??1/0,o=i.get(n)??1/0;return a-o})}function $O(t,e){let i=0;for(;i<t.length&&e(t[i]);)i+=1;const s=i;s!==0&&t.splice(0,s)}function KO(t,e){let i=t.length-1;for(;i>=0&&e(t[i]);)i-=1;const s=t.length-1-i;s!==0&&t.splice(t.length-s,s)}var Q5=k({"packages/ag-charts-core/src/utils/arrays.ts"(){"use strict"}});function Ck(t=0){return new Promise(e=>{setTimeout(e,t)})}var tb,J5=k({"packages/ag-charts-core/src/utils/async.ts"(){"use strict";tb=class{constructor(){this.queue=[]}await(t=50){return new Promise(e=>{const i=()=>{clearTimeout(n),e(!0)},n=setTimeout(()=>{const a=this.queue.indexOf(i);a<0||(this.queue.splice(a,1),e(!1))},t);this.queue.push(i)})}notify(){this.queue.splice(0).forEach(t=>t())}}}});function*Vh(...t){for(const e of t)yield*e}function YO(t){return t!=null&&typeof t=="object"&&Symbol.iterator in t?t:[t]}function tp(t){for(const e of t)return e;throw new Error("AG Charts - no first() value found")}function*Ba(t){const e=[void 0,void 0];for(const i of Object.keys(t))e[0]=i,e[1]=t[i],yield e}var ZO=k({"packages/ag-charts-core/src/utils/iterators.ts"(){"use strict"}});function oc(t){return t==="true"}function tY(t){return Number(t)}function ta(t){return t}function Ht(t,e,i){i==null||i===""||i===""?t?.removeAttribute(e):t?.setAttribute(e,i.toString())}function Wh(t,e){if(e!=null)for(const[i,s]of Ba(e))i!=="class"&&Ht(t,i,s)}function Hh(t,e,i){if(!(t instanceof HTMLElement))return;const s=t.getAttribute(e);return s===null?i:qO[e]?.(s)??void 0}function ko(t,e,i){t!=null&&(i==null?t.style.removeProperty(e):t.style.setProperty(e,i.toString()))}function XO(t,e){for(const[i,s]of Ba(e))ko(t,i,s)}var qO,eY=k({"packages/ag-charts-core/src/utils/attributeUtil.ts"(){"use strict";ZO(),qO={role:ta,"aria-checked":oc,"aria-controls":ta,"aria-describedby":ta,"aria-disabled":oc,"aria-expanded":oc,"aria-haspopup":ta,"aria-hidden":oc,"aria-label":ta,"aria-labelledby":ta,"aria-live":ta,"aria-orientation":ta,"aria-selected":oc,"data-focus-override":oc,"data-focus-visible-override":oc,"data-preventdefault":oc,class:ta,for:ta,id:ta,tabindex:tY,title:ta,placeholder:ta}}});function Kr(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2);i(n)?(s=n,t=n+1):e=n-1}return s}function ep(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2);i(n)?(s=n,e=n-1):t=n+1}return s}function iY(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2),a=i(n);a==null?e=n-1:(s=a,t=n+1)}return s}function sY(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2),a=i(n);a==null?t=n+1:(s=a,e=n-1)}return s}var nY=k({"packages/ag-charts-core/src/utils/binarySearch.ts"(){"use strict"}});function QO(t,e){const i=Math.max(t.length,e.length),s=new Set,n=new Set;for(let a=0;a<i;a++){const o=t[a],r=e[a];o!==r&&(n.has(r)?n.delete(r):r&&s.add(r),s.has(o)?s.delete(o):o&&n.add(o))}return{changed:s.size>0||n.size>0,added:s,removed:n}}var aY=k({"packages/ag-charts-core/src/utils/diff.ts"(){"use strict"}});function Nt(t,e,i){return Math.min(i,Math.max(t,e))}function JO(t,e,i=1e-10){return t>=e[0]-i&&t<=e[1]+i}function ea(t,e,i=1e-10){return t===e||Math.abs(t-e)<i}function eb(t){return Math.sign(t)===-1||Object.is(t,-0)}function t_(t){return t%1===0}function Lk(t,e=2){const i=10**e;return Math.round(t*i)/i}function wk(t,e){return Math.floor(t%e+(t<0?Math.abs(e):0))}function Tf(t){if(Math.floor(t)===t)return 0;let e=String(t),i=0;if(t<1e-6||t>=1e21){let n;[e,n]=e.split("e"),n!=null&&(i=Number(n))}const s=e.split(".")[1]?.length??0;return Math.max(s-i,0)}var Tk=k({"packages/ag-charts-core/src/utils/numbers.ts"(){"use strict"}});function e_(t){return Array.isArray(t)&&t.length>=2&&t.every(re)}function ib(t){return Array.isArray(t)&&t.length>=2&&t.every(e_)}function oY(t){const e=t[0],i=t[t.length-1];return ea(e[0],i[0],.001)&&ea(e[1],i[1],.001)}function i_(t){return Array.isArray(t)&&t.every(ib)&&t.every(oY)}function s_(t){if(t===null)return!0;if(!Se(t)||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(s_);case"MultiPolygon":return Array.isArray(i)&&i.every(i_);case"Polygon":return i_(i);case"MultiLineString":return Array.isArray(i)&&i.every(ib);case"LineString":return ib(i);case"MultiPoint":return ib(i);case"Point":return e_(i);default:return!1}}function rY(t){return Se(t)&&t.type==="Feature"&&s_(t.geometry)}function lY(t){return Se(t)&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(rY)}var Nk,cY=k({"packages/ag-charts-core/src/utils/geoJson.ts"(){"use strict";Tk(),vf(),Dk(),Nk=te(lY,"a GeoJSON object")}});function hY(){nb.clear(),Ok=1}function ia(t){const e=t.constructor,i=Object.hasOwn(e,"className")?e.className:e.name;if(!i)throw new Error(`The ${e} is missing the 'className' property.`);const s=(nb.get(i)??0)+1;return nb.set(i,s),`${i}-${s}`}function Nf(){return`ag-charts-${Ok++}`}function sb(){return crypto.randomUUID?.()??uY()}function uY(){const t=new Uint8Array(16);crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let e="";for(let i=0;i<t.length;i++)(i===4||i===6||i===8||i===10)&&(e+="-"),e+=t[i].toString(16).padStart(2,"0");return e}var nb,dY,Ok,pY=k({"packages/ag-charts-core/src/utils/id.ts"(){"use strict";nb=new Map,dY=Symbol("ElementID"),Ok=1}});function n_(t){if(!Ji(t))return!1;const e=Rk.exec(t);return Pk.test(e?e[2]:t)}function _k(t){let e,i;const s=Rk.exec(t);s&&([,e,t,i]=s);const n=Pk.exec(t);if(!n)throw new Error(`The number formatter is invalid: ${t}`);const[,a,o,r,l,c,h,u,d,p,g]=n;return{fill:a,align:o,sign:r,symbol:l,zero:c,width:parseInt(h),comma:u,precision:parseInt(d),trim:!!p,type:g,prefix:e,suffix:i}}function Ek(t){const e=typeof t=="string"?_k(t):t,{fill:i,align:s,sign:n="-",symbol:a,zero:o,width:r,comma:l,type:c,prefix:h="",suffix:u="",precision:d}=e;let{trim:p}=e;const g=d==null||isNaN(d);let f;if(!c)f=sa.g,p=!0;else if(c in sa&&c in Uh)f=g?Uh[c]:sa[c];else if(c in sa)f=sa[c];else if(c in Uh)f=Uh[c];else throw new Error(`The number formatter type is invalid: ${c}`);let x;return g?x=c?6:12:x=d,y=>{let b=f(y,x);return p&&(b=gY(b)),l&&(b=fY(b,l)),b=yY(y,b,n),a&&a!=="#"&&(b=`${a}${b}`),a==="#"&&c==="x"&&(b=`0x${b}`),c==="s"&&(b=`${b}${mY(y)}`),(c==="%"||c==="p")&&(b=`${b}%`),r!=null&&!isNaN(r)&&(b=xY(b,r,i??o,s)),b=`${h}${b}${u}`,b}}function ab(t){return Math.floor(Math.abs(t))}function gY(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function fY(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),n=t.substring(i);for(let a=s.length-3;a>0;a-=3)s.splice(a,0,e);return`${s.join("")}${n}`}function mY(t){return o_[a_(t)]}function a_(t){return Nt(Bk,t?Math.floor(Math.log10(Math.abs(t))/3)*3:0,zk)}function yY(t,e,i=""){if(i==="(")return t>=0?e:`(${e})`;const s=i==="+"?"+":"";return`${t>=0?s:r_}${e}`}function xY(t,e,i=" ",s=">"){let n=t;if(s===">"||!s)n=n.padStart(e,i);else if(s==="<")n=n.padEnd(e,i);else if(s==="^"){const a=Math.max(0,e-n.length),o=Math.ceil(a/2),r=Math.floor(a/2);n=n.padStart(o+n.length,i),n=n.padEnd(r+n.length,i)}return n}var Pk,Rk,Uh,sa,Bk,zk,o_,r_,bY=k({"packages/ag-charts-core/src/utils/numberFormat.ts"(){"use strict";Tk(),vf(),Pk=/^(?:(.)?([<>=^]))?([+\-( ])?([$€£¥₣₹#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,Rk=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,Uh={b:t=>ab(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>ab(t).toString(8),x:t=>ab(t).toString(16),X:t=>Uh.x(t).toUpperCase(),n:t=>Uh.d(t),"%":t=>`${ab(t*100).toFixed(0)}`},sa={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>sa.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>sa.f(t,e).toUpperCase(),g:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>sa.g(t,e).toUpperCase(),n:(t,e)=>sa.g(t,e),p:(t,e)=>sa.r(t*100,e),r:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const a=10**n;return(Math.round(i/a)*a).toFixed()},s:(t,e)=>{const i=a_(t);return sa.r(t/10**i,e)},"%":(t,e)=>sa.f(t*100,e)},Bk=-24,zk=24,o_={[Bk]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[zk]:"Y"},r_="\u2212"}}),nt={};cn(nt,{AsyncAwaitQueue:()=>tb,ErrorType:()=>Sk,EventEmitter:()=>Rh,Logger:()=>st,ModuleRegistry:()=>Gs,ModuleType:()=>mk,UnknownError:()=>Df,ValidationError:()=>ac,and:()=>De,array:()=>Ws,arrayLength:()=>Gh,arrayOf:()=>kt,arrayOfDefs:()=>es,arraysEqual:()=>Jo,attachDescription:()=>te,boolean:()=>K,callback:()=>he,callbackDefs:()=>Ce,callbackOf:()=>qd,circularSliceArray:()=>Jd,clamp:()=>Nt,color:()=>yt,colorStopsOrderValidator:()=>Xx,colorUnion:()=>Ra,constant:()=>ke,countFractionDigits:()=>Tf,countLines:()=>RO,createElement:()=>Bt,createElementId:()=>Nf,createId:()=>ia,createNumberFormatter:()=>Ek,createSvgElement:()=>ui,date:()=>Ea,debounce:()=>Z5,defined:()=>Tt,diffArrays:()=>QO,downloadUrl:()=>LO,dropFirstWhile:()=>$O,dropLastWhile:()=>KO,entries:()=>Ba,fillGradientDefaults:()=>kk,fillImageDefaults:()=>Ak,fillOptionsDef:()=>gt,fillPatternDefaults:()=>Ik,findMaxIndex:()=>Kr,findMaxValue:()=>iY,findMinIndex:()=>ep,findMinValue:()=>sY,first:()=>tp,fontFamilyFull:()=>Lf,fontOptionsDef:()=>ve,generateUUID:()=>sb,geoJson:()=>Nk,getAttribute:()=>Hh,getDocument:()=>So,getWindow:()=>be,googleFont:()=>Qx,gradientColorStops:()=>Af,gradientStrict:()=>Cf,greaterThan:()=>Qo,groupBy:()=>Jx,hasRequiredInPath:()=>Fh,htmlElement:()=>$x,inRange:()=>JO,instanceOf:()=>Zx,isArray:()=>zt,isBoolean:()=>NO,isColor:()=>EO,isDate:()=>zh,isDefined:()=>Bh,isEnumKey:()=>K5,isEnumValue:()=>Hx,isFiniteNumber:()=>re,isFunction:()=>Do,isHtmlElement:()=>_O,isInteger:()=>t_,isKeyOf:()=>Y5,isNegative:()=>eb,isNumber:()=>xf,isNumberEqual:()=>ea,isObject:()=>Se,isObjectLike:()=>$5,isPlainObject:()=>Me,isRegExp:()=>OO,isString:()=>Ji,isSymbol:()=>bf,isValidDate:()=>Wx,isValidNumberFormat:()=>n_,iterate:()=>Vh,joinFormatted:()=>Yd,lessThan:()=>Pa,levenshteinDistance:()=>BO,lineDashOptionsDef:()=>vt,modulus:()=>wk,number:()=>et,numberMin:()=>Yx,numberRange:()=>Mk,object:()=>Xd,optionsDefs:()=>ts,or:()=>Pt,parseColor:()=>wO,parseNumberFormat:()=>_k,pause:()=>Ck,positiveNumber:()=>U,positiveNumberNonZero:()=>If,ratio:()=>St,required:()=>pt,resetIds:()=>hY,roundTo:()=>Lk,safeCall:()=>xk,setAttribute:()=>Ht,setAttributes:()=>Wh,setDocument:()=>IO,setElementStyle:()=>ko,setElementStyles:()=>XO,setWindow:()=>AO,sortBasedOnArray:()=>UO,string:()=>J,stringLength:()=>Kx,stringifyValue:()=>Ux,strokeOptionsDef:()=>ct,themeOperator:()=>Qd,throttle:()=>yk,toArray:()=>wf,toIterable:()=>YO,typeUnion:()=>jh,undocumented:()=>At,union:()=>lt,unionSymbol:()=>Zd,unique:()=>HO,validate:()=>Vs});var R=k({"packages/ag-charts-core/src/main.ts"(){"use strict";G5(),V5(),N5(),W5(),q5(),TO(),Q5(),J5(),eY(),nY(),aY(),PO(),cY(),pY(),ZO(),bY(),Tk(),zO(),vf(),Dk()}}),Of,l_,Io,tr=k({"packages/ag-charts-community/src/module/module.ts"(){"use strict";Of=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},l_=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...t){for(const e of t){this.registerDependencies(e);const i=this.modules.find(s=>e.type===s.type&&("optionsKey"in e&&"optionsKey"in s?e.optionsKey===s.optionsKey:!0)&&e.identifier===s.identifier);if(i){if(e.packageType==="enterprise"&&i.packageType==="community"){const s=this.modules.indexOf(i);this.modules.splice(s,1,e),"optionsKey"in e&&this.modulesByOptionKey.set(e.optionsKey,e)}}else this.modules.push(e),"optionsKey"in e&&this.modulesByOptionKey.set(e.optionsKey,e)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){const e=new Set,i=this.modules.filter(a=>t.includes(a.type)),s=a=>{const o=this.dependencies.get(a);return o?.flatMap(s).concat(o)??[]},n=[];for(const a of i){const o="optionsKey"in a?a.optionsKey:a.contextKey;if(!e.has(o)){for(const r of s(o)){if(e.has(r))continue;const l=this.modulesByOptionKey.get(r);if(!l){n.push(r);continue}t.includes(l.type)&&(yield l,e.add(r))}yield a,e.add(o)}}if(n.length>0)throw new Error(`Could not resolve module dependencies: ${n}`)}registerDependencies(t){if(t.dependencies==null||t.dependencies.length===0)return;const e="optionsKey"in t?t.optionsKey:t.contextKey;this.dependencies.set(e,t.dependencies)}},Io=new l_}});function vY(t,e,i){return e>=t.x&&e<=t.x+t.width&&i>=t.y&&i<=t.y+t.height}function SY(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function MY(t){return t==null||t.height===0||t.width===0||isNaN(t.height)||isNaN(t.width)}function DY(t){let{x:e,y:i,width:s,height:n}=t;return(s==null||s>0)&&(n==null||n>0)?t:(e!=null&&s!=null&&s<0&&(s=-s,e=e-s),i!=null&&n!=null&&n<0&&(n=-n,i=i-n),{x:e,y:i,width:s,height:n})}var rc,ip=k({"packages/ag-charts-community/src/util/bboxinterface.ts"(){"use strict";rc={containsPoint:vY,equals:SY,isEmpty:MY,normalize:DY}}}),_f,Ef,Fk=k({"packages/ag-charts-community/src/util/interpolating.ts"(){"use strict";_f=Symbol("interpolate"),Ef=t=>t[_f]!=null}});function ob(t,e,i,s=1/0){const n={nearest:void 0,distanceSquared:s};for(const a of i){const o=a.distanceSquared(t,e);if(o===0)return{nearest:a,distanceSquared:0};o<n.distanceSquared&&(n.nearest=a,n.distanceSquared=o)}return n}function kY(t,e,i,s=1/0){const{x:n=t,y:a=e}=i.transformPoint?.(t,e)??{},o={nearest:void 0,distanceSquared:s};for(const r of i.children){const{nearest:l,distanceSquared:c}=r.nearestSquared(n,a,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}var rb=k({"packages/ag-charts-community/src/util/nearest.ts"(){"use strict"}}),sp,ut,Ft=k({"packages/ag-charts-community/src/scene/bbox.ts"(){"use strict";R(),ip(),Fk(),rb(),sp=class gf{constructor(e,i,s,n){this.x=e,this.y=i,this.width=s,this.height=n}static fromDOMRect({x:e,y:i,width:s,height:n}){return new gf(e,i,s,n)}static merge(e){let i=1/0,s=1/0,n=-1/0,a=-1/0;for(const o of e)o.x<i&&(i=o.x),o.y<s&&(s=o.y),o.x+o.width>n&&(n=o.x+o.width),o.y+o.height>a&&(a=o.y+o.height);return new gf(i,s,n-i,a-s)}static nearestBox(e,i,s){return ob(e,i,s)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON(){return{}}}}clone(){const{x:e,y:i,width:s,height:n}=this;return new gf(e,i,s,n)}equals(e){return rc.equals(this,e)}containsPoint(e,i){return rc.containsPoint(this,e,i)}intersection(e){if(!this.collidesBBox(e))return;const i=Nt(e.x,this.x,e.x+e.width),s=Nt(e.y,this.y,e.y+e.height),n=Nt(e.x,this.x+this.width,e.x+e.width),a=Nt(e.y,this.y+this.height,e.y+e.height);return new gf(i,s,n-i,a-s)}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,i){if(this.containsPoint(e,i))return 0;const s=e-Nt(this.x,e,this.x+this.width),n=i-Nt(this.y,i,this.y+this.height);return s*s+n*n}shrink(e,i){if(typeof e=="number")this.applyMargin(e,i);else for(const s of Object.keys(e)){const n=e[s];typeof n=="number"&&this.applyMargin(n,s)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(e,i){if(typeof e=="number")this.applyMargin(-e,i);else for(const s of Object.keys(e)){const n=e[s];typeof n=="number"&&this.applyMargin(-n,s)}return this}applyMargin(e,i){switch(i){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=e*2;break;case"horizontal":this.x+=e,this.width-=e*2;break;case void 0:this.x+=e,this.y+=e,this.width-=e*2,this.height-=e*2;break}}translate(e,i){return this.x+=e,this.y+=i,this}[_f](e,i){return new gf(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}},sp.zero=Object.freeze(new sp(0,0,0,0)),sp.NaN=Object.freeze(new sp(NaN,NaN,NaN,NaN)),ut=sp}}),c_,jk,h_,ne,Fi=k({"packages/ag-charts-community/src/util/debug.ts"(){"use strict";R(),c_=2e3,jk=Date.now(),h_=()=>{const t=Date.now()-jk;if(t>c_){const e=(Math.floor(t/100)/10).toFixed(1);st.log(`**** ${e}s since last log message ****`)}jk=Date.now()},ne={create(...t){return Object.assign((...i)=>{ne.check(...t)&&(typeof i[0]=="function"&&(i=wf(i[0]())),h_(),st.log(...i))},{check:()=>ne.check(...t),group:(i,s)=>ne.check(...t)?st.logGroup(i,s):s()})},check(...t){return t.length===0&&t.push(!0),wf(be("agChartsDebug")).some(i=>t.includes(i))},inDevelopmentMode(t){if(ne.check("dev"))return t()}}}});function u_({context:t,pixelRatio:e,width:i,height:s}){t.save(),t.resetTransform(),t.clearRect(0,0,Math.ceil(i*e),Math.ceil(s*e)),t.restore()}function d_(t){if(ne.check("canvas")){const e=t.save.bind(t),i=t.restore.bind(t);let s=0;Object.assign(t,{save(){e(),s++},restore(){if(s===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(s!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}var p_=k({"packages/ag-charts-community/src/scene/canvas/canvasUtil.ts"(){"use strict";Fi()}});function g_(t,e,i){return[Math.floor(t*i),Math.floor(e*i)]}var lb,Gk=k({"packages/ag-charts-community/src/scene/canvas/hdpiOffscreenCanvas.ts"(){"use strict";p_(),lb=class{constructor(t){const{width:e,height:i,pixelRatio:s,willReadFrequently:n=!1}=t;this.width=e,this.height=i,this.pixelRatio=s;const[a,o]=g_(e,i,s);this.canvas=new OffscreenCanvas(a,o),this.context=this.canvas.getContext("2d",{willReadFrequently:n}),this.context.setTransform(s,0,0,s,0,0),d_(this.context)}drawImage(t,e=0,i=0){return t.drawImage(this.canvas,e,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(t,e,i){if(!(t>0&&e>0))return;const{canvas:s,context:n}=this;if(t!==this.width||e!==this.height||i!==this.pixelRatio){const[a,o]=g_(t,e,i);s.width=a,s.height=o}n.setTransform(i,0,0,i,0,0),this.width=t,this.height=e,this.pixelRatio=i}clear(){u_(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}}}});function IY(t,e){Vk(t,e).optional=!0}function Vk(t,e){if(Object.getOwnPropertyDescriptor(t,np)==null&&Object.defineProperty(t,np,{value:{}}),Object.getOwnPropertyDescriptor(t,Pf)==null){const h=Object.getPrototypeOf(t)?.[Pf]?.slice()??[];Object.defineProperty(t,Pf,{value:h})}const i=t[np],s=e.toString();if(i[s]!=null)return i[s];i[s]={setters:[],getters:[],observers:[]};const n=Object.getOwnPropertyDescriptor(t,e);let a=n?.get,o=n?.set;if(a==null||o==null){const c=t[Pf];let h=c.indexOf(e);h===-1&&(h=c.push(e)-1),a??(a=function(){let u=this.__accessors;return u==null&&(u=c.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:u})),u[h]}),o??(o=function(u){let d=this.__accessors;d==null&&(d=c.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:d})),d[h]=u})}return Object.defineProperty(t,e,{set:function(c){const{setters:h,observers:u}=i[s];let d;h.some(p=>p.length>2)&&(d=a.call(this));for(const p of h)if(c=p(this,e,c,d),c===hb)return;o.call(this,c);for(const p of u)p(this,c,d)},get:function(){let c=a.call(this);for(const h of i[s].getters)if(c=h(this,e,c),c===hb)return;return c},enumerable:!0,configurable:!1}),i[s]}function $h(t,e,i){return(s,n)=>{const a=Vk(s,n);a.setters.push(t),e&&a.getters.unshift(e),i&&Object.assign(a,i)}}function f_(t){return(e,i)=>{Vk(e,i).observers.push(t)}}function cb(t){return typeof t<"u"&&np in t}function Kh(t){const e=new Set;for(;cb(t);)e.add(t?.[np]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(i=>Object.keys(i))}function m_(t){return Kh(t).reduce((e,i)=>(e[i]=t[i]??null,e),{})}var hb,np,Pf,ap=k({"packages/ag-charts-community/src/util/decorator.ts"(){"use strict";hb=Symbol("BREAK"),np="__decorator_config",Pf="__decorator_accessors"}});function hn(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every((i,s)=>hn(i,e[s])):Me(t)?Me(e)?Wk(t,e,hn):!1:t===e}function Wk(t,e,i){if(Object.is(t,e))return!0;for(const s of Object.keys(e))if(!(s in t))return!1;for(const s of Object.keys(t))if(!(s in e)||!i(t[s],e[s]))return!1;return!0}function Kt(...t){const e={};for(const i of t){if(!Se(i))continue;const s=cb(i)?Kh(i):Object.keys(i);for(const n of s)Me(e[n])&&Me(i[n])?e[n]=Kt(e[n],i[n]):e[n]??(e[n]=i[n])}return e}function Rf(...t){const e={};for(const i of t){if(!Se(i))continue;const s=cb(i)?Kh(i):Object.keys(i);for(const n of s)Me(e[n])&&Me(i[n])?e[n]=Rf(e[n],i[n]):n in e||(e[n]??(e[n]=i[n]))}return e}function ub(t,...e){return e&&zt(t)?t.map(i=>Kt(i,...e)):t}function y_(t,e){const i={};for(const[s,n]of Ba(t))i[s]=e(n,s,t);return i}function ft(t,e){const i={...t};for(const s of e)delete i[s];return i}function op(t,e){return(zt(e)?e:e.split(".")).reduce((s,n)=>s[n],t)}function Hk(t,e,i){const s=zt(e)?e.slice():e.split("."),n=s.pop();if(s.some(o=>db.has(o)))return;const a=s.reduce((o,r)=>o[r],t);return a[n]=i,a[n]}function Uk(t,e,i){if(i===void 0)return e;for(const s of t){const n=i[s];n!==void 0&&(e[s]=n)}return e}function Yh(t){return t==null||typeof t!="object"||!Me(t)||(Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const i=t[e];i!==null&&(typeof i=="object"||typeof i=="function")&&!Object.isFrozen(i)&&Yh(i)})),t}function x_(t,e){return Me(t)&&e in t}function AY(t,e){return x_(t,e)&&typeof t[e]=="string"}var db,Rt=k({"packages/ag-charts-community/src/util/object.ts"(){"use strict";R(),ap(),db=new Set(["__proto__","constructor","prototype"])}});function ot(t){return function(e,i){const s=`__${i}`;e[i]||CY(e,i,s,t)}}function na(t){return ot(t)}function $k(t){const e=t??{};return e.equals=Jo,ot(t)}function CY(t,e,i,s){const{changeCb:n,convertor:a,checkDirtyOnAssignment:o=!1}=s??{},r={changeCb:n,checkDirtyOnAssignment:o,convertor:a},l=TY(i,wY(LY(NY(i,r),r),r),r);Object.defineProperty(t,e,{set:l,get:function(){return this[i]},enumerable:!0,configurable:!0})}function LY(t,e){const{convertor:i}=e;return i?function(s){t.call(this,i(s))}:t}function wY(t,e){const{changeCb:i}=e;return i?function(s){const n=t.call(this,s);return n!==Kk&&i.call(this,this),n}:t}function TY(t,e,i){const{checkDirtyOnAssignment:s}=i;return s?function(n){const a=e.call(this,n);return n?._dirty===!0&&this.markDirty(t),a}:e}function NY(t,e){const{equals:i=Zh}=e;return function(s){const n=this[t];return i(s,n)?Kk:(this[t]=s,this.onChangeDetection(t),s)}}var Zh,Kk,aa=k({"packages/ag-charts-community/src/scene/changeDetectable.ts"(){"use strict";R(),Zh=(t,e)=>t===e,Kk=Symbol("no-change")}}),Yk,rp,er,za=k({"packages/ag-charts-community/src/scene/node.ts"(){"use strict";R(),Rt(),aa(),Yk=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(Yk||{}),rp=class hO{constructor(e){this.serialNumber=hO._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=ia(this),this.pointerEvents=0,this.scene=void 0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=e?.name,this.tag=e?.tag??NaN,this.zIndex=e?.zIndex??0,(e?.debugDirty??hO._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(e,i,s){const n=e?.toSVG();if(n==null||!n.elements.length&&!n.defs?.length)return;const a=ui("svg");if(a.setAttribute("width",String(i)),a.setAttribute("height",String(s)),a.setAttribute("viewBox",`0 0 ${i} ${s}`),n.defs?.length){const o=ui("defs");o.append(...n.defs),a.append(o)}return a.append(...n.elements),a.outerHTML}static*extractBBoxes(e,i){for(const s of e)if(!i||s.visible&&!s.transitionOut){const n=s.getBBox();n&&(yield n)}}get datum(){return this._datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){return this.scene?.layersManager}get imageLoader(){return this.scene?.imageLoader}get dirty(){return this._dirty}closestDatum(){for(const{datum:e}of this.traverseUp(!0))if(e!=null)return e}preRender(e,i=1){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=i,this.childNodeCounts.thisComplexity=i;for(const s of this.children()){const n=s.preRender(e);this.childNodeCounts.groups+=n.groups,this.childNodeCounts.nonGroups+=n.nonGroups,this.childNodeCounts.complexity+=n.complexity}return this.childNodeCounts}render(e){const{stats:i}=e;if(this._dirty=!1,this.debugDirtyProperties(),e.debugNodeSearch){const s=this.name??this.id;e.debugNodeSearch.some(n=>typeof n=="string"?n===s:n.test(s))&&(e.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(e){this.scene=e,this._debug=e?.layersManager?.debug;for(const i of this.children())i.setScene(e)}sortChildren(e){if(this.dirtyZIndex=!1,!this.childNodes)return;const i=[...this.childNodes].sort(e);this.childNodes.clear();for(const s of i)this.childNodes.add(s)}*traverseUp(e){let i=this;for(e&&(yield i);i=i.parentNode;)yield i}*children(){if(this.childNodes)for(const e of this.childNodes)yield e}*descendants(){for(const e of this.children())yield e,yield*e.descendants()}isLeaf(){return!this.childNodes?.size}isRoot(){return!this.parentNode}append(e){this.childNodes??(this.childNodes=new Set);for(const i of YO(e))i.parentNode?.removeChild(i),this.childNodes.add(i),i.parentNode=this,i.setScene(this.scene);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(e){return this.append(e),e}removeChild(e){if(!this.childNodes?.delete(e))throw new Error(`AG Charts - internal error, unknown child node ${e.name??e.id} in $${this.name??this.id}`);delete e.parentNode,e.setScene(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}remove(){this.parentNode?.removeChild(this)}clear(){for(const e of this.children())delete e.parentNode,e.setScene();this.childNodes?.clear(),this.invalidateCachedBBox()}destroy(){this.parentNode?.removeChild(this)}setProperties(e,i){if(i)for(const s of i)this[s]=e[s];else Object.assign(this,e);return this}containsPoint(e,i){return!1}pickNode(e,i){if(!(!this.visible||this.pointerEvents===1||!this.containsPoint(e,i))){if(this.childNodes!=null&&this.childNodes.size!==0){const s=[...this.children()];for(let n=s.length-1;n>=0;n--){const a=s[n].pickNode(e,i);if(a)return a}}else if(!this.isContainerNode)return this}}pickNodes(e,i,s=[]){if(!this.visible||this.pointerEvents===1||!this.containsPoint(e,i))return s;this.isContainerNode||s.push(this);for(const n of this.children())n.pickNodes(e,i,s);return s}invalidateCachedBBox(){this.cachedBBox!=null&&(this.cachedBBox=void 0,this.parentNode?.invalidateCachedBBox())}getBBox(){return this.cachedBBox==null&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(e){this.markDirty(e)}markDirty(e){const{_dirty:i}=this;e!=null&&this._debugDirtyProperties&&this.markDebugProperties(e),!(this.cachedBBox==null&&i)&&(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1,this.debugDirtyProperties();for(const e of this.children())e.markClean()}}markDebugProperties(e){const i=this._debugDirtyProperties?.get(e)??[],s=new Error().stack?.split(`
`).filter(n=>n!=="Error"&&!n.includes(".markDebugProperties")&&!n.includes(".markDirty")&&!n.includes("Object.assign ")&&!n.includes(`${this.constructor.name}.`))??"unknown";i.push(s[0].replace(" at ","").trim()),this._debugDirtyProperties?.set(e,i)}debugDirtyProperties(){this._debugDirtyProperties!=null&&(this._debugDirtyProperties.has("__first__")||this._debugDirtyProperties.forEach((e,i)=>{e.length>1&&(console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${i} (${e.length}x)`),e.forEach(s=>console.log(s)),console.groupEnd())}),this._debugDirtyProperties.clear())}onZIndexChange(){const{parentNode:e}=this;e&&(e.dirtyZIndex=!0)}toSVG(){}},rp._nextSerialNumber=0,rp._debugEnabled=!1,S([ot()],rp.prototype,"visible",2),S([na({equals:hn,changeCb:t=>t.onZIndexChange()})],rp.prototype,"zIndex",2),er=rp}});function di(t){return t%=oa,t+=oa,t%=oa,t}function OY(t){return t%=oa,t+=oa,t!==oa&&(t%=oa),t}function Bf(t){return t%=oa,t<-Math.PI?t+=oa:t>=Math.PI&&(t-=oa),t}function lc(t,e,i){const s=di(t),n=di(e),a=di(i);return n<a?n<=s&&s<=a:n>a?n<=s||s<=a:!0}function ji(t){return t/180*Math.PI}function _Y(t){return t/Math.PI*180}function pb(t,e){return t=di(t),e=di(e),e-t+(t>e?oa:0)}function b_(t){const e=di(t);return e<=lp?e/lp:e<=Math.PI?(Math.PI-e)/lp:e<=1.5*Math.PI?(e-Math.PI)/lp:(oa-e)/lp}function Zk(t,e,i){const s=b_(i);return t*s+e*Math.abs(1-s)}function Yr(t){return t?di(ji(t)):0}var oa,lp,pi=k({"packages/ag-charts-community/src/util/angle.ts"(){"use strict";oa=Math.PI*2,lp=Math.PI/2}}),cc,gb,fb,Xk,ue,Xh=k({"packages/ag-charts-community/src/util/color.ts"(){"use strict";R(),cc=(t,e,i)=>t*(1-i)+e*i,gb=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4},fb=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t},Xk=class fe{constructor(e,i,s,n=1){this.r=Nt(0,e||0,1),this.g=Nt(0,i||0,1),this.b=Nt(0,s||0,1),this.a=Nt(0,n||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!fe.parseHex(e):e.indexOf("rgb")>=0?!!fe.stringToRgba(e):fe.nameToHex.has(e.toLowerCase())}static fromString(e){if(e.indexOf("#")>=0)return fe.fromHexString(e);const i=fe.nameToHex.get(e.toLowerCase());if(i)return fe.fromHexString(i);if(e.indexOf("rgb")>=0)return fe.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static parseHex(e){e=e.replace(/ /g,"").slice(1);let i;switch(e.length){case 6:case 8:i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(`${e[s]}${e[s+1]}`,16));break;case 3:case 4:i=e.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if(i?.length>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(e){const i=fe.parseHex(e);if(i){const[s,n,a,o]=i;return new fe(s/255,n/255,a/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let i=-1,s=-1;for(let r=0;r<e.length;r++){const l=e[r];if(i===-1&&l==="(")i=r;else if(l===")"){s=r;break}}if(i===-1||s===-1)return;const a=e.substring(i+1,s).split(","),o=[];for(let r=0;r<a.length;r++){const l=a[r];let c=parseFloat(l);if(!Number.isFinite(c))return;l.indexOf("%")>=0?(c=Nt(0,c,100),c/=100):r===3?c=Nt(0,c,1):(c=Nt(0,c,255),c/=255),o.push(c)}return o}static fromRgbaString(e){const i=fe.stringToRgba(e);if(i){if(i.length===3)return new fe(i[0],i[1],i[2]);if(i.length===4)return new fe(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new fe(e[0],e[1],e[2],e[3]);if(e.length===3)return new fe(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s,n=1){const a=fe.HSBtoRGB(e,i,s);return new fe(a[0],a[1],a[2],n)}static fromHSL(e,i,s,n=1){const a=fe.HSLtoRGB(e,i,s);return new fe(a[0],a[1],a[2],n)}static fromOKLCH(e,i,s,n=1){const a=fe.OKLCHtoRGB(e,i,s);return new fe(a[0],a[1],a[2],n)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+fe.padHex(Math.round(this.r*255).toString(16))+fe.padHex(Math.round(this.g*255).toString(16))+fe.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=fe.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,e);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return fe.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,i,s){const n=gb(e),a=gb(i),o=gb(s),r=Math.cbrt(.4122214708*n+.5363325363*a+.0514459929*o),l=Math.cbrt(.2119034982*n+.6806995451*a+.1073969566*o),c=Math.cbrt(.0883024619*n+.2817188376*a+.6299787005*o),h=.2104542553*r+.793617785*l-.0040720468*c,u=1.9779984951*r-2.428592205*l+.4505937099*c,d=.0259040371*r+.7827717662*l-.808675766*c,p=Math.atan2(d,u)*180/Math.PI,g=h,f=Math.hypot(u,d),x=p>=0?p:p+360;return[g,f,x]}static OKLCHtoRGB(e,i,s){const n=e,a=i*Math.cos(s*Math.PI/180),o=i*Math.sin(s*Math.PI/180),r=(n+.3963377774*a+.2158037573*o)**3,l=(n-.1055613458*a-.0638541728*o)**3,c=(n-.0894841775*a-1.291485548*o)**3,h=4.0767416621*r-3.3077115913*l+.2309699292*c,u=-1.2684380046*r+2.6097574011*l-.3413193965*c,d=-.0041960863*r-.7034186147*l+1.707614701*c,p=fb(h),g=fb(u),f=fb(d);return[p,g,f]}static RGBtoHSL(e,i,s){const n=Math.min(e,i,s),a=Math.max(e,i,s),o=(a+n)/2;let r,l;if(a===n)r=0,l=0;else{const c=a-n;l=o>.5?c/(2-a-n):c/(a+n),a===e?r=(i-s)/c+(i<s?6:0):a===i?r=(s-e)/c+2:r=(e-i)/c+4,r*=360/6}return[r,l,o]}static HSLtoRGB(e,i,s){if(e=(e%360+360)%360,i===0)return[s,s,s];const n=s<.5?s*(1+i):s+i-s*i,a=2*s-n;function o(h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?a+(n-a)*6*h:h<1/2?n:h<2/3?a+(n-a)*(2/3-h)*6:a}const r=o(e/360+1/3),l=o(e/360),c=o(e/360-1/3);return[r,l,c]}static RGBtoHSB(e,i,s){const n=Math.min(e,i,s),a=Math.max(e,i,s),o=a===0?0:(a-n)/a;let r=0;if(n!==a){const l=a-n,c=(a-e)/l,h=(a-i)/l,u=(a-s)/l;e===a?r=u-h:i===a?r=2+c-u:r=4+h-c,r/=6,r<0&&(r=r+1)}return[r*360,o,a]}static HSBtoRGB(e,i,s){e=(e%360+360)%360/360;let n=0,a=0,o=0;if(i===0)n=a=o=s;else{const r=(e-Math.floor(e))*6,l=r-Math.floor(r),c=s*(1-i),h=s*(1-i*l),u=s*(1-i*(1-l));switch(r>>0){case 0:n=s,a=u,o=c;break;case 1:n=h,a=s,o=c;break;case 2:n=c,a=s,o=u;break;case 3:n=c,a=h,o=s;break;case 4:n=u,a=c,o=s;break;case 5:n=s,a=c,o=h;break}}return[n,a,o]}static mix(e,i,s){return new fe(cc(e.r,i.r,s),cc(e.g,i.g,s),cc(e.b,i.b,s),cc(e.a,i.a,s))}static lighten(e,i){const s=fe.RGBtoOKLCH(e.r,e.g,e.b);return fe.fromOKLCH(Nt(0,s[0]+i,1),s[1],s[2])}static darken(e,i){const s=fe.RGBtoOKLCH(e.r,e.g,e.b);return fe.fromOKLCH(Nt(0,s[0]-i,1),s[1],s[2])}static interpolate(e,i){const s=1/(e.length-1),n=e.map(a=>fe.RGBtoOKLCH(a.r,a.g,a.b));return Array.from({length:i},(a,o)=>{const r=o/(i-1),l=e.length<=2?0:Math.min(Math.floor(r*(e.length-1)),e.length-2),c=(r-l*s)/s,h=n[l],u=n[l+1];return fe.fromOKLCH(cc(h[0],u[0],c),cc(h[1],u[1],c),cc(h[2],u[2],c))})}},Xk.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]),ue=Xk}}),zf,mb=k({"packages/ag-charts-community/src/scale/abstractScale.ts"(){"use strict";zf=class{ticks(t,e,i){}niceDomain(t,e=this.domain){return e}tickFormatter(t){}datumFormatter(t){}get bandwidth(){}get step(){}get inset(){}}}}),cp,qk=k({"packages/ag-charts-community/src/scale/invalidating.ts"(){"use strict";cp=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})}}}),Qk,yb,Jk,v_,qh,xb=k({"packages/ag-charts-community/src/scale/colorScale.ts"(){"use strict";R(),Xh(),mb(),qk(),Qk=t=>{const e=ue.fromString(t),[i,s,n]=ue.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:n,a:e.a}},yb=1e-6,Jk=t=>t.c<yb||t.l<yb||t.l>1-yb,v_=(t,e,i)=>{i=Nt(0,i,1);let s;if(Jk(t))s=e.h;else if(Jk(e))s=t.h;else{const r=t.h;let l=e.h;const c=e.h-t.h;c>180?l-=360:c<-180&&(l+=360),s=r*(1-i)+l*i}const n=t.c*(1-i)+e.c*i,a=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return ue.fromOKLCH(a,n,s,o)},qh=class extends zf{constructor(){super(...arguments),this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Qk)}update(){const{domain:t,range:e}=this;t.length<2&&(st.warnOnce("`colorDomain` should have at least 2 values."),t.length===0?t.push(0,1):t.length===1&&t.push(t[0]+1));for(let i=1;i<t.length;i++){const s=t[i-1],n=t[i];if(s>=n){st.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((a,o)=>a-o);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Qk)}normalizeDomains(...t){return{domain:t.flat(),animatable:!0}}toDomain(){}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,n=e[0],a=e.at(-1),o=i[0],r=i[i.length-1];if(t<=n)return o;if(t>=a)return r;let l,c;if(e.length===2){const d=(t-n)/(a-n),p=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(d*(i.length-1)),i.length-2),c=(d-l*p)/p}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const d=e[l],p=e[l+1];c=(t-d)/(p-d)}const h=s[l],u=s[l+1];return v_(h,u,c).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&st.warnOnce("Expected update to not invalidate scale"))}},S([cp],qh.prototype,"domain",2),S([cp],qh.prototype,"range",2)}}),Ff,bb=k({"packages/ag-charts-community/src/scene/gradient/gradient.ts"(){"use strict";R(),xb(),Ff=class{constructor(t,e=[],i){this.colorSpace=t,this.stops=e,this.bbox=i,this._cache=void 0}createGradient(t,e,i){const s=this.bbox??e;if(isNaN(s.x)||isNaN(s.y))return;if(this._cache!=null&&this._cache.ctx===t&&this._cache.bbox.equals(s))return this._cache.gradient;const{stops:n,colorSpace:a}=this;if(n.length===0)return;if(n.length===1)return n[0].color;let o=this.createCanvasGradient(t,s,i);if(o==null)return;const r=a==="oklch",l=.05;let c=n[0];o.addColorStop(c.stop,c.color);for(let h=1;h<n.length;h+=1){const u=n[h];if(r){const d=new qh;d.domain=[c.stop,u.stop],d.range=[c.color,u.color];for(let p=c.stop+l;p<u.stop;p+=l)o.addColorStop(p,d.convert(p))}o.addColorStop(u.stop,u.color),c=u}return"createPattern"in o&&(o=o.createPattern()),this._cache={ctx:t,bbox:s,gradient:o},o}toSvg(t){const e=this.bbox??t,i=this.createSvgGradient(e);return this.stops.forEach(({stop:s,color:n})=>{const a=ui("stop");a.setAttribute("offset",`${s}`),a.setAttribute("stop-color",`${n}`),i.appendChild(a)}),i}}}}),tI,S_=k({"packages/ag-charts-community/src/scene/gradient/conicGradient.ts"(){"use strict";R(),pi(),bb(),tI=class extends Ff{constructor(t,e,i=0,s){super(t,e,s),this.angle=i}createCanvasGradient(t,e,i){const{angle:n}=this,a=Yr(n+-90),o=i?.centerX??e.x+e.width*.5,r=i?.centerY??e.y+e.height*.5;return t.createConicGradient(a,o,r)}createSvgGradient(t){return ui("linearGradient")}}}}),eI,M_=k({"packages/ag-charts-community/src/scene/gradient/linearGradient.ts"(){"use strict";R(),pi(),bb(),eI=class extends Ff{constructor(t,e,i=0,s){super(t,e,s),this.angle=i}getGradientPoints(t){const{angle:i}=this,s=Yr(i+90),n=Math.cos(s),a=Math.sin(s),o=t.width,r=t.height,l=t.x+o*.5,c=t.y+r*.5,h=Math.sqrt(r*r+o*o)/2,u=Math.atan2(r,o);let d;s<Math.PI/2?d=s:s<Math.PI?d=Math.PI-s:s<1.5*Math.PI?d=s-Math.PI:d=2*Math.PI-s;const p=h*Math.abs(Math.cos(d-u));return{x0:l+n*p,y0:c+a*p,x1:l-n*p,y1:c-a*p}}createCanvasGradient(t,e){const{x0:i,y0:s,x1:n,y1:a}=this.getGradientPoints(e);if(!(isNaN(i)||isNaN(s)||isNaN(n)||isNaN(a)))return t.createLinearGradient(i,s,n,a)}createSvgGradient(t){const{x0:e,y0:i,x1:s,y1:n}=this.getGradientPoints(t),a=ui("linearGradient");return a.setAttribute("x1",String(e)),a.setAttribute("y1",String(i)),a.setAttribute("x2",String(s)),a.setAttribute("y2",String(n)),a.setAttribute("gradientUnits","userSpaceOnUse"),a}}}}),D_,EY=k({"packages/ag-charts-community/src/scene/gradient/radialGradient.ts"(){"use strict";R(),bb(),D_=class extends Ff{constructor(t,e,i){super(t,e,i)}createCanvasGradient(t,e,i){const s=i?.centerX??e.x+e.width*.5,n=i?.centerY??e.y+e.height*.5,a=i?.innerRadius??0,o=i?.outerRadius??Math.hypot(e.width*.5,e.height*.5)/Math.SQRT2;return t.createRadialGradient(s,n,a,s,n,o)}createSvgGradient(t){const e=t.x+t.width*.5,i=t.y+t.height*.5,s=ui("radialGradient");return s.setAttribute("cx",String(e)),s.setAttribute("cy",String(i)),s.setAttribute("r",String(Math.hypot(t.width*.5,t.height*.5)/Math.SQRT2)),s.setAttribute("gradientUnits","userSpaceOnUse"),s}}}});function hp(t){return t instanceof wt||t instanceof up}var I,wt,up,mt=k({"packages/ag-charts-community/src/util/properties.ts"(){"use strict";R(),ap(),Rt(),I=IY,wt=class{handleUnknownProperties(t,e){}set(t){const{className:e=this.constructor.name}=this.constructor;if(typeof t!="object")return st.warn(`unable to set ${e} - expecting a properties object`),this;const i=new Set(Object.keys(t));for(const s of Kh(this))if(i.has(s)){const n=t[s],a=this;if(hp(a[s]))if(a[s]instanceof up){const o=a[s].reset(n);o!=null?a[s]=o:st.warn(`unable to set [${s}] - expecting a properties array`)}else a[s].set(n);else Me(n)?a[s]=Rf(n,a[s]??{}):a[s]=n;i.delete(s)}this.handleUnknownProperties(i,t);for(const s of i)st.warn(`unable to set [${s}] in ${e} - property is unknown`);return this}toJson(){return Kh(this).reduce((t,e)=>{const i=this[e];return t[e]=hp(i)?i.toJson():i,t},{})}},up=class t5 extends Array{constructor(e,...i){super(i.length);const n=(a=>!!a?.prototype?.constructor?.name)(e)?a=>new e().set(a):e;Object.defineProperty(this,"itemFactory",{value:n,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(zt(e)){this.length=e.length;for(let i=0;i<e.length;i++)this[i]=this.itemFactory(e[i])}return this}reset(e){if(Array.isArray(e))return new t5(this.itemFactory,...e)}toJson(){return this.map(e=>e?.toJson?.()??e)}}}});function PY(t){let e;for(const i of t)if(i?.stop!=null){if(e!=null&&i.stop<e)return!1;e=i.stop}return!0}function k_(t){return t.flatMap((e,i)=>{const{stop:s}=e,n=t.at(i+1)?.color;return n!=null?[e,{stop:s,color:n}]:[e]})}function RY(t,e){const i=e==="discrete"?1:0,s=t.map((n,a,{length:o})=>({stop:(a+i)/(o-1+i),color:n}));return e==="discrete"?k_(s):s}function I_(t,e,i,s="continuous"){const n=t.map(g=>typeof g=="string"?{color:g}:g);if(n.length===0)return RY(e,s);if(!PY(n))return st.warnOnce("[fills] must have the stops defined in ascending order"),[];const a=Math.min(...i),o=Math.max(...i),r=s==="discrete",l=new Float64Array(n.length);let c=0,h=-1;for(let g=0;g<n.length;g+=1){const f=n[g];if(g>=h){h=n.length-1;for(let y=g+1;y<n.length;y+=1)if(n[y]?.stop!=null){h=y;break}}let x=f?.stop;if(x==null){const y=n[c]?.stop,b=n[h]?.stop,v=y??a,M=b??o,D=r&&y==null?1:0;x=v+(M-v)*(g-c+D)/(h-c+D)}else c=g;l[g]=Math.max(0,Math.min(1,(x-a)/(o-a)))}let u=n.find(g=>g.color!=null)?.color,d;const p=n.map((g,f)=>{let x=g?.color;const y=l[f];return x!=null?u=x:u!=null?x=u:(d==null&&(d=new qh,d.domain=[0,1],d.range=e),x=d.convert(y)),{stop:y,color:x}});return s==="discrete"?k_(p):p}var vb,A_=k({"packages/ag-charts-community/src/scene/gradient/stops.ts"(){"use strict";R(),xb(),mt(),mt(),vb=class extends wt{constructor(){super(...arguments),this.color="black"}},S([I],vb.prototype,"stop",2),S([I],vb.prototype,"color",2)}}),C_,BY=k({"packages/ag-charts-community/src/scene/image/image.ts"(){"use strict";R(),pi(),C_=class{constructor(t,e){this.imageLoader=t,this._cache=void 0,this.url=e.url,this.backgroundFill=e.backgroundFill??"black",this.backgroundFillOpacity=e.backgroundFillOpacity??1,this.repeat=e.repeat??"no-repeat",this.width=e.width,this.height=e.height,this.fit=e.fit??"stretch",this.rotation=e.rotation??0}createCanvasImage(t,e,i,s){if(!e)return null;const[n,a]=this.getSize(e.width,e.height,i,s);return n<1||a<1?(st.warnOnce("Image fill is too small to render, ignoring."),null):t.createPattern(e,this.repeat)}getSize(t,e,i,s){const{fit:n}=this;let a=t,o=e,r=1;const l=i/s,c=t/e;return n==="stretch"||t===0||e===0?(a=i,o=s):n==="contain"?r=c>l?i/t:s/e:n==="cover"&&(r=c>l?s/e:i/t),[Math.max(1,a*r),Math.max(1,o*r)]}setImageTransform(t,e){if(typeof t=="string")return;const{url:i,rotation:s,width:n,height:a}=this,o=this.imageLoader?.loadImage(i);if(!o)return;const r=Yr(s),l=Math.cos(r),c=Math.sin(r),[h,u]=this.getSize(o.width,o.height,n??e.width,a??e.height),d=h/o.width,p=u/o.height,g=e.x+e.width/2,f=e.y+e.height/2,x=l*h-c*u,y=c*h+l*u,b=x/2,v=y/2;t?.setTransform(new DOMMatrix([l*d,c*p,-c*d,l*p,g-b,f-v]))}createPattern(t,e,i,s){const n=this.width??e,a=this.height??i,o=this._cache;if(o!=null&&o.ctx===t&&o.width===n&&o.height===a)return o.pattern;const r=this.imageLoader?.loadImage(this.url,s),l=this.createCanvasImage(t,r,n,a);return l==null?this.backgroundFill:(this._cache={ctx:t,pattern:l,width:n,height:a},l)}toSvg(t,e){const{url:i,rotation:s,backgroundFill:n,backgroundFillOpacity:a}=this,{x:o,y:r,width:l,height:c}=t,h=ui("pattern");h.setAttribute("viewBox",`0 0 ${l} ${c}`),h.setAttribute("x",String(o)),h.setAttribute("y",String(r)),h.setAttribute("width",String(l)),h.setAttribute("height",String(c)),h.setAttribute("patternUnits","userSpaceOnUse");const u=ui("rect");u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("width",String(l)),u.setAttribute("height",String(c)),u.setAttribute("fill",n),u.setAttribute("fill-opacity",String(a)),h.appendChild(u);const d=ui("image");return d.setAttribute("href",i),d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width",String(l)),d.setAttribute("height",String(c)),d.setAttribute("preserveAspectRatio","none"),d.setAttribute("transform",`scale(${1/e}) rotate(${s}, ${l/2}, ${c/2})`),h.appendChild(d),h}}}});function zY(t){if(!t)return;const e=[];let i=0,s;for(;i<t.length;){const n=L_.exec(t.slice(i));let a;if(n==null){if(!s){st.warnOnce(`Invalid SVG path, error at index ${i}: Missing command.`);return}a=s}else a=n[1],i+=n[0].length;const o=FY(a,t,i);if(!o)return;i=o[0],s=a,e.push(o[1])}return e}function FY(t,e,i){const s=T_[t.toLocaleLowerCase()],n={command:t,params:[]};for(const a of s){const o=e.slice(i),r=a.exec(o);if(r!=null){n.params.push(parseFloat(r[0])),i+=r[0].length;const l=w_.exec(o.slice(r[0].length));l!=null&&(i+=l[0].length)}else{if(n.params.length===1)return[i,n];st.warnOnce(`Invalid SVG path, error at index ${i}: No path segment parameters for command [${t}]`);return}}return[i,n]}var L_,Le,w_,iI,T_,jY=k({"packages/ag-charts-community/src/util/svg.ts"(){"use strict";R(),L_=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,Le=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,w_=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,iI=/^[01]/,T_={z:[],h:[Le],v:[Le],m:[Le,Le],l:[Le,Le],t:[Le,Le],s:[Le,Le,Le,Le],q:[Le,Le,Le,Le],c:[Le,Le,Le,Le,Le,Le],a:[Le,Le,Le,iI,iI,Le,Le]}}});function jf(t,e,i,s){const n=t-i,a=e-s;return n*n+a*a}function Gf(t,e,i,s,n,a,o){if(i===n&&s===a)return Math.min(o,jf(t,e,i,s));const r=n-i,l=a-s,c=Math.max(0,Math.min(1,((t-i)*r+(e-s)*l)/(r*r+l*l))),h=i+c*r,u=s+c*l;return Math.min(o,jf(t,e,h,u))}function GY(t,e,i,s,n,a,o,r,l){r&&([o,a]=[a,o]);const c=Math.atan2(e-s,t-i);if(!lc(c,a,o)){const u=i+Math.cos(a)*n,d=s+Math.sin(a)*n,p=i+Math.cos(a)*n,g=s+Math.sin(a)*n;return Math.min(l,jf(t,e,u,d),jf(t,e,p,g))}const h=n-Math.sqrt(jf(t,e,i,s));return Math.min(l,h*h)}var sI=k({"packages/ag-charts-community/src/util/distance.ts"(){"use strict";pi()}});function VY(t,e){const i=-e/t;return t!==0&&i>=0&&i<=1?[i]:[]}function WY(t,e,i){if(t===0)return VY(e,i);const s=e*e-4*t*i,n=[];if(s===0){const a=-e/(2*t);a>=0&&a<=1&&n.push(a)}else if(s>0){const a=Math.sqrt(s),o=(-e-a)/(2*t),r=(-e+a)/(2*t);o>=0&&o<=1&&n.push(o),r>=0&&r<=1&&n.push(r)}return n}function HY(t,e,i,s){if(t===0)return WY(e,i,s);const n=e/t,a=i/t,o=s/t,r=(3*a-n*n)/9,l=(9*n*a-27*o-2*n*n*n)/54,c=r*r*r+l*l,h=1/3,u=[];if(c>=0){const d=Math.sqrt(c),p=Math.sign(l+d)*Math.pow(Math.abs(l+d),h),g=Math.sign(l-d)*Math.pow(Math.abs(l-d),h),f=Math.abs(Math.sqrt(3)*(p-g)/2),x=-h*n+(p+g);if(x>=0&&x<=1&&u.push(x),f===0){const y=-h*n-(p+g)/2;y>=0&&y<=1&&u.push(y)}}else{const d=Math.acos(l/Math.sqrt(-r*r*r)),p=h*n,g=2*Math.sqrt(-r),f=g*Math.cos(h*d)-p,x=g*Math.cos(h*(d+2*Math.PI))-p,y=g*Math.cos(h*(d+4*Math.PI))-p;f>=0&&f<=1&&u.push(f),x>=0&&x<=1&&u.push(x),y>=0&&y<=1&&u.push(y)}return u}var UY=k({"packages/ag-charts-community/src/scene/polyRoots.ts"(){"use strict"}});function dp(t,e,i,s,n,a,o,r){const l=(i-t)*(r-a)-(s-e)*(o-n);if(l===0)return 0;const c=((o-n)*(e-a)-(t-n)*(r-a))/l,h=((i-t)*(e-a)-(s-e)*(t-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?1:0}function $Y(t,e,i,s,n,a,o,r,l,c,h,u){let d=0;const p=c-u,g=h-l,f=l*(u-c)-c*(h-l),x=N_(t,i,n,o),y=N_(e,s,a,r),b=p*x[0]+g*y[0],v=p*x[1]+g*y[1],M=p*x[2]+g*y[2],D=p*x[3]+g*y[3]+f,L=HY(b,v,M,D);for(const A of L){const C=A*A,T=A*C,N=x[0]*T+x[1]*C+x[2]*A+x[3],P=y[0]*T+y[1]*C+y[2]*A+y[3];let O;l===h?O=(P-c)/(u-c):O=(N-l)/(h-l),O>=0&&O<=1&&d++}return d}function N_(t,e,i,s){return[-t+3*e-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function O_(t,e,i,s,n,a,o,r,l,c){if(isNaN(t)||isNaN(e))return 0;a&&([n,s]=[s,n]);const h=(c-r)/(l-o),u=r-h*o,d=Math.pow(h,2)+1,p=2*(h*(u-e)-t),g=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*d*g;if(f<0)return 0;const x=(-p+Math.sqrt(f))/2/d,y=(-p-Math.sqrt(f))/2/d;let b=0;return[x,y].forEach(v=>{if(!(v>=Math.min(o,l)&&v<=Math.max(o,l)))return;const D=h*v+u,L=v-t,A=D-e,C=Math.atan2(A,L);lc(C,s,n)&&b++}),b}var __=k({"packages/ag-charts-community/src/scene/intersection.ts"(){"use strict";pi(),UY()}});function Sb(t,e,i,s,n){return(1-n)**3*t+3*(1-n)**2*n*e+3*(1-n)*n**2*i+n**3*s}function Mb(t,e,i,s,n){if(n<=Math.min(t,s))return t<s?0:1;if(n>=Math.max(t,s))return t<s?1:0;let a=0,o=1,r=NaN;for(let l=0;l<12;l+=1)r=(a+o)/2,Sb(t,e,i,s,r)<n?a=r:o=r;return r}function Db(t,e,i,s,n,a,o,r,l){const c=(1-l)*t+l*i,h=(1-l)*e+l*s,u=(1-l)*i+l*n,d=(1-l)*s+l*a,p=(1-l)*n+l*o,g=(1-l)*a+l*r,f=(1-l)*c+l*u,x=(1-l)*h+l*d,y=(1-l)*u+l*p,b=(1-l)*d+l*g,v=(1-l)*f+l*y,M=(1-l)*x+l*b;return[[{x:t,y:e},{x:c,y:h},{x:f,y:x},{x:v,y:M}],[{x:v,y:M},{x:y,y:b},{x:p,y:g},{x:o,y:r}]]}function nI(t,e,i,s){const n=-t+3*e-3*i+s,a=2*(t-2*e+i),o=-t+e;if(n===0){if(a!==0){const l=-o/a;if(l>0&&l<1)return[l]}return[]}const r=a*a-4*n*o;if(r>=0){const l=Math.sqrt(r),c=(-a+l)/(2*n),h=(-a-l)/(2*n);return[c,h].filter(u=>u>0&&u<1)}return[]}function E_(t,e,i,s,n,a,o,r){const l=nI(t,i,n,o),c=nI(e,s,a,r);return[...l,...c]}var kb=k({"packages/ag-charts-community/src/scene/util/bezier.ts"(){"use strict"}}),Qh,Ib=k({"packages/ag-charts-community/src/scene/extendedPath2D.ts"(){"use strict";R(),pi(),sI(),Ft(),__(),kb(),Qh=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}appendSvg(t){let e=0,i=0,s,n,a=0,o=0;for(const{command:r,params:l}of t){s??(s=l[0]),n??(n=l[1]);const c=r===r.toLowerCase(),h=c?s:0,u=c?n:0;switch(r.toLowerCase()){case"m":this.moveTo(h+l[0],u+l[1]),s=h+l[0],n=u+l[1],e=s,i=n;break;case"c":this.cubicCurveTo(h+l[0],u+l[1],h+l[2],u+l[3],h+l[4],u+l[5]),a=h+l[2],o=u+l[3],s=h+l[4],n=u+l[5];break;case"s":this.cubicCurveTo(s+s-a,n+n-o,h+l[0],u+l[1],h+l[2],u+l[3]),a=h+l[0],o=u+l[1],s=h+l[2],n=u+l[3];break;case"q":this.cubicCurveTo((h+2*l[0])/3,(u+2*l[1])/3,(2*l[0]+l[2])/3,(2*l[1]+l[3])/3,l[2],l[3]),a=l[0],o=l[1],s=l[2],n=l[3];break;case"t":this.cubicCurveTo((s+2*(s+s-a))/3,(n+2*(n+n-o))/3,(2*(s+s-a)+l[0])/3,(2*(n+n-o)+l[1])/3,l[0],l[1]),a=s+s-a,o=n+n-o,s=l[0],n=l[1];break;case"a":this.ellipse(s,n,l[0],l[1],l[2]*Math.PI/180,l[3],l[4],h+l[5],u+l[6]),s=h+l[5],n=u+l[6];break;case"h":this.lineTo(h+l[0],n),s=h+l[0];break;case"l":this.lineTo(h+l[0],u+l[1]),s=h+l[0],n=u+l[1];break;case"v":this.lineTo(s,u+l[0]),n=u+l[0];break;case"z":this.closePath(),s=e,n=i;break;default:throw new Error(`Could not translate command '${r}' with '${l.join(" ")}'`)}}}ellipse(t,e,i,s,n,a,o,r,l){i=Math.abs(i),s=Math.abs(s);const c=(t-r)/2,h=(e-l)/2,u=Math.sin(n),d=Math.cos(n),p=d*c+u*h,g=-u*c+d*h,f=p/i,x=g/s;let y=f*f+x*x,b=(t+r)/2,v=(e+l)/2,M=0,D=0;y>=1?(y=Math.sqrt(y),i*=y,s*=y):(y=Math.sqrt(1/y-1),a===o&&(y=-y),M=y*i*x,D=-y*s*f,b+=d*M-u*D,v+=u*M+d*D);const L=Math.atan2((g-D)/s,(p-M)/i),A=Math.atan2((-g-D)/s,(-p-M)/i)-L,C=L+A,T=!!(1-o);this.ellipticalArc(b,v,i,s,n,L,C,T)}ellipticalArc(t,e,i,s,n,a,o,r){r&&([a,o]=[o,a]);const l=[],c=.5522847498307935,h=Math.sin(a),u=Math.cos(a),d=Math.sin(n),p=Math.cos(n);let g=p*u*i-d*h*s,f=d*u*i+p*h*s,x=-p*h*i-d*u*s,y=-d*h*i+p*u*s;l.push(g+t,f+e),o-=a,o=di(o);const b=Math.PI/2,v=Math.floor(o/b),M=o%b;for(let D=0;D<v;D++)l.push(g+x*c+t,f+y*c+e,g*c+x+t,f*c+y+e,x+t,y+e),[g,x]=[x,-g],[f,y]=[y,-f];if(M>0){const D=Math.sin(M),L=Math.cos(M),A=Math.tan(M/4)*(4/3),C=L+A*D,T=D-A*L;l.push(g+x*A+t,f+y*A+e,g*C+x*T+t,f*C+y*T+e,g*L+x*D+t,f*L+y*D+e)}if(r)for(let D=0,L=l.length-2;D<L;D+=2,L-=2)[l[D],l[L]]=[l[L],l[D]],[l[D+1],l[L+1]]=[l[L+1],l[D+1]];for(let D=2;D<l.length;D+=6){const[L,A,C,T,N,P]=l.slice(D,D+6);this.cubicCurveTo(L,A,C,T,N,P)}}roundRect(t,e,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(t,e+n),this.arc(t+n,e+n,n,Math.PI,1.5*Math.PI),this.lineTo(t+n,e),this.lineTo(t+i-n,e),this.arc(t+i-n,e+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+n),this.lineTo(t+i,e+s-n),this.arc(t+i-n,e+s-n,n,0,Math.PI/2),this.lineTo(t+i-n,e+s),this.lineTo(t+n,e+s),this.arc(t+ +n,e+s-n,n,Math.PI/2,Math.PI),this.lineTo(t,e+s-n),this.closePath()}arc(t,e,i,s,n,a){this.openedPath=!0,this.path2d.arc(t,e,i,s,n,a),this.commands.push(2),this.params.push(t,e,i,s,n,a?1:0)}cubicCurveTo(t,e,i,s,n,a){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,s,n,a),this.commands.push(3),this.params.push(t,e,i,s,n,a)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){const i=this.commands,s=this.params,n=i.length,a=-1e4,o=-1e4;let r=NaN,l=NaN,c=0,h=0,u=0;for(let d=0,p=0;d<n;d++)switch(i[d]){case 0:u+=dp(r,l,c,h,a,o,t,e),c=s[p++],r=c,h=s[p++],l=h;break;case 1:u+=dp(c,h,s[p++],s[p++],a,o,t,e),c=s[p-2],h=s[p-1];break;case 3:u+=$Y(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],a,o,t,e),c=s[p-2],h=s[p-1];break;case 2:{const g=s[p++],f=s[p++],x=s[p++],y=s[p++],b=s[p++],v=!!s[p++];if(u+=O_(g,f,x,y,b,v,a,o,t,e),!isNaN(r)){const M=g+Math.cos(y)*x,D=f+Math.sin(y)*x;u+=dp(c,h,M,D,a,o,t,e)}c=g+Math.cos(b)*x,h=f+Math.sin(b)*x;break}case 4:u+=dp(r,l,c,h,a,o,t,e);break}return u%2===1}distanceSquared(t,e){let i=1/0;const s=this.commands,n=this.params,a=s.length;let o=NaN,r=NaN,l=0,c=0;for(let h=0,u=0;h<a;h++)switch(s[h]){case 0:l=o=n[u++],c=r=n[u++];break;case 1:{const d=n[u++],p=n[u++];i=Gf(t,e,l,c,d,p,i);break}case 3:st.error("Command.Curve distanceSquare not implemented");break;case 2:{const d=n[u++],p=n[u++],g=n[u++],f=n[u++],x=n[u++],y=d+Math.cos(f)*g,b=p+Math.sin(f)*g,v=!!n[u++];i=Gf(t,e,l,c,y,b,i),i=GY(t,e,d,p,g,f,x,v,i),l=d+Math.cos(x)*g,c=p+Math.sin(x)*g;break}case 4:i=Gf(t,e,l,c,o,r,i);break}return i}toSVG(t=(e,i)=>({x:e,y:i})){const e=[],{commands:i,params:s}=this,n=(o,...r)=>{e.push(o);for(let l=0;l<r.length;l+=2){const{x:c,y:h}=t(r[l],r[l+1]);e.push(c,h)}};let a=0;for(const o of i)switch(o){case 0:n("M",s[a++],s[a++]);break;case 1:n("L",s[a++],s[a++]);break;case 3:n("C",s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case 2:{const r=s[a++],l=s[a++],c=s[a++],h=s[a++],u=s[a++],d=s[a++];let p=d?h-u:u-h;p<0&&(p+=Math.ceil(-p/(2*Math.PI))*2*Math.PI),d&&(p=-p);const g=Math.max(Math.ceil(Math.abs(p)/(Math.PI/2)),1),f=p/g,x=4/3*Math.tan(f/4),y=e.length===0?"M":"L";n(y,r+Math.cos(h)*c,l+Math.sin(h)*c);for(let b=0;b<g;b+=1){const v=h+f*(b+0),M=h+f*(b+1),D=c*Math.sin(v),L=c*Math.cos(v),A=c*Math.sin(M),C=c*Math.cos(M);n("C",r+L-x*D,l+D+x*L,r+C+x*A,l+A-x*C,r+C,l+A)}break}case 4:e.push("Z");break}return e.join(" ")}computeBBox(){const{commands:t,params:e}=this;let[i,s,n,a]=[1/0,1/0,-1/0,-1/0],[o,r]=[NaN,NaN],[l,c]=[NaN,NaN];const h=(p,g,f)=>{i=Math.min(g,i),s=Math.min(p,s),n=Math.max(p,n),a=Math.max(g,a),f&&([o,r]=[p,g])},u=(p,g,f,x,y)=>{const b=p+f*Math.cos(x),v=g+f*Math.sin(x);h(b,v,y)};let d=0;for(const p of t)switch(p){case 0:h(e[d++],e[d++],!0),[l,c]=[o,r];break;case 1:h(e[d++],e[d++],!0);break;case 3:{const g=e[d++],f=e[d++],x=e[d++],y=e[d++],b=e[d++],v=e[d++];E_(o,r,g,f,x,y,b,v).forEach(D=>{const L=Sb(o,g,x,b,D),A=Sb(r,f,y,v,D);h(L,A)}),h(b,v,!0);break}case 2:{const g=e[d++],f=e[d++],x=e[d++],y=di(e[d++]),b=di(e[d++]),v=e[d++];u(g,f,x,y);const M=[0,Math.PI/2,Math.PI,3*Math.PI/2],[D,L]=v?[b,y]:[y,b];for(const A of M)(D<L&&D<=A&&A<=L||D>L&&(D<=A||A<=L))&&u(g,f,x,A);u(g,f,x,b,!0);break}case 4:[o,r]=[l,c];break}return new ut(s,i,n-s,a-i)}}}});function is(t,e,i){const s=Math.round(e*t)/t;return i==null?s:i===0?0:i<1?Math.ceil(i*t)/t:Math.round((i+e)*t)/t-s}function P_(t,e){return Math.floor(e*t)/t}var Ab=k({"packages/ag-charts-community/src/scene/util/pixel.ts"(){"use strict"}});function aI(t,e,i){const{width:s,height:n,padding:a,strokeWidth:o}=e,r=s/2,l=n/2,c=Math.max(1,s-a-o/2),h=Math.max(1,n-a-o/2);let u=!1;for(const[d,p]of i){const g=r+(d-.5)*c,f=l+(p-.5)*h;u?t.lineTo(g,f):t.moveTo(g,f),u=!0}t.closePath()}var R_,KY=k({"packages/ag-charts-community/src/scene/pattern/patterns.ts"(){"use strict";pi(),Ab(),R_={circles(t,{width:e,strokeWidth:i,padding:s}){const n=e/2,a=Math.max(1,n-s-i/2);t.arc(n,n,a,0,Math.PI*2)},squares(t,{width:e,height:i,pixelRatio:s,padding:n,strokeWidth:a}){const o=n+a/2;t.moveTo(is(s,o),is(s,o)),t.lineTo(is(s,e-o),is(s,o)),t.lineTo(is(s,e-o),is(s,i-o)),t.lineTo(is(s,o),is(s,i-o)),t.closePath()},triangles(t,e){aI(t,e,[[.5,0],[1,1],[0,1]])},diamonds(t,e){aI(t,e,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(t,{width:e,height:i,padding:s}){const a=Math.max(1,(e-s)/2),o=a/2,r=Math.PI/2;for(let l=0;l<5*2;l++){const c=l%2===0?a:o,h=l*Math.PI/5-r,u=e/2+Math.cos(h)*c,d=i/2+Math.sin(h)*c;t.lineTo(u,d)}t.closePath()},hearts(t,{width:e,height:i,padding:s}){const n=Math.max(1,e/4-s/2),a=e/2,o=i/2+n/2;t.arc(a-n,o-n,n,ji(130),ji(330)),t.arc(a+n,o-n,n,ji(220),ji(50)),t.lineTo(a,o+n),t.closePath()},crosses(t,e){aI(t,e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(t,{width:e,height:i,pixelRatio:s,strokeWidth:n}){const a=is(s,e/2)-n%2/2;t.moveTo(a,0),t.lineTo(a,i)},"horizontal-lines"(t,{width:e,height:i,pixelRatio:s,strokeWidth:n}){const a=is(s,i/2)-n%2/2;t.moveTo(0,a),t.lineTo(e,a)},"forward-slanted-lines"(t,{width:e,height:i,strokeWidth:s}){const n=Math.atan2(i,e),a=s*Math.cos(n),o=s*Math.sin(n);t.moveTo(-a,o),t.lineTo(a,-o),t.moveTo(-a,i+o),t.lineTo(e+a,-o),t.moveTo(e-a,i+o),t.lineTo(e+a,i-o)},"backward-slanted-lines"(t,{width:e,height:i,strokeWidth:s}){const n=Math.atan2(i,e),a=s*Math.cos(n),o=s*Math.sin(n);t.moveTo(e-a,-o),t.lineTo(e+a,o),t.moveTo(-a,-o),t.lineTo(e+a,i+o),t.moveTo(-a,i-o),t.lineTo(a,i+o)}}}}),B_,YY=k({"packages/ag-charts-community/src/scene/pattern/pattern.ts"(){"use strict";R(),pi(),jY(),Gk(),Ib(),KY(),B_=class{constructor(t){this._cache=void 0,this.width=Math.max(t?.width??10,1),this.height=Math.max(t?.height??10,1),this.fill=t.fill??"none",this.fillOpacity=t.fillOpacity??1,this.backgroundFill=t.backgroundFill??"none",this.backgroundFillOpacity=t.backgroundFillOpacity??1,this.stroke=t.stroke??"black",this.strokeOpacity=t.strokeOpacity??1,this.strokeWidth=t.strokeWidth??1,this.padding=t.padding??1,this.pattern=t.pattern??"forward-slanted-lines",this.rotation=t.rotation??0,this.scale=t.scale??1,this.path=t.path}getPath(t){const{pattern:e,width:i,height:s,padding:n,strokeWidth:a,path:o}=this,r=new Qh,l=zY(o);return l?r.appendSvg(l):R_[e](r,{width:i,height:s,pixelRatio:t,strokeWidth:a,padding:n}),r}renderStroke(t,e){const{stroke:i,strokeWidth:s,strokeOpacity:n}=this;s&&(e.strokeStyle=i,e.lineWidth=s,e.globalAlpha=n,e.stroke(t))}renderFill(t,e){const{fill:i,fillOpacity:s}=this;i!=="none"&&(e.fillStyle=i,e.globalAlpha=s,e.fill(t))}createCanvasPattern(t,e){const{width:i,height:s,scale:n,backgroundFill:a,backgroundFillOpacity:o}=this;if(i*n<1||s*n<1)return st.warnOnce("Pattern fill is too small to render, ignoring."),null;const r=new lb({width:i,height:s,pixelRatio:e*n}),l=r.context;a!=="none"&&(l.fillStyle=a,l.globalAlpha=o,l.fillRect(0,0,i,s));const c=this.getPath(e).getPath2D();this.renderFill(c,l),this.renderStroke(c,l);const h=t.createPattern(r.canvas,"repeat");return this.setPatternTransform(h,e),r.destroy(),h}setPatternTransform(t,e,i=0,s=0){const n=Yr(this.rotation),a=1/e,o=Math.cos(n)*a,r=Math.sin(n)*a;t?.setTransform(new DOMMatrix([o,r,-r,o,i,s]))}createPattern(t,e){if(this._cache!=null&&this._cache.ctx===t&&this._cache.pixelRatio===e)return this._cache.pattern;const i=this.createCanvasPattern(t,e);if(i!=null)return this._cache={ctx:t,pattern:i,pixelRatio:e},i}toSvg(){const{width:t,height:e,fill:i,fillOpacity:s,backgroundFill:n,backgroundFillOpacity:a,stroke:o,strokeWidth:r,strokeOpacity:l,rotation:c,scale:h}=this,u=ui("pattern");u.setAttribute("viewBox",`0 0 ${t} ${e}`),u.setAttribute("width",String(t)),u.setAttribute("height",String(e)),u.setAttribute("patternUnits","userSpaceOnUse");const d=ui("rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width",String(t)),d.setAttribute("height",String(e)),d.setAttribute("fill",n),d.setAttribute("fill-opacity",String(a)),u.appendChild(d);const p=ui("path");return p.setAttribute("fill",i),p.setAttribute("fill-opacity",String(s)),p.setAttribute("stroke-opacity",String(l)),p.setAttribute("stroke",o),p.setAttribute("stroke-width",String(r)),p.setAttribute("transform",`rotate(${c}) scale(${h})`),p.setAttribute("d",this.getPath(1).toSVG()),u.appendChild(p),u}}}});function Ao(t){return Se(t)&&t.type=="gradient"}function z_(t){return zt(t)&&t.every(e=>typeof e=="string")}function Jh(t){return t!==null&&Se(t)&&t.type=="pattern"}function pp(t){return t!==null&&Se(t)&&t.type=="image"}function ZY(t){return Ao(t)||Jh(t)}var gp=k({"packages/ag-charts-community/src/scene/util/fill.ts"(){"use strict";R()}}),As,ra,hc=k({"packages/ag-charts-community/src/scene/shape/shape.ts"(){"use strict";R(),ip(),Rt(),aa(),S_(),M_(),EY(),A_(),BY(),za(),YY(),gp(),Ab(),As=class $r extends er{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=$r.defaultStyles.fill,this.stroke=$r.defaultStyles.stroke,this.strokeWidth=$r.defaultStyles.strokeWidth,this.lineDash=$r.defaultStyles.lineDash,this.lineDashOffset=$r.defaultStyles.lineDashOffset,this.lineCap=$r.defaultStyles.lineCap,this.lineJoin=$r.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=$r.defaultStyles.opacity,this.fillShadow=$r.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:e}=this.constructor;Object.assign(this,e)}getGradient(e){if(Ao(e))return this.createGradient(e)}createGradient(e){const{colorSpace:i="rgb",gradient:s="linear",colorStops:n,rotation:a=0,reverse:o=!1}=e;if(n==null)return;let r=I_(n,["black"],[0,1]);switch(o&&(r=r.map(l=>({color:l.color,stop:1-l.stop})).reverse()),s){case"linear":return new eI(i,r,a);case"radial":return new D_(i,r);case"conic":return new tI(i,r,a)}}getPattern(e){if(Jh(e))return this.createPattern(e)}createPattern(e){return new B_(e)}getImage(e){if(pp(e))return this.createImage(e)}createImage(e){return new C_(this.imageLoader,e)}onFillChange(){typeof this.fill=="object"&&hn(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,i){return is(this.layerManager?.canvas?.pixelRatio??1,e,i)}preRender(e,i){return this.dirty&&(this.cachedDefaultGradientFillBBox=void 0),super.preRender(e,i)}fillStroke(e,i){this.renderFill(e,i),this.renderStroke(e,i)}renderFill(e,i){const{fill:s,fillImage:n}=this;if(s&&s!=="none"){const{globalAlpha:a}=e;n&&(e.globalAlpha=n.backgroundFillOpacity,e.fillStyle=n.backgroundFill,this.executeFill(e,i),e.globalAlpha=a),this.applyFillAndAlpha(e),this.applyShadow(e),this.executeFill(e,i),e.globalAlpha=a}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,i){i?e.fill(i):e.fill()}applyFillAndAlpha(e){const{fill:i,fillGradient:s,fillPattern:n,fillImage:a,fillOpacity:o,opacity:r}=this;if(e.globalAlpha*=r*o,s){const{fillBBox:l=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:c}=this;e.fillStyle=s.createGradient(e,l,c)??"black"}else if(n){const{x:l,y:c}=this.getBBox(),h=this.layerManager?.canvas?.pixelRatio??1,u=n.createPattern(e,h);n.setPatternTransform(u,h,l,c),u?e.fillStyle=u:(e.fillStyle=n.fill,e.globalAlpha*=n.fillOpacity)}else if(a){const l=this.getBBox(),c=a.createPattern(e,l.width,l.height,this);a.setImageTransform(c,l),e.fillStyle=c??"transparent"}else e.fillStyle=typeof i=="string"?i:"black"}applyStrokeAndAlpha(e){const{stroke:i,strokeOpacity:s,strokeGradient:n,opacity:a}=this;e.strokeStyle=n?.createGradient(e,this.getBBox())??(typeof i=="string"?i:void 0)??"black",e.globalAlpha*=a*s}applyShadow(e){const i=this.layerManager?.canvas.pixelRatio??1,s=this.fillShadow;s?.enabled&&(e.shadowColor=s.color,e.shadowOffsetX=s.xOffset*i,e.shadowOffsetY=s.yOffset*i,e.shadowBlur=s.blur*i)}renderStroke(e,i){const{stroke:s,strokeWidth:n,lineDash:a,lineDashOffset:o,lineCap:r,lineJoin:l,miterLimit:c}=this;if(s&&n){const{globalAlpha:h}=e;this.applyStrokeAndAlpha(e),e.lineWidth=n,a&&e.setLineDash(a),o&&(e.lineDashOffset=o),r&&(e.lineCap=r),l&&(e.lineJoin=l),c!=null&&(e.miterLimit=c),this.executeStroke(e,i),e.globalAlpha=h}}executeStroke(e,i){i?e.stroke(i):e.stroke()}getDefaultGradientFillBBox(){return this.cachedDefaultGradientFillBBox==null&&(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(e,i){return this.isPointInPath(e,i)}applySvgFillAttributes(e,i){const{fill:s,fillOpacity:n}=this;if(typeof s=="string")e.setAttribute("fill",s);else if(Ao(s)&&this.fillGradient){i??(i=[]);const a=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),o=sb();a.setAttribute("id",o),i.push(a),e.setAttribute("fill",`url(#${o})`)}else if(Jh(s)&&this.fillPattern){i??(i=[]);const a=this.fillPattern.toSvg(),o=sb();a.setAttribute("id",o),i.push(a),e.setAttribute("fill",`url(#${o})`)}else if(pp(s)&&this.fillImage){i??(i=[]);const a=this.layerManager?.canvas?.pixelRatio??1,o=this.fillImage.toSvg(this.getBBox(),a),r=sb();o.setAttribute("id",r),i.push(o),e.setAttribute("fill",`url(#${r})`)}else e.setAttribute("fill","none");return e.setAttribute("fill-opacity",String(n)),i}applySvgStrokeAttributes(e){const{stroke:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o}=this;if(i!=null&&(e.setAttribute("stroke",typeof i=="string"?i:"none"),e.setAttribute("stroke-opacity",String(s)),e.setAttribute("stroke-width",String(n))),a?.some(r=>r!==0)===!0){const r=a.length%2===1?[...a,...a]:a;e.setAttribute("stroke-dasharray",r.join(" ")),e.setAttribute("stroke-dashoffset",String(o))}}},As.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},S([ot()],As.prototype,"fillOpacity",2),S([ot()],As.prototype,"strokeOpacity",2),S([na({equals:hn,changeCb:t=>t.onFillChange()})],As.prototype,"fill",2),S([na({equals:hn,changeCb:t=>t.onStrokeChange()})],As.prototype,"stroke",2),S([ot()],As.prototype,"strokeWidth",2),S([$k()],As.prototype,"lineDash",2),S([ot()],As.prototype,"lineDashOffset",2),S([ot()],As.prototype,"lineCap",2),S([ot()],As.prototype,"lineJoin",2),S([ot()],As.prototype,"miterLimit",2),S([ot({convertor:t=>Nt(0,t,1)})],As.prototype,"opacity",2),S([na({equals:Zh,checkDirtyOnAssignment:!0})],As.prototype,"fillShadow",2),S([na({equals:rc.equals,changeCb:t=>t.onFillChange()})],As.prototype,"fillBBox",2),S([na({equals:hn,changeCb:t=>t.onFillChange()})],As.prototype,"fillParams",2),ra=As}}),oI,ir,F_=k({"packages/ag-charts-community/src/scene/matrix.ts"(){"use strict";R(),Ft(),oI=[1,0,0,1,0,0],ir=class uk{get e(){return[...this.elements]}constructor(e=oI){this.elements=[...e]}setElements(e){const i=this.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],this}get identity(){const e=this.elements;return ea(e[0],1)&&ea(e[1],0)&&ea(e[2],0)&&ea(e[3],1)&&ea(e[4],0)&&ea(e[5],0)}AxB(e,i,s){const n=e[0]*i[0]+e[2]*i[1],a=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],r=e[1]*i[2]+e[3]*i[3],l=e[0]*i[4]+e[2]*i[5]+e[4],c=e[1]*i[4]+e[3]*i[5]+e[5];s=s??e,s[0]=n,s[1]=a,s[2]=o,s[3]=r,s[4]=l,s[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){const i=new Array(6);return e instanceof uk?this.AxB(this.elements,e.elements,i):this.AxB(this.elements,[e.a,e.b,e.c,e.d,e.e,e.f],i),new uk(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,new uk([a,-s,-n,i,n*r-a*o,s*o-i*r])}invertSelf(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,e[0]=a,e[1]=-s,e[2]=-n,e[3]=i,e[4]=n*r-a*o,e[5]=s*o-i*r,this}transformPoint(e,i){const s=this.elements;return{x:e*s[0]+i*s[2]+s[4],y:e*s[1]+i*s[3]+s[5]}}transformBBox(e,i){const s=this.elements,n=s[0],a=s[1],o=s[2],r=s[3],l=e.width*.5,c=e.height*.5,h=e.x+l,u=e.y+c,d=Math.abs(l*n)+Math.abs(c*o),p=Math.abs(l*a)+Math.abs(c*r);return i??(i=new ut(0,0,0,0)),i.x=h*n+u*o+s[4]-d,i.y=h*a+u*r+s[5]-p,i.width=d+d,i.height=p+p,i}toContext(e){if(this.identity)return;const i=this.elements;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static updateTransformMatrix(e,i,s,n,a,o,r){const l=i,c=s;let h,u;l===1&&c===1?(h=0,u=0):(h=r?.scalingCenterX??0,u=r?.scalingCenterY??0);const d=n,p=Math.cos(d),g=Math.sin(d);let f,x;d===0?(f=0,x=0):(f=r?.rotationCenterX??0,x=r?.rotationCenterY??0);const y=a,b=o,v=h*(1-l)-f,M=u*(1-c)-x;return e.setElements([p*l,g*l,-g*c,p*c,p*v-g*M+f+y,g*v+p*M+x+b]),e}}}});function uc(t){return j_(t.constructor)}function j_(t){return t[cI]===!0}function rI(t){var e,i;const s=t;if(j_(t))return t;const n=Symbol("matrix_combined_transform");class a extends s{constructor(){super(...arguments),this[i]=new ir,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}onChangeDetection(r){super.onChangeDetection(r),this.markDirtyTransform()}updateMatrix(r){}computeTransformMatrix(){this._dirtyTransform&&(this[n].setElements(oI),this.updateMatrix(this[n]),this._dirtyTransform=!1)}toParent(r){return this.computeTransformMatrix(),this[n].identity?r.clone():this[n].transformBBox(r)}toParentPoint(r,l){return this.computeTransformMatrix(),this[n].identity?{x:r,y:l}:this[n].transformPoint(r,l)}fromParent(r){return this.computeTransformMatrix(),this[n].identity?r.clone():this[n].inverse().transformBBox(r)}fromParentPoint(r,l){return this.computeTransformMatrix(),this[n].identity?{x:r,y:l}:this[n].inverse().transformPoint(r,l)}computeBBox(){const r=super.computeBBox();return r&&this.toParent(r)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(r,l){return{x:r,y:l}=this.fromParentPoint(r,l),super.pickNode(r,l)}pickNodes(r,l,c){return{x:r,y:l}=this.fromParentPoint(r,l),super.pickNodes(r,l,c)}render(r){this.computeTransformMatrix();const{ctx:l}=r,c=this[n];let h=!1;c.identity||(l.save(),h=!0,c.toContext(l)),super.render(r),h&&l.restore()}toSVG(){this.computeTransformMatrix();const r=super.toSVG(),l=this[n];if(l.identity||r==null)return r;const c=ui("g");c.append(...r.elements);const[h,u,d,p,g,f]=l.e;return c.setAttribute("transform",`matrix(${h} ${u} ${d} ${p} ${g} ${f})`),{elements:[c],defs:r.defs}}}return e=cI,i=n,a[e]=!0,a}function fp(t){var e;const i=t,s=Symbol("matrix_rotation");class n extends rI(i){constructor(){super(...arguments),this[e]=new ir,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(o){super.updateMatrix(o);const{rotation:r,rotationCenterX:l,rotationCenterY:c}=this;r!==0&&(ir.updateTransformMatrix(this[s],1,1,r,0,0,{rotationCenterX:l,rotationCenterY:c}),o.multiplySelf(this[s]))}}return e=s,S([ot()],n.prototype,"rotationCenterX",2),S([ot()],n.prototype,"rotationCenterY",2),S([ot()],n.prototype,"rotation",2),n}function lI(t){var e;const i=t,s=Symbol("matrix_scale");class n extends rI(i){constructor(){super(...arguments),this[e]=new ir,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(o){super.updateMatrix(o);const{scalingX:r,scalingY:l,scalingCenterX:c,scalingCenterY:h}=this;r===1&&l===1||(ir.updateTransformMatrix(this[s],r,l,0,0,0,{scalingCenterX:c,scalingCenterY:h}),o.multiplySelf(this[s]))}}return e=s,S([ot()],n.prototype,"scalingX",2),S([ot()],n.prototype,"scalingY",2),S([ot()],n.prototype,"scalingCenterX",2),S([ot()],n.prototype,"scalingCenterY",2),n}function tu(t){var e;const i=t,s=Symbol("matrix_translation");class n extends rI(i){constructor(){super(...arguments),this[e]=new ir,this.translationX=0,this.translationY=0}updateMatrix(o){super.updateMatrix(o);const{translationX:r,translationY:l}=this;r===0&&l===0||(ir.updateTransformMatrix(this[s],1,1,0,r,l),o.multiplySelf(this[s]))}}return e=s,S([ot()],n.prototype,"translationX",2),S([ot()],n.prototype,"translationY",2),n}var cI,Ve,hs=k({"packages/ag-charts-community/src/scene/transformable.ts"(){"use strict";R(),F_(),za(),cI=Symbol("isMatrixTransform"),Ve=class{static fromCanvas(t,e){const i=[];for(const s of t.traverseUp())uc(s)&&i.unshift(s);for(const s of i)e=s.fromParent(e);return uc(t)&&(e=t.fromParent(e)),e}static toCanvas(t,e){e==null?e=t.getBBox():uc(t)&&(e=t.toParent(e));for(const i of t.traverseUp())uc(i)&&(e=i.toParent(e));return e}static fromCanvasPoint(t,e,i){const s=[];for(const n of t.traverseUp())uc(n)&&s.unshift(n);for(const n of s)({x:e,y:i}=n.fromParentPoint(e,i));return uc(t)&&({x:e,y:i}=t.fromParentPoint(e,i)),{x:e,y:i}}static toCanvasPoint(t,e,i){uc(t)&&({x:e,y:i}=t.toParentPoint(e,i));for(const s of t.traverseUp())uc(s)&&({x:e,y:i}=s.toParentPoint(e,i));return{x:e,y:i}}}}});function G_(t,e){if(typeof t=="number"&&typeof e=="number")return Cb(t,e);const i=typeof t=="number"?[t]:t,s=typeof e=="number"?[e]:e,n=Math.min(i.length,s.length);for(let a=0;a<n;a+=1){const o=Cb(i[a],s[a]);if(o!==0)return o}return Cb(i.length,s.length)}var Cb,V_=k({"packages/ag-charts-community/src/scene/zIndex.ts"(){"use strict";Cb=(t,e)=>Math.sign(t-e)}}),Vf,Lb,Ot,W_,H_,ss,eu,We=k({"packages/ag-charts-community/src/scene/group.ts"(){"use strict";R(),Ft(),Gk(),za(),hc(),hs(),Ab(),V_(),Lb=class Ex extends er{constructor(e){super(e),this.opacity=1,this.renderToOffscreenCanvas=!1,this.optimizeForInfrequentRedraws=!1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=e?.renderToOffscreenCanvas===!0}static is(e){return e instanceof Ex}static computeChildrenBBox(e,i=!0){return ut.merge(er.extractBBoxes(e,i))}static compareChildren(e,i){return G_(e.zIndex,i.zIndex)||e.serialNumber-i.serialNumber}containsPoint(e,i){return!0}computeBBox(){return Ex.computeChildrenBBox(this.children())}computeSafeClippingBBox(e){const i=this.computeBBox();if(!i.isFinite())return;let s=0;const n=4;for(const d of this.descendants())d instanceof ra&&(s=Math.max(s,d.strokeWidth));const a=Math.max(1,s/2*n),{x:o,y:r}=Ve.toCanvasPoint(this,0,0),l=P_(e,o+i.x-a)-o,c=P_(e,r+i.y-a)-r,h=Math.ceil(i.x+i.width-l+a),u=Math.ceil(i.y+i.height-c+a);return new ut(l,c,h,u)}prepareSharedCanvas(e,i,s){return Vf==null||Vf.pixelRatio!==s?Vf=new lb({width:e,height:i,pixelRatio:s}):Vf.resize(e,i,s),Vf}isDirty(e){const{width:i,height:s,devicePixelRatio:n}=e,{dirty:a,dirtyZIndex:o,layer:r}=this,l=r!=null&&(this._lastWidth!==i||this._lastHeight!==s),c=this._lastDevicePixelRatio!==n;if(this._lastWidth=i,this._lastHeight=s,this._lastDevicePixelRatio=n,a||o||l||c)return!0;for(const h of this.children())if(h.dirty)return!0;return!1}preRender(e){const i=super.preRender(e,0);return i.groups+=1,i.nonGroups-=1,this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&i.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this.layerManager?.addLayer({name:this.name})):this.layer!=null&&(this.layerManager?.removeLayer(this.layer),this.layer=void 0),i}render(e){const{layer:i,renderToOffscreenCanvas:s}=this,n={...e};if(!s){this.renderInContext(n),super.render(n);return}const{ctx:a,stats:o,devicePixelRatio:r}=e;let{image:l}=this;if(this.isDirty(e)){l?.bitmap.close(),l=void 0;const h=i?void 0:this.computeSafeClippingBBox(r),u=(d,...p)=>{const g=d.context;n.ctx=g,d.clear(),g.save(),g.setTransform(...p),g.globalAlpha=1,this.renderInContext(n),g.restore(),g.verifyDepthZero?.()};if(i)u(i,a.getTransform());else if(h){const{x:d,y:p,width:g,height:f}=h,x=this.prepareSharedCanvas(g,f,r);u(x,r,0,0,r,-d*r,-p*r),l={bitmap:x.transferToImageBitmap(),x:d,y:p,width:g,height:f}}else this.dirtyZIndex&&this.sortChildren(Ex.compareChildren);this.image=l,o&&o.layersRendered++}else this.skipRender(n),o&&o.layersSkipped++;const{globalAlpha:c}=a;if(a.globalAlpha=c*this.opacity,i)a.save(),a.resetTransform(),i.drawImage(a),a.restore();else if(l){const{bitmap:h,x:u,y:d,width:p,height:g}=l;a.drawImage(h,0,0,p*r,g*r,u,d,p,g)}a.globalAlpha=c,super.render(n)}skipRender(e){const{stats:i}=e;for(const s of this.children())s.markClean(),i&&(i.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,i.opsSkipped+=this.childNodeCounts.complexity)}applyClip(e,i){const{x:s,y:n,width:a,height:o}=i;e.beginPath(),e.rect(s,n,a,o),e.clip()}renderInContext(e){const{ctx:i,stats:s}=e;this.dirtyZIndex&&this.sortChildren(Ex.compareChildren),i.save(),i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),e.clipBBox=Ve.toCanvas(this,this.clipRect));for(const n of this.children()){if(!n.visible){n.markClean(),s&&(s.nodesSkipped+=n.childNodeCounts.nonGroups+n.childNodeCounts.groups,s.opsSkipped+=n.childNodeCounts.complexity);continue}i.save(),n.render(e),i.restore()}i.restore()}setClipRect(e){this.clipRect=e?Ve.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}setScene(e){this.layer&&(this.scene?.layersManager.removeLayer(this.layer),this.layer=void 0),super.setScene(e)}getVisibility(){for(const e of this.traverseUp(!0))if(!e.visible)return!1;return!0}toSVG(){if(!this.visible)return;const e=[],i=[];for(const s of this.children()){const n=s.toSVG();n!=null&&(i.push(...n.elements),n.defs!=null&&e.push(...n.defs))}return{elements:i,defs:e}}},Lb.className="Group",S([ot({convertor:t=>Nt(0,t,1)})],Lb.prototype,"opacity",2),Ot=Lb,W_=class extends lI(Ot){},H_=class extends fp(Ot){},ss=class extends tu(Ot){},eu=class extends fp(tu(Ot)){}}});function wb(t,e){t&&(e=rc.normalize(e),e.width==null?t.style.removeProperty("width"):t.style.width=`${e.width}px`,e.height==null?t.style.removeProperty("height"):t.style.height=`${e.height}px`,e.x==null?t.style.removeProperty("left"):t.style.left=`${e.x}px`,e.y==null?t.style.removeProperty("top"):t.style.top=`${e.y}px`)}function U_(t){const e=parseFloat(t.style.width)||t.offsetWidth,i=parseFloat(t.style.height)||t.offsetHeight,s=parseFloat(t.style.left)||t.offsetLeft,n=parseFloat(t.style.top)||t.offsetTop;return{x:s,y:n,width:e,height:i}}function XY(t){if(t.focus({preventScroll:!0}),t.lastChild?.textContent==null)return;const e=So().createRange();e.setStart(t.lastChild,t.lastChild.textContent.length),e.setEnd(t.lastChild,t.lastChild.textContent.length);const i=be().getSelection();i?.removeAllRanges(),i?.addRange(e)}function $_(){const t=be("navigator");if("scheduling"in t){const e=t.scheduling;if("isInputPending"in e)return e.isInputPending({includeContinuous:!0})}return!1}function Tb(t){return`ag-charts-icon ag-charts-icon-${t}`}var iu=k({"packages/ag-charts-community/src/util/dom.ts"(){"use strict";R(),ip()}});function sr(t,e,i){if(zt(e)){if(!zt(t)||t.length!==e.length||e.some((s,n)=>sr(t[n],s,i)!=null))return e}else if(Me(e)){if(!Me(t))return e;const s={},n=new Set([...Object.keys(t),...Object.keys(e)]);for(const a of n)if(t[a]!==e[a])if(i?.has(a))s[a]=e[a];else if(typeof t[a]==typeof e[a]){const o=sr(t[a],e[a],i);o!==null&&(s[a]=o)}else s[a]=e[a];return Object.keys(s).length?s:null}else if(t!==e)return e;return null}function K_(t,e){for(const i of Object.keys(t))if(t[i]!==e?.[i])return!1;return!0}function Oe(t,e){return zt(t)?qY(t,e):Me(t)?QY(t,e):t instanceof Map?new Map(Oe(Array.from(t))):hI(t)}function qY(t,e){const i=[],s=e?.seen;for(const n of t){if(typeof n=="object"&&s?.includes(n)){st.warn("cycle detected in array",n);continue}s?.push(n),i.push(Oe(n,e)),s?.pop()}return i}function QY(t,e){const i={};for(const s of Object.keys(t))e?.assign?.has(s)?i[s]=t[s]:e?.shallow?.has(s)?i[s]=hI(t[s]):i[s]=Oe(t[s],e);return i}function hI(t){return zt(t)?t.slice(0):Me(t)?{...t}:zh(t)?new Date(t):OO(t)?new RegExp(t.source,t.flags):t}function nr(t,e,i,s,n,a){if(zt(t)){a=e(t,s,n,a);let o=0;for(const r of t)a=nr(r,e,i,s?.[o],n,a),o++}else if(Me(t)){a=e(t,s,n,a);for(const o of Object.keys(t)){if(i?.has(o))continue;const r=t[o];a=nr(r,e,i,s?.[o],n,a)}}return a}function Wf(t,e,i={}){const{path:s,matcherPath:n=s?.replace(/(\[[0-9+]+])/i,"[]"),skip:a=[]}=i;if(t==null)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(e==null)return t;if(hp(t))return t.set(e);const o=t,r=uI(t);for(const l of Object.keys(e)){if(db.has(l))continue;const c=`${n?n+".":""}${l}`;if(a.includes(c))continue;const h=e[l],u=`${s?s+".":""}${l}`,d=o.constructor,p=o[l];try{const g=uI(p),f=uI(h);if(r===_b&&!(l in t||l==="context")){if(h===void 0)continue;st.warn(`unable to set [${u}] in ${d?.name} - property is unknown`);continue}if(g!=null&&f!=null&&f!==g&&(g!==_b||f!=="object")){st.warn(`unable to set [${u}] in ${d?.name} - can't apply type of [${f}], allowed types are: [${g}]`);continue}if(hp(p))o[l].set(h);else if(f==="object"&&l!=="context"){if(p==null){st.warn(`unable to set [${u}] in ${d?.name} - property is unknown`);continue}Wf(p,h,{...i,path:u,matcherPath:c})}else o[l]=h}catch(g){st.warn(`unable to set [${u}] in [${d?.name}]; nested error is: ${g.message}`)}}return t}function uI(t){return t==null?null:_O(t)||zh(t)?"primitive":zt(t)?"array":Se(t)?Me(t)?"object":_b:Do(t)?"function":"primitive"}function Nb(t,e,i,s){return dI(t,e,s??t,{matches:new Map},i)}function dI(t,e,i,s,n,a=[],o={}){if(zt(t)){Y_(t,e,i,s,a,o);let r=0;for(const l of t)dI(l,e,i,s,n,[...a,`${r}`],o),r++}else if(Me(t)){Y_(t,e,i,s,a,o);for(const r of Object.keys(t)){if(n?.has(r))continue;const l=t[r];Zr(l)?t[r]=pI(l,e,i,s,[...a,r],o):dI(l,e,i,s,n,[...a,r],o)}}return o}function Y_(t,e,i,s,n,a){if(zt(t))for(let o=0;o<t.length;o++)t[o]=pI(t[o],e,i,s,[...n,`${o}`],a),t[o]===Eb&&(t[o]=void 0);else{let o=!1;for(const r of Object.keys(t))t[r]=pI(t[r],e,i,s,[...n,r],a),o||(o=Co(r,Uf)),t[r]===Eb&&delete t[r];if(o&&Object.keys(t).length>1)for(const r of Object.keys(t))Co(r,Uf)&&delete t[r]}}function pI(t,e,i,s,n,a){const o=Zr(t);if(!o)return t;a[n.join(".")]=t;const r=Hf(o.operation,o.values,e,i,n,s);return r===void 0?Eb:r}function Zr(t){if(!Me(t))return;const[e]=Object.keys(t);if(Co(e,Uf))return{operation:e,values:t[e]}}function Hf(t,e,i,s,n,a){a.referencedParams??(a.referencedParams=new Set);const o=["$find","$map"];zt(e)&&!o.includes(t)&&(e=e.map(l=>{const c=Zr(l);return c?Hf(c.operation,c.values,i,s,n,a):l}));const r=Uf[t];return r(e,n,i,s,a)}function Co(t,e){return Ji(t)&&(Se(e)||zt(e))&&t in e}function Ob(t){return xf(t)&&t>=0&&t<=1}function Z_(t){return Se(t)&&t.type=="gradient"}function JY(t){return t!==null&&Se(t)&&t.type=="pattern"}function t6(t){return t!==null&&Se(t)&&t.type=="image"}function X_(t,e){const i=e.split("/");let s=[...t];e.startsWith("/")&&(s=[],i.shift());let n=!1;for(const a of i){if(a==="..")s.pop(),n||s.pop();else if(a===".")s.pop();else if(a==="$index"){const o=t.findLast(r=>!isNaN(Number(r)));o!=null&&s.push(o)}else if(a==="$prevIndex"){const o=t.findLast(r=>!isNaN(Number(r)));o!=null&&s.push(`${Number(o)-1}`)}else a.length!==0&&s.push(a);n=a===".."}return s}function q_(t,e,i,s,n){if(!Co(t,i)){st.warnOnce(`\`$ref\` json operation failed on [${String(t)}] at [${e.join(".")}], expecting one of [${Object.keys(i).join(", ")}].`);return}const a=Zr(i[t]);if(a?.operation!=="$ref")return i[t];if(n.referencedParams?.has(a.values)){st.warnOnce(`\`$ref\` json operation failed on [${String(t)}] at [${e.join(".")}], circular reference detected with [${[...n.referencedParams].join(", ")}].`);return}return n.referencedParams?.add(a.values),q_(a.values,e,i,s,n)}function e6(t,e,i,s){if(!Ji(t))return;const n=i.__palette;if(["fill","fillFallback","stroke","gradient","range2"].includes(t)){const o=e.findLastIndex(u=>!isNaN(Number(u)));let r=Number(e[o]);if(isNaN(r))return;const l=e.slice(0,o),c=["map-shape-background","map-line-background"],h=op(s,l).slice(0,r).filter(u=>c.includes(u.type)).length;switch(r-=h,t){case"fill":return Jd(n.fills,1,r)[0];case"fillFallback":return Jd(n.fillsFallback,1,r)[0];case"stroke":return Jd(n.strokes,1,r)[0];case"gradient":return Jd(n.sequentialColors,1,r)[0];case"range2":return Jd(n.fills,2,r)}return}return t==="gradients"?n.sequentialColors:op(n,t)}function i6(t,e,i,s){let n=!1,a,o=!1,r=s;if(zt(t))n=!0,a=t[1],o=t.length===3,r=o?t[2]:r,t=t[0];else if(!Ji(t)){st.warnOnce(`\`$path\` json operation failed on [${String(t)}] at [${e.join(".")}], expecting a string.`);return}const l=X_(o?[]:e,t);let c=r;for(const h of l){if(!Co(h,c)){if(n)return a;st.warnOnce(`\`$path\` json operation failed on [${String(t)}] at [${e.join(".")}] resolved to [${l.join(".")}], could not find path in object.`);return}c=c[h]}return Object.isFrozen(c)?Oe(c):c}function s6(t,e,i,s){const n=Ji(t)?X_(e,t):e,a=n.length===0?s:op(s,n);return Zr(a)!=null}function n6([t],e){if(typeof t=="number")return t%2===0;st.warnOnce(`\`$isEven\` json operation failed on [${String(t)}] at [${e.join(".")}], expecting a number.`)}function a6([t,e],i){if(typeof t=="number"&&typeof e=="number")return t*e;st.warnOnce(`\`$mul\` json operation failed on [${String(t)}] and [${String(e)}] at [${i.join(".")}], expecting two numbers.`)}function o6([t],e){if(typeof t=="number")return Math.round(t);st.warnOnce(`\`$round\` json operation failed on [${String(t)}] at [${e.join(".")}], expecting a number.`)}function r6([t,e],i,s,n,a){const o=Zr(e);if(o&&(e=Hf(o.operation,o.values,s,n,i,a)),!zt(e))return[];const r=Zr(t);return r?(a.matches.set(i.join("."),e),e.map(()=>({[r.operation]:r.values}))):[]}function l6([t,e],i,s,n,a){const o=Zr(e);if(o&&(e=Hf(o.operation,o.values,s,n,i,a)),!zt(e))return;const r=Zr(t);return r?e.find(l=>Hf(r.operation,r.values,s,l,[],a)):t?e[0]:void 0}function c6(t){if(zt(t)){for(const e of t)if(!Me(e))return;return Kt(...t)}}function h6([t,e]){if(!(!zt(t)||!Me(e)))return ft(e,t)}function u6(t,e,i,s,n){if(t!=="$1"&&t!=="$index")return t;const a=e.findLastIndex(l=>!isNaN(Number(l)));if(a===-1)return t;const o=Number(e[a]);if(t==="$index")return o;const r=e.slice(0,a).join(".");return n.matches.get(r)?.at(o)}function d6([t],e,i){const s="fontSize";if(Co(s,i)&&typeof i[s]=="number"&&typeof t=="number")return Math.round(t*i[s]);st.warnOnce(`\`$rem\` json operation failed on [${String(t)}] at [${e.join(".")}], expecting a number.`)}function p6([t,e,i],s){const n=`\`$mix\` json operation failed on [${String(t)}, ${String(e)}, ${String(i)}] at [${s.join(".")}], expecting`,a=`${n} two colors and a number between 0 and 1.`;if(typeof e!="string"||!Ob(i)){st.warnOnce(a);return}if(typeof t=="string")try{return ue.mix(ue.fromString(t),ue.fromString(e),i).toString()}catch{st.warnOnce(a);return}if(!Z_(t)){st.warnOnce(a);return}let o=t.colorStops;try{o=o?.map(r=>{let l;return typeof r.color=="string"&&(l=ue.mix(ue.fromString(r.color),ue.fromString(e),i).toString()),{...r,color:l}})}catch{st.warnOnce(`${n} a gradient, a color and a number between 0 and 1.`);return}return{...t,colorStops:o}}function g6([t],e,i){const s="foregroundColor",n="backgroundColor";if(Co(s,i)&&Co(n,i)&&typeof i[s]=="string"&&typeof i[n]=="string"&&Ob(t))return ue.mix(ue.fromString(i[s]),ue.fromString(i[n]),t).toString();st.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(t)}}}] at [${e.join(".")}], expecting a number between 0 and 1.`)}function f6([t,e],i,s){const n="foregroundColor",a="backgroundColor",o="accentColor";if(Co(n,s)&&Co(a,s)&&Co(o,s)&&typeof s[n]=="string"&&typeof s[a]=="string"&&typeof s[o]=="string"&&Ob(t)&&Ob(e))return ue.mix(ue.mix(ue.fromString(s[n]),ue.fromString(s[a]),t),ue.fromString(s[o]),e).toString();st.warnOnce(`\`$foregroundBackgroundAccentMix\` json operation failed on [${String(t)}, ${String(e)}}] at [${i.join(".")}], expecting two numbers between 0 and 1.`)}function m6([t,e]){if(!(!zt(t)||!xf(e)))return ue.interpolate(t.map(i=>ue.fromString(i)),e).map(i=>i.toString())}var _b,Eb,Q_,J_,tE,eE,iE,sE,Uf,Ln=k({"packages/ag-charts-community/src/util/json.ts"(){"use strict";R(),Xh(),Rt(),mt(),_b="class-instance",Eb=Symbol("operation-resolved-undefined"),Q_={$ref:q_,$path:i6,$palette:e6},J_={$if:([t,e,i])=>t?e:i,$eq:([t,e])=>t===e,$not:([t])=>!t,$or:t=>zt(t)&&t.some(Boolean),$and:t=>zt(t)&&t.every(Boolean),$switch:()=>{},$isOperation:s6},tE={$isEven:n6,$mul:a6,$round:o6},eE={$map:r6,$find:l6,$merge:c6,$omit:h6,$value:u6},iE={$rem:d6},sE={$mix:p6,$foregroundBackgroundMix:g6,$foregroundBackgroundAccentMix:f6,$interpolate:m6,$isGradient:([t])=>Z_(t),$isPattern:([t])=>JY(t),$isImage:([t])=>t6(t)},Uf={...Q_,...J_,...tE,...eE,...iE,...sE}}}),nE,y6=k({"packages/ag-charts-community/src/util/mutex.ts"(){"use strict";R(),nE=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch(i=>st.errorOnce(i))})}async acquireImmediately(t){return this.available?(await this.acquire(t),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[t,e]=this.acquireQueue.shift()??[];for(;t;){try{await t(),e?.()}catch(i){st.error("mutex callback error",i),e?.()}[t,e]=this.acquireQueue.shift()??[]}this.available=!0}}}}),gI,aE=k({"packages/ag-charts-community/src/util/observable.ts"(){"use strict";gI=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){const i=this.eventListeners.get(t);i!=null&&(i.delete(e),i.size===0&&this.eventListeners.delete(t))}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){this.eventListeners.get(t.type)?.forEach(e=>e(t))}}}}),Xr,fI=k({"packages/ag-charts-community/src/util/padding.ts"(){"use strict";mt(),mt(),Xr=class extends wt{constructor(t=0,e=t,i=t,s=e){super(),this.top=t,this.right=e,this.bottom=i,this.left=s}},S([I],Xr.prototype,"top",2),S([I],Xr.prototype,"right",2),S([I],Xr.prototype,"bottom",2),S([I],Xr.prototype,"left",2)}});function me(t,e){const i=zt(t)?t:t.split(".");if(i.length===1){const[s]=i;return $h((n,a,o)=>n[s]=o,n=>n[s],e)}return $h((s,n,a)=>Hk(s,i,a),s=>op(s,i),e)}function x6(t){return $h((e,i,s)=>e[t]=s)}function us(t,e){return $h((i,s,n)=>i[t][e??s]=n)}function wn(t){const{newValue:e,oldValue:i,changeValue:s}=t;return $h((n,a,o,r)=>(o!==r&&(r!==void 0&&i?.call(n,r),o!==void 0&&e?.call(n,o),s?.call(n,o,r)),o))}function dc(t){return f_(t)}var un=k({"packages/ag-charts-community/src/util/proxy.ts"(){"use strict";R(),ap(),Rt()}});function b6(t){return oE((e,i)=>be().requestAnimationFrame(e),t)}function v6(t){return oE((e,i=0)=>{i===0?queueMicrotask(e):setTimeout(e,i)},t)}function oE(t,e){let i=0,s=!1,n,a;const o=()=>s,r=()=>{s=!1,a?.(),a=void 0,n=void 0,i>0&&t(l)},l=()=>{const c=i;i=0,s=!0;const h=e({count:c});if(!h){r();return}h.then(r,r)};return{schedule(c){i===0&&!o()&&t(l,c),i++},async await(){if(o())for(n==null&&(n=new Promise(c=>{a=c}));o();)await n}}}var rE=k({"packages/ag-charts-community/src/util/render.ts"(){"use strict";R()}});function mp(t,e,i){const{offsetX:s,offsetY:n,clientX:a,clientY:o}=e,{currentX:r,currentY:l}=ar.calcCurrentXY(i,e);return{type:t,offsetX:s,offsetY:n,clientX:a,clientY:o,currentX:r,currentY:l,sourceEvent:e}}function Pb(t,e,i){return{type:t,sourceEvent:e}}var Rb,lE,ar,Bb=k({"packages/ag-charts-community/src/widget/widgetEvents.ts"(){"use strict";Rb=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"],lE={blur:t=>({type:"blur",sourceEvent:t}),change:t=>({type:"change",sourceEvent:t}),contextmenu:(t,e)=>mp("contextmenu",t,e),focus:t=>({type:"focus",sourceEvent:t}),keydown:t=>({type:"keydown",sourceEvent:t}),keyup:t=>({type:"keyup",sourceEvent:t}),click:(t,e)=>mp("click",t,e),dblclick:(t,e)=>mp("dblclick",t,e),mouseenter:(t,e)=>mp("mouseenter",t,e),mousemove:(t,e)=>mp("mousemove",t,e),mouseleave:(t,e)=>mp("mouseleave",t,e),wheel:t=>{const{offsetX:e,offsetY:i,clientX:s,clientY:n}=t,a=t.deltaMode===0?.01:1,o=t.deltaX*a,r=t.deltaY*a;return{type:"wheel",offsetX:e,offsetY:i,clientX:s,clientY:n,deltaX:o,deltaY:r,sourceEvent:t}},touchstart:(t,e)=>Pb("touchstart",t,e),touchmove:(t,e)=>Pb("touchmove",t,e),touchend:(t,e)=>Pb("touchend",t,e),touchcancel:(t,e)=>Pb("touchcancel",t,e)},ar=class{static alloc(t,e,i){return lE[t](e,i)}static isHTMLEvent(t){return Rb.includes(t)}static calcCurrentXY(t,e){const i=t.getBoundingClientRect();return{currentX:e.clientX-i.x,currentY:e.clientY-i.y}}}}}),cE,S6=k({"packages/ag-charts-community/src/widget/widgetListenerHTML.ts"(){"use strict";R(),Bb(),cE=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(t,e){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[t]=e}lazyGetWidgetListeners(t,e){var i;if(!(t in(this.sourceListeners??{}))){const s=a=>{const o=ar.alloc(t,a,e.getElement());for(const r of this.widgetListeners?.[t]??[])r(o,e)},n={};t.startsWith("touch")&&(n.passive=!1),this.initSourceHandler(t,s),e.getElement().addEventListener(t,s,n)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[t]??(i[t]=[]),this.widgetListeners[t]}add(t,e,i){this.lazyGetWidgetListeners(t,e).push(i)}remove(t,e,i){const s=this.lazyGetWidgetListeners(t,e),n=s.indexOf(i);n>-1&&s.splice(n,1)}destroy(t){for(const[e,i]of Ba(this.sourceListeners??{}))t.getElement().removeEventListener(e,i);this.widgetListeners=void 0,this.sourceListeners=void 0}}}});function M6(t,e,i,s){if(t.globalMouseDragCallbacks==null)return new hE(t,e,i,s)}var hE,D6=k({"packages/ag-charts-community/src/widget/mouseDragger.ts"(){"use strict";R(),hE=class{constructor(t,e,i,s){this.glob=t,this.self=e,this.window=be(),this.mousegeneral=l=>{l.stopPropagation(),l.stopImmediatePropagation()},this.mousemove=l=>{l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(l)},this.mouseup=l=>{l.button===0&&(l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(l),this.destroy())};const{window:n,mousegeneral:a,mousemove:o,mouseup:r}=this;n.addEventListener("mousedown",a,{capture:!0}),n.addEventListener("mouseenter",a,{capture:!0}),n.addEventListener("mouseleave",a,{capture:!0}),n.addEventListener("mouseout",a,{capture:!0}),n.addEventListener("mouseover",a,{capture:!0}),n.addEventListener("mousemove",o,{capture:!0}),n.addEventListener("mouseup",r,{capture:!0}),e.mouseDragger=this,t.globalMouseDragCallbacks=i,t.globalMouseDragCallbacks.mousedown(s)}destroy(){const{window:t,mousegeneral:e,mousemove:i,mouseup:s}=this;t.removeEventListener("mousedown",e,{capture:!0}),t.removeEventListener("mouseenter",e,{capture:!0}),t.removeEventListener("mouseleave",e,{capture:!0}),t.removeEventListener("mouseout",e,{capture:!0}),t.removeEventListener("mouseover",e,{capture:!0}),t.removeEventListener("mousemove",i,{capture:!0}),t.removeEventListener("mouseup",s,{capture:!0}),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}}}});function k6(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return i*i+s*s}function I6(t,e,i,s,n){if(!(t.globalTouchDragCallbacks!=null||zb))return new pE(t,e,i,s,n)}var uE,dE,zb,pE,A6=k({"packages/ag-charts-community/src/widget/touchDragger.ts"(){"use strict";R(),uE=500,dE=100,zb=!1,pE=class{constructor(t,e,i,s,n){this.glob=t,this.self=e,this.initialTouch=s,this.target=n,this.longTapInterrupted=!1,this.longtap=()=>{const{target:r,initialTouch:l}=this;if(!this.longTapInterrupted){r.dispatchEvent(new TouchEvent("touchcancel",{touches:[l],bubbles:!0})),zb=!0;const c=g=>{g.preventDefault()},h=g=>{zb=!1,g.preventDefault(),r.removeEventListener("touchmove",c),r.removeEventListener("touchend",h),r.removeEventListener("touchcancel",h)};r.addEventListener("touchmove",c,{passive:!1}),r.addEventListener("touchend",h,{passive:!1}),r.addEventListener("touchcancel",h,{passive:!1});const{clientX:u,clientY:d}=l,p=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:be(),clientX:u,clientY:d,pointerType:"touch"});r.dispatchEvent(p)}},this.touchmove=r=>{const{glob:l,self:c,initialTouch:h}=this,u=this.findInitialFinger(r.targetTouches);u!=null&&(this.longTapInterrupted=this.longTapInterrupted||k6(h,u)>dE,c.dragTouchEnabled&&u!=null&&l.globalTouchDragCallbacks?.touchmove(r,u))},this.touchend=r=>{this.longTapInterrupted=!0;const l=this.findInitialFinger(r.changedTouches,r.touches);l!=null&&this.glob.globalTouchDragCallbacks?.touchend(r,l),this.destroy()},this.longtapTimer=setTimeout(this.longtap,uE);const{touchmove:a,touchend:o}=this;n.addEventListener("touchmove",a,{passive:!1}),n.addEventListener("touchstart",o,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),n.addEventListener("touchcancel",o,{passive:!1}),e.touchDragger=this,t.globalTouchDragCallbacks=i}destroy(){const{longtapTimer:t,touchmove:e,touchend:i}=this;clearTimeout(t),this.target.removeEventListener("touchstart",i),this.target.removeEventListener("touchmove",e),this.target.removeEventListener("touchend",i),this.target.removeEventListener("touchcancel",i),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...t){const e=t.map(i=>Array.from(i)).flat();return Array.from(e).find(i=>i.identifier===this.initialTouch.identifier)}}}});function mI(t,e,i,s){const{currentX:n,currentY:a}=ar.calcCurrentXY(t.getElement(),s),o=s.pageX-i.pageX,r=s.pageY-i.pageY;return{type:e,device:"mouse",offsetX:i.offsetX+o,offsetY:i.offsetY+r,clientX:s.clientX,clientY:s.clientY,currentX:n,currentY:a,originDeltaX:o,originDeltaY:r,sourceEvent:s}}function C6(t,{pageX:e,pageY:i}){const{x:s,y:n}=t.getElement().getBoundingClientRect();return{offsetX:e-s,offsetY:i-n}}function yI(t,e,i,s,n){const{currentX:a,currentY:o}=ar.calcCurrentXY(t.getElement(),n),r=n.pageX-i.pageX,l=n.pageY-i.pageY;return{type:e,device:"touch",offsetX:i.offsetX+r,offsetY:i.offsetY+l,clientX:n.clientX,clientY:n.clientY,currentX:a,currentY:o,originDeltaX:r,originDeltaY:l,sourceEvent:s}}var xI,bI,L6=k({"packages/ag-charts-community/src/widget/widgetListenerInternal.ts"(){"use strict";ip(),Rt(),D6(),A6(),Bb(),xI={},bI=class{constructor(t){this.dispatchCallback=t,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.listeners?.clear(),this.mouseDragger?.destroy(),this.touchDragger?.destroy()}getListenerSet(t){this.listeners??(this.listeners=new Map);let e=this.listeners.get(t);return e===void 0&&(e=new Set,this.listeners.set(t,e)),e}add(t,e,i){switch(this.getListenerSet(t).add(i),t){case"drag-start":case"drag-move":case"drag-end":{this.registerDragTrigger(e);break}}}remove(t,e,i){this.getListenerSet(t).delete(i)}registerDragTrigger(t){if(this.dragTriggerRemover==null){const e=s=>this.triggerMouseDrag(t,s),i=s=>this.triggerTouchDrag(t,s);t.getElement().addEventListener("mousedown",e),t.getElement().addEventListener("touchstart",i,{passive:!1}),this.dragTriggerRemover=()=>{t.getElement().removeEventListener("mousedown",e),t.getElement().removeEventListener("touchstart",i)}}}triggerMouseDrag(t,e){e.button===0&&this.startMouseDrag(t,e)}startMouseDrag(t,e){const i={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};Uk(["pageX","pageY","offsetX","offsetY"],i,e);const s={mousedown:n=>{const a=mI(t,"drag-start",i,n);this.dispatch("drag-start",t,a)},mousemove:n=>{const a=mI(t,"drag-move",i,n);this.dispatch("drag-move",t,a)},mouseup:n=>{const a=mI(t,"drag-end",i,n);this.dispatch("drag-end",t,a),this.endDrag(t,a)}};this.mouseDragger=M6(xI,this,s,e)}endDrag(t,{sourceEvent:e,clientX:i,clientY:s}){const n=t.getElement(),a=n.getBoundingClientRect();rc.containsPoint(a,i,s)||(n.dispatchEvent(new MouseEvent("mouseleave",e)),e.target?.dispatchEvent(new MouseEvent("mouseenter",e)))}triggerTouchDrag(t,e){const i=e.targetTouches[0];e.targetTouches.length===1&&i!=null&&this.startOneFingerTouch(t,e,i)}startOneFingerTouch(t,e,i){const s={pageX:NaN,pageY:NaN,...C6(t,i)};Uk(["pageX","pageY"],s,i);const n={touchmove:(r,l)=>{const c=yI(t,"drag-move",s,r,l);this.dispatch("drag-move",t,c)},touchend:(r,l)=>{const c=yI(t,"drag-end",s,r,l);this.dispatch("drag-end",t,c)}},a=t.getElement();this.touchDragger=I6(xI,this,n,i,a);const o=yI(t,"drag-start",s,e,i);this.dispatch("drag-start",t,o)}dispatch(t,e,i){for(const s of this.getListenerSet(t))s(i,e);this.dispatchCallback(t,i)}}}}),gE,Lo,qr=k({"packages/ag-charts-community/src/widget/widget.ts"(){"use strict";R(),iu(),Bb(),S6(),L6(),gE=class{constructor(t){this.elem=t}setBounds(t){wb(this.elemContainer??this.elem,t)}getBounds(){return U_(this.elemContainer??this.elem)}static setElementContainer(t,e){const i=t.getBounds();wb(e,i),XO(t.elem,{width:"100%",height:"100%"}),t.elem.remove(),t.elemContainer=e,t.elemContainer.replaceChildren(t.elem)}},Lo=class extends gE{constructor(t){super(t),this.elem=t,this.index=NaN,this.children=[]}set id(t){Ht(this.elem,"id",t)}get id(){return Hh(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.parent?.removeChild(this),this.children.forEach(t=>{t.parent=void 0,t.destroy()}),this.children.length=0,this.destructor(),this.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}remove(){this.elem.remove(),this.elemContainer?.remove()}setHidden(t){ko(this.elem,"display",t?"none":void 0)}isHidden(){return be()?.getComputedStyle?.(this.elem).display==="none"}setCursor(t){ko(this.elem,"cursor",t)}setTextContent(t){this.elem.textContent=t??null}setAriaDescribedBy(t){Ht(this.elem,"aria-describedby",t)}setAriaHidden(t){Ht(this.elem,"aria-hidden",t)}setAriaLabel(t){Ht(this.elem,"aria-label",t)}setAriaExpanded(t){Ht(this.elem,"aria-expanded",t)}setAriaControls(t){Ht(this.elem,"aria-controls",t)}setAriaHasPopup(t){Ht(this.elem,"aria-haspopup",t)}setInnerHTML(t){this.elem.innerHTML=t}setPointerEvents(t){ko(this.elem,"pointer-events",t)}isDisabled(){return Hh(this.elem,"aria-disabled",!1)}hasPopup(){const t=Hh(this.elem,"aria-haspopup");return t!==void 0&&t!=="false"}parseFloat(t){return t===""?0:parseFloat(t)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(t){this.elem.focus(t)}setFocusOverride(t){Ht(this.elem,"data-focus-override",t)}setPreventsDefault(t){Ht(this.elem,"data-preventdefault",t)}setTabIndex(t){Ht(this.elem,"tabindex",t)}addChild(t){this.addChildToDOM(t,this.getBefore(t)),this.children.push(t),t.index=this.children.length-1,t.parent=this,this.onChildAdded(t)}removeChild(t){const e=this.children.findIndex(i=>i===t);this.children.splice(e,1),this.removeChildFromDOM(t),this.onChildRemoved(t)}moveChild(t,e){t.domIndex!==e&&(t.domIndex=e,this.removeChildFromDOM(t),this.addChildToDOM(t,this.getBefore(t)))}addClass(...t){this.elem.classList.add(...t)}removeClass(...t){this.elem.classList.remove(...t)}toggleClass(t,e){this.elem.classList.toggle(t,e)}appendOrInsert(t,e){e?e.getElement().insertAdjacentElement("beforebegin",t):this.elem.appendChild(t)}addChildToDOM(t,e){this.appendOrInsert(t.getElement(),e)}removeChildFromDOM(t){this.elem.removeChild(t.getElement())}onChildAdded(t){}onChildRemoved(t){}getBefore({domIndex:t}){if(t!==void 0)return this.children.filter(e=>e.domIndex!==void 0&&e.domIndex>t).reduce((e,i)=>!e||i.domIndex<e.domIndex?i:e,void 0)}addListener(t,e){return ar.isHTMLEvent(t)?(this.htmlListener??(this.htmlListener=new cE),this.htmlListener.add(t,this,e)):(this.internalListener??(this.internalListener=new bI(this.onDispatch.bind(this))),this.internalListener.add(t,this,e)),()=>this.removeListener(t,e)}removeListener(t,e){ar.isHTMLEvent(t)?this.htmlListener?.remove(t,this,e):this.htmlListener!=null&&this.internalListener?.remove(t,this,e)}setDragTouchEnabled(t){this.internalListener??(this.internalListener=new bI(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=t}onDispatch(t,e){if(!e.sourceEvent?.bubbles)return;let{parent:i}=this;for(;i!=null;){const{internalListener:s}=i;if(s!=null){const n={...e,...ar.calcCurrentXY(i.getElement(),e)};s.dispatch(t,i,n)}i=i.parent}}static addWindowEvent(t,e){const i=s=>{s.persisted||e()};return be().addEventListener("pagehide",i),()=>be().removeEventListener("pagehide",i)}}}});function w6(t=0,e=0){return new OffscreenCanvas(t,e).getContext("2d")}var T6=k({"packages/ag-charts-community/src/util/canvas.util.ts"(){"use strict"}}),Fb,fE=k({"packages/ag-charts-community/src/util/lruCache.ts"(){"use strict";Fb=class{constructor(t=5){this.maxCacheSize=t,this.store=new Map}get(t){if(!this.store.has(t))return;const e=this.store.get(t);return this.store.delete(t),this.store.set(t,e),e}has(t){return this.store.has(t)}set(t,e){if(this.store.set(t,e),this.store.size>this.maxCacheSize){const i=this.store.keys();let s=this.store.size-this.maxCacheSize;for(;s>0;){const n=i.next();n.done||this.store.delete(n.value),s--}}return e}clear(){this.store.clear()}}}}),wo,vI,Te,jb,Hs=k({"packages/ag-charts-community/src/util/textMeasurer.ts"(){"use strict";T6(),fE(),wo=class{static measureText(t,e){return this.getMeasurer(e).measureText(t)}static measureLines(t,e){return this.getMeasurer(e).measureLines(t)}static getMeasurer(t){const e=typeof t.font=="string"?t.font:Te.toFontString(t.font),i=`${e}-${t.textAlign??"start"}-${t.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(e,t,i)}static clear(){this.instanceMap.clear()}static createFontMeasurer(t,e,i){const s=w6();s.font=t,s.textAlign=e.textAlign??"start",s.textBaseline=e.textBaseline??"alphabetic";const n=new vI(s,e);return this.instanceMap.set(i,n),n}},wo.instanceMap=new Fb(10),vI=class{constructor(t,e){this.ctx=t,this.measureMap=new Fb(100),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline),t.font=typeof e.font=="string"?e.font:Te.toFontString(e.font),this.textMeasurer=new jb(i=>this.cachedCtxMeasureText(i),e.textBaseline??"alphabetic")}textWidth(t,e){return this.textMeasurer.textWidth(t,e)}measureText(t){return this.textMeasurer.measureText(t)}measureLines(t){return this.textMeasurer.measureLines(t)}cachedCtxMeasureText(t){if(!this.measureMap.has(t)){const e=this.ctx.measureText(t);this.measureMap.set(t,{actualBoundingBoxAscent:e.actualBoundingBoxAscent,emHeightAscent:e.emHeightAscent,emHeightDescent:e.emHeightDescent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,actualBoundingBoxLeft:e.actualBoundingBoxLeft,actualBoundingBoxRight:e.actualBoundingBoxRight,alphabeticBaseline:e.alphabeticBaseline,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent,hangingBaseline:e.hangingBaseline,ideographicBaseline:e.ideographicBaseline,width:e.width})}return this.measureMap.get(t)}},Te=class{static toFontString({fontSize:t=10,fontStyle:e,fontWeight:i,fontFamily:s,lineHeight:n}){let a="";return e&&(a+=`${e} `),i&&(a+=`${i} `),a+=`${t}px`,n&&(a+=`/${n}px`),a+=` ${s}`,a.trim()}static getLineHeight(t){return Math.ceil(t*this.defaultLineHeight)}static getVerticalModifier(t){switch(t){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}},Te.EllipsisChar="\u2026",Te.defaultLineHeight=1.15,Te.lineSplitter=/\r?\n/g,jb=class{constructor(t,e="alphabetic"){this.measureTextFn=t,this.textBaseline=e,this.charMap=new Map}getMetrics(t){const e=this.measureTextFn(t);return e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),{width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}}getMultilineMetrics(t){let e=0,i=0,s=0,n=0,a=0;const o=Te.getVerticalModifier(this.textBaseline),r=[];let l=0;const c=t.length;for(const h of t){const u=this.measureTextFn(h);u.fontBoundingBoxAscent??(u.fontBoundingBoxAscent=u.emHeightAscent),u.fontBoundingBoxDescent??(u.fontBoundingBoxDescent=u.emHeightDescent),e<u.width&&(e=u.width),n<u.actualBoundingBoxLeft&&(n=u.actualBoundingBoxLeft),l===0?(i+=u.actualBoundingBoxAscent,s+=u.actualBoundingBoxAscent):a+=u.fontBoundingBoxAscent,l===c-1?i+=u.actualBoundingBoxDescent:a+=u.fontBoundingBoxDescent,r.push({text:h,width:u.width,height:u.actualBoundingBoxAscent+u.actualBoundingBoxDescent,lineHeight:u.fontBoundingBoxAscent+u.fontBoundingBoxDescent,offsetTop:u.actualBoundingBoxAscent,offsetLeft:u.actualBoundingBoxLeft}),l++}return i+=a,s+=a*o,{width:e,height:i,offsetTop:s,offsetLeft:n,lineMetrics:r}}textWidth(t,e){if(e){let i=0;for(let s=0;s<t.length;s++)i+=this.textWidth(t.charAt(s));return i}return t.length>1?this.measureTextFn(t).width:this.charMap.get(t)??this.charWidth(t)}measureText(t){return this.getMetrics(t)}measureLines(t){const e=typeof t=="string"?t.split(Te.lineSplitter):t;return this.getMultilineMetrics(e)}charWidth(t){const{width:e}=this.measureTextFn(t);return this.charMap.set(t,e),e}}}}),Tn,Gi,SI,su,Nn=k({"packages/ag-charts-community/src/scene/shape/text.ts"(){"use strict";R(),Hs(),Ft(),za(),hs(),hc(),Tn=class dk extends ra{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=dk.defaultStyles.textAlign,this.textBaseline=dk.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split(`
`).map(e=>e.trim())??[]}static computeBBox(e,i,s,n){const{offsetTop:a,offsetLeft:o,width:r,height:l}=wo.measureLines(e,n),c=n.lineHeight?n.lineHeight*e.length:l;return new ut(i-o,s-a,r,c)}computeBBox(){const{x:e,y:i,lines:s,textBaseline:n,textAlign:a,lineHeight:o}=this;return dk.computeBBox(s,e,i,{font:this,textBaseline:n,textAlign:a,lineHeight:o})}getTextMeasureBBox(){return this.computeBBox()}isPointInPath(e,i){const s=this.getBBox();return s?s.containsPoint(e,i):!1}render(e){const{ctx:i,stats:s}=e;if(!this.lines.length||!this.layerManager)return s&&(s.nodesSkipped+=1),super.render(e);const{fill:n,stroke:a,strokeWidth:o}=this,{globalAlpha:r}=i,{pixelRatio:l}=this.layerManager.canvas;if(!n&&!(a!=null&&o>0))return super.render(e);const c=Te.toFontString(this);if(i.font!==c&&(i.font=c),i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,n){this.applyFillAndAlpha(i);const{fillShadow:h}=this;h?.enabled&&(i.shadowColor=h.color,i.shadowOffsetX=h.xOffset*l,i.shadowOffsetY=h.yOffset*l,i.shadowBlur=h.blur*l),this.renderLines((u,d,p)=>i.fillText(u,d,p)),i.globalAlpha=r}if(a&&o){this.applyStrokeAndAlpha(i),i.lineWidth=o;const{lineDash:h,lineDashOffset:u,lineCap:d,lineJoin:p}=this;h&&i.setLineDash([...h]),u&&(i.lineDashOffset=u),d&&(i.lineCap=d),p&&(i.lineJoin=p),this.renderLines((g,f,x)=>i.strokeText(g,f,x)),i.globalAlpha=r}super.render(e)}renderLines(e){const{lines:i,x:s,y:n}=this,a=this.lineHeight??Te.getLineHeight(this.fontSize);let o=(a-a*i.length)*Te.getVerticalModifier(this.textBaseline);for(const r of i)e(r,s,n+o),o+=a}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}toSVG(){if(!this.visible||!this.text)return;const e=ui("text");return this.applySvgFillAttributes(e),e.setAttribute("font-family",this.fontFamily?.split(",")[0]??""),e.setAttribute("font-size",String(this.fontSize)),e.setAttribute("font-style",this.fontStyle??""),e.setAttribute("font-weight",String(this.fontWeight??"")),e.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),e.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),e.setAttribute("x",String(this.x)),e.setAttribute("y",String(this.y)),e.textContent=this.text??"",{elements:[e]}}},Tn.className="Text",Tn.defaultStyles={...ra.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"},S([ot()],Tn.prototype,"x",2),S([ot()],Tn.prototype,"y",2),S([ot({convertor:t=>Bh(t)?String(t):t,changeCb:t=>t.onTextChange()})],Tn.prototype,"text",2),S([ot()],Tn.prototype,"fontStyle",2),S([ot()],Tn.prototype,"fontWeight",2),S([ot()],Tn.prototype,"fontSize",2),S([ot()],Tn.prototype,"fontFamily",2),S([ot()],Tn.prototype,"textAlign",2),S([ot()],Tn.prototype,"textBaseline",2),S([ot()],Tn.prototype,"lineHeight",2),Gi=Tn,SI=class extends fp(Gi){},su=class extends fp(tu(Gi)){}}}),Gb,MI=k({"packages/ag-charts-community/src/util/textWrapper.ts"(){"use strict";Hs(),Gb=class{static wrapText(t,e){return this.wrapLines(t,e).join(`
`)}static wrapLines(t,e){const i=this.textWrap(t,e);return e.overflow==="hide"&&i.some(s=>s.endsWith(Te.EllipsisChar))?[]:i}static appendEllipsis(t){return t.replace(/[.,]{1,5}$/,"")+Te.EllipsisChar}static truncateLine(t,e,i,s){const n=e.textWidth(Te.EllipsisChar);let a=0,o=0;for(;o<t.length;o++){const r=e.textWidth(t.charAt(o));if(a+r>i)break;a+=r}if(t.length===o&&(!s||a+n<=i))return s?t+Te.EllipsisChar:t;for(t=t.slice(0,o).trimEnd();t.length&&e.textWidth(t)+n>i;)t=t.slice(0,-1).trimEnd();return t+Te.EllipsisChar}static textWrap(t,e){const i=t.split(Te.lineSplitter),s=wo.getMeasurer(e);if(e.textWrap==="never")return i.map(r=>this.truncateLine(r.trimEnd(),s,e.maxWidth));const n=[],a=e.textWrap==="hyphenate",o=e.textWrap==null||e.textWrap==="on-space";for(const r of i){let l=r.trimEnd();if(l===""){n.push(l);continue}let c=0,h=0,u=0;for(;c<l.length;){const d=l.charAt(c);if(h+=s.textWidth(d),d===" "&&(u=c),h>e.maxWidth){if(c===0)break;const p=s.textWidth(l.slice(0,c+1));if(p<=e.maxWidth){h=p,c++;continue}if(u){const x=this.getWordAt(l,u+1),y=s.textWidth(x);if(y<=e.maxWidth){n.push(l.slice(0,u).trimEnd()),l=l.slice(u).trimStart(),c=0,h=0,u=0;continue}else o&&y>e.maxWidth&&n.push(l.slice(0,u).trimEnd(),this.truncateLine(l.slice(u).trimStart(),s,e.maxWidth,!0))}else o&&n.push(this.truncateLine(l,s,e.maxWidth,!0));if(o){l="";break}const g=a?"-":"";let f=l.slice(0,c).trim();for(;f.length&&s.textWidth(f+g)>e.maxWidth;)f=f.slice(0,-1).trimEnd();if(n.push(f+g),!f.length){l="";break}l=l.slice(f.length).trimStart(),c=-1,h=0,u=0}c++}l&&n.push(l)}return this.avoidOrphans(n,s,e),this.clipLines(n,s,e)}static getWordAt(t,e){const i=t.indexOf(" ",e);return i===-1?t.slice(e):t.slice(e,i)}static clipLines(t,e,i){if(!i.maxHeight)return t;const{height:s,lineMetrics:n}=e.measureLines(t);if(s<=i.maxHeight)return t;for(let a=0,o=0;a<n.length;a++){const{lineHeight:r}=n[a];if(o+=r,o>i.maxHeight){if(i.overflow==="hide")return[];const l=t.slice(0,a||1),c=l.pop();return l.concat(this.truncateLine(c,e,i.maxWidth,!0))}}return t}static avoidOrphans(t,e,i){if(i.avoidOrphans===!1||t.length<2)return;const{length:s}=t,n=t[s-1],a=t[s-2];if(a.length<n.length)return;const o=a.lastIndexOf(" ");if(o===-1||o===a.indexOf(" ")||n.includes(" "))return;const r=a.slice(o+1);e.textWidth(n+r)<=i.maxWidth&&(t[s-2]=a.slice(0,o),t[s-1]=r+" "+n)}}}}),_e,nu=k({"packages/ag-charts-community/src/chart/caption.ts"(){"use strict";R(),Nn(),hs(),mt(),mt(),un(),Hs(),MI(),_e=class extends wt{constructor(){super(...arguments),this.id=ia(this),this.node=new SI({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(t,e){return t.layoutManager.addListener("layout:complete",()=>this.updateA11yText(t,e))}computeTextWrap(t,e){const{text:i,padding:s,wrapping:n}=this,a=Math.min(this.maxWidth??1/0,t)-s*2,o=this.maxHeight??e-s*2;if(!isFinite(a)&&!isFinite(o)){this.node.text=i;return}const r=Gb.wrapText(i??"",{maxWidth:a,maxHeight:o,font:this,textWrap:n});this.node.text=r,this.truncated=r.includes(Te.EllipsisChar)}updateA11yText(t,e){const{proxyInteractionService:i}=t;if(this.enabled&&this.text){const s=Ve.toCanvas(this.node);if(s){const{id:n}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:n,where:e})),this.proxyText.textContent=this.text,this.proxyText.setBounds(s),this.proxyText.addListener("mousemove",a=>this.handleMouseMove(t,a)),this.proxyText.addListener("mouseleave",a=>this.handleMouseLeave(t,a))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(t,e){if(e!=null&&this.enabled&&this.node.visible&&this.truncated){const{x:i,y:s}=Ve.toCanvas(this.node),n=e.sourceEvent.offsetX+i,a=e.sourceEvent.offsetY+s;t.tooltipManager.updateTooltip(this.id,{canvasX:n,canvasY:a,showArrow:!1},[{type:"structured",title:this.text}])}}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}},_e.SMALL_PADDING=10,S([I,us("node","visible")],_e.prototype,"enabled",2),S([I,us("node")],_e.prototype,"text",2),S([I,us("node")],_e.prototype,"textAlign",2),S([I,us("node")],_e.prototype,"fontStyle",2),S([I,us("node")],_e.prototype,"fontWeight",2),S([I,us("node")],_e.prototype,"fontSize",2),S([I,us("node")],_e.prototype,"fontFamily",2),S([I,us("node","fill")],_e.prototype,"color",2),S([I],_e.prototype,"spacing",2),S([I],_e.prototype,"maxWidth",2),S([I],_e.prototype,"maxHeight",2),S([I],_e.prototype,"wrapping",2),S([I],_e.prototype,"padding",2),S([I],_e.prototype,"layoutStyle",2)}});function N6(t){switch(t){case"x":case"y":case"angle":case"radius":return!0;default:return!1}}var Vb,mE=k({"packages/ag-charts-community/src/chart/chartAxisDirection.ts"(){"use strict";Vb=(t=>(t.X="x",t.Y="y",t.Angle="angle",t.Radius="radius",t))(Vb||{})}}),Wb,DI,yE,xE=k({"packages/ag-charts-community/src/chart/layout/layoutManager.ts"(){"use strict";R(),Ft(),Wb=(t=>(t[t.Caption=0]="Caption",t[t.Legend=1]="Legend",t[t.ToolbarLeft=2]="ToolbarLeft",t[t.ToolbarBottom=3]="ToolbarBottom",t[t.Navigator=4]="Navigator",t[t.Overlay=5]="Overlay",t))(Wb||{}),DI=class{constructor(){this.events=new Rh,this.elements=new Map}addListener(t,e){return this.events.on(t,e)}registerElement(t,e){return this.elements.has(t)?this.elements.get(t).add(e):this.elements.set(t,new Set([e])),()=>this.elements.get(t)?.delete(e)}createContext(t,e){const i=new yE(t,e);for(const s of Object.values(Wb))typeof s=="number"&&this.elements.get(s)?.forEach(n=>n(i));return i}emitLayoutComplete(t,e){const i="layout:complete",{width:s,height:n}=t;this.events.emit(i,{type:i,axes:e.axes??[],chart:{width:s,height:n},clipSeries:e.clipSeries??!1,series:e.series})}},yE=class{constructor(t,e){this.width=t,this.height=e,this.layoutBox=new ut(0,0,t,e)}}}}),$f,O6=k({"packages/ag-charts-community/src/chart/chartCaptions.ts"(){"use strict";mt(),Hs(),nu(),$f=class{constructor(){this.title=new _e,this.subtitle=new _e,this.footnote=new _e}positionCaptions(t){const{title:e,subtitle:i,footnote:s}=this,n=t.layoutBox.height/10;if(e.enabled){const{spacing:a}=e;this.positionCaption("top",e,t.layoutBox,n),this.shrinkLayoutByCaption("top",e,t.layoutBox,a)}i.enabled&&(this.positionCaption("top",i,t.layoutBox,n),this.shrinkLayoutByCaption("top",i,t.layoutBox,i.spacing)),s.enabled&&(this.positionCaption("bottom",s,t.layoutBox,n),this.shrinkLayoutByCaption("bottom",s,t.layoutBox,s.spacing))}positionAbsoluteCaptions(t){const{title:e,subtitle:i,footnote:s}=this,{rect:n}=t.series;for(const a of[e,i,s])if(a.layoutStyle==="overlay"){if(a.textAlign==="left")a.node.x=n.x+a.padding;else if(a.textAlign==="right"){const o=a.node.getBBox();a.node.x=n.x+n.width-o.width-a.padding}}}computeX(t,e){return t==="left"?e.x:t==="right"?e.x+e.width:e.x+e.width/2}positionCaption(t,e,i,s){const n=Math.max(Te.getLineHeight(e.fontSize),s);e.node.x=this.computeX(e.textAlign,i)+e.padding,e.node.y=i.y+(t==="top"?0:i.height)+e.padding,e.node.textBaseline=t,e.computeTextWrap(i.width,n)}shrinkLayoutByCaption(t,e,i,s=0){if(e.layoutStyle==="block"){const n=e.node.getTextMeasureBBox();i.shrink(Math.ceil(t==="top"?n.y-i.y+n.height+s:i.y+i.height-n.y+s),t)}}},S([I],$f.prototype,"title",2),S([I],$f.prototype,"subtitle",2),S([I],$f.prototype,"footnote",2)}}),bE,vE,_6=k({"packages/ag-charts-community/src/api/preset/chartTypeOriginator.ts"(){"use strict";R(),bE=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],vE=class{constructor(t){this.chartService=t,this.mementoOriginatorKey="chartType"}createMemento(){let t=this.chartService.publicApi?.getOptions()?.chartType;return t==null&&(t="candlestick"),t}guardMemento(t){return t==null||bE.includes(t)}restoreMemento(t,e,i){if(i==null)return;const s={chartType:i};this.chartService.publicApi?.updateDelta(s).catch(n=>st.error("error restoring state",n))}}}}),Hb,kI=k({"packages/ag-charts-community/src/util/destroy.ts"(){"use strict";Hb=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0}setFns(t){this.destroy(),this.destroyFns=t}push(...t){this.destroyFns.push(...t)}}}}),au,Ub=k({"packages/ag-charts-community/src/version.ts"(){"use strict";au="11.3.2"}}),II,SE,E6=k({"packages/ag-charts-community/src/api/state/historyManager.ts"(){"use strict";Fi(),kI(),Ub(),II=Symbol("previous-memento-not-found"),SE=class{constructor(t){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=ne.create(!0,"history"),this.destroyFns=new Hb,this.destroyFns.setFns([t.addListener("series-undo",this.undo.bind(this)),t.addListener("series-redo",this.redo.bind(this))])}destroy(){this.destroyFns.destroy()}addMementoOriginator(t){this.originators.set(t.mementoOriginatorKey,t),this.clearState.set(t.mementoOriginatorKey,t.createMemento()),this.debugEvent("History add originator:",t.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[t,e]of this.originators.entries())this.clearState.set(t,e.createMemento())}record(t,...e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const s of e){if(!this.originators.has(s.mementoOriginatorKey))throw new Error(`Originator [${s.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:t,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${t}]`)}undo(){const t=this.history[this.historyIndex];if(t){for(const e of t.mementos.keys()){const i=this.findPreviousMemento(e);if(i===II)throw new Error(`Could not find previous memento for [${e}].`);this.restoreMemento(e,i)}this.historyIndex-=1,this.debugEvent(`History undo: [${t.label}]`)}}redo(){const t=this.history[this.historyIndex+1];if(t){for(const[e,i]of t.mementos.entries())this.restoreMemento(e,i);this.historyIndex+=1,this.debugEvent(`History redo: [${t.label}]`)}}findPreviousMemento(t){for(let e=this.historyIndex-1;e>=0;e--)if(this.history[e].mementos.has(t))return this.history[e].mementos.get(t);return this.clearState.has(t)?this.clearState.get(t):II}restoreMemento(t,e){this.originators.get(t)?.restoreMemento(au,au,e)}debugEvent(...t){this.debug(...t,this.history.map((e,i)=>i===this.historyIndex?`** ${e.label} **`:e.label))}}}}),AI,ME=k({"packages/ag-charts-community/src/api/state/memento.ts"(){"use strict";R(),AI=class uO{constructor(e){this.version=e.split("-")[0]}save(...e){const i={version:this.version};for(const s of Object.values(e))i[s.mementoOriginatorKey]=this.encode(s,s.createMemento());return i}restore(e,...i){if(typeof e!="object"){st.warnOnce(`Could not restore data of type [${typeof e}], expecting an object, ignoring.`);return}if(e==null){st.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in e)||typeof e.version!="string"){st.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const s of i){const n=this.decode(s,e[s.mementoOriginatorKey]),a=[];if(!s.guardMemento(n,a)){const o=a.length>0?`

${a.join(`

`)}

`:"";st.warnOnce(`Could not restore [${s.mementoOriginatorKey}] data, value was invalid, ignoring.${o}`,n);return}s.restoreMemento(this.version,e.version,n)}}encode(e,i){try{return JSON.parse(JSON.stringify(i,uO.encodeTypes))}catch(s){throw new Error(`Failed to encode [${e.mementoOriginatorKey}] value [${s}].`,{cause:s})}}decode(e,i){if(i==null)return i;try{return JSON.parse(JSON.stringify(i),uO.decodeTypes)}catch(s){throw new Error(`Failed to decode [${e.mementoOriginatorKey}] value [${s}].`,{cause:s})}}static encodeTypes(e,i){return zh(this[e])?{__type:"date",value:this[e].toISOString()}:i}static decodeTypes(e,i){return Se(this[e])&&"__type"in this[e]&&this[e].__type==="date"?new Date(this[e].value):i}}}}),DE,P6=k({"packages/ag-charts-community/src/api/state/stateManager.ts"(){"use strict";Rt(),Ub(),ME(),DE=class{constructor(){this.caretaker=new AI(au),this.state=new Map}setState(t,e){hn(this.state.get(t.mementoOriginatorKey),e)||this.setStateAndRestore(t,e)}setStateAndRestore(t,e){this.state.set(t.mementoOriginatorKey,e),this.restoreState(t)}restoreState(t){const{caretaker:e,state:i}=this;if(!i.has(t.mementoOriginatorKey))return;const s=i.get(t.mementoOriginatorKey);e.restore({version:e.version,[t.mementoOriginatorKey]:s},t)}}}}),kE,R6=k({"packages/ag-charts-community/src/styles.css"(){kE=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-foreground-color: #464646;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-padding: 20px;--ag-charts-shadow-color: #00000080;--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #464646;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-input-background-color: #fff;--ag-charts-input-text-color: #464646;--ag-charts-crosshair-label-background-color: #fff;--ag-charts-crosshair-label-text-color: #464646;--ag-charts-spacing: 4px;--ag-charts-border-radius: 4px;--ag-charts-icon-size: 16px;--ag-charts-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-focus-shadow: 0 0 0 3px var(--ag-charts-accent-color);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-background-color: var(--ag-charts-background-color);--ag-charts-button-border-color: var(--ag-charts-border-color);--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-text-color: var(--ag-charts-text-color);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: solid 1px var(--ag-charts-border-color);--ag-charts-focus-border: solid 1px var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-chrome-text-color);background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-chrome-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-chrome-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-chrome-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);color:var(--ag-charts-chrome-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`}}),Qr,pc=k({"packages/ag-charts-community/src/util/listeners.ts"(){"use strict";R(),Qr=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex(n=>n.symbol===t);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(const i of this.getListenersByType(t))try{i.handler(...e)}catch(s){st.errorOnce(s)}}getListenersByType(t){return this.registeredListeners.get(t)??[]}destroy(){this.registeredListeners.clear()}}}}),or,Jr=k({"packages/ag-charts-community/src/util/baseManager.ts"(){"use strict";pc(),or=class{constructor(){this.listeners=new Qr,this.destroyFns=[],this.destroyed=!1}addListener(t,e){return this.listeners.addListener(t,e)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(t=>t()),this.destroyed=!0}}}}),IE,B6=k({"packages/ag-charts-community/src/util/guardedElement.ts"(){"use strict";R(),IE=class pk{constructor(e,i,s){this.element=e,this.topTabGuard=i,this.bottomTabGuard=s,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,n=>this.onTab(n,!1)),this.initTabGuard(this.bottomTabGuard,n=>this.onTab(n,!0)),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",n=>this.onBlur(n),{capture:!0})}set tabIndex(e){this.guardTabIndex=e,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(const e of this.destroyFns)e();this.destroyFns.length=0}initTabGuard(e,i){const s=()=>i(e);e.addEventListener("focus",s),this.destroyFns.push(()=>e.removeEventListener("focus",s))}setGuardIndices(e){const i=e;Ht(this.topTabGuard,"tabindex",i),Ht(this.bottomTabGuard,"tabindex",i)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:e}){const{topTabGuard:i,bottomTabGuard:s}=this;this.hasFocus=!1,this.guardTabIndex!==0&&e!==i&&e!==s&&this.setGuardIndices(this.guardTabIndex)}onTab(e,i){if(this.guardTabIndex!==0){let s;e.tabIndex===0?(s=this.findExitTarget(!i),this.setGuardIndices(this.guardTabIndex)):s=this.findEnterTarget(i),s?.focus()}}static queryFocusable(e,i){const s=be();return Array.from(e.querySelectorAll(i)).filter(n=>{if(n instanceof HTMLElement){const a=s.getComputedStyle(n);return a.display!=="none"&&a.visibility!=="none"}return!1})}findEnterTarget(e){const i=pk.queryFocusable(this.element,'[tabindex="0"]'),s=e?i.length-1:0;return i[s]}findExitTarget(e){const i=pk.queryFocusable(So(),"[tabindex]").filter(a=>a.tabIndex>0).sort((a,o)=>a.tabIndex-o.tabIndex),{before:s,after:n}=pk.findBeforeAndAfter(i,this.guardTabIndex);return e?s:n}static findBeforeAndAfter(e,i){let s=0,n=e.length-1,a,o;for(;s<=n;){const r=Math.floor((s+n)/2),l=e[r].tabIndex;if(l===i){a=e[r-1]||void 0,o=e[r+1]||void 0;break}else l<i?(a=e[r],s=r+1):(o=e[r],n=r-1)}return{before:a,after:o}}}}});function rr(t,e,i,s,n){e.addEventListener(i,s);const a=()=>e.removeEventListener(i,s,n);return t.push(a),a}function $b(t,e,i,s=["Escape"]){rr(t,e,"keydown",n=>{Kb(n,...s)&&i(n)})}function CI(t,e,i){const s=rr(t,window,"mousedown",n=>{[0,2].includes(n.button)&&!AE(e,n)&&(i(),s())});return s}function LI(t,e,i){const s=rr(t,window,"touchstart",n=>{Array.from(n.targetTouches).some(o=>!AE(e,o))&&(i(),s())});return s}function AE(t,e){return e.target instanceof Node&&t.contains(e.target)}function wI(t,e,i,s){i.forEach(a=>Ht(a,"data-focus-visible-override",s)),rr(t,e,"keydown",()=>{i.forEach(a=>Ht(a,"data-focus-visible-override",!0))},{once:!0})}function Kf(t){return!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)}function Kb(t,...e){return Kf(t)&&e.some(i=>t.key===i)}function CE(t,e,i,s){i&&rr(t,e,"keydown",n=>{Kb(n,s)&&i.focus()})}function z6(t,e,i,s,n,a){CE(t,e,n,a),CE(t,e,i,s),rr(t,e,"keydown",o=>{Kb(o,s,a)&&o.preventDefault()})}function LE(t){const{orientation:e,buttons:i,wrapAround:s=!1,onEscape:n,onFocus:a,onBlur:o}=t,{nextKey:r,prevKey:l}=ou[e],c=p=>{p.target&&"tabIndex"in p.target&&(i.forEach(g=>g.tabIndex=-1),p.target.tabIndex=0)},[h,u]=s?[i.length,i.length]:[0,1/0],d=[];for(let p=0;p<i.length;p++){const g=i[(h+p-1)%u],f=i[p],x=i[(h+p+1)%u];rr(d,f,"focus",c),a&&rr(d,f,"focus",a),o&&rr(d,f,"blur",o),n&&$b(d,f,n),z6(d,f,x,r,g,l),f.tabIndex=p===0?0:-1}return d}function wE(t){const{sourceEvent:e,orientation:i,menu:s,buttons:n,closeCallback:a,overrideFocusVisible:o}=t,{nextKey:r,prevKey:l}=ou[i],c=Yb(e);Ht(c,"aria-expanded",!0);const h=new NE(s,c,a),u=()=>h.close(),{destroyFns:d}=h;return s.role="menu",s.ariaOrientation=i,d.push(...LE({orientation:i,buttons:n,onEscape:u,wrapAround:!0})),s.tabIndex=-1,$b(d,s,u),rr(d,s,"keydown",p=>{p.target===s&&(p.key===r||p.key===l)&&(p.preventDefault(),n[0]?.focus())}),n[0]?.focus({preventScroll:!0}),o!==void 0&&wI(d,s,n,o),h}function F6(t,e){return i=>{if(t.ariaDisabled==="true")return i.preventDefault();e(i)}}function TI(t){return"button"in t?t.button===0:Kf(t)&&(t.code==="Space"||t.key==="Enter")}function Yb(t){if(t?.target instanceof HTMLElement&&"tabindex"in t.target.attributes)return t.target}function TE(t){const e=i=>{if(i.defaultPrevented)return;Hh(i.target,"data-preventdefault",!0)&&Kb(i,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&i.preventDefault()};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}var ou,NE,ru=k({"packages/ag-charts-community/src/util/keynavUtil.ts"(){"use strict";R(),ou={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}},NE=class{constructor(t,e,i){this.lastFocus=e,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(CI(this.destroyFns,t,()=>this.close(!0))),this.destroyFns.push(LI(this.destroyFns,t,()=>this.close(!0)))}close(t){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(t)}finishClosing(t){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0,Ht(this.lastFocus,"aria-expanded",!1),t||this.lastFocus?.focus({preventScroll:!0}),this.lastFocus=void 0}}}}),OE,j6=k({"packages/ag-charts-community/src/util/pixelRatioObserver.ts"(){"use strict";R(),OE=class{constructor(t){this.callback=t,this.devicePixelRatio=be("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=e=>{e.matches||(this.devicePixelRatio=be("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){const t=be("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);t?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=t}}}}),NI,_E=k({"packages/ag-charts-community/src/util/sizeMonitor.ts"(){"use strict";R(),j6(),NI=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([e,i])=>this.observe(e,i)),this.queuedObserveRequests=[],this.observeWindow()},typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(e=>{for(const{target:i,contentRect:{width:s,height:n}}of e){const a=this.elements.get(i);this.checkSize(a,i,s,n)}}));let t;this.pixelRatioObserver=new OE(()=>{clearTimeout(t),t=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady=So("readyState")==="complete",this.documentReady?this.observeWindow():be()?.addEventListener("load",this.onLoad)}destroy(){be()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){const t=this.pixelRatioObserver?.pixelRatio??1;for(const[e,i]of this.elements)if(i.size!=null&&i.size.pixelRatio!==t){const{width:s,height:n}=i.size;i.size={width:s,height:n,pixelRatio:t},i.cb(i.size,e)}}checkSize(t,e,i,s){if(t&&(i!==t.size?.width||s!==t.size?.height)){const n=this.pixelRatioObserver?.pixelRatio??1;t.size={width:i,height:s,pixelRatio:n},t.cb(t.size,e)}}observe(t,e){if(!this.documentReady){this.queuedObserveRequests.push([t,e]);return}this.elements.has(t)?this.removeFromQueue(t):this.resizeObserver?.observe(t);const i={cb:e};this.elements.set(t,i)}unobserve(t){this.resizeObserver?.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}}}}),lu,Zb=k({"packages/ag-charts-community/src/util/stateTracker.ts"(){"use strict";lu=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),typeof e<"u"&&super.set(t,e),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}}}}),EE,G6=k({"packages/ag-charts-community/src/dom/domLayout.html"(){EE='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>'}});function V6(t,e){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(s=>{for(const n of s)n.target===t&&e(n.intersectionRatio)},{root:t});return i.observe(t),i}function PE(t,e){const i=Bt("div");return i.className="ag-charts-tab-guard",t.insertAdjacentElement(e,i),i}var RE,BE,OI,zE,_I,Xb,EI,FE=k({"packages/ag-charts-community/src/dom/domManager.ts"(){"use strict";R(),Ft(),R6(),Jr(),B6(),ru(),_E(),Zb(),G6(),RE=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],BE=new Set(["canvas-container","canvas","tooltip-container"]),OI={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},zE=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]),_I={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return _I}},Xb=class $d extends or{constructor(e,i,s,n="normal"){super(),this.chart=e,this.styleContainer=s,this.mode=n,this.anchorName=`--${ia(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new NI,this.cursorState=new lu("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let a=!1;if(this.observer=V6(this.element,o=>{o===0&&!a&&this.listeners.dispatch("hidden",{type:"hidden"}),a=o===0}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",kE),this.setContainer(i),this.destroyFns.push(TE(this.element)),this.mode==="normal"){const o=this.rootElements["canvas-center"].element;if(o==null)throw new Error("Error initializing tab guards");const r=PE(o,"beforebegin"),l=PE(o,"afterend");this.tabGuards=new IE(o,r,l)}}initDOM(){if(this.mode==="normal"){const s=Bt("div");return s.innerHTML=EE,s.firstChild}const e=Bt("div");e.role="presentation",e.dataset.agCharts="",e.classList.add("ag-charts-wrapper");const i=Bt("div");return e.appendChild(i),i.role="presentation",i.classList.add("ag-charts-series-area"),e}initRootElements(){const{mode:e,element:i}=this,s={};for(const n of RE){const a=`ag-charts-${n}`;let o;if(e==="normal"?o=i.classList.contains(a)?i:i.getElementsByClassName(a)[0]:BE.has(n)?o=i:o=i.getElementsByClassName(a)[0]??Bt("div"),o==null)throw new Error(`AG Charts - unable to find DOM element ${a}`);s[n]={element:o,children:new Map,listeners:[]}}return s}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0,Object.values(this.rootElements).forEach(e=>{e.children.forEach(i=>i.remove()),e.element.remove()}),this.element.remove()}postRenderUpdate(){this.mode!=="minimal"&&(this.pendingContainer==null||this.pendingContainer===this.container||($d.batchedUpdateContainer.length===0&&be().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),$d.batchedUpdateContainer.push(this)))}applyBatchedUpdateContainer(){for(const e of $d.batchedUpdateContainer)e.destroyed||e.updateContainer();$d.batchedUpdateContainer.splice(0)}setSizeOptions(e=300,i=300,s,n){const{style:a}=this.element;a.width=`${s??e}px`,a.height=`${n??i}px`,this.minWidth=s??e,this.minHeight=n??i,this.updateContainerClassName()}updateContainerSize(){const{style:e}=this.rootElements["canvas-center"].element;e.visibility=this.containerSize==null?"hidden":"",this.containerSize?(e.width=`${this.containerSize.width??0}px`,e.height=`${this.containerSize.height??0}px`):(e.width="",e.height=""),this.updateContainerClassName()}setTabGuardIndex(e){this.tabGuards&&(this.tabGuards.tabIndex=e)}setContainer(e){e!==this.container&&(this.pendingContainer=e,(this.mode==="minimal"||this.container==null)&&this.updateContainer())}updateContainer(){const{pendingContainer:e}=this;if(!(e==null||e===this.container)){if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),this.documentRoot!=null)for(const i of this.rootElements.styles.children.keys())this.removeChild("styles",i);this.container=e,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(e),this.initiallyConnected=this.mode==="minimal"||e.isConnected;for(const[i,s]of this.styles)this.addStyles(i,s);e.appendChild(this.element),this.sizeMonitor.observe(e,i=>{this.containerSize=i,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}}setThemeClass(e){const i="ag-charts-theme-";this.element.classList.forEach(s=>{s.startsWith(i)&&s!==e&&this.element.classList.remove(s)}),this.element.classList.add(e)}setThemeParameters(e){const i={accentColor:"accent-color",axisColor:"axis-color",backgroundColor:"background-color",borderColor:"border-color",foregroundColor:"foreground-color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",gridLineColor:"grid-line-color",padding:"padding",subtleTextColor:"subtle-text-color",textColor:"text-color",chromeBackgroundColor:"chrome-background-color",chromeFontFamily:"chrome-font-family",chromeFontSize:"chrome-font-size",chromeFontWeight:"chrome-font-weight",chromeSubtleTextColor:"chrome-subtle-text-color",chromeTextColor:"chrome-text-color",inputBackgroundColor:"input-background-color",inputTextColor:"input-text-color",crosshairLabelBackgroundColor:"crosshair-label-background-color",crosshairLabelTextColor:"crosshair-label-text-color"},s=["fontSize","chromeFontSize"];for(const[n,a]of Ba(e)){let o=`${a}`;s.includes(n)&&(o=`${a}px`),this.element.style.setProperty(`--ag-charts-${i[n]}`,o)}}updateCanvasLabel(e){Ht(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,i){return["focus","blur","keydown","keyup"].includes(i)?this.rootElements["series-area"].element:e}addEventListener(e,i,s){this.getEventElement(this.element,e).addEventListener(e,i,s)}removeEventListener(e,i,s){this.getEventElement(this.element,e).removeEventListener(e,i,s)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){const e=be(),i=new ut(0,0,e.innerWidth,e.innerHeight),s=this.getRawOverlayClientRect();return i.intersection(s)?.toDOMRect()??_I}getRawOverlayClientRect(){let e=this.element;const i=this.element.getRootNode()?.fullscreenElement;for(;e!=null;){let a;if(i!=null&&e===i)a=!0;else{const r=e.computedStyleMap?.()?.get("overflow-y")?.toString();a=r==="auto"||r==="scroll"}if(a)return ut.fromDOMRect(e.getBoundingClientRect());e=e.parentElement}if(this.documentRoot!=null)return ut.fromDOMRect(this.documentRoot.getBoundingClientRect());const{innerWidth:s,innerHeight:n}=be();return new ut(0,0,s,n)}getShadowDocumentRoot(e=this.container){const i=e?.ownerDocument?.body??So("body");for(;e!=null;){if(e===i)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){const{children:i}=this.rootElements[e],s=[];for(const n of i.values())s.push(ut.fromDOMRect(n.getBoundingClientRect()));return ut.merge(s)}isManagedChildDOMElement(e,i,s){const{children:n}=this.rootElements[i],a=n?.get(s);return a!=null&&e.contains(a)}contains(e,i){return i==null?this.element.contains(e):this.rootElements[i].element.contains(e)}addStyles(e,i){const s="data-ag-charts";if(this.styles.set(e,i),this.container==null)return;const n=r=>r.getAttribute(s)===e,a=r=>{const l=new Set(["TITLE","META"]);let c=!0,h;for(const d of r.children){if(c&&l.has(d.tagName)){h=d;continue}if(c=!1,n(d))return;d.hasAttribute(s)&&(h=d)}const u=Bt("style");return this.chart.styleNonce!=null&&(u.nonce=this.chart.styleNonce),h==null?r.prepend(u):r.insertBefore(u,h.nextSibling),u};let o;this.styleContainer?o=a(this.styleContainer):this.initiallyConnected===!1?o=this.addChild("styles",e):this.documentRoot==null&&!$d.headStyles.has(e)?(o=a(So("head")),$d.headStyles.add(e)):this.documentRoot!=null&&(o=this.addChild("styles",e)),!(o==null||n(o))&&(o.setAttribute(s,e),o.innerHTML=i)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e,i){this.cursorState.set(e,i),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(e,i,s,n){const{element:a,children:o,listeners:r}=this.rootElements[e];if(!o)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(o.has(i))return o.get(i);const{childElementType:l="div"}=zE.get(e)??{};if(s&&s.tagName.toLowerCase()!==l.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const c=s??Bt(l);for(const[h,u,d]of r)c.addEventListener(h,u,d);if(o.set(i,c),l==="style"&&this.chart.styleNonce!=null&&(c.nonce=this.chart.styleNonce),n){const h=a.querySelector(n.query);if(h==null)throw new Error(`AG Charts - addChild query failed ${n.query}`);h.insertAdjacentElement(n.where,c)}else a?.appendChild(c);return c}removeChild(e,i){const{children:s}=this.rootElements[e];s&&(s.get(i)?.remove(),s.delete(i))}incrementDataCounter(e){const{dataset:i}=this.element;i[e]??(i[e]="0"),i[e]=String(Number(i[e])+1)}setDataBoolean(e,i){this.element.dataset[e]=String(i)}updateContainerClassName(){const{element:e,containerSize:i,minWidth:s,minHeight:n}=this;e.classList.toggle(OI.safeHorizontal,s>=(i?.width??1/0)),e.classList.toggle(OI.safeVertical,n>=(i?.height??1/0))}},Xb.batchedUpdateContainer=[],Xb.headStyles=new Set,EI=Xb}}),jE,W6=k({"packages/ag-charts-community/src/widget/boundedTextWidget.ts"(){"use strict";R(),qr(),jE=class extends Lo{constructor(){super(Bt("div")),this.textElement=ui("text"),this.textElement.role="presentation",this.svgElement=ui("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(t){this.textElement.textContent=t;const i=this.textElement.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}}}}),PI,GE=k({"packages/ag-charts-community/src/widget/abstractButtonWidget.ts"(){"use strict";R(),qr(),PI=class extends Lo{constructor(t,e){super(t),Ht(this.elem,"role",e),this.setEnabled(!0)}destructor(){}setEnabled(t){Ht(this.elem,"aria-disabled",!t)}addListener(t,e){return super.addListener(t,(i,s)=>{(t==="click"||t==="dblclick")&&this.isDisabled()||e(i,s)})}}}}),yp,qb=k({"packages/ag-charts-community/src/widget/buttonWidget.ts"(){"use strict";R(),GE(),yp=class extends PI{constructor(){super(Bt("button"))}}}}),VE,H6=k({"packages/ag-charts-community/src/widget/groupWidget.ts"(){"use strict";R(),qr(),VE=class extends Lo{constructor(){super(Bt("div")),Ht(this.elem,"role","group")}destructor(){}}}}),Qb,RI=k({"packages/ag-charts-community/src/widget/rovingTabContainerWidget.ts"(){"use strict";R(),ru(),qr(),Qb=class extends Lo{constructor(t,e){super(Bt("div")),this.focusedChildIndex=0,this.onChildFocus=(i,s)=>{const n=this.children[this.focusedChildIndex];this.focusedChildIndex=s.index,n?.setTabIndex(-1),s.setTabIndex(0)},this.onChildKeyDown=(i,s)=>{const n=this.orientation,[a,o]=n==="both"?[ou.horizontal,ou.vertical]:[ou[n],void 0];let r=-1;if(Kf(i.sourceEvent)){const l=i.sourceEvent.key;l===a.nextKey||l===o?.nextKey?r=s.index+1:(l===a.prevKey||l===o?.prevKey)&&(r=s.index-1)}this.children[r]?.focus()},Ht(this.elem,"role",e),this.orientation=t}get orientation(){return Hh(this.elem,"aria-orientation")??"both"}set orientation(t){Ht(this.elem,"aria-orientation",t!=="both"?t:void 0)}focus(){this.children[this.focusedChildIndex]?.focus()}clear(){this.focusedChildIndex=0;for(const t of this.children)this.removeChildListeners(t),t.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(t){t.addListener("focus",this.onChildFocus),t.addListener("keydown",this.onChildKeyDown)}removeChildListeners(t){t.removeListener("focus",this.onChildFocus),t.removeListener("keydown",this.onChildKeyDown)}onChildAdded(t){this.addChildListeners(t),t.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(t){this.removeChildListeners(t);const{focusedChildIndex:e,children:i}=this,s=e===t.index;for(let n=0;n<i.length;n++){const a=i[n];a.index===e&&(this.focusedChildIndex=n),a.index=n}if(s){const n=i[e]??i[e-1];n?(this.focusedChildIndex=n.index,n.setTabIndex(0)):this.focusedChildIndex=0}}}}}),WE,U6=k({"packages/ag-charts-community/src/widget/listWidget.ts"(){"use strict";R(),RI(),qr(),WE=class extends Qb{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(t=>t.getElement().parentElement.remove())}addChildToDOM(t,e){const i=Bt("div");Ht(i,"role","listitem"),ko(i,"position","absolute"),Lo.setElementContainer(t,i),this.appendOrInsert(i,e),this.setHidden(!1)}removeChildFromDOM(t){t.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(t){this.children.length===0&&(t=!0),super.setHidden(t)}}}}),cu,Jb=k({"packages/ag-charts-community/src/widget/nativeWidget.ts"(){"use strict";qr(),cu=class extends Lo{constructor(t){super(t)}destructor(){}}}});function tl(t,e=2){return typeof t=="number"?UE(t,e):typeof t=="string"?t:String(t??"")}function HE(t){return $E.format(t)}function UE(t,e){let i=BI.get(e);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:e,useGrouping:!1}),BI.set(e,i)),i.format(t)}var $E,BI,gc=k({"packages/ag-charts-community/src/util/format.util.ts"(){"use strict";$E=new Intl.NumberFormat("en-US",{style:"percent"}),BI=new Map().set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}))}}),tv,ev,KE=k({"packages/ag-charts-community/src/widget/sliderWidget.ts"(){"use strict";R(),gc(),qr(),tv=class Px extends Lo{constructor(){super(Bt("input")),this._step=Px.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(e){this._step=e,this.getElement().step=e.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(e){if(e!==this._keyboardStep?.step&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),e!==void 0)){const i=()=>this.getElement().step=e.attributeValue,s=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:e,onKeyDown:i,onKeyUp:s,onBlur:s},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return Hh(this.elem,"aria-orientation")??"both"}set orientation(e){Ht(this.elem,"aria-orientation",e!=="both"?e:void 0),Px.registerDefaultPreventers(this,e)}destructor(){}clampValueRatio(e,i){const s=this.getValueRatio(),n=Nt(e,s,i);return n!==s&&this.setValueRatio(n),n}setValueRatio(e,i){const{divider:s}=this.step,n=Math.round(e*1e4)/s,{ariaValueText:a=HE(n/s)}=i??{},o=this.getElement();o.value=`${n}`,o.ariaValueText=a}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(e,i){i==="both"?e.removeListener("keydown",Px.onKeyDown):e.addListener("keydown",Px.onKeyDown)}static onKeyDown(e,i){let s=[];const{orientation:n}=i;n==="horizontal"?s=["ArrowUp","ArrowDown"]:n==="vertical"&&(s=["ArrowLeft","ArrowRight"]),s.includes(e.sourceEvent.code)&&e.sourceEvent.preventDefault()}},tv.STEP_ONE={attributeValue:"1",divider:1},tv.STEP_HUNDRETH={attributeValue:"0.01",divider:100},ev=tv}}),YE,$6=k({"packages/ag-charts-community/src/widget/switchWidget.ts"(){"use strict";R(),qb(),YE=class extends yp{constructor(){super(),Ht(this.elem,"role","switch"),this.setChecked(!1)}setChecked(t){Ht(this.elem,"aria-checked",t)}}}}),Yf,zI=k({"packages/ag-charts-community/src/widget/toolbarWidget.ts"(){"use strict";RI(),Yf=class extends Qb{constructor(t="horizontal"){super(t,"toolbar")}destructor(){}}}});function xp(t,e){return e.params?.type===t}function K6(t){if(t==="button")return new yp;if(t==="slider")return new ev;if(t==="toolbar")return new Yf;if(t==="group")return new VE;if(t==="list")return new WE;if(t==="region")return new cu(Bt("div"));if(t==="text")return new jE;if(t==="listswitch")return new YE;throw Error("AG Charts - error allocating meta")}function ZE(t){const e={params:t,result:void 0};return e.result=K6(e.params.type),e}var FI,XE=k({"packages/ag-charts-community/src/dom/proxyInteractionService.ts"(){"use strict";R(),W6(),qb(),H6(),U6(),Jb(),KE(),$6(),zI(),FI=class{constructor(t,e){this.localeManager=t,this.domManager=e,this.destroyFns=[]}destroy(){this.destroyFns.forEach(t=>t())}addLocalisation(t){t(),this.destroyFns.push(this.localeManager.addListener("locale-changed",t))}createProxyContainer(t){const e=ZE(t),{params:i,result:s}=e,n=s.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,n),n.classList.add(...i.classList,"ag-charts-proxy-container"),n.role=i.type,"ariaOrientation"in i&&(n.ariaOrientation=i.ariaOrientation),xp("toolbar",e)&&(e.result.orientation=e.params.orientation),this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),s}createProxyElement(t){const e=ZE(t);if(xp("button",e)){const{params:i,result:s}=e,n=s.getElement();if(this.initInteract(i,s),typeof i.textContent=="string")n.textContent=i.textContent;else{const{textContent:a}=i;this.addLocalisation(()=>{n.textContent=this.localeManager.t(a.id,a.params)})}this.setParent(e.params,e.result)}if(xp("slider",e)){const{params:i,result:s}=e,n=s.getElement();this.initInteract(i,s),n.type="range",n.role="presentation",n.style.margin="0px",this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),this.setParent(e.params,e.result)}if(xp("text",e)){const{params:i,result:s}=e;this.initElement(i,s),this.setParent(e.params,e.result)}if(xp("listswitch",e)){const{params:i,result:s}=e;this.initInteract(i,s),s.setTextContent(i.textContent),s.setChecked(i.ariaChecked),s.setAriaDescribedBy(i.ariaDescribedBy),this.setParent(e.params,e.result)}if(xp("region",e)){const{params:i,result:s}=e,n=s.getElement();this.initInteract(i,s),n.role="region",this.setParent(e.params,e.result)}return e.result}initElement(t,e){const i=e.getElement();return ko(i,"cursor",t.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(t,e){const{tabIndex:i,domIndex:s}=t,n=this.initElement(t,e);i!==void 0&&(n.tabIndex=i),s!==void 0&&(e.domIndex=s)}setParent(t,e){if("parent"in t)t.parent?.addChild(e);else{const i={where:t.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",t.domManagerId,e.getElement(),i)}}}}}),Y6=k({"packages/ag-charts-locale/src/ar-EG.ts"(){"use strict"}}),Z6=k({"packages/ag-charts-locale/src/bg-BG.ts"(){"use strict"}}),X6=k({"packages/ag-charts-locale/src/cs-CZ.ts"(){"use strict"}}),q6=k({"packages/ag-charts-locale/src/da-DK.ts"(){"use strict"}}),Q6=k({"packages/ag-charts-locale/src/de-DE.ts"(){"use strict"}}),J6=k({"packages/ag-charts-locale/src/el-GR.ts"(){"use strict"}}),jI,tZ=k({"packages/ag-charts-locale/src/en-US.ts"(){"use strict";jI={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"}}}),eZ=k({"packages/ag-charts-locale/src/es-ES.ts"(){"use strict"}}),iZ=k({"packages/ag-charts-locale/src/fa-IR.ts"(){"use strict"}}),sZ=k({"packages/ag-charts-locale/src/fi-FI.ts"(){"use strict"}}),nZ=k({"packages/ag-charts-locale/src/fr-FR.ts"(){"use strict"}}),aZ=k({"packages/ag-charts-locale/src/he-IL.ts"(){"use strict"}}),oZ=k({"packages/ag-charts-locale/src/hr-HR.ts"(){"use strict"}}),rZ=k({"packages/ag-charts-locale/src/hu-HU.ts"(){"use strict"}}),lZ=k({"packages/ag-charts-locale/src/it-IT.ts"(){"use strict"}}),cZ=k({"packages/ag-charts-locale/src/ja-JP.ts"(){"use strict"}}),hZ=k({"packages/ag-charts-locale/src/ko-KR.ts"(){"use strict"}}),uZ=k({"packages/ag-charts-locale/src/nb-NO.ts"(){"use strict"}}),dZ=k({"packages/ag-charts-locale/src/nl-NL.ts"(){"use strict"}}),pZ=k({"packages/ag-charts-locale/src/pl-PL.ts"(){"use strict"}}),gZ=k({"packages/ag-charts-locale/src/pt-BR.ts"(){"use strict"}}),fZ=k({"packages/ag-charts-locale/src/pt-PT.ts"(){"use strict"}}),mZ=k({"packages/ag-charts-locale/src/ro-RO.ts"(){"use strict"}}),yZ=k({"packages/ag-charts-locale/src/sk-SK.ts"(){"use strict"}}),xZ=k({"packages/ag-charts-locale/src/sv-SE.ts"(){"use strict"}}),bZ=k({"packages/ag-charts-locale/src/tr-TR.ts"(){"use strict"}}),vZ=k({"packages/ag-charts-locale/src/uk-UA.ts"(){"use strict"}}),SZ=k({"packages/ag-charts-locale/src/ur-PK.ts"(){"use strict"}}),MZ=k({"packages/ag-charts-locale/src/vi-VN.ts"(){"use strict"}}),DZ=k({"packages/ag-charts-locale/src/zh-CN.ts"(){"use strict"}}),kZ=k({"packages/ag-charts-locale/src/zh-HK.ts"(){"use strict"}}),IZ=k({"packages/ag-charts-locale/src/zh-TW.ts"(){"use strict"}}),qE=k({"packages/ag-charts-locale/src/main.ts"(){"use strict";Y6(),Z6(),X6(),q6(),Q6(),J6(),tZ(),eZ(),iZ(),sZ(),nZ(),aZ(),oZ(),rZ(),lZ(),cZ(),hZ(),uZ(),dZ(),pZ(),gZ(),fZ(),mZ(),yZ(),xZ(),bZ(),vZ(),SZ(),MZ(),DZ(),kZ(),IZ()}}),QE,iv,JE,AZ=k({"packages/ag-charts-community/src/locale/defaultMessageFormatter.ts"(){"use strict";R(),QE=/\$\{(\w+)}(?:\[(\w+)])?/gi,iv={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},JE=({defaultValue:t,variables:e})=>t?.replaceAll(QE,(i,s,n)=>{const a=e[s],o=n!=null?iv[n]:null;return n!=null&&o==null&&st.warnOnce(`Format style [${n}] is not supported`),o!=null?o.format(a):typeof a=="number"?iv.number.format(a):a instanceof Date?iv.datetime.format(a):String(a)})}}),tP,CZ=k({"packages/ag-charts-community/src/locale/localeManager.ts"(){"use strict";qE(),pc(),AZ(),tP=class extends Qr{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(t){this.localeText!==t&&(this.localeText=t,this.dispatch("locale-changed"))}setLocaleTextFormatter(t){this.getLocaleText=t,this.getLocaleText!==t&&(this.getLocaleText=t,this.dispatch("locale-changed"))}t(t,e={}){const{localeText:i=jI,getLocaleText:s}=this,n=i[t];return s?.({key:t,defaultValue:n,variables:e})??JE({key:t,defaultValue:n,variables:e})??t}}}}),sv,eP=k({"packages/ag-charts-community/src/scene/canvas/hdpiCanvas.ts"(){"use strict";R(),un(),p_(),sv=class{constructor(t){this.enabled=!0,this.width=600,this.height=300;const{width:e,height:i,canvasElement:s,willReadFrequently:n=!1}=t;this.pixelRatio=t.pixelRatio??be("devicePixelRatio")??1,this.element=s??Bt("canvas"),this.element.style.display="block",this.element.style.width=(e??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((e??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:n}),this.onEnabledChange(),this.resize(e??0,i??0,this.pixelRatio),d_(this.context)}drawImage(t,e=0,i=0){return t.drawImage(this.context.canvas,e,i)}toDataURL(t){return this.element.toDataURL(t)}resize(t,e,i){if(!(t>0&&e>0))return;const{element:s,context:n}=this;s.width=Math.round(t*i),s.height=Math.round(e*i),n.setTransform(i,0,0,i,0,0),s.style.width=t+"px",s.style.height=e+"px",this.width=t,this.height=e,this.pixelRatio=i}clear(){u_(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}reset(){this.context.resetTransform()}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}},S([dc(t=>t.onEnabledChange())],sv.prototype,"enabled",2)}}),iP,LZ=k({"packages/ag-charts-community/src/scene/image/imageLoader.ts"(){"use strict";R(),iP=class extends Rh{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(t,e){const i=this.cache.get(t);if(i?.image)return i.image;if(i!=null&&e){i.nodes.add(e);return}if(!e)return;const s={image:void 0,nodes:new Set([e])},n=new Image;return this.imageLoadingCount++,n.onload=()=>{s.image=n,s.nodes.forEach(a=>a.markDirty()),s.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:t})},n.onerror=()=>{this.imageLoadingCount--,s.nodes.clear(),this.emit("image-error",{uri:t})},n.src=t,this.cache.set(t,s),s.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){this.cache.forEach(t=>{t.nodes.clear()}),this.cache.clear()}}}}),sP,wZ=k({"packages/ag-charts-community/src/scene/layersManager.ts"(){"use strict";Fi(),Gk(),sP=class{constructor(t){this.canvas=t,this.debug=ne.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(t,e,i){this.canvas.resize(t,e,i),this.layersMap.forEach(({canvas:s})=>s.resize(t,e,i))}addLayer(t){const{width:e,height:i,pixelRatio:s}=this.canvas,{name:n}=t,a=new lb({width:e,height:i,pixelRatio:s});return this.layersMap.set(a,{id:this.nextLayerId++,name:n,canvas:a}),this.debug("Scene.addLayer() - layers",this.layersMap),a}removeLayer(t){this.layersMap.has(t)&&(this.layersMap.delete(t),t.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const t of this.layersMap.values())t.canvas.destroy();this.layersMap.clear()}}}});function TZ(t){for(const e of["B","KB","MB","GB"]){if(t<1536)return`${t.toFixed(1)}${e}`;t/=1024}return`${t.toFixed(1)}TB}`}function NZ(){if(!("memory"in performance))return;const{totalJSHeapSize:t,usedJSHeapSize:e,jsHeapSizeLimit:i}=performance.memory,s=[];for(const n of[e,t,i])typeof n=="number"&&s.push(TZ(n));return`Heap ${s.join(" / ")}`}function nP(t,e,i,s,n={},a=ut.zero){if(!ne.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:o=0,layersSkipped:r=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:h=0,opsSkipped:u=0}=s??{},d=performance.now(),{start:p,...g}=e,f=Object.entries(g).map(([N,P])=>oP(N,P)).filter(N=>N!=null).join(" + "),x=Object.entries(n).map(([N,P])=>`${N}: ${JSON.stringify(P)}`).join(" ; "),y=ne.check("scene:stats:verbose"),b=NZ(),v=[`${oP("\u23F1\uFE0F",p,d)} (${f})`,`${x}`,`Layers: ${y?GI(o,r):t.size}`,y?`Nodes: ${GI(l,c)}`:null,y?`Ops: ${GI(h,u)}`:null,y&&b?b:null].filter(Ji),M=new jb(N=>i.measureText(N)),D=new Map(v.map(N=>[N,M.measureLines(N)])),L=Math.max(...Array.from(D.values(),N=>N.width)),A=PZ(D.values(),N=>N.height),C=2+a.x;i.save(),i.fillStyle="white",i.fillRect(C,0,L,A),i.fillStyle="black";let T=0;for(const[N,P]of D.entries())T+=P.height,i.fillText(N,C,T);i.restore()}function OZ(t){const e=wf(be("agChartsSceneDebug")),i=[];for(const s of e)s==="layout"?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);t.debugNodeSearch=i}function _Z(t,e){t.save();for(const[i,s]of Object.entries(e)){const n=Ve.toCanvas(s);if(!n){st.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(n.x,n.y,n.width,n.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,n.x,n.y,n.width),t.fillText(i,n.x,n.y,n.width)}t.restore()}function EZ(t){const{...e}=t;for(const i of Object.keys(e))lP.has(i)||typeof e[i]!="number"&&typeof e[i]!="string"&&typeof e[i]!="boolean"&&(rP.add(i),delete e[i]);return e}function nv(t,e){if(!ne.check(!0,"scene"))return{};let i=0;return{node:e==="json"?EZ(t):t,name:t.name??t.id,dirty:t.dirty,...Array.from(t.children(),s=>nv(s,e)).reduce((s,n)=>{let{name:a}=n;const{node:{visible:o,opacity:r,zIndex:l,translationX:c,translationY:h,rotation:u,scalingX:d,scalingY:p},node:g}=n;(!o||r<=0)&&(a=`(${a})`),Ot.is(g)&&g.renderToOffscreenCanvas&&(a=`*${a}*`);const f=Array.isArray(l)?`(${l.join(", ")})`:l,x=[`${(i++).toString().padStart(3,"0")}|`,`${a??"<unknown>"}`,`z: ${f}`,c&&`x: ${c}`,h&&`y: ${h}`,u&&`r: ${u}`,d!=null&&d!==1&&`sx: ${d}`,p!=null&&p!==1&&`sy: ${p}`].filter(v=>!!v).join(" ");let y=x,b=1;for(;s[y]!=null&&b<100;)y=`${x} (${b++})`;return s[y]=n,s},{})}}function aP(t){if(!t.dirty)return{dirtyTree:{},paths:[]};const e=Array.from(t.children(),n=>aP(n)).filter(n=>n.paths.length>0),i=Ot.is(t)?t.name??t.id:t.id,s=e.length?e.flatMap(n=>n.paths).map(n=>`${i}.${n}`):[i];return{dirtyTree:{name:i,node:t,dirty:t.dirty,...e.map(n=>n.dirtyTree).filter(n=>n.dirty!=null).reduce((n,a)=>(n[a.name??"<unknown>"]=a,n),{})},paths:s}}function GI(t,e){const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function oP(t,e,i){const s=i!=null?i-e:e;return`${t}: ${Math.round(s*100)/100}ms`}function PZ(t,e){let i=0;for(const s of t)i+=e(s);return i}var rP,lP,RZ=k({"packages/ag-charts-community/src/scene/sceneDebug.ts"(){"use strict";R(),Fi(),Hs(),Ft(),We(),hs(),rP=new Set,lP=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"])}}),Zf,VI=k({"packages/ag-charts-community/src/scene/scene.ts"(){"use strict";R(),Fi(),eP(),LZ(),wZ(),za(),RZ(),Zf=class extends Rh{constructor(t){super(),this.debug=ne.create(!0,"scene"),this.id=ia(this),this.imageLoader=new iP,this.root=null,this.pendingSize=null,this.isDirty=!1,this.destroyFns=[],this.updateDebugFlags(),this.canvas=new sv(t),this.layersManager=new sP(this.canvas),this.destroyFns.push(this.imageLoader.on("image-loaded",()=>{this.emit("scene-changed",{})}),this.imageLoader.on("image-error",({uri:e})=>{st.warnOnce(`Unable to load image ${e}`)}))}waitingForUpdate(){return this.imageLoader?.waitingToLoad()??!1}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(t){const{element:e}=this.canvas;return e.parentElement?.removeChild(e),t.appendChild(e),this}setRoot(t){return this.root===t?this:(this.isDirty=!0,this.root?.setScene(),this.root=t,t&&(t.visible=!0,t.setScene(this)),this)}updateDebugFlags(){ne.inDevelopmentMode(()=>er._debugEnabled=!0)}clearCanvas(){this.canvas.clear()}attachNode(t){return this.appendChild(t),()=>this.removeChild(t)}appendChild(t){return this.root?.appendChild(t),this}removeChild(t){return this.root?.removeChild(t),this}download(t,e){LO(this.canvas.toDataURL(e),t?.trim()??"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e,i){return t=Math.round(t),e=Math.round(e),i??(i=this.pixelRatio),t>0&&e>0&&(t!==this.width||e!==this.height||i!==this.pixelRatio)?(this.pendingSize=[t,e,i],this.isDirty=!0,!0):!1}render(t){const{debugSplitTimes:e={start:performance.now()},extraDebugStats:i,seriesRect:s}=t??{},{canvas:n,canvas:{context:a}={},root:o,pendingSize:r,width:l,height:c,pixelRatio:h}=this;if(!a)return;const u=performance.now();let d=!1;if(r&&(d=!0,this.layersManager.resize(...r),this.pendingSize=null),o&&!o.visible){this.isDirty=!1;return}if(o?.dirty===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:nv(o,"console")}),nP(this.layersManager,e,a,void 0,i,s);return}const p={ctx:a,width:l,height:c,devicePixelRatio:h,debugNodes:{}};ne.check("scene:stats:verbose")&&(p.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),OZ(p);let g=!1;if((o?.dirty!==!1||d)&&(g=!0,n.clear()),o&&ne.check("scene:dirtyTree")){const{dirtyTree:f,paths:x}=aP(o);ne.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:f,paths:x})}if(o&&g){if(o.visible&&o.preRender(p),this.debug.check()){const f=nv(o,"console");this.debug("Scene.render() - before",{canvasCleared:g,tree:f})}if(o.visible)try{a.save(),o.render(p),a.restore()}catch(f){throw this.canvas.reset(),f}}e["\u270D\uFE0F"]=performance.now()-u,a.verifyDepthZero?.(),this.isDirty=!1,nP(this.layersManager,e,a,p.stats,i,s),_Z(a,p.debugNodes),o&&this.debug.check()&&this.debug("Scene.render() - after",{tree:nv(o,"console"),canvasCleared:g})}toSVG(){const{root:t,width:e,height:i}=this;if(t!=null)return er.toSVG(t,e,i)}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.destroyFns.forEach(t=>t()),Object.assign(this,{canvas:void 0})}},Zf.className="Scene"}});function BZ(t,e){return"context"in t}function cP(t,e){return BZ(t,e)&&e[0]!=null&&typeof e[0]=="object"?(e[0].context=t.context,!0):!1}function av(t,e,i,s){return cP(t,s)||e&&cP(e,s),i(...s)}var WI,ov=k({"packages/ag-charts-community/src/util/callbackCache.ts"(){"use strict";R(),WI=class{constructor(){this.cache=new WeakMap}call(t,e,i,...s){let n,a=this.cache.get(i);try{n=JSON.stringify(s)}catch{return this.invoke(t,e,i,s,a)}return a==null&&(a=new Map,this.cache.set(i,a)),a.has(n)?a.get(n):this.invoke(t,e,i,s,a,n)}invoke(t,e,i,s,n,a){try{const o=av(t,e,i,s);return n&&a!=null&&n.set(a,o),o}catch(o){st.warnOnce("User callback errored, ignoring",o);return}}invalidateCache(){this.cache=new WeakMap}}}}),hP,zZ=k({"packages/ag-charts-community/src/chart/annotation/annotationManager.ts"(){"use strict";R(),Jr(),Ln(),Rt(),hP=class extends or{constructor(t,e){super(),this.annotationRoot=t,this.fireChartEvent=e,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(t){return t==null||zt(t)}restoreMemento(t,e,i){this.annotations=this.cleanData(i??[]).map(s=>{const n=this.getAnnotationTypeStyles(s.type);return Kt(s,n)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(t){this.annotations=this.cleanData(t??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:Oe([...this.annotations])})}attachNode(t){return this.annotationRoot.append(t),()=>(this.annotationRoot?.removeChild(t),this)}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){return this.styles?.[t]}cleanData(t){for(const e of t)"textAlign"in e&&delete e.textAlign;return t}}}}),HI,FZ=k({"packages/ag-charts-community/src/chart/zIndexMap.ts"(){"use strict";HI=(t=>(t[t.CHART_BACKGROUND=0]="CHART_BACKGROUND",t[t.AXIS_GRID=1]="AXIS_GRID",t[t.AXIS=2]="AXIS",t[t.ZOOM_SELECTION=3]="ZOOM_SELECTION",t[t.SERIES_CROSSLINE_RANGE=4]="SERIES_CROSSLINE_RANGE",t[t.SERIES_LAYER=5]="SERIES_LAYER",t[t.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",t[t.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",t[t.SERIES_CROSSLINE_LINE=8]="SERIES_CROSSLINE_LINE",t[t.SERIES_ANNOTATION=9]="SERIES_ANNOTATION",t[t.CHART_ANNOTATION=10]="CHART_ANNOTATION",t[t.CHART_ANNOTATION_FOCUSED=11]="CHART_ANNOTATION_FOCUSED",t[t.STATUS_BAR=12]="STATUS_BAR",t[t.SERIES_LABEL=13]="SERIES_LABEL",t[t.LEGEND=14]="LEGEND",t[t.NAVIGATOR=15]="NAVIGATOR",t[t.FOREGROUND=16]="FOREGROUND",t))(HI||{})}}),uP,jZ=k({"packages/ag-charts-community/src/chart/axis/axisManager.ts"(){"use strict";We(),uP=class{constructor(t){this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new Ot({name:"Axes-Grids",zIndex:1}),this.axisGroup=new Ot({name:"Axes",zIndex:2}),this.axisLabelGroup=new Ot({name:"Axes-Labels",zIndex:13}),this.axisCrosslineRangeGroup=new Ot({name:"Axes-Crosslines-Range",zIndex:4}),this.axisCrosslineLineGroup=new Ot({name:"Axes-Crosslines-Line",zIndex:8}),this.axisCrosslineLabelGroup=new Ot({name:"Axes-Crosslines-Label",zIndex:13}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(t,e){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const s of t)e.includes(s)||(s.detachAxis(i),s.destroy());for(const s of e)t?.includes(s)||s.attachAxis(i);this.axes.clear();for(const s of e){const n=s.createAxisContext();this.axes.has(n.direction)?this.axes.get(n.direction)?.push(n):this.axes.set(n.direction,[n])}}getAxisContext(t){return this.axes.get(t)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}}}}),bp,dP=k({"packages/ag-charts-community/src/chart/chartUpdateType.ts"(){"use strict";bp=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",t[t.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=5]="SERIES_UPDATE",t[t.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",t[t.SCENE_RENDER=7]="SCENE_RENDER",t[t.NONE=8]="NONE",t))(bp||{})}}),Xf,pP=k({"packages/ag-charts-community/src/chart/data/dataService.ts"(){"use strict";R(),Fi(),pc(),un(),Xf=class extends Qr{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=ne.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){typeof t=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return yk(e=>this.fetch(e).catch(i=>st.error("callback failed",i)),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return yk((e,i)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:i})},t,{leading:!0,trailing:!0})}async fetch(t){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=await this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(a){this.debug(`DataService - request failed | ${i}`),st.errorOnce(`DataService - request failed | [${a}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(a=>a===i);if(n===-1||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(n+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")}},S([wn({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],Xf.prototype,"dispatchThrottle",2),S([wn({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],Xf.prototype,"requestThrottle",2)}}),gP,GZ=k({"packages/ag-charts-community/src/chart/fonts/fontManager.ts"(){"use strict";Hs(),gP=class{constructor(t,e){this.domManager=t,this.updateService=e,this.observers=[]}updateFonts(t){!t||t.size===0||(this.loadFonts(t),t.forEach(e=>{this.observeFontStatus(e)}))}destroy(){for(const t of this.observers)t.disconnect();this.observers=[]}loadFonts(t){const e=Array.from(t).map(a=>encodeURIComponent(a)),i=":wght@100;200;300;400;500;600;700;800;900",s=`${i}&family=`,n=`@import url('https://fonts.googleapis.com/css2?family=${e.join(s)}${i}&display=swap');
`;this.domManager.addStyles(`google-font-${e.join("-")}`,n)}observeFontStatus(t){const e=window.document.createElement("div");e.style.setProperty("position","absolute"),e.style.setProperty("top","0"),e.style.setProperty("margin","0"),e.style.setProperty("padding","0"),e.style.setProperty("overflow","hidden"),e.style.setProperty("visibility","hidden"),e.style.setProperty("width","auto"),e.style.setProperty("max-width","none"),e.style.setProperty("font-synthesis","none"),e.style.setProperty("font-family",t),e.style.setProperty("font-size","16px"),e.style.setProperty("white-space","nowrap"),e.textContent="UVWxyz",this.domManager.addChild("canvas-container",`font-check-${encodeURIComponent(t)}`,e);const i=new ResizeObserver(s=>{const n=s?.at(0)?.contentBoxSize.at(0)?.inlineSize;n!=null&&n>0&&(wo.clear(),this.updateService.update(4))});i.observe(e),this.observers.push(i)}}}});function VZ(t,e){return i=>Number(t)*(1-i)+Number(e)*i}function fP(t,e){if(typeof t=="string")try{t=ue.fromString(t)}catch{t=ue.fromArray([0,0,0])}if(typeof e=="string")try{e=ue.fromString(e)}catch{e=ue.fromArray([0,0,0])}return i=>ue.mix(t,e,i).toRgbaString()}var mP=k({"packages/ag-charts-community/src/util/interpolate.ts"(){"use strict";Xh()}}),UI={};cn(UI,{easeIn:()=>yP,easeInOut:()=>xP,easeInOutQuad:()=>SP,easeInQuad:()=>bP,easeOut:()=>vp,easeOutQuad:()=>vP,inverseEaseOut:()=>KI,linear:()=>$I});var $I,yP,vp,xP,bP,vP,SP,KI,Sp=k({"packages/ag-charts-community/src/motion/easing.ts"(){"use strict";$I=t=>t,yP=t=>1-Math.cos(t*Math.PI/2),vp=t=>Math.sin(t*Math.PI/2),xP=t=>-(Math.cos(t*Math.PI)-1)/2,bP=t=>t*t,vP=t=>1-(1-t)**2,SP=t=>t<.5?2*t*t:1-(-2*t+2)**2/2,KI=t=>2*Math.asin(t)/Math.PI}});function WZ(t){return t.every(e=>e instanceof er)}function rv(t){return WZ(t)?{nodes:t,selections:[]}:{nodes:[],selections:t}}function YI(t,e){return t===e?!0:Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((i,s)=>YI(i,e[s])):Ef(t)&&Ef(e)?t.equals(e):Me(t)&&Me(e)?Wk(t,e,YI):!1}var qf,hu,Mp,ZI,XI,uu=k({"packages/ag-charts-community/src/motion/animation.ts"(){"use strict";R(),za(),mP(),Fk(),Rt(),Sp(),qf=.2,hu=["initial","remove","update","add","trailing","end","none"],Mp={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:qf,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+qf,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},ZI=(t=>(t.Loop="loop",t.Reverse="reverse",t))(ZI||{}),XI=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=t.autoplay??!0,this.ease=t.ease??$I,this.phase=t.phase;const e=t.duration??Mp[this.phase].animationDuration;this.duration=e*t.defaultDuration,this.delay=(t.delay??0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,t.skip===!0&&(this.onUpdate?.(t.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),t.collapsable!==!1&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return YI(t.from,t.to)?0:e}play(t=!1){this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,t&&this.onUpdate?.(this.from,!0,this)))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(t){if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const e=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,this.onComplete?.(this),t-(s-e)):0}get delta(){return this.ease(Nt(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if(typeof e!="object"||Ef(e))return this.interpolateValue(t,e);const i=[];for(const s of Object.keys(e)){const n=this.interpolateValue(t[s],e[s]);n!=null&&i.push([s,n])}return s=>{const n={};for(const[a,o]of i)n[a]=o(s);return n}}interpolateValue(t,e){if(!(t==null||e==null)){if(Ef(t))return i=>t[_f](e,i);try{switch(typeof t){case"number":return VZ(t,e);case"string":return fP(t,e);case"boolean":if(t===e)return()=>t;break;case"object":return()=>t;default:throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}}}}),qI,HZ=k({"packages/ag-charts-community/src/chart/interaction/animationBatch.ts"(){"use strict";R(),uu(),Fi(),qI=class{constructor(t){this.maxAnimationTime=t,this.debug=ne.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(hu.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(hu[this.currentPhase])??[]}checkOverlappingId(t){t!=null&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){if(t.isComplete)return;if(hu.indexOf(t.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",t.id),t.stop();return}this.controllers.set(t.id,t),this.phases.get(t.phase)?.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=e?.indexOf(t);i!=null&&i>=0&&e?.splice(i,1)}progress(t){if(!this.isReady)return;let e=t===0?.01:t;const i=()=>{const c=hu[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:Mp[c]}};let{phase:s,phaseControllers:n,phaseMeta:a}=i();const o=()=>hu[this.currentPhase]==null,r=()=>{for({phase:s,phaseControllers:n,phaseMeta:a}=i();!o()&&n.length===0;)this.currentPhase++,{phase:s,phaseControllers:n,phaseMeta:a}=i(),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:e},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${s} with ${n?.length} of ${l}`);do{const c=e,h=a.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let u=0;for(const d of n)h?d.stop():e=Math.min(d.update(c),e),d.isComplete&&(u++,this.removeAnimation(d));this.animationTimeConsumed+=c-e,this.debug(`AnimationBatch - updated ${n.length} controllers; ${u} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),r()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&Mp[e.phase].skipIfNoEarlierAnimations!==!0){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(t=!0){if(this.skipAnimations===!1&&t===!0){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){st.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(t){if(t!=null&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(t){if(!this.isActive())return 0;let e=0;for(const[i,s]of this.phases)s.length!==0&&(t!=null&&t!==i||(e+=Math.max(...s.map(n=>n.isComplete?0:n.delay+n.duration-(n.elapsed??0)))));return e}destroy(){this.stop(),this.controllers.clear()}}}}),QI,JI,MP=k({"packages/ag-charts-community/src/chart/interaction/interactionManager.ts"(){"use strict";QI=(t=>(t[t.Default=32]="Default",t[t.ZoomDrag=16]="ZoomDrag",t[t.Annotations=8]="Annotations",t[t.ContextMenu=4]="ContextMenu",t[t.Animation=2]="Animation",t[t.AnnotationsSelected=1]="AnnotationsSelected",t[t.Clickable=41]="Clickable",t[t.Focusable=34]="Focusable",t[t.Keyable=43]="Keyable",t[t.ContextMenuable=36]="ContextMenuable",t[t.AnnotationsMoveable=9]="AnnotationsMoveable",t[t.AnnotationsDraggable=57]="AnnotationsDraggable",t[t.ZoomDraggable=50]="ZoomDraggable",t[t.ZoomClickable=34]="ZoomClickable",t[t.ZoomWheelable=59]="ZoomWheelable",t[t.All=63]="All",t))(QI||{}),JI=class{constructor(){this.stateQueue=34}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}isState(t){return!!(this.stateQueue&-this.stateQueue&t)}}}});function DP(t){return t==null?!0:!isNaN(t)&&t>=0&&t<=2}var tA,kP=k({"packages/ag-charts-community/src/chart/interaction/animationManager.ts"(){"use strict";R(),uu(),Fi(),HZ(),tA=class{constructor(t,e){this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new qI(this.defaultDuration*1.5),this.debug=ne.create(!0,"animation"),this.events=new Rh,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(t,e){return this.events.on(t,e)}animate(t){const e=this.batch;try{e.checkOverlappingId(t.id)}catch(r){this.failsafeOnError(r);return}let{id:i}=t;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||t.phase==="none";s&&this.debug("AnimationManager - skipping animation");const{delay:n,duration:a}=t;if(!DP(n))throw new Error(`Animation delay of ${n} is unsupported (${i})`);if(!DP(a))throw new Error(`Animation duration of ${a} is unsupported (${i})`);const o=new XI({...t,id:i,skip:s,autoplay:this.isPlaying?t.autoplay:!1,phase:t.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(o,this.defaultDuration))return this.batch.addAnimation(o),o}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(t){return this.batch.getRemainingTime(t)}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=be().requestAnimationFrame(e=>{t(e).catch(i=>st.error(i))})}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let t;const e=async i=>{const s=()=>{const n=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(2);try{this.batch.progress(n)}catch(a){this.failsafeOnError(a)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:n})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){st.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new qI(this.defaultDuration*1.5),t===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}destroy(){this.stop(),this.events.clear()}}}}),eA,IP=k({"packages/ag-charts-community/src/chart/interaction/chartEventManager.ts"(){"use strict";Jr(),eA=class extends or{seriesEvent(t){this.listeners.dispatch(t,{type:t})}seriesKeyNavZoom(t,e){const i={type:"series-keynav-zoom",delta:t,widgetEvent:e};this.listeners.dispatch("series-keynav-zoom",i)}legendItemClick(t,e,i,s,n){const a={type:"legend-item-click",legendType:t,series:e,itemId:i,enabled:s,legendItemName:n};this.listeners.dispatch("legend-item-click",a)}legendItemDoubleClick(t,e,i,s,n,a){const o={type:"legend-item-double-click",legendType:t,series:e,itemId:i,enabled:s,legendItemName:a,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",o)}}}}),AP,CP,iA,LP=k({"packages/ag-charts-community/src/chart/interaction/contextMenuTypes.ts"(){"use strict";AP=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},CP=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","toggle-series-visibility","toggle-other-series"]}},iA=class{constructor(){this.items=new AP,this.lists=new CP}}}}),sA,wP=k({"packages/ag-charts-community/src/chart/interaction/contextMenuRegistry.ts"(){"use strict";Jr(),LP(),sA=class extends or{constructor(){super(),this.builtins=new iA,this.hiddenActions=new Set,this.setVisible("zoom-to-cursor",!1),this.setVisible("pan-to-cursor",!1)}static check(t,e){return e.showOn==t}static checkCallback(t,e,i){return t===e}dispatchContext(t,e,i,s){const{widgetEvent:n}=e;if(n.sourceEvent.defaultPrevented)return;const a=s?.x??e.canvasX,o=s?.y??e.canvasY,r={type:"context-setup",showOn:t,x:a,y:o,context:i,widgetEvent:n};this.listeners.dispatch("context-setup",r),r.type="context-complete",this.listeners.dispatch("context-complete",r)}isVisible(t){return!this.hiddenActions.has(t)}setVisible(t,e){e?this.hiddenActions.delete(t):this.hiddenActions.add(t)}}}}),nA,TP=k({"packages/ag-charts-community/src/chart/interaction/highlightManager.ts"(){"use strict";Jr(),Zb(),nA=class extends or{constructor(){super(...arguments),this.highlightStates=new lu}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:t})}getActiveHighlight(){return this.activeHighlight}isEqual(t,e){return t===e||t!=null&&e!=null&&t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}}}});function NP(t,e){if(t==null||e.length===0)return[!1,!1];const i=t.valueOf(),s=e[0],n=e[e.length-1];if(typeof s=="string")return[i===s,i===n];let a=s.valueOf(),o=n.valueOf();return a>o&&([a,o]=[o,a]),[i===a,i===o]}function fc(t,e,i,s,n){const{xValue:a,yValue:o}=t,[r,l]=NP(o,n),[c,h]=NP(a,s);return{xKey:e,yKey:i,xValue:a,yValue:o,first:c,last:h,min:r,max:l}}function OP(t,[e,i],s){const n=ep(0,t-1,o=>{const r=s(o)?.[1]??NaN;return!Number.isFinite(r)||r>e})??0;let a=Kr(0,t-1,o=>{const r=s(o)?.[0]??NaN;return!Number.isFinite(r)||r<i})??t-1;return a=Math.min(a+1,t),[n,a]}function aA(t,e,i){if(i){const{x:n,y:a,width:o,height:r}=i;return{canvasX:n+o/2,canvasY:a+r/2}}const s=e.yBar?.upperPoint??e.midPoint??t.datumMidPoint?.(e);if(s){const{x:n,y:a}=Ve.toCanvasPoint(t.contentGroup,s.x,s.y);return{canvasX:Math.round(n),canvasY:Math.round(a)}}}function _P(t,e,i,s,n){let a=-1,o=0,r=0,l=!1;for(;o<s&&a<=e-t;){a+=1;const c=i+r;if(l||(r*=-1),r>=0&&(r+=1),l&&r<0&&(r-=1),c<t||c>e){l=!0;continue}n(c)&&(o+=1)}return o}var du=k({"packages/ag-charts-community/src/chart/series/util.ts"(){"use strict";R(),hs()}}),Qf,oA=k({"packages/ag-charts-community/src/chart/interaction/tooltipManager.ts"(){"use strict";Zb(),du(),Qf=class{constructor(t,e,i){this.domManager=e,this.tooltip=i,this.stateTracker=new lu,this.suppressState=new lu(!1),this.appliedState=null,this.destroyFns=[],this.destroyFns.push(i.setup(t,e),e.addListener("hidden",()=>this.tooltip.hide()))}destroy(){this.destroyFns.forEach(t=>t())}updateTooltip(t,e,i,s){i??(i=this.stateTracker.get(t)?.content),this.stateTracker.set(t,{meta:e,content:i,pagination:s}),this.applyStates()}removeTooltip(t){this.stateTracker.delete(t),this.applyStates()}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}applyStates(){const t=this.stateTracker.stateId(),e=t?this.stateTracker.get(t):void 0;if(this.suppressState.stateValue()||e?.meta==null||e?.content==null){this.appliedState=null,this.tooltip.hide();return}const i=this.domManager.getBoundingClientRect(),s=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():i;if(this.appliedState?.content===e?.content){const n=this.tooltip.isVisible();this.tooltip.show(s,i,e?.meta,null,void 0,n)}else this.tooltip.show(s,i,e?.meta,e?.content,e?.pagination);this.appliedState=e}static makeTooltipMeta(t,e,i,s){const{canvasX:n,canvasY:a}=t,o=e.properties.tooltip,{placement:r,defaultPlacement:l,anchorTo:c,defaultAnchorTo:h,xOffset:u,yOffset:d}=o.position,p=aA(e,i,s);return{canvasX:n,canvasY:a,nodeCanvasX:p?.canvasX??n,nodeCanvasY:p?.canvasY??a,enableInteraction:o.interaction?.enabled??!1,showArrow:o.showArrow,position:{placement:r,defaultPlacement:l,anchorTo:c,defaultAnchorTo:h,xOffset:u,yOffset:d}}}isEnteringInteractiveTooltip(t){const{tooltip:e}=this,i=t.relatedTarget;return e.interactive&&e.enabled&&e.isVisible()&&e.contains(i)}}}});function rA(t,e,i){const{offsetX:s,offsetY:n,clientX:a,clientY:o,currentX:r,currentY:l,sourceEvent:c}=i;return{type:e,device:t,offsetX:s,offsetY:n,clientX:a,clientY:o,currentX:r,currentY:l,sourceEvent:c}}function EP(t,e){const i=t*t+e*e,s=lA*lA;return i>=s}function UZ(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY,n=i*i+s*s,a=cA*cA;return n<a}var lA,PP,cA,hA,RP=k({"packages/ag-charts-community/src/chart/interaction/dragInterpreter.ts"(){"use strict";pc(),lA=3,PP=505,cA=30,hA=class{constructor(t){this.destroyFns=[],this.listeners=new Qr,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.destroyFns.push(t.addListener("touchstart",this.onTouchStart.bind(this)),t.addListener("touchmove",this.onTouchMove.bind(this)),t.addListener("touchend",this.onTouchEnd.bind(this)),t.addListener("mousemove",this.onMouseMove.bind(this)),t.addListener("dblclick",this.onDblClick.bind(this)),t.addListener("drag-start",this.onDragStart.bind(this)),t.addListener("drag-move",this.onDragMove.bind(this)),t.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.destroyFns.forEach(t=>t()),this.listeners.destroy()}addListener(t,e){return this.listeners.addListener(t,e)}dispatch(t){this.listeners.dispatch(t.type,t)}onTouchStart(t){const{clientX:e,clientY:i}=t.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=e,this.touch.clientY=i}onTouchMove(t){const{clientX:e,clientY:i}=t.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-e),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=e,this.touch.clientY=i}onTouchEnd(t){t.sourceEvent.preventDefault()}onMouseMove(t){this.dispatch(t)}onDblClick(t){this.dispatch({device:"mouse",...t})}onDragStart(t){this.dragStartEvent=t}onDragMove(t){this.dragStartEvent!=null&&EP(t.originDeltaX,t.originDeltaY)&&(this.dispatch(this.dragStartEvent),this.dispatch({...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.dispatch(t)}onDragEnd(t){if(this.isDragging){this.dispatch(t),this.isDragging=!1;return}if(t.device==="mouse"){const e=rA("mouse","click",t);this.dispatch(e)}else if(t.sourceEvent.type==="touchend"){if(EP(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const e=rA("touch","click",t);this.dispatch(e);const i=Date.now();if(this.lastClick!==void 0&&i-this.lastClick.time<=PP&&UZ(this.lastClick,t)){const s=rA(t.device,"dblclick",t);this.dispatch(s),this.lastClick=void 0}else this.lastClick={time:i,clientX:t.clientX,clientY:t.clientY}}}}}}),lv,BP,$Z=k({"packages/ag-charts-community/src/chart/interaction/widgetSet.ts"(){"use strict";Jb(),RP(),lv=class extends cu{constructor(t){super(t)}addChildToDOM(){}removeChildFromDOM(){}},BP=class{constructor(t){this.seriesWidget=new lv(t.getParent("series-area")),this.chartWidget=new lv(t.getParent("canvas-proxy")),this.containerWidget=new lv(t.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),this.seriesDragInterpreter=new hA(this.seriesWidget)}destroy(){this.seriesDragInterpreter.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}}}});function uA(t,e){const[i,s]=ns(e);return Nt(i,t,s)}function ns(t){if(t.length===0)return[];const e=[1/0,-1/0];for(const i of t)i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i);return e}function Dp(t){const[e,i]=ns(t);return i-e}var la=k({"packages/ag-charts-community/src/util/number.ts"(){"use strict";R()}});function dA(...t){let e,i=1/0,s,n=-1/0;for(const a of t)for(const o of a){const r=o.valueOf();r<i&&(i=r,e=o),r>n&&(n=r,s=o)}return e!=null&&s!=null?{domain:[e,s],animatable:!0}:{domain:[],animatable:!1}}var pA,ye,Us=k({"packages/ag-charts-community/src/scale/continuousScale.ts"(){"use strict";la(),mb(),pA=class e5 extends zf{constructor(e=[],i=[]){super(),this.domain=e,this.range=i,this.defaultClamp=!1}static is(e){return e instanceof e5}normalizeDomains(...e){return dA(...e)}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1,i=1){const{domain:s}=this,n=this.getPixelRange();if(s.length===0)return n;let o=Math.abs(s[1].valueOf()-s[0].valueOf())/e+1;if(i!==0){const r=Math.floor(n);o=Math.min(o,r)}return n/Math.max(1,o)}convert(e,i){const{domain:s}=this;if(!s||s.length<2)return NaN;const n=i?.clamp??this.defaultClamp,a=Number(this.transform(s[0])),o=Number(this.transform(s[1])),r=Number(this.transform(e)),{range:l}=this,[c,h]=l;if(n){const[u,d]=ns([a,o]);if(r<u)return c;if(r>d)return h}return a===o?(c+h)/2:r===a?c:r===o?h:c+(r-a)/(o-a)*(h-c)}invert(e,i){const s=this.domain.map(h=>this.transform(h)),[n,a]=s,{range:o}=this,[r,l]=o;let c;return r===l?c=this.toDomain((Number(n)+Number(a))/2):c=this.toDomain(Number(n)+(e-r)/(l-r)*(Number(a)-Number(n))),this.transformInvert(c)}getPixelRange(){const[e,i]=this.range;return Math.abs(i-e)}},pA.defaultTickCount=5,ye=pA}}),el,ds,$s,ca,lr,kp,pu,cr=k({"packages/ag-charts-community/src/util/time/duration.ts"(){"use strict";el=1e3,ds=el*60,$s=ds*60,ca=$s*24,lr=ca*7,kp=ca*30,pu=ca*365}}),ki,On=k({"packages/ag-charts-community/src/util/time/interval.ts"(){"use strict";R(),ki=class dO{constructor(e,i,s,n,a,o=1,r){this.unit=e,this.milliseconds=i,this.hierarchy=s,this._encode=n,this._decode=a,this.step=o,this._rangeCallback=r}static extent(e,i,s){if(e.getTime()>i.getTime()&&([e,i]=[i,e],s!=null&&(s=[1-s[1],1-s[0]])),s!=null){const n=i.getTime()-e.getTime(),a=e.getTime();e=new Date(a+s[0]*n),i=new Date(a+s[1]*n)}return[e,i]}getOffset(e,i){return Math.floor(this._encode(new Date(e)))%i}floor(e){const i=new Date(e),s=this._encode(i);return this._decode(s)}ceil(e){const i=new Date(Number(e)-1),s=this._encode(i);return this._decode(s+1)}rangeIndices(e,i,{extend:s=!1,visibleRange:n=[0,1],limit:a}){[e,i]=dO.extent(e,i,n);const o=this._encode(s?this.floor(e):this.ceil(e));let r=this._encode(s?this.ceil(i):this.floor(i));return a!=null&&r-o>a&&(r=o+a),[o,r]}range(e,i,s={}){let n;e.getTime()>i.getTime()?n=this._rangeCallback?.(i,e):n=this._rangeCallback?.(e,i);const[a,o]=this.rangeIndices(e,i,s),r=[];for(let l=a;l<=o;l++){const c=this._decode(l);r.push(c)}return n?.(),r}previous(e){return this._decode(this._encode(this.ceil(e))-1)}next(e){return this._decode(this._encode(this.floor(e))+1)}rangeCount(e,i,s={}){const[n,a]=this.rangeIndices(e,i,s);return a-n}every(e,i){if(e===1&&i?.snapTo!=null)return this;const{unit:s,milliseconds:n,hierarchy:a,step:o}=this;let r=0,l;const c=e;e=Math.max(1,Math.round(e)),c!==e&&st.warnOnce(`interval step of [${c}] rounded to [${e}].`);const{snapTo:h="start"}=i??{};if(typeof h=="string"){const p=r;l=(g,f)=>{const x=h==="start"?g:f;return r=this.getOffset(x,e),()=>r=p}}else typeof h=="number"?r=this.getOffset(new Date(h),e):h instanceof Date&&(r=this.getOffset(h,e));const u=p=>Math.floor((this._encode(p)-r)/e),d=p=>this._decode(p*e+r);return new dO(s,n*e,a,u,d,o*e,l)}}}});function KZ(t){return t.getFullYear()}function YZ(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}var zP,mc,gA=k({"packages/ag-charts-community/src/util/time/year.ts"(){"use strict";On(),zP=(365+1/4-1/100+1/400)*24*60*60*1e3,mc=new ki("year",zP,void 0,KZ,YZ)}});function ZZ(t){return t.getFullYear()*12+t.getMonth()}function XZ(t){const e=Math.floor(t/12),i=t-e*12;return new Date(e,i,1)}var Fa,cv=k({"packages/ag-charts-community/src/util/time/month.ts"(){"use strict";On(),gA(),Fa=new ki("month",mc.milliseconds/12,mc,ZZ,XZ)}});function qZ(t){const e=t.getTimezoneOffset()*ds;return Math.floor((t.getTime()-e)/ca)}function QZ(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}var hr,Jf=k({"packages/ag-charts-community/src/util/time/day.ts"(){"use strict";cr(),On(),cv(),hr=new ki("day",24*60*60*1e3,Fa,qZ,QZ)}});function JZ(t){return t.getTime()}function tX(t){return new Date(t)}var fA,eX=k({"packages/ag-charts-community/src/util/time/millisecond.ts"(){"use strict";Jf(),On(),fA=new ki("millisecond",1,hr,JZ,tX)}});function iX(t){return Math.floor((t.getTime()-mA)/el)}function sX(t){return new Date(mA+t*el)}var mA,gu,nX=k({"packages/ag-charts-community/src/util/time/second.ts"(){"use strict";Jf(),cr(),On(),mA=new Date().getTimezoneOffset()*ds,gu=new ki("second",1e3,hr,iX,sX)}});function aX(t){return Math.floor((t.getTime()-yA)/ds)}function oX(t){return new Date(yA+t*ds)}var yA,fu,rX=k({"packages/ag-charts-community/src/util/time/minute.ts"(){"use strict";Jf(),cr(),On(),yA=new Date().getTimezoneOffset()*ds,fu=new ki("minute",60*1e3,hr,aX,oX)}});function lX(t){return Math.floor((t.getTime()-xA)/$s)}function cX(t){return new Date(xA+t*$s)}var xA,mu,hX=k({"packages/ag-charts-community/src/util/time/hour.ts"(){"use strict";Jf(),cr(),On(),xA=new Date().getTimezoneOffset()*ds,mu=new ki("hour",60*60*1e3,hr,lX,cX)}});function yu(t){const i=(7+t-4)%7;function s(a){const o=a.getTimezoneOffset()*ds;return Math.floor((a.getTime()-o)/lr-i/7)}function n(a){const o=new Date(1970,0,1);return o.setDate(o.getDate()+a*7+i),o}return new ki("day",7*24*60*60*1e3,Fa,s,n,7)}var To,FP,jP,GP,VP,WP,HP,uX=k({"packages/ag-charts-community/src/util/time/week.ts"(){"use strict";cr(),On(),cv(),To=yu(0),FP=yu(1),jP=yu(2),GP=yu(3),VP=yu(4),WP=yu(5),HP=yu(6)}});function dX(t){return t.getUTCFullYear()}function pX(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var bA,UP=k({"packages/ag-charts-community/src/util/time/utcYear.ts"(){"use strict";On(),gA(),bA=new ki("year",mc.milliseconds,void 0,dX,pX)}});function gX(t){return t.getUTCFullYear()*12+t.getUTCMonth()}function fX(t){const e=Math.floor(t/12),i=t-e*12;return new Date(Date.UTC(e,i,1))}var vA,$P=k({"packages/ag-charts-community/src/util/time/utcMonth.ts"(){"use strict";On(),cv(),UP(),vA=new ki("month",Fa.milliseconds,bA,gX,fX)}});function mX(t){return Math.floor(t.getTime()/ca)}function yX(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}var hv,SA=k({"packages/ag-charts-community/src/util/time/utcDay.ts"(){"use strict";cr(),On(),$P(),hv=new ki("day",24*60*60*1e3,vA,mX,yX)}});function xX(t){return Math.floor(t.getTime()/ds)}function bX(t){return new Date(t*ds)}var KP,vX=k({"packages/ag-charts-community/src/util/time/utcMinute.ts"(){"use strict";cr(),On(),SA(),KP=new ki("minute",60*1e3,hv,xX,bX)}});function SX(t){return Math.floor(t.getTime()/$s)}function MX(t){return new Date(t*$s)}var YP,DX=k({"packages/ag-charts-community/src/util/time/utcHour.ts"(){"use strict";cr(),On(),SA(),YP=new ki("hour",60*60*1e3,hv,SX,MX)}}),MA={};cn(MA,{TimeInterval:()=>ki,day:()=>hr,friday:()=>WP,hour:()=>mu,millisecond:()=>fA,minute:()=>fu,monday:()=>FP,month:()=>Fa,saturday:()=>HP,second:()=>gu,sunday:()=>To,thursday:()=>VP,tuesday:()=>jP,utcDay:()=>hv,utcHour:()=>YP,utcMinute:()=>KP,utcMonth:()=>vA,utcYear:()=>bA,wednesday:()=>GP,year:()=>mc});var il=k({"packages/ag-charts-community/src/util/time/index.ts"(){"use strict";eX(),nX(),rX(),hX(),Jf(),uX(),cv(),gA(),vX(),DX(),SA(),$P(),UP(),On()}});function DA(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+i*6e4,n=36e5*24;return Math.floor(s/n)}function ZP(t,e){const s=new Date(t.getFullYear(),0,1).getDay(),n=(e-s+7)%7,a=new Date(t.getFullYear(),0,n+1);return a<=t?Math.floor(DA(t,a)/7)+1:0}function XP(t,e=t.getFullYear()){const s=new Date(e,0,1).getDay(),n=(IA-s+7)%7,a=new Date(e,0,n-(IA-kA)+1);return a<=t?Math.floor(DA(t,a)/7)+1:XP(t,e-1)}function kX(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${Cs(Math.floor(i/60),2,"0")}${Cs(Math.floor(i%60),2,"0")}`}function Cs(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function tm(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(i!==0){const r=i>0?t.substring(0,i):t;e.push(r)}if(i<0)break;const s=t[i+1],n=JP[s];n!=null&&i++;const a=t[i+1],o=QP[a];if(typeof o=="function")e.push([o,n]);else if(typeof o=="string"){const r=tm(o);e.push([r,n])}else e.push(`${n??""}${a}`);t=t.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return e.map(n=>typeof n=="string"?n:n[0](s,n[1])).join("")}}var em,qP,kA,IA,QP,JP,uv=k({"packages/ag-charts-community/src/util/timeFormat.ts"(){"use strict";em={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},qP=0,kA=1,IA=4,QP={a:t=>em.shortDays[t.getDay()],A:t=>em.days[t.getDay()],b:t=>em.shortMonths[t.getMonth()],B:t=>em.months[t.getMonth()],c:"%x, %X",d:(t,e)=>Cs(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>Cs(t.getMilliseconds()*1e3,6,e??"0"),H:(t,e)=>Cs(t.getHours(),2,e??"0"),I:(t,e)=>{const i=t.getHours()%12;return i===0?"12":Cs(i,2,e??"0")},j:(t,e)=>Cs(DA(t)+1,3,e??"0"),m:(t,e)=>Cs(t.getMonth()+1,2,e??"0"),M:(t,e)=>Cs(t.getMinutes(),2,e??"0"),L:(t,e)=>Cs(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>Cs(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>Cs(ZP(t,qP),2,e??"0"),V:(t,e)=>Cs(XP(t),2,e??"0"),w:(t,e)=>Cs(t.getDay(),2,e??"0"),W:(t,e)=>Cs(ZP(t,kA),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>Cs(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>Cs(t.getFullYear(),4,e??"0"),Z:t=>kX(t),"%":()=>"%"},JP={_:" ",0:"0","-":""}}});function Ks(t){return t instanceof Date?t.getTime():t}function AA(t,e,i){const s=tR(t,e,i),n=tm(s);return a=>n(a)}function tR(t,e,i=0){let s=1/0;for(let h=1;h<t.length;h++)s=Math.min(s,Math.abs(t[h].valueOf()-t[h-1].valueOf()));const[n,a]=e.length===0?[0,0]:ns([e[0].valueOf(),e[e.length-1].valueOf()]),o=new Date(n).getFullYear(),l=new Date(a).getFullYear()-o>0,c=isFinite(s)?IX(s,t):AX(t[0]);return LX(Math.max(c-i,0),l,t)}function IX(t,e){return t<el?0:t<ds?1:t<$s?2:t<ca?3:t<lr?4:t<ca*28||t<ca*31&&CX(e)?5:t<pu?6:7}function AX(t){return gu.floor(t)<t?0:fu.floor(t)<t?1:mu.floor(t)<t?2:hr.floor(t)<t?3:Fa.floor(t)<t?To.floor(t)<t?4:5:mc.floor(t)<t?6:7}function CX(t){let e=new Date(t[0]).getMonth();for(let i=1;i<t.length;i++){const s=new Date(t[i]).getMonth();if(e===s)return!0;e=s}return!1}function LX(t,e,i){const s=Ks(i[0]),n=Ks(i.at(-1)),a=Math.abs(n-s),o=e||t===7,r=a===0,c=[["hour",6*$s,14*ca,3,"%I %p"],["hour",ds,6*$s,3,"%I:%M"],["second",1e3,6*$s,1,":%S"],["ms",0,6*$s,0,".%L"],["am/pm",ds,6*$s,3,"%p"]," ",["day",ca,lr,4,"%a"],["month",r?0:lr,52*lr,5,"%b %d"],["month",5*lr,10*pu,6,"%B"]," ",["year",o?0:pu,1/0,7,"%Y"]].filter(d=>{if(typeof d=="string")return!0;const[p,g,f,x]=d;return x>=t&&g<=a&&a<f}).reduce((d,p)=>(typeof p=="string"?d.result.push(p):d.used.has(p[0])||(d.result.push(p),d.used.add(p[0])),d),{result:[],used:new Set}).result,h=c.findIndex(d=>typeof d!="string"),u=c.findLastIndex(d=>typeof d!="string");return c.slice(h,u+1).map(d=>typeof d=="string"?d:d[4]).join("").replaceAll(/\s+/g," ").trim()}var im=k({"packages/ag-charts-community/src/util/timeFormatDefaults.ts"(){"use strict";la(),il(),cr(),uv()}}),dv,Ip,sm=k({"packages/ag-charts-community/src/scale/bandScale.ts"(){"use strict";R(),mb(),qk(),dv=class i5 extends zf{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(e){return e instanceof i5}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=Nt(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this.invalid=!0,this._paddingInner=Nt(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this.invalid=!0,this._paddingOuter=Nt(0,e,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&st.warnOnce("Expected update to not invalidate scale"))}convert(e,i){this.refresh();const s=this.findIndex(e);return s==null||s<0||s>=this.bands.length?NaN:this.ordinalRange(s)}invertNearestIndex(e){this.refresh();const i=this.bands.length;if(i===0)return-1;let s=0,n=i-1,a=1/0,o=0;for(;s<=n;){const r=(n+s)/2|0,l=this.ordinalRange(r),c=Math.abs(l-e);if(c===0)return r;c<a&&(a=c,o=r),l<e?s=r+1:n=r-1}return o}update(){const[e,i]=this.range;let{_paddingInner:s}=this;const{_paddingOuter:n,round:a,bands:o}=this,r=o.length;if(r===0)return;const l=i-e;let c;r===1?(s=0,c=l*(1-n*2)):c=l/Math.max(1,r-s+n*2);const h=a?Math.floor(c):c;let u=e+(l-h*(r-s))/2,d=h*(1-s);a&&(u=Math.round(u),d=Math.round(d)),this._step=h,this._inset=u,this._bandwidth=d,this._rawBandwidth=c*(1-s)}ordinalRange(e){const{_inset:i,_step:s,range:n}=this,a=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return Nt(a,i+s*e,o)}},S([cp],dv.prototype,"range",2),S([cp],dv.prototype,"round",2),Ip=dv}}),ja,xu=k({"packages/ag-charts-community/src/scale/discreteTimeScale.ts"(){"use strict";R(),uv(),im(),sm(),ja=class s5 extends Ip{static is(e){return e instanceof s5}toDomain(e){return new Date(e)}convert(e,i){const{domain:s,bands:n}=this;if(s.length<=0)return NaN;const a=this.ordinalRange(0),o=this.ordinalRange(n.length-1),r=i?.interpolate??!1,l=s[0].valueOf()>s[s.length-1].valueOf();if(!r){const f=super.convert(e,i);return l?o-(f-a):f}if(n.length===0)return a;const c=e.valueOf();let h;l?h=(ep(0,s.length-1,f=>s[f].valueOf()<=c)??s.length)-1:h=Kr(0,s.length-1,f=>s[f].valueOf()<=c)??0,h=Math.min(Math.max(h,0),s.length-2);const u=s[h].valueOf(),d=s[h+1].valueOf(),p=(c-u)/(d-u);return(h+p)/(s.length-1)*(o-a)+a}invert(e,i=!1){this.refresh();const{domain:s,bands:n}=this,a=s[0].valueOf()>s[s.length-1].valueOf();let o;return i?o=this.invertNearestIndex(e-this.bandwidth/2):o=ep(0,n.length-1,l=>this.ordinalRange(l)>=e)??0,n[a?n.length-1-o:o]}tickFormatter({domain:e,ticks:i,specifier:s},n){return s!=null?tm(s):AA(i,e,n)}}}});function wX(t){return{x:t.x1,y:t.y1}}function TX(t){return{x:t.x2,y:t.y2}}function NX(t){return{x:(t.x1+t.x2)/2,y:Math.min(t.y1,t.y2)}}function OX(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}}function _X(t){return{x:(t.x1+t.x2)/2,y:Math.max(t.y1,t.y2)}}function EX(t){return Math.abs(t.x2-t.x1)}function PX(t){return Math.abs(t.y2-t.y1)}function RX(t){return{x1:Math.round(t.x1),y1:Math.round(t.y1),x2:Math.round(t.x2),y2:Math.round(t.y2)}}function BX(t){return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}}function zX(t,e){const i=CA(t),s=CA(e);return i.x1<=s.x2&&i.x2>=s.x1&&i.y1<=s.y2&&i.y2>=s.y1}function CA(t){return{x1:Math.min(t.x1,t.x2),x2:Math.max(t.x1,t.x2),y1:Math.min(t.y1,t.y2),y2:Math.max(t.y1,t.y2)}}function FX(t,e,i,s){if(typeof t=="number")return{x1:t,y1:e,x2:i,y2:s};if("width"in t)return CA({x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height});throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(t)}] [${e}] [${i}] [${s}]`)}function jX(){return{x1:0,y1:0,x2:0,y2:0}}var Ap,LA=k({"packages/ag-charts-community/src/util/vector4.ts"(){"use strict";Ap={bottomCenter:_X,center:OX,clone:BX,collides:zX,end:TX,from:FX,height:PX,round:RX,start:wX,topCenter:NX,origin:jX,width:EX}}});function pv(t,e,i,s,n){return e+(s-e)*((n-t)/(i-t))}function eR(t,e,i,s,n){return t+(n-e)*((i-t)/(s-e))}function iR(t,e,i){return[eR(t,i.min,e,i.max,0),eR(t,i.min,e,i.max,1)]}function GX(t,e,i){const[s,n]=iR(t.x1,t.x2,e),[a,o]=iR(t.y1,t.y2,i);return{x1:s,x2:n,y1:a,y2:o}}function sR(t,e,i,s,n,a){if(i<=n&&a<=s)return i;const o=n-i,r=a-s,l=Math.abs(o)<Math.abs(r)?o:r;return Nt(t,i+l,e)}function VX(t,e,i){const{x:s={min:0,max:1},y:n={min:0,max:1}}=e,a=Ap.from(i),o=Ap.from(t),r=GX(o,s,n),l=sR(r.x1,r.x2,o.x1,o.x2,a.x1,a.x2),c=sR(r.y1,r.y2,o.y1,o.y2,a.y1,a.y2),h={x:{min:pv(o.x1,s.min,o.x2,s.max,l),max:pv(o.x1,s.min,o.x2,s.max,l+t.width)},y:{min:pv(o.y1,n.min,o.y2,n.max,c),max:pv(o.y1,n.min,o.y2,n.max,c+t.height)}},u=h.x.max-h.x.min,d=h.y.max-h.y.min;return h.x.min=Nt(0,h.x.min,1-u),h.x.max=h.x.min+u,h.y.min=Nt(0,h.y.min,1-d),h.y.max=h.y.min+d,h}var WX=k({"packages/ag-charts-community/src/util/panToBBox.ts"(){"use strict";R(),LA()}}),nR,aR,wA,TA,oR,rR=k({"packages/ag-charts-community/src/chart/interaction/zoomManager.ts"(){"use strict";R(),Us(),xu(),Jr(),Ln(),WX(),Zb(),nR=["rangeX","rangeY","ratioX","ratioY","autoScaledAxes"],aR=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},wA=t=>te((e,{options:i})=>!ye.is(t?.scale)&&!ja.is(t?.scale)||e==null||i.end==null?!0:e<=i.end,"to be less than end"),TA=class extends or{constructor(t,e){super(),this.fireChartEvent=t,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new lu(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new aR,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.destroyFns.push(e.addListener("layout:complete",()=>{const{pendingMemento:i}=this,s=!this.didLayoutAxes;this.didLayoutAxes=!0,i?this.restoreMemento(i.version,i.mementoVersion,i.memento):s&&this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(t,e){if(t==null)return!0;if(!Se(t))return!1;for(const o of Object.keys(t))if(!nR.includes(o))return!1;const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n={rangeX:{start:De(Pt(et,Ea),wA(i)),end:Pt(et,Ea)},rangeY:{start:De(Pt(et,Ea),wA(s)),end:Pt(et,Ea)},ratioX:{start:De(St,Pa("end")),end:St},ratioY:{start:De(St,Pa("end")),end:St},autoScaledAxes:kt(lt("y"))},{invalid:a}=Vs(t,n);return a.length>0?(e.push(...a.map(String)),!1):!0}restoreMemento(t,e,i){const{independentAxes:s}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:t,mementoVersion:e,memento:i};return}this.pendingMemento=void 0;const n=this.getDefinedZoom();if(i?.rangeX?n.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i?.ratioX?n.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:n.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let r=i?.autoScaledAxes?.includes("y");i?.rangeY?(n.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1},r??(r=!1)):i?.ratioY?(n.y={min:i.ratioY.start??0,max:i.ratioY.end??1},r??(r=!1)):(n.y={min:0,max:1},r??(r=!0)),n.autoScaleYAxis=r}if(this.lastRestoredState=n,s!==!0){this.updateZoom("zoom-manager",n);return}const a=this.getPrimaryAxis("x"),o=this.getPrimaryAxis("y");for(const r of[a,o])r&&this.updateAxisZoom("zoom-manager",r.id,n[r.direction])}updateAxes(t){this.axes=t;const e=new Map(t.map(i=>[i.id,this.axisZoomManagers.get(i.id)]));this.axisZoomManagers.clear();for(const i of t)this.axisZoomManagers.set(i.id,e.get(i.id)??new oR(i));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(t=!0){this.independentAxes=t}setAutoScaleYAxis(t,e){this.autoScaleYAxis.enabled=t,this.autoScaleYAxis.padding=e}setNavigatorEnabled(t=!0){this.navigatorModule=t}setZoomModuleEnabled(t=!0){this.zoomModule=t}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(t,e){if(e?.x&&(e.x.min<0||e.x.max>1)&&(st.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${e.x.min}, max: ${e.x.max} }], expecting a ratio of 0 to 1, ignoring.`),e.x=void 0),e?.y&&(e.y.min<0||e.y.max>1)&&(st.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${e.y.min}, max: ${e.y.max} }], expecting a ratio of 0 to 1, ignoring.`),e.y=void 0),this.axisZoomManagers.size===0){const s=this.state.stateId();(s==="initial"||s===t)&&this.state.set(t,e);return}this.state.set(t,e);const i=e?.autoScaleYAxis;i!=null&&(this.autoScaleYAxis.manuallyAdjusted=!i),this.axisZoomManagers.forEach(s=>{s.updateZoom(t,e?.[s.getDirection()])}),this.applyChanges(t)}updateAxisZoom(t,e,i){this.axisZoomManagers.get(e)?.updateZoom(t,i),this.applyChanges(t)}resetZoom(t){this.autoScaleYAxis.manuallyAdjusted=!1;const e=this.getRestoredZoom();this.updateZoom(t,{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1},autoScaleYAxis:e?.autoScaleYAxis??!0})}resetAxisZoom(t,e){const s=this.axisZoomManagers.get(e)?.getDirection();if(s==null)return;const n=this.getRestoredZoom();if(s==="y"){const a=n?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!a}for(const a of this.axes)a.direction===s&&this.updateAxisZoom(t,a.id,n?.[s]??{min:0,max:1})}setAxisManuallyAdjusted(t,e){this.axisZoomManagers.get(e)?.getDirection()==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(t,e,i){const s=this.getPrimaryAxis(e);s&&this.updateAxisZoom(t,s.id,i)}panToBBox(t,e,i){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;const s=this.getZoom();if(s===void 0||!s.x&&!s.y)return!1;if(!(e.width>0&&e.height>0&&Math.abs(i.width)<=Math.abs(e.width)&&Math.abs(i.height)<=Math.abs(e.height)))return st.warnOnce("cannot pan to target BBox - chart too small?"),!1;const a=VX(e,s,i);return this.independentAxes?(this.updatePrimaryAxisZoom(t,"x",a.x),this.updatePrimaryAxisZoom(t,"y",a.y)):this.updateZoom(t,a),!0}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}extendToEnd(t,e,i){return this.extendWith(t,e,s=>Number(s)-i)}extendWith(t,e,i){const s=this.getPrimaryAxis(e);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;const[,a]=n,o=i(a),r=this.rangeToRatio({start:o,end:a},e);r&&this.updateZoom(t,{[e]:r})}updateWith(t,e,i){const s=this.getPrimaryAxis(e);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;let[a,o]=n;[a,o]=i(a,o);const r=this.rangeToRatio({start:a,end:o},e);r&&this.updateZoom(t,{[e]:r})}getZoom(){let t,e;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?t??(t=i.getZoom()):i.getDirection()==="y"&&(e??(e=i.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){return this.axisZoomManagers.get(t)?.getZoom()??{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(t){return this.getPrimaryAxis(t)?.id}isVisibleItemsCountAtLeast(t,e){const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n=new Set;let a=0;const o=[t.x.min,t.x.max],r=[t.y.min,t.y.max];for(const l of i?.boundSeries??[]){n.add(l.id);const c=e-(a??0),h=l.getVisibleItems(o,r,c);if(a+=h,a>=e)return!0}for(const l of s?.boundSeries??[]){if(n.has(l.id))continue;const c=e-(a??0),h=l.getVisibleItems(o,r,c);if(a+=h,a>=e)return!0}return n.size===0}getMementoRanges(){const t=this.getDefinedZoom();let e;return this.autoScaleYAxis.enabled&&(e=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(t.x,"x"),rangeY:this.getRangeDirection(t.y,"y"),ratioX:{start:t.x.min,end:t.x.max},ratioY:{start:t.y.min,end:t.y.max},autoScaledAxes:e}}autoScaleYZoom(t,e=!0){if(!this.isZoomEnabled())return;const{independentAxes:i,autoScaleYAxis:s}=this,n=this.getZoom();if(n?.x==null||!s.enabled||s.manuallyAdjusted)return;const{padding:a}=s;let o;if(n.x?.min===0&&n.x?.max===1?o={min:0,max:1}:i?o=this.primaryAxisZoom("y",n.x,{padding:a}):o=this.combinedAxisZoom("y",n.x,{padding:a}),o!=null){if(i){const r=this.getPrimaryAxis("y");(r==null?void 0:this.axisZoomManagers.get(r.id))?.updateZoom("zoom-manager",o)}else for(const r of this.axisZoomManagers.values())r.getDirection()==="y"&&r.updateZoom("zoom-manager",o);e&&this.applyChanges(t)}}applyChanges(t){if(this.autoScaleYZoom(t,!1),!Array.from(this.axisZoomManagers.values(),s=>s.applyChanges()).includes(!0))return;const i={};for(const[s,n]of this.axisZoomManagers.entries())i[s]=n.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:i,callerId:t}),this.fireChartEvent({type:"zoom",...this.getMementoRanges()})}getRangeDirection(t,e){const i=this.getPrimaryAxis(e);if(!i||!ye.is(i.scale)&&!ja.is(i.scale))return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,a]=s;let o,r;return n<=a?(o=i.scale.invert(0),r=i.scale.invert(n+(a-n)*t.max)):(o=i.scale.invert(n-(n-a)*t.min),r=i.scale.invert(0)),{start:o,end:r}}rangeToRatio(t,e){const i=this.getPrimaryAxis(e);if(!i)return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,a]=s;let o=t.start==null?n:i.scale.convert?.(t.start),r=t.end==null?a:i.scale.convert?.(t.end);if(!re(o)||!re(r))return;const[l,c]=[Math.min(n,a),Math.max(n,a)];if(o<l||o>c){st.warnOnce(`Invalid range start [${t.start}], expecting a value between [${i.scale.invert?.(n)}] and [${i.scale.invert?.(a)}], ignoring.`);return}if(r<l||r>c){st.warnOnce(`Invalid range end [${t.end}], expecting a value between [${i.scale.invert?.(n)}] and [${i.scale.invert?.(a)}], ignoring.`);return}o=Math.min(c,Math.max(l,o)),r=Math.min(c,Math.max(l,r));const h=a-n,u=Math.abs((o-n)/h),d=Math.abs((r-n)/h);return{min:u,max:d}}getPrimaryAxis(t){return this.axes?.find(e=>e.direction===t)}getDomainExtents(t){const{domain:e}=t.scale,i=e.at(0),s=e.at(-1);if(!(i==null||s==null))return[i,s]}getDomainPixelExtents(t){const{domain:e}=t.scale,i=t.scale.convert?.(e.at(0)),s=t.scale.convert?.(e.at(-1));if(!(!re(i)||!re(s)))return[i,s]}getDefinedZoom(){const t=this.getZoom();return{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1}}}zoomBounds(t,e,i,s){const n=t.scale,a=n.range;n.range=[0,1];const o=e.scale,r=o.range;o.range=[0,1];let l=1,c=!1,h=0,u=!1;for(const g of e.boundSeries){const{connectsToYAxis:f}=g,x=g.getRange("y",[i.min,i.max]);for(const y of x){const b=o.convert(y);Number.isFinite(b)&&(b<l&&(l=b,c=!f||y<0),b>h&&(h=b,u=!f||y>0))}}if(re(e.min)&&(l=0),re(e.max)&&(h=1),n.range=a,o.range=r,l>=h)return;const d=(c?s:0)+(u?s:0),p=Math.min((h-l)*(1+d),1);if(!(p<=0)){if(c&&u){const g=(h+l)/2;l=g-p/2,h=g+p/2}else!c&&u?h=l+p:c&&!u&&(l=h-p);return l<0?(h+=-l,l=0):h>1&&(l-=h-1,h=1),{min:l,max:h}}}primaryAxisZoom(t,e,{padding:i=0}={}){const s=t==="x"?"y":"x",n=this.getPrimaryAxis(s),a=this.getPrimaryAxis(t);if(!(n==null||a==null))return this.zoomBounds(n,a,e,i)}combinedAxisZoom(t,e,{padding:i=0}={}){const s=t==="x"?"y":"x",n=new Map;for(const l of this.axes)if(l.direction===s)for(const c of l.boundSeries)n.set(c,l);let a=1,o=0;for(const l of this.axes)if(l.direction===t)for(const c of l.boundSeries){const h=n.get(c);if(h==null)continue;const u=this.zoomBounds(h,l,e,i);if(u==null)return;a=Math.min(a,u.min),o=Math.max(o,u.max)}const r=1e-6;if(a<r&&(a=0),o>1-r&&(o=1),!(a>o))return{min:a,max:o}}},oR=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new lu({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return Oe(this.state.stateValue())}hasChanges(){const t=this.currentZoom,e=this.state.stateValue();return t.min!==e.min||t.max!==e.max}applyChanges(){const t=this.hasChanges();return this.currentZoom=this.state.stateValue(),t}}}});function HX(t,e,i,s,n,a){if(t.size===0)return!1;let o=t.x,r=t.y;e!=null&&(o-=(e.x-.5)*t.size,r-=(e.y-.5)*t.size);let l=o;o<i?l=i:o>i+n&&(l=i+n);let c=r;r<s?c=s:r>s+a&&(c=s+a);const h=o-l,u=r-c;return Math.sqrt(h*h+u*u)<=t.size*.5}function lR(t,e,i,s,n){const a=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+n;return a&&o}function UX(t,e,i,s,n){return e+s<t.x+t.width&&e>t.x&&i>t.y&&i+n<t.y+t.height}function $X(t){return t!=null&&typeof t.point=="object"&&typeof t.label=="object"}function KX(t,e,i=5){const s=new Map,n=[],a=new Map([...t.entries()].map(([r,l])=>[r,l.toSorted((c,h)=>h.point.size-c.point.size)])),o=[...a.values()].flat();for(const[r,l]of a.entries()){const c=[];if(l[0]?.label){for(let h=0,u=l.length;h<u;h++){const d=l[h],{point:p,label:g,anchor:f}=d,{text:x,width:y,height:b}=g,v=p.size*.5;let M=0,D=0;if(v>0&&d.placement!=null){const O=hR[d.placement];M=(y*.5+v+i)*O.x,D=(b*.5+v+i)*O.y}const L=p.x-y*.5+M-((f?.x??.5)-.5)*p.size,A=p.y-b*.5+D-((f?.y??.5)-.5)*p.size;if(!(!e||UX(e,L,A,y,b))||o.some(O=>HX(O.point,O.anchor,L,A,y,b))||n.some(O=>lR(O,L,A,y,b)))continue;const P={index:h,text:x,x:L,y:A,width:y,height:b,datum:d};c.push(P),n.push(P)}s.set(r,c)}}return s}function cR(t,e=0){const i=[];for(let s=0;s<t.length;s++){const n=t[s],{point:{x:a,y:o},label:{text:r}}=n;let{width:l,height:c}=n.label;if(l+=e,c+=e,i.some(h=>lR(h,a,o,l,c)))return!0;i.push({index:s,text:r,x:a,y:o,width:l,height:c,datum:n})}return!1}var hR,uR=k({"packages/ag-charts-community/src/scene/util/labelPlacement.ts"(){"use strict";hR={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}}}}),dR,YX=k({"packages/ag-charts-community/src/chart/layout/seriesLabelLayoutManager.ts"(){"use strict";Ft(),uR(),dR=class{constructor(){this.labelData=new Map}updateLabels(t,e,i=ut.zero){const s={x:-e.left,y:-e.top,width:i.width+e.left+e.right,height:i.height+e.top+e.bottom},n=new Set(t.map(o=>o.id));for(const o of this.labelData.keys())n.has(o)||this.labelData.delete(o);for(const o of t){const r=o.getLabelData();r.every($X)&&this.labelData.set(o.id,r)}const a=KX(this.labelData,s,5);for(const o of t)o.updatePlacedLabelData?.(a.get(o.id)??[])}}}}),pR,ZX=k({"packages/ag-charts-community/src/chart/legend/legendManager.ts"(){"use strict";R(),Jr(),pR=class extends or{constructor(){super(...arguments),this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:t,isFixed:e})=>!t&&!e).map(({enabled:t,seriesId:e,itemId:i,legendItemName:s})=>({visible:t,seriesId:e,itemId:i,legendItemName:s}))}guardMemento(t){return t==null||zt(t)}restoreMemento(t,e,i){i?.forEach(s=>{const{seriesId:n,data:a}=this.getRestoredData(s)??{};!n||!a||this.updateData(n,a)}),this.update()}getRestoredData(t){const{seriesId:e,itemId:i,legendItemName:s,visible:n}=t;if(e){const o=(this.legendDataMap.get(e)??[]).map(r=>{const l=r.seriesId===e&&(!i||r.itemId===i);return l&&r.isFixed&&this.warnFixed(r.seriesId,r.itemId),!r.isFixed&&l?{...r,enabled:n}:r});return{seriesId:e,data:o}}if(!(i==null&&s==null))for(const a of this.getData()){if(i!=null&&a.itemId!==i||s!=null&&a.legendItemName!==s)continue;if(a.isFixed){this.warnFixed(a.seriesId,i);return}const o=(this.legendDataMap.get(a.seriesId)??[]).map(r=>r.itemId===i||r.legendItemName===s?{...r,enabled:n}:r);return{seriesId:a.seriesId,data:o}}}warnFixed(t,e){st.warnOnce(`The legend item with seriesId [${t}] and itemId [${e}] is not configurable, this series item cannot be toggled through the legend.`)}update(t){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:t??this.getData()})}updateData(t,e=[]){this.legendDataMap.set(t,e)}clearData(){this.legendDataMap.clear()}toggleItem(t,e,i,s){if(s){this.getData().forEach(r=>{const l=(this.legendDataMap.get(r.seriesId)??[]).map(c=>c.legendItemName===s?{...c,enabled:t}:c);this.updateData(r.seriesId,l)});return}const n=this.getData(e),a=n.length===1,o=n.map(r=>i==null&&a||r.itemId===i?{...r,enabled:t}:r);this.updateData(e,o)}getData(t){return t?this.legendDataMap.get(t)??[]:[...this.legendDataMap].reduce((e,[i,s])=>e.concat(s),[])}getDatum({seriesId:t,itemId:e}={}){return this.getData(t).find(i=>i.itemId===e)}getSeriesEnabled(t){const e=this.getData(t);if(e.length>0)return e.some(i=>i.enabled)}getItemEnabled({seriesId:t,itemId:e}={}){return this.getDatum({seriesId:t,itemId:e})?.enabled??!0}}}}),gR,XX=k({"packages/ag-charts-community/src/chart/series/seriesStateManager.ts"(){"use strict";gR=class{constructor(){this.groups={}}registerSeries({internalId:t,seriesGrouping:e,visible:i,type:s}){var n;e&&((n=this.groups)[s]??(n[s]={}),this.groups[s][t]={grouping:e,visible:i})}updateSeries({internalId:t,seriesGrouping:e,visible:i,type:s}){if(!e)return;const n=this.groups[s]?.[t];n&&(n.grouping=e,n.visible=i)}deregisterSeries({internalId:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const s=new Set,n=new Set;for(const o of Object.values(this.groups[t]??{}))o.visible&&(s.add(o.grouping.groupIndex),o.grouping.groupIndex===e.groupIndex&&n.add(o.grouping.stackIndex));const a=Array.from(s);return a.sort((o,r)=>o-r),{visibleGroupCount:a.length,visibleSameStackCount:n.size,index:a.indexOf(e.groupIndex)}}}}}),NA,fR=k({"packages/ag-charts-community/src/chart/updateService.ts"(){"use strict";R(),NA=class{constructor(t){this.updateCallback=t,this.events=new Rh}addListener(t,e){return this.events.on(t,e)}removeListener(t,e){return this.events.on(t,e)}destroy(){this.events.clear()}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.events.emit("update-complete",{type:"update-complete",apiUpdate:t})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:t}){this.events.emit("process-data",{type:"process-data",series:t})}}}}),mR,qX=k({"packages/ag-charts-community/src/chart/chartContext.ts"(){"use strict";_6(),E6(),P6(),FE(),XE(),CZ(),tr(),VI(),ov(),zZ(),jZ(),pP(),GZ(),kP(),IP(),wP(),TP(),MP(),oA(),$Z(),rR(),xE(),YX(),ZX(),XX(),fR(),mR=class{constructor(t,e){this.callbackCache=new WI,this.chartEventManager=new eA,this.highlightManager=new nA,this.layoutManager=new DI,this.localeManager=new tP,this.seriesStateManager=new gR,this.stateManager=new DE,this.seriesLabelLayoutManager=new dR,this.destroyFns=[],this.contextModules=[];const{scene:i,root:s,syncManager:n,container:a,fireEvent:o,updateCallback:r,updateMutex:l,styleContainer:c,chartType:h,domMode:u}=e;this.chartService=t,this.syncManager=n,this.domManager=new EI(this.chartService,a,c,u),this.widgets=new BP(this.domManager);const d=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new Zf({canvasElement:d}),this.scene.setRoot(s),this.destroyFns.push(this.scene.on("scene-changed",()=>{this.updateService.update(7)})),this.axisManager=new uP(s),this.legendManager=new pR,this.annotationManager=new hP(t.annotationRoot,o),this.chartTypeOriginator=new vE(t),this.interactionManager=new JI,this.contextMenuRegistry=new sA,this.updateService=new NA(r),this.proxyInteractionService=new FI(this.localeManager,this.domManager),this.fontManager=new gP(this.domManager,this.updateService),this.historyManager=new SE(this.chartEventManager),this.animationManager=new tA(this.interactionManager,l),this.dataService=new Xf(this.animationManager),this.tooltipManager=new Qf(this.localeManager,this.domManager,t.tooltip),this.zoomManager=new TA(o,this.layoutManager);for(const p of Io.byType("context")){if(!p.chartTypes.includes(h))continue;const g=p.moduleFactory(this);this.contextModules.push(g),this[p.contextKey]=g}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.fontManager.destroy(),this.highlightManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach(t=>t.destroy()),this.destroyFns.forEach(t=>t())}}}}),OA,QX=k({"packages/ag-charts-community/src/chart/chartHighlight.ts"(){"use strict";mt(),mt(),OA=class extends wt{constructor(){super(...arguments),this.range="tooltip"}},S([I],OA.prototype,"range",2)}});function JX(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function t9(t,e){if(t==null||e==null)return t===e;if(t.size!==e.size)return!1;for(const[i,s]of t){const n=e.get(i);if(n==null||!JX(s,n))return!1}return!0}function e9(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i+=1){const{type:s,idsMap:n,scopes:a,data:o,...r}=t[i],{type:l,idsMap:c,scopes:h,data:u,...d}=e[i];if(s!==l||a&&h&&!Jo(a,h)||o&&u&&o!==u||!hn(r,d)||!t9(n,c))return!1}return!0}function i9(t,e){const{props:i,...s}=t,{props:n,...a}=e;return hn(s,a)&&e9(i,n)}function s9(t,e,i,s){return e===t.data&&Jo(i,t.ids)&&i9(s,t.opts)}var n9=k({"packages/ag-charts-community/src/chart/data/caching.ts"(){"use strict";R(),Rt()}}),_A,sl,yR=k({"packages/ag-charts-community/src/chart/data/dataDomain.ts"(){"use strict";_A=class n5{constructor(){this.domain=new Set}static is(e){return e instanceof n5}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},sl=class a5{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof a5}static extendDomain(e,i=[1/0,-1/0]){for(const s of e)typeof s=="number"&&(i[0]>s&&(i[0]=s),i[1]<s&&(i[1]=s));return i}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}}}}),bu,vu,No,xR,a9=k({"packages/ag-charts-community/src/chart/data/rangeLookup.ts"(){"use strict";bu=0,vu=1,No=2,xR=class{constructor(t){const e=t.reduce((a,o)=>Math.max(a,o.length),0);let s=1<<32-Math.clz32(e);e===s/2&&(s=s>>>1),this.maxLevelSize=s;const n=new Float64Array((s*2-1)*2).fill(NaN);for(const a of t)for(let o=0;o<a.length;o+=1){const r=Number(a[o]),l=s+o-1,c=(l*No|0)+bu,h=(l*No|0)+vu,u=n[c],d=n[h];(!Number.isFinite(u)||r<u)&&(n[c]=r),(!Number.isFinite(d)||r>d)&&(n[h]=r)}for(let a=s/2|0;a>=1;a=a/2|0){const o=a-1|0,r=o+a|0;for(let l=0;l<a;l+=1){const c=o+l,h=r+l*2,u=h+1,d=n[(h*No|0)+bu],p=n[(u*No|0)+bu];n[(c*No|0)+bu]=!Number.isFinite(p)||d<p?d:p;const g=n[(h*No|0)+vu],f=n[(u*No|0)+vu];n[(c*No|0)+vu]=!Number.isFinite(f)||g>f?g:f}}this.buffer=n}computeRangeInto(t,e,i,s,n,a,o){const r=n+a-1;if(r<e||n>=i)return o;if(n>=e&&r<i){const l=t[(s*No|0)+bu],c=t[(s*No|0)+vu];Number.isFinite(l)&&(o[0]=Math.min(o[0],l)),Number.isFinite(c)&&(o[1]=Math.max(o[1],c))}else a>1&&(s=s*2|0,a=a/2|0,this.computeRangeInto(t,e,i,s+1|0,n,a,o),this.computeRangeInto(t,e,i,s+2|0,n+a,a,o));return o}rangeBetween(t,e){if(t>e)return[NaN,NaN];const{maxLevelSize:i,buffer:s}=this,n=[1/0,-1/0];return this.computeRangeInto(s,t,e,0,0,i,n),n}get range(){const{buffer:t}=this;return[t[bu],t[vu]]}}}});function o9(t){return t.map(e=>Se(e)?JSON.stringify(e):e).join("-")}function _n(t){const e=t?.map(Number);return e?.every(Number.isFinite)?e:[]}function EA(t,e){return e?.get(t.id)??0}function r9(t){return"scopes"in t&&Array.isArray(t.scopes)}function PA(t,e){const i=[];for(let s=0;s<t;s+=1)i[s]=e;return i}function gv(t,e,i){const s=[];for(const n of t){const a=n.get(e)?.[i];if(a==null)return;s.push(a)}return s}function bR(t){const e=[];let i=0,s;const n=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;s=n.exec(t);){if(s.index!==i)return;i=s.index+s[0].length;const a=s[1].trim();if(a.startsWith("."))e.push(a.slice(1).trim());else if(a.startsWith("[")){const o=a.slice(1,-1).trim();o.startsWith("'")?e.push(o.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):o.startsWith('"')?e.push(o.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):e.push(o)}else e.push(a)}if(i===t.length)return e}function l9(t){return e=>{let i=e;for(const s of t)i=i[s];return i}}function c9(t){const e=(i,s)=>{s.length>0&&(st.log(`DataModel.processData() - ${i}`),st.table(s))};st.log("DataModel.processData() - processedData",t),e("Key Domains",t.domain.keys),e("Group Domains",t.domain.groups??[]),e("Value Domains",t.domain.values),e("Aggregate Domains",t.domain.aggValues??[])}var RA,BA,Ga=k({"packages/ag-charts-community/src/chart/data/dataModel.ts"(){"use strict";R(),Fi(),yR(),a9(),RA=Symbol("domain-ranges"),BA=class{constructor(t,e="standalone",i=!1){this.opts=t,this.mode=e,this.suppressFieldDotNotation=i,this.debug=ne.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(r,l,c,h){for(const u of r)h.has(u)||h.set(u,PA(l.length,!1)),h.get(u)[c]=!0};let s=!0;for(const r of t.props){if(r.type==="key"&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");r.type==="value"&&s&&(s=!1)}const n=({matchGroupIds:r=[]})=>{for(const l of r)if(this.values.every(c=>c.groupId!==l))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)},a=new Set,o=new Set;for(const r of t.props){const l=r.type==="key"?a:o;switch(r9(r)&&r.scopes?.forEach(c=>l.add(c)),r.type){case"key":this.keys.push({...r,index:this.keys.length,missing:new Map});break;case"value":if(r.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);this.values.push({...r,index:this.values.length,missing:new Map});break;case"aggregate":n(r),this.aggregates.push({...r,index:this.aggregates.length});break;case"group-value-processor":n(r),this.groupProcessors.push({...r,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...r,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...r,index:this.reducers.length});break;case"processor":this.processors.push({...r,index:this.processors.length});break}}if(this.opts.groupByKeys||this.opts.groupByFn!=null){const r=new Set(o.values());if(a.forEach(l=>r.delete(l)),r.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...r.values()]}`)}}resolveProcessedDataDefById(t,e){const i=this.scopeCache.get(t.id)?.get(e);if(!i)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveKeysById(t,e,i){const s=this.resolveProcessedDataIndexById(t,e),n=i.keys[s];if(n==null)throw new Error(`AG Charts - didn't find keys for [${e}, ${t.id}]`);return n.get(t.id)}hasColumnById(t,e){return this.scopeCache.get(t.id)?.get(e)!=null}resolveColumnById(t,e,i){const s=this.resolveProcessedDataIndexById(t,e),n=i.columns?.[s];if(n==null)throw new Error(`AG Charts - didn't find column for [${e}, ${t.id}]`);return n}*forEachDatum(t,e,i){const s=e.columnScopes.findIndex(n=>n.has(t.id));for(const n of i.datumIndices[s]??[])yield e.columns[s][n]}*forEachGroupDatum(t,e){const i=e.columnScopes.findIndex(a=>a.has(t.id)),s={groupIndex:0,columnIndex:i},n=[];for(const a of e.groups){s.group=a;let o=0;for(const r of a.datumIndices[i]??n)s.datumIndex=r,s.valueIndex=o++,yield s;s.groupIndex++}}*forEachGroupDatumTuple(t,e){const s={columnIndex:e.columnScopes.findIndex(n=>n.has(t.id)),datumIndexes:[void 0,void 0,void 0]};for(const n of this.forEachGroupDatum(t,e))s.group=s.nextGroup,s.groupIndex=s.nextGroupIndex,s.nextGroup=n.group,s.nextGroupIndex=n.groupIndex,s.datumIndexes[0]=s.datumIndexes[1],s.datumIndexes[1]=s.datumIndexes[2],s.datumIndexes[2]=n.datumIndex,s.group!=null&&s.datumIndexes[1]!=null&&(yield s);s.group=s.nextGroup,s.groupIndex=s.nextGroupIndex,s.nextGroup=void 0,s.nextGroupIndex=void 0,s.datumIndexes[0]=s.datumIndexes[1],s.datumIndexes[1]=s.datumIndexes[2],s.datumIndexes[2]=void 0,s.group!=null&&s.datumIndexes[1]!=null&&(yield s)}getDomain(t,e,i,s){return this.getDomainsByType(i??"value",s)?.[this.resolveProcessedDataIndexById(t,e)]??[]}getDomainBetweenRange(t,e,[i,s],n){const a=e.map(c=>this.resolveProcessedDataIndexById(t,c)),o=a.join(":"),r=n[RA];let l=r.get(o);if(l==null){const c=a.map(h=>n.columns[h]);l=new xR(c),r.set(o,l)}return l.rangeBetween(i,s)}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:s,groupProcessors:n,reducers:a,processors:o,propertyProcessors:r}=this,l=performance.now();if(e&&this.keys.length===0)return;let c=this.extractData(t);e?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),n.length>0&&c.type==="grouped"&&this.postProcessGroups(c),s.length>0&&c.type==="ungrouped"?this.aggregateUngroupedData(c):s.length>0&&c.type==="grouped"&&this.aggregateGroupedData(c),r.length>0&&this.postProcessProperties(c),a.length>0&&this.reduceData(c),o.length>0&&this.postProcessData(c),this.warnDataMissingProperties(t);const h=performance.now();return c.time=h-l,this.debug.check()&&c9(c),this.processScopeCache(),c}warnDataMissingProperties(t){if(t.size!==0)for(const e of Vh(this.keys,this.values))for(const[i,s]of e.missing){if(s<(t.get(i)?.length??1/0))continue;const n=i==null?"":` for ${i}`;st.warnOnce(`the key '${e.property}' was not found in any data element${n}.`)}}processScopeCache(){this.scopeCache.clear();for(const t of Vh(this.keys,this.values,this.aggregates))if(t.idsMap)for(const[e,i]of t.idsMap)for(const s of i)if(!this.scopeCache.has(e))this.scopeCache.set(e,new Map([[s,t]]));else{if(this.scopeCache.get(e)?.has(s))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(e).set(s,t)}}valueGroupIdxLookup({matchGroupIds:t}){const e=[];for(const[i,s]of this.values.entries())(!t||s.groupId&&t.includes(s.groupId))&&e.push(i);return e}valueIdxLookup(t,e){const i=t==null||t.length===0,s=typeof e=="string"?e:e.id,n=o=>{if(o.idsMap){for(const[r,l]of o.idsMap)if(t?.includes(r)&&l.has(s))return!0}return!1},a=this.values.reduce((o,r,l)=>((r.scopes==null||i&&!r.scopes.length||r.scopes.some(h=>t?.includes(h)))&&(r.property===s||r.id===s||n(r))&&o.push(l),o),[]);if(a.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return a}extractData(t){const{dataDomain:e,processValue:i,allScopesHaveSameDefs:s}=this.initDataDomainProcessor(),{keys:n,values:a}=this,{invalidData:o,invalidKeys:r,allKeyMappings:l}=this.extractKeys(n,t,i),{columns:c,columnScopes:h,partialValidDataCount:u,maxDataLength:d}=this.extractValues(o,a,t,r,i),p=g=>{const f=e.get(g),x=f.getDomain();return sl.is(f)&&x[0]>x[1]?[]:x};return{type:"ungrouped",input:{count:d},scopes:new Set(t.keys()),dataSources:t,aggregation:void 0,keys:[...l.values()],columns:c,columnScopes:h,invalidKeys:r,invalidData:o,domain:{keys:n.map(p),values:a.map(p)},defs:{allScopesHaveSameDefs:s,keys:n,values:a},partialValidDataCount:u,time:0,[RA]:new Map}}extractKeys(t,e,i){const s=new Map,n=new Map,a=new Map;let o,r;const l=(c,h)=>{const u=r.get(c);o.set(h,o.get(u)),s.has(u)&&(s.set(h,s.get(u)),n.set(h,n.get(u)))};for(const c of t){const{invalidValue:h,scopes:u}=c;o=new Map,r=new Map,a.set(c,o);for(const d of u??[]){const p=e.get(d)??[];if(r.has(p)){l(p,d);continue}const g=[];o.set(d,g),r.set(p,d);let f,x;for(let y=0;y<p.length;y++){if(p[y]==null||typeof p[y]!="object")continue;const b=i(c,p[y],y,d);if(b.valid){g.push(b.value);continue}g.push(h),f??(f=PA(p.length,!1)),x??(x=PA(p.length,!1)),f[y]=!0,x[y]=!0}f&&x&&(s.set(d,f),n.set(d,x))}}return{invalidData:n,invalidKeys:s,allKeyMappings:a}}extractValues(t,e,i,s,n){let a=0;const o=[],r=[];let l=0;for(const c of e){const{invalidValue:h}=c;if(new Set(c.scopes.map(x=>i.get(x))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(c)}`);const d=new Set(c.scopes),p=tp(c.scopes),g=i.get(p),f=new Array;for(let x=0;x<g.length;x++){if(g[x]==null||typeof g[x]!="object")continue;const y=g[x],b=s.get(p)?.[x],v=n(c,y,x,c.scopes);let M=v.value;(b||!v.valid)&&this.markScopeDatumInvalid(c.scopes,g,x,t),b?M=h:v.valid||(a+=1,M=h),f[x]=M}o.push(f),r.push(d),l=Math.max(l,f.length)}return{columns:o,columnScopes:r,partialValidDataCount:a,maxDataLength:l}}groupData(t,e){var i;const s=new Map,{keys:n,columns:a,columnScopes:o,invalidKeys:r,invalidData:l}=t,c=t.scopes,h=new Set;for(const p of c){const g=a.map((M,D)=>D).filter(M=>!h.has(M)&&o[M].has(p));if(g.length===0)continue;for(const M of g)h.add(M);const f=new Set;for(const M of g)for(const D of o[M])f.add(D);const x=n.map(M=>M.get(p)).filter(M=>M!=null),y=a[tp(g)],b=l?.get(p),v=r?.get(p);for(let M=0;M<y.length;M++){if(v?.[M]===!0)continue;const D=x.map(T=>T[M]);if(D==null||D.length===0)throw new Error("AG Charts - no keys found for scope: "+p);const L=e?.(D)??D,A=o9(L),C=s.get(A)??{keys:L,datumIndices:[],validScopes:c};if(s.has(A)||s.set(A,C),b?.[M]===!0){C.validScopes===c&&(C.validScopes=new Set(c.values()));for(const T of f)C.validScopes.delete(T)}for(const T of g)(i=C.datumIndices)[T]??(i[T]=[]),C.datumIndices[T].push(M)}}const u=[],d=[];for(const{keys:p,datumIndices:g,validScopes:f}of s.values())u.push(p),d.push({datumIndices:g,keys:p,aggregation:[],validScopes:f});return{...t,type:"grouped",domain:{...t.domain,groups:u},groups:d}}aggregateUngroupedData(t){const e=this.aggregates.map(()=>[1/0,-1/0]);t.domain.aggValues=e;const{keys:i,columns:s,dataSources:n}=t,a=tp(n.keys()),o=n.get(a);t.aggregation=o?.map((r,l)=>{const c=[];for(const[h,u]of this.aggregates.entries()){const d=this.valueGroupIdxLookup(u);let p=u.groupAggregateFunction?.()??[1/0,-1/0];const g=d.map(b=>s[b][l]),f=gv(i,a,l),x=f!=null?u.aggregateFunction(g,f):void 0;x&&(p=u.groupAggregateFunction?.(x,p)??sl.extendDomain(x,p));const y=u.finalFunction?.(p)??p;c[h]=y,sl.extendDomain(y,e[h])}return c})}aggregateGroupedData(t){const e=this.aggregates.map(()=>[1/0,-1/0]);t.domain.aggValues=e;const{columns:i}=t;for(const[s,n]of this.aggregates.entries()){const a=this.valueGroupIdxLookup(n);for(const o of t.groups){o.aggregation??(o.aggregation=[]);const r=o.keys;let l=n.groupAggregateFunction?.()??[1/0,-1/0];const c=Math.max(...a.map(u=>o.datumIndices[u]?.length??0));for(let u=0;u<c;u++){const d=a.map(g=>i[g][o.datumIndices[g]?.[u]]),p=n.aggregateFunction(d,r);p&&(l=n.groupAggregateFunction?.(p,l)??sl.extendDomain(p,l))}const h=n.finalFunction?.(l)??l;o.aggregation[s]=h,sl.extendDomain(h,e[s])}}}postProcessGroups(t){const{groupProcessors:e}=this,{columnScopes:i,columns:s,invalidData:n}=t;for(const a of e){const o=this.valueGroupIdxLookup(a),r=a.adjust()();for(const l of t.groups)r(s,o,l);for(const l of o){const h=this.values[l].valueType==="category",u=s[l],d=tp(i[l]),p=n?.get(d),g=h?new _A:new sl;for(let f=0;f<u.length;f+=1)p?.[f]!==!0&&g.extend(u[f]);t.domain.values[l]=g.getDomain()}}}postProcessProperties(t){for(const{adjust:e,property:i,scopes:s}of this.propertyProcessors)for(const n of this.valueIdxLookup(s,i))e()(t,n)}reduceData(t){t.reduced??(t.reduced={});const{dataSources:e,keys:i}=t;for(const s of this.reducers){const n=s.reducer();let a=s.initialValue;if(t.type==="grouped")for(const o of t.groups)a=n(a,o.keys);else{const o=tp(e.keys()),r=i.map(h=>h.get(o)).filter(h=>h!=null),l=r.map(()=>{}),c=e.get(o);for(let h=0;h<c.length;h+=1){for(let u=0;u<l.length;u++)l[u]=r[u]?.[h];a=n(a,l)}}t.reduced[s.property]=a}}postProcessData(t){t.reduced??(t.reduced={});for(const e of this.processors)t.reduced[e.property]=e.calculate(t,t.reduced[e.property])}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const h of e)if(h.scopes)for(const u of h.scopes)i.add(u);const s=new Map,n=new Map;let a=!0;const o=()=>{for(const h of Vh(t,e))h.valueType==="category"?s.set(h,new _A):(s.set(h,new sl),a&&(a=(h.scopes??[]).length===i.size))};o();const r=this.buildAccessors(Vh(t,e)),l={value:void 0,missing:!1,valid:!1};return{dataDomain:s,processValue:(h,u,d,p)=>{let g,f;if(r.has(h.property)){try{f=r.get(h.property)(u)}catch{}g=f!=null}else g=h.property in u,f=g?u[h.property]:h.missingValue;h.forceValue!=null&&(f=g&&eb(f)?-1*h.forceValue:h.forceValue,g=!0),l.missing=!g;const x="missingValue"in h;if(!g&&!x)if(typeof p=="string"){const y=h.missing.get(p)??0;h.missing.set(p,y+1)}else for(const y of p){const b=h.missing.get(y)??0;h.missing.set(y,b+1)}if(s.has(h)||o(),g&&h.validation?.(f,u,d)===!1)if(l.valid=!1,"invalidValue"in h)f=h.invalidValue;else return this.mode!=="integrated"&&st.warnOnce(`invalid value of type [${typeof f}] for [${h.scopes} / ${h.id}] ignored:`,`[${f}]`),l.value=void 0,l;else l.valid=!0;if(h.processor){let y=n.get(h);y==null&&(y=h.processor(),n.set(h,y)),f=y(f,d)}return s.get(h)?.extend(f),l.value=f,l},initDataDomain:o,scopes:i,allScopesHaveSameDefs:a}}buildAccessors(t){const e=new Map;if(this.suppressFieldDotNotation)return e;for(const i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;const n=bR(i.property);if(n==null){st.warnOnce("Invalid property path [%s]",i.property);continue}const a=l9(n);e.set(i.property,a)}return e}}}}),zA,FA,vR=k({"packages/ag-charts-community/src/chart/data/dataController.ts"(){"use strict";R(),Fi(),n9(),Ga(),zA=class sc{constructor(e,i){this.mode=e,this.suppressFieldDotNotation=i,this.debug=ne.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,i,s){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,a)=>{this.requested.push({id:e,opts:s,data:i,resolve:n,reject:a})})}execute(e){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const i=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",i);const s=this.mergeRequested(i);this.debug("DataController.execute() - merged",s),this.debug.check()&&(be().processedData=[]);const n=[];for(const{data:a,ids:o,opts:r,resolves:l,rejects:c}of s){const h=e?.find(p=>s9(p,a,o,r));let u,d;if(h==null)try{u=new BA(r,this.mode,this.suppressFieldDotNotation);const p=new Map(i.map(g=>[g.id,g.data]));d=u.processData(p)}catch(p){c.forEach(g=>g(p));continue}else({dataModel:u,processedData:d}=h);n.push({opts:r,data:a,ids:o,dataModel:u,processedData:d}),this.debug.check()&&be("processedData").push(d),d?.partialValidDataCount===0?l.forEach(p=>p({dataModel:u,processedData:d})):d?this.splitResult(u,d,o,l):c.forEach(p=>p(new Error("AG Charts - no processed data generated")))}return n}validateRequests(e){const i=[];for(const[s,n]of e.entries())s>0&&n.data.length!==e[0].data.length&&n.opts.groupByData===!1&&n.opts.groupByKeys===!1?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(n);return i}mergeRequested(e){const i=[];for(const s of e){const n=i.find(sc.groupMatch(s));n?n.push(s):i.push([s])}return i.map(sc.mergeRequests)}splitResult(e,i,s,n){for(let a=0;a<s.length;a++){const o=n[a];o({dataModel:e,processedData:i})}}static groupMatch({data:e,opts:i}){function s(c){return c.filter(h=>h.type==="key").map(h=>h.property).join(";")}const{groupByData:n,groupByKeys:a=!1,groupByFn:o,props:r}=i,l=s(r);return([c])=>(n===!1||c.data===e)&&(c.opts.groupByKeys??!1)===a&&c.opts.groupByFn===o&&s(c.opts.props)===l}static mergeRequests(e){const i=new Set(["key","group-value-processor"]);return e.reduce((s,{id:n,data:a,resolve:o,reject:r,opts:{props:l,...c}})=>{s.ids.push(n),s.rejects.push(r),s.resolves.push(o),s.data??(s.data=a),s.opts??(s.opts={...c,props:[]});for(const h of l){const u={...h,scopes:[n],data:a};sc.createIdsMap(n,u);const d=s.opts.props.find(p=>p.type===u.type&&(i.has(p.type)||p.data===u.data)&&sc.deepEqual(p,u));if(!d){s.opts.props.push(u);continue}d.scopes??(d.scopes=[]),d.scopes.push(...u.scopes??[]),(d.type==="key"||d.type==="value")&&u.idsMap?.size&&sc.mergeIdsMap(u.idsMap,d.idsMap)}return s},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,i){for(const[s,n]of e){const a=i.get(s);if(a==null)i.set(s,new Set(n));else for(const o of n)a.add(o)}}static createIdsMap(e,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(e)?i.idsMap.get(e).add(i.id):i.idsMap.set(e,new Set([i.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(e)){if(n=e.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!sc.deepEqual(e[s],i[s]))return!1;return!0}const a=Object.keys(e);if(n=a.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const o=a[s];if(!sc.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!sc.deepEqual(e[o],i[o])))return!1}return!0}return!1}},zA.skipKeys=new Set(["id","idsMap","type","scopes","data"]),FA=zA}}),SR,yc,fv=k({"packages/ag-charts-community/src/chart/factory/axisRegistry.ts"(){"use strict";SR=class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.moduleFactory),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate)}create(t,e){const i=this.axesMap.get(t);if(i)return i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},yc=new SR}});function Su(t){return Cp.find(e=>e.type==="series"&&e.identifier===t)?.chartTypes}function h9(t){return Su(t)?.find(i=>i==="cartesian")==="cartesian"}function u9(t){return Su(t)?.find(i=>i==="polar")==="polar"}function d9(t){return Su(t)?.find(i=>i==="hierarchy")==="hierarchy"}function p9(t){return Su(t)?.find(i=>i==="topology")==="topology"}function g9(t){return Su(t)?.find(i=>i==="flow-proportion")==="flow-proportion"}function f9(t){return Su(t)?.find(i=>i==="standalone")==="standalone"}function m9(t){return Su(t)?.find(i=>i==="gauge")==="gauge"}function y9(t){return t.packageType==="enterprise"}function x9(t){if(!y9(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=Cp.find(i=>i.type===t.type&&("optionsKey"in i&&"optionsKey"in t?i.optionsKey===t.optionsKey:!0)&&("contextKey"in i&&"contextKey"in t?i.contextKey===t.contextKey:!0)&&i.identifier===t.identifier&&t.chartTypes.every(s=>i.chartTypes.includes(s)));return e&&(e.useCount??(e.useCount=0),e.useCount++),e!=null}function b9(){return Cp.filter(({useCount:t})=>t==null||t===0)}var Cp,mv=k({"packages/ag-charts-community/src/chart/factory/expectedEnterpriseModules.ts"(){"use strict";Cp=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}]}}),MR,yv,jA=k({"packages/ag-charts-community/src/chart/factory/legendRegistry.ts"(){"use strict";MR=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,moduleFactory:i,themeTemplate:s}){this.legendMap.set(t,{optionsKey:e,moduleFactory:i}),this.themeTemplates.set(e,s)}create(t,e){const i=this.legendMap.get(t)?.moduleFactory;if(i)return i(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((t,[e,i])=>(t[e]=i.optionsKey,t),{})}},yv=new MR}}),GA,DR,ze,kR,xv,nm=k({"packages/ag-charts-community/src/chart/factory/chartTypes.ts"(){"use strict";Rt(),GA=class extends Map{get(t){return super.get(t)??"unknown"}isCartesian(t){return this.get(t)==="cartesian"}isPolar(t){return this.get(t)==="polar"}isHierarchy(t){return this.get(t)==="hierarchy"}isTopology(t){return this.get(t)==="topology"}isFlowProportion(t){return this.get(t)==="flow-proportion"}isStandalone(t){return this.get(t)==="standalone"}isGauge(t){return this.get(t)==="gauge"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))}get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))}get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}get topologyTypes(){return this.seriesTypes.filter(t=>this.isTopology(t))}get flowProportionTypes(){return this.seriesTypes.filter(t=>this.isFlowProportion(t))}get standaloneTypes(){return this.seriesTypes.filter(t=>this.isStandalone(t))}get gaugeTypes(){return this.seriesTypes.filter(t=>this.isGauge(t))}},DR=class extends Map{set(t,e){return super.set(t,Kt(e,this.get(t)))}},ze=new GA,kR=new GA,xv=new DR}}),IR,ha,bv=k({"packages/ag-charts-community/src/chart/factory/seriesRegistry.ts"(){"use strict";Ln(),Rt(),nm(),IR=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],moduleFactory:i,tooltipDefaults:s,defaultAxes:n,themeTemplate:a,solo:o,stackable:r,groupable:l,stackedByDefault:c,hidden:h}){this.setThemeTemplate(t,a),this.seriesMap.set(t,{moduleFactory:i,tooltipDefaults:s,defaultAxes:n,solo:o,stackable:r,groupable:l,stackedByDefault:c}),ze.set(t,e),h||kR.set(t,e)}create(t,e){const i=this.seriesMap.get(t)?.moduleFactory;if(i)return i(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t){const e=this.seriesMap.get(t)?.defaultAxes;return e==null?null:{axes:Oe(e)}}setThemeTemplate(t,e){const i=this.themeTemplates.get(t);this.themeTemplates.set(t,Kt(e,i))}getThemeTemplate(t){return this.themeTemplates.get(t)}getTooltipDefauls(t){return this.seriesMap.get(t)?.tooltipDefaults}isSolo(t){return this.seriesMap.get(t)?.solo??!1}isGroupable(t){return this.seriesMap.get(t)?.groupable??!1}isStackable(t){return this.seriesMap.get(t)?.stackable??!1}isStackedByDefault(t){return this.seriesMap.get(t)?.stackedByDefault??!1}},ha=new IR}}),vv,AR,v9=k({"packages/ag-charts-community/src/chart/interaction/syncManager.ts"(){"use strict";Jr(),vv=class nc extends or{constructor(e){super(),this.chart=e}subscribe(e=nc.DEFAULT_GROUP){let i=this.get(e);return i||(i={members:new Set},nc.chartsGroups.set(e,i)),i.members.add(this.chart),this}unsubscribe(e=nc.DEFAULT_GROUP){const i=this.get(e);return i?.members.delete(this.chart),delete i?.domains?.x?.sources?.[this.chart.id],delete i?.domains?.y?.sources?.[this.chart.id],this}getChart(){return this.chart}getGroupState(e=nc.DEFAULT_GROUP){return this.get(e)}getGroupMembers(e=nc.DEFAULT_GROUP){const i=this.get(e);return i?Array.from(i.members):[]}getGroupSiblings(e=nc.DEFAULT_GROUP){return this.getGroupMembers(e).filter(i=>i!==this.chart)}getGroupSyncMode(e=nc.DEFAULT_GROUP){return this.getGroupMembers(e).some(i=>i.series.length>1)?"multi-series":"single-series"}get(e){return nc.chartsGroups.get(e)}},vv.chartsGroups=new Map,vv.DEFAULT_GROUP=Symbol("sync-group-default"),AR=vv}}),Sv,S9=k({"packages/ag-charts-community/src/chart/keyboard.ts"(){"use strict";mt(),mt(),Sv=class extends wt{constructor(){super(...arguments),this.enabled=!1}},S([I],Sv.prototype,"enabled",2),S([I],Sv.prototype,"tabIndex",2)}}),CR={};cn(CR,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Va,fromToMotion:()=>He,staticFromToMotion:()=>nl});function He(t,e,i,s,n,a,o){const{fromFn:r,toFn:l,applyFn:c=(g,f)=>g.setProperties(f)}=n,{nodes:h,selections:u}=rv(s),d=(g,f)=>{let x,y=0,b=0;for(const v of f){const M=g[y]===v,D={last:b>=f.length-1,lastLive:y>=g.length-1,prev:f[b-1],prevFromProps:x,prevLive:g[y-1],next:f[b+1],nextLive:g[y+(M?1:0)]},L=`${t}_${e}_${v.id}`;i.stopByAnimationId(L);let A="unknown";M?a&&o&&(A=M9(v,v.datum,a,o)):A="removed",v.transitionOut=A==="removed";const{phase:C,start:T,finish:N,delay:P,duration:O,...B}=r(v,v.datum,A,D),{phase:G,start:V,finish:W,delay:H,duration:$,...F}=l(v,v.datum,A,D),j=N==null;i.animate({id:L,groupId:t,phase:C??G??"update",duration:O??$,delay:P??H,from:B,to:F,ease:vp,collapsable:j,onPlay:()=>{const z={...T,...V,...B};c(v,z,"start")},onUpdate(z){c(v,z,"update")},onStop:()=>{const z={...T,...V,...B,...F,...N,...W};c(v,z,"end")}}),M&&y++,b++,x=B}};let p=0;for(const g of u){const f=g.nodes(),x=f.filter(y=>!g.isGarbage(y));d(x,f),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:vp,onStop(){g.cleanup()}}),p++}d(h,h)}function nl(t,e,i,s,n,a,o){const{nodes:r,selections:l}=rv(s),{start:c,finish:h,phase:u}=o;i.animate({id:`${t}_${e}`,groupId:t,phase:u??"update",from:n,to:a,ease:vp,onPlay:()=>{if(c){for(const d of r)d.setProperties(c);for(const d of l)for(const p of d.nodes())p.setProperties(c)}},onUpdate(d){for(const p of r)p.setProperties(d);for(const p of l)for(const g of p.nodes())g.setProperties(d)},onStop:()=>{for(const d of r)d.setProperties({...a,...h});for(const d of l){for(const p of d.nodes())p.setProperties({...a,...h});d.cleanup()}}})}function M9(t,e,i,s){const n=i(t,e);return s.added.has(n)?"added":s.removed.has(n)?"removed":t.previousDatum==null&&t.datum!=null?"added":t.previousDatum!=null&&t.datum==null?"removed":"updated"}var Va,Ls=k({"packages/ag-charts-community/src/motion/fromToMotion.ts"(){"use strict";uu(),Sp(),Va={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"}}}),LR={};cn(LR,{resetMotion:()=>as});function as(t,e){const{nodes:i,selections:s}=rv(t);for(const n of s){for(const a of n.nodes()){const o=e(a,a.datum);a.setProperties(o)}n.cleanup()}for(const n of i){const a=e(n,n.datum);n.setProperties(a)}}var Mu=k({"packages/ag-charts-community/src/motion/resetMotion.ts"(){"use strict";uu()}}),gi,al=k({"packages/ag-charts-community/src/scene/selection.ts"(){"use strict";Fi(),za(),gi=class Kd{constructor(e,i,s=!0){this.parentNode=e,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=ne.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(er,i)?()=>new i:i}static select(e,i,s=!0){return new Kd(e,i,s)}static selectAll(e,i){const s=[],n=a=>{i(a)&&s.push(a);for(const o of a.children())n(o)};return n(e),s}static selectByClass(e,...i){return Kd.selectAll(e,s=>i.some(n=>s instanceof n))}static selectByTag(e,i){return Kd.selectAll(e,s=>s.tag===i)}createNode(e,i,s){const n=this.nodeFactory(e);return n.datum=e,i?.(n),s==null?this._nodes.push(n):this._nodes.splice(s,0,n),this.parentNode.appendChild(n),n}update(e,i,s){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",e),s){const n=new Map(e.map((a,o)=>[s(a),[a,o]]));for(const[a,o]of this._nodesMap.entries())if(n.has(o)){const[r]=n.get(o);a.datum=r,this.garbageBin.delete(a),n.delete(o)}else this.garbageBin.add(a);for(const[a,[o,r]]of n.entries())this._nodesMap.set(this.createNode(o,i,r),a)}else{const n=Math.max(e.length,this.data.length);for(let a=0;a<n;a++)a>=e.length?this.garbageBin.add(this._nodes[a]):a>=this._nodes.length?this.createNode(e[a],i):(this._nodes[a].datum=e[a],this.garbageBin.delete(this._nodes[a]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}each(e){for(const i of this._nodes.entries())e(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const i=this._nodes[e];yield{node:i,datum:i.datum,index:e}}}select(e){return Kd.selectAll(this.parentNode,e)}selectByClass(e){return Kd.selectByClass(this.parentNode,e)}selectByTag(e){return Kd.selectByTag(this.parentNode,e)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}get length(){return this._nodes.length}}}}),ws,xc=k({"packages/ag-charts-community/src/scene/shape/line.ts"(){"use strict";R(),sI(),Ft(),za(),hc(),ws=class extends ra{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new ut(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(t,e):!1}distanceSquared(t,e){const{x1:i,y1:s,x2:n,y2:a}=this;return Gf(t,e,i,s,n,a,1/0)}render(t){const{ctx:e,devicePixelRatio:i}=t;let{x1:s,y1:n,x2:a,y2:o}=this;if(s===a){const{strokeWidth:r}=this,l=Math.round(s*i)/i+Math.trunc(r*i)%2/(i*2);s=l,a=l}else if(n===o){const{strokeWidth:r}=this,l=Math.round(n*i)/i+Math.trunc(r*i)%2/(i*2);n=l,o=l}e.beginPath(),e.moveTo(s,n),e.lineTo(a,o),this.fillStroke(e),this.fillShadow?.markClean(),super.render(t)}toSVG(){if(!this.visible)return;const t=ui("line");return t.setAttribute("x1",String(this.x1)),t.setAttribute("y1",String(this.y1)),t.setAttribute("x2",String(this.x2)),t.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(t),{elements:[t]}}},ws.className="Line",ws.defaultStyles={...ra.defaultStyles,fill:void 0,strokeWidth:1},S([ot()],ws.prototype,"x1",2),S([ot()],ws.prototype,"y1",2),S([ot()],ws.prototype,"x2",2),S([ot()],ws.prototype,"y2",2)}});function D9(){return f_(()=>{})}function VA(t,e){const i=Kh(e);if(i.length===0)return;const s=m_(t);for(const n of i)n in s&&(e[n]=s[n])}var Mv,Dv,WA,kv,Lp,wR,am=k({"packages/ag-charts-community/src/util/stateMachine.ts"(){"use strict";Fi(),ap(),Mv="color: green",Dv="color: grey",WA=class{transitionRoot(t,e){this.parent?this.parent.transitionRoot(t,e):this.transition(t,e)}},kv=class qn extends WA{constructor(e,i,s){super(),this.defaultState=e,this.states=i,this.enterEach=s,this.debug=ne.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,Mv)}transition(e,i){if(!this.transitionChild(e,i)||this.state===qn.child||this.state===qn.parent)return;const n=this.state,a=this.states[this.state];let o=a[e];const r=`%c${this.constructor.name} | ${this.state} -> ${e} ->`;if(Array.isArray(o))o=o.find(h=>{if(!h.guard)return!0;const u=h.guard(i);return u||this.debug(`${r} (guarded)`,h.target,Dv),u});else if(typeof o=="object"&&!(o instanceof qn)&&o.guard&&!o.guard(i)){this.debug(`${r} (guarded)`,o.target,Dv);return}if(!o){this.debug(`${r} ${this.state}`,Dv);return}const l=this.getDestinationState(o),c=l===this.state?void 0:a.onExit;this.debug(`${r} ${l}`,Mv),this.state=l,typeof o=="function"?o(i):typeof o=="object"&&!(o instanceof qn)&&o.action?.(i),c?.(),this.enterEach?.(n,l),l!==n&&l!==qn.child&&l!==qn.parent&&this.states[l].onEnter?.(n,i)}transitionAsync(e,i){setTimeout(()=>{this.transition(e,i)},0)}is(e){return this.state===qn.child&&this.childState?this.childState.is(e):this.state===e}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(e,i){return this.state!==qn.child||!this.childState||(VA(this,this.childState),this.childState.transition(e,i),!this.childState.is(qn.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.defaultState}`,Mv),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1)}getDestinationState(e){let i=this.state;return typeof e=="string"?i=e:e instanceof qn?(this.childState=e,this.childState.parent=this,i=qn.child):typeof e=="object"&&(e.target instanceof qn?(this.childState=e.target,this.childState.parent=this,i=qn.child):e.target!=null&&(i=e.target)),i}},kv.child="__child",kv.parent="__parent",Lp=kv,wR=class extends WA{constructor(...t){super(),this.stateMachines=t;for(const e of t)e.parent=this}transition(t,e){for(const i of this.stateMachines)VA(this,i),i.transition(t,e)}transitionAsync(t,e){for(const i of this.stateMachines)VA(this,i),i.transitionAsync(t,e)}}}}),Iv,HA=k({"packages/ag-charts-community/src/module/moduleMap.ts"(){"use strict";R(),Iv=class{constructor(){this.moduleMap=new Map}*modules(){for(const t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){const e=Ji(t)?t:t.optionsKey;this.moduleMap.get(e)?.moduleInstance.destroy(),this.moduleMap.delete(e)}getModule(t){return this.moduleMap.get(Ji(t)?t:t.optionsKey)?.moduleInstance}isEnabled(t){return this.moduleMap.has(Ji(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),(e,i)=>t(e.moduleInstance,i))}destroy(){for(const t of this.moduleMap.keys())this.moduleMap.get(t)?.moduleInstance.destroy();this.moduleMap.clear()}}}});function Du(t){return typeof t=="string"?MA[t]:t}function UA(t){return Du(t).unit}function k9(t){return Du(t).step}function $A(t){return Du(t).hierarchy}function wp(t){return Du(t).milliseconds}function Av(t,e,i,s){return Du(t).range(e,i,s)}function TR(t,e){return Du(t).floor(e)}var Tp=k({"packages/ag-charts-community/src/util/timeInterop.ts"(){"use strict";il()}}),KA,En,Cv=k({"packages/ag-charts-community/src/scale/unitTimeScale.ts"(){"use strict";R(),il(),Tp(),Us(),xu(),KA=class o5 extends ja{constructor(){super(...arguments),this.type="unit-time",this._domain=[],this._bands=void 0}static is(e){return e instanceof o5}set domain(e){e!==this._domain&&(this._domain=e,this._bands=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(e){this._interval!==e&&(this._interval=e,this._bands=void 0)}get bands(){return this._bands??(this._bands=this.calculateBands(this._domain,[0,1])),this._bands}normalizeDomains(...e){return dA(...e)}convert(e,i){const{domain:s,interval:n}=this;if(s.length<2)return NaN;if(n!=null){const a=e.valueOf(),[o,r]=this.calculateBandRange(s,n),l=Math.min(o.valueOf(),r.valueOf()),c=Math.max(o.valueOf(),r.valueOf());if(a<l||a>=c+wp(n))return NaN}return super.convert(e,i)}calculateBandRange(e,i){const s=TR(i,e[0]),n=TR(i,e[1]);return[s,n]}calculateBands(e,i,s=!1){if(e===this.domain&&i[0]===0&&i[1]===1&&!s&&this._bands!=null)return this._bands;if(e.length<2)return[];const{interval:n}=this;if(n==null)return[];const[a,o]=this.calculateBandRange(e,n);return Av(n,a,o,{visibleRange:i,extend:s})}ticks({interval:e},i=this.domain,s=[0,1],n=!1){if(i.length<2)return;const a=this.calculateBands(i,s,n),o=this.interval?wp(this.interval):1/0;if(e==null)return{ticks:a,count:void 0};const r=Math.min(i[0].valueOf(),i[1].valueOf()),l=Math.max(i[0].valueOf(),i[1].valueOf()),c=[];let h,u,d;e instanceof ki?(h=e.range(i[0],i[1],{extend:!0,visibleRange:s}),u=0,d=h.length-1):(h=a,u=Kr(0,a.length-1,b=>a[b].valueOf()<=r)??0,d=Kr(0,a.length-1,b=>a[b].valueOf()<=l)??a.length-1);let p;for(let b=u;b<=d;b++){const v=h[b].valueOf(),M=Kr(0,a.length-1,L=>a[L].valueOf()<=v),D=M!=null&&M!=p?a[M]:void 0;p=M,D!=null&&v-D.getTime()<=o&&c.push(D)}let g,f;if(this.interval){const b=this.calculateBandRange([new Date(r),new Date(l)],this.interval);g=b[0].valueOf(),f=b[1].valueOf()}else g=r,f=l;let x=ep(0,c.length-1,b=>c[b].valueOf()>=g)??0,y=Kr(0,c.length-1,b=>c[b].valueOf()<=f)??c.length-1;return n&&(x=Math.max(x-1,0),y=Math.min(y+1,c.length-1)),{ticks:c.slice(x,y+1),count:c.length}}findIndex(e){const{bands:i}=this,s=e.valueOf();return Kr(0,i.length-1,n=>i[n].valueOf()<=s)}datumFormatter(e){const i=this.tickFormatter(e,1);return s=>{const n=this.findIndex(s);return n!=null?i(this.bands[n]):i(s)}}},KA.defaultTickCount=12,En=KA}});function Lv(t,e){return t.valueOf()-e.valueOf()}function I9(t){let e=NaN;const i=[];for(const s of t){const n=s.valueOf();e!==n&&i.push(s),e=n}return i}function YA(t){const e=t.slice().sort(Lv);return ZA(e)==null?I9(e):e}function ZA(t){if(t.length===0)return 1;const e=Number(t[t.length-1])>Number(t[0])?1:-1;let i=-1/0*e;for(const s of t){const n=s.valueOf();if(Math.sign(n-i)!==e)return;i=n}return e}var XA=k({"packages/ag-charts-community/src/util/date.ts"(){"use strict"}});function NR(t,e){return Math.abs(Math.round(t)-t)<e}function OR(t,e,i){return Math.abs(e-t)>=i?Math.abs(e-t)/i+1:1}function om(t,e,i,s,n,a){if(t===e)return{ticks:[t],count:1};if(i<2)return{ticks:[t,e],count:2};const o=rm(t,e,i,s,n);if(!Number.isFinite(o))return{ticks:[],count:0};let r=t,l=e;if(NR(r/o,1e-12)||(r=Math.ceil(r/o)*o),NR(l/o,1e-12)||(l=Math.floor(l/o)*o),a!=null){const h=l-r,u=e-t,d=t+u*a[0],p=t+u*a[1];a=[(d-r)/h,(p-r)/h]}const{ticks:c}=wv(r,l,o,a);return{ticks:c,count:OR(t,e,o)}}function _R({timeInterval:t,step:e}){return t.milliseconds*e<=(t.hierarchy?.milliseconds??1/0)*zR}function qA(t,e,i,s,n,{weekStart:a,primaryOnly:o=!1,targetInterval:r}){if(i<=0)return;const l=r??Math.abs(e-t)/Math.max(i,1),c=Tv.findLast(p=>(!o||_R(p))&&l>p.duration),h=Tv.find(p=>(!o||_R(p))&&l<=p.duration);if(c==null){const p=Math.max(rm(t,e,i,s,n),1);return fA.every(p)}else if(h==null){const p=r==null?rm(t/pu,e/pu,i,s,n):1;return mc.every(p)}const{timeInterval:u,step:d}=l-c.duration<h.duration-l?c:h;return u===To?a?.every(d)??hr.every(7*d):u.every(d)}function rm(t,e,i,s=0,n=1/0){if(t===e)return Nt(1,s,n);if(i<1)return NaN;const a=Math.abs(e-t),o=10**Math.floor(Math.log10(a/i));let r=NaN,l=1/0,c=!1;for(const h of QA){const u=Math.ceil(a/(h*o)),d=u>=s&&u<=n;if(c&&!d)continue;const p=Math.abs(u-i);(l>p||c!==d)&&(c||(c=d),l=p,r=h)}return r*o}function ER(t){for(let e=t.length-1;e>=0;e-=1)if(t[e]!=="0")return e+1;return 0}function PR(t,e){const i=_k(e??",f");(i.precision==null||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...t.map(n=>{if(!Number.isFinite(n))return 0;const[a,o]=n.toExponential((i.type?6:12)-1).split(/[.e]/g);return(a!=="1"&&a!=="-1"?1:0)+ER(o)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...t.map(n=>{if(!Number.isFinite(n)||n===0)return 0;const a=Math.floor(Math.log10(Math.abs(n))),o=i.type?6:12,r=n.toExponential(o-1).split(/[.e]/g)[1],l=ER(r);return Math.max(0,l-a)}))));const s=Ek(i);return n=>s(Number(n))}function wv(t,e,i,s){if(!Number.isFinite(i)||i<=0)return{ticks:[],count:0};if(t===e)return{ticks:[t],count:1};const n=10**Tf(i),a=Math.min(t,e),o=Math.max(t,e);let r,l;if(s!=null&&(s[0]!==0||s[1]!==1)){const h=e-t,u=t+h*s[0],d=e-h*(1-s[1]);r=Math.min(u,d),l=Math.max(u,d)}else r=a,l=o;r=Math.floor(r*n)/n,l=Math.ceil(l*n)/n;const c=[];for(let h=0;;h+=1){const u=Math.round((a+i*h)*n)/n;if(u>o)break;u>=r&&u<=l&&c.push(u)}return{ticks:c,count:OR(a,o,i)}}function Np(t,e){return t>=e?(st.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function RR(t,e){const i=Math.abs(e-t),s=10**Math.floor(Math.log10(i));let n=1/0,a=[t,e];for(const o of QA){const r=o*s,l=Math.floor(t/r)*r,c=Math.ceil(e/r)*r,h=1-i/Math.abs(c-l);n>h&&(n=h,a=[l,c])}return a}function BR(t,e,i,s,n,a){if(t<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};a=Math.max(a,t/(n+1)),i??(i=a),s??(s=t),i>s&&(i===a?i=s:s=i);const o=Math.max(1,Math.floor(t/(e*i))),r=Math.min(o,Math.ceil(t/(e*s))),l=Nt(r,Math.floor(n/e),o);return{minTickCount:r,maxTickCount:o,tickCount:l}}var Ue,Tv,QA,zR,bc=k({"packages/ag-charts-community/src/util/ticks.ts"(){"use strict";R(),il(),cr(),Ue=(t,e,i)=>({duration:e*i,timeInterval:t,step:i}),Tv=[Ue(gu,el,1),Ue(gu,el,5),Ue(gu,el,15),Ue(gu,el,30),Ue(fu,ds,1),Ue(fu,ds,5),Ue(fu,ds,15),Ue(fu,ds,30),Ue(mu,$s,1),Ue(mu,$s,3),Ue(mu,$s,6),Ue(mu,$s,12),Ue(hr,ca,1),Ue(hr,ca,2),Ue(To,lr,1),Ue(To,lr,2),Ue(To,lr,3),Ue(Fa,kp,1),Ue(Fa,kp,2),Ue(Fa,kp,3),Ue(Fa,kp,4),Ue(Fa,kp,6),Ue(mc,pu,1)],QA=[1,2,5,10],zR=Math.floor(2*To.milliseconds/Fa.milliseconds*10)/10}});function FR({start:t,stop:e,tickCount:i,minTickCount:s,maxTickCount:n,visibleRange:a,extend:o}){const r=qA(t,e,i,s,n,{weekStart:To});return r?r.range(new Date(t),new Date(e),{visibleRange:a,extend:o}):[]}function JA({start:t,stop:e,interval:i,availableRange:s,visibleRange:n,extend:a}){if(!i)return[];if(i instanceof ki||typeof i=="string"){const u=Av(i,new Date(t),new Date(e),{visibleRange:n,extend:a});return Np(u.length,s)?void 0:u}const o=Math.abs(i);if(Np(Math.abs(e-t)/o,s))return;const r=Tv.findLast(u=>o%u.duration===0);if(r)return r.timeInterval.every(o/(r.duration/r.step)).range(new Date(t),new Date(e),{visibleRange:n,extend:a});let l=new Date(Math.min(t,e));const c=new Date(Math.max(t,e)),h=[];for(;l<=c;)h.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+o);return h}function A9(t,e,i,s){const{interval:n}=i,a=Math.min(Ks(t),Ks(e)),o=Math.max(Ks(t),Ks(e));let r;if(n instanceof ki)r=n;else if(typeof n=="string")r=n;else{let u;typeof n=="number"&&(u=(o-a)/Math.max(n,1),Np(u,s)&&(u=void 0)),u??(u=i.tickCount??ye.defaultTickCount),r=qA(a,o,u,i.minTickCount,i.maxTickCount,{weekStart:To})}if(r==null)return[t,e];const l=Av(r,new Date(a),new Date(o),{extend:!0});if(l==null||l.length<2)return[t,e];const c=l[0],h=l[l.length-1];return t<=e?[c,h]:[h,c]}var Op,Nv=k({"packages/ag-charts-community/src/scale/timeScale.ts"(){"use strict";bc(),il(),uv(),im(),Tp(),Us(),Op=class r5 extends ye{constructor(){super([],[0,1]),this.type="time"}static is(e){return e instanceof r5}toDomain(e){return new Date(e)}convert(e,i){return e instanceof Date||(e=new Date(e)),super.convert(e,i)}invert(e){return new Date(super.invert(e))}niceDomain(e,i=this.domain){if(i.length<2)return[];let[s,n]=i;const a=4,o=this.getPixelRange();for(let r=0;r<a;r++){const[l,c]=A9(s,n,e,o);if(Ks(s)===Ks(l)&&Ks(n)===Ks(c))break;s=l,n=c}return[s,n]}ticks(e,i=this.domain,s=[0,1],n=!1){const{nice:a,interval:o,tickCount:r=ye.defaultTickCount,minTickCount:l,maxTickCount:c}=e;if(i.length<2)return;const h=i.map(Ks),u=h[0],d=h[h.length-1];if(o!=null){const p=this.getPixelRange();return{ticks:JA({start:u,stop:d,interval:o,availableRange:p,visibleRange:s,extend:n})??FR({start:u,stop:d,tickCount:r,minTickCount:l,maxTickCount:c,visibleRange:s,extend:n}),count:void 0}}else{if(a&&r===2)return{ticks:i,count:void 0};if(a&&r===1)return{ticks:i.slice(0,1),count:void 0}}return{ticks:FR({start:u,stop:d,tickCount:r,minTickCount:l,maxTickCount:c,visibleRange:s,extend:n}),count:void 0}}_tickFormatter({domain:e,ticks:i,specifier:s},n){return s!=null?tm(s):AA(i,e,n)}tickFormatter(e){return this._tickFormatter(e)}datumFormatter(e){return this._tickFormatter(e,1)}}}});function jR(t,e,i,s,n){const a=[],o=Math.ceil(t.length/e),r=Math.floor(o/2);let l=Math.floor(s[0]*t.length),c=Math.ceil(s[1]*t.length);n&&(l>o&&(l-=o),c<t.length-o&&(c+=o));for(let h=l;h<c;h+=1){const u=i?t.length-1-h:h;(o<=0||(u+r)%o===0)&&a.push(t[h])}return a}var lm,Ov=k({"packages/ag-charts-community/src/scale/ordinalTimeScale.ts"(){"use strict";XA(),im(),xu(),Nv(),lm=class l5 extends ja{constructor(){super(...arguments),this.type="ordinal-time",this._domain=[],this.isReversed=!1}static is(e){return e instanceof l5}set domain(e){e!==this._domain&&(this.invalid=!0,this._domain=e,this._bands=void 0,this.isReversed=e.length>0&&e[0]>e[e.length-1],this.sortedTimestamps=void 0,this.precomputedSteps=void 0)}get domain(){return this._domain}get bands(){return this._bands??(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}normalizeDomains(...e){const i=e.filter(s=>s.length>0);if(i.length===0)return{domain:[],animatable:!1};if(i.length===1){let s=i[0];const n=ZA(s);return n===-1?s=s.slice().reverse():n==null&&(s=YA(s.slice())),{domain:s,animatable:!0}}return{domain:YA(i.flat()),animatable:!0}}ticks({interval:e,maxTickCount:i},s=this.domain,n=[0,1],a=!1){if(!s.length)return;this.refresh();const{isReversed:o}=this;if(e==null)return{ticks:jR(s,i,o,n,a),count:void 0};const r=s[0].valueOf(),l=s[s.length-1].valueOf(),[c,h]=this.range,u=Math.abs(h-c);let d=JA({start:r,stop:l,interval:e,availableRange:u,visibleRange:n,extend:a})??jR(s,i,o,n,a),p=-1;return d=d.filter(g=>{const f=this.findInterval(g.valueOf()),x=f===p;return p=f,!x}),{ticks:d,count:void 0}}getSortedTimestamps(){let{sortedTimestamps:e}=this;return e==null&&(e??(e=this.bands.map(Ks)),this.sortedTimestamps=e),e}getPrecomputedSteps(){const{domain:e}=this;let{precomputedSteps:i}=this;const s=e.length<1e4?e.length:Math.ceil(e.length/16);if(i!=null||s<=1)return i;const n=this.getSortedTimestamps();i=new Int32Array(s);const a=n[0],r=n[n.length-1]-a,l=0,c=n.length-1;for(let h=0;h<i.length;h+=1)i[h]=this.findIntervalInRange(a+h/s*r,l,c);this.precomputedSteps=i}findIntervalInRange(e,i,s){const n=this.getSortedTimestamps();for(;i<=s;){const a=(i+s)/2|0;if(n[a]===e)return a;n[a]<e?i=a+1:s=a-1}return i}findInterval(e){const i=this.getPrecomputedSteps();let s,n;if(i==null)s=0,n=this.domain.length-1;else{const a=this.getSortedTimestamps(),o=a[0],r=a[a.length-1],l=Math.min((e-o)/(r-o)*i.length|0,i.length-1|0);s=i[l],n=l<i.length-2?i[l+1]:a.length-1}return this.findIntervalInRange(e,s,n)}datumFormatter(e){return this.tickFormatter(e)}findIndex(e){const i=this.getSortedTimestamps(),s=Number(e);if(!(s<i[0]))return this.findInterval(s)}}}}),Wa,GR=k({"packages/ag-charts-community/src/scene/shape/range.ts"(){"use strict";Ft(),za(),hc(),Wa=class extends ra{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.restoreOwnStyles()}computeBBox(){return new ut(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){const{ctx:e}=t;let{x1:i,y1:s,x2:n,y2:a}=this;i=this.align(i),s=this.align(s),n=this.align(n),a=this.align(a);const{fill:o,horizontal:r}=this,{globalAlpha:l}=e;o!=null&&(this.applyFillAndAlpha(e),e.beginPath(),e.moveTo(i,s),e.lineTo(n,s),e.lineTo(n,a),e.lineTo(i,a),e.closePath(),e.fill(),e.globalAlpha=l);const{stroke:c,strokeWidth:h,startLine:u,endLine:d}=this;if(!!((u||d)&&c&&h)){const{lineDash:g,lineDashOffset:f,lineCap:x,lineJoin:y}=this;this.applyStrokeAndAlpha(e),e.lineWidth=h,g&&e.setLineDash([...g]),f&&(e.lineDashOffset=f),x&&(e.lineCap=x),y&&(e.lineJoin=y),e.beginPath(),u&&(e.moveTo(i,s),r?e.lineTo(i,a):e.lineTo(n,s)),d&&(e.moveTo(n,a),r?e.lineTo(n,s):e.lineTo(i,a)),e.stroke(),e.globalAlpha=l}this.fillShadow?.markClean(),super.render(t)}},Wa.className="Range",Wa.defaultStyles={...ra.defaultStyles,strokeWidth:1},S([ot()],Wa.prototype,"x1",2),S([ot()],Wa.prototype,"y1",2),S([ot()],Wa.prototype,"x2",2),S([ot()],Wa.prototype,"y2",2),S([ot()],Wa.prototype,"startLine",2),S([ot()],Wa.prototype,"endLine",2),S([ot()],Wa.prototype,"horizontal",2)}});function C9(t){return t!=null&&Object.hasOwn(t,"toString")&&Ji(t.toString())}function L9(t){return t!=null&&Object.hasOwn(t,"valueOf")&&re(t.valueOf())}function _v(t){return re(t)||Wx(t)||L9(t)}function w9(t,e){return t!=null&&(!e||_v(t))}function tC(t){return C9(t)&&Object.hasOwn(t,"id")?t.id:t}var cm=k({"packages/ag-charts-community/src/util/value.ts"(){"use strict";R()}});function VR(t){switch(t.type){case"line":return t.value;case"range":return t.range}}function WR(t,e){if(t==null)return!1;const i=ye.is(e)||ja.is(e),s=n=>w9(n,i)&&!isNaN(e.convert(n));if(zt(t)){const[n,a]=t;return s(n)&&s(a)}else return s(t)}var HR=k({"packages/ag-charts-community/src/chart/crossline/crossLine.ts"(){"use strict";R(),Us(),xu(),cm()}}),UR,$R,KR,YR,ua,Ys,ZR=k({"packages/ag-charts-community/src/chart/crossline/cartesianCrossLine.ts"(){"use strict";R(),sm(),Ov(),Ft(),We(),GR(),Nn(),pi(),la(),mt(),mt(),HR(),UR={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},$R={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},KR={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},YR={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},ua=class extends wt{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}},S([I],ua.prototype,"enabled",2),S([I],ua.prototype,"text",2),S([I],ua.prototype,"fontStyle",2),S([I],ua.prototype,"fontWeight",2),S([I],ua.prototype,"fontSize",2),S([I],ua.prototype,"fontFamily",2),S([I],ua.prototype,"padding",2),S([I],ua.prototype,"color",2),S([I],ua.prototype,"position",2),S([I],ua.prototype,"rotation",2),S([I],ua.prototype,"parallel",2),Ys=class extends wt{constructor(){super(),this.id=ia(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new ua,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new Ot({name:this.id}),this.lineGroup=new Ot({name:this.id}),this.labelGroup=new Ot({name:this.id}),this.crossLineRange=new Wa,this.crossLineLabel=new su,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(t){const{enabled:e,type:i,data:s,scale:n}=this;if(!n||!e||!t||!WR(VR(this),n)||s==null){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateNodes();const a=i==="range";a!==this._isRange&&(a?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=a}calculateLayout(t,e){if(this.data=void 0,!t)return;const{type:i,range:s,value:n,scale:a,clippedRange:o,strokeWidth:r=0}=this;if(!a)return;const l=a.bandwidth??0,c=a.step??0,h=(e?-1:1)*(a instanceof Ip?(c-l)/2:0);let u,d,p,g;if(i==="line"){const x=l/2;u=a.convert(n)+x,d=NaN,p=a.convert(n,{clamp:!0})+x,g=NaN}else if(s){const[x,y]=s,b=x?.valueOf()===y?.valueOf()&&lm.is(a)?l/2+h:0;u=a.convert(x)+b,d=a.convert(y)+l,p=a.convert(x,{clamp:!0})+b-h,g=a.convert(y,{clamp:!0})+l+h}else return;p=uA(p,o),g=uA(g,o);const f=(u===p||d===g||p!==g)&&Math.abs(g-p)>0;f&&p>g&&([p,g]=[g,p],[u,d]=[d,u]),u-h>=p&&(u-=h),d+h<=g&&(d+=h),this.startLine=r>0&&u>=p&&u<=p+h,this.endLine=r>0&&d>=g-l-h&&d<=g,!(i==="range"&&!f&&!this.startLine&&!this.endLine)&&(this.data=[p,g],this.label.enabled===!1||this.label.text)}updateNodes(){const{position:t,data:[e,i]=[0,0],gridLength:s}=this,n=Number.isFinite(i)?i-e:0;let a;switch(t){case"top":case"bottom":a=new ut(e,t==="top"?0:-s,n,s);break;case"left":case"right":a=new ut(t==="left"?0:-s,e,s,n)}this.updateRangeNode(a);const{label:o}=this;o.enabled!==!1&&o.text&&(this.updateLabel(),this.positionLabel(a))}updateRangeNode(t){const{type:e,position:i,crossLineRange:s,startLine:n,endLine:a,fill:o,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u}=this;s.x1=t.x,s.x2=t.x+t.width,s.y1=t.y,s.y2=t.y+t.height,s.horizontal=i==="top"||i==="bottom",s.startLine=n,s.endLine=a,s.fill=e==="range"?o:void 0,s.fillOpacity=r??1,s.stroke=l,s.strokeWidth=c??1,s.strokeOpacity=h??1,s.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}get anchor(){const t=this.position==="left"||this.position==="right",e=this.type==="range",{position:i=this.defaultLabelPosition}=this.label;return e?(t?KR:YR)[i]:(t?UR:$R)[i]}positionLabel(t){const{crossLineLabel:e,label:i,anchor:s}=this;e.rotation=ji(i.rotation??0),e.textBaseline="middle",e.textAlign="center";const n=e.getBBox();if(!n)return;const{width:a,height:o}=n,r=i.padding+a/2,l=i.padding+o/2,c=t.x+t.width*(s.rangeH+1)/2-r*s.labelH,h=t.y+t.height*(s.rangeV+1)/2-l*s.labelV;e.x=c,e.y=h,e.rotationCenterX=c,e.rotationCenterY=h}computeLabelSize(){const{label:t}=this;if(t.enabled===!1||!t.text)return;const e=new su;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text,e.rotation=ji(t.rotation??0),e.textBaseline="middle",e.textAlign="center";const i=e.getBBox();if(!i)return;const{width:s,height:n}=i;return{width:s,height:n}}calculatePadding(t){const{label:e,anchor:i}=this,s=this.computeLabelSize();if(!s)return;const{width:n,height:a}=s,o=e.padding+n,r=e.padding+a,l=this.position==="left"||this.position==="right";l&&(i.rangeH===-1&&i.labelH===1?t.left=Math.max(t.left??0,o):i.rangeH===1&&i.labelH===-1&&(t.right=Math.max(t.right??0,o))),l||(i.rangeV===-1&&i.labelV===1?t.top=Math.max(t.top??0,r):i.rangeV===1&&i.labelV===-1&&(t.bottom=Math.max(t.bottom??0,r)))}},Ys.className="CrossLine",S([I],Ys.prototype,"enabled",2),S([I],Ys.prototype,"type",2),S([I],Ys.prototype,"range",2),S([I],Ys.prototype,"value",2),S([I],Ys.prototype,"defaultColorRange",2),S([I],Ys.prototype,"fill",2),S([I],Ys.prototype,"fillOpacity",2),S([I],Ys.prototype,"stroke",2),S([I],Ys.prototype,"strokeWidth",2),S([I],Ys.prototype,"strokeOpacity",2),S([I],Ys.prototype,"lineDash",2),S([I],Ys.prototype,"label",2)}});function T9(t,e,i=0,s=0){const n=Yr(t),a=!n&&s>=0&&s<=Math.PI?-1:1,o=!n&&i>=0&&i<=Math.PI?-1:1;let r=0;return e?r=a*Math.PI/2:o===-1&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:a,regularFlipFlag:o}}function N9(t,e){return t??(e?0:10)}function O9(t,e,i,s,n){if(t&&!e){const a=n?"hanging":"top";return i*s===-1?a:"bottom"}return"middle"}function XR(t,e,i,s,n){const a=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI,r=a||o?-1:1;if(t)if(e||i){if(s*r===-1)return"end"}else return"center";else if(s*n===-1)return"end";return"start"}function hm(t,e){if(t!=null){if(typeof t=="string")return t;if(Me(t)&&e!=null)return t[UA(e)]}}function _9(t,e,i,s,n,a,o){const r=hm(e.format,a)??(typeof e.format=="string"?e.format:void 0),l={domain:s,ticks:n,fractionDigits:0,specifier:r},c=t.tickFormatter(l),h=a?$A(a):void 0,u=hm(i?.format,h),d=u?t.tickFormatter({...l,specifier:u}):c,p=new Date(s[0]),g=new Date(s[s.length-1]),f=h?.range(new Date(s[0]),new Date(s[s.length-1]),{extend:!0});let x=0,y=0;if(c!=null){let b,v;f!=null&&f.length>1?(b=f[0],v=f[1]):(b=p,v=g);const M=Av(a,b,v,{limit:50});for(const D of M){const L=c(D),{width:A,height:C}=o.measureLines(L);x=Math.max(x,A),y=Math.max(y,C)}}if(d!=null&&f!=null)for(const b of f){const v=d(b),{width:M,height:D}=o.measureLines(v);x=Math.max(x,M),y=Math.max(y,D)}return{width:Math.ceil(x),height:Math.ceil(y)}}function E9(t,e,i,s){const n=[];for(const{tickLabel:a,translationY:o}of t){if(!a)continue;const{x:r,y:l}=i.transformBBox(new ut(e,o,0,0)),{width:c,height:h}=s.measureLines(a);n.push({point:{x:r,y:l},label:{text:a,width:c,height:h}})}return n}function P9({width:t,height:e,spacing:i},s,n){const a=[];for(const o of[0,i]){const{x:r,y:l}=n.transformBBox(new ut(s,o,0,0));a.push({point:{x:r,y:l},label:{text:void 0,width:t,height:e}})}return a}var Vi,Oo=k({"packages/ag-charts-community/src/chart/label.ts"(){"use strict";R(),Ft(),pi(),mt(),Hs(),Tp(),Vi=class extends wt{constructor(){super(...arguments),this.enabled=!0}getFont(){return Te.toFontString(this)}},S([I],Vi.prototype,"enabled",2),S([I],Vi.prototype,"color",2),S([I],Vi.prototype,"fontStyle",2),S([I],Vi.prototype,"fontWeight",2),S([I],Vi.prototype,"fontSize",2),S([I],Vi.prototype,"fontFamily",2),S([I],Vi.prototype,"formatter",2)}}),um,R9=k({"packages/ag-charts-community/src/chart/axis/axisGridLine.ts"(){"use strict";mt(),um=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}},S([I],um.prototype,"enabled",2),S([I],um.prototype,"width",2),S([I],um.prototype,"style",2)}}),vc,eC=k({"packages/ag-charts-community/src/chart/axis/axisInterval.ts"(){"use strict";mt(),mt(),vc=class extends wt{},S([I],vc.prototype,"step",2),S([I],vc.prototype,"values",2),S([I],vc.prototype,"minSpacing",2),S([I],vc.prototype,"maxSpacing",2)}}),Ii,dm=k({"packages/ag-charts-community/src/chart/axis/axisLabel.ts"(){"use strict";mt(),mt(),Hs(),Ii=class extends wt{constructor(){super(...arguments),this.enabled=!0,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}getFont(){return Te.toFontString(this)}},S([I],Ii.prototype,"enabled",2),S([I],Ii.prototype,"fontStyle",2),S([I],Ii.prototype,"fontWeight",2),S([I],Ii.prototype,"fontSize",2),S([I],Ii.prototype,"fontFamily",2),S([I],Ii.prototype,"spacing",2),S([I],Ii.prototype,"minSpacing",2),S([I],Ii.prototype,"color",2),S([I],Ii.prototype,"rotation",2),S([I],Ii.prototype,"avoidCollisions",2),S([I],Ii.prototype,"mirrored",2),S([I],Ii.prototype,"parallel",2),S([I],Ii.prototype,"itemStyler",2),S([I],Ii.prototype,"formatter",2),S([I],Ii.prototype,"format",2)}}),pm,B9=k({"packages/ag-charts-community/src/chart/axis/axisLine.ts"(){"use strict";mt(),pm=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}},S([I],pm.prototype,"enabled",2),S([I],pm.prototype,"width",2),S([I],pm.prototype,"stroke",2)}}),Sc,iC=k({"packages/ag-charts-community/src/chart/axis/axisTick.ts"(){"use strict";mt(),mt(),Sc=class extends wt{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}},S([I],Sc.prototype,"enabled",2),S([I],Sc.prototype,"width",2),S([I],Sc.prototype,"size",2),S([I],Sc.prototype,"stroke",2)}}),Ha,z9=k({"packages/ag-charts-community/src/chart/axis/axisTitle.ts"(){"use strict";mt(),mt(),nu(),Ha=class extends wt{constructor(){super(...arguments),this.caption=new _e,this.enabled=!1,this.spacing=_e.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}},S([I],Ha.prototype,"enabled",2),S([I],Ha.prototype,"text",2),S([I],Ha.prototype,"spacing",2),S([I],Ha.prototype,"fontStyle",2),S([I],Ha.prototype,"fontWeight",2),S([I],Ha.prototype,"fontSize",2),S([I],Ha.prototype,"fontFamily",2),S([I],Ha.prototype,"color",2),S([I],Ha.prototype,"wrapping",2),S([I],Ha.prototype,"formatter",2)}});function qR(t){const[e,i]=ns(t.range),s=Math.floor(e),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}function F9(t,e){return Math.abs(e-t)<tB?e:t>e?e+Pv:e-Pv}function QR(t){const{min:e,max:i}=t,s=l=>l<e||l>i;return{tick:{fromFn(l,c,h){let{x1:u,x2:d,y1:p,y2:g}=l,f=l.opacity;return(h==="added"||s(c.offset))&&({x1:u,x2:d,y1:p,y2:g}=c,f=0),{x1:u,x2:d,y1:p,y2:g,opacity:f,phase:Va[h]}},toFn(l,c,h){const{x1:u,x2:d,y1:p,y2:g}=c;let f=1;return h==="removed"&&(f=0),{x1:u,x2:d,y1:p,y2:g,opacity:f}},applyFn(l,c){l.setProperties(c),l.visible=!s(l.y)}},line:{fromFn(l,c){const{x1:h,x2:u,y1:d,y2:p}=l.previousDatum??c;return{x1:h,x2:u,y1:d,y2:p,phase:Va.updated}},toFn(l,c){const{x1:h,x2:u,y1:d,y2:p}=c;return{x1:h,x2:u,y1:d,y2:p}}},label:{fromFn(l,c,h){const u=l.previousDatum??c;let{x:d,y:p,rotationCenterX:g,rotationCenterY:f,rotation:x}=u,y=l.opacity;return h==="removed"||s(u.y)?x=c.rotation:(h==="added"||s(l.datum.y))&&({x:d,y:p,rotationCenterX:g,rotationCenterY:f,rotation:x}=c,y=0),{x:d,y:p,rotationCenterX:g,rotationCenterY:f,rotation:x,opacity:y,phase:Va[h]}},toFn(l,c,h){const{x:u,y:d,rotationCenterX:p,rotationCenterY:g}=c;let f=0,x=1;return h==="added"?f=c.rotation:h==="removed"?(x=0,f=c.rotation):f=F9(l.previousDatum?.rotation??c.rotation,c.rotation),{x:u,y:d,rotationCenterX:p,rotationCenterY:g,rotation:f,opacity:x,finish:{rotation:c.rotation}}}},group:{fromFn(l,c){const{translationX:h,translationY:u}=l;return{translationX:h,translationY:u,phase:Va.updated}},toFn(l,c){const{translationX:h,translationY:u}=c;return{translationX:h,translationY:u}}}}}function JR(){return(t,e)=>({translationX:e.translationX,translationY:e.translationY})}function Ev(){return(t,e)=>({x:e.x,y:e.y,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,rotation:e.rotation})}function sC(){return(t,e)=>{const{x1:i,x2:s,y1:n,y2:a}=e;return{x1:i,x2:s,y1:n,y2:a}}}var nC,Pv,tB,aC=k({"packages/ag-charts-community/src/chart/axis/axisUtil.ts"(){"use strict";Ls(),la(),nC=(t=>(t[t.TickAndDomain=0]="TickAndDomain",t[t.TicksOnly=1]="TicksOnly",t[t.Off=2]="Off",t))(nC||{}),Pv=Math.PI*2,tB=Pv/2}});function j9(t,e){if(!Me(t))return t;const i=UA(e),{millisecond:s,second:n,minute:a,hour:o,day:r,month:l,year:c}=t,h=ol[i],u=eB[i];if(h>=ol.year&&!lB.test(c)||h>=ol.month&&!rB.test(l)||h>=ol.day&&!oB.test(r))return u;let d;switch(i){case"year":return c;case"month":return`${l} ${c}`;case"day":return`${l} ${r} ${c}`;case"hour":d=o;break;case"minute":d=a;break;case"second":d=n;break;case"millisecond":d=s;break;default:return u}return h>=ol.hour&&!aB.test(d)||h>=ol.minute&&!nB.test(d)||h>=ol.second&&!sB.test(d)||h>=ol.millisecond&&!iB.test(d)?u:`${d} ${l} ${r} ${c}`}var eB,ol,iB,sB,nB,aB,oB,rB,lB,G9=k({"packages/ag-charts-community/src/chart/axis/timeFormatUtil.ts"(){"use strict";R(),Tp(),eB={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},ol={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},iB=/%[-_0]?L/,sB=/%[-_0]?S/,nB=/%[-_0]?M/,aB=/%[-_0]?[HI]/,oB=/^%[-_0]?[de]$/,rB=/^%[-_0]?[Bbm]$/,lB=/^%[-_0]?[Yy]$/}}),cB,oC,ur,Rv,rC=k({"packages/ag-charts-community/src/chart/axis/axis.ts"(){"use strict";R(),HA(),Us(),xu(),Cv(),Ft(),We(),al(),xc(),Nn(),hs(),gc(),la(),Rt(),mt(),un(),Tp(),ZR(),Oo(),R9(),eC(),dm(),B9(),iC(),z9(),G9(),cB=class extends tu(ws){},oC=(t=>(t[t.TickLines=0]="TickLines",t[t.AxisLine=1]="AxisLine",t[t.TickLabels=2]="TickLabels",t))(oC||{}),ur=class c5{constructor(e,i){this.moduleCtx=e,this.scale=i,this.id=ia(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new vc,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Ot({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new eu({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new eu({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new Ot({name:`${this.id}-Labels`,zIndex:9}),this.gridGroup=new ss({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new Ot({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new eu({name:`${this.id}-CrossLines-Range`,zIndex:4}),this.crossLineLineGroup=new eu({name:`${this.id}-CrossLines-Line`,zIndex:8}),this.crossLineLabelGroup=new eu({name:`${this.id}-CrossLines-Label`,zIndex:13}),this.tickLabelGroupSelection=gi.select(this.tickLabelGroup,su,!1),this._crossLines=[],this.line=new pm,this.tick=new Sc,this.gridLine=new um,this.label=this.createLabel(),this.defaultTickMinSpacing=c5.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.labelFormatter=void 0,this.datumFormatter=void 0,this.scaleFormatterParams=void 0,this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new Ha,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.animatable=!0,this._cachedUnzoomedInputDomain=void 0,this._cachedUnzoomedRangeExtent=NaN,this._cachedUnzoomedTickCount=0,this.moduleMap=new Iv,this.range=this.scale.range.slice(),this.crossLines.forEach(s=>this.initCrossLine(s))}get type(){return this.constructor.type??""}get labelNodes(){return this.tickLabelGroupSelection.nodes()}set crossLines(e){const{CrossLineConstructor:i}=this.constructor;this._crossLines.forEach(s=>this.detachCrossLine(s)),this._crossLines=e.map(s=>{const n=new i;return n.set(s),n}),this._crossLines.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}resetAnimation(e){}attachCrossLine(e){this.crossLineRangeGroup.appendChild(e.rangeGroup),this.crossLineLineGroup.appendChild(e.lineGroup),this.crossLineLabelGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineRangeGroup.removeChild(e.rangeGroup),this.crossLineLineGroup.removeChild(e.lineGroup),this.crossLineLabelGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}updateScale(){const{range:e,visibleRange:i,scale:s}=this,n=(e[1]-e[0])/(i[1]-i[0]),a=n*i[0],o=e[0]-a;s.range=[o,o+n],this.crossLines.forEach(r=>{r.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(e){this.crossLineRangeGroup.visible=e,this.crossLineLineGroup.visible=e,this.crossLineLabelGroup.visible=e}attachAxis(e){e.gridNode.appendChild(this.gridGroup),e.axisNode.appendChild(this.axisGroup),e.labelNode.appendChild(this.labelGroup),e.crossLineRangeNode.appendChild(this.crossLineRangeGroup),e.crossLineLineNode.appendChild(this.crossLineLineGroup),e.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(e){e.gridNode.removeChild(this.gridGroup),e.axisNode.removeChild(this.axisGroup),e.labelNode.removeChild(this.labelGroup),e.crossLineRangeNode.removeChild(this.crossLineRangeGroup),e.crossLineLineNode.removeChild(this.crossLineLineGroup),e.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(e){this.labelGroup.append(e)}inRange(e,i=0){const[s,n]=ns(this.range);return e>=s-i&&e<=n+i}getRangeOverflow(e){const{range:i,visibleRange:s}=this,n=(i[1]-i[0])/(s[1]-s[0]),[a,o]=ns([i[0]-n*s[0],i[0]-n*s[0]+n]);return e<a?e-a:e>o?e-o:0}defaultDatumFormatter(e,i){return tl(e,i+1)}defaultLabelFormatter(e,i){return tl(e,i)}onGridLengthChange(e,i){i^e&&this.onGridVisibilityChange(),this.crossLines.forEach(s=>this.initCrossLine(s))}onGridVisibilityChange(){}createLabel(){return new Ii}update(){this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(e,i,s=this.label){const n={color:s.color,spacing:s.spacing,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let a;s.itemStyler&&(a=this.callWithContext(s.itemStyler,{...e,...n}));const{color:o,fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,spacing:u}=Kt(a,i,n);return{fill:o,fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,spacing:u}}getTickSize(e=this.tick){return e.enabled?e.size:0}processData(){const{includeInvisibleDomains:e,boundSeries:i,direction:s}=this,a=(e?i:i.filter(o=>o.isEnabled())).map(o=>o.getDomain(s));this.setDomains(...a)}setDomains(...e){let i,s;e.length>0?{domain:i,animatable:s}=this.scale.normalizeDomains(...e):(i=[],s=!0),this.dataDomain=this.normaliseDataDomain(i),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=s}calculateLayout(e,i){const{scale:s,label:n,visibleRange:a,nice:o}=this;this.chartPadding=i,this.updateScale();const r=Dp(this.range),l=this.dataDomain.domain;let c,h;if(a[0]===0&&a[1]===1)c=void 0,h=void 0;else if(this._cachedUnzoomedInputDomain===l&&this._cachedUnzoomedRangeExtent===r)c=this.scale.domain,h=this._cachedUnzoomedTickCount;else{const D=this.calculateTickLayout(l,o?0:2,[0,1]);c=D.niceDomain,h=D.rawTickCount??0}let u;o?c==null?u=0:u=1:u=2;const{niceDomain:d,ticks:p,rawTickCount:g=0,tickDomain:f,fractionDigits:x,bbox:y}=this.calculateTickLayout(c??l,u,a,e);h??(h=g);const b=g!==0&&h!==0?{zoomed:g,unzoomed:h}:void 0,v=En.is(s)?s.interval:void 0;this.scale.domain=d,this._cachedUnzoomedInputDomain=l,this._cachedUnzoomedRangeExtent=r,this._cachedUnzoomedTickCount=h;const M=hm(v==null?n.format:j9(n.format,v),v);return this.labelFormatter=s.tickFormatter({domain:f,specifier:M,ticks:p,fractionDigits:x})??(D=>this.defaultLabelFormatter(D,x)),this.datumFormatter=s.datumFormatter({domain:f,specifier:M,ticks:p,fractionDigits:x})??(D=>this.defaultDatumFormatter(D,x)),this.scaleFormatterParams={domain:f,ticks:p,fractionDigits:x},this.layout.label={fractionDigits:x,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:b,bbox:y}}updateCrossLines(){const e=this.isAnySeriesActive();this.crossLines.forEach(i=>{i.update(e)})}updatePosition(){const{crossLineRangeGroup:e,crossLineLineGroup:i,crossLineLabelGroup:s,gridGroup:n,translation:a}=this,o=Math.floor(a.x),r=Math.floor(a.y);n.setProperties({translationX:o,translationY:r}),e.setProperties({translationX:o,translationY:r}),i.setProperties({translationX:o,translationY:r}),s.setProperties({translationX:o,translationY:r})}formatTick(e,i,s,n,a,o){const{labelFormatter:r,label:{formatter:l}}=this;let c;if(l){const h=this.getFormatterBoundSeries(),u=a?UA(a):void 0,d=a?k9(a):void 0;c=this.callWithContext(l,{value:e,index:i,domain:s,fractionDigits:n,unit:u,step:d,boundSeries:h})}else o?c=o(e):r&&(c=r(e));return String(c??e)}formatDatum(e){const{label:{formatter:i},datumFormatter:s=this.labelFormatter}=this;let n;if(i){const{domain:a}=this.scale,o=this.getFormatterBoundSeries();n=this.callWithContext(i,{value:e,index:NaN,domain:a,boundSeries:o})}else s?n=this.callWithContext(s,e):zt(e)&&(n=e.filter(Boolean).join(" - "));return String(n??e)}getScaleValueFormatter(e){const{scaleFormatterParams:i}=this;let s;try{e!=null&&i!=null&&(s=this.scale.tickFormatter({...i,specifier:e}))}catch{st.warnOnce(`the format string ${e} is invalid, ignoring.`)}return s??(s=n=>this.formatDatum(n)),s}getBBox(){return this.axisGroup.getBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,i,s,n){this.tickLineGroup.setClipRect(new ut(e,i,s,n))}clipGrid(e,i,s,n){this.gridGroup.setClipRect(new ut(e,i,s,n))}getFormatterBoundSeries(){const{direction:e}=this,i=[];for(const s of this.boundSeries){const n=s.getKeys(e),a=s.getNames(e);for(let o=0;o<n.length;o++)i.push({key:n[o],name:a[o]})}return i}getTitleFormatterParams(e){const{direction:i}=this,s=this.getFormatterBoundSeries();return{domain:e,direction:i,boundSeries:s,defaultValue:this.title?.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:ye.is(e)||ja.is(e),getCanvasBounds:()=>Ve.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,s)=>(s.getKeyProperties(this.direction).forEach(a=>i.add(a)),i),new Set),seriesIds:()=>this.boundSeries.map(i=>i.id),scaleValueFormatter:i=>this.getScaleValueFormatter(i),scaleInvert:i=>e.invert(i,!0),scaleInvertNearest:i=>e.invert(i,!0),attachLabel:i=>this.attachLabel(i),inRange:(i,s)=>this.inRange(i,s),getRangeOverflow:i=>this.getRangeOverflow(i)}}isReversed(){return this.reverse}callWithContext(e,...i){const{callbackCache:s,chartService:n}=this.moduleCtx;return s.call(this,n,e,...i)}},ur.defaultTickMinSpacing=50,ur.CrossLineConstructor=Ys,S([I],ur.prototype,"nice",2),S([I],ur.prototype,"reverse",2),S([I],ur.prototype,"keys",2),S([I],ur.prototype,"interval",2),S([I],ur.prototype,"title",2),S([dc((t,e,i)=>t.onGridLengthChange(e,i))],ur.prototype,"gridLength",2),Rv=ur}});function V9(t,e,i,s,n){let[a,o]=ns(e.map(Number));const r=Math.floor(i.unzoomed);if(r<=1){const[y,b]=W9(a,o),v=5*Math.pow(2,-Math.ceil(Math.log2(n[1]-n[0]))),{ticks:M}=om(y,b,v,void 0,void 0,n),D=[t.toDomain(y),t.toDomain(b)];return s&&D.reverse(),{domain:D,ticks:M}}if(a===o){const y=Math.floor(Math.log10(a)),b=Math.pow(10,y),v=Math.min(b,1),M=r-1;a-=v*Math.floor(M/2),o=a+v*M}let l=a,c=o;l=H9(l,c,r);const h=$9(l,c,r),u=r-1;c=l+u*h;const d=Math.floor(l/h)*h,p=Math.floor(c/h)*h;d<=a&&p>=o&&(l=d,c=p);const g=[t.toDomain(l),t.toDomain(c)];s&&g.reverse();const f=h*((i.unzoomed-1)/(i.zoomed-1)),x=U9(l,f,Math.floor(i.zoomed));return{domain:g,ticks:x}}function W9(t,e){let i=t,s=e,n=0;do{[i,s]=RR(i,s);const{ticks:a}=om(i,s,5);if(a.length%2===1)return[i,s];i-=1,s+=1}while(n++<10);return[t,e]}function H9(t,e,i){t=Math.floor(t);const s=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return Math.floor(t/a)*a}function U9(t,e,i){const s=Tf(e),n=Math.pow(10,s),a=[];for(let o=0;o<i;o++){const r=t+e*o;a.push(Math.round(r*n)/n)}return a}function $9(t,e,i){const s=i-1,n=(e-t)/s;return K9(n)}function K9(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i;return s>0&&s<=1?i:s>1&&s<=2?2*i:s>2&&s<=5?5*i:s>5&&s<=10?10*i:t}var Y9=k({"packages/ag-charts-community/src/util/secondaryAxisTicks.ts"(){"use strict";R(),la(),bc()}});function lC(){const t=new Map;return e=>{const i=t.get(e);return i?(t.set(e,i+1),`${e}_${i}`):(t.set(e,1),e)}}var cC=k({"packages/ag-charts-community/src/util/tempUtils.ts"(){"use strict"}});function Z9(t){if(t.length<2)return 1/0;let e=0,i=t[0].translationY;for(let s=1;s<t.length;s++){const n=t[s].translationY,a=Math.abs(n-i);e=Math.max(e,a),i=n}return e}var hC,hB=k({"packages/ag-charts-community/src/chart/axis/axisTickGenerator.ts"(){"use strict";R(),Us(),xu(),Ov(),Nv(),Cv(),F_(),uR(),pi(),XA(),la(),Y9(),cC(),Hs(),bc(),il(),Tp(),Oo(),hC=class{constructor(t){this.axis=t}estimateTickCount(t,e,i){const{scale:s,range:n,defaultTickMinSpacing:a}=this.axis,o=En.is(s)?En.defaultTickCount:ye.defaultTickCount;return BR(Dp(n),Dp(t),e,i,o,a)}filterTicks(t,e){const{minSpacing:i,maxSpacing:s}=this.axis.interval,a=i!=null||s!=null?Math.ceil(t.length/e):2,o=t.length%a?-1:0;return t.filter((r,l)=>(l+o)%a===0)}generateTicks({domain:t,primaryTickCount:e,visibleRange:i,niceMode:s,parallelFlipRotation:n,regularFlipRotation:a,labelX:o,sideFlag:r,removeOverflowLabels:l,removeOverflowThreshold:c=0}){const{scale:h,label:u,primaryLabel:d,interval:{minSpacing:p,maxSpacing:g}}=this.axis,{parallel:f,fontFamily:x,fontSize:y,fontStyle:b,fontWeight:v}=u,M=e!==void 0,{defaultRotation:D,configuredRotation:L,parallelFlipFlag:A,regularFlipFlag:C}=T9(u.rotation,f,a,n),{maxTickCount:T}=this.estimateTickCount(i,p,g),P=!(ye.is(h)||ja.is(h))||isNaN(T)?10:T;let O=XR(f,L,0,r,C);const B=O9(f,L,r,A,d==null),G=Te.toFontString({fontFamily:x,fontSize:y,fontStyle:b,fontWeight:v}),V=wo.getMeasurer({font:G}),W={fontFamily:x,fontSize:y,fontStyle:b,fontWeight:v,textBaseline:B,textAlign:O},H=u.enabled&&u.avoidCollisions,$=L+D,F=new ir,j=at=>{const ht=$+at;ir.updateTransformMatrix(F,1,1,ht,0,0)},z=({ticks:at},ht)=>(j(ht),E9(at,o,F,V)),Y=(at,ht)=>{const{niceDomain:dt,ticks:Mt,rawTicks:Ct,timeInterval:bt}=at;if(bt==null)return[];j(ht);const qt=Z9(Mt),{width:Jt,height:Vt}=_9(h,u,d,dt??t,Ct,bt,V);return P9({width:Jt,height:Vt,spacing:qt},o,F)},Z=(at,ht)=>{if(!H)return!1;const dt=L!==0||ht!==0,Mt=N9(u.minSpacing,dt);return cR(Y(at,ht),Mt)||cR(z(at,ht),Mt)};let X={tickDomain:[],ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0,niceDomain:void 0},tt=0,q=0,it=!0,Q=!1;for(;!Q&&it&&tt<=P;){q=0;for(const at of this.getTickStrategies({domain:t,niceMode:s,secondaryAxis:M,index:tt}))({tickData:X,index:tt,autoRotation:q,terminate:Q}=at({index:tt,tickData:X,textProps:W,terminate:Q,primaryTickCount:e,visibleRange:i,labelsOverlap(){return Z(X,q)}}));it=Z(X,q)}O=XR(f,L,q,r,C);const rt=L+q;if(l&&X.ticks.length>2){const at=z(X,q),ht=X.ticks.at(-1),dt=at.at(-1);if(ht!=null&&dt!=null&&ht.translationY+dt.label.width/2>this.axis.range[1]+c){ht.tickLabel=void 0;const Mt=X.ticks[0];Mt.translationY===0&&i[0]===0&&i[1]===1&&(Mt.tickLabel=void 0)}}return{tickData:X,rotation:rt,textBaseline:B,textAlign:O}}getTickStrategies({domain:t,niceMode:e,index:i,secondaryAxis:s}){const{scale:n,label:a,interval:o}=this.axis,{minSpacing:r}=o,l=ye.is(n)||ja.is(n),c=a.enabled&&a.avoidCollisions,h=!l&&i!==0&&c,u=a.autoRotate===!0&&a.rotation===void 0,d=[];let p;o.values?p=3:s?p=1:h?p=2:p=0;const g=({index:f,tickData:x,primaryTickCount:y,visibleRange:b,terminate:v})=>this.createTickData(t,e,b,y,p,f,x,v);if(d.push(g),!l&&r!=null){const f=({index:x,tickData:y,primaryTickCount:b,visibleRange:v,terminate:M})=>this.createTickData(t,e,v,b,2,x,y,M);d.push(f)}if(c&&u){const f=({index:x,tickData:y,labelsOverlap:b,terminate:v})=>({index:x,tickData:y,autoRotation:b()?Yr(a.autoRotateAngle):0,terminate:v});d.push(f)}return d}ticksEqual(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i+=1)if(t[i]?.valueOf()!==e[i]?.valueOf())return!1;return!0}createTickData(t,e,i,s,n,a,o,r){const{scale:l,interval:c}=this.axis,{step:h,values:u,minSpacing:d,maxSpacing:p}=c,{maxTickCount:g,minTickCount:f,tickCount:x}=this.estimateTickCount(i,d,p),y=ye.is(l)||ja.is(l),b=!y||isNaN(g)?10:g,v=A=>y?Math.max(x-A,f):g,M=o.rawTicks,D=h==null&&u==null&&v(a)>f&&(y||n===2),L={domain:t,niceMode:e,visibleRange:i,primaryTickCount:s,tickGenerationType:n,previousTicks:M,minTickCount:f,maxTickCount:g,tickCount:0};if(L.tickCount=v(a),o=this.getTicks(L),D&&this.ticksEqual(o.rawTicks,M)){let A=a,C=b;for(;A<=C;)a=(A+C)/2|0,L.tickCount=v(a),o=this.getTicks(L),this.ticksEqual(o.rawTicks,M)?A=a+1:C=a-1}return a+=1,r||(r=h!=null||u!=null),{tickData:o,index:a,autoRotation:0,terminate:r}}getTimeIntervalTicks(t,e,i){const s=$A(i);if(s==null)return;const{scale:n,reverse:a}=this.axis;if(!Op.is(n)&&!ja.is(n))return;a&&(t=[1-t[1],1-t[0]]);const o=Math.min(n.domain[0].valueOf(),n.domain[n.domain.length-1].valueOf()),r=Math.max(n.domain[0].valueOf(),n.domain[n.domain.length-1].valueOf());let[l,c]=ki.extent(new Date(o),new Date(r),t);l=s.floor(l),l.valueOf()>=o&&(l=s.previous(l)),c=s.ceil(c),c.valueOf()<=r&&(c=s.next(c));const h=s.range(l,c),u=wp(i),d=En.is(n)&&n.interval!=null&&wp(n.interval)<u;let p,g=new Set;if(Op.is(n)||En.is(n)){p=[];const f={...e,interval:i},x=!En.is(n)||d;for(let y=0;y<h.length-1;y+=1){const b=h[y],v=h[y+1],M=y===h.length-2,D=v.valueOf()-b.valueOf(),L=[Math.max((o-b.valueOf())/D,0),Math.min((r-b.valueOf())/D,1)],A=x?this.timeScaleTicks(f,[b,v],L,!0):n.ticks(f,[b,v],L,!0)?.ticks??[];if($O(A,P=>P.valueOf()<b.valueOf()),M||KO(A,P=>x?P.valueOf()+u>v.valueOf():P.valueOf()>=v.valueOf()),A.length===0)continue;const C=A[0],T=Lv(C,b);(x?T===0:T<=u)&&g.add(p.length),p.push(...A)}}else if(lm.is(n)){p=n.ticks(e,void 0,t,!0)?.ticks??[];let f=0;for(let x=0;x<p.length;x++){const y=p[x];let b=!1;for(;f<h.length&&Lv(h[f],y)<=0;)b=!0,f++;b&&g.add(x)}}else p=[];return(g.size===0||g.size===1&&g.has(0))&&(g=void 0),{ticks:p,tickCount:void 0,primaryTicksIndices:g,interpolate:d}}timeScaleTicks(t,e,i,s){const{interval:n}=t;if(n==null)return e;const a=e[0].valueOf(),o=e[1].valueOf();if(typeof n!="number")return Du(n).every(1,{snapTo:e[0]}).range(e[0],e[1],{visibleRange:i,extend:s});const r=[];for(let l=a;l<=o;l+=n){const c=new Date(l);r.push(c)}return r}getTicks({domain:t,niceMode:e,visibleRange:i,tickGenerationType:s,previousTicks:n,tickCount:a,minTickCount:o,maxTickCount:r,primaryTickCount:l}){const{axis:c}=this,{label:h,primaryLabel:u,range:d,scale:p,interval:g}=c,f=lC(),x={nice:e===0,interval:g.step,tickCount:a,minTickCount:o,maxTickCount:r},y={...x,nice:e===0||e===1};let b;s===1&&l!=null&&ye.is(p)&&(b=V9(p,t,l,c.reverse,i));const v=e===0?b?.domain??p.niceDomain(x,t):t;let M=v,D,L,A,C,T=!1;const N=p.domain;switch(p.domain=v,s){case 3:if(M=g.values,D=g.values,L=D.length,T=En.is(p),ye.is(p)){const[F,j]=ns(v.map(Number));D=D.filter(z=>Number(z)>=F&&Number(z)<=j).sort((z,Y)=>Number(z)-Number(Y))}break;case 1:if(b)D=b.ticks,L=b.ticks.length;else{const F=p.ticks(y,v,i);D=F?.ticks??[],L=F?.count}break;case 2:D=this.filterTicks(n,a),L=void 0;break;default:{if(v.length>0&&y.interval==null&&(En.is(p)||u!=null&&(Op.is(p)||lm.is(p)))){const z=v,Y=Math.min(z[0].valueOf(),z[z.length-1].valueOf()),Z=Math.max(z[0].valueOf(),z[z.length-1].valueOf());A=qA(Y,Z,a,o,r,{weekStart:u==null?To:void 0,primaryOnly:En.is(p)})}const F=En.is(p)?p.interval:void 0;F!=null&&A!=null&&wp(F)>wp(A)&&(A=F);const j=A?this.getTimeIntervalTicks(i,y,A):void 0;if(j)({ticks:D,tickCount:L,primaryTicksIndices:C,interpolate:T}=j);else{const z=En.is(p)&&A!=null?{...y,interval:y.interval??A}:y,Y=p.ticks(z,v,i);D=Y?.ticks??[],L=Y?.count}}}const P=D.reduce((F,j)=>Math.max(F,typeof j=="number"?Tf(j):0),0),O=hm(h.format,A)??(typeof h.format=="string"?h.format:void 0),B={domain:M,ticks:D,fractionDigits:P,specifier:O},G=p.tickFormatter(B),V=hm(u?.format,A?$A(A):void 0),W=V?p.tickFormatter({...B,specifier:V}):G,H=(p.bandwidth??0)/2,$=[];for(let F=0;F<D.length;F++){const j=D[F],z=p.convert(j,{interpolate:T})+H,Y=C?.has(F)??!1;if(d.length>0&&!c.inRange(z,.001))continue;const Z=Y&&u?.enabled===!0?W:G,X=h.enabled?c.formatTick(j,F,v,P,A,Z):"";$.push({tick:j,tickId:f(X),tickLabel:X,translationY:Math.floor(z),primary:Y})}return p.domain=N,{tickDomain:M,rawTicks:D,rawTickCount:L,fractionDigits:P,timeInterval:A,ticks:$,niceDomain:v}}}}}),Bv,X9=k({"packages/ag-charts-community/src/chart/axis/cartesianAxisLabel.ts"(){"use strict";mt(),dm(),Bv=class extends Ii{constructor(){super(...arguments),this.autoRotateAngle=335}},S([I],Bv.prototype,"autoRotate",2),S([I],Bv.prototype,"autoRotateAngle",2)}}),zv,_p,gm=k({"packages/ag-charts-community/src/chart/axis/cartesianAxis.ts"(){"use strict";R(),Ls(),Mu(),Us(),Ft(),We(),al(),xc(),Nn(),pi(),la(),mt(),am(),Hs(),nu(),rC(),hB(),aC(),X9(),zv=class h5 extends Rv{constructor(e,i){super(e,i),this.headingLabelGroup=this.axisGroup.appendChild(new ss({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new ss({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new ws({zIndex:1})),this.tickLineGroupSelection=gi.select(this.tickLineGroup,ws,!1),this.gridLineGroupSelection=gi.select(this.gridLineGroup,ws,!1),this.tempText=new su({debugDirty:!1}),this.tempCaption=new _e,this.tickGenerator=new hC(this),this.generatedTicks=void 0,this.animationManager=e.animationManager,this.animationState=new Lp("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node);let s;this.destroyFns.push(e.layoutManager.addListener("layout:complete",n=>{const a=[n.chart.width,n.chart.height];s!=null&&!Jo(a,s)&&this.animationState.transition("resize"),s=a}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(e){return e instanceof h5}get primaryLabel(){}get primaryTick(){}get horizontal(){return this.position==="top"||this.position==="bottom"}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}resetAnimation(e){e==="initial"&&this.animationState.transition("reset")}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new Bv}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(e,i){return this.updateDirection(),super.calculateLayout(e,i)}layoutCrossLines(){const e=this.isAnySeriesActive();this.crossLines.forEach(i=>{i.calculateLayout?.(e,this.reverse)})}calculateTickLayout(e,i,s,n){const a=this.label.getSideFlag(),o=this.horizontal?-.5*Math.PI:0,r=di(o),l=di(o-Math.PI/2),c=a*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(i===2&&this.label.enabled===!1&&this.tick.enabled===!1&&this.gridLine.enabled===!1){const{bbox:F,spacing:j}=this.tickBBox(e,[],[]);return this.generatedTicks={ticks:[],tickLines:[],gridLines:[],labels:[],spacing:j},{ticks:[],rawTickCount:0,tickDomain:e,niceDomain:e,fractionDigits:0,timeInterval:void 0,bbox:F}}const h=this.horizontal&&ye.is(this.scale),u=this.tickGenerator.generateTicks({domain:e,niceMode:i,visibleRange:s,primaryTickCount:n,parallelFlipRotation:r,regularFlipRotation:l,labelX:c,sideFlag:a,removeOverflowLabels:h,removeOverflowThreshold:this.chartPadding?.right}),{tickData:d}=u,{ticks:p,tickDomain:g,rawTicks:f,rawTickCount:x,fractionDigits:y,timeInterval:b,niceDomain:v=e}=d,M=p.map(F=>this.getTickLabelProps(F,u)),{position:D,horizontal:L,gridPadding:A,gridLength:C}=this,T=D==="bottom"||D==="right"?-1:1,N=A,P=T*C-A,{gridLine:O}=this,B=p.map(({tickId:F,translationY:j},z)=>{const[Y,Z,X,tt]=L?[j,N,j,P]:[N,j,P,j],{style:q,width:it}=O,{stroke:Q,lineDash:rt}=q[z%q.length]??{};return{tickId:F,offset:j,x1:Y,y1:Z,x2:X,y2:tt,stroke:Q,strokeWidth:it,lineDash:rt}}),{tick:G,primaryTick:V}=this,W=p.map(({primary:F,tickId:j,translationY:z})=>{const Y=F&&V?.enabled?V:G,Z=-T*this.getTickSize(Y),[X,tt,q,it]=L?[z,0,z,Z]:[0,z,Z,z],{stroke:Q,width:rt}=Y;return{tickId:j,offset:z,x1:X,y1:tt,x2:q,y2:it,stroke:Q,strokeWidth:rt,lineDash:void 0}}),{bbox:H,spacing:$}=this.tickBBox(g,p,M);return this.generatedTicks={ticks:p,gridLines:B,tickLines:W,labels:M,spacing:$},{ticks:f,rawTickCount:x,tickDomain:g,niceDomain:v,fractionDigits:y,timeInterval:b,bbox:H}}update(){this.updateDirection();const e=Array.from(this.tickLabelGroupSelection.nodes(),o=>o.datum.tickId);super.update(),this.tickLineGroup.visible=this.tick.enabled||(this.primaryTick?.enabled??!1),this.tickLabelGroup.visible=this.label.enabled||(this.primaryTick?.enabled??!1);const{generatedTicks:i}=this;if(this.updateTitle(this.scale.domain,i?.spacing??0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),this.generatedTicks){const{ticks:o}=this.generatedTicks;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const r=o.map(c=>c.tickId),l=QO(e,r);this.animationState.transition("update",l)}}const{enabled:s,stroke:n,width:a}=this.line;this.lineNode.setProperties({stroke:n,strokeWidth:s?a:0}),this.updateTickLines(),this.updateGridLines()}getAxisTransform(){return{translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.datum=e,this.tickLabelGroup.datum=e,this.lineNodeGroup.datum=e,this.headingLabelGroup.datum=e}getAxisLineCoordinates(){const{horizontal:e}=this,[i,s]=ns(this.range);return e?{x1:i,x2:s,y1:0,y2:0}:{x1:0,x2:0,y1:i,y2:s}}getTickLineBBox(e){const{position:i,primaryTick:s}=this,n=Math.max(this.getTickSize(),s?.enabled?this.getTickSize(s):0),{translationY:a}=e;switch(i){case"top":return new ut(a,-n,a,n);case"bottom":return new ut(a,0,a,n);case"left":return new ut(-n,a,n,a);case"right":return new ut(0,a,n,a)}}lineNodeBBox(){const{position:e,seriesAreaPadding:i}=this,{y1:s,y2:n}=this.getAxisLineCoordinates(),a=n-s;switch(e){case"top":return new ut(s,-i,a,i);case"bottom":return new ut(s,0,a,i);case"left":return new ut(-i,s,i,a);case"right":return new ut(0,s,i,a)}}titleBBox(e,i){const{tempCaption:s}=this;return s.node.setProperties(this.titleProps(s,e,i)),s.node.getBBox()}tickBBox(e,i,s){const{tick:n,primaryTick:a,label:o,primaryLabel:r,title:l,position:c,horizontal:h,seriesAreaPadding:u}=this,d=[];if(d.push(this.lineNodeBBox()),n.enabled||a?.enabled)for(const x of i)d.push(this.getTickLineBBox(x));const{tempText:p}=this;if(o.enabled)for(const x of s){if(!x.visible)continue;p.setProperties(x);const y=p.getBBox();y&&d.push(y)}if(r?.enabled&&r.format!=null&&c==="bottom"){const{fontSize:x,format:y}=r,v=(Me(y)?Object.values(y):[y]).reduce((A,C)=>Math.max(A,RO(C)),0),M=this.getTickSize(a??n)+r.spacing+u,D=2,L=v*Te.getLineHeight(x)+D;d.push(new ut(0,M,1,L))}let g=0;if(l.enabled){const x=ut.merge(d);g=h?x.height:x.width,d.push(this.titleBBox(e,g))}return{bbox:ut.merge(d),spacing:g}}titleProps(e,i,s){const{title:n}=this;if(!n.enabled)return e.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};e.enabled=!0,e.color=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.fontWeight=n.fontWeight,e.wrapping=n.wrapping;const a=(n.spacing??0)+s,{range:o}=this,r=(o[0]+o[1])/2;let l,c,h,u;switch(this.position){case"top":l=r,c=-a,h=0,u="bottom";break;case"bottom":l=r,c=a,h=0,u="top";break;case"left":l=-a,c=r,h=-.5*Math.PI,u="bottom";break;case"right":l=a,c=r,h=.5*Math.PI,u="bottom";break}const{formatter:d=g=>g.defaultValue}=n,p=this.callWithContext(d,this.getTitleFormatterParams(i));return e.text=p,{visible:!0,text:p,textBaseline:u,x:l,y:c,rotationCenterX:l,rotationCenterY:c,rotation:h}}getTickLabelProps(e,i){const{horizontal:s,primaryLabel:n,primaryTick:a,seriesAreaPadding:o,scale:r}=this,{tickId:l,tickLabel:c="",translationY:h,primary:u}=e,d=u&&n?.enabled?n:this.label,p=u&&a?.enabled?a:this.tick,{rotation:g,textBaseline:f,textAlign:x}=i,{range:y}=r,v=this.label.getSideFlag()*(this.getTickSize(p)+d.spacing+o),M=c!=="",D=s?h:v,L=s?-v:h;return{...this.getLabelStyles({value:c},void 0,d),tickId:l,rotation:g,text:c,textAlign:x,textBaseline:f,visible:M,x:D,y:L,rotationCenterX:D,rotationCenterY:L,range:y}}updateSelections(){if(!this.generatedTicks)return;const e=this.getAxisLineCoordinates(),{tickLines:i,gridLines:s,labels:n}=this.generatedTicks,a=o=>o.tickId;this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLine.enabled?s:[],void 0,a),this.tickLineGroupSelection.update(i,void 0,a),this.tickLabelGroupSelection.update(n,void 0,a)}updateGridLines(){this.gridLineGroupSelection.each((e,i)=>{e.stroke=i.stroke,e.strokeWidth=i.strokeWidth,e.lineDash=i.lineDash})}updateTickLines(){this.tickLineGroupSelection.each((e,i)=>{e.stroke=i.stroke,e.strokeWidth=i.strokeWidth,e.lineDash=i.lineDash})}updateTitle(e,i){const{caption:s}=this.title,n=this.titleProps(s,e,i);s.node.visible=n.visible,s.node.text=n.text,s.node.textBaseline=n.textBaseline,s.node.datum=n}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((e,i)=>{e.fill=i.fill,e.fontFamily=i.fontFamily,e.fontSize=i.fontSize,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.text=i.text,e.textBaseline=i.textBaseline,e.textAlign=i.textAlign??"center"})}animateReadyUpdate(e){const{animationManager:i}=this.moduleCtx,s=qR(this),n=QR(s);He(this.id,"axis-group",i,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],n.group),He(this.id,"line",i,[this.lineNode],n.line),He(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(a,o)=>o.tickId,e),He(this.id,"tick-labels",i,[this.tickLabelGroupSelection],n.label,(a,o)=>o.tickId,e),He(this.id,"title",i,[this.title.caption.node],n.label,(a,o)=>o.tickId,e)}resetSelectionNodes(){as([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],JR()),as([this.gridLineGroupSelection,this.tickLineGroupSelection],sC()),as([this.tickLabelGroupSelection],Ev()),as([this.title.caption.node],Ev()),as([this.lineNode],sC())}},S([I],zv.prototype,"thickness",2),S([I],zv.prototype,"position",2),_p=zv}});function q9(t){return typeof t=="string"&&uC.includes(t)}function Q9(t){const e=[],i=[],s=[...uC];for(const n of t)n instanceof _p&&(q9(n.position)?i.push(n.position):e.push(n));for(const n of e){let a;do a=s.pop();while(a&&i.includes(a));if(a==null)break;n.position=a}}var uC,J9=k({"packages/ag-charts-community/src/chart/mapping/prepareAxis.ts"(){"use strict";gm(),uC=["top","right","bottom","left"]}});function t8(t,e,i){const s=(c,h,u)=>{const d=[c];for(const p of uB)p in h&&h[p]!=null&&d.push(`${p}=${h[p]}`);return u?.seriesGrouping&&d.push(`seriesGrouping.groupId=${u?.seriesGrouping.groupId}`),d.join(";")},n=new Map;let a=0;for(const c of t){const h=s(c.type,c.properties,i?.[a]);n.has(h)||n.set(h,[]),n.get(h)?.push([c,a++])}const o=new Map;a=0;for(const c of e){const h=s(c.type,c,c);o.has(h)||o.set(h,[]),o.get(h)?.push([c,a++])}if(![...n.keys()].some(c=>o.has(c)))return{status:"no-overlap",oldKeys:n.keys(),newKeys:o.keys()};const l=[];for(const[c,h]of o.entries())for(const[u,d]of h){const p=n.get(c);if(p==null||p.length<1){l.push({opts:u,targetIdx:d,idx:d,status:"add"}),n.delete(c);continue}const[g,f]=p.shift(),x=i?.[f]??{},y=sr(x,u??{}),{groupIndex:b,stackIndex:v}=y?.seriesGrouping??{};b!=null||v!=null?l.push({opts:u,series:g,diff:y,targetIdx:d,idx:f,status:"series-grouping"}):y?l.push({opts:u,series:g,diff:y,targetIdx:d,idx:f,status:"update"}):l.push({opts:u,series:g,targetIdx:d,idx:f,status:"no-op"}),p.length===0&&n.delete(c)}for(const c of n.values())for(const[h,u]of c)l.push({series:h,idx:u,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}var uB,e8=k({"packages/ag-charts-community/src/chart/mapping/prepareSeries.ts"(){"use strict";Ln(),uB=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"]}});function rl(t){const{series:e}=t;return e?.[0]?.type??"line"}function dC(t){const e=rl(t);return ze.isCartesian(e)||h9(e)}function dB(t){const e=rl(t);return ze.isPolar(e)||u9(e)}function pB(t){const e=rl(t);return ze.isHierarchy(e)||d9(e)}function gB(t){const e=rl(t);return ze.isTopology(e)||p9(e)}function fB(t){const e=rl(t);return ze.isFlowProportion(e)||g9(e)}function pC(t){const e=rl(t);return ze.isStandalone(e)||f9(e)}function gC(t){const e=rl(t);return ze.isGauge(e)||m9(e)}function i8(t){const e=rl(t);return dB(t)&&e!=="pie"&&e!=="donut"}var ku=k({"packages/ag-charts-community/src/chart/mapping/types.ts"(){"use strict";nm(),mv()}}),mB,s8=k({"packages/ag-charts-community/src/chart/modulesManager.ts"(){"use strict";HA(),mt(),mB=class extends Iv{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&hp(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())t.type==="legend"&&(yield{legendType:t.identifier,legend:e})}}}}),Fv,fC,Mc,mC=k({"packages/ag-charts-community/src/chart/overlay/overlay.ts"(){"use strict";R(),mt(),mt(),Fv="ag-charts-overlay",fC="ag-charts-dark-overlay",Mc=class extends wt{constructor(t,e){super(),this.className=t,this.defaultMessageId=e,this.enabled=!0}getText(t){return t.t(this.text??this.defaultMessageId)}getElement(t,e,i){if(this.content?.remove(),this.focusBox=i,this.renderer){const s=this.renderer();if(s instanceof HTMLElement)this.content=s;else{const n=Bt("div");n.innerHTML=s;const{firstElementChild:a}=n;a instanceof HTMLElement&&n.childElementCount===1?this.content=a:this.content=n}}else{const s=Bt("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});s.innerText=this.getText(e),this.content=s,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(n){s.style.opacity=String(n)},onStop(){s.style.opacity="1"}})}return this.content}removeElement(t=()=>this.content?.remove(),e){if(this.content){if(e){const{content:i}=this;e.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){t?.()}})}else t?.();this.content=void 0,this.focusBox=void 0}}},S([I],Mc.prototype,"enabled",2),S([I],Mc.prototype,"text",2),S([I],Mc.prototype,"renderer",2)}}),Iu,n8=k({"packages/ag-charts-community/src/chart/overlay/chartOverlays.ts"(){"use strict";mt(),mt(),mC(),Iu=class extends wt{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new Mc("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new Mc("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new Mc("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new Mc("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(t){for(const e of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(e.focusBox!==void 0)return{text:e.getText(t),rect:e.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}},S([I],Iu.prototype,"darkTheme",2),S([I],Iu.prototype,"loading",2),S([I],Iu.prototype,"noData",2),S([I],Iu.prototype,"noVisibleSeries",2),S([I],Iu.prototype,"unsupportedBrowser",2)}});function a8(t,e){const{animationDuration:i}=Mp.add,s=i*e,n=Bt("div",`${Fv}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${s}ms linear 50ms both`}),a=Bt("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Bt("p",{marginTop:"1em"});o.innerText=t;const r=Bt("div",`${Fv}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=Bt("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(l,a,o,r),n}var o8=k({"packages/ag-charts-community/src/chart/overlay/loadingSpinner.ts"(){"use strict";R(),uu(),mC()}}),yC,xC,r8=k({"packages/ag-charts-community/src/chart/series/seriesZIndexMap.ts"(){"use strict";yC=(t=>(t[t.BACKGROUND=0]="BACKGROUND",t[t.ANY_CONTENT=1]="ANY_CONTENT",t))(yC||{}),xC=(t=>(t[t.FOREGROUND=0]="FOREGROUND",t[t.HIGHLIGHT=1]="HIGHLIGHT",t[t.LABEL=2]="LABEL",t))(xC||{})}});function Au(t,e,i,s){if(Ao(t))return{type:"gradient",gradient:t.gradient??e.gradient,colorStops:t.colorStops??e.colorStops,bounds:t.bounds??e.bounds,rotation:t.rotation??e.rotation,reverse:t.reverse??e.reverse};if(Jh(t)){const n=t.pattern??i.pattern;let a=t.strokeWidth;n==="backward-slanted-lines"||n==="forward-slanted-lines"||n==="horizontal-lines"||n==="vertical-lines"?a??(a=i.strokeWidth):a??(a=0);const o=t.width??t.height??i.width,r=t.height??t.width??i.height;return{type:"pattern",pattern:n,width:o,height:r,path:t.path,padding:t.padding??i.padding,fill:t.fill??i.fill,fillOpacity:t.fillOpacity??i.fillOpacity,backgroundFill:t.backgroundFill??i.backgroundFill,backgroundFillOpacity:t.backgroundFillOpacity??i.backgroundFillOpacity,stroke:t.stroke??i.stroke,strokeOpacity:t.strokeOpacity??i.strokeOpacity,strokeWidth:a,rotation:t.rotation??i.rotation,scale:t.scale??i.scale}}return pp(t)?{type:"image",url:t.url,width:t.width,height:t.height,backgroundFill:t.backgroundFill??s.backgroundFill,backgroundFillOpacity:t.backgroundFillOpacity??s.backgroundFillOpacity,rotation:t.rotation??s.rotation,repeat:t.repeat??s.repeat,fit:t.fit??s.fit}:t}function dr(t,e,i,s){return!Ao(t?.fill)&&!Jh(t?.fill)&&!pp(t?.fill)?t:{...t,fill:Au(t.fill,e,i,s)}}function jv(t,e,i,s){i==null||!Ao(e)||e.bounds==null||e.bounds==="item"?t.fillBBox=void 0:t.fillBBox=i[e.bounds],t.fillParams=s}function Cu(t,e,i,s,n){const a=i?.fill??e.fill;t.fill=a,jv(t,i?.fill??e.fill,s,n),t.fillOpacity=i?.fillOpacity??e.fillOpacity??1,t.stroke=i?.stroke??e.stroke,t.strokeOpacity=i?.strokeOpacity??e.strokeOpacity??1,t.strokeWidth=i?.strokeWidth??e.strokeWidth??0,t.lineDash=i?.lineDash??e.lineDash,t.lineDashOffset=i?.lineDashOffset??e.lineDashOffset??0}var ll=k({"packages/ag-charts-community/src/chart/series/shapeUtil.ts"(){"use strict";gp()}}),bC,yB,xB,Ep,Gv,fm,Lu=k({"packages/ag-charts-community/src/chart/series/series.ts"(){"use strict";R(),HA(),We(),ov(),gc(),Ln(),pc(),fE(),rb(),Rt(),aE(),un(),ll(),bC=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_NODE=1]="NEAREST_NODE",t[t.AXIS_ALIGNED=2]="AXIS_ALIGNED",t))(bC||{}),yB=.25,xB=.125,Ep=class{constructor(t,e,i,s){this.type=t,this.event=e,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=s.id}preventDefault(){this.defaultPrevented=!0}},Gv=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},fm=class extends gI{constructor(t){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=Ep,this.internalId=ia(this),this.contentGroup=new ss({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new ss({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new ss({name:`${this.internalId}-annotation`}),this.labelGroup=new ss({name:`${this.internalId}-series-labels`}),this.axes={},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new Iv,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new Qr,this._pickNodeCache=new Fb;const{moduleCtx:e,pickModes:i,directionKeys:s={},directionNames:n={},canHaveAxes:a=!1,usesPlacedLabels:o=!1}=t;this.ctx=e,this.directionKeys=s,this.directionNames=n,this.canHaveAxes=a,this.usesPlacedLabels=o,this.highlightGroup=new ss({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new Ot({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new Ot({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(t){this.properties.visible=t,this.ctx.legendManager.toggleItem(t,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:n}=this;t&&this.ctx.seriesStateManager.deregisterSeries(this),e&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:n,seriesGrouping:e}),this.fireEvent(new Gv(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(t,e,i){t.appendChild(this.contentGroup),e.appendChild(this.highlightGroup),e.appendChild(this.labelGroup),i?.appendChild(this.annotationGroup)}detachSeries(t,e,i){t?.removeChild(this.contentGroup),e.removeChild(this.highlightGroup),e.removeChild(this.labelGroup),i?.removeChild(this.annotationGroup)}setSeriesIndex(t){return t===this._declarationOrder?!1:(this._declarationOrder=t,this.contentGroup.zIndex=[1,t,0],this.highlightGroup.zIndex=[1,t,1],this.labelGroup.zIndex=[1,t,2],this.annotationGroup.zIndex=t,!0)}renderToOffscreenCanvas(){return!1}addEventListener(t,e){return super.addEventListener(t,e)}removeEventListener(t,e){return super.removeEventListener(t,e)}hasEventListener(t){return super.hasEventListener(t)}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}updatedDomains(){}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=e?.[i],n=[];if(!s)return n;const a=(...o)=>{for(const r of o)Array.isArray(r)?a(...r):typeof r=="object"?a(...Object.values(r)):n.push(r)};return a(...s.map(o=>this.properties[o])),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){return this.directionKeys[this.resolveKeyDirection(t)]??[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules(s=>s.getDomain(t)).flat();return i.length!==0?e.concat(i):e}getRange(t,e){return this.getSeriesRange(t,e)}getVisibleItems(t,e,i){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return e}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===void 0)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){const t=this.ctx.highlightManager?.getActiveHighlight()?.series;return t==null?0:t!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(t=>t.getTooltipParams()).reduce((t,e)=>Object.assign(t,e),{})}pickNodes(t,e,i=!1){const{pickModes:s,pickModeAxis:n,visible:a,contentGroup:o}=this;if(!a||!o.visible||e==="highlight"&&!this.properties.highlight.enabled||e==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let r=1/0;if(e==="tooltip"||e==="highlight-tooltip"){const{tooltip:d}=this.properties;r=typeof d.range=="number"?d.range:1/0,i||(i=d.range==="exact")}else if(e==="event"||e==="context-menu"){const{nodeClickRange:d}=this.properties;r=typeof d=="number"?d:1/0,i||(i=d==="exact")}const l=s.filter(d=>!i||d===0),{x:c,y:h}=t,u=JSON.stringify({x:c,y:h,maxDistance:r,selectedPickModes:l});if(this._pickNodeCache.has(u))return this._pickNodeCache.get(u);for(const d of l){let p;switch(d){case 0:{const g=this.pickNodesExactShape(t);p=g.length===0?void 0:{datums:g,distance:0};break}case 1:{const g=this.pickNodeClosestDatum(t),f=g?.distance===0?this.pickNodesExactShape(t):void 0;f!=null&&f.length!==0?p={datums:f,distance:0}:g?p={datums:[g.datum],distance:g.distance}:p=void 0;break}case 2:{const g=n!=null?this.pickNodeMainAxisFirst(t,n==="main-category"):void 0;p=g!=null?{datums:[g.datum],distance:g.distance}:void 0;break}}if(p&&p.distance<=r)return this._pickNodeCache.set(u,{pickMode:d,datums:p.datums,distance:p.distance})}return this._pickNodeCache.set(u,void 0)}pickNodesExactShape(t){const e=[];for(const i of this.contentGroup.pickNodes(t.x,t.y)){const s=i.closestDatum();s!=null&&s.missing!==!0&&e.push(s)}return e}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){const i=ob(t.x,t.y,e),s=i.nearest?.closestDatum();if(s!=null&&s.missing!==!0)return{datum:s,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(t){}fireNodeClickEvent(t,e){const i=new this.NodeEvent("seriesNodeClick",t,e,this);return this.fireEvent(i),!i.defaultPrevented}fireNodeDoubleClickEvent(t,e){const i=new this.NodeEvent("seriesNodeDoubleClick",t,e,this);return this.fireEvent(i),!i.defaultPrevented}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}onLegendInitialState(t,e){const{visible:i=!0,itemId:s,legendItemName:n}=e??{};this.toggleSeriesItem(i,t,s,n)}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendType:n}=t,a="legendItemName"in this.properties?this.properties.legendItemName:void 0,o="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,r=a!=null&&a===t.legendItemName;(s.id===this.id||r||o!=null)&&this.toggleSeriesItem(e,n,i,a,t)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n,legendType:a}=t,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=o!=null&&o===t.legendItemName;s.id===this.id||l||r!=null?this.toggleSeriesItem(!0,a,i,o,t):e&&n===1?this.toggleSeriesItem(!0,a,void 0,o):this.toggleSeriesItem(!1,a,void 0,o)}toggleSeriesItem(t,e,i,s,n){const a=this.id;(t||e!=="category")&&(this.visible=t),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const o={type:"seriesVisibilityChange",seriesId:a,itemId:i,legendItemName:n?.legendItemName??s,visible:t};this.fireEvent(o),this.ctx.legendManager.toggleItem(t,a,i,s)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(t,e,i=tl){return t.formatter?this.cachedCallWithContext(t.formatter,{seriesId:this.id,...e})??this.callWithContext(i,e.value):this.callWithContext(i,e.value)}getMarkerStyle(t,e,i,s=!1,n=t.size??0,a){const{itemStyler:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=t;let u=dr(Kt({size:n},a,t.getStyle()),r,l,c);if(o&&i){const d=this.cachedCallWithContext(o,{seriesId:this.id,...u,...i,highlighted:s,datum:e});u=dr(Kt(d,u),r,l,c)}return u}updateMarkerStyle(t,e,i,s,n,a,o,r,{applyTranslation:l=!0,selected:c=!0}={}){const h=this.getMarkerStyle(t,i,n,a,s?.size,o),{shape:u,size:d}=h,p=this.visible&&d>0&&s&&!isNaN(s.x)&&!isNaN(s.y);if(Cu(e,h,void 0,r),l?e.setProperties({visible:p,shape:u,size:d,x:s?.x,y:s?.y,scalingCenterX:s?.x,scalingCenterY:s?.y}):e.setProperties({visible:p,shape:u,size:d}),c||(e.fillOpacity*=yB,e.strokeOpacity*=xB),typeof t.shape=="function"&&!e.dirtyPath){e.path.clear(!0),e.updatePath(),e.checkPathDirty();const g=e.getBBox();if(s!==void 0&&g.isFinite()){const f=g.computeCenter(),[x,y]=["x","y"].map(b=>(h.strokeWidth??0)+Math.abs(f[b]-s[b]));s.focusSize=Math.max(g.width+x,g.height+y)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=t??{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,n=sr(this.nodeDataDependencies,s)!=null;return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(t){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(t,e){const{datumCallbackCache:i}=this,s=i.get(t);if(s!=null)return s;try{const n=e();return i.set(t,n),n}catch(n){st.error(String(n))}}cachedCallWithContext(t,...e){return this.ctx.callbackCache.call(this.properties,this.ctx.chartService,t,...e)}callWithContext(t,...e){return av(this.properties,this.ctx.chartService,t,e)}formatTooltipWithContext(t,e,i){return t.formatTooltip(this.properties,this.ctx.chartService,e,i)}},S([wn({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],fm.prototype,"seriesGrouping",2)}}),Zs,_o=k({"packages/ag-charts-community/src/scene/shape/path.ts"(){"use strict";R(),aa(),Ib(),hc(),Zs=class extends ra{constructor(){super(...arguments),this.path=new Qh,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}onChangeDetection(t){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(t))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)}distanceSquared(t,e){return this.distanceSquaredTransformedPoint(t,e)}svgPathData(t){return this.updatePathIfDirty(),this.path.toSVG(t)}distanceSquaredTransformedPoint(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)?0:this.path.distanceSquared(t,e)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(t){return t.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=t.devicePixelRatio,this.updatePathIfDirty(),super.preRender(t,this.path.commands.length)}render(t){const{ctx:e}=t;if(this.clip&&!isNaN(this._clipX)&&!isNaN(this._clipY)){e.save();const i=this.strokeWidth/2;this._clipPath??(this._clipPath=new Qh),this._clipPath.clear(),this._clipPath.rect(-i,-i,this._clipX+i,this._clipY+i+i),e.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(e),e.restore()}else this._clipPath=void 0,this.drawPath(e);this.fillShadow?.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}toSVG(){if(!this.visible)return;const t=ui("path");t.setAttribute("d",this.svgPathData());const e=this.applySvgFillAttributes(t,[]);return this.applySvgStrokeAttributes(t),{elements:[t],defs:e}}},Zs.className="Path",S([ot()],Zs.prototype,"clip",2),S([ot()],Zs.prototype,"clipX",1),S([ot()],Zs.prototype,"clipY",1)}}),bB,l8=k({"packages/ag-charts-community/src/dom/focusIndicator.ts"(){"use strict";R(),Ft(),_o(),hs(),iu(),bB=class{constructor(t){this.swapChain=t,this.hasBeenActivated=!1,this.div=Bt("div"),this.svg=ui("svg"),this.outerPath=ui("path"),this.innerPath=ui("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=Bt("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",e=>this.onSwap(e))}clear(){}update(t,e,i){if(e!=null)if(t instanceof Zs){const s=(a,o)=>{let{x:r,y:l}=Ve.toCanvasPoint(t,a,o);return r-=e.x??0,l-=e.y??0,{x:r,y:l}},n=t.svgPathData(s);this.outerPath.setAttribute("d",n),this.innerPath.setAttribute("d",n),this.show(this.svg)}else{let s;if(i){const n=Math.max(t.x-e.x,0),a=Math.max(t.y-e.y,0),o=Math.min(t.x+t.width-e.x,e.width),r=Math.min(t.y+t.height-e.y,e.height);s=new ut(n,a,o-n,r-a)}else s=new ut(t.x-e.x,t.y-e.y,t.width,t.height);wb(this.div,s),this.show(this.div)}}onSwap(t){t!==this.element.parentElement&&(this.element.remove(),t.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(t){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(t)}overrideFocusVisible(t){this.focusVisible=t;const e={true:"1",false:"0",undefined:""};this.element.parentElement?.style.setProperty("opacity",e[`${t}`])}isFocusVisible(t=!1){if(!t&&!this.hasBeenActivated)return!1;const e=this.element.parentElement;return e!=null&&be().getComputedStyle(e).opacity==="1"}}}}),vB,c8=k({"packages/ag-charts-community/src/dom/focusSwapChain.ts"(){"use strict";R(),vB=class{constructor(t,e,i){this.label1=t,this.label2=e,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=s=>(ko(s.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",s)),this.onFocus=s=>(ko(s.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",s)),Ht(this.label1,"id",Nf()),Ht(this.label2,"id",Nf()),ko(this.label1,"display","none"),ko(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),Ht(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(t){const e=Bt("div");return e.role=t,e.className="ag-charts-swapchain",e.addEventListener("blur",this.onBlur),e.addEventListener("focus",this.onFocus),e}destroy(){for(const t of[this.activeAnnouncer,this.inactiveAnnouncer])t.removeEventListener("blur",this.onBlur),t.removeEventListener("focus",this.onFocus),t.remove()}focus(t){this.focusOptions=t,this.activeAnnouncer.focus(t),this.focusOptions=void 0}update(t){this.skipDispatch=!0,this.swap(t),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(t,e){this.listeners[t].push(e),t==="swap"&&e(this.activeAnnouncer)}dispatch(t,e){t==="focus"?this.hasFocus=!0:t==="blur"&&(this.hasFocus=!1),this.listeners[t].forEach(i=>i(e))}swap(t){const e=this.activeAnnouncer.tabIndex;this.label2.textContent=t,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],Wh(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),Wh(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:e}),this.dispatch("swap",this.activeAnnouncer)}}}});function h8(t,e){for(const i of e)if("code"in i){if(i.code===t.code)return!0}else if(i.key===t.key&&(i.shift===void 0||i.shift===t.shiftKey)&&(i.ctrlOrMeta===void 0||i.ctrlOrMeta===t.ctrlKey||i.ctrlOrMeta===t.metaKey))return!0;return!1}function u8(t){for(const[e,{activatesFocusIndicator:i=!0,bindings:s}]of Ba(SB))if(h8(t,s))return{name:e,activatesFocusIndicator:i}}var SB,d8=k({"packages/ag-charts-community/src/chart/interaction/keyBindings.ts"(){"use strict";R(),SB={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}}}});function p8(t,e,i){const s=aA(t,i.datum,i.movedBounds);if(s!=null)return{x:s.canvasX,y:s.canvasY};const n=i.bounds;if(n!=null){if(n instanceof ut){const{x:a,y:o}=n.computeCenter();return{x:e.x+a,y:e.y+o}}return Ve.toCanvas(n).computeCenter()}}function g8({bounds:t}){return t instanceof ut?t:t!=null?Ve.toCanvas(t):ut.NaN}function f8(t,e,i){const{x:s,y:n}=p8(t,e,i)??{};if(s!==void 0&&n!==void 0)return{type:"keyboard",canvasX:s,canvasY:n}}var m8=k({"packages/ag-charts-community/src/chart/keyboardUtil.ts"(){"use strict";Ft(),hs(),du()}});function vC(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");st.warnOnce(i)}}function MB(t,e){const i=vC(),s=e?.default;return $h((n,a,o)=>(o!==s&&i(a.toString(),t),o))}function y8(t,e){const i=vC();return $h((s,n,a)=>(a!==s[t]&&(i(n.toString(),`Use [${t}] instead.`),Hk(s,t,e?e(a):a)),hb),(s,n)=>(i(n.toString(),`Use [${t}] instead.`),op(s,t)))}var DB=k({"packages/ag-charts-community/src/util/deprecation.ts"(){"use strict";R(),ap(),Rt()}});function kB(t,e,i,s){let{top:n,right:a,bottom:o,left:r,width:l,height:c}=s;return r!=null?l!=null?a=i.width-r+l:a!=null&&(l=i.width-r-a):a!=null&&l!=null&&(r=i.width-a-l),n!=null?c!=null?o=i.height-n-c:o!=null&&(c=i.height-o-n):o!=null&&c!=null&&(n=i.height-o-c),l==null?c==null?(l=t,c=e):l=Math.ceil(t*c/e):c==null&&(c=Math.ceil(e*l/t)),r==null&&(a==null?r=Math.floor((i.width-l)/2):r=i.width-a-l),n==null&&(o==null?n=Math.floor((i.height-c)/2):n=i.height-c-o),{x:r,y:n,width:l,height:c}}var IB=k({"packages/ag-charts-community/src/util/placement.ts"(){"use strict"}}),SC,MC,DC,AB,CB,x8=k({"packages/ag-charts-community/src/chart/tooltip/springAnimation.ts"(){"use strict";pc(),SC=.1,MC=200,DC=12,AB=.5,CB=class extends Qr{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(t,e){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=t,this.y=e,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=t,this.y1=e,this.t0=Date.now(),this.animationFrameHandle==null&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:t,y1:e,t0:i}=this,s=Date.now(),n=s-i;this.t0=s;const a=.001,o=Math.ceil(n/(a*1e3))|0;let{x:r,y:l,vx:c,vy:h}=this;for(let u=0;u<o;u+=1){const d=r-t,p=l-e,g=-(MC*d+DC*c)/SC,f=-(MC*p+DC*h)/SC;c+=g*a,h+=f*a,r+=c*a,l+=h*a}Math.hypot(r-t,l-e)<AB?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=r,this.y=l,this.vx=c,this.vy=h,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}}}});function mm(t){return t===""?"":(ym??(ym=Bt("div")),ym.textContent=String(t),ym.innerHTML.replace(/\n/g,"<br>"))}var ym,b8=k({"packages/ag-charts-community/src/util/sanitize.ts"(){"use strict";R(),ym=null}});function xm(t,e){const{path:i,size:s}=t,{x:n,y:a}=t;i.clear();let o=!1;for(const[r,l]of e){const c=n+(r-.5)*s,h=a+(l-.5)*s;o?i.lineTo(c,h):i.moveTo(c,h),o=!0}i.closePath()}var LB,wB=k({"packages/ag-charts-community/src/chart/marker/shapes.ts"(){"use strict";Ab(),pi(),LB={circle({path:t,x:e,y:i,size:s}){const n=s/2;t.arc(e,i,n,0,Math.PI*2),t.closePath()},cross(t){xm(t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(t){xm(t,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:t,x:e,y:i,size:s}){const n=s/4;i=i+n/2,t.arc(e-n,i-n,n,ji(130),ji(330)),t.arc(e+n,i-n,n,ji(220),ji(50)),t.lineTo(e,i+n),t.closePath()},pin({path:t,x:e,y:i,size:s}){t.moveTo(e+(.15625-.5)*s,i+(.34375-.5)*s),t.cubicCurveTo(e+(.15625-.5)*s,i+(.151491-.5)*s,e+(.307741-.5)*s,i+(0-.5)*s,e+(.5-.5)*s,i+(0-.5)*s),t.cubicCurveTo(e+(.692259-.5)*s,i+(0-.5)*s,e+(.84375-.5)*s,i+(.151491-.5)*s,e+(.84375-.5)*s,i+(.34375-.5)*s),t.cubicCurveTo(e+(.84375-.5)*s,i+(.493824-.5)*s,e+(.784625-.5)*s,i+(.600181-.5)*s,e+(.716461-.5)*s,i+(.695393-.5)*s),t.cubicCurveTo(e+(.699009-.5)*s,i+(.719769-.5)*s,e+(.681271-.5)*s,i+(.743104-.5)*s,e+(.663785-.5)*s,i+(.766105-.5)*s),t.cubicCurveTo(e+(.611893-.5)*s,i+(.834367-.5)*s,e+(.562228-.5)*s,i+(.899699-.5)*s,e+(.528896-.5)*s,i+(.980648-.5)*s),t.cubicCurveTo(e+(.524075-.5)*s,i+(.992358-.5)*s,e+(.512663-.5)*s,i+(1-.5)*s,e+(.5-.5)*s,i+(1-.5)*s),t.cubicCurveTo(e+(.487337-.5)*s,i+(1-.5)*s,e+(.475925-.5)*s,i+(.992358-.5)*s,e+(.471104-.5)*s,i+(.980648-.5)*s),t.cubicCurveTo(e+(.487337-.5)*s,i+(1-.5)*s,e+(.475925-.5)*s,i+(.992358-.5)*s,e+(.471104-.5)*s,i+(.980648-.5)*s),t.cubicCurveTo(e+(.437772-.5)*s,i+(.899699-.5)*s,e+(.388107-.5)*s,i+(.834367-.5)*s,e+(.336215-.5)*s,i+(.766105-.5)*s),t.cubicCurveTo(e+(.318729-.5)*s,i+(.743104-.5)*s,e+(.300991-.5)*s,i+(.719769-.5)*s,e+(.283539-.5)*s,i+(.695393-.5)*s),t.cubicCurveTo(e+(.215375-.5)*s,i+(.600181-.5)*s,e+(.15625-.5)*s,i+(.493824-.5)*s,e+(.15625-.5)*s,i+(.34375-.5)*s),t.closePath()},plus(t){xm(t,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:t,x:e,y:i,size:s,pixelRatio:n}){const a=s/2;t.moveTo(is(n,e-a),is(n,i-a)),t.lineTo(is(n,e+a),is(n,i-a)),t.lineTo(is(n,e+a),is(n,i+a)),t.lineTo(is(n,e-a),is(n,i+a)),t.closePath()},star({path:t,x:e,y:i,size:s}){const a=s/2,o=a/2,r=Math.PI/2;for(let l=0;l<5*2;l++){const c=l%2===0?a:o,h=l*Math.PI/5-r,u=e+Math.cos(h)*c,d=i+Math.sin(h)*c;t.lineTo(u,d)}t.closePath()},triangle(t){xm(t,[[.5,0],[1,.87],[0,.87]])}}}}),Pp,Wi,Eo=k({"packages/ag-charts-community/src/chart/marker/marker.ts"(){"use strict";Ft(),aa(),_o(),hs(),wB(),Pp=class extends Zs{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}updatePath(){const{path:t,shape:e,x:i,y:s,size:n}=this,a=this.layerManager?.canvas?.pixelRatio??1,o=Wi.anchor(e),r={path:t,x:i-(o.x-.5)*n,y:s-(o.y-.5)*n,size:n,pixelRatio:a};t.clear(),typeof e=="string"?LB[e](r):typeof e=="function"&&e(r)}computeBBox(){const{x:t,y:e,size:i}=this,s=Wi.anchor(this.shape);return new ut(t-i*s.x,e-i*s.y,i,i)}executeFill(t,e){if(e)return super.executeFill(t,e)}executeStroke(t,e){if(e)return super.executeStroke(t,e)}},S([na({equals:Zh})],Pp.prototype,"shape",2),S([ot()],Pp.prototype,"x",2),S([ot()],Pp.prototype,"y",2),S([ot({convertor:Math.abs})],Pp.prototype,"size",2),Wi=class extends fp(lI(tu(Pp))){static anchor(t){return t==="pin"?{x:.5,y:1}:typeof t=="function"&&"anchor"in t?t.anchor:{x:.5,y:.5}}constructor(t){super(t),t?.shape!=null&&(this.shape=t.shape)}}}});function TB(t,e,i=e*(5/3)){const s=new Ot,n=Math.min(t.marker.strokeWidth??1,2),a=Math.min(t.line?.strokeWidth??0,2),o=Math.max(t.marker.enabled===!1?0:e,t.line==null?0:i),r=Math.max(t.marker.enabled===!1?0:e,a);if(t.line!=null){const{stroke:l,strokeOpacity:c,lineDash:h}=t.line,u=new ws;u.x1=0,u.y1=r/2,u.x2=o,u.y2=r/2,u.stroke=l,u.strokeOpacity=c,u.strokeWidth=a,u.lineDash=h,s.append(u)}if(t.marker.enabled!==!1){const{shape:l,fill:c,fillOpacity:h,stroke:u,strokeOpacity:d,lineDash:p,lineDashOffset:g}=t.marker,f=new Wi;f.shape=l??"square",f.size=e,f.fill=c,f.fillOpacity=h??1,f.stroke=u,f.strokeOpacity=d??1,f.strokeWidth=n,f.lineDash=p,f.lineDashOffset=g??0;const x=Wi.anchor(l),y=o/2+(x.x-.5)*e,b=r/2+(x.y-.5)*e,v=e/(e+n);f.x=y,f.y=b,f.scalingCenterX=y,f.scalingCenterY=b,f.scalingX=v,f.scalingY=v,s.append(f)}return Ot.toSVG(s,o,r)}var NB=k({"packages/ag-charts-community/src/chart/legend/legendSymbol.ts"(){"use strict";We(),xc(),Eo()}});function OB(t){const e=[],i=new Map;for(const s of t)if(s.type==="structured"){const{heading:n}=s,a=n!=null?i.get(n):void 0,o={type:"structured",heading:n,items:[s]};a==null?(i.set(n,o),e.push(o)):a.items.push(s)}else e.push(s);return e}function _B(t){const e=OB(t),i=[];return e.forEach(s=>{if(s.type==="raw")return"";s.heading!=null&&i.push(s.heading),s.items.forEach(n=>{n.title!=null&&i.push(n.title),n.data?.forEach(a=>{i.push(a.label??a.fallbackLabel,a.value)})})}),i.join("; ")}function kC(t,e,i){let s="";t==null?s+=`<span class="${os}-label">${mm(e)}</span>`:(s+=`<span class="${os}-label">${mm(t)}</span>`,s+=" ",s+=`<span class="${os}-value">${mm(e)}</span>`);const n=[`${os}-row`];return i&&n.push(`${os}-row--inline`),s=`<div class="${n.join(" ")}">${s}</div>`,s}function v8(t){let e="";if(t.data?.length&&t.data.every(n=>n.value==null||n.value===""))return e;const i=t.title==null&&t.data?.length===1,s=t.symbol==null?void 0:TB(t.symbol,12);return s!=null&&(t.title!=null||t.data?.length)&&(e+=`<span class="${os}-symbol">${s}</span>`),t.title!=null&&(e+=`<span class="${os}-title">${mm(t.title)}</span>`,e+=" "),t.data?.forEach(n=>{e+=kC(n.label??n.fallbackLabel,n.value,i),e+=" "}),e}function EB(t,e){if(t==null||e.length===1)return;const i=t?.t("tooltipPaginationStatus",{index:e.index+1,count:e.length});return`<div class="${os}-footer">${i}</div>`}function PB(t,e,i,s){const n=e.items.length===1?e.items[0]:void 0;let a,o,r;switch(i){case"compact":a=!0,o=n?.title;break;case"single":a=n!=null&&(e.heading==null||n.title==null)&&n.data?.length===1&&n.data[0].label==null&&n.data[0].value!=null,r=e.heading??n?.title;break;case"shared":a=!1}let l="";if(a&&n!=null?(o!=null&&(l+=kC(void 0,o,!1)),n.data?.forEach(h=>{l+=kC(h.label??r,h.value,!1),l+=" "})):(e.heading!=null&&(l+=`<span class="${os}-heading">${mm(e.heading)}</span>`,l+=" "),e.items.forEach(h=>{l+=v8(h)})),l.length===0)return;const c=i!=="compact"&&s!=null?EB(t,s):void 0;return c+null&&(l+=c),l=`<div class="${os}-content">${l.trimEnd()}</div>`,l}function S8(t,e){const i=e==null?void 0:EB(t,e);return i==null?"":`<div class="${os}-content">${i}</div>`}function RB(t,e,i,s){const n=OB(e);if(n.length!==0){if(n.length===1&&n[0].type==="structured")return PB(t,n[0],i,s);{const a=n.map(o=>o.type==="structured"?PB(t,o,i):o.rawHtmlString);return s!=null&&a.push(S8(t,s)??""),a.join("")}}}var os,IC,BB=k({"packages/ag-charts-community/src/chart/tooltip/tooltipContent.ts"(){"use strict";b8(),NB(),os="ag-charts-tooltip",IC="ag-charts-tooltip--dark"}}),zB,FB,jB,AC,pr,da,bm=k({"packages/ag-charts-community/src/chart/tooltip/tooltip.ts"(){"use strict";R(),DB(),IB(),mt(),mt(),_E(),x8(),BB(),BB(),zB={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},FB={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},jB={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},AC={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},pr=class extends wt{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}get defaultAnchorTo(){const{type:t,_seriesOverrideType:e}=this,i=t??e??"pointer";return i==="node"||i==="pointer"?i:"chart"}get defaultPlacement(){const{type:t,_seriesOverrideType:e}=this,i=t??e??"pointer";return i==="node"||i==="pointer"?"top":i}},S([I,MB("Use `anchorTo` and/or `placement` options instead.")],pr.prototype,"type",2),S([I],pr.prototype,"_seriesOverrideType",2),S([I],pr.prototype,"xOffset",2),S([I],pr.prototype,"yOffset",2),S([I],pr.prototype,"anchorTo",2),S([I],pr.prototype,"placement",2),da=class extends wt{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new pr,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new CB,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new NI,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(t,e){return"togglePopover"in be().HTMLElement.prototype&&(this.element=e.addChild("tooltip-container",os),this.element.setAttribute("popover","manual"),this.element.className=os,this.element.style.positionAnchor=e.anchorName,this.sizeMonitor.observe(this.element,i=>{this._elementSize=i,this.updateTooltipPosition()})),this.localeManager=t,()=>{e.removeChild("tooltip-container",os),this.destroyFns.forEach(i=>i()),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(t){return this.element?.contains(t)??!1}updateTooltipPosition(){const{element:t,_elementSize:e,positionParams:i}=this;if(t==null||e==null||i==null)return;const{canvasRect:s,relativeRect:n,meta:a}=i,{x:o,y:r}=this.springAnimation;let l=a.position?.placement??this.position.placement??a.position?.defaultPlacement??this.position.defaultPlacement;Array.isArray(l)||(l=[l]);const c=a.position?.anchorTo??this.position.anchorTo??a.position?.defaultAnchorTo??this.position.defaultAnchorTo,h=a.position?.xOffset??0,u=a.position?.yOffset??0,d=n.x,p=n.y,g=n.width-e.width-1+d,f=n.height-e.height+p;let x=0,y,b,v=!1;do{y=l[x],x+=1;const C=this.getTooltipBounds({elementSize:e,placement:y,anchorTo:c,canvasX:o,canvasY:r,yOffset:u,xOffset:h,canvasRect:s});b=kB(e.width,e.height,n,C),v=!1,AC[y]&1&&(v||(v=b.x<d||b.x>g)),AC[y]&2&&(v||(v=b.y<p||b.y>f))}while(x<l.length&&v);const M=Nt(d,b.x,g),D=Nt(p,b.y,f);v||(v=M!==b.x||D!==b.y);const L=c!=="chart"&&!v&&!h&&!u,A=a.showArrow??this.showArrow??L;this.arrowPosition=A?jB[y]:void 0,this.updateClassModifiers(),t.style.translate=`${M}px ${D}px`}show(t,e,i,s,n,a=!1){const{element:o}=this;if(o!=null&&s!=null&&s.length!==0){const c=RB(this.localeManager,s,this.mode,this.pagination?n:void 0);if(c==null){this.toggle(!1);return}o.innerHTML=c}else if(o==null||o.innerHTML===""){this.toggle(!1);return}const r={x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height};switch(this.positionParams={canvasRect:e,relativeRect:r,meta:i},i.position?.anchorTo??this.position.anchorTo??i.position?.defaultAnchorTo??this.position.defaultAnchorTo){case"node":this.springAnimation.update(i.nodeCanvasX??i.canvasX,i.nodeCanvasY??i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,o.style.pointerEvents="auto",o.removeAttribute("aria-hidden"),o.tabIndex=-1):(this.enableInteraction=!1,o.style.pointerEvents="none",o.setAttribute("aria-hidden","true"),o.removeAttribute("tabindex")),o.style.setProperty("--top",`${e.top}px`),o.style.setProperty("--left",`${e.left}px`),this.updateClassModifiers(),this.toggle(!0,a)}hide(){this.toggle(!1)}toggle(t,e=!1){const{delay:i}=this;t&&i>0&&!e?this._showTimeout??(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(t))}toggleCallback(t){this.element?.isConnected&&this._visible!==t&&(this._visible=t,this.element.togglePopover(t),t?this.updateTooltipPosition():this.springAnimation.reset())}updateClassModifiers(){if(!this.element?.isConnected)return;const{classList:t}=this.element,e=(i,s)=>t.toggle(`${os}--${i}`,s);e("no-interaction",!this.enableInteraction),e("arrow-top",this.arrowPosition===1),e("arrow-right",this.arrowPosition===3),e("arrow-bottom",this.arrowPosition===2),e("arrow-left",this.arrowPosition===0),e("compact",this.mode==="compact"),t.toggle(IC,this.darkTheme);for(const i of this.wrapTypes)t.toggle(`${os}--wrap-${i}`,i===this.wrapping)}getTooltipBounds(t){const{elementSize:e,anchorTo:i,placement:s,canvasX:n,canvasY:a,yOffset:o,xOffset:r,canvasRect:l}=t,{width:c,height:h}=e,u={width:c,height:h};if(i==="node"||i==="pointer"){const d=zB[s],p=FB[s];return u.top=a+o+h*(p-1)/2+8*p,u.left=n+r+c*(d-1)/2+8*d,u}switch(s){case"top":return u.top=o,u.left=l.width/2-c/2+r,u;case"right":return u.top=l.height/2-h/2+o,u.left=l.width-c/2+r,u;case"left":return u.top=l.height/2-h/2+o,u.left=r,u;case"bottom":return u.top=l.height-h+o,u.left=l.width/2-c/2+r,u;case"top-left":return u.top=o,u.left=r,u;case"top-right":return u.top=o,u.left=l.width-c+r,u;case"bottom-right":return u.top=l.height-h+o,u.left=l.width-c+r,u;case"bottom-left":return u.top=l.height-h+o,u.left=r,u}return u}},S([I],da.prototype,"enabled",2),S([I],da.prototype,"mode",2),S([I],da.prototype,"showArrow",2),S([I],da.prototype,"delay",2),S([I],da.prototype,"range",2),S([I],da.prototype,"wrapping",2),S([I],da.prototype,"position",2),S([I],da.prototype,"pagination",2),S([I],da.prototype,"darkTheme",2),S([I],da.prototype,"bounds",2)}});function CC(t,e){return t.series===e.series&&hn(t.datumIndex,e.datumIndex)}function M8(t,e){return t.type!==e}var GB,VB,D8=k({"packages/ag-charts-community/src/chart/series/seriesAreaManager.ts"(){"use strict";R(),l8(),c8(),Ft(),hs(),Jr(),Rt(),rE(),LA(),d8(),oA(),m8(),bm(),GB=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(t,e){this.candidates=t;let i=e!=null?t.findIndex(s=>CC(s,e)):-1;return i===-1&&(i=0),this.active=t[i],{current:this.active,index:i,length:t.length}}next(){const{candidates:t,active:e}=this,i=e==null?-1:t.findIndex(n=>CC(n,e));if(i===-1)return;let s=i+1;return s>=t.length&&(s=0),this.active=t[s],{current:this.active,index:s,length:this.candidates.length}}},VB=class extends or{constructor(t){super(),this.chart=t,this.id=ia(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=b6(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=5){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}}),this.tooltipCandidates=new GB;const e=t.ctx.domManager.addChild("series-area","series-area-aria-label1"),i=t.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new vB(e,i,"img"),this.swapChain.addListener("blur",o=>this.onBlur(o)),this.swapChain.addListener("focus",()=>this.onFocus()),t.ctx.domManager.mode==="normal"&&(this.focusIndicator=new bB(this.swapChain),this.focusIndicator.overrideFocusVisible(t.mode==="integrated"?!1:void 0));const{seriesDragInterpreter:s,seriesWidget:n,containerWidget:a}=t.ctx.widgets;n.setTabIndex(-1),this.destroyFns.push(()=>t.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>t.ctx.domManager.removeChild("series-area","series-area-aria-label2"),n.addListener("focus",()=>this.swapChain.focus()),n.addListener("mousemove",o=>this.onHover(o)),n.addListener("wheel",o=>this.onWheel(o)),n.addListener("mouseleave",o=>this.onLeave(o)),n.addListener("keydown",o=>this.onKeyDown(o)),n.addListener("contextmenu",(o,r)=>this.onContextMenu(o,r)),s.addListener("drag-move",o=>this.onDragMove(o)),s.addListener("click",o=>this.onClick(o,n)),s.addListener("dblclick",o=>this.onClick(o,n)),a.addListener("contextmenu",(o,r)=>this.onContextMenu(o,r)),a.addListener("click",(o,r)=>this.onClick(o,r)),a.addListener("dblclick",(o,r)=>this.onClick(o,r)),t.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),t.ctx.domManager.addListener("resize",()=>this.clearAll()),t.ctx.highlightManager.addListener("highlight-change",o=>this.changeHighlightDatum(o)),t.ctx.layoutManager.addListener("layout:complete",o=>this.layoutComplete(o)),t.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),t.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),t.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),t.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}get bbox(){return(this.seriesRect??ut.zero).clone()}isState(t){return this.chart.ctx.interactionManager.isState(t)}isIgnoredTouch(t){return!(t.device!=="touch"||t.type==="click"||this.chart.ctx.chartService.touch.dragAction==="hover"||this.chart.ctx.chartService.touch.dragAction==="drag"&&this.isState(9))}dataChanged(){var t;(t=this.highlight).stashedHoverEvent??(t.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator?.clear(),this.clearHighlight()}preSceneRender(){this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.isState(34)&&this.focusIndicator?.isFocusVisible()&&this.handleSeriesFocus(0,0,!0)}update(t,e){this.chart.ctx.updateService.update(t,e)}seriesChanged(t){this.focus.sortedSeries=[...t].sort((e,i)=>{let s=e.properties.focusPriority??1/0,n=i.properties.focusPriority??1/0;return s===n&&([s,n]=[e._declarationOrder,i._declarationOrder]),s<n?-1:s>n?1:0}),this.series=t}layoutComplete(t){this.seriesRect=t.series.rect,this.hoverRect=t.series.paddedRect,this.chart.ctx.widgets.seriesWidget.setBounds(t.series.paddedRect),this.chart.ctx.domManager.mode==="normal"&&this.chart.ctx.widgets.chartWidget.setBounds(t.chart)}onContextMenu(t,e){const{sourceEvent:i}=t;if(i.currentTarget!=e.getElement())return;if(i.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){const{currentX:l,currentY:c}=t;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:t,canvasX:l,canvasY:c},void 0)}return}let s,n;if(this.focusIndicator?.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(n=Ve.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.isState(36)){const l=this.pickNodes({x:t.currentX,y:t.currentY},"context-menu");l&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=l.matches[0].datum)}const a=s?.series;this.clearAll();const o=t.currentX+e.cssLeft(),r=t.currentY+e.cssTop();a&&s?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:t,canvasX:o,canvasY:r},{pickedSeries:a,pickedNode:s},n):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:t,canvasX:o,canvasY:r},void 0,n)}onLeave(t){!this.isState(41)||t.sourceEvent.relatedTarget?.className==="ag-charts-text-input__textarea"||this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(t.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),this.hoverDevice!=="keyboard"&&this.clearAll())}onWheel(t){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(t){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(t))}onHover(t){this.isState(41)&&this.onHoverLikeEvent(t)}onHoverLikeEvent(t){if(!this.isIgnoredTouch(t)&&((t.device==="touch"||M8(t,"drag-move"))&&(this.tooltip.lastHover=t),t.device==="touch"&&this.chart.ctx.chartService.touch.dragAction==="hover"&&t.sourceEvent.preventDefault(),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=t,this.hoverScheduler.schedule(),this.isState(32))){const{currentX:e,currentY:i}=t,s=this.pickNodes({x:e,y:i},"event")?.matches,n=s?.[0];n?.series.hasEventListener("seriesNodeClick")||n?.series.hasEventListener("seriesNodeDoubleClick")||s!=null&&s.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(t,e){if(e===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),t.device==="touch"&&e===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(e===this.chart.ctx.widgets.seriesWidget){if(!e.getElement().contains(t.sourceEvent.target))return}else if(t.sourceEvent.target!=e.getElement())return;if(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(t),!this.isState(32))return;if(e==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(t)){this.update(5),t.sourceEvent.preventDefault();return}const i={type:t.type==="click"?"click":"doubleClick",event:t.sourceEvent};this.chart.fireEvent(i)}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator?.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(t){this.isState(34)&&(this.hoverDevice="pointer",this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(t)||this.clearAll(),this.focusIndicator?.overrideFocusVisible(void 0))}onKeyDown(t){if(!this.isState(43))return;const e=u8(t.sourceEvent);switch(e?.activatesFocusIndicator===!1&&this.focusIndicator?.overrideFocusVisible(this.previousInputDevice==="keyboard"),e?.name){case"redo":return this.chart.ctx.chartEventManager.seriesEvent("series-redo");case"undo":return this.chart.ctx.chartEventManager.seriesEvent("series-undo");case"zoomin":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(1,t);case"zoomout":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(-1,t);case"arrowup":return this.onArrow(-1,0,t);case"arrowdown":return this.onArrow(1,0,t);case"arrowleft":return this.onArrow(0,-1,t);case"arrowright":return this.onArrow(0,1,t);case"submit":return this.onSubmit(t)}}onArrow(t,e,i){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator?.overrideFocusVisible(!0),this.focus.seriesIndex+=t,this.focus.datumIndex+=e,this.handleFocus(t,e),i.sourceEvent.preventDefault(),this.chart.ctx.chartEventManager.seriesEvent("series-focus-change"))}onSubmit(t){if(!this.isState(34))return;const{series:e,datum:i}=this.focus,s=t.sourceEvent;e!==void 0&&i!==void 0?e.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),s.preventDefault()}checkSeriesNodeClick(t){var e;const i=this.pickNodes({x:t.currentX,y:t.currentY},"event");if(i==null||i.matches.length===0)return;const s=this.chart.tooltip.pagination?this.tooltipCandidates.update(i.matches,this.tooltipCandidates.current)?.current:void 0,{series:n,datum:a}=s??i.matches[0],o=s==null?i.distance:0;if(t.type==="click"){const l=n.fireNodeClickEvent(t.sourceEvent,a)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(l!=null){t.sourceEvent.preventDefault();const{currentX:c,currentY:h}=t,u=c+(this.hoverRect?.x??0),d=h+(this.hoverRect?.y??0);(e=this.highlight).pendingHoverEvent??(e.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(l.current,u,d,{index:l.index,length:l.length})}return!0}return t.type==="dblclick"?(t.preventZoomDblClick=o===0,n.fireNodeDoubleClickEvent(t.sourceEvent,a),!0):!1}handleFocus(t,e){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);i==null?this.handleSeriesFocus(t,e):this.focusIndicator?.update(i.rect,this.seriesRect,!1)}handleSeriesFocus(t,e,i=!1){if(this.chart.chartType==="hierarchy"||this.chart.chartType==="gauge"){this.handleSoloSeriesFocus(t,e,i);return}const{focus:s}=this,n=s.sortedSeries.filter(c=>c.visible&&c.focusable);if(n.length===0)return;const a=s.datumIndex-e,o=s.seriesIndex-t;s.seriesIndex=Nt(0,s.seriesIndex,n.length-1),s.series=n[s.seriesIndex];const r=this.focus.datumIndex,l=this.focus.seriesIndex;this.updatePickedFocus(r,e,a,l,t,o,i)}handleSoloSeriesFocus(t,e,i){this.focus.series=this.focus.sortedSeries[0];const s=this.focus.datumIndex,n=this.focus.seriesIndex,a=this.focus.datumIndex-e,o=this.focus.seriesIndex-t;this.updatePickedFocus(s,e,a,n,t,o,i)}updatePickedFocus(t,e,i,s,n,a,o){const{focus:r,hoverRect:l,seriesRect:c}=this;if(r.series===void 0||l===void 0)return;const h=r?.series?.pickFocus({datumIndex:t,datumIndexDelta:e,otherIndex:s,otherIndexDelta:n,seriesRect:c});if(!h)return;const{datum:u}=h;if(h.otherIndex!==void 0&&(r.seriesIndex=h.otherIndex),r.datumIndex=h.datumIndex,r.datum=u,this.focusIndicator?.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator?.isFocusVisible()){const p=g8(h),{x:g,y:f}=p.computeCenter();if(!l.containsPoint(g,f)&&this.chart.ctx.zoomManager.panToBBox(this.id,l,p))return;const{x1:x,x2:y,y1:b,y2:v}=Ap.from(p),M=l.containsPoint(x,b),D=l.containsPoint(y,b),L=l.containsPoint(x,v),A=l.containsPoint(y,v);if(!(M||D||L||A)){const C=Ap.from(l);h.movedBounds=p.clone(),x<C.x1&&y<C.x1?(h.movedBounds.x=C.x1-2,h.movedBounds.width=4):x>C.x2&&y>C.x2&&(h.movedBounds.x=C.x2-2,h.movedBounds.width=4),b<C.y1&&v<C.y1?(h.movedBounds.y=C.y1-2,h.movedBounds.height=4):b>C.y2&&v>C.y2&&(h.movedBounds.y=C.y2-2,h.movedBounds.height=4)}}this.focusIndicator?.update(h.movedBounds??h.bounds,this.seriesRect,h.clipFocusBox);const d=f8(r.series,l,h);if(d!==void 0&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const p=this.chart.getTooltipContent(r.series,u.datumIndex,u),g=Qf.makeTooltipMeta(d,r.series,u,h.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,u),r.series.tooltipEnabled??this.chart.tooltip.enabled?this.chart.ctx.tooltipManager.updateTooltip(this.id,g,p):this.chart.ctx.tooltipManager.removeTooltip(this.id),o||(e===0&&n===0||i!==h.datumIndex||a!==(h.otherIndex??r.seriesIndex))&&this.swapChain.update(this.getDatumAriaText(u,p))}}getDatumAriaText(t,e){const i=e==null?"":_B(e);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:t.series.getDatumAriaText?.(t,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator?.clear()}handleHoverHighlight(t){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const e=this.highlight.appliedHoverEvent;if(!e||!this.isState(41))return;const{currentX:i,currentY:s}=e,n=e.currentX+(this.hoverRect?.x??0),a=e.currentY+(this.hoverRect?.y??0);if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(n,a)){this.clearHighlight();return}const{range:o}=this.chart.highlight,r=o==="tooltip"?"highlight-tooltip":"highlight",l=this.pickNodes({x:i,y:s},r);if(!l||l.matches.length===0){this.chart.ctx.highlightManager.updateHighlight(this.id);return}const{current:c}=this.tooltipCandidates,u=(c==null?void 0:l.matches.find(d=>CC(d,c)))?.datum??l.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,u),this.hoverDevice="pointer"}handleHoverTooltip(t,e){const{current:i}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;const{currentX:s,currentY:n}=t,a=s+(this.hoverRect?.x??0),o=n+(this.hoverRect?.y??0),r=t.sourceEvent.target;if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(a,o)){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(r&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(r,"canvas-overlay",os))return;const l=this.pickNodes({x:t.currentX,y:t.currentY},"tooltip");if(!l||l.matches.length===0){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(this.hoverDevice="pointer",l.distance===0){const{current:c,index:h,length:u}=this.tooltipCandidates.update(l.matches,this.chart.tooltip.pagination?i:void 0);this.showTooltip(c,a,o,{index:h,length:u})}else this.showTooltip(l.matches[0],a,o)}showTooltip({series:t,datum:e,datumIndex:i},s,n,a){const o=this.chart.getTooltipContent(t,i,e);if((t.tooltipEnabled??this.chart.tooltip.enabled)&&o!=null){const c=Qf.makeTooltipMeta({type:"pointermove",canvasX:s,canvasY:n},t,e,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,c,o,a)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}changeHighlightDatum(t){const e=new Set,{series:i=void 0,datum:s}=t.currentHighlight??{},{series:n=void 0,datum:a}=t.previousHighlight??{};n&&e.add(n),i&&e.add(i),n?.properties.cursor&&a&&this.chart.ctx.domManager.updateCursor(n.id),i?.properties.cursor&&i?.properties.cursor!=="default"&&s&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor),i==null||n==null?this.update(5):this.update(5,{seriesToUpdate:e})}pickNodes(t,e,i){const s=[...this.series].reverse();let n;for(const a of s){if(!a.visible||!a.contentGroup.visible)continue;const o=a.pickNodes(t,e,i);if(o==null||o.datums.length===0)continue;const{datums:r,distance:l}=o;if(o.datums.length!==0){if(l===0){n?.distance!==0&&(n={matches:[],distance:0});for(const c of r){const{datumIndex:h}=c;n.matches.push({series:a,datum:c,datumIndex:h})}}else if(n==null||n.distance>l){const[c]=r,{datumIndex:h}=c;n={matches:[{series:a,datum:c,datumIndex:h}],distance:l}}}}return n}}}}),LC,WB,k8=k({"packages/ag-charts-community/src/chart/series/seriesLayerManager.ts"(){"use strict";R(),We(),V_(),LC=30,WB=class{constructor(t){this.seriesRoot=t,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){const{internalId:e,type:i,contentGroup:s,seriesGrouping:n}=t,{groupIndex:a=e}=n??{},o=this.series.get(e);if(o!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(o)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=LC?"aggressive-grouping":"normal");let r=this.groups.get(i);r==null&&(r=new Map,this.groups.set(i,r));const l=this.lookupIdx(a);let c=r.get(l);return c==null&&(c={type:i,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new Ot({name:`${t.contentGroup.name??i}-managed-layer`,zIndex:t.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},r.set(l,c)),this.series.set(e,{layerState:c,seriesConfig:t}),c.seriesIds.push(e),c.group.appendChild(s),c.group}changeGroup(t){const{internalId:e,seriesGrouping:i,type:s,contentGroup:n,oldGrouping:a}=t,{groupIndex:o=e}=i??{};this.groups.get(s)?.get(o)?.seriesIds.includes(e)||(this.series.has(e)&&this.releaseGroup({internalId:e,seriesGrouping:a,type:s,contentGroup:n}),this.requestGroup(t))}releaseGroup(t){const{internalId:e,contentGroup:i,type:s}=t;if(!this.series.has(e))throw new Error(`AG Charts - series doesn't have an allocated layer: ${e}`);const n=this.series.get(e)?.layerState;n&&(n.seriesIds=n.seriesIds.filter(a=>a!==e),n.group.removeChild(i)),n?.seriesIds.length===0?(this.seriesRoot.removeChild(n.group),this.groups.get(n.type)?.delete(n.id),this.groups.get(s)?.delete(e)):n!=null&&n.seriesIds.length>0&&(n.group.zIndex=this.getLowestSeriesZIndex(n.seriesIds)),this.series.delete(e)}updateLayerCompositing(){this.groups.forEach(t=>{t.forEach(e=>{const{group:i,seriesIds:s}=e;let n;s.length===0?n=!1:s.length>1?n=!0:n=this.series.get(s[0])?.seriesConfig.renderToOffscreenCanvas()===!0,i.renderToOffscreenCanvas=n,i.zIndex=this.getLowestSeriesZIndex(s)})})}lookupIdx(t){return this.mode==="normal"?t:typeof t=="string"&&(t=Number(t.split("-").at(-1)),!t)?0:Math.floor(Nt(0,t/this.expectedSeriesCount,1)*LC)}destroy(){this.groups.forEach(t=>{t.forEach(e=>{this.seriesRoot.removeChild(e.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(t){return t.reduce((i,s)=>{const a=this.series.get(s)?.seriesConfig.contentGroup.zIndex;return i==null||a==null?a:G_(i,a)<=0?i:a},void 0)??1}}}}),wC,I8=k({"packages/ag-charts-community/src/chart/touch.ts"(){"use strict";mt(),mt(),wC=class extends wt{constructor(){super(...arguments),this.dragAction="drag"}},S([I],wC.prototype,"dragAction",2)}}),HB,A8=k({"packages/ag-charts-community/src/chart/update/dataWindowProcessor.ts"(){"use strict";HB=class{constructor(t,e,i,s,n){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.animationManager=n,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",a=>this.onUpdateComplete(a)),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(4)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(t){!t.apiUpdate&&!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow(t)}onZoomChange(){this.dirtyZoom=!0}updateWindow(t){if(!this.dataService.isLazy())return;const e=this.getValidAxis();let i,s=!0;if(e){const n=this.zoomManager.getAxisZoom(e.id);i=this.getAxisWindow(e,n),s=this.shouldRefresh(t,e,n)}this.dirtyZoom=!1,this.dirtyDataSource=!1,s&&this.dataService.load({windowStart:i?.min,windowEnd:i?.max})}getValidAxis(){return this.chart.axes.find(t=>t.type==="time")}shouldRefresh(t,e,i){if(t.apiUpdate||this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const s=this.lastAxisZooms.get(e.id);return s&&i.min===s.min&&i.max===s.max?!1:(this.lastAxisZooms.set(e.id,i),!0)}getAxisWindow(t,e){const{domain:i}=t.scale;if(!e||i.length===0||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]),n=new Date(Number(i[0])+s*e.min),a=new Date(Number(i[0])+s*e.max);return{min:n,max:a}}}}});function C8(){const{userAgent:t}=be("navigator");if(UB.test(t)){const e=$B.exec(t);if(e==null)return!1;const i=parseFloat(e[1]),s=Math.floor(i)>16;return s||st.warnOnce(`Unsupported Safari version: ${i}; ${t}`),!s}else if(KB.test(t)&&!ZB.test(t)&&!XB.test(t)){const e=YB.exec(t);if(e==null)return!1;const i=parseInt(e[1],10),s=i>126;return s||st.warnOnce(`Unsupported Chrome version: ${i}; ${t}`),!s}return!1}var UB,$B,KB,YB,ZB,XB,L8=k({"packages/ag-charts-community/src/util/browser.ts"(){"use strict";R(),UB=/^((?!chrome|android).)*safari/i,$B=/Version\/(\d+(\.\d+)?)/,KB=/Chrome/,YB=/Chrome\/(\d+)/,ZB=/Edg/,XB=/OPR/}}),qB,QB,w8=k({"packages/ag-charts-community/src/chart/update/overlaysProcessor.ts"(){"use strict";R(),L8(),mC(),qB=new Set(["map-shape-background","map-line-background"]),QB=class{constructor(t,e,i,s,n,a,o){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutManager=s,this.localeManager=n,this.animationManager=a,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(Fv),this.destroyFns.push(this.layoutManager.addListener("layout:complete",r=>this.onLayoutComplete(r)))}destroy(){this.destroyFns.forEach(t=>t()),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:t}}){const e=this.dataService.isLoading(),i=this.chartLike.series.some(c=>c.hasData),s=this.chartLike.series.some(c=>c.visible&&!qB.has(c.type));this.overlays.darkTheme?this.overlayElem.classList.add(fC):this.overlayElem.classList.remove(fC),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`;const n=e,a=!e&&!i,o=i&&!s,r=this.overlays.unsupportedBrowser.enabled&&C8();n?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),a?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),o?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),r?this.showOverlay(this.overlays.unsupportedBrowser,t):this.hideOverlay(this.overlays.unsupportedBrowser);const l=n||a||o||r;Ht(this.overlayElem,"aria-hidden",!l)}showOverlay(t,e){if(!t.enabled)return;const i=t.getElement(this.animationManager,this.localeManager,e);this.overlayElem.appendChild(i)}hideOverlay(t){t.removeElement(()=>{this.overlayElem.innerText="\xA0"},this.animationManager)}}}}),Ua,Vv,$e,vm,Wv=k({"packages/ag-charts-community/src/chart/chart.ts"(){"use strict";R(),tr(),We(),Fi(),iu(),Ln(),y6(),Rt(),aE(),fI(),mt(),mt(),un(),rE(),qr(),O6(),qX(),QX(),dP(),vR(),fv(),mv(),jA(),bv(),v9(),S9(),J9(),e8(),ku(),s8(),n8(),o8(),Lu(),D8(),k8(),bm(),I8(),A8(),w8(),Ua=ne.create(!0,"opts"),Vv=class extends wt{constructor(){super(...arguments),this.padding=new Xr(0)}},S([I],Vv.prototype,"clip",2),S([I],Vv.prototype,"padding",2),$e=class u5 extends gI{constructor(e,i){var s;super(),this.id=ia(this),this.seriesRoot=new ss({name:`${this.id}-series-root`,zIndex:5}),this.annotationRoot=new ss({name:`${this.id}-annotation-root`,zIndex:9}),this.titleGroup=new Ot({name:"titles",zIndex:13}),this.debug=ne.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new tb,this.padding=new Xr(20),this.seriesArea=new Vv,this.keyboard=new Sv,this.touch=new wC,this.mode="standalone",this.chartCaptions=new $f,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new mB,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new tb,this.performUpdateType=8,this.runningUpdateType=8,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new nE,this.updateRequestors={},this.performUpdateTrigger=v6(({count:h})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(h)}catch(u){st.error("update error",u)}}).catch(u=>st.errorOnce(u))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=h=>{this.fireEvent(h)},this.onSeriesNodeDoubleClick=h=>{this.fireEvent(h)},this.onSeriesVisibilityChange=h=>{this.fireEvent(h)},this.seriesGroupingChanged=h=>{if(!(h instanceof Gv))return;const{series:u,seriesGrouping:d,oldGrouping:p}=h;u.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:u.internalId,type:u.type,contentGroup:u.contentGroup,renderToOffscreenCanvas:()=>u.renderToOffscreenCanvas(),seriesGrouping:d,oldGrouping:p})},this.chartOptions=e;const n=i?.scene,a=i?.container??e.processedOptions.container??void 0,o=i?.styleContainer??e.specialOverrides.styleContainer;n&&(this._firstAutoSize=!1,this._lastAutoSize=[n.width,n.height,n.pixelRatio]);const r=new Ot({name:"root"});r.visible=!1,r.append(this.seriesRoot),r.append(this.annotationRoot),r.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new da,this.seriesLayerManager=new WB(this.seriesRoot),this.mode=e.userOptions.mode??this.mode,this.styleNonce=e.processedOptions.styleNonce;const l=this.ctx=new mR(this,{chartType:this.getChartType(),scene:n,root:r,container:a,styleContainer:o,domMode:e.optionMetadata.domMode,syncManager:new AR(this),fireEvent:h=>this.fireEvent(h),updateCallback:(h,u)=>this.update(h,u),updateMutex:this.updateMutex});this._destroyFns.push(l.domManager.addListener("resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new Iu,(s=this.overlays.loading).renderer??(s.renderer=()=>a8(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new HB(this,l.dataService,l.updateService,l.zoomManager,l.animationManager),new QB(this,this.overlays,l.dataService,l.layoutManager,l.localeManager,l.animationManager,l.domManager)],this.highlight=new OA,this.container=a;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new VB(this.initSeriesAreaDependencies()),this._destroyFns.push(l.layoutManager.registerElement(0,h=>{h.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(h)}),l.layoutManager.addListener("layout:complete",h=>this.chartCaptions.positionAbsoluteCaptions(h)),l.dataService.addListener("data-load",h=>{this.data=h.data}),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),Lo.addWindowEvent("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(7)}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>l.domManager.setDataBoolean("animating",!1)),l.zoomManager.addListener("zoom-change",()=>{this.series.forEach(u=>u.animationState?.transition("updateData"));const h=this.chartAnimationPhase!=="initial";this.update(4,{forceNodeDataRefresh:!0,skipAnimations:h})})),this.parentResize(l.domManager.containerSize)}static getInstance(e){return u5.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,i){this.ctx.scene.download(e,i)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(e){this.seriesAreaManager.focusIndicator?.overrideFocusVisible(e)}initSeriesAreaDependencies(){const{ctx:e,tooltip:i,highlight:s,overlays:n,seriesRoot:a,mode:o}=this,r=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(u,d,p)=>this.getTooltipContent(u,d,p),chartType:r,ctx:e,tooltip:i,highlight:s,overlays:n,seriesRoot:a,mode:o}}getModuleContext(){return this.ctx}getTooltipContent(e,i,s){const n=e.properties.tooltip.enabled!==!1?e.getTooltipContent(i,s):void 0,a=n==null?[]:[n];if(this.tooltip.mode!=="shared"||this.series.length===1)return a;const o=e.getCategoryValue(i);return o==null?a:this.series.flatMap(r=>{if(r===e)return a;if(!r.isEnabled()||r.properties.tooltip.enabled===!1)return[];const l=r.datumIndexForCategoryValue(o),c=l==null?void 0:r.getTooltipContent(l,void 0);return c==null?[]:[c]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(e=>e.enabled&&e.text).map(e=>e.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(e){if(this.destroyed)return;const i=e?.keepTransferableResources;let s;return this.performUpdateType=8,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),s}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await e(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>st.errorOnce(i)))}clearCallbackCache(){this.ctx.callbackCache.invalidateCache();for(const e of this.series)e.resetDatumCallbackCache()}update(e=0,i){if(this.destroyed)return;const{forceNodeDataRefresh:s=!1,skipAnimations:n,seriesToUpdate:a=this.series,newAnimationBatch:o,apiUpdate:r=!1}=i??{};this.apiUpdate=r,this.ctx.widgets.seriesWidget.setDragTouchEnabled(this.touch.dragAction!=="none"),s&&this.series.forEach(l=>l.markNodeDataDirty());for(const l of a)this.seriesToUpdate.add(l);if(n&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.debug.check()){let l=new Error().stack??"<unknown>";l=l.replace(/\([^)]*/g,""),this.updateRequestors[l]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i?.backOffMs))}async performUpdate(e){const{performUpdateType:i,extraDebugStats:s,_performUpdateSplits:n,ctx:a}=this,o=[...this.seriesToUpdate];this.clearCallbackCache(),this.performUpdateType=8,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<7&&(a.animationManager.startBatch(this._performUpdateSkipAnimations),a.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",bp[i]);let r=performance.now();n.start??(n.start=r);const l=h=>{n[h]??(n[h]=0),n[h]+=performance.now()-r,r=performance.now()};switch(i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),l("\u2B07\uFE0F");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),l("\u{1F3ED}");case 3:if(this.checkUpdateShortcut(3))break;await this.processDomains(),l("\u26F0\uFE0F");case 4:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(4))break;await this.processLayout(),l("\u2316");case 5:{if(this.checkUpdateShortcut(5))break;await this.updateSeries(o),l("\u{1F914}"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing()}case 6:if(this.checkUpdateShortcut(6))break;a.updateService.dispatchPreSceneRender(),l("\u2196");case 7:if(this.checkUpdateShortcut(7))break;a.animationManager.endBatch(),s.updateShortcutCount=this.updateShortcutCount,a.scene.render({debugSplitTimes:n,extraDebugStats:s,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const h of Object.keys(n))delete n[h];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 8:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,a.animationManager.endBatch()}this.destroyed||(a.updateService.dispatchUpdateComplete(this.apiUpdate),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=8,this.syncStatus="ready"),this._performUpdateNotify.notify();const c=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((c-n.start)*100)/100,count:e,performUpdateType:bp[i]})}updateThemeClassName(){const e="ag-charts-theme-",i=[`${e}default`,`${e}default-dark`];let s=i[0],n=!1,{theme:a}=this.chartOptions.processedOptions;for(;typeof a!="string"&&a!=null;)a=a.baseTheme;typeof a=="string"&&(s=a.replace("ag-",e),n=a.includes("-dark")),i.includes(s)||(s=n?i[1]:i[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(e?i??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return this.destroyed?!0:this.updateShortcutCount>3?(st.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(e,i){i==null&&e.length===0||this.ctx.axisManager.updateAxes(i??[],e)}onSeriesChange(e,i){const s=i?.filter(n=>!e.includes(n))??[];this.destroySeries(s),this.seriesLayerManager?.setSeriesCount(e.length);for(const n of e){if(i?.includes(n))continue;const a=this.seriesLayerManager.requestGroup(n);n.attachSeries(a,this.seriesRoot,this.annotationRoot);const o=this;n.chart={get mode(){return o.mode},get isMiniChart(){return!1},get seriesRect(){return o.seriesRect}},n.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(n),n.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(e)}destroySeries(e){e?.forEach(i=>{i.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),i.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0})}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&e.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter(i=>i.axes[e.direction]===e)}assignAxesToSeries(){const e=Jx(this.axes,i=>i.direction);for(const i of this.series)for(const s of i.directions){const n=e[s];if(!n){st.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const a=i.getKeys(s),o=n.find(r=>!r.keys.length||a.some(l=>r.keys.includes(l)));if(!o){st.warnOnce(`no matching axis for direction [${s}] and keys [${a}]; check series and axes configuration.`);return}i.axes[s]=o}}parentResize(e){if(e==null||this.width!=null&&this.height!=null)return;let{width:i,height:s}=e;const{pixelRatio:n}=e;if(i=Math.floor(i),s=Math.floor(s),i===0&&s===0)return;const[a=0,o=0,r=1]=this._lastAutoSize??[];a===i&&o===s&&r===n||(this._lastAutoSize=[i,s,n],this.resize("SizeMonitor",{}))}resize(e,i){const{scene:s,animationManager:n}=this.ctx,{inWidth:a,inHeight:o,inMinWidth:r,inMinHeight:l,inOverrideDevicePixelRatio:c}=i;this.ctx.domManager.setSizeOptions(r??this.minWidth,l??this.minHeight,a??this.width,o??this.height);const h=a??this.width??this._lastAutoSize?.[0],u=o??this.height??this._lastAutoSize?.[1],d=c??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${e}`,{width:h,height:u,pixelRatio:d,stack:new Error().stack}),!(h==null||u==null||!re(h)||!re(u))&&s.resize(h,u,d)){n.reset();let p=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(p=!1,this._firstAutoSize=!1),this.update(4,{forceNodeDataRefresh:!0,skipAnimations:p}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(i=>i.setChartData(this.data));const e=this.modulesManager.mapModules(i=>i.updateData?.(this.data));await Promise.all(e)}async processData(){this.series.some(n=>n.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=new FA(this.mode,this.suppressFieldDotNotation),i=this.series.map(n=>n.processData(e)),s=this.modulesManager.mapModules(n=>n.processData?.(e));this._cachedData=e.execute(this._cachedData),await Promise.all([...i,...s]),this.updateLegends()}async processDomains(){for(const e of this.axes)e.processData();for(const e of this.series)e.updatedDomains()}updateLegends(e){for(const{legend:i,legendType:s}of this.modulesManager.legends())s==="category"?this.setCategoryLegendData(e):this.setLegendData(s,i)}setCategoryLegendData(e){var i;const{ctx:{legendManager:s,stateManager:n}}=this;e&&this.series.forEach(o=>{const r=e.find(l=>l.seriesId===o.id);o.onLegendInitialState("category",r)});const a=this.series.flatMap(o=>{const r=o.getLegendData("category");return s.updateData(o.id,r),r});if(e){n.setStateAndRestore(s,e);return}if(this.mode!=="integrated"){const o={},r=new Map(this.series.map(l=>[l.id,l.type]));for(const{seriesId:l,symbol:{marker:c},label:h}of a.filter(u=>!u.hideInLegend)){if(c.fill==null)continue;const u=r.get(l),d=o[u]??(o[u]={});d[i=h.text]??(d[i]=c.fill),d[h.text]!==c.fill&&st.warnOnce(`legend item '${h.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}s.update()}setLegendData(e,i){i.data=this.series.filter(s=>s.properties.showInLegend).flatMap(s=>s.getLegendData(e))}async processLayout(){const e=this.animationRect,{width:i,height:s}=this.ctx.scene,n=this.ctx.layoutManager.createContext(i,s);await this.performLayout(n),e&&!this.animationRect?.equals(e)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(e){const{seriesRect:i}=this;await Promise.all(e.map(s=>s.update({seriesRect:i}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(s=>s.visible&&s.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(e=1e4,i=!1){const s=performance.now();for(;(this._pendingFactoryUpdatesCount>0||this.performUpdateType!==8||this.runningUpdateType!==8||this.ctx.scene.waitingForUpdate())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==8||this.runningUpdateType!==8)&&await this._performUpdateNotify.await(),performance.now()-s>e){const n=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(i)throw new Error(n);st.warnOnce(n)}$_()&&await Ck(),this.ctx.scene.waitingForUpdate()&&await Ck(50)}}filterMiniChartSeries(e){return e?.filter(i=>i.showInMiniChart!==!1)}applyOptions(e){const i=this.firstApply?e.processedOptions:e.diffOptions(this.chartOptions);if(i==null||Object.keys(i).length===0)return;const s=this.firstApply?{}:this.chartOptions.processedOptions,n=e.processedOptions;Ua("Chart.applyOptions() - applying delta",i);const a=this.applyModules(n),o=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"];i.listeners&&this.registerListeners(this,i.listeners),Wf(this,i,{skip:o});let r=!1,l="no-op";i.series!=null&&(l=this.applySeries(this,i.series,s?.series),r=!0),l==="replaced"&&this.resetAnimations(),this.applyAxes(this,n,s,l,[])&&(r=!0),i.data&&(this.data=i.data),i.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,i.legend.listeners),i.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=i.locale?.localeText),this.chartOptions=e;const c=this.modulesManager.getModule("navigator"),h=this.modulesManager.getModule("zoom");!c?.enabled&&!h?.enabled&&this.ctx.zoomManager.updateZoom("chart");const u=c?.miniChart,d=n.navigator?.miniChart?.series??n.series;u?.enabled===!0&&d!=null?this.applyMiniChartOptions(u,d,n,s):u?.enabled===!1&&(u.series=[],u.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),r||(r=this.shouldForceNodeDataRefresh(i,l));const g=r||a?0:4;this.maybeResetAnimations(l),this.shouldClearLegendData(n,s,l)&&this.ctx.legendManager.clearData(),this.applyInitialState(n),Ua("Chart.applyOptions() - update type",bp[g],{seriesStatus:l,forceNodeDataRefresh:r}),this.update(g,{apiUpdate:!0,forceNodeDataRefresh:r,newAnimationBatch:!0}),this.firstApply=!1}applyInitialState(e){const{annotationManager:i,chartTypeOriginator:s,historyManager:n,stateManager:a,zoomManager:o}=this.ctx,{initialState:r}=e;if("annotations"in e&&e.annotations?.enabled&&r?.annotations!=null){const l=r.annotations.map(c=>{const h=i.getAnnotationTypeStyles(c.type);return Kt(c,h)});a.setState(i,l)}r?.chartType!=null&&a.setState(s,r.chartType),(e.navigator?.enabled||e.zoom?.enabled)&&r?.zoom!=null&&a.setState(o,r.zoom),r?.legend!=null&&this.updateLegends(r.legend),r!=null&&n.clear()}maybeResetAnimations(e){if(this.mode==="standalone")switch(e){case"series-grouping-change":case"replaced":this.resetAnimations();break;default:}}shouldForceNodeDataRefresh(e,i){const s=!!e.data||i==="data-change"||i==="replaced",n=yv.getKeys(),a=Object.values(n).some(r=>e[r]!=null),o=e.title!=null&&e.subtitle!=null;return s||a||o}shouldClearLegendData(e,i,s){const n=s==="replaced"||s==="series-grouping-change"||s==="updated"&&(e.series?.length!==i.series?.length||!e.series?.every((o,r)=>o.type===i.series?.[r].type)),a=i.legend!=null&&e.legend==null;return n||a}applyMiniChartOptions(e,i,s,n){const a=n?.navigator?.miniChart?.series??n?.series,o=this.applySeries(e,this.filterMiniChartSeries(i),this.filterMiniChartSeries(a));this.applyAxes(e,s,n,o,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const r=e.series;for(const h of r)h.properties.id=void 0;const l=e.axes,c=l.find(h=>h.direction==="x");for(const h of l)h.nice=!1,h.gridLine.enabled=!1,h.label.enabled=h===c,h.tick.enabled=!1,h.interactionEnabled=!1;if(c!=null){const h=s.navigator?.miniChart,u=h?.label,d=h?.label?.interval;if(c.line.enabled=!1,c.label.set(ft(u,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),c.tick.set(ft(d,["enabled","width","size","color","interval","step"])),c.type==="grouped-category"){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:g}=c;if(g.length===0)g.set([{label:{enabled:!0}}]);else for(let f=1;f<g.length;f++)g[f].label.enabled=!1}else(c.type==="time"||c.type==="unit-time"||c.type==="ordinal-time")&&(c.parentLevel.enabled=!1);const p=d?.step;p!=null&&(c.interval.step=p)}}applyModules(e){const{type:i}=this.constructor;let s=!1;for(const n of Io.byType("root","legend")){const o=e[n.optionsKey]!=null&&n.chartTypes.includes(i);o!==this.modulesManager.isEnabled(n)&&(o?(this.modulesManager.addModule(n,r=>r.moduleFactory(this.getModuleContext())),n.type==="legend"&&this.modulesManager.getModule(n)?.attachLegend(this.ctx.scene),this[n.optionsKey]=this.modulesManager.getModule(n)):(this.modulesManager.removeModule(n),delete this[n.optionsKey]),s=!0)}return s}initSeriesDeclarationOrder(e){for(let i=0;i<e.length;i++)e[i].setSeriesIndex(i)}applySeries(e,i,s){if(!i)return"no-change";const n=t8(e.series,i,s);if(n.status==="no-overlap"){Ua(`Chart.applySeries() - creating new series instances, status: ${n.status}`,n);const h=i.map(u=>this.createSeries(u));return this.initSeriesDeclarationOrder(h),e.series=h,"replaced"}Ua("Chart.applySeries() - matchResult",n);const a=[];let o=!1,r=!1,l=!1;const c=n.changes.toSorted((h,u)=>h.targetIdx-u.targetIdx);for(const h of c)switch(r||(r=h.status==="series-grouping"),o||(o=h.diff?.data!=null),l||(l=h.status!=="no-op"),h.status){case"add":{const u=this.createSeries(h.opts);a.push(u),Ua("Chart.applySeries() - created new series",u);break}case"remove":Ua(`Chart.applySeries() - removing series at previous idx ${h.idx}`,h.series);break;case"no-op":a.push(h.series),Ua(`Chart.applySeries() - no change to series at previous idx ${h.idx}`,h.series);break;case"series-grouping":case"update":default:{const{series:u,diff:d,idx:p}=h;Ua(`Chart.applySeries() - applying series diff previous idx ${p}`,d,u),this.applySeriesValues(u,d),u.markNodeDataDirty(),a.push(u)}}return this.initSeriesDeclarationOrder(a),Ua("Chart.applySeries() - final series instances",a),e.series=a,r?"series-grouping-change":o?"data-change":l?"updated":"no-op"}applyAxes(e,i,s,n,a=[]){if(!("axes"in i)||!i.axes)return!1;a=["axes[].type",...a];const o=i.axes.map(c=>c.type==="time"&&c.unit!=null?{...c,type:"unit-time"}:c);return!(n==="replaced")&&e.axes.length===o.length&&e.axes.every((c,h)=>c.type===o[h].type)&&dC(s)?(e.axes.forEach((c,h)=>{const u=s.axes?.[h]??{},d=sr(u,o[h]);Ua(`Chart.applyAxes() - applying axis diff idx ${h}`,d);const p=`axes[${h}]`;Wf(c,d,{path:p,skip:a})}),!0):(Ua(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${n}`),e.axes=this.createAxis(o,a),!0)}createSeries(e){const i=ha.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(i,e),this.applySeriesValues(i,e),i}applySeriesOptionModules(e,i){const s=e.createModuleContext(),n=e.getModuleMap();for(const a of Io.byType("series-option"))a.optionsKey in i&&a.seriesTypes.includes(e.type)&&n.addModule(a,o=>o.moduleFactory(s))}applySeriesValues(e,i){const s=e.getModuleMap(),{type:n,data:a,listeners:o,seriesGrouping:r,showInMiniChart:l,...c}=i;for(const h of Cp)if(h.type==="series-option"&&h.optionsKey in c){const u=s.getModule(h.optionsKey);if(u){const d=c[h.optionsKey];delete c[h.optionsKey],u.properties.set(d)}}c.visible!=null&&(e.visible=c.visible),e.properties.set(c),"data"in i&&e.setOptionsData(a),o&&this.registerListeners(e,o,{nodeClick:"seriesNodeClick",nodeDoubleClick:"seriesNodeDoubleClick"}),"seriesGrouping"in i&&(r==null?e.seriesGrouping=void 0:e.seriesGrouping={...e.seriesGrouping,...r})}createAxis(e,i){const s=[],n=this.getModuleContext();for(let a=0;a<e.length;a++){const o=e[a],r=yc.create(o.type,n);this.applyAxisModules(r,o),Wf(r,o,{path:`axes[${a}]`,skip:i}),s.push(r)}return Q9(s),s}applyAxisModules(e,i){const s=e.createModuleContext(),n=e.getModuleMap();for(const a of Io.byType("axis-option")){const o=i[a.optionsKey]!=null;o!==n.isEnabled(a)&&(o?(n.addModule(a,r=>r.moduleFactory(s)),e[a.optionsKey]=n.getModule(a)):(n.removeModule(a),delete e[a.optionsKey]))}}registerListeners(e,i,s){e.clearEventListeners();for(const[n,a]of Ba(i))if(Do(a)){const o=s?.[n];o==null?e.addEventListener(n,a):e.addEventListener(o,r=>{if(r?.type===o){const l=new Proxy(r,{get(c,h,u){return h==="type"?n:Reflect.get(c,h,u)}});a(l)}else a(r)})}}},$e.chartsInstances=new WeakMap,S([wn({newValue(t){this.destroyed||(this.ctx.domManager.setContainer(t),$e.chartsInstances.set(t,this))},oldValue(t){$e.chartsInstances.delete(t)}})],$e.prototype,"container",2),S([wn({newValue(t){this.resize("width option",{inWidth:t})}})],$e.prototype,"width",2),S([wn({newValue(t){this.resize("height option",{inHeight:t})}})],$e.prototype,"height",2),S([wn({newValue(t){this.resize("minWidth option",{inMinWidth:t})}})],$e.prototype,"minWidth",2),S([wn({newValue(t){this.resize("minHeight option",{inMinHeight:t})}})],$e.prototype,"minHeight",2),S([wn({newValue(t){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:t})}})],$e.prototype,"overrideDevicePixelRatio",2),S([I],$e.prototype,"padding",2),S([I],$e.prototype,"seriesArea",2),S([I],$e.prototype,"keyboard",2),S([I],$e.prototype,"touch",2),S([I],$e.prototype,"mode",2),S([I],$e.prototype,"styleNonce",2),S([me("chartCaptions.title")],$e.prototype,"title",2),S([me("chartCaptions.subtitle")],$e.prototype,"subtitle",2),S([me("chartCaptions.footnote")],$e.prototype,"footnote",2),S([I],$e.prototype,"suppressFieldDotNotation",2),S([I],$e.prototype,"loadGoogleFonts",2),S([wn({changeValue(t,e){this.onAxisChange(t,e)}})],$e.prototype,"axes",2),S([wn({changeValue(t,e){this.onSeriesChange(t,e)}})],$e.prototype,"series",2),vm=$e}}),TC,Dc,Rp,NC,T8=k({"packages/ag-charts-community/src/chart/chartProxy.ts"(){"use strict";tr(),Fi(),Ln(),un(),TC=ne.create(!0,"opts"),Dc="AG Charts - Chart was destroyed, cannot perform request.",Rp=class{constructor(e,i,s){this.factoryApi=i,this.licenseManager=s,this.chart=e}async update(e){if(!this.chart)throw new Error(Dc);return TC.group("AgChartInstance.update()",async()=>{this.factoryApi.update(e,this),await this.chart?.waitForUpdate()})}async updateDelta(e){if(!this.chart)throw new Error(Dc);return TC.group("AgChartInstance.updateDelta()",async()=>{this.factoryApi.updateUserDelta(this,e),await this.chart?.waitForUpdate()})}getOptions(){if(!this.chart)throw new Error(Dc);const e=Oe(this.chart.getOptions());for(const i of Object.keys(e))i.startsWith("_")&&delete e[i];return e}waitForUpdate(){if(!this.chart)throw new Error(Dc);return this.chart.waitForUpdate()}async download(e){if(!this.chart)throw new Error(Dc);const i=await this.prepareResizedChart(this,this.chart,e);try{i.chart?.download(e?.fileName,e?.fileFormat)}finally{i.destroy()}}async __toSVG(e){if(!this.chart)throw new Error(Dc);const i=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...e});try{return i?.chart?.toSVG()}finally{i?.destroy()}}async getImageDataURL(e){if(!this.chart)throw new Error(Dc);const i=await this.prepareResizedChart(this,this.chart,e);try{return i.chart.getCanvasDataURL(e?.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(e){const{chart:i}=this;if(!i)return;const s=this.getEnabledOriginators();if(!s.includes(i.ctx.legendManager)){await this.setStateOriginators(e,s);return}await this.setStateOriginators(e,s.filter(n=>n!==i.ctx.zoomManager)),await this.setStateOriginators(e,[i.ctx.zoomManager])}resetAnimations(){this.chart?.resetAnimations()}skipAnimations(){this.chart?.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(e,i,s={}){const n=s.width??i.width??i.ctx.scene.canvas.width,a=s.height??i.height??i.ctx.scene.canvas.height,o=e.getState(),r=Io.hasEnterpriseModules(),l={...i.chartOptions.processedOverrides,container:document.createElement("div"),width:n,height:a};s.width!=null&&s.height!=null&&(l.overrideDevicePixelRatio=1);const c=i.getOptions();r&&(l.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(l.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const h={...i.chartOptions.specialOverrides},u={...i.chartOptions.optionMetadata},d=this.factoryApi.create(c,l,h,u);await d.setState(o),d.chart?.ctx.zoomManager.updateZoom("chartProxy",i.ctx.zoomManager.getZoom()),d.chart?.ctx.legendManager.clearData(),d.chart?.ctx.legendManager.update(i.ctx.legendManager.getData()),i.series.forEach((g,f)=>{d.chart.series[f].visible=g.visible});const p=[];for(const g of i.modulesManager.legends())p.push(g.legend.pagination?.currentPage??0);for(const g of d.chart.modulesManager.legends()){const f=p.shift()??0;g.legend.pagination&&g.legend.pagination.setPage(f)}return d.chart?.update(0,{forceNodeDataRefresh:!0}),await d.waitForUpdate(),d}getEnabledOriginators(){if(!this.chart)return[];const{chartOptions:{processedOptions:e,optionMetadata:i},ctx:{annotationManager:s,chartTypeOriginator:n,zoomManager:a,legendManager:o}}=this.chart,r=[];return"annotations"in e&&e.annotations?.enabled&&r.push(s),i.presetType==="price-volume"&&r.push(n),(e.navigator?.enabled||e.zoom?.enabled)&&r.push(a),"legend"in this.chart&&r.push(o),r}async setStateOriginators(e,i){this.factoryApi.caretaker.restore(e,...i),this.chart?.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart?.waitForUpdate()}},Rp.chartInstances=new WeakMap,S([wn({oldValue(t){t.destroyed||(t.publicApi=void 0),Rp.chartInstances.delete(t)},newValue(t){t&&(t.publicApi=this,Rp.chartInstances.set(t,this))}})],Rp.prototype,"chart",2),NC=Rp}}),Hv,N8=k({"packages/ag-charts-community/src/locale/locale.ts"(){"use strict";tr(),mt(),un(),Hv=class extends Of{constructor(t){super(),this.ctx=t,this.localeText=void 0}},S([dc(t=>{t.ctx.localeManager.setLocaleText(t.localeText)}),I],Hv.prototype,"localeText",2),S([dc(t=>{t.ctx.localeManager.setLocaleTextFormatter(t.getLocaleText)}),I],Hv.prototype,"getLocaleText",2)}}),JB,O8=k({"packages/ag-charts-community/src/locale/localeModule.ts"(){"use strict";N8(),JB={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Hv(t)}}});function tz(t,e,i){if(i==null||i[0]===0&&i[1]===1)return{ticks:t,count:t.length};const s=Nt(0,Math.floor(i[0]*t.length),t.length),n=Nt(0,Math.ceil(i[1]*t.length),t.length),a=e?t.length-n:s,o=e?t.length-s:n;return{ticks:t.slice(a,o),count:t.length}}var ez=k({"packages/ag-charts-community/src/scale/scaleUtil.ts"(){"use strict";R()}});function iz(t){let e;const i=new Set;for(const s of t){const n=Ks(s),a=i.size;i.add(n),i.size!==a?e?.push(s):e??(e=t.slice(0,i.size))}return e??t}function _8(t,e){let i=-1;for(const s of t){const n=e.indexOf(s);if(n===-1)i=1/0;else{if(n<=i)return!1;i=n}}return!0}var Bp,Sm=k({"packages/ag-charts-community/src/scale/categoryScale.ts"(){"use strict";im(),sm(),ez(),Bp=class d5 extends Ip{constructor(){super(...arguments),this.type="band",this.index=void 0,this._domain=[]}static is(e){return e instanceof d5}set domain(e){this._domain!==e&&(this.invalid=!0,this._domain=e,this.index=void 0)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(...e){let i;const s=new Set;let n=!0;for(const a of e)s.has(a)||(s.add(a),i==null?i=iz(a):(n&&(n=_8(a,i)),i=iz([...i,...a])));return i??(i=[]),{domain:i,animatable:n}}toDomain(e){}invert(e,i=!1){this.refresh();const s=i?this.bandwidth/2:0,n=this.invertNearestIndex(Math.max(0,e-s));return i||e===this.ordinalRange(n)?this.domain[n]:void 0}ticks(e,i=this.domain,s){return tz(i,!1,s)}findIndex(e){let{index:i}=this;if(i==null){const{domain:s}=this;i=new Map;for(let n=0;n<s.length;n++)i.set(Ks(s[n]),n);this.index=i}return i.get(Ks(e))}}}}),wu,cl,kc=k({"packages/ag-charts-community/src/chart/axis/categoryAxis.ts"(){"use strict";R(),Sm(),mt(),gm(),wu=class p5 extends _p{constructor(e,i=new Bp){super(e,i),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0,this.nice=!1}static is(e){return e instanceof p5}normaliseDataDomain(e){return{domain:e,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:e,paddingOuter:i}=this;if(!re(e)||!re(i)){const s=this.reduceBandScalePadding();e??(e=s.inner),i??(i=s.outer)}this.scale.paddingInner=e??0,this.scale.paddingOuter=i??0}reduceBandScalePadding(){return this.boundSeries.reduce((e,i)=>{const s=i.getBandScalePadding?.();return s&&(e.inner>s.inner&&(e.inner=s.inner),e.outer<s.outer&&(e.outer=s.outer)),e},{inner:1/0,outer:-1/0})}},wu.className="CategoryAxis",wu.type="category",S([I],wu.prototype,"groupPaddingInner",2),S([I],wu.prototype,"paddingInner",2),S([I],wu.prototype,"paddingOuter",2),cl=wu}}),OC,E8=k({"packages/ag-charts-community/src/scale/groupedCategoryScale.ts"(){"use strict";Sm(),OC=class g5 extends Bp{static is(e){return e instanceof g5}normalizeDomains(...e){const{domain:i}=super.normalizeDomains(...e);return{domain:i,animatable:!1}}findIndex(e){return super.findIndex(e)??this.getMatchIndex(e)}getMatchIndex(e){const i=JSON.stringify(e),s=this._domain.find(n=>JSON.stringify(n)===i);if(s!=null)return super.findIndex(s)}}}});function hl(t){if(t.length===0)return null;let e=1/0,i=-1/0;for(const n of t){const a=n instanceof Date?n.getTime():n;typeof a=="number"&&(a<e&&(e=a),a>i&&(i=a))}const s=[e,i];return s.every(isFinite)?s:null}function _C(t,e,i){let s=!1;return t.length>2&&(t=hl(t)??[NaN,NaN]),e!=null&&(s||(s=e>t[0]),t=[e,t[1]]),i!=null&&(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:s}}var gr=k({"packages/ag-charts-community/src/util/extent.ts"(){"use strict"}});function Uv(t,e){const i=JSON.stringify(t,null,0);return zp.has(e)||zp.set(e,new Map),zp.get(e)?.has(i)||zp.get(e)?.set(i,e(t)),zp.get(e)?.get(i)}function dn(t,e){const i=new Map,s=(...o)=>o.map(r=>typeof r=="object"||typeof r=="symbol"?r:(i.has(r)||i.set(r,{v:r}),i.get(r))),n={},a=new WeakMap;return(...o)=>{const r=o.length===0?[n]:s(...o);let l=a;for(const u of r.slice(0,-1))l.has(u)||l.set(u,new WeakMap),l=l.get(u);const c=r.at(-1);let h=l.get(c);return h?e?.("hit",t,o):(h=t(...o),l.set(c,h),e?.("miss",t,o)),h}}var zp,EC=k({"packages/ag-charts-community/src/util/memo.ts"(){"use strict";zp=new WeakMap}});function $v(t,e=[0,0]){for(const i of t)typeof i=="number"&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function P8(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>$v(s)}}function sz(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>$v(i),groupAggregateFunction:(i,s=[0,0])=>(s[0]+=i?.[0]??0,s[1]+=i?.[1]??0,s)}}function R8(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>sl.extendDomain(s)}}function PC(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>(i[0]+=e?.[0]??0,i[1]+=e?.[1]??0,i)}}function nz(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:s=>$v(s),groupAggregateFunction:(s,n=[0,0,-1])=>(n[0]+=s?.[0]??0,n[1]+=s?.[1]??0,n[2]++,n),finalFunction:(s=[0,0,0])=>{const n=s[0]+s[1];return n>=0?[0,n/s[2]]:[n/s[2],0]}}}function RC(t,e,i){const s={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(n,a=[])=>{const o=a[1]-a[0];return e.aggregateFunction(n).map(r=>r/o)}};return e.groupAggregateFunction&&(s.groupAggregateFunction=e.groupAggregateFunction),s}function az(t){return()=>{let e=0;return i=>re(i)?(e+=t?Math.max(0,i):i,e):i}}function oz(){return()=>{let t=0;return e=>{if(!re(e))return e;const i=t;return t+=e,i}}}var BC=k({"packages/ag-charts-community/src/chart/data/aggregateFunctions.ts"(){"use strict";R(),yR()}});function rz(t){return t!=null&&_v(t)}function B8(t){return t!=null}function lz(t){switch(t){case"number":case"log":case"ordinal-time":case"unit-time":case"time":case"color":return rz;default:return B8}}function cz(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Po(t,e,i={}){return{property:t,type:"key",valueType:cz(e),validation:lz(e),...i}}function Yt(t,e,i={}){return{property:t,type:"value",valueType:cz(e),validation:lz(e),...i}}function hz(t,e={}){return{property:t,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...e}}function uz(...t){const e=t.filter(i=>i!=null);return e.length===0?()=>yz:e.length===1?e[0]:()=>{const i=e.map(s=>s());return(s,n)=>i.reduce((a,o)=>o(a,n),s)}}function zC(t,e={}){const{min:i=-1/0,max:s=1/0,processor:n,...a}=e;return{type:"value",property:t,valueType:"range",validation:rz,processor:uz(n,()=>o=>re(o)?Nt(i,o,s):o),...a}}function Mm(t,e,i={}){const{onlyPositive:s,processor:n,...a}=i;return{...Yt(t,e,a),processor:uz(n,az(s))}}function z8(t,e,i={}){return{...Yt(t,e,i),processor:oz()}}function Ic(t,e,i,s,n){return[Yt(t,n,s),gz(s.groupId,e,i,s.separateNegative),...s.rangeId!=null?[R8(s.rangeId,s.groupId)]:[]]}function dz(t,e,i){return[Yt(t,e,i),fz(i.groupId)]}function F8({normaliseTo:t}){const e=(i,s)=>{if(s===0)return null;const n=(i??0)*t/s;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(i,s,n)=>{const a=j8(i,s,n);for(const o of s)for(const r of n.datumIndices[o]??[]){const l=i[o],c=l[r];if(c==null){l[r]=void 0;continue}l[r]=typeof c=="number"?e(c,a):c.map(h=>e(h,a))}}}function j8(t,e,i){const s=[0,0];for(const n of e){const a=t[n];for(const o of i.datumIndices[n]??[]){const r=a[o];if(r==null)continue;const l=typeof r=="number"?r:Math.max(...r.map(h=>h??0)),c=l<0?0:1;c===0?s[c]=Math.min(s[c],l):s[c]=Math.max(s[c],l)}}return Math.max(Math.abs(s[0]),s[1])}function Kv(t,e){return{type:"group-value-processor",matchGroupIds:t,adjust:Uv({normaliseTo:e},F8)}}function G8({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:s}){const n=t[1]-t[0],a=(o,r,l)=>{const c=t[0]+(o-r)/l*n;return l===0?e:c>=t[1]?t[1]:c<t[0]?t[0]:c};return()=>(o,r)=>{let[l,c]=o.domain.values[r];i!=null&&(l=i),s!=null&&(c=s);const h=c-l;o.domain.values[r]=[t[0],t[1]];const u=o.columns[r];for(let d=0;d<u.length;d+=1)u[d]=a(u[d],l,h)}}function Tu(t,e,i,s,n){return{type:"property-value-processor",property:t,adjust:Uv({normaliseTo:e,rangeMin:s,rangeMax:n,zeroDomain:i},G8)}}function pz(t,e,i,s){let n=Gp|Dm;if(e.valueType==="category")return i.length<t&&(n&=~Gp),n;let a=s[0]?.valueOf();for(let o=1;n!==0&&o<s.length;o++){const r=s[o]?.valueOf();(!Number.isFinite(r)||a>r)&&(n&=~Dm),Number.isFinite(r)&&a===r&&(n&=~Gp),a=r}return n}function Fp(t){return{type:"processor",property:"animationValidation",calculate(e){const{keys:i,values:s}=e.defs,{input:{count:n},domain:{keys:a,values:o},keys:r,columns:l}=e;let c=Gp|Dm;if(n!==0){for(let h=0;c!==0&&h<i.length;h++)for(const u of i[h].scopes)c&=pz(n,i[h],a[h],r[h].get(u));for(let h=0;c!==0&&h<s.length;h++){const u=s[h];t?.includes(u.id)&&(c&=pz(n,u,o[h],l[h]))}}return{uniqueKeys:(c&Gp)!==0,orderedKeys:(c&Dm)!==0}}}}function V8({mode:t,separateNegative:e}){return()=>()=>(i,s,n)=>{const a=[0,0];for(const o of s)for(const r of n.datumIndices[o]??[]){const l=i[o],c=l[r],h=eb(c)&&e?0:1;re(c)&&(t==="normal"&&(a[h]+=c),l[r]=a[h],t==="trailing"&&(a[h]+=c))}}}function W8({mode:t,sum:e}){return()=>{const i=[];let s=!0;return()=>(n,a,o)=>{let r=0;for(const l of a){const c=n[l];for(const h of o.datumIndices[l]??[]){const u=c[h],d=s&&e==="current"?0:i[l];i[l]=u;const p=e==="current"?u:d;if(!re(u)||!re(d)){c[h]=r;continue}t==="normal"&&(r+=p),c[h]=r,t==="trailing"&&(r+=p)}}s=!1}}}function gz(t,e,i,s=!1){let n;if(e.startsWith("window")){const a=e.endsWith("-trailing")?"trailing":"normal";n=Uv({mode:a,sum:i},W8)}else n=Uv({mode:e,separateNegative:s},V8);return{type:"group-value-processor",matchGroupIds:[t],adjust:n}}function H8(){return()=>(t,e,i)=>{const s=new Float64Array(e.length);let n=0;for(const a of e){const o=t[a];for(const r of i.datumIndices[a]??[]){const l=o[r];s[n]=Number.isFinite(l)?l:NaN,n+=1,o[r]=s.subarray(0,n)}}}}function fz(t){return{type:"group-value-processor",matchGroupIds:[t],adjust:H8}}function mz(t){return t.id??t.property}function U8(t,e,i){const s=new Map,n=e.defs.values;for(let r=0;r<n.length;r+=1){const l=n[r];if(l.scopes?.includes(t)===!1)continue;const c=mz(l);if(s.has(c))return;s.set(c,r)}const a=[],o=i.defs.values;for(let r=0;r<o.length;r+=1){const l=o[r];if(l.scopes?.includes(t)===!1)continue;const c=mz(l),h=s.get(c);if(h==null)return;s.delete(c),a.push({previousIndex:h,nextIndex:r})}if(s.size===0)return a}function FC(t,e,i,s,n){for(const{previousIndex:a,nextIndex:o}of i){const r=t[a],l=e[o],c=r[s],h=l[n];if(c!==h)return!1}return!0}function jp(t,e,i=!0){return{type:"processor",property:"diff",calculate(s,n){const a=new Map,o=new Map,r=new Map,l=new Map,c=e.keys,h=s.keys,u=e.columns,d=s.columns,p=U8(t,e,s);if(p==null)return n;const g=Math.max(e.input.count,s.input.count);for(let y=0;y<g;y++){const b=y<e.input.count,v=y<s.input.count,M=b?gv(c,t,y):void 0,D=M!=null?pa(M):"",L=v?gv(h,t,y):void 0,A=L!=null?pa(L):"";if(v&&b&&D===A){FC(u,d,p,y,y)||r.set(A,y);continue}const C=l.get(A);C!=null?((i||!FC(u,d,p,C,y))&&(r.set(A,y),a.set(A,y)),l.delete(A)):v&&o.set(A,y);const T=o.get(D);T!=null?((i||!FC(u,d,p,T,y))&&(r.set(D,y),a.set(D,y)),o.delete(D)):b&&(r.delete(D),l.set(D,y))}const x={changed:o.size>0||r.size>0||l.size>0,added:new Set(o.keys()),updated:new Set(r.keys()),removed:new Set(l.keys()),moved:new Set(a.keys())};return{...n,[t]:x}}}}function pa(t,...e){let i;return zt(t)?i=t.map(n=>tC(n)).join("___"):i=tC(t),(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i instanceof Date)&&e.length>0&&(i+=`___${e.join("___")}`),i}var yz,jC,GC,VC,Gp,Dm,fr=k({"packages/ag-charts-community/src/chart/data/processors.ts"(){"use strict";R(),EC(),cm(),BC(),Ga(),yz=function(t){return t},jC={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const s=typeof i[0]=="number"?i[0]:Number(i[0]),n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n<e?n:e}}},GC={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let t=NaN;return(e=-1/0,i)=>{const s=typeof i[0]=="number"?i[0]:Number(i[0]),n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n>e?n:e}}},VC={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>t?.slice().sort((e,i)=>{for(let s=0;s<e.length;s++){const n=e[s]-i[s];if(n!==0)return n}return 0})},Gp=1,Dm=2}});function $8(t){const e=t.reduce((s,n)=>s<n.length?n.length:s,0),i=new Mz;for(let s=0;s<t.length;s++){const n=t[s];for(;n.length<e;)n.push("");i.insertTick(n,s)}return i}function K8(t,e,i){const s=e.index-t.index,n=i/s;e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function Y8(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function Z8({children:t}){let e=0,i=0;for(let s=t.length-1;s>=0;s--){const n=t[s];n.prelim+=e,n.mod+=e,i+=n.change,e+=n.shift+i}}function X8(t,e){const i=t.getLeftSibling();if(i){let s=t,n=t,a=i,o=n.getLeftmostSibling(),r=n.mod,l=s.mod,c=a.mod,h=o.mod;for(;a.nextRight()&&n.nextLeft();){a=a.nextRight(),n=n.nextLeft(),o=o.nextLeft(),s=s.nextRight(),s.ancestor=t;const u=a.prelim+c-(n.prelim+r)+1;u>0&&(K8(Y8(a,t,e),t,u),r+=u,l+=u),c+=a.mod,r+=n.mod,h+=o.mod,l+=s.mod}a.nextRight()&&!s.nextRight()?s.mod+=c-l:(n.nextLeft()&&!o.nextLeft()&&(o.mod+=r-h),e=t)}return e}function xz(t){const{children:e}=t;if(e.length){let[i]=e;for(const a of e)xz(a),i=X8(a,i);Z8(t);const s=(e[0].prelim+e.at(-1).prelim)/2,n=t.getLeftSibling();n?(t.prelim=n.prelim+1,t.mod=t.prelim-s):t.prelim=s}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+1:0}}function bz(t,e,i){t.position=t.prelim+e,i.insertNode(t);for(const s of t.children)bz(s,e+t.mod,i)}function vz(t){const{children:e}=t;let i=0;for(const s of e)vz(s),s.children.length?i+=s.leafCount:i++;t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[e.length-1].subtreeRight,t.position=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.position,t.subtreeRight=t.position)}function q8(t){const e=new Dz,i=$8(t);return xz(i),bz(i,-i.prelim,e),vz(i),e}var Sz,Mz,Dz,Q8=k({"packages/ag-charts-community/src/chart/axis/tree.ts"(){"use strict";Sz=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){t>this.right&&(this.right=t),t<this.left&&(this.left=t),e>this.bottom&&(this.bottom=e),e<this.top&&(this.top=e)}},Mz=class f5{constructor(e="",i,s){this.label=e,this.parent=i,this.refId=s,this.position=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=i?i.depth+1:0}insertTick(e,i){let s=this;for(let n=0;n<e.length;n++){const a=e[n],o=n!==e.length-1,{children:r}=s,l=r.find(c=>c.label===a);if(l&&o)s=l;else{const c=new f5(a,s,i);c.index=r.length,r.push(c),o&&(s=c)}}}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((e,i)=>i!==this.index)??[]}},Dz=class{constructor(){this.dimensions=new Sz,this.nodes=[],this.depth=0}insertNode(t){this.depth<t.depth&&(this.depth=t.depth),this.dimensions.update(t.position,t.depth),this.nodes.push(t)}scaling(t,e){let i=1;if(t>0){const{left:s,right:n}=this.dimensions;n!==s&&(i=t/(n-s))}return e&&(i*=-1),i}}}}),Ro,km,Yv,Ac,Zv=k({"packages/ag-charts-community/src/chart/axis/groupedCategoryAxis.ts"(){"use strict";R(),E8(),Ft(),Nn(),hs(),pi(),gr(),mt(),cC(),Hs(),fr(),kc(),Q8(),Ro=class extends wt{constructor(){super(...arguments),this.enabled=!0}},S([I],Ro.prototype,"enabled",2),S([I],Ro.prototype,"avoidCollisions",2),S([I],Ro.prototype,"color",2),S([I],Ro.prototype,"spacing",2),S([I],Ro.prototype,"rotation",2),S([I],Ro.prototype,"fontStyle",2),S([I],Ro.prototype,"fontWeight",2),S([I],Ro.prototype,"fontSize",2),S([I],Ro.prototype,"fontFamily",2),km=class extends wt{constructor(){super(...arguments),this.enabled=!0}},S([I],km.prototype,"enabled",2),S([I],km.prototype,"width",2),S([I],km.prototype,"stroke",2),Yv=class extends wt{constructor(){super(...arguments),this.label=new Ro,this.tick=new km}},S([I],Yv.prototype,"label",2),S([I],Yv.prototype,"tick",2),Ac=class extends cl{constructor(t){super(t,new OC),this.tickScale=new OC,this.depthOptions=new up(Yv),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:t}=this.tickTreeLayout,{range:e,step:i,inset:s,bandwidth:n}=this.scale,a=Math.abs(e[1]-e[0])-i,o=this.tickTreeLayout.scaling(a,e[0]>e[1]),r=s+n/2;let l=0;for(const c of t){const h=c.position*o;l>h&&(l=h),c.screen=h+r}for(const c of t)c.screen-=l}getDepthOptionsMap(t){const e=[],{depthOptions:i,label:s}=this,n=this.horizontal?0:-90;for(let a=0;a<t;a++)e.push(i[a]?.label.enabled??s.enabled?{enabled:!0,spacing:i[a]?.label.spacing??s.spacing,rotation:i[a]?.label.rotation??(a?n:s.rotation),avoidCollisions:i[a]?.label.avoidCollisions??s.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1});return e}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((t,e)=>t.setProperties(e))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){if(this.updateDirection(),this.updateScale(),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:ut.zero,spacing:0,separatorLayout:[],tickLabelLayout:[]};const{step:t}=this.scale,{title:e,label:i,range:s,depthOptions:n,horizontal:a}=this,{depth:o,nodes:r}=this.tickTreeLayout,l=Math.ceil(i.fontSize/t),c=a?-i.getSideFlag():i.getSideFlag(),h=[],u=new Map,d=new su,p=this.getDepthOptionsMap(o),g=c*p[0].spacing,f=(P,O)=>{const B=o-P.depth;if(!p[B]?.enabled||O%l!==0||!JO(P.screen,s))return!1;const G=this.formatTick(P.label,O-1,this.scale.domain),V=this.getLabelStyles({value:G,depth:B},n[B]?.label);return d.setProperties({...V,text:G,textAlign:"center",textBaseline:i.parallel?"hanging":"bottom",lineHeight:Te.getLineHeight(V.fontSize),x:a?P.screen:g,y:a?g:P.screen,rotation:0}),!0},x={};r.forEach((P,O)=>{const B=o-P.depth;if(!f(P,O)||!d.getBBox())return;u.set(O,d.getBBox()),d.rotation=Yr(p[B]?.rotation);const{width:V,height:W}=d.getBBox(),H=a?W:V;x[B]??(x[B]=0),x[B]<H&&(x[B]=H)});const y=lC(),b=new Map,v=P=>{if(P===0)return 0;let O=x[0];for(let B=1;B<=P;B++)O+=p[B].spacing,B!==P&&(O+=x[B]);return O};r.forEach((P,O)=>{if(O===0)return;const B=f(P,O),G=!P.children.length,V=o-P.depth;if(P.parent){const z=G?P.position:P.position-(P.leafCount-1)/2;if(!b.has(z)){const Y=this.depthOptions[V]?.tick;let Z=x[0];for(let X=0;X<=V;X++)Z+=p[X].spacing,X!==0&&(Z+=x[X]);b.set(z,{tickSize:Z,tickStroke:Y?.stroke,tickWidth:Y?.enabled!==!1?Y?.width:0})}}if(!B)return;const W=Yr(p[V].rotation),{width:H,height:$}=u.get(O),F=v(V);if(d.textAlign="end",d.textBaseline="middle",d.rotation=W,a?(d.x+=H/2,d.y+=(F+Zk(H/2,$/2,W))*c,d.rotationCenterX=P.screen,d.rotationCenterY=d.y):(d.x+=F*c+Zk((p[V].spacing*c+H)/2,i.mirrored?H:0,W),d.rotationCenterX=d.x-H/2,d.rotationCenterY=P.screen),p[V].avoidCollisions){const{width:z,height:Y}=d.getBBox(),Z=a?z:Y,X=G?t:P.leafCount*t;if(Z>X){u.delete(O);return}}const{text:j=""}=d;h.push({text:j,visible:!0,range:this.scale.range,tickId:y(j),fill:d.fill,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,fontWeight:d.fontWeight,rotation:d.rotation,rotationCenterX:d.rotationCenterX,rotationCenterY:d.rotationCenterY,textAlign:d.textAlign,textBaseline:d.textBaseline,x:d.x,y:d.y}),u.set(O,Ve.toCanvas(d))});const{enabled:M,stroke:D,width:L}=this.line;this.lineNode.datum=a?{x1:s[0],x2:s[1],y1:0,y2:0}:{x1:0,x2:0,y1:s[0],y2:s[1]},this.lineNode.setProperties({stroke:D,strokeWidth:M?L:0});const A=[...b.values()];A.push(A[0]);const C=[this.lineNodeBBox(),ut.merge(u.values()),new ut(0,0,A[0].tickSize*c,0)];let T=0;if(e.enabled){const P=ut.merge(C);T=a?P.height:P.width,C.push(this.titleBBox(this.scale.domain,T))}return{bbox:ut.merge(C),spacing:T,separatorLayout:A,tickLabelLayout:h}}update(){if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();const{tickScale:t,tick:e,gridLine:i,gridLength:s}=this,{separatorLayout:n,spacing:a}=this.computedLayout,{position:o,horizontal:r,gridPadding:l}=this,c=o==="bottom"||o==="right"?-1:1,h=l,u=c*s-l,d=t.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}).ticks.map((p,g)=>({tickId:pa(p,g),offset:Math.round(t.convert(p))}));this.gridLineGroupSelection.update(i.enabled&&s?d.map(({tickId:p,offset:g},f)=>{const[x,y,b,v]=r?[g,g,h,u]:[h,u,g,g],{style:M,width:D}=i,{stroke:L,lineDash:A}=M[f%M.length]??{};return{tickId:p,offset:g,x1:x,y1:b,x2:y,y2:v,stroke:L,strokeWidth:D,lineDash:A}}):[]),this.tickLineGroupSelection.update(e.enabled?d.map(({tickId:p,offset:g},f)=>{const{tickSize:x=this.getTickSize(),tickStroke:y=e.stroke,tickWidth:b=e.width}=n[f]??{},v=-c*x,[M,D,L,A]=r?[g,g,0,v]:[0,v,g,g];return{tickId:p,offset:g,x1:M,y1:L,x2:D,y2:A,stroke:y,strokeWidth:b,lineDash:void 0}}):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(this.scale.domain,a),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:t,tickLabelLayout:e,spacing:i,bbox:s}=this.computeLayout();return this.computedLayout={separatorLayout:t,tickLabelLayout:e,spacing:i},{bbox:s,niceDomain:this.scale.domain}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){const{direction:t}=this,e=this.boundSeries.filter(n=>n.visible).flatMap(n=>n.getDomain(t));this.dataDomain={domain:hl(e)??this.filterDuplicateArrays(e),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const i=this.dataDomain.domain.map(n=>wf(Se(n)&&"value"in n?n.value:n));this.tickTreeLayout=q8(i);const s=[];for(const n of this.tickTreeLayout.nodes)n.leafCount||n.refId==null||s.push(this.dataDomain.domain[n.refId]);this.scale.domain=UO(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]])}filterDuplicateArrays(t){const e=new Set;return t.filter(i=>{const s=zt(i)?JSON.stringify(i):i;return e.has(s)?!1:(e.add(s),!0)})}},Ac.className="GroupedCategoryAxis",Ac.type="grouped-category",S([I],Ac.prototype,"depthOptions",2)}});function WC(t,e,i){const s=Math.min(...e),n=kz[t]??Iz;return s>=0?n(t,i):-n(t,-i)}function HC(t,e,i){const s=Math.min(...e),n=Az[t]??Cz;return s>=0?n(t,i):-n(t,-i)}var kz,Iz,Az,Cz,Xv,UC=k({"packages/ag-charts-community/src/scale/logScale.ts"(){"use strict";R(),la(),bc(),Us(),ez(),kz={2:(t,e)=>Math.log2(e),[Math.E]:(t,e)=>Math.log(e),10:(t,e)=>Math.log10(e)},Iz=(t,e)=>Math.log(e)/Math.log(t),Az={[Math.E]:(t,e)=>Math.exp(e),10:(t,e)=>e>=0?10**e:1/10**-e},Cz=(t,e)=>t**e,Xv=class m5 extends ye{constructor(e=[1,10],i=[0,1]){super(e,i),this.type="log",this.defaultClamp=!0,this.base=10,this.log=s=>WC(this.base,this.domain,s),this.pow=s=>HC(this.base,this.domain,s)}static is(e){return e instanceof m5}toDomain(e){return e}transform(e){const[i,s]=ns(this.domain);return i>=0!=s>=0?NaN:i>=0?Math.log(e):-Math.log(-e)}transformInvert(e){const[i,s]=ns(this.domain);return i>=0!=s>=0?NaN:i>=0?Math.exp(e):-Math.exp(-e)}niceDomain(e,i=this.domain){if(i.length<2)return[];const{base:s}=this,[n,a]=i,o=n>a?Math.ceil:Math.floor,r=n>a?Math.floor:Math.ceil,l=HC(s,i,o(WC(s,i,n))),c=HC(s,i,r(WC(s,i,a)));return[l,c]}ticks({interval:e,tickCount:i=ye.defaultTickCount},s=this.domain,n){if(!s||s.length<2||i<1)return;const a=this.base,[o,r]=s,l=Math.min(o,r),c=Math.max(o,r);let h=this.log(l),u=this.log(c);if(e){const x=D=>D>=l&&D<=c,y=Math.min(Math.abs(e),Math.abs(u-h)),{ticks:b,count:v}=wv(h,u,y,n),M=b.map(this.pow).filter(x);if(!Np(M.length,this.getPixelRange()))return{ticks:M,count:v}}if(!t_(a)||u-h>=i){const x=Math.min(u-h,i),{ticks:y,count:b}=om(h,u,x,void 0,void 0,n);return{ticks:y.map(this.pow),count:b}}const d=[],p=l>0;h=Math.floor(h)-1,u=Math.round(u)+1;const g=Dp(this.range)/i;let f=1/0;for(let x=h;x<=u;x++){const y=this.convert(this.pow(x+1));for(let b=1;b<a;b++){const v=p?b:a-b+1,M=this.pow(x)*v,D=this.convert(M),L=Math.abs(f-D),A=Math.abs(D-y),C=L>=g&&A>=g;M>=l&&M<=c&&(b===1||C||d.length===0)&&(d.push(M),f=D)}}return tz(d,p,n)}tickFormatter({specifier:e}){return e!=null?Ek(e):String}datumFormatter(e){return this.tickFormatter(e)}}}}),$a,Nu=k({"packages/ag-charts-community/src/scale/linearScale.ts"(){"use strict";gc(),bc(),Us(),$a=class pO extends ye{constructor(){super([0,1],[0,1]),this.type="number"}static is(e){return e instanceof pO}static getTickStep(e,i,s){const{interval:n,tickCount:a=ye.defaultTickCount,minTickCount:o,maxTickCount:r}=s;return n??rm(e,i,a,o,r)}toDomain(e){return e}ticks({interval:e,tickCount:i=ye.defaultTickCount,minTickCount:s,maxTickCount:n},a=this.domain,o){if(!a||a.length<2||i<1||!a.every(isFinite))return{ticks:[],count:0};const[r,l]=a;if(e){const c=Math.abs(e);if(!Np((l-r)/c,this.getPixelRange()))return wv(r,l,c,o)}return om(r,l,i,s,n,o)}niceDomain(e,i=this.domain){if(i.length<2)return[];const{tickCount:s=ye.defaultTickCount}=e;let[n,a]=i;if(s===1)[n,a]=RR(n,a);else if(s>1){const o=n>a?Math.ceil:Math.floor,r=n>a?Math.floor:Math.ceil,l=4;for(let c=0;c<l;c++){const h=n,u=a,d=pO.getTickStep(n,a,e),[p,g]=i;if(n=o(p/d)*d,a=r(g/d)*d,n===h&&a===u)break}}return[n,a]}tickFormatter({ticks:e,fractionDigits:i,specifier:s}){return s!=null?PR(e,s):n=>tl(n,i)}datumFormatter({ticks:e,fractionDigits:i,specifier:s}){return s!=null?PR(e,s):n=>tl(n,i+1)}}}}),mr,Im=k({"packages/ag-charts-community/src/chart/axis/numberAxis.ts"(){"use strict";Nu(),gr(),mt(),gm(),mr=class extends _p{constructor(t,e=new $a){super(t,e)}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=_C(t,e,i);return{domain:s,clipped:n}}},mr.className="NumberAxis",mr.type="number",S([I],mr.prototype,"min",2),S([I],mr.prototype,"max",2)}}),Ou,qv=k({"packages/ag-charts-community/src/chart/axis/logAxis.ts"(){"use strict";R(),UC(),gr(),Im(),Ou=class extends mr{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=_C(t,e,i);return s[0]<0&&s[1]>0||t[0]<0&&t[1]>0?(st.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):s[0]===0||s[1]===0||t[0]===0||t[1]===0?(st.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):{domain:s,clipped:n}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new Xv)}defaultDatumFormatter(t,e){return String(t)}defaultLabelFormatter(t,e){return String(t)}},Ou.className="LogAxis",Ou.type="log"}});function Lz(t,e,i){let s=!1;return typeof e=="number"&&(e=new Date(e)),typeof i=="number"&&(i=new Date(i)),t.length>2&&(t=hl(t)?.map(n=>new Date(n))??[]),e instanceof Date&&(s||(s=e>t[0]),t=[e,t[1]]),i instanceof Date&&(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{domain:t,clipped:s}}var _u,ga,Vp=k({"packages/ag-charts-community/src/chart/axis/timeAxis.ts"(){"use strict";Nv(),gr(),mt(),dm(),iC(),gm(),_u=class extends wt{constructor(){super(...arguments),this.enabled=!1,this.label=new Ii,this.tick=new Sc}},S([I],_u.prototype,"enabled",2),S([I],_u.prototype,"label",2),S([I],_u.prototype,"tick",2),ga=class extends _p{constructor(t){super(t,new Op),this.parentLevel=new _u,this.min=void 0,this.max=void 0,this.groupPaddingInner=.1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(t){return Lz(t,this.min,this.max)}},ga.className="TimeAxis",ga.type="time",S([I],ga.prototype,"parentLevel",2),S([I],ga.prototype,"min",2),S([I],ga.prototype,"max",2),S([I],ga.prototype,"groupPaddingInner",2),S([I],ga.prototype,"paddingInner",2),S([I],ga.prototype,"paddingOuter",2)}}),ul,wz=k({"packages/ag-charts-community/src/chart/axis/unitTimeAxis.ts"(){"use strict";Cv(),mt(),kc(),Vp(),ul=class extends cl{constructor(t){super(t,new En),this.parentLevel=new _u,this.min=void 0,this.max=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}updateScale(){super.updateScale(),this.scale.interval=this.unit}normaliseDataDomain(t){return Lz(t,this.min,this.max)}},ul.className="UnitTimeAxis",ul.type="unit-time",S([I],ul.prototype,"parentLevel",2),S([I],ul.prototype,"min",2),S([I],ul.prototype,"max",2),S([I],ul.prototype,"unit",2)}}),Wp,Tz=k({"packages/ag-charts-community/src/scene/util/corner.ts"(){"use strict";Wp=(t,{x0:e,y0:i,x1:s,y1:n,cx:a,cy:o},r,l)=>{if(l&&t.moveTo(e,i),e!==s||i!==n){const c=Math.atan2(i-o,e-a),h=Math.atan2(n-o,s-a);t.arc(a,o,r,c,h)}else t.lineTo(e,i)}}}),$C,Am,Cm,Ts,Lm=k({"packages/ag-charts-community/src/scene/shape/rect.ts"(){"use strict";ip(),Ft(),aa(),Ib(),Tz(),_o(),hc(),$C=1e-6,Am=(t,e,i,s,n)=>{let a=!1,o=!1,r=s-Math.sqrt(Math.max(n**2-i**2,0)),l=0,c=0,h=i-Math.sqrt(Math.max(n**2-s**2,0));return r>t?(a=!0,r=t,l=i-Math.sqrt(Math.max(n**2-(s-t)**2))):r<$C&&(r=0),h>e?(o=!0,c=s-Math.sqrt(Math.max(n**2-(i-e)**2)),h=e):h<$C&&(h=0),{leading0:r,leading1:l,trailing0:c,trailing1:h,leadingClipped:a,trailingClipped:o}},Cm=(t,e,i,s,n,a,o)=>{let{topLeft:r,topRight:l,bottomRight:c,bottomLeft:h}=a;const u=Math.max(r+h,l+c),d=Math.max(r+l,h+c);if(u<=0&&d<=0){o==null?t.rect(e,i,s,n):t.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&r===l&&r===c&&r===h){t.roundRect(e,i,s,n,r);return}if(s<0&&(e+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(o==null)o=new ut(e,i,s,n);else{const A=Math.max(e,o.x),C=Math.min(e+s,o.x+o.width),T=Math.max(i,o.y),N=Math.min(i+n,o.y+o.height);o=new ut(A,T,C-A,N-T)}const p=Math.max(u/n,d/s,1);p>1&&(r/=p,l/=p,c/=p,h/=p);let g=!0,f=!0,x=!0,y=!0,b,v,M,D;if(g){const A=Am(o.height,o.width,Math.max(e+r-o.x,0),Math.max(i+r-o.y,0),r);A.leadingClipped&&(y=!1),A.trailingClipped&&(f=!1);const C=Math.max(o.x+A.leading1,o.x),T=Math.max(o.y+A.leading0,o.y),N=Math.max(o.x+A.trailing1,o.x),P=Math.max(o.y+A.trailing0,o.y),O=e+r,B=i+r;b={x0:C,y0:T,x1:N,y1:P,cx:O,cy:B}}if(f){const A=Am(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(e+s-l),0),l);A.leadingClipped&&(g=!1),A.trailingClipped&&(x=!1);const C=Math.min(o.x+o.width-A.leading0,o.x+o.width),T=Math.max(o.y+A.leading1,o.y),N=Math.min(o.x+o.width-A.trailing0,o.x+o.width),P=Math.max(o.y+A.trailing1,o.y),O=e+s-l,B=i+l;v={x0:C,y0:T,x1:N,y1:P,cx:O,cy:B}}if(x){const A=Am(o.height,o.width,Math.max(o.x+o.width-(e+s-c),0),Math.max(o.y+o.height-(i+n-c),0),c);A.leadingClipped&&(f=!1),A.trailingClipped&&(y=!1);const C=Math.min(o.x+o.width-A.leading1,o.x+o.width),T=Math.min(o.y+o.height-A.leading0,o.y+o.height),N=Math.min(o.x+o.width-A.trailing1,o.x+o.width),P=Math.min(o.y+o.height-A.trailing0,o.y+o.height),O=e+s-c,B=i+n-c;M={x0:C,y0:T,x1:N,y1:P,cx:O,cy:B}}if(y){const A=Am(o.width,o.height,Math.max(o.y+o.height-(i+n-h),0),Math.max(e+h-o.x,0),h);A.leadingClipped&&(x=!1),A.trailingClipped&&(g=!1);const C=Math.max(o.x+A.leading0,o.x),T=Math.min(o.y+o.height-A.leading1,o.y+o.height),N=Math.max(o.x+A.trailing0,o.x),P=Math.min(o.y+o.height-A.trailing1,o.y+o.height),O=e+h,B=i+n-h;D={x0:C,y0:T,x1:N,y1:P,cx:O,cy:B}}let L=!1;g&&b!=null&&(Wp(t,b,r,!L),L||(L=!0)),f&&v!=null&&(Wp(t,v,l,!L),L||(L=!0)),x&&M!=null&&(Wp(t,M,c,!L),L||(L=!0)),y&&D!=null&&Wp(t,D,h,!L),t.closePath()},Ts=class extends Zs{constructor(){super(...arguments),this.borderPath=new Qh,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=ra.defaultStyles.strokeWidth,this.effectiveStrokeWidth=ra.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){const{path:t,borderPath:e,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:n,bottomRightCornerRadius:a,bottomLeftCornerRadius:o}=this;let{x:r,y:l,width:c,height:h,strokeWidth:u,clipBBox:d}=this;const g=1/(this.layerManager?.canvas.pixelRatio??1);let f=1;if(t.clear(!0),e.clear(!0),i&&(c<=g&&(f*=c/g),h<=g&&(f*=h/g),c=this.align(r,c),h=this.align(l,h),r=this.align(r),l=this.align(l),d=d!=null?new ut(this.align(d.x),this.align(d.y),this.align(d.x,d.width),this.align(d.y,d.height)):void 0),u)if(c<g){const x=r+g/2;e.moveTo(x,l),e.lineTo(x,l+h),u=g,this.borderClipPath=void 0}else if(h<g){const x=l+g/2;e.moveTo(r,x),e.lineTo(r+c,x),u=g,this.borderClipPath=void 0}else if(u<c&&u<h){const x=u/2;r+=x,l+=x,c-=u,h-=u;const y=d?.clone().shrink(x),b={topLeft:s>0?s-u:0,topRight:n>0?n-u:0,bottomRight:a>0?a-u:0,bottomLeft:o>0?o-u:0};this.borderClipPath=void 0,c>0&&h>0&&(y==null||y?.width>0&&y?.height>0)&&(Cm(t,r,l,c,h,b,y),Cm(e,r,l,c,h,b,y))}else this.borderClipPath=this.borderClipPath??new Qh,this.borderClipPath.clear(!0),this.borderClipPath.rect(r,l,c,h),e.rect(r,l,c,h);else{const x={topLeft:s,topRight:n,bottomRight:a,bottomLeft:o};this.borderClipPath=void 0,Cm(t,r,l,c,h,x,d)}if([s,n,a,o].every(x=>x===0)){const x=this.getBBox();this.hittester=x.containsPoint.bind(x),this.distanceSquared=(y,b)=>this.getBBox().distanceSquared(y,b)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=u,this.lastUpdatePathStrokeWidth=u,this.microPixelEffectOpacity=f}computeBBox(){const{x:t,y:e,width:i,height:s,clipBBox:n}=this;return n?.clone()??new ut(t,e,i,s)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAndAlpha(t){super.applyFillAndAlpha(t),t.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(t){super.applyStrokeAndAlpha(t),t.globalAlpha*=this.microPixelEffectOpacity}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){const{globalAlpha:s}=t,{lineDash:n,lineDashOffset:a,lineCap:o,lineJoin:r,borderPath:l,borderClipPath:c}=this;c&&t.clip(c.getPath2D()),this.applyStrokeAndAlpha(t),t.lineWidth=i,n&&t.setLineDash(n),a&&(t.lineDashOffset=a),o&&(t.lineCap=o),r&&(t.lineJoin=r),t.stroke(l.getPath2D()),t.globalAlpha=s}}},Ts.className="Rect",S([ot()],Ts.prototype,"x",2),S([ot()],Ts.prototype,"y",2),S([ot()],Ts.prototype,"width",2),S([ot()],Ts.prototype,"height",2),S([ot()],Ts.prototype,"topLeftCornerRadius",2),S([ot()],Ts.prototype,"topRightCornerRadius",2),S([ot()],Ts.prototype,"bottomRightCornerRadius",2),S([ot()],Ts.prototype,"bottomLeftCornerRadius",2),S([na({equals:rc.equals})],Ts.prototype,"clipBBox",2),S([ot()],Ts.prototype,"crisp",2)}}),Eu,Nz=k({"packages/ag-charts-community/src/chart/background/background.ts"(){"use strict";tr(),We(),Lm(),Nn(),mt(),un(),Eu=class extends Of{constructor(t){super(),this.ctx=t,this.rectNode=new Ts,this.textNode=new Gi,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(t.scene.attachNode(this.node),t.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)))}createNode(){return new Ot({name:"background",zIndex:0})}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}},S([I,us("node","visible")],Eu.prototype,"visible",2),S([I,us("rectNode","fill")],Eu.prototype,"fill",2),S([I],Eu.prototype,"image",2),S([I,us("textNode")],Eu.prototype,"text",2)}}),KC,Oz=k({"packages/ag-charts-community/src/chart/background/backgroundModule.ts"(){"use strict";Nz(),KC={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Eu(t)}}});function J8({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:a=0,forceResult:o=!1}){const r=t==="horizontal",l={max:r?s:i,fn:r?d=>d.width:d=>d.height,padding:r?a:n},c={max:r?i:s,fn:r?d=>d.height:d=>d.width,padding:r?n:a};let h=0;const u=[];for(;h<e.length;){const d=e.slice(h),p=tq(d,h,l,c,o);if(!p)return;h+=p.processedBBoxCount,u.push(p.pageIndices)}return iq(u,t,e,n,a)}function tq(t,e,i,s,n){let o=nq(t,i);if(o<1){if(!n)return;o=1}let r=o;for(;r>=1;){const l=eq(t,e,r,i,s,n);if(l==null&&r<=1)return;if(l==null){r--;continue}if(typeof l=="number"){if(l<=1)return;r=l<r&&l>1?l:r,r--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function eq(t,e,i,s,n,a){const o=[];let r=0,l=0,c=[];const h=[];for(let u=0;u<t.length;u++){const d=(u+i)%i;d===0&&(r+=l,l=0,c.length>0&&o.push(c),c=[]);const p=s.fn(t[u])+s.padding;h[d]=Math.max(h[d]??0,p),l=Math.max(l,n.fn(t[u])+n.padding);const g=r+l,f=!a||o.length>0;if(g>n.max&&f){c=[];break}if(h.reduce((y,b)=>y+b,0)>s.max&&!a)return h.length<i?h.length:void 0;c.push(u+e)}return c.length>0&&o.push(c),o.length>0?o:void 0}function iq(t,e,i,s,n){let a=0,o=0;return{pages:t.map(l=>{e==="horizontal"&&(l=sq(l));let c=0;const h=l.map(p=>{const g=p.map(y=>(c=Math.max(y,c),i[y]));let f=0,x=0;return g.forEach(y=>{f+=y.height+s,x=Math.max(x,y.width+n)}),{indices:p,bboxes:g,columnHeight:Math.ceil(f),columnWidth:Math.ceil(x)}});let u=0,d=0;return h.forEach(p=>{u+=p.columnWidth,d=Math.max(d,p.columnHeight)}),a=Math.max(u,a),o=Math.max(d,o),{columns:h,startIndex:l[0][0],endIndex:c,pageWidth:u,pageHeight:d}}),maxPageWidth:a,maxPageHeight:o}}function sq(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((i,s)=>{i.forEach((n,a)=>{e[a][s]=n})}),e}function nq(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)if(s+=e.fn(t[n])+e.padding,s>e.max)return i/n<2?Math.ceil(i/2):n;return i}var aq=k({"packages/ag-charts-community/src/chart/gridLayout.ts"(){"use strict"}}),Pu,yr,wm,Cc,oq=k({"packages/ag-charts-community/src/chart/pagination/pagination.ts"(){"use strict";R(),We(),Nn(),hs(),mt(),mt(),un(),Eo(),Pu=class extends wt{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},S([I],Pu.prototype,"color",2),S([I],Pu.prototype,"fontStyle",2),S([I],Pu.prototype,"fontWeight",2),S([I],Pu.prototype,"fontSize",2),S([I],Pu.prototype,"fontFamily",2),yr=class extends wt{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}},S([I],yr.prototype,"size",2),S([I],yr.prototype,"fill",2),S([I],yr.prototype,"fillOpacity",2),S([I],yr.prototype,"stroke",2),S([I],yr.prototype,"strokeWidth",2),S([I],yr.prototype,"strokeOpacity",2),wm=class extends wt{constructor(t){super(),this.parent=t,this.shape="triangle",this.size=15,this.padding=8}},S([wn({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],wm.prototype,"shape",2),S([I],wm.prototype,"size",2),S([I],wm.prototype,"padding",2),Cc=class extends wt{constructor(t,e){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.id=ia(this),this.marker=new wm(this),this.activeStyle=new yr,this.inactiveStyle=new yr,this.highlightStyle=new yr,this.label=new Pu,this.group=new ss({name:"pagination"}),this.labelNode=new Gi,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new Wi,this.previousButton=new Wi,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.getBBox();this.nextButton.translationX=t.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:a,highlightStyle:o,highlightActive:r}=this,l=(c,h)=>h?a:c===r?o:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){const{shape:i,size:s}=this.marker;t.shape=i,t.size=s,t.fill=e.fill,t.fillOpacity=e.fillOpacity??1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=e===0,s=t===e-1,n=t===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}setPage(t){t=Nt(0,t,Math.max(0,this.totalPages-1)),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}getCursor(t){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[t]?void 0:"pointer"}onClick(t,e){t.preventDefault(),e==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):e==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(t){this.highlightActive=t,this.updateMarkers(),this.chartUpdateCallback(7)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(7)}attachPagination(t){t.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){const t=Ve.toCanvas(this.previousButton),e=Ve.toCanvas(this.nextButton);return{prev:t,next:e}}},Cc.className="Pagination",S([I],Cc.prototype,"marker",2),S([I],Cc.prototype,"activeStyle",2),S([I],Cc.prototype,"inactiveStyle",2),S([I],Cc.prototype,"highlightStyle",2),S([I],Cc.prototype,"label",2)}}),_z,rq=k({"packages/ag-charts-community/src/chart/legend/legendDOMProxy.ts"(){"use strict";R(),hs(),kI(),_z=class{constructor(t,e){this.dirty=!0,this.destroyFns=new Hb,this.itemList=t.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${e}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=t.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${e}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=Bt("p"),this.itemDescription.style.display="none",this.itemDescription.id=Nf(),this.itemDescription.textContent=this.getItemAriaDescription(t.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(t){if(!this.dirty)return;const{ctx:e,itemSelection:i,datumReader:s,itemListener:n}=t,a=e.localeManager,o=i.length;i.each((r,l,c)=>{r.proxyButton?.destroy(),r.proxyButton=e.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(a,s.getItemLabel(l),c,o),ariaChecked:!!r.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const h=r.proxyButton;h.addListener("click",u=>n.onClick(u.sourceEvent,r.datum,h)),h.addListener("dblclick",u=>n.onDoubleClick(u.sourceEvent,r.datum)),h.addListener("mouseenter",u=>n.onHover(u.sourceEvent,r)),h.addListener("mouseleave",()=>n.onLeave()),h.addListener("contextmenu",u=>n.onContextClick(u,r)),h.addListener("blur",()=>n.onLeave()),h.addListener("focus",u=>n.onHover(u.sourceEvent,r)),h.addListener("drag-start",()=>{})}),this.dirty=!1}update(t){t.visible&&(this.initLegendList(t),this.updateItemProxyButtons(t),this.updatePaginationProxyButtons(t,!0)),this.updateVisibility(t.visible)}updateVisibility(t){this.itemList.setHidden(!t),this.paginationGroup.setHidden(!t)}updateItemProxyButtons({itemSelection:t,group:e,pagination:i,interactive:s}){const n=Ve.toCanvas(e);this.itemList.setBounds(n);const a=Math.max(...t.nodes().map(o=>o.getBBox().height));t.each((o,r)=>{if(o.proxyButton){const l=o.pageIndex===i.currentPage,{x:c,y:h,height:u,width:d}=Ve.toCanvas(o),p=(a-u)/2,g={x:c-n.x,y:h-p-n.y,height:a,width:d},f=s&&l;o.proxyButton.setCursor("pointer"),o.proxyButton.setEnabled(f),o.proxyButton.setPointerEvents(f?void 0:"none"),o.proxyButton.setBounds(g)}})}updatePaginationProxyButtons(t,e){const{pagination:i}=t;if(this.paginationGroup.setHidden(!i.visible),e&&"ctx"in t){const{ctx:a,oldPages:o,newPages:r}=t,l=(o?.length??r.length)>1,c=r.length>1;l!==c&&(c?(this.prevButton=a.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",h=>this.onPageButton(t,h,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0)),this.nextButton??(this.nextButton=a.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",h=>this.onPageButton(t,h,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0))):(this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0))}const{prev:s,next:n}=i.computeCSSBounds();this.prevButton?.setBounds(s),this.nextButton?.setBounds(n),this.prevButton?.setEnabled(i.currentPage!==0),this.nextButton?.setEnabled(i.currentPage!==i.totalPages-1),this.nextButton?.setCursor(i.getCursor("next")),this.prevButton?.setCursor(i.getCursor("previous"))}onPageButton(t,e,i){t.pagination.onClick(e.sourceEvent,i),this.updatePaginationProxyButtons(t,!1)}onDataUpdate(t,e){this.dirty=t.length!==e.length||t.some((i,s,n)=>{const[a,o]=[e[s],t[s]];return a.id!==o.id})}onLocaleChanged(t,e,i){const s=e.length;e.each(({proxyButton:n},a,o)=>{const r=n?.getElement();if(r!=null){const l=i.getItemLabel(a);r.textContent=this.getItemAriaText(t,l,o,s)}}),this.itemDescription.textContent=this.getItemAriaDescription(t)}onPageChange(t){this.updateItemProxyButtons(t),this.updatePaginationProxyButtons(t,!1)}getItemAriaText(t,e,i,s){return i>=0&&e?(i++,t.t("ariaLabelLegendItem",{label:e,index:i,count:s})):t.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(t){return t.t("ariaDescriptionLegendItem")}}}});function Ez(t,e,i,s){const n={defaultPrevented:!1,apiEvent:{type:t,itemId:e,seriesId:i,event:s,preventDefault:()=>n.defaultPrevented=!0}};return n}var lq=k({"packages/ag-charts-community/src/chart/legend/legendEvent.ts"(){"use strict"}}),fa,Pz=k({"packages/ag-charts-community/src/chart/legend/legendMarkerLabel.ts"(){"use strict";Ft(),aa(),We(),xc(),Nn(),hs(),un(),Eo(),fa=class extends tu(Ot){constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new Ot({name:"legend-markerLabel-symbols"})),this.label=this.appendChild(new Gi),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new Wi({zIndex:1})),this.line=this.symbolsGroup.appendChild(new ws({zIndex:0}));const{label:t,line:e,symbolsGroup:i}=this;e.visible=!1,i.renderToOffscreenCanvas=!0,i.optimizeForInfrequentRedraws=!0,t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(t){this.enabled=t,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),ut.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){const t=this.enabled?1:.5;this.label.opacity=t,this.opacity=t}layout(){const{marker:t,line:e,length:i,isCustomMarker:s}=this;let n=0,a=0;if(t.visible){const{size:o}=t,r=Wi.anchor(t.shape);n=(r.x-.5)*o+i/2,a=(r.y-.5)*o,s?(t.x=0,t.y=0,t.translationX=n,t.translationY=a):(t.x=n,t.y=a,t.translationX=0,t.translationY=0)}e.visible&&(e.x1=0,e.x2=i,e.y1=0,e.y2=0)}preRender(t){const e=super.preRender(t);return this.layout(),e}layoutLabel(){const{length:t,spacing:e}=this;this.label.x=t+e}computeBBox(){return this.layout(),super.computeBBox()}},fa.className="MarkerLabel",S([us("label")],fa.prototype,"text",2),S([us("label")],fa.prototype,"fontStyle",2),S([us("label")],fa.prototype,"fontWeight",2),S([us("label")],fa.prototype,"fontSize",2),S([us("label")],fa.prototype,"fontFamily",2),S([us("label","fill")],fa.prototype,"color",2),S([dc(t=>t.layoutLabel())],fa.prototype,"spacing",2),S([dc(t=>t.layoutLabel())],fa.prototype,"length",2),S([ot()],fa.prototype,"isCustomMarker",2)}}),dl,Ru,Qv,pl,Jv,Rz,Bz,zz,pn,cq=k({"packages/ag-charts-community/src/chart/legend/legend.ts"(){"use strict";R(),Ft(),We(),al(),hs(),gp(),Rt(),mt(),mt(),un(),Hs(),MI(),aq(),Eo(),oq(),ll(),rq(),lq(),Pz(),dl=class extends wt{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},S([I],dl.prototype,"maxLength",2),S([I],dl.prototype,"color",2),S([I],dl.prototype,"fontStyle",2),S([I],dl.prototype,"fontWeight",2),S([I],dl.prototype,"fontSize",2),S([I],dl.prototype,"fontFamily",2),S([I],dl.prototype,"formatter",2),Ru=class extends wt{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}},S([I],Ru.prototype,"shape",2),S([I],Ru.prototype,"size",2),S([I],Ru.prototype,"padding",2),S([I],Ru.prototype,"strokeWidth",2),S([I],Ru.prototype,"enabled",2),Qv=class extends wt{},S([I],Qv.prototype,"strokeWidth",2),S([I],Qv.prototype,"length",2),pl=class extends wt{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new Ru,this.label=new dl,this.line=new Qv}},S([I],pl.prototype,"maxWidth",2),S([I],pl.prototype,"paddingX",2),S([I],pl.prototype,"paddingY",2),S([I],pl.prototype,"showSeriesStroke",2),S([I],pl.prototype,"marker",2),S([I],pl.prototype,"label",2),S([I],pl.prototype,"line",2),Jv=class extends wt{},S([I],Jv.prototype,"legendItemClick",2),S([I],Jv.prototype,"legendItemDoubleClick",2),Rz={type:"gradient",bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1},Bz={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:0,rotation:0,scale:1},zz={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8},pn=class extends wt{constructor(t){super(),this.ctx=t,this.id=ia(this),this.group=new ss({name:"legend",zIndex:14}),this.itemSelection=gi.select(this.group,fa),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new pl,this.listeners=new Jv,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.pagination=new Cc(i=>t.updateService.update(i),i=>this.updatePageNumber(i)),this.pagination.attachPagination(this.group);const{items:e}=t.contextMenuRegistry.builtins;e["toggle-series-visibility"].action=i=>this.contextToggleVisibility(i),e["toggle-other-series"].action=i=>this.contextToggleOtherSeries(i),this.destroyFns.push(t.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(()=>delete e["toggle-series-visibility"].action,()=>delete e["toggle-other-series"].action,t.layoutManager.registerElement(1,i=>this.positionLegend(i)),t.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.domProxy=new _z(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(t.legendManager)}set data(t){hn(t,this._data)||(this.domProxy.onDataUpdate(this._data,t),this._data=t,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:t=[]}){this.enabled&&(this.data=t.filter(e=>!e.hideInLegend))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(t=>t()),this.itemSelection.clear(),this.domProxy.destroy()}getOrientation(){return this.orientation??"horizontal"}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}getItemLabel(t){const{formatter:e}=this.item.label;if(e){const i=t.datum;return this.cachedCallWithContext(e,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId,...i&&{datum:i}})}return t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:s,label:n,maxWidth:a,label:{maxLength:o=1/0,fontStyle:r,fontWeight:l,fontSize:c,fontFamily:h}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse(),this.itemSelection.update(u);const d=[],p=Te.toFontString(n),f=a??t*.8,{markerWidth:x,anyLineEnabled:y}=this.calculateMarkerWidth();if(this.itemSelection.each((N,P)=>{N.fontStyle=r,N.fontWeight=l,N.fontSize=c,N.fontFamily=h;const O=this.updateMarkerLabel(N,P,x,y),B=P.itemId??P.id,V=(this.getItemLabel(P)??"<unknown>").replace(/\r?\n/g," ");N.text=this.truncate(V,o,f,O,p,B),d.push(N.getTextMeasureBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return{};const b=this.size,v=this.oldSize;b[0]=t,b[1]=e,(b[0]!==v[0]||b[1]!==v[1])&&(v[0]=b[0],v[1]=b[1]);const{pages:M,maxPageHeight:D,maxPageWidth:L}=this.updatePagination(d,t,e),A=this.pages;this.pages=M,this.maxPageSize=[L-i,D-s];const C=this.pagination.currentPage,T=this.pages[C];return this.pages.length<1||!T?(this.visible=!1,{oldPages:A}):(this.visible=!0,this.updatePositions(C),this.update(),{oldPages:A})}isCustomMarker(t,e){return t&&e!==void 0&&typeof e!="string"}calcSymbolsEnabled(t){const{showSeriesStroke:e,marker:i}=this.item,s=!!i.enabled||!e||(t.marker.enabled??!0),n=!!(t.line&&e),a=this.isCustomMarker(s,t.marker.shape);return{markerEnabled:s,lineEnabled:n,isCustomMarker:a}}calcSymbolsLengths(t,e,i){const{marker:s,line:n}=this.item;let a;const{shape:o}=t.marker;if(this.isCustomMarker(e,o)){const c=new Wi;c.shape=o,c.updatePath();const h=c.getBBox();a=Math.max(h.width,h.height)}const r=e?s.size:0,l=i?n.length??25:0;return{markerLength:r,lineLength:l,customMarkerSize:a}}calculateMarkerWidth(){let t=0,e=!1;return this.itemSelection.each((i,s)=>{const{symbol:n}=s,{lineEnabled:a,markerEnabled:o}=this.calcSymbolsEnabled(n),{markerLength:r,lineLength:l,customMarkerSize:c=-1/0}=this.calcSymbolsLengths(n,o,a);t=Math.max(t,l,c,r),e||(e=a)}),{markerWidth:t,anyLineEnabled:e}}updateMarkerLabel(t,e,i,s){const{marker:n,paddingX:a}=this.item,{symbol:o}=e;let r=a;const{markerEnabled:l,isCustomMarker:c}=this.calcSymbolsEnabled(o),h=n.padding;(l||s)&&(r+=h+i);const{marker:u,line:d}=t;return u.visible=l,u.visible&&(u.shape=n.shape??o.marker.shape??"square",u.size=n.size,Cu(u,this.getMarkerStyles(o))),d.visible=s,d.visible&&Cu(d,this.getLineStyles(o)),t.length=i,t.spacing=h,t.isCustomMarker=c,r}truncate(t,e,i,s,n,a){let o=!1;t.length>e&&(t=t.substring(0,e),o=!0);const r=wo.getMeasurer({font:n}),l=Gb.truncateLine(t,r,i-s,o);return l.endsWith(Te.EllipsisChar)?this.truncatedItems.add(a):this.truncatedItems.delete(a),l}updatePagination(t,e,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:o,maxPageWidth:r,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),h=a.findIndex(v=>v.endIndex>=n);this.pagination.currentPage=Nt(0,h,a.length-1);const{paddingX:u,paddingY:d}=this.item,p=8,g=r-u,f=o-d;let x=0,y=-l.y-this.item.marker.size/2;c?y+=f+p:(x+=-l.x+g+p,y+=(f-l.height)/2),this.pagination.translationX=x,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers();let b=0;return this.itemSelection.each((v,M,D)=>{D>(a[b]?.endIndex??1/0)&&b++,v.pageIndex=b}),{maxPageHeight:o,maxPageWidth:r,pages:a}}calculatePagination(t,e,i){const{paddingX:s,paddingY:n}=this.item,a=this.getOrientation(),o=["left","right"].includes(this.position);let r=this.pagination.getBBox(),l=new ut(0,0,0,0),c=[],h=0,u=0,d=0;const p=f=>f.width===r.width&&f.height===r.height,g=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(d++>10){st.warn("unable to find stable legend layout.");break}r=l;const f=e-(o?0:r.width),x=i-(o?r.height:0),y=J8({orientation:a,bboxes:t,maxHeight:x,maxWidth:f,itemPaddingY:n,itemPaddingX:s,forceResult:g});c=y?.pages??[],h=y?.maxPageWidth??0,u=y?.maxPageHeight??0;const b=c.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),this.pagination.updateMarkers(),l=this.pagination.getBBox(),!this.pagination.visible)break}while(!p(l));return{maxPageWidth:h,maxPageHeight:u,pages:c,paginationBBox:l,paginationVertical:o}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:n,startIndex:a,endIndex:o}=s[t];let r=0,l=0;const c=n.length,h=n[0].indices.length,u=this.getOrientation()==="horizontal",d=n[0].bboxes[0].height+e,p=[];i.each((g,f,x)=>{if(x<a||x>o){g.visible=!1;return}const y=x-a;let b,v;u?(b=y%c,v=Math.floor(y/c)):(b=Math.floor(y/h),v=y%h),g.visible=!0;const M=n[b];M&&(l=Math.floor(d*v),r=Math.floor(p[v]??0),p[v]=(p[v]??0)+M.columnWidth,g.translationX=r,g.translationY=l)})}updatePageNumber(t){const{itemSelection:e,group:i,pagination:s,pages:n,toggleSeries:a}=this,{startIndex:o,endIndex:r}=n[t];o===0?this.paginationTrackingIndex=0:t===n.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((o+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.domProxy.onPageChange({itemSelection:e,group:i,pagination:s,interactive:a}),this.ctx.updateService.update(7)}update(){const{label:{color:t}}=this.item;this.itemSelection.each((e,i)=>{e.setEnabled(i.enabled),e.color=t}),this.updateContextMenu()}updateContextMenu(){this.ctx.contextMenuRegistry.setVisible("toggle-series-visibility",this.toggleSeries),this.ctx.contextMenuRegistry.setVisible("toggle-other-series",this.toggleSeries)}getLineStyles(t){const{stroke:e,strokeOpacity:i=1,strokeWidth:s,lineDash:n}=t.line??{},a=Math.min(2,s??1);return{stroke:e,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??a,lineDash:n}}getMarkerStyles({marker:t}){const{fill:e,stroke:i,strokeOpacity:s=1,fillOpacity:n=1,strokeWidth:a,lineDash:o,lineDashOffset:r}=t,l=Math.min(2,a??1);return Jh(e)&&(e.width=8,e.height=8,e.padding=1,e.strokeWidth=Math.min(2,e.strokeWidth??2)),pp(e)&&(e.fit="contain",e.width=void 0,e.height=void 0,e.repeat="no-repeat"),dr({fill:e,stroke:i,strokeOpacity:s,fillOpacity:n,strokeWidth:this.item.marker.strokeWidth??l,lineDash:o,lineDashOffset:r},Rz,Bz,zz)}computePagedBBox(){const t=Ot.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[e,i]=this.maxPageSize;t.height=Math.max(i,t.height),t.width=Math.max(e,t.width)}return t}findNode(t){const{datum:e,proxyButton:i}=this.itemSelection.select(s=>s.datum?.itemId===t.itemId)[0]??{};if(e===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${e}, proxyButton: ${JSON.stringify(i)} }`);return{datum:e,proxyButton:i}}contextToggleVisibility(t){const{datum:e,proxyButton:i}=this.findNode(t);this.doClick(t.event,e,i)}contextToggleOtherSeries(t){this.doDoubleClick(t.event,this.findNode(t).datum)}onContextClick(t,e){const{sourceEvent:i}=t,s=e.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;const n=this.ctx.chartService.series.length>1&&this.ctx.chartService.series[0]?.getLegendData("category")[0]?.hideToggleOtherSeries!==!0;this.ctx.contextMenuRegistry.setVisible("toggle-other-series",n);const{offsetX:a,offsetY:o}=i,{x:r,y:l}=Ve.toCanvasPoint(e,a,o);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:t,canvasX:r,canvasY:l},{legendItem:s})}onClick(t,e,i){this.doClick(t,e,i)&&t.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(t=>t.getLegendData("category")).filter(t=>t.enabled).length}doClick(t,e,i){const{listeners:{legendItemClick:s},ctx:{chartService:n,highlightManager:a},preventHidingAll:o,toggleSeries:r}=this;if(!e)return!1;const{legendType:l,seriesId:c,itemId:h,enabled:u}=e,d=n.series.find(f=>f.id===c);if(!d)return!1;let p=u;const g=Ez("click",h,d.id,t);return s?.(g.apiEvent),g.defaultPrevented||(r&&(p=!u,o&&!p&&this.getVisibleItemCount()<2&&(p=!0),i.setChecked(p),this.ctx.chartEventManager.legendItemClick(l,d,h,p,e.legendItemName)),p?a.updateHighlight(this.id,{series:d,itemId:h,datum:void 0,datumIndex:void 0}):a.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:e.skipAnimations??!1})),!0}onDoubleClick(t,e){this.doDoubleClick(t,e)&&t.preventDefault()}doDoubleClick(t,e){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if(!e)return!1;const{legendType:a,id:o,itemId:r,seriesId:l}=e,c=s.series.find(u=>u.id===o);if(!c)return!1;const h=Ez("dblclick",r,c.id,t);if(i?.(h.apiEvent),h.defaultPrevented)return!0;if(n){const u=s.series.flatMap(f=>f.getLegendData("category"));let d=0;const p=new Set;for(const f of u)f.enabled&&(d+=1,f.legendItemName!=null&&p.add(f.legendItemName));p.size>0&&(d=p.size);const g=u.find(f=>f.itemId===r&&f.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(a,c,r,g?.enabled??!1,d,g?.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(t,e){let i;return t instanceof FocusEvent?i=Ve.toCanvas(e).computeCenter():(t.preventDefault(),i=Ve.toCanvasPoint(e,t.offsetX,t.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(t,e){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(e.pageIndex);const i=e.datum,s=i?this.ctx.chartService.series.find(n=>n.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const n=this.toTooltipMeta(t,e);this.ctx.tooltipManager.updateTooltip(this.id,n,[{type:"structured",title:this.getItemLabel(i)}])}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&s?this.updateHighlight({series:s,itemId:i?.itemId,datum:void 0,datumIndex:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(t){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,t):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=t,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(t){const e=this.positionLegendScene(t);this.positionLegendDOM(e)}positionLegendScene(t){if(!this.enabled||!this.data.length)return;const{layoutBox:e}=t,{x:i,y:s,width:n,height:a}=e,[o,r]=this.calculateLegendDimensions(e),{oldPages:l}=this.calcLayout(o,r),c=this.computePagedBBox(),h=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return a-c.height;case"right":default:return n-c.width}};if(this.visible){const u=this.spacing;let d,p;switch(this.position){case"top":case"bottom":d=(n-c.width)/2,p=h(),e.shrink(c.height+u,this.position);break;case"left":case"right":default:d=h(),p=(a-c.height)/2,e.shrink(c.width+u,this.position)}this.group.translationX=Math.floor(i+d-c.x),this.group.translationY=Math.floor(s+p-c.y)}return l}positionLegendDOM(t){const{ctx:e,itemSelection:i,pagination:s,pages:n,toggleSeries:a,group:o,listeners:{legendItemClick:r,legendItemDoubleClick:l}}=this,c=this.visible&&this.enabled,h=a||l!=null||r!=null;this.domProxy.update({visible:c,interactive:h,ctx:e,itemSelection:i,group:o,pagination:s,oldPages:t,newPages:n,datumReader:this,itemListener:this})}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i,n=.5,a=.2,o=.25;let r,l;switch(this.position){case"top":case"bottom":{const c=s<1?Math.min(n,a*(1/s)):a;r=this.maxWidth?Math.min(this.maxWidth,e):e,l=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break}case"left":case"right":default:{const c=s>1?Math.min(n,o*s):o;r=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*c),l=this.maxHeight?Math.min(this.maxHeight,i):i}}return[r,l]}cachedCallWithContext(t,...e){const{callbackCache:i,chartService:s}=this.ctx;return i.call(this,s,t,...e)}},pn.className="Legend",S([I],pn.prototype,"toggleSeries",2),S([I],pn.prototype,"pagination",2),S([I],pn.prototype,"item",2),S([I],pn.prototype,"listeners",2),S([dc((t,e,i)=>{if(t.updateGroupVisibility(),e===i)return;const{ctx:{legendManager:s,stateManager:n}}=t;i===!1&&e===!0&&n.restoreState(s)}),I],pn.prototype,"enabled",2),S([I],pn.prototype,"position",2),S([I],pn.prototype,"maxWidth",2),S([I],pn.prototype,"maxHeight",2),S([I],pn.prototype,"reverseOrder",2),S([I],pn.prototype,"orientation",2),S([I],pn.prototype,"preventHidingAll",2),S([I],pn.prototype,"spacing",2)}}),Fz,hq=k({"packages/ag-charts-community/src/chart/legend/legendModule.ts"(){"use strict";cq(),Fz={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new pn(t),packageType:"community",removable:"standalone-only"}}}),jz={};cn(jz,{CARTESIAN_AXIS_TYPE:()=>XC,CARTESIAN_POSITION:()=>ZC,FONT_SIZE:()=>YC,FONT_SIZE_RATIO:()=>tS,POLAR_AXIS_SHAPE:()=>QC,POLAR_AXIS_TYPE:()=>qC});var YC,tS,ZC,XC,qC,QC,Gz=k({"packages/ag-charts-community/src/chart/themes/constants.ts"(){"use strict";YC=(t=>(t[t.SMALLEST=8]="SMALLEST",t[t.SMALLER=10]="SMALLER",t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=14]="LARGE",t[t.LARGEST=17]="LARGEST",t))(YC||{}),tS=(t=>(t[t.SMALLEST=.6666666666666666]="SMALLEST",t[t.SMALLER=.8333333333333334]="SMALLER",t[t.SMALL=1]="SMALL",t[t.MEDIUM=1.0833333333333333]="MEDIUM",t[t.LARGE=1.1666666666666667]="LARGE",t[t.LARGEST=1.4166666666666667]="LARGEST",t))(tS||{}),ZC=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(ZC||{}),XC=(t=>(t.CATEGORY="category",t.GROUPED_CATEGORY="grouped-category",t.ORDINAL_TIME="ordinal-time",t.UNIT_TIME="unit-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(XC||{}),qC=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(qC||{}),QC=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(QC||{})}}),JC={};cn(JC,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>Kp,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Xp,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>qp,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Qp,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>Jp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Yp,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Zp,DEFAULT_CAPTION_ALIGNMENT:()=>ml,DEFAULT_CAPTION_LAYOUT_STYLE:()=>fl,DEFAULT_FIBONACCI_STROKES:()=>Up,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>Ai,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Ke,DEFAULT_GRIDLINE_ENABLED:()=>Ka,DEFAULT_POLAR_SERIES_STROKE:()=>Rm,DEFAULT_SEPARATION_LINES_COLOUR:()=>Hp,DEFAULT_SHADOW_COLOUR:()=>gl,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Bm,DEFAULT_TEXTBOX_COLOR:()=>ig,DEFAULT_TEXTBOX_FILL:()=>tg,DEFAULT_TEXTBOX_STROKE:()=>eg,DEFAULT_TEXT_ANNOTATION_COLOR:()=>$p,DEFAULT_TOOLBAR_POSITION:()=>sg,IS_DARK_THEME:()=>Bu,PALETTE_ALT_DOWN_FILL:()=>nS,PALETTE_ALT_DOWN_STROKE:()=>iS,PALETTE_ALT_NEUTRAL_FILL:()=>aS,PALETTE_ALT_NEUTRAL_STROKE:()=>oS,PALETTE_ALT_UP_FILL:()=>sS,PALETTE_ALT_UP_STROKE:()=>eS,PALETTE_DOWN_FILL:()=>_m,PALETTE_DOWN_STROKE:()=>Nm,PALETTE_NEUTRAL_FILL:()=>Pm,PALETTE_NEUTRAL_STROKE:()=>Em,PALETTE_UP_FILL:()=>Om,PALETTE_UP_STROKE:()=>Tm});var Bu,Hp,gl,fl,ml,Tm,Nm,Om,_m,Em,Pm,eS,iS,sS,nS,aS,oS,Rm,Bm,Ke,Up,$p,Ai,Kp,Yp,Zp,Xp,qp,Qp,Jp,tg,eg,ig,sg,Ka,si=k({"packages/ag-charts-community/src/chart/themes/symbols.ts"(){"use strict";Bu=Symbol("is-dark-theme"),Hp=Symbol("default-separation-lines-colour"),gl=Symbol("default-shadow-colour"),fl=Symbol("default-caption-layout-style"),ml=Symbol("default-caption-alignment"),Tm=Symbol("palette-up-stroke"),Nm=Symbol("palette-down-stroke"),Om=Symbol("palette-up-fill"),_m=Symbol("palette-down-fill"),Em=Symbol("palette-neutral-stroke"),Pm=Symbol("palette-neutral-fill"),eS=Symbol("palette-alt-up-stroke"),iS=Symbol("palette-alt-down-stroke"),sS=Symbol("palette-alt-up-fill"),nS=Symbol("palette-alt-down-fill"),aS=Symbol("palette-gray-fill"),oS=Symbol("palette-gray-stroke"),Rm=Symbol("default-polar-series-stroke"),Bm=Symbol("default-sparkline-crosshair-stroke"),Ke=Symbol("default-financial-charts-annotation-stroke"),Up=Symbol("default-hierarchy-strokes"),$p=Symbol("default-text-annotation-color"),Ai=Symbol("default-financial-charts-annotation-background-fill"),Kp=Symbol("default-annotation-handle-fill"),Yp=Symbol("default-annotation-statistics-fill"),Zp=Symbol("default-annotation-statistics-stroke"),Xp=Symbol("default-annotation-statistics-color"),qp=Symbol("default-annotation-statistics-divider-stroke"),Qp=Symbol("default-annotation-statistics-fill"),Jp=Symbol("default-annotation-statistics-stroke"),tg=Symbol("default-textbox-fill"),eg=Symbol("default-textbox-stroke"),ig=Symbol("default-textbox-color"),sg=Symbol("default-toolbar-position"),Ka=Symbol("default-gridline-enabled")}});function ma(t){return y_(t,e=>{const i=ue.fromString(e);return[ue.darken(i,.15).toString(),e,ue.lighten(i,.15).toString()]})}var tL,Vz,rS,zm,Wz,yl,Lc,fi=k({"packages/ag-charts-community/src/chart/themes/util.ts"(){"use strict";Xh(),Rt(),tL=[{type:"number",position:{$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},"left","bottom"]}}],Vz={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$value:"$1"}]}]},{$palette:"fillFallback"},{$palette:"fill"}]},rS={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$value:"$1"}]}]},{$palette:"fillsFallback"},{$palette:"fills"}]},zm={$if:[{$isGradient:[{$palette:"fill"}]},{$palette:"fillFallback"},{$if:[{$isPattern:[{$palette:"fill"}]},{$path:["./stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},Wz={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$value:"$1"}]}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},yl={type:"pattern",pattern:"forward-slanted-lines",width:10,height:10,padding:2,fill:{$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isImage:[{$palette:"fill"}]}]},{$palette:"fillFallback"},{$if:[{$isPattern:[{$palette:"fill"}]},{$path:["./fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:zm,strokeOpacity:1,strokeWidth:4,backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},Lc={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0}}});function lS(t,e,i,s,n){const{addPhaseFn:a,updatePhaseFn:o,removePhaseFn:r}=n,l=(c,h,u)=>{i.animate({id:`${t}_${e}_${h.id}_${c}`,groupId:t,from:0,to:1,ease:vp,collapsable:!1,onUpdate(d,p){p&&c!=="removed"||(h.path.clear(!0),u(d,h),h.checkPathDirty())},onStop(){c==="added"&&(h.path.clear(!0),u(1,h),h.checkPathDirty())},phase:Va[c]})};for(const c of s)i.isSkipped()||(l("removed",c,r),l("updated",c,o)),l("added",c,a)}var eL=k({"packages/ag-charts-community/src/motion/pathMotion.ts"(){"use strict";Sp(),Ls()}});function de({id:t},e,i,...s){for(const n of s)n.cleanup();nl(t,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function wc({id:t},e,i,...s){nl(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function xl(t){return{opacity:1}}var bl=k({"packages/ag-charts-community/src/chart/series/seriesLabelUtil.ts"(){"use strict";Ls()}}),cS,iL=k({"packages/ag-charts-community/src/scene/util/changeDetectableProperties.ts"(){"use strict";mt(),cS=class extends wt{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(t){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(t){this.markDirty()}}}}),Ya,ng=k({"packages/ag-charts-community/src/scene/dropShadow.ts"(){"use strict";mt(),za(),iL(),Ya=class extends cS{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}},S([I,ot()],Ya.prototype,"enabled",2),S([I,ot()],Ya.prototype,"color",2),S([I,ot()],Ya.prototype,"xOffset",2),S([I,ot()],Ya.prototype,"yOffset",2),S([I,ot()],Ya.prototype,"blur",2)}}),xr,Fm,sL,hS,ya,Ee,gn,ag,Pn,vl=k({"packages/ag-charts-community/src/chart/series/seriesProperties.ts"(){"use strict";mt(),mt(),xr=class extends wt{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}},S([I],xr.prototype,"fill",2),S([I],xr.prototype,"fillOpacity",2),S([I],xr.prototype,"stroke",2),S([I],xr.prototype,"strokeWidth",2),S([I],xr.prototype,"strokeOpacity",2),S([I],xr.prototype,"lineDash",2),S([I],xr.prototype,"lineDashOffset",2),Fm=class extends wt{},S([I],Fm.prototype,"strokeWidth",2),S([I],Fm.prototype,"dimOpacity",2),S([I],Fm.prototype,"enabled",2),sL=class extends wt{constructor(){super(...arguments),this.color="black"}},S([I],sL.prototype,"color",2),hS=class extends wt{constructor(){super(...arguments),this.enabled=!0}},S([I],hS.prototype,"enabled",2),ya=class extends wt{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1}},S([I],ya.prototype,"type",2),S([I],ya.prototype,"colorStops",2),S([I],ya.prototype,"bounds",2),S([I],ya.prototype,"gradient",2),S([I],ya.prototype,"rotation",2),S([I],ya.prototype,"reverse",2),Ee=class extends wt{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}},S([I],Ee.prototype,"type",2),S([I],Ee.prototype,"colorStops",2),S([I],Ee.prototype,"bounds",2),S([I],Ee.prototype,"gradient",2),S([I],Ee.prototype,"rotation",2),S([I],Ee.prototype,"scale",2),S([I],Ee.prototype,"reverse",2),S([I],Ee.prototype,"path",2),S([I],Ee.prototype,"pattern",2),S([I],Ee.prototype,"width",2),S([I],Ee.prototype,"height",2),S([I],Ee.prototype,"padding",2),S([I],Ee.prototype,"fill",2),S([I],Ee.prototype,"fillOpacity",2),S([I],Ee.prototype,"backgroundFill",2),S([I],Ee.prototype,"backgroundFillOpacity",2),S([I],Ee.prototype,"stroke",2),S([I],Ee.prototype,"strokeOpacity",2),S([I],Ee.prototype,"strokeWidth",2),gn=class extends wt{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}},S([I],gn.prototype,"type",2),S([I],gn.prototype,"url",2),S([I],gn.prototype,"rotation",2),S([I],gn.prototype,"scale",2),S([I],gn.prototype,"backgroundFill",2),S([I],gn.prototype,"backgroundFillOpacity",2),S([I],gn.prototype,"repeat",2),S([I],gn.prototype,"fit",2),ag=class extends wt{constructor(){super(...arguments),this.item=new xr,this.series=new Fm,this.text=new sL}},S([I],ag.prototype,"item",2),S([I],ag.prototype,"series",2),S([I],ag.prototype,"text",2),Pn=class extends wt{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new hS,this.highlightStyle=new ag}handleUnknownProperties(t,e){"context"in e&&(this.context=e.context,t.delete("context"))}},S([I],Pn.prototype,"id",2),S([I],Pn.prototype,"visible",2),S([I],Pn.prototype,"focusPriority",2),S([I],Pn.prototype,"showInLegend",2),S([I],Pn.prototype,"cursor",2),S([I],Pn.prototype,"nodeClickRange",2),S([I],Pn.prototype,"highlight",2),S([I],Pn.prototype,"highlightStyle",2)}}),Hi,jm=k({"packages/ag-charts-community/src/chart/series/seriesMarker.ts"(){"use strict";aa(),iL(),Rt(),mt(),vl(),Hi=class extends cS{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillGradientDefaults=new ya,this.fillPatternDefaults=new Ee,this.fillImageDefaults=new gn,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:t,shape:e,fill:i,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:o,lineDash:r,lineDashOffset:l}=this;return{size:t,shape:e,fill:i,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:o,lineDash:r,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}},S([I,ot()],Hi.prototype,"enabled",2),S([I,na({equals:Zh})],Hi.prototype,"shape",2),S([I,ot()],Hi.prototype,"size",2),S([I,na({equals:hn})],Hi.prototype,"fill",2),S([I],Hi.prototype,"fillGradientDefaults",2),S([I],Hi.prototype,"fillPatternDefaults",2),S([I],Hi.prototype,"fillImageDefaults",2),S([I,ot()],Hi.prototype,"fillOpacity",2),S([I,ot()],Hi.prototype,"stroke",2),S([I,ot()],Hi.prototype,"strokeWidth",2),S([I,ot()],Hi.prototype,"strokeOpacity",2),S([I],Hi.prototype,"lineDash",2),S([I],Hi.prototype,"lineDashOffset",2),S([I,na({equals:Zh})],Hi.prototype,"itemStyler",2)}}),nL,Ns,Sl=k({"packages/ag-charts-community/src/chart/series/seriesTooltip.ts"(){"use strict";ov(),mt(),mt(),bm(),nL=class extends wt{constructor(){super(...arguments),this.enabled=!1}},S([I],nL.prototype,"enabled",2),Ns=class extends wt{constructor(){super(...arguments),this.interaction=new nL,this.position=new pr,this.range=void 0,this.class=void 0}formatTooltip(t,e,i,s){const n=this.renderer==null?void 0:av(t,e,this.renderer,[s]);return typeof n=="string"?{type:"raw",rawHtmlString:n}:n!=null?{type:"structured",...i,...n}:{type:"structured",...i}}},S([I],Ns.prototype,"enabled",2),S([I],Ns.prototype,"showArrow",2),S([I],Ns.prototype,"renderer",2),S([I],Ns.prototype,"interaction",2),S([I],Ns.prototype,"position",2),S([I],Ns.prototype,"range",2),S([I],Ns.prototype,"class",2)}}),Hz,Uz,$z,Kz,uq=k({"packages/ag-charts-community/src/scene/util/quadtree.ts"(){"use strict";rb(),Ft(),Hz=class{constructor(t,e,i){this.root=new Kz(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){const i={hitTester:t,value:e,distanceSquared:(s,n)=>t.distanceSquared(s,n)};this.root.addElem(i)}find(t,e){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},Uz=class{constructor(t,e,i,s){this.nw=t,this.ne=e,this.sw=i,this.se=s}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},$z=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=i??ut.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(this.subdivisions===void 0?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(const e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){const{x:t,y:e,width:i,height:s}=this.boundary,{capacity:n}=this,a=this.maxdepth-1,o=i/2,r=s/2,l=new ut(t,e,o,r),c=new ut(t+o,e,o,r),h=new ut(t,e+r,o,r),u=new ut(t+o,e+r,o,r);return new Uz(this.child(n,a,l),this.child(n,a,c),this.child(n,a,h),this.child(n,a,u))}},Kz=class y5 extends $z{addCondition(e){const{x:i,y:s}=e.hitTester.midPoint;return this.boundary.containsPoint(i,s)}findCondition(e,i,s){const{best:n}=s;return n.distanceSquared!==0&&this.boundary.distanceSquared(e,i)<n.distanceSquared}findAction(e,i,s){const n=ob(e,i,this.elems,s.best.distanceSquared);n.nearest!==void 0&&n.distanceSquared<s.best.distanceSquared&&(s.best=n)}child(e,i,s){return new y5(e,i,s)}}}}),uS,aL=k({"packages/ag-charts-community/src/chart/series/dataModelSeries.ts"(){"use strict";R(),Us(),Rt(),Lu(),uS=class extends fm{constructor({clipFocusBox:t,categoryKey:e,...i}){super(i),this.categoryKey=e,this.clipFocusBox=t??!0}getScaleInformation({xScale:t,yScale:e}){const i=ye.is(t),s=ye.is(e);return{isContinuousX:i,isContinuousY:s,xScaleType:t?.type,yScaleType:e?.type}}getModulePropertyDefinitions(){const t=this.axes.x?.scale,e=this.axes.y?.scale;return this.moduleMap.mapModules(i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:t,yScale:e}))).flat()}async requestDataModel(t,e,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=await t.request(this.id,e??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}isProcessedDataAnimatable(){const t=this.processedData?.reduced?.animationValidation;if(!t)return!0;const{orderedKeys:e,uniqueKeys:i}=t;return e&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){const e=this.getNodeData();if(e===void 0||e.length===0)return;const i=this.computeFocusDatumIndex(t,e);if(i===void 0)return;const{clipFocusBox:s}=this,n=e[i],a={...t,datumIndex:i},o=this.computeFocusBounds(a);if(o!==void 0)return{bounds:o,clipFocusBox:s,datum:n,datumIndex:i}}isDatumEnabled(t,e){const{missing:i=!1,enabled:s=!0,focusable:n=!0}=t[e];return!i&&s&&n}computeFocusDatumIndex(t,e){const i=(o,r)=>{for(;o>=0&&!this.isDatumEnabled(e,o);)o+=r;return o===-1?void 0:o},s=(o,r)=>{for(;o<e.length&&!this.isDatumEnabled(e,o);)o+=r;return o===e.length?void 0:o};let n;const a=Nt(0,t.datumIndex,e.length-1);return t.datumIndexDelta<0?n=i(a,t.datumIndexDelta):t.datumIndexDelta>0?n=s(a,t.datumIndexDelta):n=s(a,1)??i(a,-1),n===void 0?t.datumIndexDelta===0?void 0:t.datumIndex-t.datumIndexDelta:n}keysOrValues(t){const e=this.dataModel.resolveProcessedDataIndexById(this,t);return this.processedData?.keys[e]?.get(this.id)??this.processedData?.columns[e]??[]}getCategoryKey(){return this.categoryKey}getCategoryValue(t){const{processedData:e,dataModel:i}=this,s=this.getCategoryKey();return!e||!i||!s||(e.invalidData?.get(this.id)?.[t]??!1)?void 0:this.keysOrValues(s)[t]}datumIndexForCategoryValue(t){const{processedData:e,dataModel:i}=this,s=this.getCategoryKey();if(!e||!i||!s)return;t=t.valueOf();const n=e.invalidData?.get(this.id),a=this.keysOrValues(s);for(let o=0;o<a.length;o+=1){if(n?.[o]===!0)continue;const r=a[o]?.valueOf();if(hn(t,r))return o}}}}});function dq(t){let e,i;if((t instanceof mr||t instanceof ga)&&({min:e,max:i}=t),!(e==null&&i==null))return e??(e=-1/0),i??(i=1/0),[e,i]}function pq(t,e,i){const s=e[0].valueOf(),n=e[1].valueOf(),a=ep(0,t-1,r=>{const l=i(r)?.valueOf();return!Number.isFinite(l)||l>=s});let o=Kr(0,t-1,r=>{const l=i(r)?.valueOf();return!Number.isFinite(l)||l<=n});return a==null||o==null?[0,0]:(o=Math.min(o+1,t),[a,o])}var Tc,Nc,dS,br,Gm,Ml,Rn=k({"packages/ag-charts-community/src/chart/series/cartesian/cartesianSeries.ts"(){"use strict";R(),Mu(),sm(),Us(),UC(),Ft(),We(),al(),_o(),Nn(),uq(),Fi(),la(),mt(),am(),kc(),Im(),Vp(),mE(),Eo(),aL(),Lu(),vl(),du(),Tc={x:["xKey"],y:["yKey"]},Nc={x:["xName"],y:["yName"]},dS=class extends Ep{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},br=class extends Pn{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}},S([I],br.prototype,"legendItemName",2),S([I],br.prototype,"pickOutsideVisibleMinorAxis",2),Gm=100,Ml=class extends uS{constructor({pathsPerSeries:t=["path"],hasMarkers:e=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:n=!0,markerSelectionGarbageCollection:a=!0,animationAlwaysUpdateSelections:o=!1,animationResetFns:r,directionKeys:l,directionNames:c,...h}){if(super({directionKeys:l,directionNames:c,canHaveAxes:!0,...h}),this.NodeEvent=dS,this.dataNodeGroup=this.contentGroup.appendChild(new Ot({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new Ot({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new ss({name:`${this.id}-series-labels`})),this.labelSelection=gi.select(this.labelGroup,Gi),this.highlightSelection=gi.select(this.highlightNode,()=>this.opts.hasMarkers?new Wi:this.nodeFactory()),this.highlightLabelSelection=gi.select(this.highlightLabel,Gi),this.annotationSelections=new Set,this.debug=ne.create(),!l||!c)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:e,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:s,directionKeys:l,directionNames:c,animationResetFns:r,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:n,markerSelectionGarbageCollection:a},this.paths=t.map(u=>new Zs({name:`${this.id}-${u}`})),this.datumSelection=gi.select(this.dataNodeGroup,()=>this.nodeFactory(),n),this.markerSelection=gi.select(this.markerGroup,Wi,a),this.animationState=new Lp("empty",{empty:{update:{target:"ready",action:u=>this.animateEmptyUpdateReady(u)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:u=>this.animateReadyHighlight(u),highlightMarkers:u=>this.animateReadyHighlightMarkers(u),resize:u=>this.animateReadyResize(u),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:u=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(u):this.animateWaitingUpdateReady(u)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:u=>this.resetAllAnimation(u),reset:"empty"},clearing:{update:{target:"empty",action:u=>this.animateClearingUpdateEmpty(u)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),this.attachPaths(this.paths,e,i)}detachSeries(t,e,i){super.detachSeries(t,e,i),this.detachPaths(this.paths,e,i)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(t,e,i){for(const s of t)this.contentGroup.appendChild(s)}detachPaths(t,e,i){for(const s of t)this.contentGroup.removeChild(s)}renderToOffscreenCanvas(){const t=this.getNodeData();return t!=null&&t.length>Gm}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"?this.animationState.transition("skip"):t==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:t}){const{visible:e,_contextNodeData:i}=this,n=this.ctx.highlightManager?.getActiveHighlight()?.series===this,a=this.checkResize(t),o=this.updateHighlightSelection(n);this.updateSelections(e),this.updateNodes(o,n,e);const r=this.getAnimationData(t,i);r&&(a&&this.animationState.transition("resize",r),this.animationState.transition("update",r))}updateSelections(t){var e;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!t&&i)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const s=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=s));const{dataModel:n,processedData:a}=this;n!==void 0&&a!==void 0&&this.dispatch("data-update",{dataModel:n,processedData:a})}this.updateSeriesSelections()}}updateSeriesSelections(t){const{datumSelection:e,labelSelection:i,markerSelection:s,paths:n}=this,a=this._contextNodeData;if(!a)return;const{nodeData:o,labelData:r,itemId:l}=a;this.updatePaths({seriesHighlighted:t,itemId:l,contextData:a,paths:n}),this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i})??i,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:o,markerSelection:s}))}getShapeFillBBox(){const{axes:t}=this,e=t.x,i=t.y,[s,n]=ns(e?.range??[0,1]),[a,o]=ns(i?.range??[0,1]),r=this.getSeriesDomain("x"),l=[e?.scale.convert(r.at(0)),e?.scale.convert(r.at(-1))],c=this.getSeriesDomain("y"),h=[i?.scale.convert(c.at(0)),i?.scale.convert(c.at(-1))],[u,d]=ns(l),[p,g]=ns(h);return{axis:new ut(s,a,n-s,o-a),series:new ut(u,p,d-u,g-p)}}updateNodes(t,e,i){const{highlightSelection:s,highlightLabelSelection:n,opts:{hasMarkers:a,hasHighlightedLabels:o}}=this,r=!this.ctx.animationManager.isSkipped(),l=this.visible&&this._contextNodeData!=null&&i;this.contentGroup.visible=r||l,this.highlightGroup.visible=(r||l)&&e;const c=this.getOpacity();a?(this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),o&&this.updateLabelNodes({labelSelection:n});const{dataNodeGroup:h,markerGroup:u,datumSelection:d,labelSelection:p,markerSelection:g,paths:f,labelGroup:x}=this,{itemId:y}=this.contextNodeData??{};h.opacity=c,h.visible=r||l,x.visible=l,a&&(u.opacity=c,u.visible=l),x&&(x.opacity=c),this.updatePathNodes({seriesHighlighted:e,itemId:y,paths:f,opacity:c,visible:l,animationEnabled:r}),h.visible&&(this.updateDatumNodes({datumSelection:d,highlightedItems:t,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:p}),a&&this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum&&s.itemId===e.itemId);return i.length===0?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){const{highlightSelection:e,highlightLabelSelection:i,_contextNodeData:s}=this;if(!s)return;const n=this.ctx.highlightManager?.getActiveHighlight(),a=t&&n?.datum?n:void 0;let o,r;if(a!=null){const l=this.isLabelEnabled(),{labelData:c,nodeData:h}=s;r=this.getHighlightData(h,a),o=l?this.getHighlightLabelData(c,a):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:r,highlightSelection:e}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:i}),r}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:t}of this.datumSelection)t.datum.missing!==!0&&(yield t)}getQuadTree(){if(this.quadtree===void 0){const{width:t,height:e}=this.ctx.scene.canvas,i=new ut(0,0,t,e);this.quadtree=new Hz(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodesExactShape(t){const e=super.pickNodesExactShape(t);if(e.length!==0)return e;const{x:i,y:s}=t,{opts:{hasMarkers:n}}=this,{dataNodeGroup:a,markerGroup:o}=this;let r=a.pickNodes(i,s).filter(l=>l.datum.missing!==!0);if(r.length===0&&n&&(r=o?.pickNodes(i,s).filter(l=>l.datum.missing!==!0)),r.length!==0)return r.map(c=>c.datum);for(const l of this.moduleMap.modules()){const{datum:c}=l.pickNodeExact(t)??{};if(c!=null&&c?.missing!==!0)return[c]}return[]}pickNodeClosestDatum(t){const{x:e,y:i}=t,{axes:s,_contextNodeData:n}=this;if(!n)return;const a=s.x,o=s.y,r={x:e,y:i};let l=1/0,c;for(const h of n.nodeData){const{point:{x:u=NaN,y:d=NaN}={}}=h;if(isNaN(u)||isNaN(d)||!(a?.inRange(u)&&o?.inRange(d)))continue;const g=Math.max((r.x-u)**2+(r.y-d)**2,0);g<l&&(l=g,c=h)}for(const h of this.moduleMap.modules()){const u=h.pickNodeNearest(t);if(u!==void 0&&u.distanceSquared<l){l=u.distanceSquared,c=u.datum;break}}if(c){const h=Math.max(Math.sqrt(l)-(c.point?.size??0)/2,0);return{datum:c,distance:h}}}pickNodeMainAxisFirst(t,e){const{x:i,y:s}=t,{axes:n,_contextNodeData:a}=this,{pickOutsideVisibleMinorAxis:o}=this.properties;if(!a)return;const r=n.x,l=n.y,c=[r,l].filter(cl.is).map(g=>g.direction);if(e&&c.length===0)return;const[h="x"]=c,u=[i,s];h!=="x"&&u.reverse();const d=[1/0,1/0];let p;for(const g of a.nodeData){const{x:f=NaN,y:x=NaN}=g.point??g.midPoint??{};if(isNaN(f)||isNaN(x)||g.missing===!0)continue;const y=[r?.inRange(f),l?.inRange(x)];if(h!=="x"&&y.reverse(),!y[0]||!o&&!y[1])continue;const b=[f,x];h!=="x"&&b.reverse();let v=!0;for(let M=0;M<b.length;M++){const D=Math.abs(b[M]-u[M]);if(D>d[M]){v=!1;break}else D<d[M]&&(d[M]=D,d.fill(1/0,M+1,d.length))}v&&(p=g)}if(p){let g=Math.max(d[0]**2+d[1]**2-(p.point?.size??0),0);for(const f of this.moduleMap.modules()){const x=f.pickNodeMainAxisFirst(t);if(x!==void 0&&x.distanceSquared<g){p=x.datum,g=x.distanceSquared;break}}return{datum:p,distance:Math.sqrt(g)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRange(t,e,i){const s=this.keysOrValues(t),n=0;return OP(i?.length??s.length,e,a=>{const o=i?.[a]??a;return this.xCoordinateRange(s[o],n,o)})}domainForVisibleRange(t,e,i,s,n,a){const{processedData:o,dataModel:r}=this,[l,c]=s,h=this.keysOrValues(i);if(n){const g=this.visibleRange(i,s,a);return r.getDomainBetweenRange(this,e,g,o)}const u=e.map(g=>this.keysOrValues(g));let d=1/0,p=-1/0;return h.forEach((g,f)=>{const[x,y]=this.xCoordinateRange(g,0,f);if(!(y<l||x>c))for(let b=0;b<e.length;b++){const v=u[b][f];d=Math.min(d,v),p=Math.max(p,v)}}),d>p?[NaN,NaN]:[d,p]}domainForClippedRange(t,e,i,s){const{processedData:n,dataModel:a,axes:o}=this,l=dq(o[t==="x"?"y":"x"]);if(!l)return e.flatMap(g=>a.getDomain(this,g,"value",n));const c=this.keysOrValues(i);if(s){const g=pq(c.length,l,f=>c[f]);return a.getDomainBetweenRange(this,e,g,n)}const h=e.map(g=>this.keysOrValues(g)),u=l[0].valueOf(),d=l[1].valueOf(),p=[];return c.forEach((g,f)=>{const x=g.valueOf();if(x<u||x>d)return;const y=h.map(b=>b[f]);x>=u&&p.push(...y),x<=d&&p.push(...y)}),p}countVisibleItems(t,e,i,s,n){const{dataModel:a,processedData:o}=this;if(!a||!o)return 1/0;const r=this.keysOrValues(t),l=e.map(D=>a.resolveColumnById(this,D,o)),c=this.axes.x,h=this.axes.y,u=this.shouldFlipXY(),d=c.range,p=h.range,g=(D,L,A)=>D[0]+(A-L[0])/(L[1]-L[0])*(D[1]-D[0]),f=g(d,c.visibleRange,i[0]),x=g(d,c.visibleRange,i[1]),y=g(p,h.visibleRange,u?s[0]:s[1]),b=g(p,h.visibleRange,u?s[1]:s[0]),v=Math.round((i[0]+(i[1]-i[0])/2)*r.length),M=0;return _P(0,r.length-1,v,n,D=>{let[L,A]=this.xCoordinateRange(r[D],M,D),[C,T]=this.yCoordinateRange(l.map(N=>N[D]),M,D);return!re(L)||!re(A)||!re(C)||!re(T)?!1:(u&&([L,A,C,T]=[C,T,L,A]),L>=f&&A<=x&&C>=y&&T<=b)})}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,n=i??[];if(e){const a=s;return this.updateMarkerSelection({nodeData:n,markerSelection:a})}else return this.updateDatumSelection({nodeData:n,datumSelection:s})}updateHighlightSelectionLabel(t){return this.updateLabelSelection({labelData:t.items??[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return t.datumSelection}updateDatumNodes(t){}updateMarkerSelection(t){return t.markerSelection}updateMarkerNodes(t){}updatePaths(t){t.paths.forEach(e=>e.visible=!1)}updatePathNodes(t){const{paths:e,opacity:i,visible:s}=t;for(const n of e)n.opacity=i,n.visible=s}resetPathAnimation(t){const{path:e}=this.opts?.animationResetFns??{};e&&t.paths.forEach(i=>{as([i],e)})}resetDatumAnimation(t){const{datum:e}=this.opts?.animationResetFns??{};e&&as([t.datumSelection],e)}resetLabelAnimation(t){const{label:e}=this.opts?.animationResetFns??{};e&&as([t.labelSelection],e)}resetMarkerAnimation(t){const{marker:e}=this.opts?.animationResetFns??{};e&&this.opts.hasMarkers&&as([t.markerSelection],e)}resetAllAnimation(t){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(t),this.resetDatumAnimation(t),this.resetLabelAnimation(t),this.resetMarkerAnimation(t),t.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){const{datum:e}=this.opts?.animationResetFns??{};e&&as([t],e)}animateReadyHighlightMarkers(t){const{marker:e}=this.opts?.animationResetFns??{};e&&as([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}getAnimationData(t,e){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}:void 0}updateLabelSelection(t){return t.labelSelection}getScaling(t){if(t instanceof Xv){const{range:e,domain:i}=t;return{type:"log",convert:s=>t.convert(s),domain:[i[0],i[1]],range:[e[0],e[1]]}}else if(t instanceof ye){const{range:e,domain:i}=t;return{type:"continuous",domain:[i[0],i[1]],range:[e[0],e[1]]}}else if(t instanceof Ip){const{domain:e}=t;return{type:"category",domain:e,inset:t.inset,step:t.step}}}calculateScaling(){const t={};for(const e of Object.values(Vb)){const i=this.axes[e];if(!i)continue;const s=this.getScaling(i.scale);s!=null&&(t[e]=s)}return t}}}}),zu,oL=k({"packages/ag-charts-community/src/chart/series/cartesian/interpolationProperties.ts"(){"use strict";mt(),mt(),zu=class extends wt{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}},S([I],zu.prototype,"type",2),S([I],zu.prototype,"tension",2),S([I],zu.prototype,"position",2)}}),Ye,gq=k({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesProperties.ts"(){"use strict";ng(),mt(),Oo(),jm(),vl(),Sl(),Rn(),oL(),Ye=class extends br{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillGradientDefaults=new ya,this.fillPatternDefaults=new Ee,this.fillImageDefaults=new gn,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new zu,this.shadow=new Ya,this.marker=new Hi,this.label=new Vi,this.tooltip=new Ns,this.connectMissingData=!1}},S([I],Ye.prototype,"xKey",2),S([I],Ye.prototype,"xName",2),S([I],Ye.prototype,"yKey",2),S([I],Ye.prototype,"yName",2),S([I],Ye.prototype,"yFilterKey",2),S([I],Ye.prototype,"normalizedTo",2),S([I],Ye.prototype,"fill",2),S([I],Ye.prototype,"fillGradientDefaults",2),S([I],Ye.prototype,"fillPatternDefaults",2),S([I],Ye.prototype,"fillImageDefaults",2),S([I],Ye.prototype,"fillOpacity",2),S([I],Ye.prototype,"stroke",2),S([I],Ye.prototype,"strokeWidth",2),S([I],Ye.prototype,"strokeOpacity",2),S([I],Ye.prototype,"lineDash",2),S([I],Ye.prototype,"lineDashOffset",2),S([I],Ye.prototype,"interpolation",2),S([I],Ye.prototype,"shadow",2),S([I],Ye.prototype,"marker",2),S([I],Ye.prototype,"label",2),S([I],Ye.prototype,"tooltip",2),S([I],Ye.prototype,"connectMissingData",2)}});function vr(t){switch(t.type){case"linear":case"step":return[{x:t.x0,y:t.y0},{x:t.x1,y:t.y1}];case"cubic":return[{x:t.cp0x,y:t.cp0y},{x:t.cp3x,y:t.cp3y}]}}function fq(t){const e=vr(t);return e[0].x>e[1].x&&e.reverse(),e}function mq(t,e){const{x:i,y:s}=e;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:i,y0:s,x1:i,y1:s};case"step":return{type:"step",moveTo:t.moveTo,x0:i,y0:s,x1:i,y1:s,stepX:i};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:i,cp0y:s,cp1x:i,cp1y:s,cp2x:i,cp2y:s,cp3x:i,cp3y:s}}}function Vm(t,e,i){const[s,n]=vr(t),a=n.x!==s.x?(i.x-e.x)/(n.x-s.x):0,o=n.y!==s.y?(i.y-e.y)/(n.y-s.y):0;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:e.x,cp0y:e.y,cp1x:i.x-(t.cp2x-s.x)*a,cp1y:i.y-(t.cp2y-s.y)*o,cp2x:i.x-(t.cp1x-s.x)*a,cp2y:i.y-(t.cp1y-s.y)*o,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y,stepX:i.x-(t.stepX-s.x)*a}}}function Yz(t,e,i){const{moveTo:s}=t,[n,a]=fq(t),{x:o,y:r}=n,{x:l,y:c}=a;if(i<o)return Vm(t,n,n);if(e>l)return Vm(t,a,a);switch(t.type){case"linear":{const h=r===c?void 0:(c-r)/(l-o),u=h==null?r:h*(e-o)+r,d=h==null?r:h*(i-o)+r;return{type:"linear",moveTo:s,x0:e,y0:u,x1:i,y1:d}}case"step":if(i<=t.stepX){const h=t.y0;return{type:"step",moveTo:s,x0:e,y0:h,x1:i,y1:h,stepX:i}}else if(e>=t.stepX){const h=t.y1;return{type:"step",moveTo:s,x0:e,y0:h,x1:i,y1:h,stepX:e}}else{const{y0:h,y1:u,stepX:d}=t;return{type:"step",moveTo:s,x0:e,y0:h,x1:i,y1:u,stepX:d}}case"cubic":{const h=Mb(t.cp0x,t.cp1x,t.cp2x,t.cp3x,e);let[u,d]=Db(t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,h);const p=Mb(d[0].x,d[1].x,d[2].x,d[3].x,i);return[d,u]=Db(d[0].x,d[0].y,d[1].x,d[1].y,d[2].x,d[2].y,d[3].x,d[3].y,p),{type:"cubic",moveTo:s,cp0x:d[0].x,cp0y:d[0].y,cp1x:d[1].x,cp1y:d[1].y,cp2x:d[2].x,cp2y:d[2].y,cp3x:d[3].x,cp3y:d[3].y}}}}function yq(t){const e=[];let i=0,s=NaN,n=NaN;for(const{x:a,y:o}of t){if(i>0){const r=i===1;e.push({type:"linear",moveTo:r,x0:s,y0:n,x1:a,y1:o})}i+=1,s=a,n=o}return e}function xq(t,e){const i=[];let s=0,n=NaN,a=NaN;const o=typeof e=="number"?e:Zz[e];for(const{x:r,y:l}of t){if(s>0){const c=s===1,h=n+(r-n)*o;i.push({type:"step",moveTo:c,x0:n,y0:a,x1:r,y1:l,stepX:h})}s+=1,n=r,a=l}return i}function bq(t,e){const i=Array.isArray(t)?t:Array.from(t);if(i.length<=1)return[];const s=i.map((a,o)=>{const r=o===0?a:i[o-1],l=o===i.length-1?a:i[o+1],c=o===0||o===i.length-1;if(Math.sign(r.y-a.y)===Math.sign(l.y-a.y))return 0;if(!c){const h=Math.abs(r.y-l.y),u=Math.abs(a.y-r.y)/h,d=Math.abs(a.y-l.y)/h;if(u<=Wm||1-u<=Wm||d<=Wm||1-d<=Wm)return 0}return(l.y-r.y)/(l.x-r.x)});s[1]===0&&(s[0]*=2),s[s.length-2]===0&&(s[s.length-1]*=2);const n=[];for(let a=1;a<i.length;a+=1){const o=i[a-1],r=s[a-1],l=i[a],c=s[a],h=l.x-o.x,u=l.y-o.y;let d=h*e/3,p=h*r*e/3,g=h*e/3,f=h*c*e/3;c===0&&Math.abs(p)>Math.abs(u)&&(d*=Math.abs(u/p),p=Math.sign(p)*Math.abs(u)),r===0&&Math.abs(f)>Math.abs(u)&&(g*=Math.abs(u/f),f=Math.sign(f)*Math.abs(u)),n.push({type:"cubic",moveTo:a===1,cp0x:o.x,cp0y:o.y,cp1x:o.x+d,cp1y:o.y+p,cp2x:l.x-g,cp2y:l.y-f,cp3x:l.x,cp3y:l.y})}return n}var Zz,Wm,rL=k({"packages/ag-charts-community/src/chart/series/cartesian/lineInterpolation.ts"(){"use strict";kb(),Zz={start:0,middle:.5,end:1},Wm=.05}});function Ui(t,e,i){return(e-t)*i+t}function vq(t,e){const{x0:i,y0:s,x1:n,y1:a}=t,r=(a-s)/(n-i)*(e-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:e,leftCp2y:r,stepX:e,stepY0:r,stepY1:r,rightCp1x:e,rightCp1y:r,rightCp2x:n,rightCp2y:a}}function Sq(t,e){const{cp0x:i,cp0y:s,cp1x:n,cp1y:a,cp2x:o,cp2y:r,cp3x:l,cp3y:c}=t,h=Mb(i,n,o,l,e),[u,d]=Db(i,s,n,a,o,r,l,c,h),p=u[3].y;return{leftCp1x:u[1].x,leftCp1y:u[1].y,leftCp2x:u[2].x,leftCp2y:u[2].y,stepX:e,stepY0:p,stepY1:p,rightCp1x:d[1].x,rightCp1y:d[1].y,rightCp2x:d[2].x,rightCp2y:d[2].y}}function Mq(t){const{x0:e,y0:i,x1:s,y1:n,stepX:a}=t;return{leftCp1x:(e+a)/2,leftCp1y:i,leftCp2x:(e+a)/2,leftCp2y:i,stepX:a,stepY0:i,stepY1:n,rightCp1x:(a+s)/2,rightCp1y:n,rightCp2x:(a+s)/2,rightCp2y:n}}function Xz(t,e){return t.type==="linear"?vq(t,e):t.type==="cubic"?Sq(t,e):Mq(t)}function qz(t,e,i,s,n,a,o){switch(e){case 0:o?t.moveTo(n,a):t.moveTo(i,s);break;case 1:o?t.lineTo(n,a):t.lineTo(i,s);break}}function Qz(t,e,i,s,n,a){a?t.lineTo(e,i):t.lineTo(s,n)}function Jz(t,e,i,s,n,a,o,r,l,c){c?t.cubicCurveTo(a,o,s,n,e,i):t.cubicCurveTo(s,n,a,o,r,l)}function tF(t,e,i,s,n,a,o){o?(t.lineTo(a,n),t.lineTo(a,i),t.lineTo(e,i)):(t.lineTo(a,i),t.lineTo(a,n),t.lineTo(s,n))}function lL(t,e,i,s){const[n,a]=vr(e);switch(qz(t,i,n.x,n.y,a.x,a.y,s),e.type){case"linear":Qz(t,e.x0,e.y0,e.x1,e.y1,s);break;case"cubic":Jz(t,e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,s);break;case"step":tF(t,e.x0,e.y0,e.x1,e.y1,e.stepX,s);break}}function eF(t,e,i){const[s,n]=vr(t),[a,o]=vr(e),r=Ui(s.x,a.x,i),l=Ui(s.y,a.y,i),c=Ui(n.x,o.x,i),h=Ui(n.y,o.y,i);return[{x:r,y:l},{x:c,y:h}]}function cL(t,e,i,s,n,a){const[{x:o,y:r},{x:l,y:c}]=eF(e,i,s);if(qz(t,n,o,r,l,c,a),e.type==="cubic"&&i.type==="cubic"){const h=Ui(e.cp1x,i.cp1x,s),u=Ui(e.cp1y,i.cp1y,s),d=Ui(e.cp2x,i.cp2x,s),p=Ui(e.cp2y,i.cp2y,s);Jz(t,o,r,h,u,d,p,l,c,a)}else if(e.type==="step"&&i.type==="step"){const h=Ui(e.stepX,i.stepX,s);tF(t,o,r,l,c,h,a)}else if(e.type==="linear"&&i.type==="linear")Qz(t,o,r,l,c,a);else{let h;e.type==="step"?h=e.stepX:i.type==="step"?h=i.stepX:h=(o+l)/2;const u=Xz(e,h),d=Xz(i,h),p=Ui(u.leftCp1x,d.leftCp1x,s),g=Ui(u.leftCp1y,d.leftCp1y,s),f=Ui(u.leftCp2x,d.leftCp2x,s),x=Ui(u.leftCp2y,d.leftCp2y,s),y=Ui(u.stepX,d.stepX,s),b=Ui(u.stepY0,d.stepY0,s),v=Ui(u.stepY1,d.stepY1,s),M=Ui(u.rightCp1x,d.rightCp1x,s),D=Ui(u.rightCp1y,d.rightCp1y,s),L=Ui(u.rightCp2x,d.rightCp2x,s),A=Ui(u.rightCp2y,d.rightCp2y,s);a?(t.cubicCurveTo(L,A,M,D,y,v),t.lineTo(y,b),t.cubicCurveTo(f,x,p,g,o,r)):(t.cubicCurveTo(p,g,f,x,y,b),t.lineTo(y,v),t.cubicCurveTo(M,D,L,A,l,c))}}var iF=k({"packages/ag-charts-community/src/chart/series/cartesian/lineInterpolationPlotting.ts"(){"use strict";kb(),rL()}});function Dq(t,e){return t==null||e==null||typeof t!="object"||typeof e!="object"?!1:"id"in t&&"id"in e?t.id===e.id:t.toString()===e.toString()}function Xs(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),e.type==="continuous"&&typeof t=="number")return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof t=="number")return e.convert(t);if(e.type!=="category")return NaN;let i=e.domain.findIndex(s=>s===t);return i===-1&&(i=e.domain.findIndex(s=>Dq(t,s))),i>=0?e.inset+e.step*i:NaN}function Za(t){return tC(t).valueOf()}function sF({data:t},e){return t.map((i,s)=>({xValue0Index:e.indexOf(Za(i.xValue0)),xValue1Index:e.indexOf(Za(i.xValue1)),datumIndex:s}))}function kq(t,e){const i=e.scales.x,s=t.scales.x;if(i?.type!=="category"||s?.type!=="category")return!0;let n=-1/0;for(const a of i.domain){const o=Xs(a,s);if(Number.isFinite(o)){if(o<n)return!1;n=o}}return!0}function Iq(t,e){let i=-1/0;for(const s of t){const n=Xs(s.value,e.scales.x);if(Number.isFinite(n)){if(n<i)return!1;i=n}}return!0}function Aq(t,e){const i=new Map;for(const{xValue0:h,xValue1:u}of t.data){const d=Za(h),p=Za(u);i.set(d,h).set(p,u)}const s=Array.from(i,([h,u])=>({axisValue:h,value:u}));s.sort((h,u)=>Xs(h.value,t.scales.x)-Xs(u.value,t.scales.x));const n=[];for(const{xValue0:h,xValue1:u}of e.data){const d=Za(h),p=Za(u);i.has(d)||(i.set(d,h),n.push({axisValue:d,value:h})),i.has(p)||(i.set(p,u),n.push({axisValue:p,value:u}))}n.sort((h,u)=>Xs(h.value,e.scales.x)-Xs(u.value,e.scales.x));const a=s;let o=0;for(const h of n){for(let u=a.length-1;u>o;u-=1){const d=Xs(h.value,e.scales.x),p=Xs(a[u].value,e.scales.x);if(d>p){o=u+1;break}}a.splice(o,0,h),o+=1}if(!Iq(a,e))return;const r=a.map(h=>h.axisValue),l=sF(e,r),c=sF(t,r);return{axisValues:r,oldDataAxisIndices:l,newDataAxisIndices:c}}function nF(t,e,i){if(i.xValue1Index===i.xValue0Index+1)return t;const s=vr(t),n=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),a=s[0].x+(e-i.xValue0Index)*n,o=a+n;return Yz(t,a,o)}function aF(t,e){const[i,s]=vr(t),n=Xs(0,e.scales.y);return Vm(t,{x:i.x,y:n},{x:s.x,y:n})}function oF(t){const[e,i]=vr(t);return mq(t,{x:(e.x+i.x)/2,y:(e.y+i.y)/2})}function rF(t,e,i,s,n,a){let o,r;if(n.xValue0Index>=a.xValue1Index){const u=s.findLast(p=>p.xValue1Index<=a.xValue1Index)?.datumIndex,d=u!=null?i.data[u]:void 0;o=d?.xValue1,r=d?.yValue1}else if(n.xValue0Index<=a.xValue0Index){const u=s.find(p=>p.xValue0Index>=a.xValue0Index)?.datumIndex,d=u!=null?i.data[u]:void 0;o=d?.xValue0,r=d?.yValue0}if(o==null||r==null)switch(e){case 0:return aF(t,i);case 1:return oF(t)}const l=Xs(o,i.scales.x),c=Xs(r,i.scales.y),h={x:l,y:c};return Vm(t,h,h)}function hL(t,e){if(e==null)return;const i=Za(t.xValue0),s=Za(t.xValue1);return e.find(n=>Za(n.xValue0)===i&&Za(n.xValue1)===s)?.span}function lF(t,e,i,s,n,a,o){const r=t.data[s.datumIndex],l=r.span,c=hL(r,n);if(c!=null)o.removed.push({from:c,to:c}),o.moved.push({from:c,to:l}),o.added.push({from:l,to:l});else{const h=rF(l,e,t,i,s,a);o.added.push({from:h,to:l})}}function cF(t,e,i,s,n,a,o){const r=t.data[s.datumIndex],l=r.span,c=hL(r,n);if(c!=null)o.removed.push({from:l,to:l}),o.moved.push({from:l,to:c}),o.added.push({from:c,to:c});else{const h=rF(l,e,t,i,s,a);o.removed.push({from:l,to:h})}}function hF(t,e,i,s,n){const a=e[n.xValue0Index],o=i.data.find(x=>Za(x.xValue0)===a),r=e[n.xValue1Index],l=i.data.find(x=>Za(x.xValue1)===r);if(o==null||l==null)return;const[{x:c},{x:h}]=vr(t),u=Xs(o.xValue0,i.scales.x),d=Xs(o.yValue0,i.scales.y),p=Xs(l.xValue1,i.scales.x),g=Xs(l.yValue1,i.scales.y);let f=s.data[n.datumIndex].span;return f=Vm(f,{x:u,y:d},{x:p,y:g}),f=Yz(f,c,h),f}function Cq(t,e,i,s,n,a,o,r,l){const c=n+1,h=o.find(v=>v.xValue0Index<=n&&v.xValue1Index>=c),u=a.find(v=>v.xValue0Index<=n&&v.xValue1Index>=c),d=e.zeroData,p=t.zeroData;if(h==null&&u!=null){lF(t,i,a,u,d,r,l);return}else if(h!=null&&u==null){cF(e,i,o,h,p,r,l);return}else if(h==null||u==null)return;let g;h.xValue0Index===u.xValue0Index&&h.xValue1Index===u.xValue1Index?g=0:h.xValue0Index<=u.xValue0Index&&h.xValue1Index>=u.xValue1Index?g=-1:h.xValue0Index>=u.xValue0Index&&h.xValue1Index<=u.xValue1Index?g=1:g=0;const f=e.data[h.datumIndex],x=nF(f.span,n,h),y=t.data[u.datumIndex],b=nF(y.span,n,u);if(g===1){const v=hF(x,s,e,t,u);v!=null?(l.removed.push({from:x,to:v}),l.moved.push({from:v,to:b}),l.added.push({from:b,to:b})):cF(e,i,o,h,p,r,l)}else if(g===-1){const v=hF(b,s,t,e,h);v!=null?(l.removed.push({from:x,to:x}),l.moved.push({from:x,to:v}),l.added.push({from:v,to:b})):lF(t,i,a,u,d,r,l)}else l.removed.push({from:x,to:x}),l.moved.push({from:x,to:b}),l.added.push({from:b,to:b})}function Lq(t,e,i,s){const n={removed:[],moved:[],added:[]},{axisValues:a,oldDataAxisIndices:o,newDataAxisIndices:r}=t,l={xValue0Index:Math.max(o.at(0)?.xValue0Index??-1/0,r.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(o.at(-1)?.xValue1Index??1/0,r.at(-1)?.xValue1Index??1/0)};for(let c=0;c<a.length-1;c+=1)Cq(e,i,s,a,c,r,o,l,n);return n}function uF(t,e,i){const{span:s}=e;switch(i){case 0:return hL(e,t.zeroData)??aF(s,t);case 1:return oF(s)}}function wq(t,e,i){const s=[],n=[];for(const a of e.data){const o=a.span,r=uF(e,a,i);n.push({from:o,to:r})}for(const a of t.data){const o=a.span,r=uF(t,a,i);s.push({from:r,to:o})}return{removed:n,moved:[],added:s}}function Hm(t,e,i){if(!kq(t,e))return;const s=Aq(t,e);return s==null?wq(t,e,i):Lq(s,t,e,i)}var uL,dL=k({"packages/ag-charts-community/src/chart/series/cartesian/lineInterpolationUtil.ts"(){"use strict";cm(),rL(),uL=(t=>(t[t.Zero=0]="Zero",t[t.Split=1]="Split",t))(uL||{})}});function dF(t){return t.type==="continuous"||t.type==="log"}function pF(t){return t.type==="category"}function Fu(t,e){return t===void 0||e===void 0?t!==void 0||e!==void 0:dF(t)&&dF(e)?t.type===e.type&&Jo(t.domain,e.domain)&&Jo(t.range,e.range):pF(t)&&pF(e)?t.inset===e.inset&&t.step===e.step&&Jo(t.domain,e.domain):!1}function Um(t){return t==null?!1:t.type==="category"?t.domain.every(e=>e!=null):t.domain.every(e=>Number.isFinite(e)||e instanceof Date)&&t.range.every(e=>Number.isFinite(e))}var $m=k({"packages/ag-charts-community/src/chart/series/cartesian/scaling.ts"(){"use strict";R()}});function pS(t,e){let i;const s=t.map(n=>n.point);switch(e.type){case"linear":i=yq(s);break;case"smooth":i=bq(s,e.tension);break;case"step":i=xq(s,e.position);break}return i.map((n,a)=>({span:n,xValue0:t[a].xDatum,yValue0:t[a].yDatum,xValue1:t[a+1].xDatum,yValue1:t[a+1].yDatum}))}function gF(t,e,i=.001){return Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i}function pL({path:t},e){let i;for(const{span:s}of e){const[n,a]=vr(s),o=i!=null&&gF(i,n)?1:0;lL(t,s,o,!1),i=a}}function gS(t,e,i){let s;for(const n of i){const[a,o]=eF(n.from,n.to,t),r=s!=null&&gF(s,a)?1:0;cL(e.path,n.from,n.to,t,r,!1),s=o}}function gL(t,e,i){const s=(r,l)=>gS(r,l,e.removed),n=(r,l)=>gS(r,l,e.moved),a=(r,l)=>gS(r,l,e.added),o=fL(t,i);return{status:t,path:{addPhaseFn:a,updatePhaseFn:n,removePhaseFn:s},pathProperties:o}}function fL(t,e){const i=e==="none"?"updated":t,s={fromFn:n=>{let a;return t==="removed"?a={finish:{visible:!1}}:t==="added"?a={start:{visible:!0}}:a={},{phase:Va[i],...a}},toFn:n=>({phase:Va[i]})};return e==="fade"?{fromFn:n=>({opacity:t==="added"?0:n.opacity,...s.fromFn(n)}),toFn:n=>({opacity:t==="removed"?0:1,...s.toFn(n)})}:s}function fF(t,e,i){const s=t.scales.x?.type==="category",n=e.scales.x?.type==="category";if(s!==n||!Um(t.scales.x)||!Um(e.scales.x)||t.strokeData==null||e.strokeData==null)return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const o=Hm({scales:t.scales,data:t.strokeData.spans},{scales:e.scales,data:e.strokeData.spans},1);if(o==null)return;const r=gL(a,o,"fade"),l=(i?.changed??!0)||!Fu(t.scales.x,e.scales.x)||!Fu(t.scales.y,e.scales.y)||a!=="updated";return{status:a,stroke:r,hasMotion:l}}var fS=k({"packages/ag-charts-community/src/chart/series/cartesian/lineUtil.ts"(){"use strict";Ls(),rL(),iF(),dL(),$m()}});function mF({path:t},{spans:e,phantomSpans:i}){for(let s=0;s<e.length;s+=1){const{span:n}=e[s],a=i[s].span;lL(t,n,0,!1),lL(t,a,1,!0),t.closePath()}}function mS(t,{path:e},i,s){for(let n=0;n<i.length;n+=1){const a=i[n],o=s[n];cL(e,a.from,a.to,t,0,!1),cL(e,o.from,o.to,t,1,!0),e.closePath()}}function yF(t,e,i,s){const n=(l,c)=>mS(l,c,e.removed,i.removed),a=(l,c)=>mS(l,c,e.moved,i.moved),o=(l,c)=>mS(l,c,e.added,i.added),r=fL(t,s);return{status:t,path:{addPhaseFn:o,updatePhaseFn:a,removePhaseFn:n},pathProperties:r}}function xF(t,e){const i=t.scales.x?.type==="category",s=e.scales.x?.type==="category";if(i!==s||!Um(t.scales.x)||!Um(e.scales.x))return;let n="updated";e.visible&&!t.visible?n="removed":!e.visible&&t.visible&&(n="added");const a=Hm({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},0);if(a==null)return;const o=Hm({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},0);if(o==null)return;const r=Hm({scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},{scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},0);if(r==null)return;const l="none",c=yF(n,a,o,l),h=gL(n,r,l);return{status:n,fill:c,stroke:h}}var bF=k({"packages/ag-charts-community/src/chart/series/cartesian/areaUtil.ts"(){"use strict";iF(),dL(),fS(),$m()}});function Km({id:t},e,i,...s){const n={phase:i?Va[i]:"trailing"};nl(t,"markers",e,s,{opacity:0},{opacity:1},n),s.forEach(a=>a.cleanup())}function mL({id:t},e,...i){nl(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function yL({id:t,nodeDataDependencies:e},i,...s){const n=e.seriesRectWidth;He(t,"markers",i,s,{fromFn:(r,l)=>{const c=l.midPoint?.x??n;let h=Nt(0,KI(c/n),1);return isNaN(h)&&(h=0),{scalingX:0,scalingY:0,delay:h,duration:qf,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Ym(t){return{opacity:1,scalingX:1,scalingY:1}}function Zm(t,e){return{x:e.point?.x??NaN,y:e.point?.y??NaN,scalingCenterX:e.point?.x??NaN,scalingCenterY:e.point?.y??NaN}}function Xm(t,{datumIndex:e}){const i=t.getNodeData();if(i===void 0)return;const s=i[e],{point:n}=s??{};if(s==null||n==null)return;const a=4+(n.focusSize??t.getFormattedMarkerStyle(s).size),o=a/2,r=s.point.x-o,l=s.point.y-o;return Ve.toCanvas(t.contentGroup,new ut(r,l,a,a))}var qm=k({"packages/ag-charts-community/src/chart/series/cartesian/markerUtil.ts"(){"use strict";R(),uu(),Ls(),Ft(),hs(),Sp()}});function xL({id:t,visible:e,nodeDataDependencies:i},s,...n){const{seriesRectWidth:a,seriesRectHeight:o}=i;nl(t,"path_properties",s,n,{clipX:0},{clipX:a},{phase:"initial",start:{clip:!0,clipY:o,visible:e},finish:{clip:!1,visible:e}})}function yS({id:t},e,i,s="add",...n){nl(t,e,i,n,{opacity:0},{opacity:1},{phase:s})}function bL(t){return e=>({visible:t.getVisible(),opacity:t.getOpacity(),clipScalingX:1,clip:!1})}function xS({nodeDataDependencies:t},e){const i=s=>isFinite(s)?s:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}var vL=k({"packages/ag-charts-community/src/chart/series/cartesian/pathUtil.ts"(){"use strict";Ls()}}),vF,SF,Qm,Tq=k({"packages/ag-charts-community/src/chart/series/cartesian/areaSeries.ts"(){"use strict";R(),Ls(),eL(),Mu(),We(),gr(),Rt(),cm(),qv(),Vp(),Ga(),fr(),bl(),ll(),du(),gq(),bF(),Rn(),fS(),qm(),vL(),vF=.125,SF=.25,Qm=class extends Ml{constructor(t){super({moduleCtx:t,directionKeys:Tc,directionNames:Nc,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:bL({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:xl,marker:(e,i)=>({...Ym(e),...Zm(e,i)})},clipFocusBox:!1}),this.properties=new Ye,this.connectsToYAxis=!0,this.backgroundGroup=new Ot({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>Gm||this.contextNodeData.strokeData.spans.length>Gm)}attachSeries(t,e,i){super.attachSeries(t,e,i),t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),t?.removeChild(this.backgroundGroup)}attachPaths([t,e]){this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(e),e.zIndex=-1}detachPaths([t,e]){this.backgroundGroup.removeChild(t),this.contentGroup.removeChild(e)}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}setSeriesIndex(t){const e=this.isStacked();return!super.setSeriesIndex(t)&&this._isStacked===e?!1:(this._isStacked=e,e?(this.backgroundGroup.zIndex=[0,t],this.contentGroup.zIndex=[1,t,0]):(this.backgroundGroup.zIndex=[1,t,0,0],this.contentGroup.zIndex=[1,t,0,1]),!0)}async processData(t){if(this.data==null)return;const{data:e,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:a,yKey:o,yFilterKey:r,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),u=this.axes.x?.scale,d=this.axes.y?.scale,{xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:u,yScale:d}),f={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},x=[];Bh(c)&&x.push(Kv(Object.values(f),c)),h&&x.push(Fp());const y={invalidValue:null};(Bh(c)||l)&&n>1&&(y.invalidValue=0),i||(y.forceValue=0),await this.requestDataModel(t,e,{props:[Po(a,p,{id:"xValue"}),Yt(o,g,{id:"yValueRaw",...y}),...r!=null?[Yt(r,g,{id:"yFilterRaw"})]:[],...dz(o,g,{id:"yValueStack",...y,groupId:f.stack}),Yt(o,g,{id:"yValue",...y,groupId:f.value}),...Ic(o,"window","current",{id:"yValueEnd",...y,groupId:f.values},g),...Ic(o,"normal","current",{id:"yValueCumulative",...y,groupId:f.marker},g),...x],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}xCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.x.scale.convert(t),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}yCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.y.scale.convert(t[0]),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i)return[];const n=s.y;if(t==="x"){const o=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",e);return o?.def.type==="key"&&o.def.valueType==="category"?r:_n(hl(r))}const a=this.domainForClippedRange("y",["yValueCumulative"],"xValue",!0);if(n instanceof Ou||n instanceof ga)return _n(a);{const o=Number.isFinite(a[1]-a[0])?[a[0]>0?0:a[0],a[1]<0?0:a[1]]:[];return _n(o)}}getSeriesRange(t,e){const[i,s]=this.domainForVisibleRange("y",["yValueCumulative"],"xValue",e,!0);return[Math.min(i,0),Math.max(s,0)]}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["yValueCumulative"],t,e,i)}createNodeData(){const{axes:t,data:e,processedData:i,dataModel:s}=this,n=t.x,a=t.y;if(!n||!a||!e||!s||i?.type!=="grouped")return;const{yKey:o,xKey:r,yFilterKey:l,marker:c,label:h,fill:u,stroke:d,connectMissingData:p,interpolation:g}=this.properties,{scale:f}=n,{scale:x}=a,{isContinuousY:y}=this.getScaleInformation({xScale:f,yScale:x}),b=(f.bandwidth??0)/2,v=s.resolveKeysById(this,"xValue",i),M=s.resolveColumnById(this,"yValueEnd",i),D=s.resolveColumnById(this,"yValueRaw",i),L=s.resolveColumnById(this,"yValueCumulative",i),A=l!=null?s.resolveColumnById(this,"yFilterRaw",i):void 0,C=s.resolveColumnById(this,"yValueStack",i),T=(q,it,Q)=>{let rt;return(Bh(this.properties.normalizedTo)?y&&_v(Q):!isNaN(Q))&&(rt=it),{x:f.convert(q)+b,y:x.convert(rt),size:c.size}},N=[],P=[],{visibleSameStackCount:O}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let B=!1;const{dataSources:G}=i,V=G.get(this.id)??[];for(const{datumIndex:q}of s.forEachGroupDatum(this,i)){const it=v[q];if(it==null)return;const Q=V[q],rt=D[q],at=L[q],ht=M[q],dt=Number.isFinite(rt),Mt=T(it,+at,rt),Ct=A!=null?A[q]===rt:void 0;if(Ct===!1&&(B=!0),dt&&c&&P.push({series:this,itemId:o,datum:Q,datumIndex:q,midPoint:{x:Mt.x,y:Mt.y},cumulativeValue:ht,yValue:rt,xValue:it,yKey:o,xKey:r,point:Mt,fill:c.fill??u,stroke:c.stroke??d,strokeWidth:c.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:Ct}),dt&&h){const bt=this.getLabelText(h,{value:rt,datum:Q,xKey:r,yKey:o,xName:this.properties.xName,yName:this.properties.yName});N.push({series:this,itemId:o,datum:Q,datumIndex:q,x:Mt.x,y:Mt.y,labelText:bt})}}const W=q=>q.flatMap(it=>Array.isArray(it)?pS(it,g):new Array(it.skip).fill(null)),H=(q,it)=>({point:{x:f.convert(q)+b,y:x.convert(it)},xDatum:q,yDatum:it}),$=q=>{const it=[];for(const{datumIndexes:[Q,rt,at]}of s.forEachGroupDatumTuple(this,i)){const ht=v[rt],dt=C[rt],Mt=dt[q],Ct=Number.isFinite(Mt);if(p&&!Ct)continue;const bt=Q!=null?C[Q]:void 0,qt=at!=null?C[at]:void 0;let Jt=0,Vt=0;for(let Lt=0;Lt<=q;Lt+=1){const Wt=dt[Lt];if(Number.isFinite(Wt)){const se=bt==null||Number.isFinite(bt[Lt]),js=qt==null||Number.isFinite(qt[Lt]);se&&(Jt+=Wt),js&&(Vt+=Wt)}}const Qt=it[it.length-1];if(!p&&(Jt!==Vt||!Ct))if(!Ct&&Array.isArray(Qt)&&Qt.length===1)it[it.length-1]={skip:1};else{const Lt=H(ht,Jt),Wt=H(ht,Vt);Array.isArray(Qt)?Qt.push(Lt):Qt!=null&&(Qt.skip+=1),it.push(Ct?[Wt]:{skip:0})}else{const Lt=p?Mt:Math.max(Jt,Vt),Wt=H(ht,Lt);Array.isArray(Qt)?Qt.push(Wt):Qt!=null?(Qt.skip+=1,it.push([Wt])):it.push([Wt])}}return W(it)},F=this.seriesGrouping?.stackIndex??0,j=()=>{const q=Array.from(s.forEachGroupDatum(this,i),({datumIndex:it})=>{const Q=v[it],at=C[it][F];if(!(p&&!Number.isFinite(at)))return H(Q,0)}).filter(it=>it!=null);return pS(q,g)},z=$(F),Y=z.map(()=>null);for(let q=F-1;q>=-1;q-=1){let it;for(let Q=0;Q<Y.length;Q+=1)Y[Q]==null&&(it??(it=q!==-1?$(q):j()),Y[Q]=it[Q])}const Z=z.map((q,it)=>q??Y[it]),X=z.filter(q=>q!=null);return{itemId:o,fillData:{itemId:o,spans:Z,phantomSpans:Y},strokeData:{itemId:o,spans:X},labelData:N,nodeData:P,scales:this.calculateScaling(),visible:this.visible,stackVisible:O>0,crossFiltering:B}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){const{opacity:e,visible:i,animationEnabled:s}=t,[n,a]=t.paths,o=this.contextNodeData?.crossFiltering===!0,r=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:r,strokeOpacity:this.properties.strokeOpacity*(o?SF:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i||s});const l=Au(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);Cu(n,{fill:l,stroke:void 0,fillOpacity:this.properties.fillOpacity*(o?vF:1)},void 0,this.getShapeFillBBox()),n.setProperties({lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:e,visible:i||s}),xS(this,a),xS(this,n)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty("AreaSeries")}updateFillPath(t,e){const[i]=t;i.path.clear(),mF(i,e.fillData),i.markDirty("AreaSeries")}updateStrokePath(t,e){const{spans:i}=e.strokeData,[,s]=t;s.path.clear(),pL(s,i),s.markDirty("AreaSeries")}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t,s=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?e:[])}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,marker:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h,highlightStyle:u}=this.properties,d=this.getSeriesDomain("x"),p=this.getSeriesDomain("y"),g=Kt(i&&u.item,a.getStyle(),{fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h}),f=this.getShapeFillBBox();e.each((x,y)=>{this.updateMarkerStyle(a,x,y.datum,y.point,fc(y,s,n,d,p),i,g,f,{selected:y.selected})}),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o,color:r}=this.properties.label;e.each((l,c)=>{const{x:h,y:u,labelText:d}=c;d&&i&&this.visible?(l.fontStyle=s,l.fontWeight=n,l.fontSize=a,l.fontFamily=o,l.textAlign="center",l.textBaseline="bottom",l.text=d,l.x=h,l.y=u-10,l.fill=r,l.visible=!0):l.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{xKey:o,xName:r,yKey:l,yName:c,tooltip:h,marker:u}=a,d=n.x,p=n.y;if(!i||!s||!d||!p)return;const g=s.dataSources.get(this.id)?.[t],f=i.resolveKeysById(this,"xValue",s)[t],x=i.resolveColumnById(this,"yValueRaw",s)[t],{xDomain:y,yDomain:b}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));if(f==null)return;const v=u.getStyle(),M={datum:g,xValue:f,yValue:x},D=this.getMarkerStyle(u,g,fc(M,o,l,y,b),!1,void 0,v);return this.formatTooltipWithContext(h,{heading:d.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:p.formatDatum(x)}]},{seriesId:e,datum:g,title:c,xKey:o,xName:r,yKey:l,yName:c,...D,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:a,marker:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties,h=!o.enabled||o.fill===void 0,u=h?Au(t,r,l,c):Au(o.fill,o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults);return{marker:{...this.getMarkerStyle(o,void 0,void 0,!1,void 0,{fill:u,fillOpacity:h?i:o.fillOpacity}),enabled:o.enabled||n<=0},line:{stroke:e,strokeOpacity:s,strokeWidth:n,lineDash:a}}}getLegendData(t){if(t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:a,legendItemName:o,showInLegend:r}=this.properties;return[{legendType:t,id:e,itemId:n,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:o??a??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!r}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),xL(this,a,...n),as([e],Zm),yL(this,a,e),de(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,contextData:n,paths:a,previousContextData:o}=t,[r,l]=a;if(r==null&&l==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(a,n)},h=()=>{e.skipCurrentBatch(),c()};if(n==null||o==null){c(),Km(this,e,"added",i),yS(this,"fill_path_properties",e,"add",r),yS(this,"stroke_path_properties",e,"add",l),de(this,"labels",e,s);return}if(n.crossFiltering!==o.crossFiltering){h();return}const u=xF(n,o);if(u===void 0){h();return}else if(u.status==="no-op")return;Km(this,e,void 0,i),He(this.id,"fill_path_properties",e,[r],u.fill.pathProperties),lS(this.id,"fill_path_update",e,[r],u.fill.path),He(this.id,"stroke_path_properties",e,[l],u.stroke.pathProperties),lS(this.id,"stroke_path_update",e,[l],u.stroke.path),de(this,"labels",e,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,n)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Ot}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=t,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,t.datum,fc(t,e,i,s,n),!0)}computeFocusBounds(t){return Xm(this,t)}},Qm.className="AreaSeries",Qm.type="area"}});function Oc(t){const e={enabled:K,xOffset:et,yOffset:et,renderer:qd(Pt(J,ts({text:J,color:yt,backgroundColor:yt,opacity:St},"crosshair label renderer result object")))};return t&&(e.format=J),{enabled:K,snap:K,label:e,...ct,...vt}}function _c(t,e){return{min:De(t,Pa("max")),max:De(t,Qo("min")),nice:K,interval:{step:e?Pt(If,bS,Zx(ki)):If,values:kt(t),minSpacing:De(U,Pa("maxSpacing")),maxSpacing:De(U,Qo("minSpacing"))}}}var bS,Dl,Ec,Bo,Sr,Pc,og,vS,rg,SL,Jm,kl,Mr,ju=k({"packages/ag-charts-community/src/chart/axesOptionsDefs.ts"(){"use strict";R(),il(),bS=lt("millisecond","second","minute","hour","day","month","year"),Dl=te(n_,"a valid number format string"),Ec={enabled:K,text:J,padding:et,...ve},Bo=te({enabled:K,type:pt(lt("line","range")),range:De(te((t,{options:e})=>e.type==="range","crossLine type to be 'range'"),kt(Tt),Gh(2,2)),value:De(te((t,{options:e})=>e.type==="line","crossLine type to be 'line'"),Tt),label:Ec,fill:J,fillOpacity:St,...ct,...vt},"cross-line options"),Sr={...Bo,label:{...Ec,position:lt("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:et}},Pc={enabled:K,rotation:et,avoidCollisions:K,minSpacing:U,spacing:U,formatter:he,itemStyler:Ce({...ve,spacing:et}),...ve},og={autoRotate:K,autoRotateAngle:et,...Pc},vS={format:Dl,...og},rg={format:Pt(J,Xd),...og},SL={enabled:K,width:U,size:U,stroke:yt},Jm={enabled:K,label:rg,tick:SL},kl={reverse:K,gridLine:{enabled:K,width:U,style:es({stroke:Pt(yt,Qd),lineDash:kt(U)},"a grid-line style object array")},interval:{values:kt(Tt),minSpacing:U},label:Pc,line:{enabled:K,width:U,stroke:yt},tick:SL},kl.context=At(()=>!0),kl.layoutConstraints=At({stacked:pt(K),align:pt(lt("start","end")),unit:pt(lt("percent","px")),width:pt(U)}),Mr={...kl,keys:kt(J),crossLines:es(Sr,"a cross-line options array"),position:lt("top","right","bottom","left"),thickness:U,title:{enabled:K,text:J,spacing:U,formatter:he,...ve}},Mr.title._enabledFromTheme=At(K)}}),ty,ML,ey,SS,iy,DL,sy,ny,MS,kL,MF,DF,IL,ay,Rc,It,Zt,Bn,Dr,pe,Il,lg,oy,ee,zo,ry,zn=k({"packages/ag-charts-community/src/chart/commonOptionsDefs.ts"(){"use strict";R(),ju(),ty=Pt(lt("circle","cross","diamond","heart","plus","pin","square","star","triangle"),he),ML=lt("never","always","hyphenate","on-space"),ey=lt("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),SS=lt("pointer","node","top","right","bottom","left","top-left","top-right","bottom-left","bottom-right"),iy=Pt(U,lt("exact","nearest")),DL=lt("pointer","start","middle","end"),sy={enabled:K,text:J,textAlign:lt("left","center","right"),wrapping:lt("never","always","hyphenate","on-space"),spacing:U,maxWidth:U,maxHeight:U,...ve},sy.padding=At(U),ny={enabled:K,text:J,renderer:qd(Pt(J,$x))},MS=["defaults","download","zoom-to-cursor","pan-to-cursor","toggle-series-visibility","toggle-other-series","separator"],kL={type:lt("action","separator"),showOn:lt("always","series-area","series-node","legend-item"),label:pt(J),enabled:K,action:he,items:(t,e)=>IL(t,e)},kL.iconUrl=At(J),MF=ts(kL),DF=te((t,e)=>{let i;return typeof t=="string"?MS.includes(t)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new ac("invalid",`a context menu item string alias: ["${MS.join('", "')}"]`,t,e.path))):i=MF(t,e),i},`a context menu item object or string alias: [${MS.join(", ")}]`),IL=kt(DF,"a menu items array",!1),ay=es({label:pt(J),action:pt(he)},"a context menu actions array"),Rc={label:J,ariaLabel:J,tooltip:J,icon:lt("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},It={width:U,height:U,minWidth:U,minHeight:U,suppressFieldDotNotation:K,title:sy,subtitle:sy,footnote:sy,padding:{top:U,right:U,bottom:U,left:U},seriesArea:{clip:K,padding:{top:U,right:U,bottom:U,left:U}},legend:{enabled:K,position:lt("top","right","bottom","left"),orientation:lt("horizontal","vertical"),maxWidth:U,maxHeight:U,spacing:U,preventHidingAll:K,reverseOrder:K,toggleSeries:K,item:{marker:{size:U,shape:ty,padding:U,strokeWidth:U},line:{length:U,strokeWidth:U},label:{maxLength:U,formatter:he,...ve},maxWidth:U,paddingX:U,paddingY:U,showSeriesStroke:K},pagination:{marker:{size:U,shape:ty,padding:U},activeStyle:{...gt,...ct},inactiveStyle:{...gt,...ct},highlightStyle:{...gt,...ct},label:ve},listeners:{legendItemClick:he,legendItemDoubleClick:he}},gradientLegend:{enabled:K,position:lt("top","right","bottom","left"),spacing:U,reverseOrder:K,gradient:{preferredLength:U,thickness:U},scale:{label:{...ve,format:Dl,formatter:he},padding:U,interval:{step:et,values:Ws,minSpacing:De(U,Pa("maxSpacing")),maxSpacing:De(U,Qo("minSpacing"))}}},listeners:{seriesNodeClick:he,seriesNodeDoubleClick:he,seriesVisibilityChange:he,click:he,doubleClick:he,annotations:he,zoom:he},loadGoogleFonts:K,highlight:{range:lt("tooltip","node")},overlays:{loading:ny,noData:ny,noVisibleSeries:ny,unsupportedBrowser:ny},tooltip:{enabled:K,showArrow:K,pagination:K,delay:U,range:iy,wrapping:ML,mode:lt("single","shared","compact"),position:{type:SS,anchorTo:lt("pointer","node","chart"),placement:Pt(ey,kt(ey)),xOffset:et,yOffset:et}},animation:{enabled:K,duration:U},contextMenu:{enabled:K,items:IL,extraActions:ay,extraSeriesAreaActions:ay,extraNodeActions:ay,extraLegendItemActions:ay},dataSource:{getData:he},keyboard:{enabled:K,tabIndex:et},touch:{dragAction:lt("none","drag","hover")},ranges:{enabled:K,buttons:es({...Rc,value:Pt(et,De(kt(Pt(et,Ea)),Gh(2,2)),he)},"range button options array")},locale:{localeText:Xd,getLocaleText:qd(J)},background:{visible:K,fill:yt,image:{url:pt(J),top:et,right:et,bottom:et,left:et,width:U,height:U,opacity:St}},styleNonce:J,sync:{enabled:K,groupId:J,axes:lt("x","y","xy"),nodeInteraction:K,zoom:K},zoom:{enabled:K,enableAxisDragging:K,enableDoubleClickToReset:K,enablePanning:K,enableScrolling:K,enableSelecting:K,enableTwoFingerZoom:K,keepAspectRatio:K,anchorPointX:DL,anchorPointY:DL,axes:lt("x","y","xy"),deceleration:Pt(lt("off","short","long"),St),minVisibleItems:U,minVisibleItemsX:U,minVisibleItemsY:U,panKey:lt("alt","ctrl","meta","shift"),scrollingStep:St,autoScaling:{enabled:K,padding:St},buttons:{enabled:K,buttons:es({...Rc,value:lt("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:J},"zoom button options array"),visible:lt("always","zoomed","hover")}}},It.dataSource.requestThrottle=At(U),It.dataSource.updateThrottle=At(U),It.dataSource.updateDuringInteraction=At(K),It.zoom.enableIndependentAxes=At(K),It.statusBar=At(Tt),It.foreground=At({visible:K,text:J,image:{url:J,top:et,right:et,bottom:et,left:et,width:U,height:U,opacity:St},...gt}),It.context=At(()=>!0),It.overrideDevicePixelRatio=At(et),It.sync.domainMode=At(lt("direction","position","key")),Zt={cursor:J,showInLegend:K,nodeClickRange:iy,listeners:{nodeClick:he,nodeDoubleClick:he},highlightStyle:{item:{...gt,...ct},series:{enabled:K,dimOpacity:St,strokeWidth:U}}},Bn={...Zt,id:J,visible:K,data:Ws},Bn.context=At(()=>!0),Bn.seriesGrouping=At(Tt),Bn.highlight=At({enabled:K}),Dr={enabled:K,shape:ty,size:U,itemStyler:Ce({...gt,...ct,...vt,shape:ty,size:U}),...gt,...ct,...vt},pe={enabled:K,formatter:he,...ve},Il={...pe,lineHeight:U,minimumFontSize:U,wrapping:ML,overflowStrategy:lt("ellipsis","hide")},lg={visible:K,cap:{visible:K,length:U,lengthRatio:St,...ct,...vt},...ct,...vt},oy={...lg,xLowerKey:J,xUpperKey:J,yLowerKey:J,yUpperKey:J,xLowerName:J,xUpperName:J,yLowerName:J,yUpperName:J,itemStyler:Ce({visible:K,...ct,...vt,cap:{visible:K,length:U,lengthRatio:St,...ct,...vt}})},ee={enabled:K,showArrow:K,range:iy,renderer:qd(Pt(J,ts({heading:J,title:J,data:es({label:pt(J),value:pt(J)})},"tooltip renderer result object"))),position:{type:SS,anchorTo:lt("node","pointer","chart"),placement:Pt(ey,kt(ey)),xOffset:et,yOffset:et},interaction:{enabled:K}},ee.position._seriesOverrideType=At(SS),zo={enabled:K,xOffset:et,yOffset:et,blur:U,color:yt},ry=jh({linear:{},smooth:{tension:St},step:{position:lt("start","middle","end")}},"interpolation line options")}}),AL,CL,LL=k({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesOptionsDef.ts"(){"use strict";R(),zn(),AL={showInMiniChart:K,connectMissingData:K,interpolation:ry,label:pe,marker:Dr,tooltip:ee,shadow:zo,...Zt,...gt,...ct,...vt},CL={...AL,...Bn,type:pt(ke("area")),xKey:pt(J),yKey:pt(J),xName:J,yName:J,stacked:K,stackGroup:J,normalizedTo:et}}}),kF,wL,TL=k({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesModule.ts"(){"use strict";si(),fi(),Tq(),LL(),kF={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:t=>new Qm(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{_seriesOverrideType:"node"}},fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:yl,fillImageDefaults:Lc,stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:gl,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:yl},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}}},wL={type:"series",name:"area",chartType:"cartesian",options:CL,create:t=>new Qm(t)}}});function NL(t,e){for(const i of e){const s=i.datum;s===void 0?st.error("undefined datum"):t.addValue(i,s)}}function OL(t,e){const{x:i,y:s}=e,{nearest:n,distanceSquared:a}=t.getQuadTree().find(i,s);if(n!==void 0)return{datum:n.value,distance:Math.sqrt(a)}}var _L=k({"packages/ag-charts-community/src/chart/series/cartesian/quadtreeUtil.ts"(){"use strict";R()}}),DS,EL,PL=k({"packages/ag-charts-community/src/chart/series/cartesian/abstractBarSeries.ts"(){"use strict";R(),Sm(),Us(),gr(),mt(),kc(),Zv(),Ga(),Rn(),_L(),DS=class extends br{constructor(){super(...arguments),this.direction="vertical"}},S([I],DS.prototype,"direction",2),EL=class extends Ml{constructor(){super(...arguments),this.groupScale=new Bp,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(t,e){const i=typeof e=="boolean"?1:.5,s=re(this.smallestDataInterval)?this.smallestDataInterval*i:0,n=hl(t)??[NaN,NaN];return typeof e=="boolean"?n[e?0:1]-=(e?1:-1)*s:(n[0]-=s,n[1]+=s),_n(n)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}getBandwidth(t,e){return ye.is(t.scale)?t.scale.calcBandwidth(this.smallestDataInterval,e):t.scale.bandwidth}xCoordinateRange(t){const e=this.axes[this.getCategoryDirection()],i=e.scale,s=this.getBandwidth(e,0)??0,n=ye.is(i)?s*-.5:0,a=i.convert(t)+n;return[a,a+s]}yCoordinateRange(t){const i=this.axes[this.getBarDirection()].scale,s=t.map(n=>i.convert(n));if(s.length===1){const n=i.convert(0);return[Math.min(s[0],n),Math.max(s[0],n)]}return[Math.min(...s),Math.max(...s)]}updateGroupScale(t){const e=[],{groupScale:i}=this,s=this.getBandwidth(t),{index:n,visibleGroupCount:a}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let r=0;r<a;r++)e.push(String(r));return i.domain=e,i.range=[0,s??0],t instanceof Ac?i.paddingInner=t.groupPaddingInner:t instanceof cl?(i.paddingInner=t.groupPaddingInner,i.round=i.padding!==0):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:n}}resolveKeyDirection(t){return this.getBarDirection()==="x"?t==="x"?"y":"x":t}initQuadTree(t){NL(t,this.datumNodesIter())}pickNodeClosestDatum(t){return OL(this,t)}}}}),kS,Ne,Nq=k({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesProperties.ts"(){"use strict";ng(),mt(),Oo(),vl(),Sl(),PL(),kS=class extends Vi{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}},S([I],kS.prototype,"placement",2),S([I],kS.prototype,"padding",2),Ne=class extends DS{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new ya,this.fillPatternDefaults=new Ee,this.fillImageDefaults=new gn,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new Ya,this.label=new kS,this.tooltip=new Ns,this.sparklineMode=!1,this.fastDataProcessing=!1}},S([I],Ne.prototype,"xKey",2),S([I],Ne.prototype,"xName",2),S([I],Ne.prototype,"yKey",2),S([I],Ne.prototype,"yName",2),S([I],Ne.prototype,"yFilterKey",2),S([I],Ne.prototype,"stackGroup",2),S([I],Ne.prototype,"normalizedTo",2),S([I],Ne.prototype,"fill",2),S([I],Ne.prototype,"fillGradientDefaults",2),S([I],Ne.prototype,"fillPatternDefaults",2),S([I],Ne.prototype,"fillImageDefaults",2),S([I],Ne.prototype,"fillOpacity",2),S([I],Ne.prototype,"stroke",2),S([I],Ne.prototype,"strokeWidth",2),S([I],Ne.prototype,"strokeOpacity",2),S([I],Ne.prototype,"lineDash",2),S([I],Ne.prototype,"lineDashOffset",2),S([I],Ne.prototype,"cornerRadius",2),S([I],Ne.prototype,"crisp",2),S([I],Ne.prototype,"itemStyler",2),S([I],Ne.prototype,"shadow",2),S([I],Ne.prototype,"label",2),S([I],Ne.prototype,"tooltip",2),S([I],Ne.prototype,"sparklineMode",2),S([I],Ne.prototype,"fastDataProcessing",2)}});function IF(t,e,i,s){if(e!=null){const[n,a]=e;if(n!==0||a!==1)return!1}if(ye.is(t)){const n=t.calcBandwidth(s)-t.calcBandwidth(i);if(n>0&&n<1)return!1}return!0}function ly(t,e,i){const{startingX:s,startingY:n}=_q(t,e);return{isVertical:t,calculate:(o,r)=>{let l=t?o.x:s,c=t?n:o.y,h=t?o.width:0,u=t?0:o.height;const{opacity:d=1}=o;r&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=r,h=t?r.width:0,u=t?0:r.height,t&&!IS(r)?c+=r.height:!t&&IS(r)&&(l+=r.width));let p;return o.clipBBox==null?p=void 0:IS(o)?p=t?new ut(l,c-u,h,u):new ut(l-h,c,h,u):p=new ut(l,c,h,u),{x:l,y:c,width:h,height:u,clipBBox:p,opacity:d}},mode:i}}function Oq(t,e){return{isVertical:t,calculate:i=>({x:t?i.x:i.x+i.width/2,y:t?i.y+i.height/2:i.y,width:t?i.width:0,height:t?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1}),mode:e}}function cy(t){const e=a=>a==null||isNaN(a.x)||isNaN(a.y);return{toFn:(a,o,r)=>r==="removed"&&a.datum==null&&t.mode==="fade"?{...hy(a,o),opacity:0}:r==="removed"||e(o)?t.calculate(o,a.previousDatum):{x:o.x,y:o.y,width:o.width,height:o.height,clipBBox:o.clipBBox,opacity:o.opacity??1},fromFn:(a,o,r)=>{r==="updated"&&e(o)?r="removed":r==="updated"&&e(a.previousDatum)&&(r="added");let l;r==="added"&&a.previousDatum==null&&t.mode==="fade"?l={...hy(a,o),opacity:0}:r==="unknown"||r==="added"?l=t.calculate(o,a.previousDatum):l={x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity??1};const c=Va[r];return{...l,phase:c}},applyFn:(a,o,r)=>{a.setProperties(o),a.crisp=r==="end"&&(a.datum?.crisp??!1)}}}function _q(t,e){const i=e[t?"y":"x"];let s=1/0,n=0;return i?(t?n=i.scale.convert(ye.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(ye.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:n}):{startingX:s,startingY:n}}function hy(t,{x:e,y:i,width:s,height:n,clipBBox:a,opacity:o=1}){return{x:e,y:i,width:s,height:n,clipBBox:a,opacity:o,crisp:t.datum?.crisp??!1}}function RL(t,e){if(e===void 0)return;const{x:i,y:s,width:n,height:a}=e;return Ve.toCanvas(t.contentGroup,new ut(i,s,n,a))}var IS,BL=k({"packages/ag-charts-community/src/chart/series/cartesian/barUtil.ts"(){"use strict";R(),Ls(),Us(),Ft(),hs(),IS=t=>eb(t.yValue??0)}});function zL(t,e,i,s,n,a){let o=a?.reduced?.diff?.[t];if(o?.changed)return o;const r=Eq(s,n);return o==null&&a?.reduced?.diff!=null?(o={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},r?o.updated=new Set(Array.from(e,({datum:l})=>i(l))):o.added=new Set(Array.from(e,({datum:l})=>i(l)))):r&&(o={changed:!0,added:new Set,updated:new Set(Array.from(e,({datum:l})=>i(l))),removed:new Set,moved:new Set}),o}function AF(t){return typeof t=="object"&&t!==null&&"groupScale"in t}function Eq(t,e){if(!e)return!1;const i=t.scales,s=e.scales;if(!Fu(i.x,s.x)||!Fu(i.y,s.y))return!0;if(!AF(t)||!AF(e))return!1;const n=t.groupScale,a=e.groupScale;return!Fu(n,a)}var FL=k({"packages/ag-charts-community/src/chart/series/cartesian/diffUtil.ts"(){"use strict";$m()}});function CF(t,e,i){if(e.enabled&&i){const{x:s,y:n,text:a,textAlign:o,textBaseline:r}=i,{color:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d}=e;t.setProperties({visible:!0,x:s,y:n,text:a,fill:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d,textAlign:o,textBaseline:r})}else t.visible=!1}function LF({isUpward:t,isVertical:e,placement:i,padding:s=0,rect:n}){let a=n.x+n.width/2,o=n.y+n.height/2,r="center",l="middle";if(i!=="inside-center"){const c=(t?1:-1)*(e?-1:1),{direction:h,textAlignment:u}=wF[i],d=(h+1)*.5;if(e){const p=t?n.y+n.height:n.y,g=n.height*c;o=p+g*d+s*u*c,l=u===c?"top":"bottom"}else{const p=t?n.x:n.x+n.width,g=n.width*c;a=p+g*d+s*u*c,r=u===c?"left":"right"}}return{x:a,y:o,textAlign:r,textBaseline:l}}var wF,TF=k({"packages/ag-charts-community/src/chart/series/cartesian/labelUtil.ts"(){"use strict";wF={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}}}}),NF,OF,_F,EF,PF,cg,RF=k({"packages/ag-charts-community/src/chart/series/cartesian/barSeries.ts"(){"use strict";R(),Ls(),Us(),Ft(),Lm(),qv(),Ga(),fr(),bl(),ll(),du(),PL(),Nq(),BL(),Rn(),FL(),TF(),$m(),NF=0,OF=1,_F=2,EF=3,PF=4,cg=class extends EL{constructor(t){super({moduleCtx:t,directionKeys:Tc,directionNames:Nc,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:hy,label:xl}}),this.properties=new Ne,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(t){if(!this.data)return;const{xKey:e,yKey:i,yFilterKey:s,normalizedTo:n,fastDataProcessing:a}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:r}=this,l=this.seriesGrouping?.groupCount??0,h=(this.seriesGrouping?.stackCount??0)>=1||n!=null,u=!a||l>1||h,d=!this.ctx.animationManager.isSkipped(),p=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:f,xScaleType:x,yScaleType:y}=this.getScaleInformation({xScale:p,yScale:g}),b=`bar-stack-${o}-yValues`,v=`${b}-trailing`,M=this.visible?{}:{forceValue:0},D=[Po(e,x,{id:"xValue"}),Yt(i,y,{id:"yValue-raw",invalidValue:null,...M})];this.crossFilteringEnabled()&&D.push(Yt(s,y,{id:"yFilterValue",invalidValue:null,...M})),h&&D.push(...Ic(i,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:b,separateNegative:!0,...M},y),...Ic(i,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:v,separateNegative:!0,...M},y)),f&&D.push(jC,GC),re(n)&&D.push(Kv([b,v],Math.abs(n))),d&&this.processedData&&D.push(jp(this.id,this.processedData)),(d||!u)&&D.push(Fp());const{dataModel:L,processedData:A}=await this.requestDataModel(t,r,{props:D,groupByKeys:u,groupByData:!u});this.dataAggregationFilters=this.aggregateData(L,A),this.smallestDataInterval=A.reduced?.smallestKeyInterval,this.largestDataInterval=A.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(i==null||e==null)return[];if(t===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",e);return o?.def.type==="key"&&o.def.valueType==="category"?r:this.padBandExtent(r)}const s=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";let n=this.domainForClippedRange(t,[s],"xValue",!0);const a=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",e):void 0;if(a!=null&&(n=[Math.min(n[0],a[0]),Math.max(n[1],a[1])]),this.getValueAxis()instanceof Ou)return _n(n);{const o=Number.isFinite(n[1]-n[0])?[Math.min(0,n[0]),Math.max(0,n[1])]:[];return _n(o)}}getSeriesRange(t,e){const i=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",[s,n]=this.domainForVisibleRange("y",[i],"xValue",e,!0);return[Math.min(s,0),Math.max(n,0)]}getVisibleItems(t,e,i){const s=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";return this.countVisibleItems("xValue",[s],t,e,i)}aggregateData(t,e){}createNodeData(){const{dataModel:t,processedData:e,groupScale:i,dataAggregationFilters:s}=this,n=this.getCategoryAxis(),a=this.getValueAxis();if(!t||!e||!n||!a)return;const o=e.dataSources?.get(this.id);if(o==null)return;const r=n.scale,l=a.scale,{xKey:c,yKey:h,xName:u,yName:d,legendItemName:p,label:g}=this.properties,f=a.isReversed(),{barWidth:x,groupIndex:y}=this.updateGroupScale(n),b=i.convert(String(y)),v=ye.is(r)?x*-.5:0,M=t.resolveKeysById(this,"xValue",e),D=t.resolveColumnById(this,"yValue-raw",e),L=this.crossFilteringEnabled()?t.resolveColumnById(this,"yFilterValue",e):void 0,A=!this.ctx.animationManager.isSkipped(),C=j=>r.convert(M[j])+b+v,T=this.properties.crisp??IF(n?.scale,n?.visibleRange,this.smallestDataInterval,this.largestDataInterval),N=l.convert(0),P=({datum:j,datumIndex:z,valueIndex:Y,xValue:Z,yValue:X,cumulativeValue:tt,phantom:q,currY:it,prevY:Q,x:rt,width:at,isPositive:ht,yRange:dt,labelText:Mt,opacity:Ct,crossScale:bt=1})=>{const qt=ht!==f,Jt=l.convert(it),Vt=l.convert(Q),Qt=l.convert(dt),Lt=this.getBarDirection()==="x",Wt=at*.5*(1-bt),se={x:Lt?Math.min(Jt,Vt):rt+Wt,y:Lt?rt+Wt:Math.min(Jt,Vt),width:Lt?Math.abs(Vt-Jt):at*bt,height:Lt?at*bt:Math.abs(Vt-Jt)},js=new ut(se.x,se.y,se.width,se.height),ln={x:Lt?Math.min(N,Qt):rt+Wt,y:Lt?rt+Wt:Math.min(N,Qt),width:Lt?Math.abs(N-Qt):at*bt,height:Lt?at*bt:Math.abs(N-Qt)},bo=this.shouldFlipXY()?se.height:se.width;return{series:this,itemId:q?pa(h,q):h,datum:j,datumIndex:z,valueIndex:Y,cumulativeValue:tt,phantom:q,xValue:Z,yValue:X,yKey:h,xKey:c,capDefaults:{lengthRatioMultiplier:bo,lengthMax:bo},x:ln.x,y:ln.y,width:ln.width,height:ln.height,midPoint:{x:se.x+se.width/2,y:se.y+se.height/2},opacity:Ct,topLeftCornerRadius:Lt!==qt,topRightCornerRadius:qt,bottomRightCornerRadius:Lt===qt,bottomLeftCornerRadius:!qt,clipBBox:js,crisp:T,label:Mt!=null?{text:Mt,...LF({isUpward:qt,isVertical:!Lt,placement:g.placement,padding:g.padding,rect:se})}:void 0,missing:X==null,focusable:!q}},O=[],B=[],G=[],V=(j,z,Y,Z,X,tt,q,it)=>{const Q=M[j];if(Q==null)return;const rt=D[j],at=L!=null?Number(L[j]):void 0,ht=rt>=0&&!Object.is(rt,-0);if(!Number.isFinite(tt)||at!=null&&!Number.isFinite(at))return;const dt=rt!=null?this.getLabelText(this.properties.label,{datum:o[j],value:at??rt,xKey:c,yKey:h,xName:u,yName:d,legendItemName:p}):void 0,Mt=at!=null&&at>rt,Ct=P({datum:o[j],datumIndex:j,valueIndex:z,xValue:Q,yValue:at??rt,cumulativeValue:at??tt,phantom:!1,currY:at!=null?X+at:tt,prevY:X,x:Y,width:Z,isPositive:ht,yRange:Math.max(X+(at??-1/0),q),labelText:dt,opacity:it,crossScale:Mt?.6:void 0});if(B.push(Ct),G.push(Ct),at!=null){const bt=P({datum:o[j],datumIndex:j,valueIndex:z,xValue:Q,yValue:at,cumulativeValue:at,phantom:!0,currY:tt,prevY:X,x:Y,width:Z,isPositive:ht,yRange:q,labelText:void 0,opacity:it,crossScale:void 0});O.push(bt)}},[W,H]=r.range,$=H-W,F=s?.find(j=>j.maxRange>$);if(e.type==="grouped"){const j=x,z=t.hasColumnById(this,"yValue-start"),Y=z?t.resolveColumnById(this,"yValue-start",e):void 0,Z=z?t.resolveColumnById(this,"yValue-end",e):void 0,X=z?t.resolveProcessedDataIndexById(this,"yValue-range"):-1;for(const{datumIndex:tt,valueIndex:q,group:{aggregation:it}}of t.forEachGroupDatum(this,e)){const Q=C(tt),rt=D[tt],at=rt>=0&&!Object.is(rt,-0),ht=z?Number(Y?.[tt]):0,dt=z?Number(Z?.[tt]):rt;let Mt=dt;z&&(Mt=it[X][at?1:0]),V(tt,q,Q,j,ht,dt,Mt,1)}}else if(F==null){const j=x;let[z,Y]=this.visibleRange("xValue",n.range);e.input.count<1e3&&(z=0,Y=e.input.count);for(let Z=z;Z<Y;Z+=1){const X=C(Z),tt=Number(D[Z]);V(Z,0,X,j,0,tt,tt,1)}}else{const{indexData:j,indices:z}=F,[Y,Z]=this.visibleRange("xValue",n.range,z);for(let X=Y;X<Z;X+=1){const tt=X*PF,q=j[tt+NF],it=j[tt+OF],Q=j[tt+_F],rt=j[tt+EF];if(q===-1)continue;const at=C((q+it)/2|0),ht=Math.abs(C(it)-C(q))+x,dt=M[rt]!=null?Number(D[rt]):NaN,Mt=M[Q]!=null?Number(D[Q]):NaN;if(dt>0){const Ct=Mt>=0?Mt/dt:1;V(rt,0,at,ht,0,dt,dt,Ct)}if(Mt<0){const Ct=dt<=0?dt/Mt:1;V(Q,1,at,ht,0,Mt,Mt,Ct)}}}return{itemId:h,nodeData:O.length>0?[...O,...B]:B,labelData:G,scales:this.calculateScaling(),visible:this.visible||A,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new Ts}getHighlightData(t,e){const i=t.find(s=>s.datum===e.datum&&!s.phantom);return i!=null?[i]:void 0}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>this.getDatumId(e))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,fillGradientDefaults:s,fillPatternDefaults:n,fillImageDefaults:a}=e,o=t?e.highlightStyle.item:void 0;return dr({fill:o?.fill??e.fill,fillOpacity:o?.fillOpacity??e.fillOpacity,stroke:o?.stroke??e.stroke,strokeWidth:o?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:o?.strokeOpacity??e.strokeOpacity,lineDash:o?.lineDash??e.lineDash??[],lineDashOffset:o?.lineDashOffset??e.lineDashOffset,cornerRadius:i},s,n,a)}getItemStyleOverrides(t,e,i,s,n,a){const{id:o,properties:r}=this,{xKey:l,yKey:c,itemStyler:h,fillGradientDefaults:u,fillPatternDefaults:d,fillImageDefaults:p}=r;if(h==null)return;const{xDomain:g,yDomain:f}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})),x=this.cachedDatumCallback(pa(t,a?"highlight":"node"),()=>this.callWithContext(h,{seriesId:o,...fc(e,l,c,g,f),datum:e,xValue:i,yValue:s,highlighted:a,...n}));return dr(x,u,d,p)}updateDatumNodes(t){const{shadow:e}=this.properties,i=this.getCategoryDirection()==="x",s=this.getItemBaseStyle(t.isHighlight),n=this.getShapeFillBBox();t.datumSelection.each((a,o)=>{const r=this.getItemStyleOverrides(String(o.datumIndex),o.datum,o.xValue,o.yValue,s,t.isHighlight);a.opacity=o.opacity??0,Cu(a,s,r,n);const l=r?.cornerRadius??s.cornerRadius;a.topLeftCornerRadius=o.topLeftCornerRadius?l:0,a.topRightCornerRadius=o.topRightCornerRadius?l:0,a.bottomRightCornerRadius=o.bottomRightCornerRadius?l:0,a.bottomLeftCornerRadius=o.bottomLeftCornerRadius?l:0,a.visible=i?(o.clipBBox?.width??o.width)>0:(o.clipBBox?.height??o.height)>0,a.crisp=o.crisp,a.fillShadow=e})}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=1})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{CF(e,this.properties.label,i.label)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{xKey:a,xName:o,yKey:r,yName:l,legendItemName:c,stackGroup:h,tooltip:u}=n,d=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!s||!d||!p)return;const g=s.dataSources.get(this.id)?.[t],f=i.resolveKeysById(this,"xValue",s)[t],x=i.resolveColumnById(this,"yValue-raw",s)[t];if(f==null)return;const y=this.getItemBaseStyle(!1);return Object.assign(y,this.getItemStyleOverrides(String(t),g,f,x,y,!1)),this.formatTooltipWithContext(u,{heading:d.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:r,value:p.formatDatum(x)}]},{seriesId:e,datum:g,title:l,xKey:a,xName:o,yKey:r,yName:l,legendItemName:c,stackGroup:h,...y,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:dr({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:n,strokeWidth:i,lineDash:a,lineDashOffset:o},r,l,c)}}getLegendData(t){const{showInLegend:e}=this.properties;if(t!=="category")return[];const{id:i,ctx:{legendManager:s},visible:n}=this,{yKey:a,yName:o,legendItemName:r}=this.properties;return[{legendType:"category",id:i,itemId:a,seriesId:i,enabled:n&&s.getItemEnabled({seriesId:i,itemId:a}),label:{text:r??o??a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!e}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,annotationSelections:i}){const s=cy(ly(this.isVertical(),this.axes,"normal"));He(this.id,"nodes",this.ctx.animationManager,[t],s),de(this,"labels",this.ctx.animationManager,e),de(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i,annotationSelections:s,contextData:n,previousContextData:a}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=zL(this.id,e,this.getDatumId.bind(this),t.contextData,a,this.processedData),r=a==null?"fade":"normal",l=cy(ly(this.isVertical(),this.axes,r));He(this.id,"nodes",this.ctx.animationManager,[e],l,(c,h)=>this.getDatumId(h),o),(o?.changed||!Fu(n.groupScale,a?.groupScale))&&(de(this,"labels",this.ctx.animationManager,i),de(this,"annotations",this.ctx.animationManager,...s))}getDatumId(t){return pa(t.xValue,t.valueIndex,t.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t].clipBBox;return RL(this,e)}},cg.className="BarSeries",cg.type="bar"}}),AS,hg,jL=k({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesOptionsDef.ts"(){"use strict";R(),zn(),AS={direction:lt("horizontal","vertical"),showInMiniChart:K,cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),crisp:K,label:{...pe,placement:lt("inside-center","inside-start","inside-end","outside-start","outside-end"),padding:U},errorBar:lg,shadow:zo,tooltip:ee,...Zt,...gt,...ct,...vt},AS.sparklineMode=At(K),hg={...AS,...Bn,type:pt(ke("bar")),xKey:pt(J),yKey:pt(J),xName:J,yName:J,direction:lt("horizontal","vertical"),grouped:K,stacked:K,stackGroup:J,normalizedTo:et,legendItemName:J,errorBar:oy},hg.pickOutsideVisibleMinorAxis=At(K),hg.fastDataProcessing=At(K),hg.focusPriority=At(et)}}),GL,VL,WL=k({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesModule.ts"(){"use strict";si(),fi(),RF(),jL(),GL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new cg(t),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:tL,themeTemplate:{series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:yl,fillImageDefaults:Lc,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"backgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:gl,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}}},VL={type:"series",name:"bar",chartType:"cartesian",options:hg,create:t=>new cg(t)}}}),CS,HL,xe,Pq=k({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesProperties.ts"(){"use strict";aa(),mt(),un(),Oo(),jm(),Sl(),Rn(),CS=class extends Hi{constructor(){super(...arguments),this.maxSize=30}},S([I,ot()],CS.prototype,"maxSize",2),S([I,$k()],CS.prototype,"domain",2),HL=class extends Vi{constructor(){super(...arguments),this.placement="top"}},S([I],HL.prototype,"placement",2),xe=class extends br{constructor(){super(...arguments),this.label=new HL,this.tooltip=new Ns,this.marker=new CS}},S([I],xe.prototype,"xKey",2),S([I],xe.prototype,"yKey",2),S([I],xe.prototype,"sizeKey",2),S([I],xe.prototype,"labelKey",2),S([I],xe.prototype,"xFilterKey",2),S([I],xe.prototype,"yFilterKey",2),S([I],xe.prototype,"sizeFilterKey",2),S([I],xe.prototype,"xName",2),S([I],xe.prototype,"yName",2),S([I],xe.prototype,"sizeName",2),S([I],xe.prototype,"labelName",2),S([I],xe.prototype,"title",2),S([me("marker.shape")],xe.prototype,"shape",2),S([me("marker.size")],xe.prototype,"size",2),S([me("marker.maxSize")],xe.prototype,"maxSize",2),S([me("marker.domain")],xe.prototype,"domain",2),S([me("marker.fillGradientDefaults")],xe.prototype,"fillGradientDefaults",2),S([me("marker.fillPatternDefaults")],xe.prototype,"fillPatternDefaults",2),S([me("marker.fillImageDefaults")],xe.prototype,"fillImageDefaults",2),S([me("marker.fill")],xe.prototype,"fill",2),S([me("marker.fillOpacity")],xe.prototype,"fillOpacity",2),S([me("marker.stroke")],xe.prototype,"stroke",2),S([me("marker.strokeWidth")],xe.prototype,"strokeWidth",2),S([me("marker.strokeOpacity")],xe.prototype,"strokeOpacity",2),S([me("marker.lineDash")],xe.prototype,"lineDash",2),S([me("marker.lineDashOffset")],xe.prototype,"lineDashOffset",2),S([me("marker.itemStyler")],xe.prototype,"itemStyler",2),S([I],xe.prototype,"label",2),S([I],xe.prototype,"tooltip",2)}}),BF,uy,Rq=k({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeries.ts"(){"use strict";Nu(),We(),gr(),Rt(),Hs(),Ga(),fr(),Eo(),bl(),Pq(),Rn(),qm(),BF=class extends dS{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},uy=class extends Ml{constructor(t){super({moduleCtx:t,directionKeys:Tc,directionNames:Nc,categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:xl,marker:Ym},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=BF,this.properties=new xe,this.sizeScale=new $a}get pickModeAxis(){return"main-category"}async processData(t){if(this.data==null||!this.visible)return;const e=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:e,yScale:i}),a=this.sizeScale.type,{xKey:o,yKey:r,sizeKey:l,xFilterKey:c,yFilterKey:h,sizeFilterKey:u,labelKey:d,marker:p}=this.properties,{dataModel:g,processedData:f}=await this.requestDataModel(t,this.data,{props:[Yt(o,s,{id:"xValue"}),Yt(r,n,{id:"yValue"}),...c!=null?[Yt(c,s,{id:"xFilterValue"})]:[],...h!=null?[Yt(h,n,{id:"yFilterValue"})]:[],...u!=null?[Yt(u,a,{id:"sizeFilterValue"})]:[],Yt(l,a,{id:"sizeValue"}),...d?[Yt(d,"band",{id:"labelValue"})]:[]]}),x=g.resolveProcessedDataIndexById(this,"sizeValue"),y=p.domain?[p.domain[0],p.domain[1]]:void 0;this.sizeScale.domain=y??f.domain.values[x]??[],this.animationState.transition("updateData")}xCoordinateRange(t,e,i){const{properties:s,sizeScale:n}=this,{size:a,sizeKey:o}=s,r=this.axes.x.scale.convert(t),l=o!=null?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,h=.5*(l!=null?n.convert(l[i]):a)*e;return[r-h,r+h]}yCoordinateRange(t,e,i){const{properties:s,sizeScale:n}=this,{size:a,sizeKey:o}=s,r=this.axes.y.scale.convert(t[0]),l=o!=null?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,h=.5*(l!=null?n.convert(l[i]):a)*e;return[r-h,r+h]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s={x:"xValue",y:"yValue"},n=s[t],a=e.resolveProcessedDataDefById(this,n),o=e.getDomain(this,n,"value",i);if(a?.def.type==="value"&&a?.def.valueType==="category")return o;const l=s[t==="x"?"y":"x"],c=this.domainForClippedRange(t,[n],l,!1);return _n(hl(c))}getSeriesRange(t,e){return this.domainForVisibleRange("y",["yValue"],"xValue",e,!1)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["yValue"],t,e,i)}createNodeData(){const{axes:t,dataModel:e,processedData:i,sizeScale:s,visible:n}=this,{xKey:a,yKey:o,sizeKey:r,xFilterKey:l,yFilterKey:c,sizeFilterKey:h,labelKey:u,xName:d,yName:p,sizeName:g,labelName:f,label:x,marker:y}=this.properties,{placement:b}=x,v=Wi.anchor(y.shape),M=t.x,D=t.y;if(!(e&&i&&n&&M&&D))return;const L=e.resolveColumnById(this,"xValue",i),A=e.resolveColumnById(this,"yValue",i),C=r!=null?e.resolveColumnById(this,"sizeValue",i):void 0,T=u!=null?e.resolveColumnById(this,"labelValue",i):void 0,N=l!=null?e.resolveColumnById(this,"xFilterValue",i):void 0,P=c!=null?e.resolveColumnById(this,"yFilterValue",i):void 0,O=h!=null?e.resolveColumnById(this,"sizeFilterValue",i):void 0,B=M.scale,G=D.scale,V=(B.bandwidth??0)/2,W=(G.bandwidth??0)/2,H=[];s.range=[y.size,y.maxSize];const $=x.getFont(),F=wo.getMeasurer({font:$});return i.dataSources.get(this.id)?.forEach((j,z)=>{const Y=L[z],Z=A[z],X=C?.[z],tt=B.convert(Y)+V,q=G.convert(Z)+W;let it;N!=null&&P!=null&&(it=N[z]===Y&&P[z]===Z,O!=null&&it&&(it=O[z]===X));const Q=this.getLabelText(x,{value:T!=null?T[z]:Z,datum:j,xKey:a,yKey:o,sizeKey:r,labelKey:u,xName:d,yName:p,sizeName:g,labelName:f}),rt=F.measureText(String(Q)),at=X!=null?s.convert(X):y.size;H.push({series:this,itemId:o,yKey:o,xKey:a,datum:j,datumIndex:z,xValue:Y,yValue:Z,sizeValue:X,point:{x:tt,y:q,size:at},midPoint:{x:tt,y:q},label:{text:Q,...rt},anchor:v,placement:b,selected:it})}),{itemId:o,nodeData:H,labelData:H,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,n=>pa([n.xValue,n.yValue,n.sizeValue,n.label.text]))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,sizeKey:a,labelKey:o,marker:r}=this.properties,l=Kt(i&&this.properties.highlightStyle.item,r.getStyle());this.sizeScale.range=[r.size,r.maxSize];const c=this.getShapeFillBBox();e.each((h,u)=>{this.updateMarkerStyle(r,h,u.datum,u.point,{xKey:s,yKey:n,sizeKey:a,labelKey:o},i,l,c,{selected:u.selected})}),i||this.properties.marker.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map(e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{i.text=s.label.text,i.fill=e.color,i.x=s.point?.x??0,i.y=s.point?.y??0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{xKey:o,xName:r,yKey:l,yName:c,sizeKey:h,sizeName:u,labelKey:d,labelName:p,title:g,tooltip:f,marker:x}=a,y=n.x,b=n.y;if(!i||!s||!y||!b)return;const v=s.dataSources.get(this.id)?.[t],M=i.resolveColumnById(this,"xValue",s)[t],D=i.resolveColumnById(this,"yValue",s)[t],L=this.contextNodeData?.nodeData[t];if(M==null||L==null)return;const A=[{label:r,fallbackLabel:o,value:y.formatDatum(M)},{label:c,fallbackLabel:l,value:b.formatDatum(D)}];if(h!=null){const N=i.resolveColumnById(this,"sizeValue",s)[t];A.push({label:u,fallbackLabel:h,value:String(N)})}const C=x.getStyle(),T=this.getMarkerStyle(x,v,{xKey:o,yKey:l,sizeKey:h,labelKey:d,highlighted:!0},!1,void 0,C);return this.formatTooltipWithContext(f,{title:g,symbol:this.legendItemSymbol(),data:A},{seriesId:e,datum:v,title:l,xKey:o,xName:r,yKey:l,yName:c,sizeKey:h,sizeName:u,labelKey:d,labelName:p,...T,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker)}}getLegendData(){const{id:t,ctx:{legendManager:e},visible:i}=this,{yKey:s,yName:n,title:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i&&e.getItemEnabled({seriesId:t,itemId:s}),label:{text:a??n??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:e}){mL(this,this.ctx.animationManager,t),de(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Ot}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,sizeKey:s,labelKey:n,marker:a}=this.properties;return this.getMarkerStyle(a,t,{xKey:e,yKey:i,sizeKey:s,labelKey:n},!1,t.point.size)}computeFocusBounds(t){return Xm(this,t)}},uy.className="BubbleSeries",uy.type="bubble"}}),UL,zF,FF=k({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesOptionsDef.ts"(){"use strict";R(),Rt(),zn(),UL={title:J,domain:kt(et),maxSize:U,showInMiniChart:K,label:{placement:lt("top","right","bottom","left"),...pe},tooltip:ee,...Zt,...ft(Dr,["enabled"])},zF={...UL,...Bn,type:pt(ke("bubble")),xKey:pt(J),yKey:pt(J),sizeKey:pt(J),labelKey:J,xName:J,yName:J,sizeName:J,labelName:J}}}),jF,$L,KL=k({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesModule.ts"(){"use strict";fi(),Rq(),FF(),jF={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:t=>new uy(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:yl,fillImageDefaults:Lc,fillOpacity:.8,tooltip:{position:{_seriesOverrideType:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}}},$L={type:"series",name:"bubble",chartType:"cartesian",options:zF,create:t=>new uy(t)}}}),Ze,Bq=k({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesProperties.ts"(){"use strict";ng(),mt(),Oo(),vl(),Sl(),Rn(),Ze=class extends br{constructor(){super(...arguments),this.fillGradientDefaults=new ya,this.fillPatternDefaults=new Ee,this.fillImageDefaults=new gn,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Ya,this.label=new Vi,this.tooltip=new Ns}},S([I],Ze.prototype,"xKey",2),S([I],Ze.prototype,"yKey",2),S([I],Ze.prototype,"xName",2),S([I],Ze.prototype,"yName",2),S([I],Ze.prototype,"fill",2),S([I],Ze.prototype,"fillGradientDefaults",2),S([I],Ze.prototype,"fillPatternDefaults",2),S([I],Ze.prototype,"fillImageDefaults",2),S([I],Ze.prototype,"fillOpacity",2),S([I],Ze.prototype,"stroke",2),S([I],Ze.prototype,"strokeWidth",2),S([I],Ze.prototype,"strokeOpacity",2),S([I],Ze.prototype,"lineDash",2),S([I],Ze.prototype,"lineDashOffset",2),S([I],Ze.prototype,"cornerRadius",2),S([I],Ze.prototype,"areaPlot",2),S([I],Ze.prototype,"bins",2),S([I],Ze.prototype,"aggregation",2),S([I],Ze.prototype,"binCount",2),S([I],Ze.prototype,"shadow",2),S([I],Ze.prototype,"label",2),S([I],Ze.prototype,"tooltip",2)}}),YL,dy,zq=k({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeries.ts"(){"use strict";R(),Ls(),Lm(),la(),bc(),BC(),Ga(),fr(),bl(),ll(),BL(),Rn(),FL(),Bq(),_L(),YL=10,dy=class extends Ml{constructor(t){super({moduleCtx:t,directionKeys:Tc,directionNames:Nc,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:hy,label:xl}}),this.properties=new Ze,this.calculatedBins=[]}deriveBins(t){const e=om(t[0],t[1],YL).ticks,i=rm(t[0],t[1],YL),[s]=e,n=a=>[a,a+i];return[[s-i,s],...e.map(n)]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],n=e||1,{start:a,binSize:o}=this.calculateNiceStart(i,s,n);return this.getBins(a,s,o,n)}getBins(t,e,i,s){const n=[],a=this.calculatePrecision(i);for(let o=0;o<s;o++){const r=Math.round((t+o*i)*a)/a;let l=Math.round((t+(o+1)*i)*a)/a;o===s-1&&(l=Math.max(l,e)),n[o]=[r,l]}return n}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return{start:Math.floor(t/a)*a,binSize:s}}async processData(t){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:e,yKey:i,areaPlot:s,aggregation:n}=this.properties,a=this.axes.x?.scale,o=this.axes.y?.scale,{xScaleType:r,yScaleType:l}=this.getScaleInformation({yScale:o,xScale:a}),c=[Po(e,r),VC];if(i){let u=PC("groupAgg");n==="count"||(n==="sum"?u=sz("groupAgg"):n==="mean"&&(u=nz("groupAgg"))),s&&(u=RC("groupAgg",u)),c.push(Yt(i,l,{invalidValue:void 0}),u)}else{c.push(hz("count"));let u=PC("groupAgg");s&&(u=RC("groupAgg",u)),c.push(u)}const h=u=>{const d=_n(u.domain.keys[0]);if(d.length===0)return u.domain.groups=[],()=>[];const p=xf(this.properties.binCount)?this.calculateNiceBins(d,this.properties.binCount):this.properties.bins??this.deriveBins(d),g=p.length;return this.calculatedBins=[...p],f=>{let x=f[0];if(zh(x)&&(x=x.getTime()),!xf(x))return[];for(let y=0;y<g;y++){const b=p[y];if(x>=b[0]&&x<b[1]||y===g-1&&x<=b[1])return b}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&c.push(jp(this.id,this.processedData,!1)),await this.requestDataModel(t,this.data,{props:c,groupByFn:h}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i||!this.calculatedBins.length)return[];const s=i.getDomain(this,"groupAgg","aggregate",e),n=this.calculatedBins?.[0][0],a=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return _n(t==="x"?[n,a]:s)}getSeriesRange(t,[e,i]){const{dataModel:s,processedData:n}=this;if(!s||n?.type!=="grouped")return[NaN,NaN];const a=this.axes.x.scale,o=0;let r=-1/0;return n.groups.forEach(({keys:l,aggregation:c})=>{const[[h,u]=[0,0]]=c,[d,p]=l,[g,f]=ns([a.convert(d),a.convert(p)]);if(f>=e&&g<=i){const x=h+u;r=Math.max(r,x)}}),o>r?[NaN,NaN]:[o,r]}frequency(t){return t.datumIndices.reduce((e,i)=>e+i.length,0)}createNodeData(){const{id:t,axes:e,processedData:i,dataModel:s}=this,n=e.x,a=e.y;if(!n||!a||!s)return;const{scale:o}=n,{scale:r}=a,{xKey:l,yKey:c,xName:h,yName:u}=this.properties,d=this.properties.label.formatter,p=[],g={itemId:this.properties.yKey??this.id,nodeData:p,labelData:p,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||i==null||i.type!=="grouped"||(i.groups.forEach((f,x)=>{const{keys:y,aggregation:b}=f,[[v,M]=[0,0]]=b,D=this.frequency(f),L=y,[A,C]=L,T=[...s.forEachDatum(this,i,f)],N=o.convert(A),P=o.convert(C),O=v+M,B=r.convert(0),G=r.convert(O),V=Math.abs(P-N),W=Math.abs(G-B),H=Math.min(N,P),$=Math.min(B,G);let F;O!==0&&(F={x:H+V/2,y:$+W/2,text:this.cachedDatumCallback(pa(x,"label"),()=>d?.({value:O,datum:T,seriesId:t,xKey:l,yKey:c,xName:h,yName:u}))??a.formatDatum(O)});const j={x:H+V/2,y:$+W/2},z=a.isReversed();p.push({series:this,datumIndex:x,datum:T,aggregatedValue:O,frequency:D,domain:L,yKey:c,xKey:l,x:H,y:$,xValue:N,yValue:G,width:V,height:W,midPoint:j,topLeftCornerRadius:!z,topRightCornerRadius:!z,bottomRightCornerRadius:z,bottomLeftCornerRadius:z,label:F,crisp:!0})}),p.sort((f,x)=>f.x-x.x)),g}nodeFactory(){return new Ts}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t;return i.update(e,void 0,s=>s.domain.join("_"))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return dr({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}updateDatumNodes(t){const{isHighlight:e}=t,{shadow:i}=this.properties,s=this.getItemBaseStyle(e),n=this.getShapeFillBBox();t.datumSelection.each((a,o)=>{const{cornerRadius:r}=s,{topLeftCornerRadius:l,topRightCornerRadius:c,bottomRightCornerRadius:h,bottomLeftCornerRadius:u}=o;Cu(a,s,void 0,n),a.topLeftCornerRadius=l?r:0,a.topRightCornerRadius=c?r:0,a.bottomRightCornerRadius=h?r:0,a.bottomLeftCornerRadius=u?r:0,a.crisp=o.crisp,a.fillShadow=i,a.visible=o.height>0})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})}updateLabelNodes(t){const{fontStyle:e,fontWeight:i,fontFamily:s,fontSize:n,color:a}=this.properties.label,o=this.isLabelEnabled();t.labelSelection.each((r,l)=>{o&&l?.label?(r.text=l.label.text,r.x=l.label.x,r.y=l.label.y,r.fontStyle=e,r.fontWeight=i,r.fontFamily=s,r.fontSize=n,r.fill=a,r.visible=!0):r.visible=!1})}initQuadTree(t){const{value:e}=this.contentGroup.children().next();e&&NL(t,e.children())}pickNodeClosestDatum(t){return OL(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a,ctx:{localeManager:o}}=this,{xKey:r,xName:l,yKey:c,yName:h,tooltip:u}=a,d=n.x,p=n.y;if(!i||s?.type!=="grouped"||!d||!p)return;const g=s.groups[t],{aggregation:f,keys:x}=g,[[y,b]=[0,0]]=f,v=this.frequency(g),M=x,[D,L]=M,A=y+b,C={data:[...i.forEachDatum(this,s,g)],aggregatedValue:A,frequency:v,domain:M},T=[{label:l,fallbackLabel:r,value:`${d.formatDatum(D)} - ${d.formatDatum(L)}`},{label:o.t("seriesHistogramTooltipFrequency"),value:p.formatDatum(v)}];if(c!=null){let N;switch(a.aggregation){case"sum":N=o.t("seriesHistogramTooltipSum",{yName:h??c});break;case"mean":N=o.t("seriesHistogramTooltipMean",{yName:h??c});break;case"count":N=o.t("seriesHistogramTooltipCount",{yName:h??c});break}T.push({label:N,value:p.formatDatum(A)})}return this.formatTooltipWithContext(u,{symbol:this.legendItemSymbol(),data:T},{seriesId:e,datum:C,title:h,xKey:r,xName:l,yKey:c,yName:h,xRange:[D,L],frequency:v,...this.getItemBaseStyle(!1)})}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:dr({fill:t??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:e,strokeOpacity:n,strokeWidth:s,lineDash:a,lineDashOffset:o},r,l,c)}}getLegendData(t){if(t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{xKey:n,yName:a,showInLegend:o}=this.properties;return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:a??n??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!o}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=cy(ly(!0,this.axes,"normal"));He(this.id,"datums",this.ctx.animationManager,[t],i),de(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const e=cy(ly(!0,this.axes,"normal")),i=zL(this.id,t.datumSelection,s=>pa(s.domain),t.contextData,t.previousContextData,this.processedData);He(this.id,"datums",this.ctx.animationManager,[t.datumSelection],e,(s,n)=>pa(n.domain),i),i?.changed&&de(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return RL(this,this.contextNodeData?.nodeData[t])}},dy.className="HistogramSeries",dy.type="histogram"}}),ZL,GF,VF=k({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesOptionsDef.ts"(){"use strict";R(),zn(),ZL={showInMiniChart:K,cornerRadius:U,label:pe,tooltip:ee,shadow:zo,...Zt,...gt,...ct,...vt},GF={...ZL,...Bn,type:pt(ke("histogram")),xKey:pt(J),yKey:J,xName:J,yName:J,areaPlot:K,aggregation:lt("count","sum","mean"),bins:kt(kt(et)),binCount:U}}}),WF,XL,qL=k({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesModule.ts"(){"use strict";si(),fi(),zq(),VF(),WF={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:t=>new dy(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:yl,fillImageDefaults:Lc,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},shadow:{enabled:!1,color:gl,xOffset:3,yOffset:3,blur:5}}}},XL={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:GF,create:t=>new dy(t)}}}),Ci,Fq=k({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesProperties.ts"(){"use strict";mt(),Oo(),jm(),Sl(),Rn(),oL(),Ci=class extends br{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new zu,this.marker=new Hi,this.label=new Vi,this.tooltip=new Ns,this.connectMissingData=!1,this.sparklineMode=!1}},S([I],Ci.prototype,"xKey",2),S([I],Ci.prototype,"yKey",2),S([I],Ci.prototype,"xName",2),S([I],Ci.prototype,"yName",2),S([I],Ci.prototype,"yFilterKey",2),S([I],Ci.prototype,"stackGroup",2),S([I],Ci.prototype,"normalizedTo",2),S([I],Ci.prototype,"title",2),S([I],Ci.prototype,"stroke",2),S([I],Ci.prototype,"strokeWidth",2),S([I],Ci.prototype,"strokeOpacity",2),S([I],Ci.prototype,"lineDash",2),S([I],Ci.prototype,"lineDashOffset",2),S([I],Ci.prototype,"interpolation",2),S([I],Ci.prototype,"marker",2),S([I],Ci.prototype,"label",2),S([I],Ci.prototype,"tooltip",2),S([I],Ci.prototype,"connectMissingData",2),S([I],Ci.prototype,"sparklineMode",2)}}),HF,ug,UF=k({"packages/ag-charts-community/src/chart/series/cartesian/lineSeries.ts"(){"use strict";R(),Ls(),eL(),Mu(),We(),gr(),Rt(),Ga(),fr(),bl(),ll(),du(),Rn(),Fq(),fS(),qm(),vL(),HF=.25,ug=class extends Ml{constructor(t){super({moduleCtx:t,directionKeys:Tc,directionNames:Nc,categoryKey:"xValue",hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:bL({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:xl,marker:(e,i)=>({...Ym(e),...Zm(e,i)})},clipFocusBox:!1}),this.properties=new Ci,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(t){if(this.data==null)return;const{data:e,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=0}={}}=this,{xKey:a,yKey:o,yFilterKey:r,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),u=this.axes.x?.scale,d=this.axes.y?.scale,{isContinuousX:p,xScaleType:g,yScaleType:f}=this.getScaleInformation({xScale:u,yScale:d}),x=n>=1||c!=null,y={invalidValue:null};l&&x&&(y.invalidValue=0),x&&!i&&(y.forceValue=0);const b=[];if((!p||x)&&b.push(Po(a,g,{id:"xKey"})),b.push(Yt(a,g,{id:"xValue"}),Yt(o,f,{id:"yValueRaw",...y,invalidValue:void 0})),r!=null&&b.push(Yt(r,f,{id:"yFilterRaw"})),x){const D=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];b.push(...Ic(o,"window","current",{id:"yValueEnd",...y,groupId:D[0]},f),...Ic(o,"window-trailing","current",{id:"yValueStart",...y,groupId:D[1]},f),...Ic(o,"normal","current",{id:"yValueCumulative",...y,groupId:D[2]},f)),Bh(c)&&b.push(Kv([D[0],D[1],D[2]],c))}h&&(b.push(Fp(p?["xValue"]:void 0)),this.processedData&&b.push(jp(this.id,this.processedData)));const{dataModel:v,processedData:M}=await this.requestDataModel(t,e,{props:b,groupByKeys:x,groupByData:!x});this.dataAggregationFilters=this.aggregateData(v,M),this.animationState.transition("updateData")}xCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.x.scale.convert(t),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}yCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.y.scale.convert(t[0]),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!e||!i)return[];if(t==="x"){const a=e.resolveProcessedDataDefById(this,"xValue"),o=e.getDomain(this,"xValue","value",i);return a?.def.type==="value"&&a.def.valueType==="category"?o:_n(hl(o))}const s=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw",n=this.domainForClippedRange("y",[s],"xValue",!0);return _n(n)}getSeriesRange(t,e){const i=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.domainForVisibleRange("y",[i],"xValue",e,!0)}getVisibleItems(t,e,i){const s=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.countVisibleItems("xValue",[s],t,e,i)}aggregateData(t,e){}createNodeData(){const{dataModel:t,processedData:e,axes:i,dataAggregationFilters:s}=this,n=i.x,a=i.y;if(!t||!e||!n||!a)return;const{xKey:o,yKey:r,yFilterKey:l,xName:c,yName:h,marker:u,label:d,connectMissingData:p,interpolation:g,legendItemName:f}=this.properties,x=this.dataModel?.hasColumnById(this,"yValueEnd"),y=n.scale,b=a.scale,v=(y.bandwidth??0)/2,M=(b.bandwidth??0)/2,D=u.enabled?u.size:0,L=e.dataSources.get(this.id)??[],A=t.resolveColumnById(this,"xValue",e),C=t.resolveColumnById(this,"yValueRaw",e),T=x?t.resolveColumnById(this,"yValueEnd",e):void 0,N=x?t.resolveColumnById(this,"yValueCumulative",e):C,P=l!=null?t.resolveColumnById(this,"yFilterRaw",e):void 0,O=Q=>y.convert(A[Q])+v,B=Q=>b.convert(N[Q])+M,G={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},V=[];let W;const H=Q=>{const rt=L[Q],at=A[Q],ht=C[Q],dt=T?.[Q],Mt=P?.[Q],Ct=O(Q),bt=B(Q);if(!Number.isFinite(Ct))return;if(ht!=null){const Jt=d.enabled?this.getLabelText(d,{value:ht,datum:rt,xKey:o,yKey:r,xName:c,yName:h,legendItemName:f}):void 0;V.push({series:this,datum:rt,datumIndex:Q,yKey:r,xKey:o,point:{x:Ct,y:bt,size:D},midPoint:{x:Ct,y:bt},cumulativeValue:dt,yValue:ht,xValue:at,capDefaults:G,labelText:Jt,selected:Mt})}if(W==null)return;const qt=W[W.length-1];if(ht!=null){const Jt={point:{x:Ct,y:bt},xDatum:at,yDatum:ht};Array.isArray(qt)?qt.push(Jt):qt!=null?(qt.skip+=1,W.push([Jt])):W.push([Jt])}else p||(Array.isArray(qt)||qt==null?W.push({skip:0}):qt.skip+=1)},[$,F]=y.range,j=F-$,Y=s?.find(Q=>Q.maxRange>j)?.indices;let[Z,X]=this.visibleRange("xValue",n.range,Y);Z=Math.max(Z-1,0),X=Math.min(X+1,Y?.length??A.length),e.input.count<1e3&&(Z=0,X=e.input.count),Y==null&&(W=[]);for(let Q=Z;Q<X;Q+=1)H(Y?.[Q]??Q);const tt=W?.flatMap(Q=>Array.isArray(Q)?pS(Q,g):[]),q=tt!=null?{itemId:r,spans:tt}:void 0,it=P?.some((Q,rt)=>Q===C[rt])??!1;return{itemId:r,nodeData:V,labelData:V,strokeData:q,scales:this.calculateScaling(),visible:this.visible,crossFiltering:it}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){const{paths:[e],opacity:i,visible:s,animationEnabled:n}=t,a=this.contextNodeData?.crossFiltering===!0;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(a?HF:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(e.visible=s),xS(this,e)}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return dr({size:i.size,shape:i.shape,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}getMarkerItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,yKey:r,marker:l}=a,{itemStyler:c}=l;if(c!=null)return this.cachedDatumCallback(pa(t,s?"highlight":"node"),()=>{const h=this.getSeriesDomain("x"),u=this.getSeriesDomain("y");return this.callWithContext(c,{seriesId:n,...fc(e,o,r,h,u),datum:e,highlighted:s,...i})})}updateMarkerSelection(t){let{nodeData:e}=t;const{markerSelection:i}=t;return e=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,n=>pa(n.xValue))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,stroke:a,strokeWidth:o,strokeOpacity:r,marker:l,highlightStyle:c}=this.properties,h=this.getSeriesDomain("x"),u=this.getSeriesDomain("y"),d=Kt(i&&c.item,l.getStyle(),{stroke:a,strokeWidth:o,strokeOpacity:r}),p=this.ctx.animationManager.isSkipped(),g=this.getShapeFillBBox();e.each((f,x)=>{this.updateMarkerStyle(l,f,x.datum,x.point,fc(x,s,n,h,u),i,d,g,{applyTranslation:p,selected:x.selected})}),i||l.markClean()}updateLabelSelection(t){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}updateLabelNodes(t){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,color:o}=this.properties.label;t.labelSelection.each((r,l)=>{e&&l?.labelText?(r.fontStyle=i,r.fontWeight=s,r.fontSize=n,r.fontFamily=a,r.textAlign="center",r.textBaseline="bottom",r.text=l.labelText,r.x=l.point.x,r.y=l.point.y-10,r.fill=o,r.visible=!0):r.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{xKey:o,xName:r,yKey:l,yName:c,tooltip:h}=a,u=n.x,d=n.y;if(!i||!s||!u||!d)return;const p=s.dataSources.get(this.id)?.[t],g=i.resolveColumnById(this,"xValue",s)[t],f=i.resolveColumnById(this,"yValueRaw",s)[t];if(g==null)return;const x=this.getMarkerItemBaseStyle(!1);return Object.assign(x,this.getMarkerItemStyleOverrides(String(t),p,x,!1)),this.formatTooltipWithContext(h,{heading:u.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(f)}]},{seriesId:e,datum:p,title:c,xKey:o,xName:r,yKey:l,yName:c,...x,...this.getModuleTooltipParams()})}legendItemSymbol(){const t="rgba(0, 0, 0, 0)",{stroke:e,strokeOpacity:i,strokeWidth:s,lineDash:n,marker:a}=this.properties;return{marker:{...this.getMarkerStyle(a,void 0,void 0,!1,void 0,{fill:a.fill??t,stroke:a.stroke??e??t}),enabled:a.enabled},line:{stroke:e??t,strokeOpacity:i,strokeWidth:s,lineDash:n}}}getLegendData(t){if(t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:a,title:o,legendItemName:r,showInLegend:l}=this.properties;return[{legendType:"category",id:e,itemId:n,legendItemName:r,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:r??o??a??n},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(t){this.updateLinePaths(t.paths,t.contextData)}plotNodeDataPoints(t,e){if(e.length===0)return;const i=e[0].point;t.moveTo(i.x,i.y);for(let s=1;s<e.length;s+=1){const{x:n,y:a}=e[s].point;t.lineTo(n,a)}}updateLinePaths(t,e){const i=e.strokeData?.spans,[s]=t;s.path.clear(),i!=null?pL(s,i):this.plotNodeDataPoints(s.path,e.nodeData),s.markDirty("LineSeries")}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s,contextData:n,paths:a}=t,{animationManager:o}=this.ctx;this.updateLinePaths(a,n),xL(this,o,...a),as([e],Zm),yL(this,o,e),de(this,"labels",o,i),de(this,"annotations",o,...s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,annotationSelections:n,contextData:a,paths:o,previousContextData:r}=t,[l]=o;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateLinePaths(o,a)},h=()=>{e.skipCurrentBatch(),c()};if(a==null||r==null){c(),Km(this,e,"added",i),yS(this,"path_properties",e,"add",l),de(this,"labels",e,s),de(this,"annotations",e,...n);return}if(a.crossFiltering!==r.crossFiltering){h();return}const u=fF(a,r,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){h();return}else if(u.status==="no-op")return;He(this.id,"path_properties",e,[l],u.stroke.pathProperties),u.status==="added"?this.updateLinePaths(o,a):u.status==="removed"?this.updateLinePaths(o,r):lS(this.id,"path_update",e,[l],u.stroke.path),u.hasMotion&&(Km(this,e,void 0,i),de(this,"labels",e,s),de(this,"annotations",e,...n))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Ot}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=this.properties,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,t.datum,fc(t,e,i,s,n),!0)}computeFocusBounds(t){return Xm(this,t)}},ug.className="LineSeries",ug.type="line"}}),LS,py,QL=k({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesOptionsDef.ts"(){"use strict";R(),zn(),LS={title:J,showInMiniChart:K,connectMissingData:K,interpolation:ry,label:pe,marker:Dr,tooltip:ee,errorBar:lg,...Zt,...ct,...vt},LS.sparklineMode=At(K),py={...LS,...Bn,type:ke("line"),xKey:pt(J),yKey:pt(J),xName:J,yName:J,stacked:K,stackGroup:J,normalizedTo:et,legendItemName:J,errorBar:oy},py.pickOutsideVisibleMinorAxis=At(K),py.focusPriority=At(et)}}),JL,t2,e2=k({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesModule.ts"(){"use strict";fi(),UF(),QL(),JL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new ug(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{_seriesOverrideType:"node"}},stroke:zm,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:yl,fillImageDefaults:Lc},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}}},t2={type:"series",name:"line",chartType:"cartesian",options:py,create:t=>new ug(t)}}}),i2,Pe,jq=k({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesProperties.ts"(){"use strict";mt(),un(),Oo(),jm(),Sl(),Rn(),i2=class extends Vi{constructor(){super(...arguments),this.placement="top"}},S([I],i2.prototype,"placement",2),Pe=class extends br{constructor(){super(...arguments),this.label=new i2,this.tooltip=new Ns,this.marker=new Hi}},S([I],Pe.prototype,"xKey",2),S([I],Pe.prototype,"yKey",2),S([I],Pe.prototype,"labelKey",2),S([I],Pe.prototype,"xFilterKey",2),S([I],Pe.prototype,"yFilterKey",2),S([I],Pe.prototype,"xName",2),S([I],Pe.prototype,"yName",2),S([I],Pe.prototype,"labelName",2),S([I],Pe.prototype,"title",2),S([me("marker.shape")],Pe.prototype,"shape",2),S([me("marker.size")],Pe.prototype,"size",2),S([me("marker.fill")],Pe.prototype,"fill",2),S([me("marker.fillGradientDefaults")],Pe.prototype,"fillGradientDefaults",2),S([me("marker.fillPatternDefaults")],Pe.prototype,"fillPatternDefaults",2),S([me("marker.fillImageDefaults")],Pe.prototype,"fillImageDefaults",2),S([me("marker.fillOpacity")],Pe.prototype,"fillOpacity",2),S([me("marker.stroke")],Pe.prototype,"stroke",2),S([me("marker.strokeWidth")],Pe.prototype,"strokeWidth",2),S([me("marker.strokeOpacity")],Pe.prototype,"strokeOpacity",2),S([me("marker.lineDash")],Pe.prototype,"lineDash",2),S([me("marker.lineDashOffset")],Pe.prototype,"lineDashOffset",2),S([me("marker.itemStyler")],Pe.prototype,"itemStyler",2),S([I],Pe.prototype,"label",2),S([I],Pe.prototype,"tooltip",2)}}),gy,Gq=k({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeries.ts"(){"use strict";We(),gr(),Rt(),Hs(),Ga(),fr(),Eo(),bl(),Rn(),qm(),jq(),gy=class extends Ml{constructor(t){super({moduleCtx:t,directionKeys:Tc,directionNames:Nc,categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Ym,label:xl},usesPlacedLabels:!0,clipFocusBox:!1}),this.properties=new Pe}get pickModeAxis(){return"main-category"}async processData(t){if(this.data==null||!this.visible)return;const e=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:e,yScale:i}),{xKey:a,yKey:o,xFilterKey:r,yFilterKey:l,labelKey:c}=this.properties;await this.requestDataModel(t,this.data,{props:[Yt(a,s,{id:"xValue"}),Yt(o,n,{id:"yValue"}),...r!=null?[Yt(r,s,{id:"xFilterValue"})]:[],...l!=null?[Yt(l,n,{id:"yFilterValue"})]:[],...c?[Yt(c,"band",{id:"labelValue"})]:[]]}),this.animationState.transition("updateData")}xCoordinateRange(t,e){const i=this.axes.x.scale.convert(t),s=.5*this.properties.size*e;return[i-s,i+s]}yCoordinateRange(t,e){const i=this.axes.y.scale.convert(t[0]),s=.5*this.properties.size*e;return[i-s,i+s]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s={x:"xValue",y:"yValue"},n=s[t],a=e.resolveProcessedDataDefById(this,n),o=e.getDomain(this,n,"value",i);if(a?.def.type==="value"&&a?.def.valueType==="category")return o;const l=s[t==="x"?"y":"x"],c=this.domainForClippedRange(t,[n],l,!1);return _n(hl(c))}getSeriesRange(t,e){return this.domainForVisibleRange("y",["yValue"],"xValue",e,!1)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["yValue"],t,e,i)}createNodeData(){const{axes:t,dataModel:e,processedData:i,visible:s}=this,{xKey:n,yKey:a,xFilterKey:o,yFilterKey:r,labelKey:l,xName:c,yName:h,labelName:u,marker:d,label:p}=this.properties,{placement:g}=p,f=Wi.anchor(d.shape),x=t.x,y=t.y;if(!(e&&i&&s&&x&&y))return;const b=e.resolveColumnById(this,"xValue",i),v=e.resolveColumnById(this,"yValue",i),M=l!=null?e.resolveColumnById(this,"labelValue",i):void 0,D=o!=null?e.resolveColumnById(this,"xFilterValue",i):void 0,L=r!=null?e.resolveColumnById(this,"yFilterValue",i):void 0,A=x.scale,C=y.scale,T=(A.bandwidth??0)/2,N=(C.bandwidth??0)/2,P=[],O=p.getFont(),B=wo.getMeasurer({font:O});return(i.dataSources.get(this.id)??[]).forEach((V,W)=>{const H=b[W],$=v[W],F=A.convert(H)+T,j=C.convert($)+N,z=D!=null&&L!=null?D[W]===H&&L[W]===$:void 0,Y=this.getLabelText(p,{value:M!=null?M?.[W]:$,datum:V,xKey:n,yKey:a,labelKey:l,xName:c,yName:h,labelName:u}),Z=B.measureText(Y);P.push({series:this,itemId:a,yKey:a,xKey:n,datum:V,datumIndex:W,xValue:H,yValue:$,capDefaults:{lengthRatioMultiplier:d.getDiameter(),lengthMax:1/0},point:{x:F,y:j,size:d.size},midPoint:{x:F,y:j},label:{text:Y,...Z},anchor:f,placement:g,selected:z})}),{itemId:a,nodeData:P,labelData:P,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,labelKey:a,marker:o,highlightStyle:r}=this.properties,l=Kt(i&&r.item,o.getStyle()),c=this.getShapeFillBBox();e.each((h,u)=>{this.updateMarkerStyle(o,h,u.datum,u.point,{xKey:s,yKey:n,labelKey:a},i,l,c,{selected:u.selected})}),i||o.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map(e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{i.text=s.label.text,i.fill=e.color,i.x=s.point?.x??0,i.y=s.point?.y??0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{xKey:o,xName:r,yKey:l,yName:c,labelKey:h,labelName:u,title:d,tooltip:p,marker:g}=a,f=n.x,x=n.y;if(!i||!s||!f||!x)return;const y=s.dataSources.get(this.id)?.[t],b=i.resolveColumnById(this,"xValue",s)[t],v=i.resolveColumnById(this,"yValue",s)[t],M=this.contextNodeData?.nodeData[t];if(b==null||M==null)return;const D=this.getMarkerStyle(g,M.datum,{xKey:o,yKey:l,labelKey:h,highlighted:!0});return this.formatTooltipWithContext(p,{symbol:this.legendItemSymbol(),title:d,data:[{label:r,fallbackLabel:o,value:f.formatDatum(b)},{label:c,fallbackLabel:l,value:x.formatDatum(v)}]},{seriesId:e,datum:y,title:c,xKey:o,xName:r,yKey:l,yName:c,labelKey:h,labelName:u,...D,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker)}}getLegendData(t){if(t!=="category")return[];const{yKey:e,yName:i,title:s,showInLegend:n}=this.properties,{id:a,ctx:{legendManager:o},visible:r}=this;return[{legendType:"category",id:a,itemId:e,seriesId:a,enabled:r&&o.getItemEnabled({seriesId:a,itemId:e}),label:{text:s??i??e},symbol:this.legendItemSymbol(),hideInLegend:!n}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s}=t;mL(this,this.ctx.animationManager,e),de(this,"labels",this.ctx.animationManager,i),de(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Ot}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{xKey:e,yKey:i,labelKey:s},!0)}computeFocusBounds(t){return Xm(this,t)}},gy.className="ScatterSeries",gy.type="scatter"}}),s2,$F,KF=k({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesOptionsDef.ts"(){"use strict";R(),Rt(),zn(),s2={title:J,showInMiniChart:K,label:{placement:lt("top","right","bottom","left"),...pe},tooltip:ee,errorBar:lg,...Zt,...ft(Dr,["enabled"])},$F={...s2,...Bn,type:pt(ke("scatter")),xKey:pt(J),yKey:pt(J),labelKey:J,xName:J,yName:J,labelName:J,errorBar:oy}}}),YF,n2,a2=k({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesModule.ts"(){"use strict";fi(),Gq(),KF(),YF={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:t=>new gy(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:yl,fillImageDefaults:Lc,fillOpacity:.8,tooltip:{position:{_seriesOverrideType:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}}},n2={type:"series",name:"scatter",chartType:"cartesian",options:$F,create:t=>new gy(t)}}}),o2,ZF=k({"packages/ag-charts-community/src/scene/sectorBox.ts"(){"use strict";Fk(),o2=class gO{constructor(e,i,s,n){this.startAngle=e,this.endAngle=i,this.innerRadius=s,this.outerRadius=n}clone(){const{startAngle:e,endAngle:i,innerRadius:s,outerRadius:n}=this;return new gO(e,i,s,n)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[_f](e,i){return new gO(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}}}});function XF({startAngle:t,endAngle:e,innerRadius:i,outerRadius:s}){let n=1/0,a=1/0,o=-1/0,r=-1/0;const l=(c,h)=>{n=Math.min(c,n),a=Math.min(h,a),o=Math.max(c,o),r=Math.max(h,r)};return l(i*Math.cos(t),i*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),l(s*Math.cos(t),s*Math.sin(t)),l(s*Math.cos(e),s*Math.sin(e)),lc(0,t,e)&&l(s,0),lc(Math.PI*.5,t,e)&&l(0,s),lc(Math.PI,t,e)&&l(-s,0),lc(Math.PI*1.5,t,e)&&l(0,-s),new ut(n,a,o-n,r-a)}function wS(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:a}=i;if(i.startAngle===i.endAngle||s<Math.min(n,a)||s>Math.max(n,a))return!1;const o=Bf(i.startAngle),r=Bf(i.endAngle),l=Math.atan2(e,t);return o<r?l<=r&&l>=o:l<=r&&l>=-Math.PI||l>=o&&l<=Math.PI}function qF(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=e,o={x:a*Math.cos(i),y:a*Math.sin(i)},r={x:a*Math.cos(s),y:a*Math.sin(s)},l=n===0?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=n===0?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return dp(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||dp(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,c.x,c.y)||O_(0,0,a,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function QF(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},a={x:t.x+t.width,y:t.y+t.height};return qF({start:i,end:s},e)||qF({start:n,end:a},e)}function JF(t,e,i,s){if(i===0&&s===0)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*s)/(t+1*s))-e<0)return 1;let a=0,o=1;for(let r=0;r<8;r+=1){const l=(a+o)/2;Math.asin(Math.abs(l*i)/(t+l*i))+Math.asin(Math.abs(l*s)/(t+l*s))-e<0?a=l:o=l}return a}function Bc(t,e){return pb(t,e)<t4?e:di(t-e)+e}function TS(t,e,i=0){const n=Math.abs(e-t)>=2*Math.PI?2*Math.PI:di(e-t);return t=Bc(t,i),e=t+n,{startAngle:t,endAngle:e}}function NS(t,e,i,s,n,a){const o=Math.sin(a),r=Math.cos(a),l=t**2+e**2-i**2;let c,h,u,d;if(r>.5){const v=o/r,M=1+v**2,D=-2*(t+e*v),L=D**2-4*M*l;if(L<0)return;const A=(-D+Math.sqrt(L))/(2*M),C=(-D-Math.sqrt(L))/(2*M);c=A,h=A*v,u=C,d=C*v}else{const v=r/o,M=1+v**2,D=-2*(e+t*v),L=D**2-4*M*l;if(L<0)return;const A=(-D+Math.sqrt(L))/(2*M),C=(-D-Math.sqrt(L))/(2*M);c=A*v,h=A,u=C*v,d=C}const p=r,g=o,f=c*p+h*g,x=u*p+d*g,y=f>0?Bc(Math.atan2(h-e,c-t),s):NaN,b=x>0?Bc(Math.atan2(d-e,u-t),s):NaN;if(y>=s&&y<=n)return y;if(b>=s&&b<=n)return b}function OS(t,e,i,s,n,a){const o=Math.hypot(t,e),r=(o**2-i**2+a**2)/(2*o),l=o-r,c=Math.atan2(e,t),h=Math.acos(-l/i),u=Bc(c+h,s),d=Bc(c-h,s);if(u>=s&&u<=n)return u;if(d>=s&&d<=n)return d}var t4,_S=k({"packages/ag-charts-community/src/scene/util/sector.ts"(){"use strict";pi(),Ft(),__(),t4=1e-6}}),ES,rs,PS=k({"packages/ag-charts-community/src/scene/shape/sector.ts"(){"use strict";aa(),ZF(),_S(),_o(),ES=class{constructor(t,e,i,s,n){this.cx=t,this.cy=e,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){t==null||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){t==null||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},rs=class extends Zs{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return XF(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:t}=this;let{innerRadius:e,outerRadius:i}=this;return e=e>0?e+t:0,i=Math.max(i-t,0),{innerRadius:e,outerRadius:i}}normalizedClipSector(){const{clipSector:t}=this;if(t==null)return;const{startAngle:e,endAngle:i}=TS(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),a=TS(t.startAngle,t.endAngle,e);return new o2(Math.max(e,a.startAngle),Math.min(i,a.endAngle),Math.max(s,t.innerRadius),Math.min(n,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,s,n,a,o,r){if(t<=0)return;const{startAngle:l,endAngle:c}=TS(this.startAngle,this.endAngle),{innerRadius:h,outerRadius:u}=this.normalizedRadii(),d=this.normalizedClipSector();if(r&&h<=0)return;const p=r?this.getAngleOffset(h+t):this.getAngleOffset(u-t),g=o?l+p+e:c-p-e,f=r?h+t:u-t,x=f*Math.cos(g),y=f*Math.sin(g);if(d!=null&&(!o&&!(g>=l-1e-6&&g<=d.endAngle-1e-6)||o&&!(g>=d.startAngle+1e-6&&g<=c-1e-6)||r&&f<d.innerRadius-1e-6||!r&&f>d.outerRadius+1e-6))return;const b=new ES(x,y,t,i,s);if(d!=null){r?(b.clipStart(NS(x,y,t,i,s,d.endAngle)),b.clipEnd(NS(x,y,t,i,s,d.startAngle))):(b.clipStart(NS(x,y,t,i,s,d.startAngle)),b.clipEnd(NS(x,y,t,i,s,d.endAngle)));let A,C;if(o?(A=OS(x,y,t,i,s,d.innerRadius),C=OS(x,y,t,i,s,d.outerRadius)):(A=OS(x,y,t,i,s,d.outerRadius),C=OS(x,y,t,i,s,d.innerRadius)),b.clipStart(A),b.clipEnd(C),A!=null){const{x:T,y:N}=b.pointAt(A),P=Bc(Math.atan2(N,T),l);o?a?.clipStart(P):n.clipEnd(P)}if(C!=null){const{x:T,y:N}=b.pointAt(C),P=Bc(Math.atan2(N,T),l);o?n.clipStart(P):a?.clipEnd(P)}}if(d!=null){const{x:A,y:C}=b.pointAt((b.a0+b.a1)/2);if(!wS(A,C,d))return}const{x:v,y:M}=b.pointAt(o===r?b.a0:b.a1),D=Bc(Math.atan2(M,v),l),L=r?a:n;return o?L?.clipStart(D):L?.clipEnd(D),b}updatePath(){const{path:e,centerX:i,centerY:s,concentricEdgeInset:n,radialEdgeInset:a}=this;let{startOuterCornerRadius:o,endOuterCornerRadius:r,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:h,endAngle:u}=TS(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:p}=this.normalizedRadii(),g=this.normalizedClipSector(),f=u-h,x=f>=2*Math.PI-1e-6;if(e.clear(),d===0&&p===0||d>p)return;if((g?.startAngle??h)===(g?.endAngle??u))return;if(x&&this.clipSector==null&&o===0&&r===0&&l===0&&c===0){e.moveTo(i+p*Math.cos(h),s+p*Math.sin(h)),e.arc(i,s,p,h,u),d>n&&(e.moveTo(i+d*Math.cos(u),s+d*Math.sin(u)),e.arc(i,s,d,u,h,!0)),e.closePath();return}else if(this.clipSector==null&&Math.abs(d-p)<1e-6){e.arc(i,s,p,h,u,!1),e.arc(i,s,p,u,h,!0),e.closePath();return}const y=this.getAngleOffset(d),b=this.getAngleOffset(p);if(f<2*b)return;const M=(g?.innerRadius??d)>n,D=d<n||f<2*y,L=p-d,A=Math.max(o,l,r,c),C=A>0?Math.min(L/A,1):1;o*=C,r*=C,l*=C,c*=C;const T=JF(p,f-2*b,-o,-r);if(o*=T,r*=T,!D&&M){const Q=JF(d,f-2*y,l,c);l*=Q,c*=Q}else l=0,c=0;const N=Math.max(o+l,r+c),P=N>0?Math.min(L/N,1):1;o*=P,r*=P,l*=P,c*=P;let O=0,B=0;const G=o/(p-o),V=r/(p-r);if(G>=0&&G<1-1e-6)O=Math.asin(G);else{O=f/2;const Q=p/(1/Math.sin(O)+1);o=Math.min(Q,o)}if(V>=0&&V<1-1e-6)B=Math.asin(V);else{B=f/2;const Q=p/(1/Math.sin(B)+1);r=Math.min(Q,r)}const W=Math.asin(l/(d+l)),H=Math.asin(c/(d+c)),$=g?.outerRadius??p,F=this.getAngleOffset($),j=new ES(0,0,$,h+F,u-F),z=g?.innerRadius??d,Y=this.getAngleOffset(z),Z=M?new ES(0,0,z,h+Y,u-Y):void 0;g!=null&&(j.clipStart(g.startAngle),j.clipEnd(g.endAngle),Z?.clipStart(g.startAngle),Z?.clipEnd(g.endAngle));const X=this.arc(o,O,h-Math.PI*.5,h+O,j,Z,!0,!1),tt=this.arc(r,B,u-B,u+Math.PI*.5,j,Z,!1,!1),q=this.arc(c,H,u+Math.PI*.5,u+Math.PI-H,j,Z,!1,!0),it=this.arc(l,W,h+Math.PI+W,h+Math.PI*1.5,j,Z,!0,!0);if(D){const Q=f<Math.PI*.5?a*(1+Math.cos(f))/Math.sin(f):NaN;let rt;Q>0&&Q<p?rt=Math.max(Math.hypot(a,Q),d):rt=a,rt=Math.max(rt,d);const at=h+f*.5;e.moveTo(i+rt*Math.cos(at),s+rt*Math.sin(at))}else if(!(it?.isValid()===!0||Z?.isValid()===!0)){const Q=h+f/2,rt=d*Math.cos(Q),at=d*Math.sin(Q);e.moveTo(i+rt,s+at)}if(X?.isValid()===!0){const{cx:Q,cy:rt,r:at,a0:ht,a1:dt}=X;e.arc(i+Q,s+rt,at,ht,dt)}if(j.isValid()){const{r:Q,a0:rt,a1:at}=j;e.arc(i,s,Q,rt,at)}if(tt?.isValid()===!0){const{cx:Q,cy:rt,r:at,a0:ht,a1:dt}=tt;e.arc(i+Q,s+rt,at,ht,dt)}if(!D){if(q?.isValid()===!0){const{cx:Q,cy:rt,r:at,a0:ht,a1:dt}=q;e.arc(i+Q,s+rt,at,ht,dt)}if(Z?.isValid()===!0){const{r:Q,a0:rt,a1:at}=Z;e.arc(i,s,Q,at,rt,!0)}if(it?.isValid()===!0){const{cx:Q,cy:rt,r:at,a0:ht,a1:dt}=it;e.arc(i+Q,s+rt,at,ht,dt)}}e.closePath()}isPointInPath(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=this.clipSector??this;return wS(t-this.centerX,e-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(n,a),outerRadius:Math.max(n,a)})}},rs.className="Sector",S([ot()],rs.prototype,"centerX",2),S([ot()],rs.prototype,"centerY",2),S([ot()],rs.prototype,"innerRadius",2),S([ot()],rs.prototype,"outerRadius",2),S([ot()],rs.prototype,"startAngle",2),S([ot()],rs.prototype,"endAngle",2),S([na({equals:(t,e)=>t.equals(e)})],rs.prototype,"clipSector",2),S([ot()],rs.prototype,"concentricEdgeInset",2),S([ot()],rs.prototype,"radialEdgeInset",2),S([ot()],rs.prototype,"startOuterCornerRadius",2),S([ot()],rs.prototype,"endOuterCornerRadius",2),S([ot()],rs.prototype,"startInnerCornerRadius",2),S([ot()],rs.prototype,"endInnerCornerRadius",2)}}),ni,Fo,RS=k({"packages/ag-charts-community/src/chart/themes/defaultColors.ts"(){"use strict";ni={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Fo={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"}}}),r2,BS,zS,Gu,FS,fy,jt,Vq=k({"packages/ag-charts-community/src/chart/series/polar/donutSeriesProperties.ts"(){"use strict";ng(),mt(),mt(),nu(),Oo(),RS(),vl(),Sl(),r2=class extends _e{constructor(){super(...arguments),this.showInLegend=!1}},S([I],r2.prototype,"showInLegend",2),BS=class extends Vi{constructor(){super(...arguments),this.spacing=2}set(t,e){return super.set(t)}},S([I],BS.prototype,"text",2),S([I],BS.prototype,"spacing",2),zS=class extends wt{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}},S([I],zS.prototype,"fill",2),S([I],zS.prototype,"fillOpacity",2),Gu=class extends Vi{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},S([I],Gu.prototype,"offset",2),S([I],Gu.prototype,"minAngle",2),S([I],Gu.prototype,"minSpacing",2),S([I],Gu.prototype,"maxCollisionOffset",2),S([I],Gu.prototype,"avoidCollisions",2),FS=class extends Vi{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},S([I],FS.prototype,"positionOffset",2),S([I],FS.prototype,"positionRatio",2),fy=class extends wt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},S([I],fy.prototype,"colors",2),S([I],fy.prototype,"length",2),S([I],fy.prototype,"strokeWidth",2),jt=class extends Pn{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(ni),this.strokes=Object.values(Fo),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new up(BS),this.title=new r2,this.innerCircle=new zS,this.shadow=new Ya,this.calloutLabel=new Gu,this.sectorLabel=new FS,this.calloutLine=new fy,this.tooltip=new Ns}},S([I],jt.prototype,"angleKey",2),S([I],jt.prototype,"angleName",2),S([I],jt.prototype,"angleFilterKey",2),S([I],jt.prototype,"radiusKey",2),S([I],jt.prototype,"radiusName",2),S([I],jt.prototype,"radiusMin",2),S([I],jt.prototype,"radiusMax",2),S([I],jt.prototype,"calloutLabelKey",2),S([I],jt.prototype,"calloutLabelName",2),S([I],jt.prototype,"sectorLabelKey",2),S([I],jt.prototype,"sectorLabelName",2),S([I],jt.prototype,"legendItemKey",2),S([I],jt.prototype,"defaultColorRange",2),S([I],jt.prototype,"defaultPatternFills",2),S([I],jt.prototype,"fills",2),S([I],jt.prototype,"strokes",2),S([I],jt.prototype,"fillOpacity",2),S([I],jt.prototype,"strokeOpacity",2),S([I],jt.prototype,"lineDash",2),S([I],jt.prototype,"lineDashOffset",2),S([I],jt.prototype,"cornerRadius",2),S([I],jt.prototype,"itemStyler",2),S([I],jt.prototype,"rotation",2),S([I],jt.prototype,"outerRadiusOffset",2),S([I],jt.prototype,"outerRadiusRatio",2),S([I],jt.prototype,"innerRadiusOffset",2),S([I],jt.prototype,"innerRadiusRatio",2),S([I],jt.prototype,"strokeWidth",2),S([I],jt.prototype,"sectorSpacing",2),S([I],jt.prototype,"hideZeroValueSectorsInLegend",2),S([I],jt.prototype,"innerLabels",2),S([I],jt.prototype,"title",2),S([I],jt.prototype,"innerCircle",2),S([I],jt.prototype,"shadow",2),S([I],jt.prototype,"calloutLabel",2),S([I],jt.prototype,"sectorLabel",2),S([I],jt.prototype,"calloutLine",2),S([I],jt.prototype,"tooltip",2)}});function Vu(t,e,i,s){const n=[i.convert(0),i.convert(1)],a=[s.convert(0),s.convert(1)],o=Math.PI/-2+ji(e),r=t?"initial":"update",l=({radius:g})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*g}),c=({radius:g})=>({innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*g});return{nodes:{toFn:(g,f,x,{prevLive:y})=>{let{startAngle:b,endAngle:v,innerRadius:M,outerRadius:D}=f;const{stroke:L,fill:A}=f.sectorFormat;if(x==="removed"&&y?(b=y.datum?.endAngle,v=y.datum?.endAngle):x==="removed"&&!y&&(b=o,v=o),x==="removed"){const C=l(f);M=C.innerRadius,D=C.outerRadius}return{startAngle:b,endAngle:v,outerRadius:D,innerRadius:M,stroke:L,fill:A}},fromFn:(g,f,x,{prevFromProps:y})=>{let{startAngle:b,endAngle:v,innerRadius:M,outerRadius:D}=g,{fill:L,stroke:A}=f.sectorFormat;if(x==="updated"&&g.previousDatum==null&&(x="added"),x==="unknown"||x==="added"&&!y?(b=o,v=o,M=f.innerRadius,D=f.outerRadius):x==="added"&&y&&(b=y.endAngle??o,v=y.endAngle??o,M=y.innerRadius??f.innerRadius,D=y.outerRadius??f.outerRadius),x==="added"&&!t){const C=c(f);M=C.innerRadius,D=C.outerRadius}return x==="updated"&&(L=g.fill??L,A=(typeof g.stroke=="string"?g.stroke:void 0)??A),{startAngle:b,endAngle:v,innerRadius:M,outerRadius:D,fill:L,stroke:A,phase:r}}},innerCircle:{fromFn:(g,f)=>({size:g.previousDatum?.radius??g.size??0,phase:r}),toFn:(g,f)=>({size:f.radius??0})}}}function l2(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,stroke:e.sectorFormat.stroke}}function c2(t,e){const i=e.y-t.centerY,s=e.x-t.centerX,n=Math.atan2(i,s),a=t.getItemNodes();for(const o of a)if(o.datum.missing!==!0&&lc(n,o.startAngle,o.endAngle)){const r=Math.sqrt(s*s+i*i);let l=0;return r<o.innerRadius?l=o.innerRadius-r:r>o.outerRadius&&(l=r-o.outerRadius),{datum:o.datum,distance:l}}}var h2=k({"packages/ag-charts-community/src/chart/series/polar/pieUtil.ts"(){"use strict";pi()}}),u2,Wq=k({"packages/ag-charts-community/src/chart/series/polar/polarZIndexMap.ts"(){"use strict";u2=(t=>(t[t.BACKGROUND=0]="BACKGROUND",t[t.FOREGROUND=1]="FOREGROUND",t[t.HIGHLIGHT=2]="HIGHLIGHT",t[t.LABEL=3]="LABEL",t))(u2||{})}}),my,jS=k({"packages/ag-charts-community/src/chart/series/polar/polarSeries.ts"(){"use strict";Mu(),Ft(),We(),al(),_o(),Nn(),am(),aL(),my=class extends uS{constructor({categoryKey:t,useLabelLayer:e=!1,pickModes:i=[1,0],canHaveAxes:s=!1,animationResetFns:n,...a}){super({...a,categoryKey:t,useLabelLayer:e,pickModes:i,directionKeys:{angle:["angleKey"],radius:["radiusKey"]},directionNames:{angle:["angleName"],radius:["radiusName"]},canHaveAxes:s}),this.directions=["angle","radius"],this.itemGroup=this.contentGroup.appendChild(new Ot),this.nodeData=[],this.itemSelection=gi.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=gi.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=gi.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=gi.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=n,this.animationState=new Lp("empty",{empty:{update:{target:"ready",action:o=>this.animateEmptyUpdateReady(o)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:o=>this.animateReadyHighlight(o),highlightMarkers:o=>this.animateReadyHighlightMarkers(o),resize:o=>this.animateReadyResize(o),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:o=>this.animateWaitingUpdateReady(o)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:o=>this.animateClearingUpdateEmpty(o)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[t,1],this.highlightGroup.zIndex=[t,2],this.labelGroup.zIndex=[t,3],!0):!1}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}labelFactory(){const t=new Gi;return t.pointerEvents=1,t}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager?.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getInnerRadius(){return 0}computeLabelsBBox(t,e){return null}getShapeFillBBox(){const t=this.radius;return{series:new ut(-t,-t,t*2,t*2),axis:new ut(-t,-t,t*2,t*2)}}resetAllAnimation(){const{item:t,label:e}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&as([this.itemSelection,this.highlightSelection],t),e&&as([this.labelSelection,this.highlightLabelSelection],e),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){const{item:e,label:i}=this.animationResetFns??{};e&&as([this.highlightSelection],e),i&&as([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(t){const e=this.getNodeData()?.[t.datumIndex];if(e!==void 0)return this.itemSelection.select(i=>i instanceof Zs&&i.datum===e)[0]}getSeriesRange(t,e){return[NaN,NaN]}}}}),e4,yy,Hq=k({"packages/ag-charts-community/src/chart/series/polar/donutSeries.ts"(){"use strict";R(),Ls(),Nu(),Ft(),We(),al(),xc(),PS(),Nn(),gp(),_S(),pi(),gc(),Ln(),Rt(),Ga(),fr(),Eo(),Lu(),bl(),ll(),Vq(),h2(),jS(),e4=class extends Ep{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},yy=class extends my{constructor(t){super({moduleCtx:t,categoryKey:void 0,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:l2,label:xl}}),this.properties=new jt,this.phantomNodeData=void 0,this.backgroundGroup=new ss({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new $a,this.radiusScale=new $a,this.phantomGroup=this.backgroundGroup.appendChild(new Ot({name:"phantom"})),this.phantomSelection=gi.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new Ot({name:"pieCalloutLabels"})),this.calloutLabelSelection=new gi(this.calloutLabelGroup,Ot),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Ot({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Wi({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Wi({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new Ot({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new Ot({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=gi.select(this.innerLabelsGroup,Gi),this.innerCircleSelection=gi.select(this.innerCircleGroup,()=>new Wi({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=e4,this.angleScale=new $a,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),t?.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),t?.removeChild(this.backgroundGroup)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.backgroundGroup.zIndex=[0,t],!0):!1}nodeFactory(){return new rs}getSeriesDomain(t){return t==="angle"?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(this.data==null)return;const{visible:e,id:i,ctx:{legendManager:s}}=this,{angleKey:n,angleFilterKey:a,radiusKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c}=this.properties,h=()=>(x,y)=>e&&s.getItemEnabled({seriesId:i,itemId:y})?x:0,u=!this.ctx.animationManager.isSkipped(),d=[],p=[];c?d.push(Po(c,"band",{id:"legendItemKey"})):r?d.push(Po(r,"band",{id:"calloutLabelKey"})):l&&d.push(Po(l,"band",{id:"sectorLabelKey"}));const g=this.radiusScale.type,f=this.angleScale.type;o&&p.push(zC(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:h}),Yt(o,g,{id:"radiusRaw",processor:h}),Tu("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),r&&p.push(Yt(r,"band",{id:"calloutLabelValue"})),l&&p.push(Yt(l,"band",{id:"sectorLabelValue"})),c&&p.push(Yt(c,"band",{id:"legendItemValue"})),a&&p.push(Mm(a,f,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:h}),Yt(a,f,{id:"angleFilterRaw"}),Tu("angleFilterValue",[0,1],0,0)),u&&this.processedData&&d.length>0&&p.push(jp(this.id,this.processedData)),p.push(Fp()),await this.requestDataModel(t,this.data,{props:[...d,Mm(n,f,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:h}),Yt(n,f,{id:"angleRaw"}),Tu("angleValue",[0,1],0,0),...p]});for(const x of this.processedData?.defs?.values??[]){const{id:y,missing:b,property:v}=x,M=EA(this,b);y!=="angleRaw"&&M>0&&st.warnOnce(`no value was found for the key '${String(v)}' on ${M} data element${M>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:e}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataValues(t,e){const i=t.resolveColumnById(this,"angleValue",e),s=t.resolveColumnById(this,"angleRaw",e),n=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterValue",e):void 0,a=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterRaw",e):void 0,o=this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",e):void 0,r=this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",e):void 0,l=this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",e):void 0,c=this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",e):void 0,h=this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",e):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:n,angleFilterRawValues:a,radiusValues:o,radiusRawValues:r,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:h}}createNodeData(){const{id:t,processedData:e,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:a}=this,{rotation:o,innerRadiusRatio:r}=this.properties;if(!i||e?.type!=="ungrouped")return;const{angleValues:l,angleRawValues:c,angleFilterValues:h,angleFilterRawValues:u,radiusValues:d,radiusRawValues:p,calloutLabelValues:g,sectorLabelValues:f,legendItemValues:x}=this.getProcessedDataValues(i,e),y=u?.some((C,T)=>C>c[T])??!1;let b=0,v=0;const M=[],D=u!=null?[]:void 0,L=e.dataSources.get(this.id)??[],A=e.invalidData?.get(this.id);return L.forEach((C,T)=>{if(A?.[T]===!0)return;const N=y?h[T]:l[T],P=u!=null&&!y?Math.sqrt(u[T]/c[T]):1,O=s.convert(b)+ji(o);b=N,v+=N;const B=s.convert(b)+ji(o),G=Math.abs(B-O),V=O+G/2,W=c[T],$=(d?.[T]??1)*P,F=p?.[T],j=x?.[T],z=this.getLabels(C,V,G,!0,g?.[T],f?.[T],j),Y=this.getSectorFormat(C,T,!1),Z={itemId:T,series:this,datum:C,datumIndex:T,angleValue:W,midAngle:V,midCos:Math.cos(V),midSin:Math.sin(V),startAngle:O,endAngle:B,radius:$,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert($),0),sectorFormat:Y,radiusValue:F,legendItemValue:j,enabled:a&&n.getItemEnabled({seriesId:t,itemId:T}),focusable:!0,...z};M.push(Z),D?.push({...Z,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=v===0,this.zerosumInnerRing.visible=v===0&&r!=null&&r!==1&&r>0,{itemId:t,nodeData:M,labelData:M,phantomNodeData:D}}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>=ji(r.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(r,{...d,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...d,value:a})}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Bf(t),s=-.75*Math.PI,n=i-s,a=Math.floor(n/(Math.PI/2)),o=wk(a,e.length);return e[o]}getNodeFill(t,e,i){return Au(t,{type:"gradient",bounds:"series",colorStops:e.map(s=>({color:s})),gradient:"radial",rotation:0,reverse:!0},{type:"pattern",pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"none",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0},{type:"image",backgroundFill:i,backgroundFillOpacity:1,fit:"contain",repeat:"no-repeat",rotation:0})}getFillParams(t,e,i){if(!(!Ao(t)||t.bounds==="item"))return{centerX:0,centerY:0,innerRadius:e,outerRadius:i}}getSectorFormat(t,e,i){const{angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fills:l,strokes:c,defaultColorRange:h,defaultPatternFills:u,itemStyler:d}=this.properties,p=c[e%c.length],{fill:g,fillOpacity:f,stroke:x,strokeWidth:y,strokeOpacity:b,lineDash:v,lineDashOffset:M,cornerRadius:D}=Kt(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[e%l.length]:void 0,stroke:p,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),L=h[e%h.length],A=u[e%u.length],C=g??"black";let T;return d&&(T=this.cachedDatumCallback(this.getDatumId(e)+(i?"-highlight":"-hide"),()=>this.callWithContext(d,{datum:t,angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fill:this.getNodeFill(C,L,A),fillOpacity:f,stroke:x,strokeWidth:y,strokeOpacity:b,lineDash:v,lineDashOffset:M,cornerRadius:D,highlighted:i,seriesId:this.id}))),{fill:this.getNodeFill(T?.fill??C,L,A),fillOpacity:T?.fillOpacity??f,stroke:T?.stroke??x,strokeWidth:T?.strokeWidth??y,strokeOpacity:T?.strokeOpacity??b,lineDash:T?.lineDash??v,lineDashOffset:T?.lineDashOffset??M,cornerRadius:T?.cornerRadius??D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e);const i=s=>({...s,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;const i=2+(this.properties.title?.spacing??0),s=Math.max(0,-t);return-t-i-s}update({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=sr(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const n=this.getTitleTranslationY();e.node.y=isFinite(n)?n:0;const a=e.node.getBBox();e.node.visible=e.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(a)}for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:t}=this,{title:e}=this.properties;t!==e&&(t&&this.labelGroup?.removeChild(t.node),e&&(e.node.textBaseline="bottom",this.labelGroup?.appendChild(e.node)),this.oldTitle=e)}updateNodeMidPoint(){const t=e=>{const i=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,i),y:e.midSin*Math.max(0,i)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:a,innerLabelsSelection:o}=this,r=this.nodeData.map(c=>({...c,sectorFormat:{...c.sectorFormat}})),l=(c,h)=>{c.update(h,void 0,u=>this.getDatumId(u.datumIndex)),this.ctx.animationManager.isSkipped()&&c.cleanup()};l(t,this.nodeData),l(e,r),l(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,c=>{const h=new ws;h.tag=0,h.pointerEvents=1,c.appendChild(h);const u=new Gi;u.tag=1,u.pointerEvents=1,c.appendChild(u)}),a.update(this.nodeData),s.update(r),o.update(this.properties.innerLabels,c=>{c.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const n=Math.min(i,this.getOuterRadius()),a=1;e=Math.ceil(n*2+a)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){const e=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((l,{radius:c})=>{l.setProperties({fill:this.getNodeFill(this.properties.innerCircle?.fill,["black"],"black"),opacity:this.properties.innerCircle?.fillOpacity,size:c})});const s=this.radiusScale.range[0],n=this.radiusScale.range[1],a=this.getShapeFillBBox(),o=this.ctx.animationManager.isSkipped(),r=(l,c,h,u)=>{const d=this.getSectorFormat(c.datum,c.itemId,u);c.sectorFormat.fill=d.fill,c.sectorFormat.stroke=d.stroke,o&&(l.startAngle=c.startAngle,l.endAngle=c.endAngle,l.innerRadius=c.innerRadius,l.outerRadius=c.outerRadius),(u||o)&&(l.fill=d.fill,l.stroke=d.stroke);const p=this.getFillParams(d.fill,s,n);jv(l,d.fill,a,p),l.strokeWidth=d.strokeWidth,l.fillOpacity=d.fillOpacity,l.strokeOpacity=d.strokeOpacity,l.lineDash=d.lineDash,l.lineDashOffset=d.lineDashOffset,l.cornerRadius=d.cornerRadius,l.fillShadow=this.properties.shadow;const g=Math.max((this.properties.sectorSpacing+(d.stroke!=null?d.strokeWidth:0))/2,0);l.inset=g,l.lineJoin=this.properties.sectorSpacing>=0||g>0?"miter":"round"};this.itemSelection.each((l,c,h)=>r(l,c,h,!1)),this.highlightSelection.each((l,c,h)=>{r(l,c,h,!0),l.visible=c.itemId===e?.itemId}),this.phantomSelection.each((l,c,h)=>r(l,c,h,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:{length:t,strokeWidth:e,colors:i},strokes:s}=this.properties,n=e,a=z_(i)?i??this.properties.strokes:s,{offset:o}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(r=>{const l=r.closestDatum(),{calloutLabel:c,outerRadius:h,datumIndex:u}=l;if(c?.text&&!c.hidden&&h!==0){r.visible=!0,r.strokeWidth=n,r.stroke=a[u%a.length],r.fill=void 0;const d=l.midCos*h,p=l.midSin*h;let g=l.midCos*(h+t),f=l.midSin*(h+t);if((c.collisionTextAlign??c.collisionOffsetY!==0)&&c.box!=null){const y=c.box;let b=g,v=f;g<y.x?b=y.x:g>y.x+y.width&&(b=y.x+y.width),f<y.y?v=y.y:f>y.y+y.height&&(v=y.y+y.height);const M=b-g,D=v-f,L=Math.sqrt(Math.pow(M,2)+Math.pow(D,2)),A=L-o;A>0&&(g=g+M*A/L,f=f+D*A/L)}r.x1=d,r.y1=p,r.x2=g,r.y2=f}else r.visible=!1})}getLabelOverflow(t,e,i){const s=-this.centerX,n=s+i.width,a=-this.centerY,o=a+i.height,r=1;let l=1;e.x+r<s?l=(e.x+e.width-s)/e.width:e.x+e.width-r>n&&(l=(n-e.x)/e.width);const c=e.y+r<a||e.y+e.height-r>o,h=l===1?t.length:Math.floor(t.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(t){const{surroundingRadius:e}=this;if(e==null)return!1;const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=e**2;return i.some(n=>n.x**2+n.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=y=>!y.calloutLabel||y.outerRadius===0,r=this.calloutNodeData,l=r.filter(y=>!o(y));if(l.forEach(y=>{const b=y.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(y=>y.midCos<0).sort((y,b)=>y.midSin-b.midSin),h=l.filter(y=>y.midCos>=0).sort((y,b)=>y.midSin-b.midSin),u=l.filter(y=>y.midSin<0&&y.calloutLabel?.textAlign==="center").sort((y,b)=>y.midCos-b.midCos),d=l.filter(y=>y.midSin>=0&&y.calloutLabel?.textAlign==="center").sort((y,b)=>y.midCos-b.midCos),p=y=>{const b=y.calloutLabel;if(b==null)return ut.zero.clone();const v=y.outerRadius+i.length+s,M=y.midCos*v,D=y.midSin*v+b.collisionOffsetY,L=b.collisionTextAlign??b.textAlign,A=b.textBaseline;return Gi.computeBBox(b.text,M,D,{font:this.properties.calloutLabel,textAlign:L,textBaseline:A})},g=(y,b,v)=>{const M=p(y).grow(n/2),D=p(b).grow(n/2);M.x<D.x+D.width&&M.x+M.width>D.x&&(v==="to-top"?M.y<D.y+D.height:M.y+M.height>D.y)&&(b.calloutLabel.collisionOffsetY=v==="to-top"?M.y-D.y-D.height:M.y+M.height-D.y)},f=y=>{const b=y.slice().sort((M,D)=>Math.abs(M.midSin)-Math.abs(D.midSin))[0],v=y.indexOf(b);for(let M=v-1;M>=0;M--){const D=y[M+1],L=y[M];g(D,L,"to-top")}for(let M=v+1;M<y.length;M++){const D=y[M-1],L=y[M];g(D,L,"to-bottom")}},x=y=>{const b=l.some(C=>C.calloutLabel.collisionOffsetY!==0),v=y.map(C=>p(C)),M=v.map(C=>C.clone().grow(n/2));let D=!1;for(let C=0;C<M.length&&!D;C++){const T=M[C];for(let N=C+1;N<y.length;N++){const P=M[N];if(T.collidesBBox(P)){D=!0;break}}}const L=r.map(C=>{const{startAngle:T,endAngle:N,outerRadius:P}=C;return{startAngle:T,endAngle:N,innerRadius:a,outerRadius:P}}),A=v.some(C=>L.some(T=>QF(C,T)));!D&&!b&&!A||y.filter(C=>C.calloutLabel.textAlign==="center").forEach(C=>{const T=C.calloutLabel;C.midCos<0?T.collisionTextAlign="right":C.midCos>0?T.collisionTextAlign="left":T.collisionTextAlign="center"})};f(c),f(h),x(u),x(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new Gi;this.calloutLabelSelection.selectByTag(1).forEach(l=>{const c=l.closestDatum(),h=c.calloutLabel,u=e.convert(c.radius),d=Math.max(0,u);if(!h?.text||d===0||h.hidden){l.visible=!1;return}const p=d+n+a,g=c.midCos*p,f=c.midSin*p+h.collisionOffsetY,x={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};r.text=h.text,r.x=g,r.y=f,r.setFont(this.properties.calloutLabel),r.setAlign(x);const y=r.getBBox();let b=h.text,v=!0;if(i.avoidCollisions){const{textLength:M,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,y,t);b=h.text.length===M?h.text:`${h.text.substring(0,M)}\u2026`,v=!D}l.text=b,l.x=g,l.y=f,l.setFont(this.properties.calloutLabel),l.setAlign(x),l.fill=o,l.visible=v})}computeLabelsBBox(t,e){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Gi;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach(d=>{const p=d.calloutLabel;if(!p||d.outerRadius===0)return null;const g=d.outerRadius+n+a,f=d.midCos*g,x=d.midSin*g+p.collisionOffsetY;c.text=p.text,c.x=f,c.y=x,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline});const y=c.getBBox();if(p.box=y,Math.abs(p.collisionOffsetY)>o){p.hidden=!0;return}if(h){const b=-this.centerY,v=new ut(h.x-r,b,h.width+2*r,h.y+h.height+r-b);if(y.collidesBBox(v)){p.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:b,hasVerticalOverflow:v,hasSurroundingSeriesOverflow:M}=this.getLabelOverflow(p.text,y,e),D=p.text.length>2&&b<2;if(v||D||M){p.hidden=!0;return}}p.hidden=!1,l.push(y)}),l.length===0?null:ut.merge(l)}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=(h,u)=>{const{sectorLabel:d,outerRadius:p}=u;let g=!1;if(d&&p!==0){const f=e*(1-r)+p*r+o;h.fill=l,h.fontStyle=s,h.fontWeight=n,h.fontSize=i,h.fontFamily=a,h.text=d.text,h.x=u.midCos*f,h.y=u.midSin*f,h.textAlign="center",h.textBaseline="middle";const x=h.getBBox(),y=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],{startAngle:b,endAngle:v}=u,M={startAngle:b,endAngle:v,innerRadius:e,outerRadius:p};y.every(([D,L])=>wS(D,L,M))&&(g=!0)}h.visible=g};this.labelSelection.each(c),this.highlightLabelSelection.each(c)}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,color:x}=u;h.fontStyle=d,h.fontWeight=p,h.fontSize=g,h.fontFamily=f,h.text=u.text,h.x=0,h.y=0,h.fill=x,h.textAlign="center",h.textBaseline="alphabetic",t.push(h.getBBox()),e.push(u.spacing)});const i=h=>h===0?0:e[h],s=h=>h===e.length-1?0:e[h],n=t.reduce((h,u,d)=>h+u.height+i(d)+s(d),0),a=Math.max(...t.map(h=>h.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let h=0,u=-n/2;h<t.length;h++){const p=t[h].height+u+i(h);c.push(p),u=p+s(h)}this.innerLabelsSelection.each((h,u,d)=>{h.y=c[d],h.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(t){return c2(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{legendItemKey:a,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,tooltip:g}=n,f=this.properties.title.text;if(!i||!s)return;const x=s.dataSources.get(this.id)?.[t],{angleRawValues:y,legendItemValues:b,calloutLabelValues:v,sectorLabelValues:M}=this.getProcessedDataValues(i,s),D=y[t],L=b?.[t]??(o===h?void 0:v?.[t])??(l===h?void 0:M?.[t])??u;return this.formatTooltipWithContext(g,{title:f,symbol:this.legendItemSymbol(t),data:[{label:L,fallbackLabel:h,value:tl(D,3)}]},{seriesId:e,datum:x,title:u,legendItemKey:a,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,...this.getSectorFormat(x,t,!1)})}legendItemSymbol(t){const e=this.processedData?.dataSources.get(this.id)?.[t],i=this.getSectorFormat(e,t,!1),{fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r}=this.properties;let{fill:l}=i;const{stroke:c}=i;return Ao(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:c,fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r}}}getLegendData(t){const{visible:e,processedData:i,dataModel:s,id:n,ctx:{legendManager:a}}=this;if(!s||!i||t!=="category")return[];const{angleKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!r||r===o)&&(!l||l===o))return[];const{angleRawValues:u,calloutLabelValues:d,sectorLabelValues:p,legendItemValues:g}=this.getProcessedDataValues(s,i),f=this.properties.title?.showInLegend&&this.properties.title.text,x=[],y=this.properties.hideZeroValueSectorsInLegend,b=i.dataSources.get(this.id),v=i.invalidData?.get(this.id);for(let M=0;M<i.input.count;M++){const D=b?.[M],L=u[M];if(v?.[M]===!0||y&&L===0)continue;const A=[];f&&A.push(f);const C=this.getLabels(D,2*Math.PI,2*Math.PI,!1,d?.[M],p?.[M],g?.[M]);c&&C.legendItem!==void 0?A.push(C.legendItem.text):r&&r!==o&&C.calloutLabel?.text!==void 0?A.push(C.calloutLabel?.text):l&&l!==o&&C.sectorLabel?.text!==void 0&&A.push(C.sectorLabel?.text),A.length!==0&&x.push({legendType:"category",id:n,datum:D,itemId:M,seriesId:n,hideToggleOtherSeries:!0,enabled:e&&a.getItemEnabled({seriesId:n,itemId:M}),label:{text:A.join(" - ")},symbol:this.legendItemSymbol(M),legendItemName:c!=null?D[c]:void 0,hideInLegend:!h})}return x}setLegendState(t){const{id:e,ctx:{legendManager:i,updateService:s}}=this;t.forEach((n,a)=>i.toggleItem(n,e,a)),i.update(),s.update(5)}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=Vu(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);He(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,n)=>this.getDatumId(n.datumIndex)),He(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),de(this,"callout",e,this.calloutLabelSelection),de(this,"sector",e,this.labelSelection),de(this,"highlight",e,this.highlightLabelSelection),de(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:a}=this,{animationManager:o}=this.ctx,r=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(r?.moved.size??0)===0,c=(s?.defs.keys.length??0)>0,h=s?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!h)&&this.ctx.animationManager.skipCurrentBatch();const u=!this.nodeData.some(p=>p.enabled),d=Vu(!1,this.properties.rotation,n,a);He(this.id,"nodes",o,[t,e,i],d.nodes,(p,g)=>this.getDatumId(g.datumIndex),r),He(this.id,"innerCircle",o,[this.innerCircleSelection],d.innerCircle),de(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),de(this,"sector",this.ctx.animationManager,this.labelSelection),de(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==u&&(this.noVisibleData=u,de(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:a}=this.ctx,o=Vu(!1,this.properties.rotation,s,n);He(this.id,"nodes",a,[t,e,i],o.nodes,(r,l)=>this.getDatumId(l.datumIndex)),He(this.id,"innerCircle",a,[this.innerCircleSelection],o.innerCircle),wc(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),wc(this,"sector",this.ctx.animationManager,this.labelSelection),wc(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),wc(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(t){return`${t}`}},yy.className="DonutSeries",yy.type="donut"}}),GS,zc,d2=k({"packages/ag-charts-community/src/chart/series/polar/pieSeriesOptionsDef.ts"(){"use strict";R(),Rt(),zn(),GS={radiusMin:U,radiusMax:U,rotation:et,outerRadiusOffset:et,outerRadiusRatio:St,hideZeroValueSectorsInLegend:K,sectorSpacing:U,cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),title:{enabled:K,text:J,showInLegend:K,spacing:U,...ve},calloutLabel:{enabled:K,offset:et,minAngle:U,avoidCollisions:K,formatter:he,...ve},sectorLabel:{enabled:K,positionOffset:et,positionRatio:St,formatter:he,...ve},calloutLine:{colors:kt(yt),length:U,strokeWidth:U},fills:kt(Ra),strokes:kt(yt),tooltip:ee,shadow:zo,...Zt,...vt,...ft(gt,["fill"]),...ft(ct,["stroke"])},zc={...GS,...Bn,type:pt(ke("pie")),angleKey:pt(J),radiusKey:J,calloutLabelKey:J,sectorLabelKey:J,legendItemKey:J,angleName:J,radiusName:J,calloutLabelName:J,sectorLabelName:J},zc.defaultColorRange=At(kt(kt(yt))),zc.defaultPatternFills=At(kt(yt)),zc.title._enabledFromTheme=At(K),zc.calloutLabel._enabledFromTheme=At(K),zc.sectorLabel._enabledFromTheme=At(K)}}),p2,i4,s4=k({"packages/ag-charts-community/src/chart/series/polar/donutSeriesOptionsDef.ts"(){"use strict";R(),d2(),p2={...GS,innerRadiusOffset:et,innerRadiusRatio:St,innerCircle:{fill:J,fillOpacity:St},innerLabels:{spacing:U,...ve}},i4={...p2,...zc,type:pt(ke("donut")),innerLabels:es({text:pt(J),spacing:U,...ve},"inner label options array")}}}),n4,Uq=k({"packages/ag-charts-community/src/chart/series/polar/donutTheme.ts"(){"use strict";si(),fi(),n4={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:[{$value:"$1"}]},{$isPattern:[{$value:"$1"}]},{$isImage:[{$value:"$1"}]}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:rS,fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},shadow:{enabled:!1,color:gl,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},legend:{enabled:!0}}}}),a4,o4,r4=k({"packages/ag-charts-community/src/chart/series/polar/donutSeriesModule.ts"(){"use strict";Hq(),s4(),Uq(),a4={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:t=>new yy(t),tooltipDefaults:{range:"exact"},themeTemplate:n4},o4={type:"series",name:"donut",chartType:"polar",options:i4,create:t=>new yy(t)}}}),g2,Wu,VS,xy,ie,$q=k({"packages/ag-charts-community/src/chart/series/polar/pieSeriesProperties.ts"(){"use strict";ng(),mt(),mt(),nu(),Oo(),RS(),vl(),Sl(),g2=class extends _e{constructor(){super(...arguments),this.showInLegend=!1}},S([I],g2.prototype,"showInLegend",2),Wu=class extends Vi{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},S([I],Wu.prototype,"offset",2),S([I],Wu.prototype,"minAngle",2),S([I],Wu.prototype,"minSpacing",2),S([I],Wu.prototype,"maxCollisionOffset",2),S([I],Wu.prototype,"avoidCollisions",2),VS=class extends Vi{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},S([I],VS.prototype,"positionOffset",2),S([I],VS.prototype,"positionRatio",2),xy=class extends wt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},S([I],xy.prototype,"colors",2),S([I],xy.prototype,"length",2),S([I],xy.prototype,"strokeWidth",2),ie=class extends Pn{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(ni),this.strokes=Object.values(Fo),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new g2,this.shadow=new Ya,this.calloutLabel=new Wu,this.sectorLabel=new VS,this.calloutLine=new xy,this.tooltip=new Ns}},S([I],ie.prototype,"angleKey",2),S([I],ie.prototype,"angleName",2),S([I],ie.prototype,"angleFilterKey",2),S([I],ie.prototype,"radiusKey",2),S([I],ie.prototype,"radiusName",2),S([I],ie.prototype,"radiusMin",2),S([I],ie.prototype,"radiusMax",2),S([I],ie.prototype,"calloutLabelKey",2),S([I],ie.prototype,"calloutLabelName",2),S([I],ie.prototype,"sectorLabelKey",2),S([I],ie.prototype,"sectorLabelName",2),S([I],ie.prototype,"legendItemKey",2),S([I],ie.prototype,"defaultColorRange",2),S([I],ie.prototype,"defaultPatternFills",2),S([I],ie.prototype,"fills",2),S([I],ie.prototype,"strokes",2),S([I],ie.prototype,"fillOpacity",2),S([I],ie.prototype,"strokeOpacity",2),S([I],ie.prototype,"lineDash",2),S([I],ie.prototype,"lineDashOffset",2),S([I],ie.prototype,"cornerRadius",2),S([I],ie.prototype,"itemStyler",2),S([I],ie.prototype,"rotation",2),S([I],ie.prototype,"outerRadiusOffset",2),S([I],ie.prototype,"outerRadiusRatio",2),S([I],ie.prototype,"strokeWidth",2),S([I],ie.prototype,"sectorSpacing",2),S([I],ie.prototype,"hideZeroValueSectorsInLegend",2),S([I],ie.prototype,"title",2),S([I],ie.prototype,"shadow",2),S([I],ie.prototype,"calloutLabel",2),S([I],ie.prototype,"sectorLabel",2),S([I],ie.prototype,"calloutLine",2),S([I],ie.prototype,"tooltip",2)}}),l4,by,Kq=k({"packages/ag-charts-community/src/chart/series/polar/pieSeries.ts"(){"use strict";R(),Ls(),Nu(),Ft(),We(),al(),xc(),PS(),Nn(),gp(),_S(),pi(),gc(),Ln(),Rt(),Ga(),fr(),Eo(),Lu(),bl(),ll(),$q(),h2(),jS(),l4=class extends Ep{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},by=class extends my{constructor(t){super({moduleCtx:t,categoryKey:void 0,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:l2,label:xl}}),this.properties=new ie,this.phantomNodeData=void 0,this.backgroundGroup=new ss({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new $a,this.radiusScale=new $a,this.phantomGroup=this.backgroundGroup.appendChild(new Ot({name:"phantom"})),this.phantomSelection=gi.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new Ot({name:"pieCalloutLabels"})),this.calloutLabelSelection=new gi(this.calloutLabelGroup,Ot),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Ot({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Wi({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=l4,this.angleScale=new $a,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),t?.removeChild(this.backgroundGroup)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.backgroundGroup.zIndex=[0,t],!0):!1}nodeFactory(){const t=new rs;return t.miterLimit=1e9,t}getSeriesDomain(t){return t==="angle"?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(this.data==null)return;const{visible:e,id:i,ctx:{legendManager:s}}=this,{angleKey:n,angleFilterKey:a,radiusKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c}=this.properties,h=()=>(x,y)=>e&&s.getItemEnabled({seriesId:i,itemId:y})?x:0,u=!this.ctx.animationManager.isSkipped(),d=[],p=[];c?d.push(Po(c,"band",{id:"legendItemKey"})):r?d.push(Po(r,"band",{id:"calloutLabelKey"})):l&&d.push(Po(l,"band",{id:"sectorLabelKey"}));const g=this.radiusScale.type,f=this.angleScale.type;o&&p.push(zC(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:h}),Yt(o,g,{id:"radiusRaw",processor:h}),Tu("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),r&&p.push(Yt(r,"band",{id:"calloutLabelValue"})),l&&p.push(Yt(l,"band",{id:"sectorLabelValue"})),c&&p.push(Yt(c,"band",{id:"legendItemValue"})),a&&p.push(Mm(a,f,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:h}),Yt(a,f,{id:"angleFilterRaw"}),Tu("angleFilterValue",[0,1],0,0)),u&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&d.length>0&&p.push(jp(this.id,this.processedData)),p.push(Fp()),await this.requestDataModel(t,this.data,{props:[...d,Mm(n,f,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:h}),Yt(n,f,{id:"angleRaw"}),Tu("angleValue",[0,1],0,0),...p]});for(const x of this.processedData?.defs?.values??[]){const{id:y,missing:b,property:v}=x,M=EA(this,b);y!=="angleRaw"&&M>0&&st.warnOnce(`no value was found for the key '${String(v)}' on ${M} data element${M>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:e}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataValues(t,e){const i=t.resolveColumnById(this,"angleValue",e),s=t.resolveColumnById(this,"angleRaw",e),n=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterValue",e):void 0,a=this.properties.angleFilterKey!=null?t.resolveColumnById(this,"angleFilterRaw",e):void 0,o=this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",e):void 0,r=this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",e):void 0,l=this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",e):void 0,c=this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",e):void 0,h=this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",e):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:n,angleFilterRawValues:a,radiusValues:o,radiusRawValues:r,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:h}}createNodeData(){const{id:t,processedData:e,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:a}=this,{rotation:o}=this.properties;if(!i||e?.type!=="ungrouped")return;const{angleValues:r,angleRawValues:l,angleFilterValues:c,angleFilterRawValues:h,radiusValues:u,radiusRawValues:d,calloutLabelValues:p,sectorLabelValues:g,legendItemValues:f}=this.getProcessedDataValues(i,e),x=h?.some((A,C)=>A>l[C])??!1;let y=0,b=0;const v=[],M=h!=null?[]:void 0,D=e.dataSources.get(this.id)??[],L=e.invalidData?.get(this.id);return D.forEach((A,C)=>{if(L?.[C]===!0)return;const T=x?c[C]:r[C],N=h!=null&&!x?Math.sqrt(h[C]/l[C]):1,P=s.convert(y)+ji(o);y=T,b+=T;const O=s.convert(y)+ji(o),B=Math.abs(O-P),G=P+B/2,V=l[C],H=(u?.[C]??1)*N,$=d?.[C],F=f?.[C],j=this.getLabels(A,G,B,!0,p?.[C],g?.[C],F),z=this.getSectorFormat(A,C,!1),Y={itemId:C,series:this,datum:A,datumIndex:C,angleValue:V,midAngle:G,midCos:Math.cos(G),midSin:Math.sin(G),startAngle:P,endAngle:O,radius:H,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(H),0),sectorFormat:z,radiusValue:$,legendItemValue:F,enabled:a&&n.getItemEnabled({seriesId:t,itemId:C}),...j};v.push(Y),M?.push({...Y,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})}),this.zerosumOuterRing.visible=b===0,{itemId:t,nodeData:v,labelData:v,phantomNodeData:M}}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>=ji(r.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(r,{...d,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...d,value:a})}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Bf(t),s=-.75*Math.PI,n=i-s,a=Math.floor(n/(Math.PI/2)),o=wk(a,e.length);return e[o]}getNodeFill(t,e,i){return Au(t,{type:"gradient",bounds:"series",colorStops:e.map(s=>({color:s})),gradient:"radial",rotation:0,reverse:!0},{type:"pattern",pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"none",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0},{type:"image",backgroundFill:i,backgroundFillOpacity:1,fit:"contain",repeat:"no-repeat",rotation:0})}getFillParams(t,e,i){if(!(!Ao(t)||t.bounds==="item"))return{centerX:0,centerY:0,innerRadius:e,outerRadius:i}}getSectorFormat(t,e,i){const{angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fills:l,strokes:c,defaultColorRange:h,defaultPatternFills:u,itemStyler:d}=this.properties,p=c[e%c.length],{fill:g,fillOpacity:f,stroke:x,strokeWidth:y,strokeOpacity:b,lineDash:v,lineDashOffset:M,cornerRadius:D}=Kt(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[e%l.length]:void 0,stroke:p,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),L=h[e%h.length],A=u[e%u.length],C=g??"black";let T;return d&&(T=this.cachedDatumCallback(this.getDatumId(e)+(i?"-highlight":"-hide"),()=>this.callWithContext(d,{datum:t,angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fill:this.getNodeFill(C,L,A),strokeOpacity:b,stroke:x,strokeWidth:y,fillOpacity:f,lineDash:v,lineDashOffset:M,cornerRadius:D,highlighted:i,seriesId:this.id}))),{fill:this.getNodeFill(T?.fill??C,L,A),fillOpacity:T?.fillOpacity??f,stroke:T?.stroke??x,strokeWidth:T?.strokeWidth??y,strokeOpacity:T?.strokeOpacity??b,lineDash:T?.lineDash??v,lineDashOffset:T?.lineDashOffset??M,cornerRadius:T?.cornerRadius??D}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[0,this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e);const i=s=>({...s,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(s.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;const i=2+(this.properties.title?.spacing??0),s=Math.max(0,-t);return-t-i-s}update({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},s=sr(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const n=this.getTitleTranslationY();e.node.y=isFinite(n)?n:0;const a=e.node.getBBox();e.node.visible=e.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(a)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:t}=this,{title:e}=this.properties;t!==e&&(t&&this.labelGroup?.removeChild(t.node),e&&(e.node.textBaseline="bottom",this.labelGroup?.appendChild(e.node)),this.oldTitle=e)}updateNodeMidPoint(){const t=e=>{const i=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,i),y:e.midSin*Math.max(0,i)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}updateSelections(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:a}=this,o=this.nodeData.map(l=>({...l,sectorFormat:{...l.sectorFormat}})),r=(l,c)=>{l.update(c,void 0,h=>this.getDatumId(h.datumIndex)),this.ctx.animationManager.isSkipped()&&l.cleanup()};r(t,this.nodeData),r(e,o),r(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,l=>{const c=new ws;c.tag=0,c.pointerEvents=1,l.appendChild(c);const h=new Gi;h.tag=1,h.pointerEvents=1,l.appendChild(h)}),a.update(this.nodeData),s.update(o)}updateNodes(t){const e=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=this.radiusScale.range[0],n=this.radiusScale.range[1],a=this.getShapeFillBBox(),o=this.ctx.animationManager.isSkipped(),r=(l,c,h,u)=>{const d=this.getSectorFormat(c.datum,c.itemId,u);c.sectorFormat.fill=d.fill,c.sectorFormat.stroke=d.stroke,o&&(l.startAngle=c.startAngle,l.endAngle=c.endAngle,l.innerRadius=c.innerRadius,l.outerRadius=c.outerRadius),(u||o)&&(l.fill=d.fill,l.stroke=d.stroke);const p=this.getFillParams(d.fill,s,n);jv(l,d.fill,a,p),l.strokeWidth=d.strokeWidth,l.fillOpacity=d.fillOpacity,l.strokeOpacity=d.strokeOpacity,l.lineDash=d.lineDash,l.lineDashOffset=d.lineDashOffset,l.cornerRadius=d.cornerRadius,l.fillShadow=this.properties.shadow;const g=Math.max((this.properties.sectorSpacing+(d.stroke!=null?d.strokeWidth:0))/2,0);l.inset=g,l.lineJoin=this.properties.sectorSpacing>=0||g>0?"miter":"round"};this.itemSelection.each((l,c,h)=>r(l,c,h,!1)),this.highlightSelection.each((l,c,h)=>{r(l,c,h,!0),l.visible=c.itemId===e?.itemId}),this.phantomSelection.each((l,c,h)=>r(l,c,h,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:{length:t,strokeWidth:e,colors:i},strokes:s}=this.properties,n=e,a=z_(i)?i:s,{offset:o}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(r=>{const l=r.closestDatum(),{calloutLabel:c,outerRadius:h,datumIndex:u}=l;if(c?.text&&!c.hidden&&h!==0){r.visible=!0,r.strokeWidth=n,r.stroke=a[u%a.length],r.fill=void 0;const d=l.midCos*h,p=l.midSin*h;let g=l.midCos*(h+t),f=l.midSin*(h+t);if((c.collisionTextAlign??c.collisionOffsetY!==0)&&c.box!=null){const y=c.box;let b=g,v=f;g<y.x?b=y.x:g>y.x+y.width&&(b=y.x+y.width),f<y.y?v=y.y:f>y.y+y.height&&(v=y.y+y.height);const M=b-g,D=v-f,L=Math.sqrt(Math.pow(M,2)+Math.pow(D,2)),A=L-o;A>0&&(g=g+M*A/L,f=f+D*A/L)}r.x1=d,r.y1=p,r.x2=g,r.y2=f}else r.visible=!1})}getLabelOverflow(t,e,i){const s=-this.centerX,n=s+i.width,a=-this.centerY,o=a+i.height,r=1;let l=1;e.x+r<s?l=(e.x+e.width-s)/e.width:e.x+e.width-r>n&&(l=(n-e.x)/e.width);const c=e.y+r<a||e.y+e.height-r>o,h=l===1?t.length:Math.floor(t.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(t){const{surroundingRadius:e}=this;if(e==null)return!1;const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=e**2;return i.some(n=>n.x**2+n.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=y=>!y.calloutLabel||y.outerRadius===0,r=this.calloutNodeData,l=r.filter(y=>!o(y));if(l.forEach(y=>{const b=y.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(y=>y.midCos<0).sort((y,b)=>y.midSin-b.midSin),h=l.filter(y=>y.midCos>=0).sort((y,b)=>y.midSin-b.midSin),u=l.filter(y=>y.midSin<0&&y.calloutLabel?.textAlign==="center").sort((y,b)=>y.midCos-b.midCos),d=l.filter(y=>y.midSin>=0&&y.calloutLabel?.textAlign==="center").sort((y,b)=>y.midCos-b.midCos),p=y=>{const b=y.calloutLabel;if(b==null)return ut.zero.clone();const v=y.outerRadius+i.length+s,M=y.midCos*v,D=y.midSin*v+b.collisionOffsetY,L=b.collisionTextAlign??b.textAlign,A=b.textBaseline;return Gi.computeBBox(b.text,M,D,{font:this.properties.calloutLabel,textAlign:L,textBaseline:A})},g=(y,b,v)=>{const M=p(y).grow(n/2),D=p(b).grow(n/2);M.x<D.x+D.width&&M.x+M.width>D.x&&(v==="to-top"?M.y<D.y+D.height:M.y+M.height>D.y)&&(b.calloutLabel.collisionOffsetY=v==="to-top"?M.y-D.y-D.height:M.y+M.height-D.y)},f=y=>{const b=y.slice().sort((M,D)=>Math.abs(M.midSin)-Math.abs(D.midSin))[0],v=y.indexOf(b);for(let M=v-1;M>=0;M--){const D=y[M+1],L=y[M];g(D,L,"to-top")}for(let M=v+1;M<y.length;M++){const D=y[M-1],L=y[M];g(D,L,"to-bottom")}},x=y=>{const b=l.some(C=>C.calloutLabel.collisionOffsetY!==0),v=y.map(C=>p(C)),M=v.map(C=>C.clone().grow(n/2));let D=!1;for(let C=0;C<M.length&&!D;C++){const T=M[C];for(let N=C+1;N<y.length;N++){const P=M[N];if(T.collidesBBox(P)){D=!0;break}}}const L=r.map(C=>{const{startAngle:T,endAngle:N,outerRadius:P}=C;return{startAngle:T,endAngle:N,innerRadius:a,outerRadius:P}}),A=v.some(C=>L.some(T=>QF(C,T)));!D&&!b&&!A||y.filter(C=>C.calloutLabel.textAlign==="center").forEach(C=>{const T=C.calloutLabel;C.midCos<0?T.collisionTextAlign="right":C.midCos>0?T.collisionTextAlign="left":T.collisionTextAlign="center"})};f(c),f(h),x(u),x(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new Gi;this.calloutLabelSelection.selectByTag(1).forEach(l=>{const c=l.closestDatum(),h=c.calloutLabel,u=e.convert(c.radius),d=Math.max(0,u);if(!h?.text||d===0||h.hidden){l.visible=!1;return}const p=d+n+a,g=c.midCos*p,f=c.midSin*p+h.collisionOffsetY,x={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};r.text=h.text,r.x=g,r.y=f,r.setFont(this.properties.calloutLabel),r.setAlign(x);const y=r.getBBox();let b=h.text,v=!0;if(i.avoidCollisions){const{textLength:M,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,y,t);b=h.text.length===M?h.text:`${h.text.substring(0,M)}\u2026`,v=!D}l.text=b,l.x=g,l.y=f,l.setFont(this.properties.calloutLabel),l.setAlign(x),l.fill=o,l.visible=v})}computeLabelsBBox(t,e){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Gi;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach(d=>{const p=d.calloutLabel;if(!p||d.outerRadius===0)return null;const g=d.outerRadius+n+a,f=d.midCos*g,x=d.midSin*g+p.collisionOffsetY;c.text=p.text,c.x=f,c.y=x,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline});const y=c.getBBox();if(p.box=y,Math.abs(p.collisionOffsetY)>o){p.hidden=!0;return}if(h){const b=-this.centerY,v=new ut(h.x-r,b,h.width+2*r,h.y+h.height+r-b);if(y.collidesBBox(v)){p.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:b,hasVerticalOverflow:v,hasSurroundingSeriesOverflow:M}=this.getLabelOverflow(p.text,y,e),D=p.text.length>2&&b<2;if(v||D||M){p.hidden=!0;return}}p.hidden=!1,l.push(y)}),l.length===0?null:ut.merge(l)}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=e>0,h=this.ctx.legendManager.getData(this.id)?.filter(d=>d.enabled).length===1,u=(d,p)=>{const{sectorLabel:g,outerRadius:f,startAngle:x,endAngle:y}=p;let b=!1;if(g&&f!==0){const v=e*(1-r)+f*r+o;d.fill=l,d.fontStyle=s,d.fontWeight=n,d.fontSize=i,d.fontFamily=a,d.text=g.text,!c&&h?(d.x=0,d.y=0):(d.x=p.midCos*v,d.y=p.midSin*v),d.textAlign="center",d.textBaseline="middle";const D=d.getBBox(),L=[[D.x,D.y],[D.x+D.width,D.y],[D.x+D.width,D.y+D.height],[D.x,D.y+D.height]],A={startAngle:x,endAngle:y,innerRadius:e,outerRadius:f};L.every(([C,T])=>wS(C,T,A))&&(b=!0)}d.visible=b};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}pickNodeClosestDatum(t){return c2(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{legendItemKey:a,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,tooltip:g}=n,f=this.properties.title.text;if(!i||!s)return;const x=s.dataSources.get(this.id)?.[t],{angleRawValues:y,legendItemValues:b,calloutLabelValues:v,sectorLabelValues:M}=this.getProcessedDataValues(i,s),D=y[t],L=b?.[t]??(o===h?void 0:v?.[t])??(l===h?void 0:M?.[t])??u;return this.formatTooltipWithContext(g,{title:f,symbol:this.legendItemSymbol(t),data:[{label:L,fallbackLabel:h,value:tl(D,3)}]},{seriesId:e,datum:x,title:u,legendItemKey:a,calloutLabelKey:o,calloutLabelName:r,sectorLabelKey:l,sectorLabelName:c,angleKey:h,angleName:u,radiusKey:d,radiusName:p,...this.getSectorFormat(x,t,!1)})}legendItemSymbol(t){const e=this.processedData?.dataSources.get(this.id)?.[t],i=this.getSectorFormat(e,t,!1),{fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r}=this.properties;let{fill:l}=i;const{stroke:c}=i;return Ao(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:c,fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r}}}getLegendData(t){const{id:e,visible:i,processedData:s,dataModel:n,ctx:{legendManager:a}}=this;if(!n||!s||t!=="category")return[];const{angleKey:o,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!r||r===o)&&(!l||l===o))return[];const{calloutLabelValues:u,sectorLabelValues:d,legendItemValues:p,angleRawValues:g}=this.getProcessedDataValues(n,s),f=this.properties.title?.showInLegend&&this.properties.title.text,x=[],y=this.properties.hideZeroValueSectorsInLegend,b=s.dataSources.get(this.id),v=s.invalidData?.get(this.id);for(let M=0;M<s.input.count;M++){const D=b?.[M],L=g[M];if(v?.[M]===!0||y&&L===0)continue;const A=[];f&&A.push(f);const C=this.getLabels(D,2*Math.PI,2*Math.PI,!1,u?.[M],d?.[M],p?.[M]);c&&C.legendItem!==void 0?A.push(C.legendItem.text):r&&r!==o&&C.calloutLabel?.text!==void 0?A.push(C.calloutLabel?.text):l&&l!==o&&C.sectorLabel?.text!==void 0&&A.push(C.sectorLabel?.text),A.length!==0&&x.push({legendType:"category",id:e,datum:D,itemId:M,seriesId:e,hideToggleOtherSeries:!0,enabled:i&&a.getItemEnabled({seriesId:e,itemId:M}),label:{text:A.join(" - ")},symbol:this.legendItemSymbol(M),legendItemName:c!=null?D[c]:void 0,hideInLegend:!h})}return x}setLegendState(t){const{id:e,ctx:{legendManager:i,updateService:s}}=this;t.forEach((n,a)=>i.toggleItem(n,e,a)),i.update(),s.update(5)}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=Vu(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);He(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,n)=>this.getDatumId(n.datumIndex)),de(this,"callout",e,this.calloutLabelSelection),de(this,"sector",e,this.labelSelection),de(this,"highlight",e,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:a}=this,{animationManager:o}=this.ctx,r=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(r?.moved.size??0)===0,c=(s?.defs.keys.length??0)>0,h=s?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!h)&&this.ctx.animationManager.skipCurrentBatch();const u=Vu(!1,this.properties.rotation,n,a);He(this.id,"nodes",o,[t,e,i],u.nodes,(d,p)=>this.getDatumId(p.datumIndex),r),de(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),de(this,"sector",this.ctx.animationManager,this.labelSelection),de(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:a}=this.ctx,o=Vu(!1,this.properties.rotation,s,n);He(this.id,"nodes",a,[t,e,i],o.nodes,(r,l)=>this.getDatumId(l.datumIndex)),wc(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),wc(this,"sector",this.ctx.animationManager,this.labelSelection),wc(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(t){return`${t}`}},by.className="PieSeries",by.type="pie"}}),c4,Yq=k({"packages/ag-charts-community/src/chart/series/polar/pieTheme.ts"(){"use strict";si(),fi(),c4={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:[{$value:"$1"}]},{$isPattern:[{$value:"$1"}]},{$isImage:[{$value:"$1"}]}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:rS,fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:gl,xOffset:3,yOffset:3,blur:5}},legend:{enabled:!0}}}}),h4,u4,d4=k({"packages/ag-charts-community/src/chart/series/polar/pieSeriesModule.ts"(){"use strict";Kq(),d2(),Yq(),h4={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:t=>new by(t),tooltipDefaults:{range:"exact"},themeTemplate:c4},u4={type:"series",name:"pie",chartType:"polar",options:zc,create:t=>new by(t)}}});function f2(){Io.register(KC,Fz,JB,kF,GL,jF,JL,YF,a4,h4,WF);for(const t of[mr,cl,ga,Ac,Ou,ul])yc.register(t.type,{moduleFactory:e=>new t(e)})}var p4=k({"packages/ag-charts-community/src/chart/factory/registerInbuiltModules.ts"(){"use strict";O8(),tr(),kc(),Zv(),qv(),Im(),Vp(),wz(),Oz(),hq(),TL(),WL(),KL(),qL(),e2(),a2(),r4(),d4(),fv()}});function Zq(){for(const t of Io.modules){if(t.packageType==="enterprise"&&!x9(t)&&st.errorOnce("Unexpected enterprise module registered: "+t.identifier),t.type==="root"&&t.themeTemplate)for(const e of t.chartTypes)xv.set(e,t.themeTemplate);if(t.type==="series"){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);ha.register(t.identifier,t)}if(t.type==="series-option"&&t.themeTemplate)for(const e of t.seriesTypes)ha.setThemeTemplate(e,t.themeTemplate);if(t.type==="axis-option"&&t.themeTemplate)for(const e of t.axisTypes){const i=yc.getThemeTemplate(e),s=Kt(t.themeTemplate,i);yc.setThemeTemplate(e,s)}t.type==="axis"&&yc.register(t.identifier,t),t.type==="legend"&&yv.register(t.identifier,t)}if(Io.hasEnterpriseModules()){const t=b9();t.length>0&&st.errorOnce("Enterprise modules expected but not registered: ",t)}}var Xq=k({"packages/ag-charts-community/src/chart/factory/setupModules.ts"(){"use strict";R(),tr(),Rt(),fv(),nm(),mv(),jA(),bv()}}),qq=k({"packages/ag-charts-types/src/api/initialStateOptions.ts"(){"use strict"}}),Qq=k({"packages/ag-charts-types/src/api/stateTypes.ts"(){"use strict"}}),Jq=k({"packages/ag-charts-types/src/api/agCharts.ts"(){"use strict"}}),t7=k({"packages/ag-charts-types/src/chart/annotationsOptions.ts"(){"use strict"}}),e7=k({"packages/ag-charts-types/src/chart/axisOptions.ts"(){"use strict"}}),i7=k({"packages/ag-charts-types/src/chart/buttonOptions.ts"(){"use strict"}}),s7=k({"packages/ag-charts-types/src/chart/callbackOptions.ts"(){"use strict"}}),n7=k({"packages/ag-charts-types/src/chart/chartOptions.ts"(){"use strict"}}),a7=k({"packages/ag-charts-types/src/chart/chartToolbarOptions.ts"(){"use strict"}}),o7=k({"packages/ag-charts-types/src/chart/contextMenuOptions.ts"(){"use strict"}}),r7=k({"packages/ag-charts-types/src/chart/crossLineOptions.ts"(){"use strict"}}),l7=k({"packages/ag-charts-types/src/chart/crosshairOptions.ts"(){"use strict"}}),c7=k({"packages/ag-charts-types/src/chart/dropShadowOptions.ts"(){"use strict"}}),g4,h7=k({"packages/ag-charts-types/src/chart/errorBarOptions.ts"(){"use strict";g4=["bar","line","scatter"]}}),u7=k({"packages/ag-charts-types/src/chart/eventOptions.ts"(){"use strict"}}),d7=k({"packages/ag-charts-types/src/chart/gradientLegendOptions.ts"(){"use strict"}}),p7=k({"packages/ag-charts-types/src/chart/icons.ts"(){"use strict"}}),g7=k({"packages/ag-charts-types/src/chart/labelOptions.ts"(){"use strict"}}),f7=k({"packages/ag-charts-types/src/chart/legendOptions.ts"(){"use strict"}}),m7=k({"packages/ag-charts-types/src/chart/localeOptions.ts"(){"use strict"}}),f4,m4,y7=k({"packages/ag-charts-types/src/chart/navigatorOptions.ts"(){"use strict";f4=void 0,m4=void 0,m4=f4}}),x7=k({"packages/ag-charts-types/src/chart/operationOptions.ts"(){"use strict"}}),b7=k({"packages/ag-charts-types/src/chart/polarAxisOptions.ts"(){"use strict"}}),v7=k({"packages/ag-charts-types/src/chart/radiusAxisOptions.ts"(){"use strict"}}),S7=k({"packages/ag-charts-types/src/chart/rangesOptions.ts"(){"use strict"}}),y4,x4,M7=k({"packages/ag-charts-types/src/chart/themeOptions.ts"(){"use strict";y4=void 0,x4=void 0,x4=y4}}),D7=k({"packages/ag-charts-types/src/chart/themeParamsOptions.ts"(){"use strict"}}),WS,HS,US,k7=k({"packages/ag-charts-types/src/chart/tooltipOptions.ts"(){"use strict";WS=(t=>(t.POINTER="pointer",t.NODE="node",t.CHART="chart",t))(WS||{}),HS=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t.TOP_LEFT="top-left",t.CENTER="center",t))(HS||{}),US=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(US||{})}}),I7=k({"packages/ag-charts-types/src/chart/types.ts"(){"use strict"}}),A7=k({"packages/ag-charts-types/src/chart/zoomOptions.ts"(){"use strict"}}),C7=k({"packages/ag-charts-types/src/chartBuilderOptions.ts"(){"use strict"}}),L7=k({"packages/ag-charts-types/src/integratedCharts.ts"(){"use strict"}}),w7=k({"packages/ag-charts-types/src/presets/financial/financialOptions.ts"(){"use strict"}}),T7=k({"packages/ag-charts-types/src/presets/financial/priceVolumeOptions.ts"(){"use strict"}}),b4,v4,S4,M4,N7=k({"packages/ag-charts-types/src/presets/gauge/commonOptions.ts"(){"use strict";b4=void 0,v4=void 0,v4=b4,S4=void 0,M4=void 0,M4=S4}}),O7=k({"packages/ag-charts-types/src/presets/gauge/gaugeOptions.ts"(){"use strict"}}),_7=k({"packages/ag-charts-types/src/presets/gauge/linearGaugeOptions.ts"(){"use strict"}}),E7=k({"packages/ag-charts-types/src/presets/gauge/radialGaugeOptions.ts"(){"use strict"}}),P7=k({"packages/ag-charts-types/src/presets/sparkline/sparklineAxisOptions.ts"(){"use strict"}}),R7=k({"packages/ag-charts-types/src/presets/sparkline/sparklineOptions.ts"(){"use strict"}}),B7=k({"packages/ag-charts-types/src/series/cartesian/areaOptions.ts"(){"use strict"}}),z7=k({"packages/ag-charts-types/src/series/cartesian/barOptions.ts"(){"use strict"}}),F7=k({"packages/ag-charts-types/src/series/cartesian/boxPlotOptions.ts"(){"use strict"}}),j7=k({"packages/ag-charts-types/src/series/cartesian/bubbleOptions.ts"(){"use strict"}}),G7=k({"packages/ag-charts-types/src/series/cartesian/candlestickOptions.ts"(){"use strict"}}),V7=k({"packages/ag-charts-types/src/series/cartesian/cartesianOptions.ts"(){"use strict"}}),W7=k({"packages/ag-charts-types/src/series/cartesian/cartesianSeriesTooltipOptions.ts"(){"use strict"}}),H7=k({"packages/ag-charts-types/src/series/cartesian/cartesianSeriesTypes.ts"(){"use strict"}}),U7=k({"packages/ag-charts-types/src/series/cartesian/commonOptions.ts"(){"use strict"}}),$7=k({"packages/ag-charts-types/src/series/cartesian/coneFunnelOptions.ts"(){"use strict"}}),K7=k({"packages/ag-charts-types/src/series/cartesian/funnelOptions.ts"(){"use strict"}}),Y7=k({"packages/ag-charts-types/src/series/cartesian/heatmapOptions.ts"(){"use strict"}}),Z7=k({"packages/ag-charts-types/src/series/cartesian/histogramOptions.ts"(){"use strict"}}),X7=k({"packages/ag-charts-types/src/series/cartesian/lineOptions.ts"(){"use strict"}}),q7=k({"packages/ag-charts-types/src/series/cartesian/ohlcBaseOptions.ts"(){"use strict"}}),Q7=k({"packages/ag-charts-types/src/series/cartesian/ohlcOptions.ts"(){"use strict"}}),J7=k({"packages/ag-charts-types/src/series/cartesian/rangeAreaOptions.ts"(){"use strict"}}),tQ=k({"packages/ag-charts-types/src/series/cartesian/rangeBarOptions.ts"(){"use strict"}}),eQ=k({"packages/ag-charts-types/src/series/cartesian/scatterOptions.ts"(){"use strict"}}),iQ=k({"packages/ag-charts-types/src/series/cartesian/waterfallOptions.ts"(){"use strict"}}),sQ=k({"packages/ag-charts-types/src/series/flow-proportion/chordOptions.ts"(){"use strict"}}),nQ=k({"packages/ag-charts-types/src/series/flow-proportion/flowProportionOptions.ts"(){"use strict"}}),aQ=k({"packages/ag-charts-types/src/series/flow-proportion/sankeyOptions.ts"(){"use strict"}}),oQ=k({"packages/ag-charts-types/src/series/standalone/pyramidOptions.ts"(){"use strict"}}),rQ=k({"packages/ag-charts-types/src/series/standalone/standaloneOptions.ts"(){"use strict"}}),lQ=k({"packages/ag-charts-types/src/series/hierarchy/hierarchyOptions.ts"(){"use strict"}}),cQ=k({"packages/ag-charts-types/src/series/hierarchy/sunburstOptions.ts"(){"use strict"}}),hQ=k({"packages/ag-charts-types/src/series/hierarchy/treemapOptions.ts"(){"use strict"}}),uQ=k({"packages/ag-charts-types/src/series/interpolationOptions.ts"(){"use strict"}}),dQ=k({"packages/ag-charts-types/src/series/markerOptions.ts"(){"use strict"}}),pQ=k({"packages/ag-charts-types/src/series/polar/donutOptions.ts"(){"use strict"}}),gQ=k({"packages/ag-charts-types/src/series/polar/nightingaleOptions.ts"(){"use strict"}}),fQ=k({"packages/ag-charts-types/src/series/polar/pieOptions.ts"(){"use strict"}}),mQ=k({"packages/ag-charts-types/src/series/polar/polarOptions.ts"(){"use strict"}}),yQ=k({"packages/ag-charts-types/src/series/polar/radarAreaOptions.ts"(){"use strict"}}),xQ=k({"packages/ag-charts-types/src/series/polar/radarLineOptions.ts"(){"use strict"}}),bQ=k({"packages/ag-charts-types/src/series/polar/radarOptions.ts"(){"use strict"}}),vQ=k({"packages/ag-charts-types/src/series/polar/radialBarOptions.ts"(){"use strict"}}),SQ=k({"packages/ag-charts-types/src/series/polar/radialColumnOptions.ts"(){"use strict"}}),MQ=k({"packages/ag-charts-types/src/series/polar/radialOptions.ts"(){"use strict"}}),DQ=k({"packages/ag-charts-types/src/series/seriesOptions.ts"(){"use strict"}}),kQ=k({"packages/ag-charts-types/src/series/topology/mapLineBackgroundOptions.ts"(){"use strict"}}),IQ=k({"packages/ag-charts-types/src/series/topology/mapLineOptions.ts"(){"use strict"}}),AQ=k({"packages/ag-charts-types/src/series/topology/mapMarkerOptions.ts"(){"use strict"}}),CQ=k({"packages/ag-charts-types/src/series/topology/mapShapeBackgroundOptions.ts"(){"use strict"}}),LQ=k({"packages/ag-charts-types/src/series/topology/mapShapeOptions.ts"(){"use strict"}}),wQ=k({"packages/ag-charts-types/src/series/topology/topologyOptions.ts"(){"use strict"}}),m2=k({"packages/ag-charts-types/src/main.ts"(){"use strict";qq(),Qq(),Jq(),t7(),e7(),i7(),s7(),n7(),a7(),o7(),r7(),l7(),c7(),h7(),u7(),d7(),p7(),g7(),f7(),m7(),y7(),x7(),b7(),v7(),S7(),M7(),D7(),k7(),I7(),A7(),C7(),L7(),w7(),T7(),N7(),O7(),_7(),E7(),P7(),R7(),B7(),z7(),F7(),j7(),G7(),V7(),W7(),H7(),U7(),$7(),K7(),Y7(),Z7(),X7(),q7(),Q7(),J7(),tQ(),eQ(),iQ(),sQ(),nQ(),aQ(),oQ(),rQ(),lQ(),cQ(),hQ(),uQ(),dQ(),pQ(),gQ(),fQ(),mQ(),yQ(),xQ(),bQ(),vQ(),SQ(),MQ(),DQ(),kQ(),IQ(),AQ(),CQ(),LQ(),wQ()}});function Xa(t,e){const i={};for(const s of Object.keys(e)){const n=e[s];n!==fn&&Object.hasOwn(t,s)&&(i[s]=n)}return i}var fn,D4=k({"packages/ag-charts-community/src/api/preset/presetUtils.ts"(){"use strict";fn=Symbol("IGNORED_PROP")}});function k4(t){const{enabled:e,mode:i,showArrow:s,range:n,position:a,pagination:o,delay:r,wrapping:l,interaction:c,renderer:h,...u}=t,d=Xa(t,{enabled:e,showArrow:s,range:n,position:a,interaction:c,renderer:h,...u});return{chartTooltipOptions:Xa(t,{enabled:fn,showArrow:fn,range:fn,position:fn,mode:i,pagination:o,delay:r,wrapping:l,...u}),seriesTooltipOptions:d}}function TQ(t){const{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:u,padding:d,subtitle:p,theme:g,title:f,width:x,type:y,cursor:b,nodeClickRange:v,tooltip:M={},value:D,scale:L={},startAngle:A,endAngle:C,highlightStyle:T,segmentation:N,bar:P,needle:O,targets:B,outerRadius:G,innerRadius:V,outerRadiusRatio:W,innerRadiusRatio:H,cornerRadius:$,cornerMode:F,label:j,secondaryLabel:z,spacing:Y,...Z}=t,{chartTooltipOptions:X,seriesTooltipOptions:tt}=k4(M),q=Xa(t,{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:u,padding:d,subtitle:p,theme:g,title:f,tooltip:X,width:x}),it=Xa(t,{needle:O!=null?{enabled:!0,...O}:fn,startAngle:A,endAngle:C,scale:L,type:y,cursor:b,nodeClickRange:v,tooltip:tt,value:D,highlightStyle:T,segmentation:N,bar:P,targets:B,outerRadius:G,innerRadius:V,outerRadiusRatio:W,innerRadiusRatio:H,cornerRadius:$,cornerMode:F,label:j,secondaryLabel:z,spacing:Y,...Z});return"context"in t&&(q.context=t.context),{...q,series:[it]}}function NQ(t){const{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:u,padding:d,subtitle:p,theme:g,title:f,width:x,type:y,cursor:b,nodeClickRange:v,tooltip:M={},value:D,scale:L={},direction:A="vertical",thickness:C,highlightStyle:T,segmentation:N,bar:P,targets:O,cornerRadius:B,cornerMode:G,label:V,...W}=t,{chartTooltipOptions:H,seriesTooltipOptions:$}=k4(M),F=Xa(t,{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:u,padding:d,subtitle:p,theme:g,title:f,tooltip:H,width:x}),j=Xa(t,{scale:L,type:y,cursor:b,nodeClickRange:v,tooltip:$,value:D,direction:A,thickness:C,highlightStyle:T,segmentation:N,bar:P,targets:O,cornerRadius:B,cornerMode:G,label:V,...W});return"context"in t&&(F.context=t.context),{...F,series:[j]}}function I4(t,e){if(e==null)return t;const{targets:i,...s}=e;return t=Kt(t,s),t.targets!=null&&i!=null&&(t.targets=ub(t.targets,i)),t}function OQ(t,e){if(t.listeners){const{nodeClick:i,nodeDoubleClick:s,...n}=t.listeners;t={...t,listeners:{seriesNodeClick:i,seriesNodeDoubleClick:s,...n}}}switch(t.type){case"radial-gauge":const i=I4(t,e);return TQ(i);case"linear-gauge":const s=I4(t,e);return NQ(s);default:return{}}}var _Q=k({"packages/ag-charts-community/src/api/preset/gauge.ts"(){"use strict";m2(),Rt(),D4()}}),dg,vy,Sy,My,Al,Dy,pg,y2=k({"packages/ag-charts-community/src/api/preset/gaugeOptionsDefs.ts"(){"use strict";R(),ju(),zn(),Rt(),dg={fills:De(Gh(2),kt(ts({color:yt,stop:et},"")),Xx),fillMode:lt("continuous","discrete")},vy={value:pt(et),text:J,shape:Pt(lt("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),he),placement:lt("before","after","middle"),spacing:U,size:U,rotation:et,...gt,...ct,...vt},Sy={value:pt(et),text:J,shape:Pt(lt("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),he),placement:lt("inside","outside","middle"),spacing:U,size:U,rotation:et,label:{...pe,spacing:U},...gt,...ct,...vt},My={direction:lt("horizontal","vertical"),cornerMode:lt("container","item"),cornerRadius:U,thickness:U,segmentation:{enabled:K,spacing:U,interval:{values:kt(et),step:et,count:et}},bar:{enabled:K,thickness:U,thicknessRatio:St,...dg,...gt,...ct,...vt},label:{...Il,text:J,spacing:U,avoidCollisions:K,placement:lt("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:ee,...ft(Zt,["listeners"])},Al={...My,...ft(Bn,["listeners"]),type:pt(ke("linear-gauge")),value:pt(et),scale:{min:De(et,Pa("max")),max:De(et,Qo("min")),label:{enabled:K,formatter:he,rotation:et,spacing:U,minSpacing:U,placement:lt("before","after"),avoidCollisions:K,format:Dl,...ve},interval:{values:kt(et),step:et},...dg,...gt,...ct,...vt},targets:es(vy,"target options array")},Al.margin=At(et),Al.defaultColorRange=At(kt(yt)),Al.defaultTarget=At({...vy,value:et,label:{...pe,spacing:et}}),Al.defaultScale=At(Al.scale),Al.scale.defaultFill=At(yt),Dy={outerRadius:U,innerRadius:U,outerRadiusRatio:St,innerRadiusRatio:St,startAngle:et,endAngle:et,spacing:U,cornerMode:lt("container","item"),cornerRadius:U,scale:{min:De(et,Pa("max")),max:De(et,Qo("min")),label:{enabled:K,formatter:he,rotation:et,spacing:U,minSpacing:U,avoidCollisions:K,format:Dl,...ve},interval:{values:kt(et),step:et},...dg,...gt,...ct,...vt},segmentation:{enabled:K,spacing:U,interval:{values:kt(et),step:et,count:et}},bar:{enabled:K,...dg,...gt,...ct,...vt},needle:{enabled:K,spacing:U,radiusRatio:St,...gt,...ct,...vt},label:{text:J,spacing:U,...Il},secondaryLabel:{text:J,...Il},tooltip:ee,...Zt},pg={...Dy,...Bn,type:pt(ke("radial-gauge")),value:pt(et),targets:es(Sy,"target options array")},pg.defaultColorRange=At(kt(yt)),pg.defaultTarget=At({...Sy,value:et,label:{...pe,spacing:et}}),pg.scale.defaultFill=At(yt)}}),xa,ps,x2,kr,Fc,$S,KS,A4,EQ=k({"packages/ag-charts-community/src/api/preset/priceVolumePresetTheme.ts"(){"use strict";si(),xa={stroke:Ke},ps={fill:Kp},x2={color:"white",fill:Ke},kr={color:Ke},Fc={color:$p,fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"}},$S={...Fc,fontSize:{$ref:"fontSize"},color:Xp,fill:Yp,stroke:Zp,strokeWidth:1,divider:{stroke:qp,strokeWidth:1,strokeOpacity:.5}},KS={...xa,background:{fill:Ai,fillOpacity:.2},handle:{...ps},text:{...kr},statistics:{...$S}},A4={line:{...xa,handle:{...ps},text:{...kr}},"horizontal-line":{...xa,handle:{...ps},axisLabel:{...x2},text:{...kr}},"vertical-line":{...xa,handle:{...ps},axisLabel:{...x2},text:{...kr}},"disjoint-channel":{...xa,background:{fill:Ai,fillOpacity:.2},handle:{...ps},text:{...kr}},"parallel-channel":{...xa,background:{fill:Ai,fillOpacity:.2},handle:{...ps},text:{...kr}},"fibonacci-retracement":{...xa,strokes:Up,rangeStroke:Ke,handle:{...ps},text:{...kr,position:"center"},label:{...Fc,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...xa,strokes:Up,rangeStroke:Ke,handle:{...ps},text:{...kr,position:"center"},label:{...Fc,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...xa,...Fc,color:{$ref:"textColor"},handle:{...ps},fill:Ai,fillOpacity:.2},comment:{...Fc,color:"white",fontWeight:700,handle:{...ps},fill:Ke},note:{...Fc,color:ig,fill:Ke,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...ps},background:{fill:tg,stroke:eg,strokeWidth:1}},text:{...Fc,handle:{...ps}},arrow:{...xa,handle:{...ps},text:{...kr}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...ps,stroke:Ke}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...ps,stroke:Ke}},"date-range":{...KS},"price-range":{...KS},"date-price-range":{...KS},"quick-date-price-range":{up:{...xa,fill:Ai,fillOpacity:.2,handle:{...ps},statistics:{...$S,color:"#fff",fill:Ai,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...xa,stroke:Jp,fill:Qp,fillOpacity:.2,handle:{...ps,stroke:Jp},statistics:{...$S,color:"#fff",fill:Qp,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}}}});function PQ(t,e,i){const{dateKey:s="date",highKey:n="high",openKey:a="open",lowKey:o="low",closeKey:r="close",volumeKey:l="volume",chartType:c="candlestick",navigator:h=!1,volume:u=!0,rangeButtons:d=!0,statusBar:p=!0,toolbar:g=!0,zoom:f=!0,sync:x=!1,theme:y,data:b,...v}=t,M=BQ(c,s,n,o,a,r),D=RQ(i,a,r,u,l),A={navigator:{enabled:h,...u?{miniChart:{enabled:h,series:[{type:"line",xKey:s,yKey:l,stroke:zm,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},C={annotations:{enabled:g,optionsToolbar:{enabled:g},snap:!0,toolbar:{enabled:g,buttons:T4,padding:0},data:b,xKey:s,volumeKey:u?l:void 0}},T=p?{statusBar:{enabled:!0,data:b,highKey:n,openKey:a,lowKey:o,closeKey:r,volumeKey:u?l:void 0}}:null,N={zoom:{enabled:f,autoScaling:{enabled:!0},enableIndependentAxes:!0}},P={ranges:{enabled:d}},O=x?{sync:{enabled:x,nodeInteraction:!0,zoom:!0}}:null,B=u?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:typeof y=="string"?y:"ag-financial",...Kt(typeof y=="object"?y:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:g},annotations:{...A4},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...L4(c,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}})}},candlestick:{series:{...L4(c,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...D,...M],axes:[{type:"number",position:"right",keys:[a,r,n,o],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...B,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:b,...C,...A,...T,...N,...P,...O,...v}}function RQ(t,e,i,s,n){return s?[{type:"bar",xKey:"date",yKey:n,tooltip:{enabled:!1},itemStyler({datum:a}){const{up:o,down:r}=t().palette;return{fill:a[e]<a[i]?o?.fill:r?.fill}},focusPriority:1,fastDataProcessing:!0,highlight:{enabled:!1}}]:[]}function BQ(t,e,i,s,n,a){const o={xKey:e,openKey:n,closeKey:a,highKey:i,lowKey:s},r={xKey:e,yKey:a},l={pickOutsideVisibleMinorAxis:!0};switch(t??"candlestick"){case"ohlc":return zQ(l,o);case"line":case"step-line":return FQ(l,r);case"hlc":return jQ(l,r,o);case"high-low":return GQ(l,o);case"candlestick":case"hollow-candlestick":return C4(l,o);default:return st.warnOnce(`unknown chart type: ${t}; expected one of: ${w4.join(", ")}`),C4(l,o)}}function zQ(t,e){return[{type:"ohlc",focusPriority:0,...t,...e}]}function FQ(t,e){return[{type:"line",focusPriority:0,...t,...e}]}function jQ(t,e,{xKey:i,highKey:s,closeKey:n,lowKey:a}){return[{type:b2,focusPriority:0,...t,xKey:i,yHighKey:s,yLowKey:n,fill:Om,stroke:Tm},{type:b2,focusPriority:0,...t,xKey:i,yHighKey:n,yLowKey:a,fill:_m,stroke:Nm},{type:"line",...t,...e}]}function GQ(t,{xKey:e,highKey:i,lowKey:s}){return[{type:"range-bar",...t,xKey:e,yHighKey:i,yLowKey:s,fill:Pm,stroke:Em,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0}]}function C4(t,e){return[{type:"candlestick",focusPriority:0,...t,...e}]}function L4(t,e){return e[t]??e.default}var w4,T4,b2,VQ=k({"packages/ag-charts-community/src/api/preset/priceVolumePreset.ts"(){"use strict";R(),si(),fi(),Rt(),EQ(),w4=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],T4=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}],b2="range-area"}});function WQ(t,e){return typeof t=="string"?{...e,baseTheme:t}:t!=null?{...t,baseTheme:S2(t.baseTheme,e)}:e}function N4(t){if(Array.isArray(t)&&t.length!==0){const e=t[0];if(typeof e=="number")return{data:t.map((s,n)=>({x:n,y:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(e))return{data:t.map(s=>({x:s[0],y:s[1],datum:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}return{data:t}}function HQ(t){switch(t?.type){case"number":{const{type:n,min:a,max:o,reverse:r}=t;return Xa(t,{type:n,reverse:r,min:a,max:o})}case"time":{const{type:n,min:a,max:o,reverse:r}=t;return Xa(t,{type:n,reverse:r,min:a,max:o})}case"category":default:const{paddingInner:e,paddingOuter:i,reverse:s}=t??{};return Xa({...t,type:"category"},{type:"category",reverse:s,paddingInner:e,paddingOuter:i})}}function UQ(t,e,i){const s={};return t?.stroke!=null&&(s.style=[{stroke:t?.stroke}],s.enabled??(s.enabled=!0)),t?.strokeWidth!=null&&(s.width=t?.strokeWidth,s.enabled??(s.enabled=!0)),i.type==="bar"&&i.direction!=="horizontal"&&(s.enabled??(s.enabled=!0)),t?.visible!=null&&(s.enabled=t.visible),s.enabled??(s.enabled=e),s}function $Q(t){const{background:e,container:i,height:s,listeners:n,locale:a,minHeight:o,minWidth:r,overrideDevicePixelRatio:l,padding:c,width:h,theme:u,data:d,crosshair:p,axis:g,min:f,max:x,tooltip:y,context:b,styleNonce:v,...M}=t,D=Xa(t,{background:e,container:i,height:s,listeners:n,locale:a,minHeight:o,minWidth:r,overrideDevicePixelRatio:l,padding:c,width:h,styleNonce:v,tooltip:fn,context:fn,data:fn,crosshair:fn,axis:fn,min:fn,max:fn,theme:fn}),{data:L,series:[A]=[],datumKey:C}=N4(d),T=M;A!=null&&Object.assign(T,A),T.tooltip={...y,renderer:E4(b,y,C)},D.theme=S2(u,_4),D.data=L,D.series=[T];const N=T.type!=="bar"||T.direction!=="horizontal",[P,O]=N?["bottom","left"]:["left","bottom"],B={...HQ(g),position:P,...Xa(t,{crosshair:p})},G={type:"number",gridLine:UQ(g,!1,t),position:O,...Xa(t,{min:f,max:x})};return D.axes=N?[G,B]:[B,G],D}var v2,YS,ky,ZS,O4,_4,S2,E4,KQ=k({"packages/ag-charts-community/src/api/preset/sparkline.ts"(){"use strict";si(),EC(),D4(),v2={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:Bm,lineDash:[0],label:{enabled:!1}}},YS={...v2,nice:!1},ky={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},ZS={style:[{stroke:{$ref:"gridLineColor"}}],width:2},O4={number:{gridLine:ZS},time:{gridLine:ZS},category:{gridLine:ZS}},_4={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...YS,interval:{values:[0]}},log:{...YS},time:{...YS},category:{...v2}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...ky,position:{...ky.position,anchorTo:"pointer"},range:"nearest"},axes:O4},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:ky},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:ky}}},S2=dn(WQ),E4=dn((t,e,i)=>s=>{const n=s.datum[s.xKey],a=s.datum[s.yKey],o=i!=null?s.datum[i]:s.datum,r=e?.renderer?.({context:t,datum:o,xValue:n,yValue:a});if(typeof r=="string")return r;const l=r?.content??a.toFixed(2);return r?.title?{heading:void 0,title:void 0,data:[{label:r.title,value:l}]}:{heading:void 0,title:l,data:[]}})}}),P4,XS,qS,QS,JS,R4,B4,z4,YQ=k({"packages/ag-charts-community/src/api/preset/presetModules.ts"(){"use strict";R(),zn(),LL(),jL(),QL(),Rt(),_Q(),y2(),VQ(),KQ(),P4={chartType:lt("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:J,openKey:J,highKey:J,lowKey:J,closeKey:J,volumeKey:J,navigator:K,volume:K,rangeButtons:K,statusBar:K,toolbar:K,zoom:K,sync:K,theme:Tt,container:Tt,width:Tt,height:Tt,minWidth:Tt,minHeight:Tt,listeners:Tt,initialState:Tt,title:Tt,data:Ws},XS={theme:Tt,container:Tt,animation:Tt,background:Tt,contextMenu:Tt,listeners:Tt,locale:Tt,width:Tt,height:Tt,minWidth:Tt,minHeight:Tt,title:Tt,subtitle:Tt,footnote:Tt,padding:Tt,tooltip:{...ee,...It.tooltip}},XS.overrideDevicePixelRatio=At(U),qS=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],QS={visible:K,reverse:K,stroke:yt,strokeWidth:U},JS={context:Tt,tooltip:Tt,theme:Tt,background:Tt,container:Tt,width:Tt,height:Tt,minWidth:Tt,minHeight:Tt,padding:Tt,listeners:Tt,locale:Tt,data:Tt,styleNonce:J,axis:jh({number:{...QS,min:De(et,Pa("max")),max:De(et,Qo("min"))},category:{...QS,paddingInner:St,paddingOuter:St},time:{...QS,min:De(Pt(et,Ea),Pa("max")),max:De(Pt(et,Ea),Qo("min"))}},"axis options","category"),min:De(et,Pa("max")),max:De(et,Qo("min")),crosshair:{enabled:K,snap:K,...ct,...vt},xKey:J,yKey:J},R4={type:"preset",name:"price-volume",enterprise:!0,options:P4,create:PQ},B4={type:"preset",name:"gauge-preset",enterprise:!0,options:jh({"linear-gauge":{...ft(Al,["type"]),...XS},"radial-gauge":{...ft(pg,["type"]),...XS}},"gauge options"),create:OQ},z4={type:"preset",name:"sparkline",options:jh({area:{...JS,...ft(CL,qS)},bar:{...JS,...ft(hg,qS)},line:{...JS,...ft(py,qS)}},"sparkline options"),create:$Q,processData:N4}}}),F4,Iy,j4,ZQ=k({"packages/ag-charts-community/src/chart/cartesianChart.ts"(){"use strict";R(),Ls(),kc(),Wv(),ZR(),Rn(),F4=["top","right","bottom","left"],Iy=class x5 extends vm{constructor(e,i){super(e,i),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(e,i){super.onAxisChange(e,i),this.syncAxisChanges(e,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(e){const{seriesRoot:i,annotationRoot:s}=this;i.setClipRect(e),s.setClipRect(e)}async processData(){await super.processData(),this.syncStatus==="init"&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){await super.processDomains();for(const e of this.axes){const i=await this.getSyncedDomain(e);i!=null&&e.setDomains(i)}}performLayout(e){const{seriesRoot:i,annotationRoot:s}=this,{clipSeries:n,seriesRect:a,visible:o}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=o,this.seriesRect=a,this.animationRect=e.layoutBox;const{x:r,y:l}=a;if(e.width!==this.lastLayoutWidth||e.height!==this.lastLayoutHeight)for(const d of[i,s])d.translationX=Math.floor(r),d.translationY=Math.floor(l);else{const{translationX:d,translationY:p}=i;nl(this.id,"seriesRect",this.ctx.animationManager,[i,s],{translationX:d,translationY:p},{translationX:Math.floor(r),translationY:Math.floor(l)},{phase:"update"})}this.lastLayoutWidth=e.width,this.lastLayoutHeight=e.height;const c=a.clone().grow(this.seriesArea.padding),h=this.seriesArea.clip||n?c:void 0,{lastUpdateClipRect:u}=this;this.lastUpdateClipRect=h,this.ctx.animationManager.isActive()&&u!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:u,to:c,onUpdate:d=>this.setRootClipRects(d),onComplete:()=>this.setRootClipRects(h)}):this.setRootClipRects(h),this.ctx.layoutManager.emitLayoutComplete(e,{axes:this.axes.map(d=>d.getLayoutState()),series:{visible:o,rect:a,paddedRect:c},clipSeries:n})}updateAxes(e){const{clipSeries:i,seriesRect:s,overflows:n}=this.resolveAxesLayout(e);for(const a of this.axes)a.update(),a.setCrossLinesVisible(!n),this.clipAxis(a,s,e);return{clipSeries:i,seriesRect:s,visible:!n}}resolveAxesLayout(e){let i,s,n=0;const a=10;do if(s=i??this.getDefaultState(),i=this.updateAxesPass(new Map(s.axisAreaWidths),e.clone()),n++>a){st.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,s));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(e,i){const s=new Map,n={};let a=!1,o=!1;for(const v of F4){const M=this.seriesArea.padding[v],D=this.axes.findLast(L=>L.position===v);D?D.seriesAreaPadding=M:i.shrink(M,v)}const r=(e.get("left")??0)+(e.get("right")??0),l=(e.get("top")??0)+(e.get("bottom")??0),c=this.buildCrossLinePadding(e),h=c.left+c.right,u=c.top+c.bottom;i.width<=r+h||i.height<=l+u?a=!0:i.shrink(c);const d=i.clone().shrink(Object.fromEntries(e));for(const v of this.axes){const{position:M="left",direction:D}=v;this.sizeAxis(v,d,M);const L=D==="y",{primaryTickCount:A,bbox:C}=v.calculateLayout(v.nice?n[D]:void 0,this.padding);n[D]??(n[D]=A),o||(o=v.dataDomain.clipped||v.visibleRange[0]>0||v.visibleRange[1]<1),s.set(v.id,Math.ceil(v.thickness??(L?C?.width:C?.height)??0))}const p=Jx(this.axes,v=>v.position??"left"),{width:g,height:f,pixelRatio:x}=this.ctx.scene,y=new Map,b=new Map;for(const[v,M]of Ba(p)){let L=v==="left"||v==="right"?f%x:g%x,A=0;for(const C of M??[]){b.set(C.id,L);const T=s.get(C.id)??0;A=Math.max(A,L+T),C.layoutConstraints.stacked&&(L+=T+x5.AxesPadding)}y.set(v,Math.ceil(A))}for(const[v,M]of Ba(p))this.positionAxes({axes:M??[],position:v,axisWidths:s,axisOffsets:b,axisAreaWidths:y,axisBound:i,seriesRect:d});return{clipSeries:o,seriesRect:d,axisAreaWidths:y,overflows:a}}buildCrossLinePadding(e){const i={top:0,right:0,bottom:0,left:0};this.axes.forEach(s=>{const{position:n,label:a}=s;s.crossLines?.forEach(o=>{var r;o instanceof Ys&&(o.position=n??"top",(r=o.label).parallel??(r.parallel=a.parallel)),o.calculatePadding?.(i)})});for(const[s,n=0]of Ba(i))i[s]=Math.max(n-(e.get(s)??0),0);return i}clampToOutsideSeriesRect(e,i,s,n){const a=s==="x"?e.x:e.y,o=s==="x"?e.width:e.height;return n===1?Math.min(i,a+o):Math.max(i,a)}async getSyncedDomain(e){const i=this.modulesManager.getModule("sync");if(i?.enabled)return await i.getSyncedDomain(e)}syncAxisChanges(e,i){const s=this.modulesManager.getModule("sync");if(!s?.enabled)return;const n=new Set(i??[]);for(const a of e)n.delete(a);for(const a of n)s.removeAxis(a)}sizeAxis(e,i,s){const n=e instanceof cl,a=s==="left"||s==="right",{width:o,height:r}=i,l=a?r:o;let c=0,h=l,{min:u,max:d}=this.ctx.zoomManager.getAxisZoom(e.id);const{width:p,unit:g,align:f}=e.layoutConstraints;g==="px"?h=c+p:h=h*p/100,f==="end"&&(c=l-(h-c),h=l),a&&(n?[u,d]=[1-d,1-u]:[c,h]=[h,c]),e.range=[c,h],e.visibleRange=[u,d],e.gridLength=a?o:r}positionAxes(e){const{axes:i,axisBound:s,axisWidths:n,axisOffsets:a,axisAreaWidths:o,seriesRect:r,position:l}=e,c=o.get(l)??0;let h="x",u="y",d=1;(l==="top"||l==="bottom")&&(h="y",u="x");let p=s[h];(l==="right"||l==="bottom")&&(d=-1,p+=h==="x"?s.width:s.height);for(const g of i){const f=o.get(u==="x"?"left":"top")??0,x=n.get(g.id)??0,y=a.get(g.id)??0;g.gridPadding=c-y-x,g.translation[u]=s[u]+f,g.translation[h]=this.clampToOutsideSeriesRect(r,p+d*(y+x),h,d)}}shouldFlipXY(){return this.series.every(e=>e instanceof Ml&&e.shouldFlipXY())}getDefaultState(){const e=new Map;if(this.lastAreaWidths)for(const{position:i="left"}of this.axes){const s=this.lastAreaWidths.get(i);s!=null&&e.set(i,s)}return{axisAreaWidths:e,clipSeries:!1,overflows:!1}}isLayoutStable(e,i){if(i.overflows!==e.overflows||i.clipSeries!==e.clipSeries)return!1;for(const s of e.axisAreaWidths.keys())if(!i.axisAreaWidths.has(s))return!1;for(const[s,n]of i.axisAreaWidths.entries()){const a=e.axisAreaWidths.get(s);if((n!=null||a!=null)&&n!==a)return!1}return!0}clipAxis(e,i,s){const n=Math.ceil(e.gridLine?.width??0),a=Math.ceil(e.line?.width??0);let{width:o,height:r}=i;switch(o+=e.direction==="x"?n:a,r+=e.direction==="y"?n:a,e.clipGrid(i.x,i.y,o,r),e.position){case"left":case"right":e.clipTickLines(s.x,i.y-n,s.width+n,i.height+n*2);break;case"top":case"bottom":e.clipTickLines(i.x-n,s.y,i.width+n*2,s.height+n);break}}},Iy.className="CartesianChart",Iy.type="cartesian",Iy.AxesPadding=15,j4=Iy}}),jc,M2,D2,G4,V4,W4,H4,U4,k2=k({"packages/ag-charts-community/src/chart/chartOptionsDefs.ts"(){"use strict";R(),zn(),jc={mode:At(lt("integrated","standalone")),container:$x,theme:Tt,series:Ws,annotations:Tt,navigator:Tt,initialState:{chartType:J,annotations:Tt,legend:es({visible:K,seriesId:J,itemId:J,legendItemName:J},"legend state array"),zoom:Tt}},M2={...It,...jc,axes:Tt,data:Ws},D2={...It,...jc,axes:Tt,data:Ws},G4={...It,...jc,data:Ws,topology:Nk},V4={...It,...jc,data:Ws},W4={...It,...jc,data:Ws},H4={...It,...jc,data:Ws,nodes:Ws},U4={...It,...jc,data:Ws}}}),$4,K4,Y4,XQ=k({"packages/ag-charts-community/src/chart/cartesianChartModule.ts"(){"use strict";R(),Rt(),ZQ(),k2(),ku(),$4=new Set(["number","log","time"]),K4=t=>Se(t)&&!$4.has(t.type),Y4={type:"chart",name:"cartesian",options:M2,detect:dC,create(t,e){return new j4(t,e)},validate(t,e,i){const s=[];t?.series?.[0]?.type==="histogram"&&t?.axes?.some(K4)&&(s.push(new ac("invalid","only continuous axis types when histogram series is used",t.axes,i,"axes")),t=ft(t,["axes"]));const n=Vs(t,e,i);return n.invalid.push(...s),n}}}}),gg,Z4,X4,q4,Q4,J4,qQ=k({"packages/ag-charts-community/src/chart/enterpriseChartModules.ts"(){"use strict";ku(),gg=()=>{throw new Error("Enterprise module placeholder cannot be initialised")},Z4={type:"chart",name:"flow-proportion",placeholder:!0,options:{},detect:fB,create:gg},X4={type:"chart",name:"gauge",placeholder:!0,options:{},detect:gC,create:gg},q4={type:"chart",name:"hierarchy",placeholder:!0,options:{},detect:pB,create:gg},Q4={type:"chart",name:"standalone",placeholder:!0,options:{},detect:pC,create:gg},J4={type:"chart",name:"topology",placeholder:!0,options:{},detect:gB,create:gg}}}),Hu,tj=k({"packages/ag-charts-community/src/chart/axis/polarAxis.ts"(){"use strict";mt(),rC(),aC(),Hu=class extends Rv{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}layoutCrossLines(){const t=this.label.getSideFlag(),e=this.isAnySeriesActive(),{rotation:i,parallelFlipRotation:s,regularFlipRotation:n}=this.calculateRotations();this.crossLines.forEach(a=>{a.sideFlag=-t,a.direction=i===-Math.PI/2?"angle":"radius",a.parallelFlipRotation=s,a.regularFlipRotation=n,a.calculateLayout?.(e,this.reverse)})}updatePosition(){super.updatePosition();const t=Math.floor(this.translation.x),e=Math.floor(this.translation.y);this.tickLineGroup.translationX=t,this.tickLineGroup.translationY=e,this.tickLabelGroup.translationX=t,this.tickLabelGroup.translationY=e,this.crossLineRangeGroup.translationX=t,this.crossLineRangeGroup.translationY=e,this.crossLineLineGroup.translationX=t,this.crossLineLineGroup.translationY=e,this.crossLineLabelGroup.translationX=t,this.crossLineLabelGroup.translationY=e,this.tickLabelGroupSelection.each(Ev())}computeLabelsBBox(t,e){return null}computeRange(){}getAxisLinePoints(){}},S([I],Hu.prototype,"shape",2),S([I],Hu.prototype,"innerRadiusRatio",2)}});function QQ(t){return t instanceof my}function JQ(t){return t instanceof Hu}var t0,tJ=k({"packages/ag-charts-community/src/chart/polarChart.ts"(){"use strict";R(),Ft(),fI(),tj(),Wv(),jS(),t0=class extends vm{constructor(t,e){super(t,e),this.padding=new Xr(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(t){const{layoutBox:e}=t;e.shrink(this.seriesArea.padding.toJson());const i=e.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach(s=>s.update()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(t,e,i,s){const n=this.axes.find(l=>l.direction==="angle"),a=this.axes.find(l=>l.direction==="radius");if(!(n instanceof Hu)||!(a instanceof Hu))return;const o=n.scale,r=a.innerRadiusRatio;n.innerRadiusRatio=r,n.computeRange(),n.gridLength=s,a.gridAngles=o.ticks({nice:n.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>o.convert(l)),a.gridRange=n.range,a.range=[s,s*r],[n,a].forEach(l=>{l.translation.x=t.x+e,l.translation.y=t.y+i,l.calculateLayout()})}async computeCircle(t){const e=this.series.filter(QQ),i=this.axes.filter(JQ),s=(c,h,u)=>{this.updateAxes(t,c,h,u),e.forEach(p=>{p.centerX=c,p.centerY=h,p.radius=u});const d=e.filter(p=>p.type==="donut"||p.type==="pie");if(d.length>1){const p=d.map(g=>{const f=g.getInnerRadius();return{series:g,innerRadius:f}}).sort((g,f)=>g.innerRadius-f.innerRadius);p.at(-1).series.surroundingRadius=void 0;for(let g=0;g<p.length-1;g++)p[g].series.surroundingRadius=p[g+1].innerRadius}},n=t.width/2,a=t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let r=o;s(n,a,r);const l=async({hideWhenNecessary:c=!1}={})=>{const h=[];for(const p of Vh(i,e)){const g=await p.computeLabelsBBox({hideWhenNecessary:c},t);g&&h.push(g)}if(h.length===0){s(n,a,o);return}const u=ut.merge(h),d=this.refineCircle(u,r,t);s(d.centerX,d.centerY,d.radius),r=d.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const c of Vh(i,e))await c.computeLabelsBBox({hideWhenNecessary:!0},t);return{radius:r,centerX:n,centerY:a}}refineCircle(t,e,i){const n=-e,a=-e,o=e,r=e;let l=Math.max(0,n-t.x),c=Math.max(0,a-t.y),h=Math.max(0,t.x+t.width-o),u=Math.max(0,t.y+t.height-r);l=h=Math.max(l,h),c=u=Math.max(c,u);const d=i.width-l-h,p=i.height-c-u;let g=Math.min(d,p)/2;const f=.5*i.width/2,x=.5*i.height/2,y=Math.min(f,x);if(g<y){g=y;const M=l+h,D=c+u;if(2*g+D>i.height){const L=i.height-2*g;Math.min(c,u)*2>L?(c=L/2,u=L/2):c>u?c=L-u:u=L-c}if(2*g+M>i.width){const L=i.width-2*g;Math.min(l,h)*2>L?(l=L/2,h=L/2):l>h?l=L-h:h=L-l}}const b=l+2*g+h,v=c+2*g+u;return{centerX:(i.width-b)/2+l+g,centerY:(i.height-v)/2+c+g,radius:g}}},t0.className="PolarChart",t0.type="polar"}}),ej,eJ=k({"packages/ag-charts-community/src/chart/polarChartModule.ts"(){"use strict";R(),Rt(),k2(),ku(),tJ(),ej={type:"chart",name:"polar",options:D2,detect:dB,create(t,e){return new t0(t,e)},validate(t,e,i){const s=[],n=t?.series?.[0]?.type;(n==="pie"||n==="donut")&&t?.axes&&(s.push(new Df([],t.axes,i,"axes")),t=ft(t,["axes"]));const a=Vs(t,e,i);return a.invalid.push(...s),a}}}}),Uu,$u,Ir,Ku,Yu,Gc,I2,ij,sj,nj,aj,oj,rj,lj,cj=k({"packages/ag-charts-community/src/module/axisModules.ts"(){"use strict";R(),ju(),kc(),Zv(),qv(),Im(),Vp(),wz(),il(),Uu={...Mr,..._c(et),type:pt(ke("number")),label:vS,crosshair:Oc(!0)},$u={...Mr,..._c(et),type:pt(ke("log")),base:De(If,te(t=>t!==1,"not equal to 1")),label:vS,crosshair:Oc(!0)},Ir={...Mr,..._c(Pt(et,Ea),!0),type:pt(ke("time")),label:rg,parentLevel:Jm,crosshair:Oc(!0)},Ir.paddingInner=U,Ir.paddingOuter=U,Ir.groupPaddingInner=U,Ku={...Mr,type:pt(ke("category")),label:og,paddingInner:St,paddingOuter:St,groupPaddingInner:St,crosshair:Oc()},Yu={...Mr,type:pt(ke("grouped-category")),label:og,crosshair:Oc(),paddingInner:St,groupPaddingInner:St,depthOptions:es({label:{enabled:K,avoidCollisions:K,rotation:et,spacing:et,...ve},tick:{enabled:K,stroke:yt,width:U}},"depth options objects array")},Gc={...Mr,..._c(Pt(et,Ea),!0),type:pt(ke("unit-time")),unit:Pt(Zx(ki),bS),label:rg,parentLevel:Jm,paddingInner:St,paddingOuter:St,groupPaddingInner:St,crosshair:Oc(!0)},I2=(t,e)=>{const i={};for(const s of new Set([...Object.keys(t),...Object.keys(e)])){const n=t[s],a=e[s];Me(n)&&Me(a)?i[s]=I2(n,a):n!=null&&a!=null&&n!==a?i[s]=Pt(n,a):i[s]=n??a}return i},ij=I2(Ir,Gc),sj={type:"axis",name:"number",chartType:"cartesian",options:Uu,create:t=>new mr(t)},nj={type:"axis",name:"log",chartType:"cartesian",options:$u,create:t=>new Ou(t)},aj={type:"axis",name:"time",chartType:"cartesian",options:ij,create:t=>new ga(t)},oj={type:"axis",name:"category",chartType:"cartesian",options:Ku,create:t=>new cl(t)},rj={type:"axis",name:"grouped-category",chartType:"cartesian",options:Yu,create:t=>new Ac(t)},lj={type:"axis",name:"unit-time",chartType:"cartesian",options:Gc,create:t=>new ul(t)}}}),hj,uj,dj,iJ=k({"packages/ag-charts-community/src/main-modules.ts"(){"use strict";YQ(),XQ(),qQ(),eJ(),TL(),WL(),KL(),qL(),e2(),a2(),r4(),d4(),cj(),hj=[Y4,sj,nj,aj,oj,rj,lj,wL,VL,$L,XL,t2,n2],uj=[ej,o4,u4],dj=[...hj,...uj,Z4,X4,q4,Q4,J4,R4,B4,z4]}}),Cl,A2=k({"packages/ag-charts-community/src/module/enterpriseModule.ts"(){"use strict";Cl={isEnterprise:!1}}});function pj(t,e){let i=[];const s=gC(t),n=rl(t),a=n?ze.get(n):"unknown";for(const o of Cp)if(!(a!=="unknown"&&!o.chartTypes.includes(a))){if(o.type==="root"||o.type==="legend"){const r=t[o.optionsKey];if(r==null)continue;o.optionsInnerKey?r[o.optionsInnerKey]&&(i.push(`${o.optionsKey}.${o.optionsInnerKey}`),delete r[o.optionsInnerKey]):(i.push(o.optionsKey),delete t[o.optionsKey])}else if(o.type==="axis"){if(!("axes"in t)||!zt(t.axes)||!t.axes?.some(r=>r.type===o.identifier))continue;i.push(`axis[type=${o.identifier}]`),t.axes=t.axes.filter(r=>r.type!==o.identifier)}else if(o.type==="axis-option"){if(!("axes"in t)||!zt(t.axes)||!t.axes?.some(r=>r[o.optionsKey]))continue;i.push(`axis.${o.optionsKey}`),t.axes.forEach(r=>{r[o.optionsKey]&&delete r[o.optionsKey]})}else if(o.type==="series"){if(o.community||!zt(t.series)||!t.series?.some(r=>r.type===o.identifier))continue;i.push(`series[type=${o.identifier}]`),t.series=t.series.filter(r=>r.type!==o.identifier)}else if(o.type==="series-option"){if(!zt(t.series)||!t.series?.some(r=>r[o.optionsKey]))continue;i.push(`series.${o.optionsKey}`),t.series.forEach(r=>{r[o.optionsKey]&&delete r[o.optionsKey]})}}if(i.length&&!e){s&&(i=["AgCharts.createGauge"]);let o="ag-charts-enterprise",r="https://www.ag-grid.com/charts/javascript/installation/";t.mode==="integrated"&&(o="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",r="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),st.warnOnce([`unable to use these enterprise features as '${o}' has not been loaded:`,"",...i,"",`See: ${r}`].join(`
`))}}function sJ(t){const e="mode"in t&&t.mode==="integrated";for(const i of Io.byType("root","legend")){const s=t[i.optionsKey],n=s!=null&&s.enabled===!1,a=!("removable"in i)||i.removable===!0||i.removable==="standalone-only"&&!e;n&&a&&delete t[i.optionsKey]}}var nJ=k({"packages/ag-charts-community/src/chart/factory/processEnterpriseOptions.ts"(){"use strict";R(),tr(),ku(),nm(),mv()}});function gj(t){return t?.up||t?.down||t?.neutral?"user-full":t?.fills||t?.strokes?"user-indexed":"inbuilt"}var fj=k({"packages/ag-charts-community/src/module/coreModulesTypes.ts"(){"use strict"}});function mj(t){return yj[t]===!0}var e0,i0,yj,xj,mn,bj,Fn,qa,Ll=k({"packages/ag-charts-community/src/chart/themes/chartTheme.ts"(){"use strict";R(),fj(),Xh(),Ln(),Rt(),fv(),nm(),jA(),bv(),RS(),si(),fi(),e0="white",i0={get cartesian(){return{seriesTypes:ze.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:ze.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:ze.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:ze.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:ze.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:ze.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:ze.gaugeTypes,commonOptions:[]}}},yj={"radial-gauge":!0,"linear-gauge":!0},xj={millisecond:"%H:%M:%S.L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %B",month:"%B",year:"%Y"},mn={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},bj=Object.values(i0).reduce((t,{commonOptions:e})=>t.concat(e),[]),Fn=class Rx{static getDefaultColors(){return{fills:ni,fillsFallback:Object.values(ni),strokes:Fo,sequentialColors:ma(ni),divergingColors:[ni.ORANGE,ni.YELLOW,ni.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:ue.interpolate([ue.fromHexString(ni.BLUE),ue.fromHexString("#cbdef5")],8).map(e=>e.toString()),secondDivergingColors:[ni.GREEN,ni.YELLOW,ni.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:ni.GREEN,stroke:Fo.GREEN},down:{fill:ni.RED,stroke:Fo.RED},neutral:{fill:ni.GRAY,stroke:Fo.GRAY},altUp:{fill:ni.BLUE,stroke:Fo.BLUE},altDown:{fill:ni.ORANGE,stroke:Fo.ORANGE},altNeutral:{fill:ni.GRAY,stroke:Fo.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:[.675]},backgroundColor:e0,borderColor:{$foregroundBackgroundMix:[.818]},foregroundColor:"#464646",fontFamily:"Verdana, sans-serif",fontSize:12,fontWeight:400,gridLineColor:{$foregroundBackgroundAccentMix:[.93,.085]},padding:20,subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:[.975]},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:"#181d1f",chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},inputBackgroundColor:{$ref:"backgroundColor"},inputTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"backgroundColor"}}}static getAxisDefaults(e,{title:i,time:s}){const n=s==="modern"?xj:void 0;return Kt(e,i&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},s!=="off"&&{label:{format:{millisecond:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.millisecond,n?.millisecond]},second:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.second,n?.second]},minute:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.minute,n?.minute]},hour:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.hour,n?.hour]},day:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.day,n?.day]},month:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.month,n?.month]},year:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},mn.year,n?.year]}}},parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},avoidCollisions:{$path:"../../label/avoidCollisions"},format:{millisecond:{$path:["../../../label/format/millisecond",mn.millisecond]},second:{$path:["../../../label/format/second",mn.second]},minute:{$path:["../../../label/format/minute",mn.minute]},hour:{$path:["../../../label/format/hour",mn.hour]},day:{$path:["../../../label/format/day",mn.day]},month:{$path:["../../../label/format/month",mn.month]},year:{$path:["../../../label/format/year",mn.year]}}},tick:{enabled:{$path:"../../tick/enabled"},size:{$path:"../../tick/size"},width:{$path:"../../tick/width"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,style:[{stroke:{$ref:"gridLineColor"},lineDash:[]}]},crossLines:{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.1,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"backgroundColor"}},padding:{top:{$ref:"padding"},right:{$ref:"padding"},bottom:{$ref:"padding"},left:{$ref:"padding"}},seriesArea:{padding:{top:0,right:0,bottom:0,left:0}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.4166666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:fl,textAlign:ml},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:fl,textAlign:ml},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:fl,textAlign:ml},legend:{position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"right"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}}},tooltip:{enabled:!0,darkTheme:Bu,delay:0,pagination:!1},overlays:{darkTheme:Bu},listeners:{}}}constructor(e={}){const{overrides:i,palette:s,params:n}=Oe(e),a=this.createChartConfigPerChartType(this.getDefaults()),o={};i&&this.mergeOverrides(a,o,i);const{fills:r,strokes:l,sequentialColors:c,...h}=this.getDefaultColors();this.palette=Yh(Kt(s,{fills:Object.values(r),strokes:Object.values(l),sequentialColors:Object.values(c),...h})),this.paletteType=gj(s),this.params=Kt(n,this.getPublicParameters()),this.config=Yh(this.templateTheme(a)),this.presets=Yh(o)}mergeOverrides(e,i,s){for(const{seriesTypes:n,commonOptions:a}of Object.values(i0)){const o={...s.common};for(const r of bj)a.includes(r)||delete o[r];for(const r of n){const l=r;mj(l)||(e[l]=Kt(o,e[l]))}}ze.seriesTypes.forEach(n=>{const a=n,o=s[a];mj(a)?i[a]=o:e[a]=Kt(o,e[a])})}createChartConfigPerChartType(e){for(const[i,{seriesTypes:s}]of Ba(i0)){const n=xv.get(i);for(const a of s)e[a]??(e[a]=Oe(n))}return e}getDefaults(){const e=(i,s)=>{const n={},a={axes:{},...yv.getThemeTemplates(),...this.getChartDefaults(),...xv.get(i)};for(const o of s){n[o]=Kt(ha.getThemeTemplate(o),n[o]??Oe(a));const{axes:r}=n[o];for(const l of yc.keys())r[l]=Kt(r[l],yc.getThemeTemplate(l),Rx.axisDefault[l])}return n};return Kt(e("cartesian",ze.cartesianTypes),e("polar",ze.polarTypes),e("hierarchy",ze.hierarchyTypes),e("topology",ze.topologyTypes),e("flow-proportion",ze.flowProportionTypes),e("standalone",ze.standaloneTypes),e("gauge",ze.gaugeTypes))}static applyTemplateTheme(e,i,s){if(zt(e))for(let n=0;n<e.length;n++){const a=e[n];typeof a=="symbol"&&s?.has(a)&&(e[n]=s.get(a))}else for(const n of Object.keys(e)){const a=e[n];typeof a=="symbol"&&s?.has(a)&&(e[n]=s.get(a))}}templateTheme(e,i=!0){const s=i?Oe(e):e,n=this.getTemplateParameters();return nr(s,Rx.applyTemplateTheme,void 0,void 0,n),s}getDefaultColors(){return Rx.getDefaultColors()}getPublicParameters(){return Rx.getDefaultPublicParameters()}getTemplateParameters(){const e=new Map;e.set(Bu,!1),e.set(Hp,"#d9d9d9"),e.set(gl,"#00000080"),e.set(Bm,"#aaa"),e.set(fl,"block"),e.set(ml,"center"),e.set(Up,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),e.set(Rm,e0),e.set(Ke,ni.BLUE),e.set(Ai,ni.BLUE),e.set($p,ni.BLUE),e.set(Kp,e0),e.set(Yp,"#fafafa"),e.set(Zp,"#ddd"),e.set(Xp,"#000"),e.set(qp,"#181d1f"),e.set(Qp,"#e35c5c"),e.set(Jp,"#e35c5c"),e.set(tg,"#fafafa"),e.set(eg,"#ddd"),e.set(ig,"#000"),e.set(sg,"top"),e.set(Ka,!1);const i=this.getDefaultColors();return e.set(Tm,this.palette.up?.stroke??i.up.stroke),e.set(Om,this.palette.up?.fill??i.up.fill),e.set(Nm,this.palette.down?.stroke??i.down.stroke),e.set(_m,this.palette.down?.fill??i.down.fill),e.set(Em,this.palette.neutral?.stroke??i.neutral.stroke),e.set(Pm,this.palette.neutral?.fill??i.neutral.fill),e.set(eS,this.palette.altUp?.stroke??i.up.stroke),e.set(sS,this.palette.altUp?.fill??i.up.fill),e.set(iS,this.palette.altDown?.stroke??i.down.stroke),e.set(nS,this.palette.altDown?.fill??i.down.fill),e.set(aS,this.palette.altNeutral?.fill??i.altNeutral.fill),e.set(oS,this.palette.altNeutral?.stroke??i.altNeutral.stroke),e}},Fn.axisDefault={number:Fn.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:"off"}),log:Fn.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:"off"}),category:Fn.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:Ka},crosshair:{enabled:!1}},{title:!0,time:"off"}),"grouped-category":Fn.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:Hp},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}},{title:!0,time:"off"}),time:Fn.getAxisDefaults({keys:[],gridLine:{enabled:Ka},crosshair:{enabled:!0}},{title:!0,time:"legacy"}),"ordinal-time":Fn.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:Ka},crosshair:{enabled:!0}},{title:!0,time:"legacy"}),"unit-time":Fn.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:Ka},crosshair:{enabled:!0},parentLevel:{enabled:!0}},{title:!0,time:"modern"}),"angle-category":Fn.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Ka},shape:{$path:["./shape",void 0,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]}},{title:!1,time:"off"}),"angle-number":Fn.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Ka}},{title:!1,time:"off"}),"radius-category":Fn.getAxisDefaults({positionAngle:0,line:{enabled:!1}},{title:!0,time:"off"}),"radius-number":Fn.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$path:["./shape",void 0,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]}},{title:!0,time:"off"})},qa=Fn}}),s0,gs,Vc,Zu,fg=k({"packages/ag-charts-community/src/chart/themes/darkTheme.ts"(){"use strict";Ll(),si(),fi(),s0="#192232",gs={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Vc={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Zu=class extends qa{getDefaultColors(){return{fills:gs,fillsFallback:Object.values(gs),strokes:Vc,sequentialColors:ma(gs),divergingColors:[gs.ORANGE,gs.YELLOW,gs.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[gs.GREEN,gs.YELLOW,gs.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:gs.GREEN,stroke:Vc.GREEN},down:{fill:gs.RED,stroke:Vc.RED},neutral:{fill:gs.GRAY,stroke:Vc.GRAY},altUp:{fill:gs.BLUE,stroke:Vc.BLUE},altDown:{fill:gs.ORANGE,stroke:Vc.ORANGE},altNeutral:{fill:gs.GRAY,stroke:Vc.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:[.263]},backgroundColor:s0,borderColor:{$foregroundBackgroundMix:[.784]},chromeBackgroundColor:{$foregroundBackgroundMix:[.93]},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundAccentMix:[.743,.01]},subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.57]},chromeTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$foregroundBackgroundAccentMix:[.35,.1]}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Bu,!0),t.set(Rm,s0),t.set(Hp,"#7f8389"),t.set(Ke,gs.BLUE),t.set($p,"#fff"),t.set(Ai,gs.BLUE),t.set(Kp,s0),t.set(Yp,"#28313e"),t.set(Zp,"#4b525d"),t.set(Xp,"#fff"),t.set(qp,"#fff"),t.set(tg,"#28313e"),t.set(eg,"#4b525d"),t.set(ig,"#fff"),t}constructor(t){super(t)}}}}),yn,Wc,vj,aJ=k({"packages/ag-charts-community/src/chart/themes/financialDark.ts"(){"use strict";fg(),si(),fi(),yn={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Wc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},vj=class extends Zu{getDefaultColors(){return{...super.getDefaultColors(),fills:{...yn},fillsFallback:Object.values({...yn}),strokes:{...Wc},sequentialColors:ma(yn),divergingColors:[yn.GREEN,yn.BLUE,yn.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:yn.GREEN,stroke:Wc.GREEN},down:{fill:yn.RED,stroke:Wc.RED},neutral:{fill:yn.BLUE,stroke:Wc.BLUE},altUp:{fill:yn.GREEN,stroke:Wc.GREEN},altDown:{fill:yn.RED,stroke:Wc.RED},altNeutral:{fill:yn.GRAY,stroke:Wc.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.88,.01]},padding:0}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,yn.BLUE),t.set(Ai,yn.BLUE),t.set(fl,"overlay"),t.set(ml,"left"),t.set(sg,"bottom"),t.set(Ka,!0),t}}}}),xn,Hc,Sj,oJ=k({"packages/ag-charts-community/src/chart/themes/financialLight.ts"(){"use strict";Ll(),si(),fi(),xn={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Hc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Sj=class extends qa{getDefaultColors(){return{...super.getDefaultColors(),fills:{...xn},fillsFallback:Object.values({...xn}),strokes:{...Hc},sequentialColors:ma(xn),divergingColors:[xn.GREEN,xn.BLUE,xn.RED],up:{fill:xn.GREEN,stroke:Hc.GREEN},down:{fill:xn.RED,stroke:Hc.RED},neutral:{fill:xn.BLUE,stroke:Hc.BLUE},altUp:{fill:xn.GREEN,stroke:Hc.GREEN},altDown:{fill:xn.RED,stroke:Hc.RED},altNeutral:{fill:xn.GRAY,stroke:Hc.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.94,.01]},padding:0}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,xn.BLUE),t.set(Ai,xn.BLUE),t.set(fl,"overlay"),t.set(ml,"left"),t.set(sg,"bottom"),t.set(Ka,!0),t}}}}),fs,Uc,Mj,rJ=k({"packages/ag-charts-community/src/chart/themes/materialDark.ts"(){"use strict";fg(),si(),fi(),fs={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Uc={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Mj=class extends Zu{getDefaultColors(){return{...super.getDefaultColors(),fills:fs,fillsFallback:Object.values(fs),strokes:Uc,sequentialColors:ma(fs),divergingColors:[fs.ORANGE,fs.YELLOW,fs.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[fs.GREEN,fs.YELLOW,fs.RED],up:{fill:fs.GREEN,stroke:Uc.GREEN},down:{fill:fs.RED,stroke:Uc.RED},neutral:{fill:fs.GRAY,stroke:Uc.GRAY},altUp:{fill:fs.BLUE,stroke:Uc.BLUE},altDown:{fill:fs.RED,stroke:Uc.RED},altNeutral:{fill:fs.GRAY,stroke:Uc.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,fs.BLUE),t.set(Ai,fs.BLUE),t}}}}),ms,$c,Dj,lJ=k({"packages/ag-charts-community/src/chart/themes/materialLight.ts"(){"use strict";Ll(),si(),fi(),ms={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},$c={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Dj=class extends qa{getDefaultColors(){return{...super.getDefaultColors(),fills:ms,fillsFallback:Object.values(ms),strokes:$c,sequentialColors:ma(ms),divergingColors:[ms.ORANGE,ms.YELLOW,ms.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[ms.GREEN,ms.YELLOW,ms.RED],up:{fill:ms.GREEN,stroke:$c.GREEN},down:{fill:ms.RED,stroke:$c.RED},neutral:{fill:ms.GRAY,stroke:$c.GRAY},altUp:{fill:ms.BLUE,stroke:$c.BLUE},altDown:{fill:ms.RED,stroke:$c.RED},altNeutral:{fill:ms.GRAY,stroke:$c.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,ms.BLUE),t.set(Ai,ms.BLUE),t}}}}),Xe,Kc,kj,cJ=k({"packages/ag-charts-community/src/chart/themes/polychromaDark.ts"(){"use strict";fg(),si(),fi(),Xe={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Kc={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},kj=class extends Zu{getDefaultColors(){return{fills:Xe,fillsFallback:Object.values(Xe),strokes:Kc,sequentialColors:ma(Xe),divergingColors:[Xe.BLUE,Xe.RED],hierarchyColors:[],secondSequentialColors:[Xe.BLUE,Xe.PURPLE,Xe.MAGENTA,Xe.PINK,Xe.RED,Xe.ORANGE,Xe.YELLOW,Xe.GREEN],secondDivergingColors:[Xe.BLUE,Xe.RED],secondHierarchyColors:[],up:{fill:Xe.GREEN,stroke:Kc.GREEN},down:{fill:Xe.RED,stroke:Kc.RED},neutral:{fill:Xe.GRAY,stroke:Kc.GRAY},altUp:{fill:Xe.BLUE,stroke:Kc.BLUE},altDown:{fill:Xe.RED,stroke:Kc.RED},altNeutral:{fill:Xe.GRAY,stroke:Kc.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,Xe.BLUE),t.set(Ai,Xe.BLUE),t}}}}),qe,Yc,Ij,hJ=k({"packages/ag-charts-community/src/chart/themes/polychromaLight.ts"(){"use strict";Ll(),si(),fi(),qe={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Yc={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},Ij=class extends qa{getDefaultColors(){return{...super.getDefaultColors(),fills:qe,fillsFallback:Object.values(qe),strokes:Yc,sequentialColors:ma(qe),divergingColors:[qe.BLUE,qe.RED],hierarchyColors:[],secondSequentialColors:[qe.BLUE,qe.PURPLE,qe.MAGENTA,qe.PINK,qe.RED,qe.ORANGE,qe.YELLOW,qe.GREEN],secondDivergingColors:[qe.BLUE,qe.RED],secondHierarchyColors:[],up:{fill:qe.GREEN,stroke:Yc.GREEN},down:{fill:qe.RED,stroke:Yc.RED},neutral:{fill:qe.GRAY,stroke:Yc.GRAY},altUp:{fill:qe.BLUE,stroke:Yc.BLUE},altDown:{fill:qe.RED,stroke:Yc.RED},altNeutral:{fill:qe.GRAY,stroke:Yc.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,qe.BLUE),t.set(Ai,qe.BLUE),t}}}}),Li,wl,Aj,uJ=k({"packages/ag-charts-community/src/chart/themes/sheetsDark.ts"(){"use strict";fg(),si(),fi(),Li={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},wl={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Aj=class extends Zu{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Li,RED:Li.ORANGE},fillsFallback:Object.values({...Li,RED:Li.ORANGE}),strokes:{...wl,RED:wl.ORANGE},sequentialColors:ma({...Li,RED:Li.ORANGE}),divergingColors:[Li.ORANGE,Li.YELLOW,Li.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[Li.GREEN,Li.YELLOW,Li.ORANGE],up:{fill:Li.GREEN,stroke:wl.GREEN},down:{fill:Li.ORANGE,stroke:wl.ORANGE},neutral:{fill:Li.GRAY,stroke:wl.GRAY},altUp:{fill:Li.BLUE,stroke:wl.BLUE},altDown:{fill:Li.ORANGE,stroke:wl.ORANGE},altNeutral:{fill:Li.GRAY,stroke:wl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,Li.BLUE),t.set(Ai,Li.BLUE),t}}}}),$i,Ar,Cj,dJ=k({"packages/ag-charts-community/src/chart/themes/sheetsLight.ts"(){"use strict";Ll(),si(),fi(),$i={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Ar={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Cj=class extends qa{getDefaultColors(){return{...super.getDefaultColors(),fills:{...$i,RED:$i.ORANGE},fillsFallback:Object.values({...$i,RED:$i.ORANGE}),strokes:{...Ar,RED:Ar.ORANGE},sequentialColors:ma({...$i,RED:$i.ORANGE}),divergingColors:[$i.ORANGE,$i.YELLOW,$i.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[$i.GREEN,$i.YELLOW,$i.ORANGE],secondHierarchyColors:[],up:{fill:$i.GREEN,stroke:Ar.GREEN},down:{fill:$i.ORANGE,stroke:Ar.ORANGE},neutral:{fill:Ar.GRAY,stroke:Ar.GRAY},altUp:{fill:$i.BLUE,stroke:Ar.BLUE},altDown:{fill:$i.ORANGE,stroke:Ar.ORANGE},altNeutral:{fill:$i.GRAY,stroke:Ar.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,$i.BLUE),t.set(Ai,$i.BLUE),t}}}}),Xu,C2,Lj,L2,w2,T2,wj=k({"packages/ag-charts-community/src/chart/axesOptionsEnterpriseDefs.ts"(){"use strict";R(),ju(),Xu={...Mr,type:pt(ke("ordinal-time")),paddingInner:St,paddingOuter:St,groupPaddingInner:St,label:rg,parentLevel:Jm,interval:_c(Pt(et,Ea),!0).interval,crosshair:Oc(!0)},C2={...kl,..._c(et),type:pt(ke("angle-number")),crossLines:es(Bo),startAngle:et,endAngle:et,label:{...Pc,orientation:lt("fixed","parallel","perpendicular"),format:Dl}},Lj={innerRadiusRatio:St},L2={...kl,...Lj,type:pt(ke("angle-category")),shape:lt("polygon","circle"),crossLines:es(Bo),startAngle:et,endAngle:et,paddingInner:St,groupPaddingInner:St,label:{...Pc,orientation:lt("fixed","parallel","perpendicular")}},w2={...kl,..._c(et),type:pt(ke("radius-number")),shape:lt("polygon","circle"),positionAngle:et,innerRadiusRatio:St,crossLines:es({...Bo,label:{...Ec,positionAngle:et}},"cross-line options"),title:{enabled:K,text:J,spacing:U,formatter:he,...ve},label:{...Pc,format:Dl}},T2={...kl,type:pt(ke("radius-category")),positionAngle:et,innerRadiusRatio:St,paddingInner:St,paddingOuter:St,groupPaddingInner:St,label:Pc,crossLines:es({...Bo,label:{...Ec,positionAngle:et}},"cross-line options"),title:{enabled:K,text:J,spacing:U,formatter:he,...ve}}}}),qu,Zc,mg,Ay,N2,Tj,Nj,O2,_2,Cy,n0,a0,E2,P2,o0,R2,B2,z2,r0,Ly,F2,Qu,Oj=k({"packages/ag-charts-community/src/chart/themes/annotationOptionsDef.ts"(){"use strict";R(),zn(),qu={lineStyle:lt("solid","dashed","dotted"),...vt},Zc={...gt,...ct,...vt},mg={visible:K,locked:K,handle:Zc,...ve},Ay={position:lt("top","center","bottom"),alignment:lt("left","center","right"),...ve},N2={position:lt("top","inside","bottom"),alignment:lt("left","center","right"),...ve},Tj={enabled:K,cornerRadius:U,formatter:he,...ve,...gt,...ct,...vt},Nj={visible:K,...qu,...ct},O2={divider:ct,...gt,...ct,...ve},_2={handle:Zc,statistics:O2,...qu,...gt,...ct},Cy={visible:K,locked:K,extendStart:K,extendEnd:K,handle:Zc,text:Ay,...qu,...ct},n0={visible:K,locked:K,axisLabel:Tj,handle:Zc,text:Ay,...qu,...ct},a0={visible:K,locked:K,extendStart:K,extendEnd:K,handle:Zc,text:N2,background:gt,...qu,...ct},E2={...a0},P2={...a0,middle:Nj},o0={label:ve,showFill:K,isMultiColor:K,strokes:kt(yt),rangeStroke:yt,bands:lt(4,6,10),...Cy},R2={...gt,...ct,...mg},B2={...gt,...ct,...mg},z2={...gt,...ct,...mg,background:{...gt,...ct}},r0={visible:K,locked:K,handle:Zc,...gt},Ly={visible:K,locked:K,extendStart:K,extendEnd:K,handle:Zc,text:Ay,background:gt,statistics:O2,...qu,...ct},F2={visible:K,up:_2,down:_2},Qu={enabled:K,axesButtons:{enabled:K,axes:lt("x","y","xy")},toolbar:{enabled:K,padding:U,buttons:es({...Rc,value:lt("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:K,buttons:kt(Pt(ts({...Rc,value:pt(lt("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))}),ts({...Rc,value:pt(lt("lock")),checkedOverrides:Rc})))}},Qu.data=At(Ws),Qu.xKey=At(J),Qu.volumeKey=At(J),Qu.snap=At(K)}}),j2,G2,V2,W2,H2,U2,$2,K2,Y2,Z2,X2,q2,Q2,J2,tw,ew,iw,sw,nw,aw,ow,rw,lw,cw,l0,hw,_j=k({"packages/ag-charts-community/src/chart/themes/enterpriseThemeableOptionsDef.ts"(){"use strict";R(),Rt(),zn(),j2={direction:lt("horizontal","vertical"),showInMiniChart:K,cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U,whisker:{...ct,...vt},cap:{lengthRatio:St}}),whisker:{...ct,...vt},cap:{lengthRatio:St},tooltip:ee,...Zt,...gt,...ct,...vt},G2={cornerRadius:U,wick:{...ct,...vt},...gt,...ct,...vt},V2={item:{up:G2,down:G2},itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U,wick:{...ct,...vt}}),showInMiniChart:K,tooltip:ee,...Zt},W2={fills:kt(Ra),strokes:kt(yt),label:{spacing:U,maxWidth:U,...pe},link:{tension:St,itemStyler:Ce({...gt,...ct,...vt,tension:St}),...gt,...ct,...vt},node:{width:U,spacing:U,itemStyler:Ce({...gt,...ct,...vt}),...gt,...ct,...vt},tooltip:ee,...Zt},H2={direction:lt("horizontal","vertical"),fills:kt(Ra),strokes:kt(yt),showInMiniChart:K,label:{spacing:U,placement:lt("before","middle","after"),...pe},stageLabel:{rotation:et,spacing:U,minSpacing:U,placement:lt("before","after"),avoidCollisions:K,itemStyler:Ce({...ve,spacing:et}),format:J,...pe},tooltip:ee,...Zt,...ft(gt,["fill"]),...ft(ct,["stroke"]),...vt},U2={direction:lt("horizontal","vertical"),fills:kt(Ra),strokes:kt(yt),showInMiniChart:K,itemStyler:Ce({...gt,...ct,...vt}),spacingRatio:St,crisp:K,dropOff:{enabled:K,...gt,...ct,...vt},stageLabel:{rotation:et,spacing:U,minSpacing:U,placement:lt("before","after"),avoidCollisions:K,itemStyler:Ce({...ve,spacing:et}),format:J,...pe},label:pe,tooltip:ee,shadow:zo,...Zt,...ft(gt,["fill"]),...ft(ct,["stroke"]),...vt},$2={title:J,textAlign:lt("left","center","right"),verticalAlign:lt("top","middle","bottom"),itemPadding:U,itemStyler:Ce({...gt,...ct}),showInMiniChart:K,label:Il,tooltip:ee,...Zt,...ct},K2={showInMiniChart:K,itemStyler:Ce({...ct,...vt}),item:{up:{...ct,...vt},down:{...ct,...vt}},tooltip:ee,...Zt},Y2={maxStrokeWidth:U,itemStyler:Ce({...ct,...vt}),sizeDomain:kt(U),label:pe,tooltip:ee,...Zt,...ct,...vt,highlightStyle:{...Zt.highlightStyle,...ct}},Z2={...ct,...vt},X2={colorRange:kt(yt),maxSize:U,sizeDomain:kt(U),label:{placement:lt("top","bottom","left","right"),...pe},tooltip:ee,...Zt,...ft(Dr,["enabled"]),highlightStyle:{...Zt.highlightStyle,...gt,...ct}},q2={colorRange:kt(yt),padding:U,itemStyler:Ce({...gt,...ct,...vt}),label:Il,tooltip:ee,...Zt,...gt,...ct,...vt,highlightStyle:{...Zt.highlightStyle,...gt,...ct}},Q2={...Zt,...gt,...ct,...vt},J2={cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),label:pe,tooltip:ee,...Zt,...gt,...ct,...vt},tw={direction:lt("horizontal","vertical"),aspectRatio:U,spacing:U,reverse:K,itemStyler:Ce({...gt,...ct,...vt}),fills:kt(Ra),strokes:kt(yt),label:pe,stageLabel:{spacing:U,placement:lt("before","after"),...pe},tooltip:ee,shadow:zo,...Zt,...ft(gt,["fill"]),...ft(ct,["stroke"]),...vt},ew={connectMissingData:K,marker:Dr,label:pe,tooltip:ee,...Zt,...gt,...ct,...vt},iw={connectMissingData:K,marker:Dr,label:pe,tooltip:ee,...Zt,...ct,...vt},sw={cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),label:pe,tooltip:ee,...Zt,...gt,...ct,...vt},nw={cornerRadius:U,columnWidthRatio:St,maxColumnWidthRatio:St,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),label:pe,tooltip:ee,...Zt,...gt,...ct,...vt},aw={showInMiniChart:K,connectMissingData:K,interpolation:ry,label:{...pe,padding:U,placement:lt("inside","outside")},marker:Dr,tooltip:ee,shadow:zo,...Zt,...gt,...ct,...vt},ow={direction:lt("horizontal","vertical"),showInMiniChart:K,cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),label:{...pe,padding:U,placement:lt("inside","outside")},tooltip:ee,shadow:zo,...Zt,...gt,...ct,...vt},rw={fills:kt(Ra),strokes:kt(yt),label:{...pe,spacing:U},link:{itemStyler:Ce({...gt,...ct,...vt}),...gt,...ct,...vt},node:{width:U,spacing:U,alignment:lt("left","center","right","justify"),itemStyler:Ce({...gt,...ct,...vt}),...gt,...ct,...vt},tooltip:ee,...Zt},lw={fills:kt(Ra),strokes:kt(yt),colorRange:kt(yt),sectorSpacing:U,cornerRadius:U,padding:U,itemStyler:Ce({...gt,...ct}),label:{spacing:U,...Il},secondaryLabel:Il,tooltip:ee,...Zt,...ft(gt,["fill"]),...ft(ct,["stroke"]),highlightStyle:{label:{color:yt},secondaryLabel:{color:yt},...gt,...ct}},cw={fills:kt(Ra),strokes:kt(yt),colorRange:kt(yt),itemStyler:Ce({...gt,...ct}),group:{gap:U,padding:U,cornerRadius:U,textAlign:lt("left","center","right"),interactive:K,label:{...pe,spacing:U},...gt,...ct},tile:{gap:U,padding:U,cornerRadius:U,textAlign:lt("left","center","right"),verticalAlign:lt("top","middle","bottom"),label:{...pe,spacing:U,lineHeight:U,minimumFontSize:U,wrapping:lt("never","always","hyphenate","on-space"),overflowStrategy:lt("ellipsis","hide")},secondaryLabel:{...pe,lineHeight:U,minimumFontSize:U,wrapping:lt("never","always","hyphenate","on-space"),overflowStrategy:lt("ellipsis","hide")},...gt,...ct},tooltip:ee,...Zt,highlightStyle:{group:{label:{color:yt},...gt,...ct},tile:{label:{color:yt},secondaryLabel:{color:yt},...gt,...ct}}},l0={name:J,cornerRadius:U,itemStyler:Ce({...gt,...ct,...vt,cornerRadius:U}),label:{...pe,padding:U,placement:lt("inside-start","inside-center","inside-end","outside-start","outside-end")},tooltip:ee,shadow:zo,...gt,...ct,...vt},hw={direction:lt("horizontal","vertical"),showInMiniChart:K,item:{positive:l0,negative:l0,total:l0},line:{enabled:K,...ct,...vt},tooltip:ee,...Zt}}});function c0(t,e){const i={};for(const s of Reflect.ownKeys(t))i[s]=e(t[s],s,t);return i}var wy,uw,le,Os,Ju,ge,Ej,Pj,pJ=k({"packages/ag-charts-community/src/chart/themes/themeOptionsDef.ts"(){"use strict";R(),y2(),cj(),Rt(),ju(),wj(),zn(),LL(),jL(),FF(),VF(),QL(),KF(),s4(),d2(),Oj(),_j(),wy=ts({__type:pt(ke("date")),value:Pt(J,et)},"a serializable date object"),uw={width:U,height:U,grip:K,fill:yt,stroke:yt,strokeWidth:U,cornerRadius:U},le={enabled:K,height:U,spacing:U,cornerRadius:et,mask:{fill:yt,fillOpacity:St,stroke:yt,strokeWidth:U},minHandle:uw,maxHandle:uw,miniChart:{enabled:K,padding:{top:U,bottom:U},label:{enabled:K,avoidCollisions:K,spacing:U,format:Dl,formatter:he,interval:{minSpacing:U,maxSpacing:U,values:Ws,step:et},...ve},series:Tt}},Os={number:{...ft(Uu,["type","crossLines"]),top:ft(Uu,["type","crossLines","position"]),right:ft(Uu,["type","crossLines","position"]),bottom:ft(Uu,["type","crossLines","position"]),left:ft(Uu,["type","crossLines","position"]),crossLines:ft(Sr,["type"])},log:{...ft($u,["type","crossLines"]),top:ft($u,["type","crossLines","position"]),right:ft($u,["type","crossLines","position"]),bottom:ft($u,["type","crossLines","position"]),left:ft($u,["type","crossLines","position"]),crossLines:ft(Sr,["type"])},category:{...ft(Ku,["type","crossLines"]),top:ft(Ku,["type","crossLines","position"]),right:ft(Ku,["type","crossLines","position"]),bottom:ft(Ku,["type","crossLines","position"]),left:ft(Ku,["type","crossLines","position"]),crossLines:ft(Sr,["type"])},time:{...ft(Ir,["type","crossLines"]),top:ft(Ir,["type","crossLines","position"]),right:ft(Ir,["type","crossLines","position"]),bottom:ft(Ir,["type","crossLines","position"]),left:ft(Ir,["type","crossLines","position"]),crossLines:ft(Sr,["type"])},"grouped-category":{...ft(Yu,["type"]),top:ft(Yu,["type","position"]),right:ft(Yu,["type","position"]),bottom:ft(Yu,["type","position"]),left:ft(Yu,["type","position"]),crossLines:ft(Sr,["type"])},"unit-time":{...ft(Gc,["type","crossLines"]),top:ft(Gc,["type","crossLines","position"]),right:ft(Gc,["type","crossLines","position"]),bottom:ft(Gc,["type","crossLines","position"]),left:ft(Gc,["type","crossLines","position"]),crossLines:ft(Sr,["type"])},"ordinal-time":{...ft(Xu,["type","crossLines"]),top:ft(Xu,["type","crossLines","position"]),right:ft(Xu,["type","crossLines","position"]),bottom:ft(Xu,["type","crossLines","position"]),left:ft(Xu,["type","crossLines","position"]),crossLines:ft(Sr,["type"])}},Ju={"angle-category":{...ft(L2,["type","crossLines"]),crossLines:ft(Bo,["type"])},"angle-number":{...ft(C2,["type","crossLines"]),crossLines:ft(Bo,["type"])},"radius-category":{...ft(T2,["type","crossLines"]),crossLines:{...ft(Bo,["type"]),label:{...Ec,positionAngle:et}}},"radius-number":{...ft(w2,["type","crossLines"]),crossLines:{...ft(Bo,["type"]),label:{...Ec,positionAngle:et}}}},ge={visible:K},Ej={common:{...It,navigator:le,axes:{...Os,...Ju},annotations:{...Qu,line:Cy,"horizontal-line":n0,"vertical-line":n0,"disjoint-channel":E2,"parallel-channel":P2,"fibonacci-retracement":o0,"fibonacci-retracement-trend-based":o0,callout:R2,comment:B2,note:z2,text:mg,arrow:Cy,"arrow-up":r0,"arrow-down":r0,"date-range":Ly,"price-range":Ly,"date-price-range":Ly,"quick-date-price-range":F2},chartToolbar:{enabled:K},initialState:{legend:es({visible:K,seriesId:J,itemId:J,legendItemName:J},"legend state array"),zoom:{rangeX:{start:Pt(et,wy),end:Pt(et,wy)},rangeY:{start:Pt(et,wy),end:Pt(et,wy)},ratioX:{start:St,end:St},ratioY:{start:St,end:St},autoScaledAxes:kt(ke("y"))}}},line:{...It,axes:Os,series:LS,navigator:le,...ge},scatter:{...It,axes:Os,series:s2,navigator:le,...ge},bubble:{...It,axes:Os,series:UL,navigator:le,...ge},area:{...It,axes:Os,series:AL,navigator:le,...ge},bar:{...It,axes:Os,series:AS,navigator:le,...ge},"box-plot":{...It,axes:Os,series:j2,navigator:le,...ge},candlestick:{...It,axes:Os,series:V2,navigator:le,...ge},"cone-funnel":{...It,axes:Os,series:H2,navigator:le,...ge},funnel:{...It,axes:Os,series:U2,navigator:le,...ge},ohlc:{...It,axes:Os,series:K2,navigator:le,...ge},histogram:{...It,axes:ft(Os,["category","grouped-category","ordinal-time","unit-time"]),series:ZL,navigator:le,...ge},heatmap:{...It,axes:Os,series:$2,navigator:le,...ge},waterfall:{...It,axes:Os,series:hw,navigator:le,...ge},"range-bar":{...It,axes:Os,series:ow,navigator:le,...ge},"range-area":{...It,axes:Os,series:aw,navigator:le,...ge},donut:{...It,series:p2,navigator:le,...ge},pie:{...It,series:GS,navigator:le,...ge},"radar-line":{...It,axes:Ju,series:iw,navigator:le,...ge},"radar-area":{...It,axes:Ju,series:ew,navigator:le,...ge},"radial-bar":{...It,axes:Ju,series:sw,navigator:le,...ge},"radial-column":{...It,axes:Ju,series:nw,navigator:le,...ge},nightingale:{...It,axes:Ju,series:J2,navigator:le,...ge},sunburst:{...It,series:lw,navigator:le,...ge},treemap:{...It,series:cw,navigator:le,...ge},"map-shape":{...It,series:q2,navigator:le,...ge},"map-line":{...It,series:Y2,navigator:le,...ge},"map-marker":{...It,series:X2,navigator:le,...ge},"map-shape-background":{...It,series:Q2,navigator:le,...ge},"map-line-background":{...It,series:Z2,navigator:le,...ge},sankey:{...It,series:rw,navigator:le,...ge},chord:{...It,series:W2,navigator:le,...ge},pyramid:{...It,series:tw,navigator:le,...ge},"radial-gauge":{...It,...Dy,targets:ft(Sy,["value"]),tooltip:{...Dy.tooltip,...It.tooltip}},"linear-gauge":{...It,...My,targets:ft(vy,["value"]),tooltip:{...My.tooltip,...It.tooltip}}},Pj=c0(Ej,function t(e,i){if(bf(i))return e;if(Do(e))return Pt(e,Qd,bf);if(Se(e))return Pt(ts(Zd in e?c0(e,s=>Se(s)?c0(s,t):s):c0(e,t)),Qd,bf);throw new Error(`Invalid theme override value: ${String(e)}`)})}}),ys,Xc,Rj,gJ=k({"packages/ag-charts-community/src/chart/themes/vividDark.ts"(){"use strict";fg(),si(),fi(),ys={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Xc={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Rj=class extends Zu{getDefaultColors(){return{fills:ys,fillsFallback:Object.values(ys),strokes:Xc,sequentialColors:ma(ys),divergingColors:[ys.ORANGE,ys.YELLOW,ys.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[ys.GREEN,ys.YELLOW,ys.RED],secondHierarchyColors:[],up:{fill:ys.GREEN,stroke:Xc.GREEN},down:{fill:ys.RED,stroke:Xc.RED},neutral:{fill:ys.GRAY,stroke:Xc.GRAY},altUp:{fill:ys.BLUE,stroke:Xc.BLUE},altDown:{fill:ys.ORANGE,stroke:Xc.ORANGE},altNeutral:{fill:ys.GRAY,stroke:Xc.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,ys.BLUE),t.set(Ai,ys.BLUE),t}}}}),xs,qc,Bj,fJ=k({"packages/ag-charts-community/src/chart/themes/vividLight.ts"(){"use strict";Ll(),si(),fi(),xs={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},qc={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Bj=class extends qa{getDefaultColors(){return{...super.getDefaultColors(),fills:xs,fillsFallback:Object.values(xs),strokes:qc,sequentialColors:ma(xs),divergingColors:[xs.ORANGE,xs.YELLOW,xs.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[xs.GREEN,xs.YELLOW,xs.RED],secondHierarchyColors:[],up:{fill:xs.GREEN,stroke:qc.GREEN},down:{fill:xs.RED,stroke:qc.RED},neutral:{fill:xs.GRAY,stroke:qc.GRAY},altUp:{fill:xs.BLUE,stroke:qc.BLUE},altDown:{fill:xs.ORANGE,stroke:qc.ORANGE},altNeutral:{fill:xs.GRAY,stroke:qc.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ke,xs.BLUE),t.set(Ai,xs.BLUE),t}}}});function mJ(t){if(t instanceof qa)return t;if(!xJ(t))return h0();if(t==null||typeof t=="string"){const n=u0[t??"ag-default"];if(n)return n();throw new Error(`Cannot find theme \`${t}\`.`)}const{cleared:e,invalid:i}=Vs(yJ(t),Fj,"theme");for(const n of i)st.warnOnce(String(n));const s=e?.baseTheme?Ty(e.baseTheme):h0();return e?new s.constructor(e):s}function yJ(t){if(!Se(t)||!Se(t.baseTheme))return t;let e=t,i,s;const n=[];for(;typeof e=="object";)i??(i=e.palette),s??(s=e.params),e.overrides&&n.push(e.overrides),e=e.baseTheme;return{baseTheme:e,overrides:Kt(...n),params:s,palette:i}}function xJ(t){const{invalid:e}=Vs({theme:t},{theme:Pt(jj,Xd)});for(const i of e)st.warnOnce(String(i));return e.length===0}var h0,zj,Qa,u0,Ty,Fj,jj,d0=k({"packages/ag-charts-community/src/chart/mapping/themes.ts"(){"use strict";R(),Fi(),EC(),Rt(),Ll(),fg(),aJ(),oJ(),rJ(),lJ(),cJ(),hJ(),uJ(),dJ(),pJ(),gJ(),fJ(),h0=dn(()=>new qa),zj=ne.create(!0,"perf"),Qa=(t,e,i)=>{zj("[CACHE] ChartTheme",t,e.name,i)},u0={"ag-default-dark":dn(()=>new Zu),"ag-sheets-dark":dn(()=>new Aj,Qa),"ag-polychroma-dark":dn(()=>new kj,Qa),"ag-vivid-dark":dn(()=>new Rj,Qa),"ag-material-dark":dn(()=>new Mj,Qa),"ag-financial-dark":dn(()=>new vj,Qa),"ag-default":h0,"ag-sheets":dn(()=>new Cj,Qa),"ag-polychroma":dn(()=>new Ij,Qa),"ag-vivid":dn(()=>new Bj,Qa),"ag-material":dn(()=>new Dj,Qa),"ag-financial":dn(()=>new Sj,Qa)},Ty=dn(mJ,Qa),Fj={baseTheme:Pt(J,Xd),overrides:Pj,params:{accentColor:yt,axisColor:yt,backgroundColor:yt,borderColor:yt,foregroundColor:yt,fontFamily:Lf,fontSize:et,fontWeight:Pt(J,et),gridLineColor:yt,padding:et,subtleTextColor:yt,textColor:yt,chromeBackgroundColor:yt,chromeFontFamily:Lf,chromeFontSize:et,chromeFontWeight:Pt(J,et),chromeSubtleTextColor:yt,chromeTextColor:yt,inputBackgroundColor:yt,inputTextColor:yt,crosshairLabelBackgroundColor:yt,crosshairLabelTextColor:yt},palette:{fills:kt(Ra),strokes:kt(yt),up:{fill:Pt(yt,Cf),stroke:yt},down:{fill:Pt(yt,Cf),stroke:yt},neutral:{fill:Pt(yt,Cf),stroke:yt}}},jj=lt("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark")}}),dw,td,p0,Gj=k({"packages/ag-charts-community/src/module/optionsModule.ts"(){"use strict";R(),m2(),nJ(),bv(),d0(),ku(),Fi(),Ln(),Rt(),fj(),A2(),dw=t=>`'${t}'`,td=class Di{constructor(e,i,s,n,a,o,r=!1){this.themeParameters={},this.optionMetadata=a??{},this.processedOverrides=s??{};let l=null;e instanceof Di?(l=e,this.specialOverrides=l.specialOverrides,o===void 0&&(o=sr(l.userOptions,i,Di.JSON_DIFF_OPTS)),this.userOptions=Oe(Rf(o,l.userOptions),{...Di.OPTIONS_CLONE_OPTS,seen:[]})):(this.userOptions=Oe(e??i,{...Di.OPTIONS_CLONE_OPTS,seen:[]}),this.specialOverrides=this.specialOverridesDefaults({...n})),r&&this.removeLeftoverSymbols(this.userOptions);let c,h,u,d,p,g,f;!r&&o!==void 0&&Di.isFastPathDelta(o)&&l!=null?({activeTheme:c,processedOptions:h,defaultAxes:u,fastDelta:d}=this.fastSetup(o,l),p=l.themeParameters,g=l.annotationThemes):(Di.perfDebug("ChartOptions.slowSetup()"),{activeTheme:c,processedOptions:h,defaultAxes:u,themeParameters:p,annotationThemes:g,googleFonts:f}=this.slowSetup(s,o,r)),this.activeTheme=c,this.processedOptions=h,this.defaultAxes=u,this.fastDelta=d??void 0,this.themeParameters=p,this.annotationThemes=g,this.googleFonts=f,ne.inDevelopmentMode(()=>Yh(this))}static isFastPathDelta(e){for(const i of Object.keys(e??{}))if(!this.FAST_PATH_OPTIONS.has(i))return Di.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return Di.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(e,i){const{activeTheme:s,defaultAxes:n,processedOptions:a}=i,{presetType:o}=this.optionMetadata;if(o!=null&&e?.data!=null){const l=Gs.getPresetModule(o);if(l?.processData){const{series:c,data:h}=l.processData(e.data);e=Kt({series:c,data:h},e)}}this.fastSeriesSetup(e,a);const r=Kt(e,a);return Di.debug("ChartOptions.fastSetup() - processed options",r),{activeTheme:s,defaultAxes:n,processedOptions:r,fastDelta:e}}fastSeriesSetup(e,i){e?.series&&(e.series?.every((s,n)=>K_(s,i.series?.[n]??{}))?delete e.series:e.series=e.series.map((s,n)=>Rf(s,i.series?.[n]??{})))}slowSetup(e,i,s=!1){let n=Oe(this.userOptions,Di.OPTIONS_CLONE_OPTS);i&&(n=Kt(i,n),s&&this.removeLeftoverSymbols(n));const{presetType:a}=this.optionMetadata;if(a!=null){const v=Gs.getPresetModule(a);if(v){const{validate:M=Vs}=v,D=n,L=n.type,A=L!=null?Ty(n.theme).presets[L]:void 0,{cleared:C,invalid:T}=M(D,v.options,"");T.forEach(N=>st.warn(N)),Fh(T,"")?n={}:(Di.debug(">>> AgCharts.createOrUpdate() - applying preset",C),n=v.create(C,A,()=>this.activeTheme))}}this.soloSeriesIntegrity(n),Cl.isEnterprise||pj(n);const o=Ty(n.theme);if(a!=null&&o.templateTheme(n,!1),this.validateSeriesOptions(n),this.chartDef=Gs.detectChartDefinition(n),!this.chartDef.placeholder){const{validate:v=Vs}=this.chartDef,{cleared:M,invalid:D}=v(n,this.chartDef.options,"");D.forEach(L=>st.warn(L)),n=M}this.validateAxesOptions(n),this.removeDisabledOptions(n);const r=this.optionsType(n),{annotations:l={},axes:c={},series:h,...u}=this.getSeriesThemeConfig(r,o),[d,p]=this.splitAnnotationsOptions(l),g=Oe(p),f=this.getDefaultAxes(n,h);let x=Kt(e,n,d,u,f);this.processAxesOptions(x,c),this.processSeriesOptions(x,o),x=Oe(x,Di.OPTIONS_CLONE_OPTS),(dC(x)||pC(x)||i8(x))&&x.legend?.enabled==null&&(x.legend??(x.legend={}),x.legend.enabled=x.series.length>1),this.enableConfiguredOptions(x,n);let y=this.processFonts(x);const b=o.params;return y=this.processFonts(b,y),b.__palette=Oe(o.palette),b.__palette.type=Se(n.theme)?gj(n.theme?.palette):"inbuilt",this.resolveThemeOperations(b,b),this.resolveThemeOperations(b,x),this.resolveThemeOperations(b,g),o.templateTheme(x,!1),sJ(x),Cl.isEnterprise||pj(x,!0),this.validateSeriesOptions(x),this.validateAxesOptions(x),this.validatePluginOptions(x),this.processMiniChartSeriesOptions(x),x.loadGoogleFonts||y.clear(),Di.debug(()=>["ChartOptions.slowSetup() - processed options",Oe(x)]),{activeTheme:o,processedOptions:x,defaultAxes:f,themeParameters:b,annotationThemes:g,googleFonts:y}}validatePluginOptions(e){for(const i of Gs.listModulesByType("plugin")){const s=i.name;if(s in e&&(!i.chartType||i.chartType===this.chartDef?.name)){const{cleared:n,invalid:a}=Vs(e[s],i.options,i.name);a.forEach(o=>st.warn(o)),e[s]=n}}}validateSeriesOptions(e){const i=this.chartDef?.name,s=[],n=e.series?.length??0;let a;for(let o=0;o<n;o++){const r=`series[${o}]`,l=e.series[o],c=Gs.getSeriesModule(l.type??"line");if(c==null){a??(a=Yd(Array.from(Gs.listModulesByType("series")).filter(p=>!i||p.chartType===i).map(p=>p.name),"or",dw)),st.warn(`Unknown type \`${l.type}\` at \`${r}.type\`; expecting ${a}, ignoring.`);continue}else if(i&&c.chartType!==i){st.warn(`Series type \`${c.name}\` at \`${r}.type\` is not supported by chart type \`${i}\`, ignoring.`);continue}const{validate:h=Vs}=c,{cleared:u,invalid:d}=h(l,c.options,r);d.forEach(p=>st.warn(p)),Fh(d,r)||s.push(u)}e.series=s}validateAxesOptions(e){if(!("axes"in e)||!e.axes)return;const i=this.chartDef?.name,s=[],n=e.axes.length??0;let a;for(let o=0;o<n;o++){const r=`axes[${o}]`;let l=e.axes[o];l.type==="time"&&l.unit!=null&&(l={...l,type:"unit-time"});const c=Gs.getAxisModule(l.type);if(c==null){a??(a=Yd(Array.from(Gs.listModulesByType("axis")).filter(p=>p.chartType===i).map(p=>p.name),"or",dw)),st.warn(`Unknown type \`${l.type}\` at  \`${r}.type\`; expecting one of ${a}, ignoring all axes options.`),delete e.axes;break}else if(c.chartType!==i){st.warn(`Axis type \`${c.name}\` at  \`${r}.type\` is not supported by chart type \`${i}\`, ignoring.`);break}const{validate:h=Vs}=c,{cleared:u,invalid:d}=h(l,c.options,r);d.forEach(p=>st.warn(p)),Fh(d,r)||s.push(u)}e.axes=s}diffOptions(e){return this===e?{}:e==null?this.processedOptions:this.fastDelta??sr(e.processedOptions,this.processedOptions,Di.JSON_DIFF_OPTS)}getSeriesThemeConfig(e,i){return i?.config[e]??{}}getDefaultAxes(e,i){const s=this.optionsType(e),n=e.series?.find(o=>(o.type??"line")===s)??{},a=ha.cloneDefaultAxes(s);return Nb(a,{},void 0,Kt(n,i)),a}optionsType(e){return e.series?.[0]?.type??"line"}splitAnnotationsOptions(e){const{axesButtons:i=null,enabled:s=null,optionsToolbar:n=null,toolbar:a=null,...o}=e;return i==null&&s==null&&n==null&&a==null?[{},o]:[{annotations:{axesButtons:i,enabled:s,optionsToolbar:n,toolbar:a}},o]}processAxesOptions(e,i){"axes"in e&&(e.axes=e.axes?.map(s=>{const{crossLines:n,...a}=Kt(i[s.type]?.[s.position],i[s.type]);s.crossLines&&(s.crossLines=ub(s.crossLines,n));const o=a.gridLine?.style;s.gridLine?.style&&o?.length&&(s.gridLine.style=s.gridLine.style.map((d,p)=>d.stroke!=null||d.lineDash!=null?Kt(d,o.at(p%o.length)):d));const{top:r,right:l,bottom:c,left:h,...u}=Kt(s,a);return u}))}processSeriesOptions(e,i){const s=this.getTooltipPositionDefaults(e),n=e.series?.map(a=>{a.type??(a.type="line");const{innerLabels:o,...r}=this.getSeriesThemeConfig(a.type,i).series??{},l=Gs.getSeriesModule(a.type),c=!!l?.options.tooltip,h=!!l?.options.visible,u=c&&this.getTooltipRangeDefaults(e,a.type),d=Kt(this.getSeriesGroupingOptions(a),a,c&&s,u,r,h&&{visible:!0});return d.innerLabels&&(d.innerLabels=ub(d.innerLabels,o)),d});e.series=this.setSeriesGroupingOptions(n??[])}processMiniChartSeriesOptions(e){let i=e.navigator?.miniChart?.series;i!=null&&(i=i.map(s=>(s.type??(s.type="line"),s)),e.navigator.miniChart.series=this.setSeriesGroupingOptions(i))}resolveThemeOperations(e,i){const s=Nb(i,e,new Set(["palette","data","theme"]));Di.debug("ChartOptions.resolveTheme()",s)}getSeriesGroupingOptions(e){const i=ha.isGroupable(e.type),s=ha.isStackable(e.type),n=ha.isStackedByDefault(e.type);e.grouped&&!i&&st.warnOnce(`unsupported grouping of series type "${e.type}".`),(e.stacked||e.stackGroup)&&!s&&st.warnOnce(`unsupported stacking of series type "${e.type}".`);let{grouped:a,stacked:o}=e;return o??(o=(n||e.stackGroup!=null)&&!(i&&a)),a??(a=!0),{stacked:s&&o,grouped:i&&a&&!(s&&o)}}setSeriesGroupingOptions(e){const i=this.getSeriesGrouping(e);Di.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);const s={},n=i.reduce((a,o)=>{var r;return o.groupType==="default"||(a[r=o.seriesType]??(a[r]=0),a[o.seriesType]+=o.groupType==="stack"?1:o.series.length),a},{});return i.flatMap(a=>{var o;switch(s[o=a.seriesType]??(s[o]=0),a.groupType){case"stack":{const r=s[a.seriesType]++;return a.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupId:a.groupId,groupIndex:r,groupCount:n[a.seriesType],stackIndex:c,stackCount:a.series.length}}))}case"group":return a.series.map(r=>Object.assign(r,{seriesGrouping:{groupId:a.groupId,groupIndex:s[a.seriesType]++,groupCount:n[a.seriesType],stackIndex:0,stackCount:0}}))}return a.series}).map(({stacked:a,grouped:o,...r})=>r)}getSeriesGroupId(e){return[e.type,e.xKey,e.stacked?e.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const i=new Map;return e.reduce((s,n)=>{const a=n.type;if(!n.stacked&&!n.grouped)s.push({groupType:"default",seriesType:a,series:[n],groupId:"__default__"});else{const o=this.getSeriesGroupId(n);if(!i.has(o)){const l={groupType:n.stacked?"stack":"group",seriesType:a,series:[],groupId:o};i.set(o,l),s.push(l)}i.get(o).series.push(n)}return s},[])}getTooltipPositionDefaults(e){const i=e.tooltip?.position;if(!Me(i))return;const{type:s,anchorTo:n,placement:a,xOffset:o,yOffset:r}=i,l={};return Ji(s)&&Hx(US,s)&&(l.type=s),Ji(n)&&Hx(WS,n)&&(l.anchorTo=n),Ji(a)&&Hx(HS,a)&&(l.placement=a),re(o)&&(l.xOffset=o),re(r)&&(l.yOffset=r),{tooltip:{position:l}}}getTooltipRangeDefaults(e,i){return{tooltip:{range:e.tooltip?.range??ha.getTooltipDefauls(i)?.range}}}soloSeriesIntegrity(e){if(!zt(e.series))return;const i=e.series;if(i&&i.length>1&&i.some(s=>ha.isSolo(s.type))){const s=this.optionsType(e);if(ha.isSolo(s))st.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),e.series=i.slice(0,1);else{const{solo:n,nonSolo:a}=Jx(i,r=>ha.isSolo(r.type)?"solo":"nonSolo"),o=HO(n.map(r=>r.type)).join(", ");st.warn(`Unable to mix these series types with the lead series type: ${o}`),e.series=a}}}static enableConfiguredJsonOptions(e,i){typeof i=="object"&&"enabled"in i&&!i._enabledFromTheme&&e.enabled==null&&(i.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(e){e._enabledFromTheme!=null&&delete e._enabledFromTheme}enableConfiguredOptions(e,i){nr(i,Di.enableConfiguredJsonOptions,new Set(["data","theme"]),e),nr(e,Di.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static processFontOptions(e,i,s,n=new Set){if(typeof e=="object"&&"fontFamily"in e)if(Array.isArray(e.fontFamily)){const a=[];for(const o of e.fontFamily)typeof o=="object"&&"googleFont"in o?(a.push(o.googleFont),n?.add(o.googleFont)):a.push(o);e.fontFamily=a.join(", ")}else typeof e.fontFamily=="object"&&"googleFont"in e.fontFamily&&(e.fontFamily=e.fontFamily.googleFont,n?.add(e.fontFamily));return n}processFonts(e,i=new Set){return nr(e,Di.processFontOptions,new Set(["data","theme"]),void 0,void 0,i)}static removeDisabledOptionJson(e){"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(i=>{i!=="enabled"&&delete e[i]})}removeDisabledOptions(e){nr(e,Di.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(e){if(!(!e||!Se(e)))for(const i of Object.keys(e)){const s=e[i];bf(s)&&delete e[i]}}removeLeftoverSymbols(e){nr(e,Di.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(e){if(e.window==null?e.window=be():AO(e.window),e.document==null?e.document=So():IO(e.document),e.window==null)throw new Error("AG Charts - unable to resolve global window");if(e.document==null)throw new Error("AG Charts - unable to resolve global document");return e}},td.OPTIONS_CLONE_OPTS={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])},td.JSON_DIFF_OPTS=new Set(["data"]),td.perfDebug=ne.create(!0,"perf"),td.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]),td.debug=ne.create(!0,"opts"),p0=td}}),Vj,g0,Wj,bJ=k({"packages/ag-charts-community/src/util/pool.ts"(){"use strict";Fi(),Vj=1e3,g0=class Eh{constructor(e,i,s,n,a,o=Vj){this.name=e,this.buildItem=i,this.releaseItem=s,this.destroyItem=n,this.maxPoolSize=a,this.cleanupTimeMs=o,this.freePool=[],this.busyPool=new Set}static getPool(e,i,s,n,a){return this.pools.has(e)||this.pools.set(e,new Eh(e,i,s,n,a)),this.pools.get(e)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(e){if(!this.hasFree()&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return i==null?(i=this.buildItem(e),Eh.debug(()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i])):Eh.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i]),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){const e=this.freePool.pop();if(e==null)throw new Error("AG Charts - pool has no free instances");return Eh.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,e]),this.busyPool.add(e),{item:e,release:()=>this.release(e)}}release(e){if(!this.busyPool.has(e))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");Eh.debug(()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,e]),this.releaseItem(e),this.busyPool.delete(e),this.freePool.push(e),Eh.debug(()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,e]);const i=Date.now(),s=i+this.cleanupTimeMs*.5;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<s&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=i+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){const e=this.freePool.splice(0);for(const i of e)this.destroyItem(i);Eh.debug(()=>[`Pool[name=${this.name}]: Cleaned pool of ${e.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`])}destroy(){this.cleanPool();for(const e of this.busyPool.values())this.destroyItem(e);this.busyPool.clear()}},g0.pools=new Map,g0.debug=ne.create(!0,"pool"),Wj=g0}}),Cr,Tl,jo,pw,vJ=k({"packages/ag-charts-community/src/api/agCharts.ts"(){"use strict";R(),Wv(),T8(),p4(),Xq(),iJ(),A2(),Gj(),Fi(),Ln(),Rt(),bJ(),Ub(),ME(),Gs.registerMany(dj),Cr=ne.create(!0,"opts"),Tl=class{static licenseCheck(t){this.licenseChecked||(this.licenseManager=Cl.licenseManager?.(t),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){return Cl.licenseManager?.({}).getLicenseDetails(t)}static getInstance(t){return pw.getInstance(t)}static create(t,e){return Cr.group("AgCharts.create()",()=>{t=ne.inDevelopmentMode(()=>Yh(Oe(t)))??t,this.licenseCheck(t);const i=pw.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:e});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&Cl.injectWatermark?.(i.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),i})}static createFinancialChart(t){return Cr.group("AgCharts.createFinancialChart()",()=>this.create(t,{presetType:"price-volume"}))}static createGauge(t){return Cr.group("AgCharts.createGauge()",()=>this.create(t,{presetType:"gauge-preset"}))}static __createSparkline(t){return Cr.group("AgCharts.__createSparkline()",()=>{const{pool:e,...i}=t;return this.create(i,{presetType:"sparkline",pool:e??!0,domMode:"minimal"})})}},Tl.licenseChecked=!1,jo=class Ph{static getInstance(e){const i=vm.getInstance(e);return i?NC.chartInstances.get(i):void 0}static initialiseModules(){Ph.initialised||(f2(),Zq(),Ph.initialised=!0)}static createOrUpdate(e){let{proxy:i}=e;const{userOptions:s,licenseManager:n,processedOverrides:a=i?.chart?.chartOptions.processedOverrides??{},specialOverrides:o=i?.chart?.chartOptions.specialOverrides??{},optionsMetadata:r=i?.chart?.chartOptions.optionMetadata??{},deltaOptions:l,stripSymbols:c=!1}=e,h=Cl.styles!=null?[["ag-charts-enterprise",Cl.styles]]:[],{presetType:u}=r;Ph.initialiseModules(),Cr(()=>[">>> AgCharts.createOrUpdate() user options",Oe(s)]);let d=s;Tl.optionsMutationFn&&d&&(d=Tl.optionsMutationFn(Oe(d),u),Cr(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",Oe(d)]));const p=this.getPool(r);let g=!1,f,x=i?.chart;x==null&&p?.hasFree()&&(f=p.obtainFree(),x=f.item);const{document:y,window:b,styleContainer:v,...M}=d??{},D=x?.getChartOptions(),L=new p0(D,M,a,{...o,document:y,window:b,styleContainer:v},r,l,c);return(x==null||Gs.detectChartDefinition(L.processedOptions)!==Gs.detectChartDefinition(x.chartOptions.processedOptions))&&(f?.release(),f=this.getPool(L.optionMetadata)?.obtain(L),f?x=f.item:(g=!0,x=Ph.createChartInstance(L,x))),h.forEach(([A,C])=>{x.ctx.domManager.addStyles(A,C)}),x.ctx.fontManager.updateFonts(L.googleFonts),i==null?(i=new NC(x,Ph.callbackApi,n),i.releaseChart=f?.release):(f||g)&&(i.releaseChart?.(),i.chart=x,i.releaseChart=f?.release),Cr.check()&&typeof window<"u"&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[x.id]=x),x.queuedUserOptions.push(L.userOptions),x.queuedChartOptions.push(L),x.requestFactoryUpdate(A=>{Cr.group(">>>> Chart.applyOptions()",()=>{A.applyOptions(L);const C=A.queuedUserOptions.indexOf(L.userOptions)+1;A.queuedUserOptions.splice(0,C),A.queuedChartOptions.splice(0,C)})}),i}static markRemovedProperties(e,i,s=!1){if(typeof e!="object")return s;for(const n of Object.keys(e))typeof e[n]>"u"&&(Object.assign(e,{[n]:Symbol("UNSET")}),s||(s=!0));return s}static updateUserDelta(e,i){i=Oe(i,p0.OPTIONS_CLONE_OPTS);const s=nr(i,Ph.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);Cr(()=>[">>> AgCharts.updateUserDelta() user delta",Oe(i)]),Ph.createOrUpdate({proxy:e,deltaOptions:i,stripSymbols:s})}static createChartInstance(e,i){const s=i?.destroy({keepTransferableResources:!0});return Gs.detectChartDefinition(e.processedOptions).create(e,s)}static getPool(e){if(e.pool===!0)return Wj.getPool(e.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}},jo.caretaker=new AI(au),jo.initialised=!1,jo.callbackApi={caretaker:jo.caretaker,create(t,e,i,s){return jo.createOrUpdate({userOptions:t,processedOverrides:e,specialOverrides:i,optionsMetadata:s})},update(t,e){return jo.createOrUpdate({userOptions:t,proxy:e})},updateUserDelta(t,e){return jo.updateUserDelta(t,e)}},jo.detachAndClear=t=>t.detachAndClear(),jo.destroy=t=>t.destroy(),pw=jo}}),Go,Hj=k({"packages/ag-charts-community/src/scene/shape/arc.ts"(){"use strict";R(),pi(),Ft(),aa(),_o(),Go=class extends Zs{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return ea(di(this.startAngle),di(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?t.closePath():this.type===2&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new ut(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(t,e){const i=this.getBBox();return this.type!==0&&i.containsPoint(t,e)&&this.path.isPointInPath(t,e)}},Go.className="Arc",S([ot()],Go.prototype,"centerX",2),S([ot()],Go.prototype,"centerY",2),S([ot()],Go.prototype,"radius",2),S([ot()],Go.prototype,"startAngle",2),S([ot()],Go.prototype,"endAngle",2),S([ot()],Go.prototype,"counterClockwise",2),S([ot()],Go.prototype,"type",2)}});function gw(t,e,i){const s=Math.sqrt(t**2+e**2),a=Math.atan2(e,t)+i;return{x:Math.cos(a)*s,y:Math.sin(a)*s}}function Uj(t,e,i,s,n){const a=pb(t,e),o=a*(1-s)/2;if(t+=o,e-=o,a<.001)return 2*i*n;if(a>=2*Math.PI){const p=t+a/2;t=p-Math.PI,e=p+Math.PI}const r=i*Math.cos(t),l=i*Math.sin(t),c=i*Math.cos(e),h=i*Math.sin(e),u=Math.floor(Math.sqrt((r-c)**2+(l-h)**2)),d=2*i*n;return Math.max(1,Math.min(d,u))}var ba,$j=k({"packages/ag-charts-community/src/scene/shape/radialColumnShape.ts"(){"use strict";R(),pi(),Ft(),aa(),_o(),ba=class extends Zs{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){const{innerRadius:t,outerRadius:e,columnWidth:i}=this,s=this.getRotation(),n=-i/2,a=i/2,o=-e,r=-t;let l=1/0,c=1/0,h=-1/0,u=-1/0;for(let d=0;d<4;d+=1){const{x:p,y:g}=gw(d%2===0?n:a,d<2?o:r,s);l=Math.min(p,l),c=Math.min(g,c),h=Math.max(p,h),u=Math.max(g,u)}return new ut(l,c,h-l,u-c)}getRotation(){const{startAngle:t,endAngle:e}=this,i=pb(t,e);return di(t+i/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,n=-t/2,a=t/2,o=-i,r=-e,l=this.getRotation(),c=[[n,r],[n,o],[a,o],[a,r]].map(([h,u])=>gw(h,u,l));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:a,isRadiusAxisReversed:o}=this,r=ea(s,n),l=Math.asin(t/2/s),c=this.getRotation(),h=(C,T)=>gw(C,T,c),u=(C,T)=>Math.sqrt(C**2+T**2),d=(C,T)=>T>C?0:Math.sqrt(C**2-T**2),p=(C,T,N)=>N?C<T:C>T,g=r&&!isNaN(l)&&l<Math.PI/6;let f=-t/2,x=t/2;const y=-i,b=-s*(g?Math.cos(l):1),v=p(a,u(s,t/2),!o);if(v){const C=d(a,s);f=-C,x=C}e.clear(!0);const M=h(f,b);e.moveTo(M.x,M.y);const D=ea(s,i),L=p(a,u(i,t/2),!o);if(D&&g)e.arc(0,0,s,di(-l-Math.PI/2)+c,di(l-Math.PI/2)+c,!1);else if(L){const C=-d(a,t/2),T=d(a,i);if(!v){const N=h(f,C);e.lineTo(N.x,N.y)}if(e.arc(0,0,a,Math.atan2(C,f)+c,Math.atan2(y,-T)+c,!1),!ea(T,0)){const N=h(T,y);e.lineTo(N.x,N.y)}e.arc(0,0,a,Math.atan2(y,T)+c,Math.atan2(C,x)+c,!1)}else{const C=h(f,y),T=h(x,y);e.lineTo(C.x,C.y),e.lineTo(T.x,T.y)}const A=h(x,b);if(e.lineTo(A.x,A.y),g)e.arc(0,0,s,di(l-Math.PI/2)+c,di(-l-Math.PI/2)+c,!0);else{const C=h(f,b);e.lineTo(C.x,C.y)}e.closePath()}},ba.className="RadialColumnShape",S([ot()],ba.prototype,"isBeveled",2),S([ot()],ba.prototype,"columnWidth",2),S([ot()],ba.prototype,"startAngle",2),S([ot()],ba.prototype,"endAngle",2),S([ot()],ba.prototype,"outerRadius",2),S([ot()],ba.prototype,"innerRadius",2),S([ot()],ba.prototype,"axisInnerRadius",2),S([ot()],ba.prototype,"axisOuterRadius",2),S([ot()],ba.prototype,"isRadiusAxisReversed",2)}}),fw={};cn(fw,{Arc:()=>Go,BBox:()=>ut,Caption:()=>_e,CategoryScale:()=>Bp,Group:()=>Ot,Line:()=>ws,LinearScale:()=>$a,Marker:()=>Wi,Path:()=>Zs,RadialColumnShape:()=>ba,Rect:()=>Ts,Scene:()=>Zf,Sector:()=>rs,Shape:()=>ra,TranslatableGroup:()=>ss,getRadialColumnWidth:()=>Uj,toRadians:()=>ji});var SJ=k({"packages/ag-charts-community/src/integrated-charts-scene.ts"(){"use strict";nu(),Eo(),Sm(),Nu(),Ft(),We(),VI(),Hj(),xc(),_o(),$j(),Lm(),PS(),hc(),pi()}}),mw={};cn(mw,{ChartTheme:()=>qa,DEFAULT_ANNOTATION_HANDLE_FILL:()=>Kp,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Xp,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>qp,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Qp,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>Jp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Yp,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Zp,DEFAULT_CAPTION_ALIGNMENT:()=>ml,DEFAULT_CAPTION_LAYOUT_STYLE:()=>fl,DEFAULT_FIBONACCI_STROKES:()=>Up,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>Ai,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Ke,DEFAULT_GRIDLINE_ENABLED:()=>Ka,DEFAULT_POLAR_SERIES_STROKE:()=>Rm,DEFAULT_SEPARATION_LINES_COLOUR:()=>Hp,DEFAULT_SHADOW_COLOUR:()=>gl,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Bm,DEFAULT_TEXTBOX_COLOR:()=>ig,DEFAULT_TEXTBOX_FILL:()=>tg,DEFAULT_TEXTBOX_STROKE:()=>eg,DEFAULT_TEXT_ANNOTATION_COLOR:()=>$p,DEFAULT_TOOLBAR_POSITION:()=>sg,IS_DARK_THEME:()=>Bu,PALETTE_ALT_DOWN_FILL:()=>nS,PALETTE_ALT_DOWN_STROKE:()=>iS,PALETTE_ALT_NEUTRAL_FILL:()=>aS,PALETTE_ALT_NEUTRAL_STROKE:()=>oS,PALETTE_ALT_UP_FILL:()=>sS,PALETTE_ALT_UP_STROKE:()=>eS,PALETTE_DOWN_FILL:()=>_m,PALETTE_DOWN_STROKE:()=>Nm,PALETTE_NEUTRAL_FILL:()=>Pm,PALETTE_NEUTRAL_STROKE:()=>Em,PALETTE_UP_FILL:()=>Om,PALETTE_UP_STROKE:()=>Tm,getChartTheme:()=>Ty,resolveOperation:()=>MJ,themeNames:()=>Kj,themeSymbols:()=>JC,themes:()=>u0});function MJ(t){const e=qa.getDefaultPublicParameters();e.__palette=qa.getDefaultColors();const i={operation:t};return Nb(i,e),i.operation}var Kj,DJ=k({"packages/ag-charts-community/src/integrated-charts-theme.ts"(){"use strict";d0(),Ll(),Ln(),d0(),si(),Ll(),d0(),si(),Kj=Object.keys(u0)}}),yw={};cn(yw,{Color:()=>ue,interpolateColor:()=>fP});var kJ=k({"packages/ag-charts-community/src/integrated-charts-util.ts"(){"use strict";Xh(),mP()}});function IJ(t,e){return typeof e=="number"?{x:t.x+e,y:t.y+e}:{x:t.x+e.x,y:t.y+e.y}}function xw(t,e){return typeof e=="number"?{x:t.x-e,y:t.y-e}:{x:t.x-e.x,y:t.y-e.y}}function AJ(t,e){return typeof e=="number"?{x:t.x*e,y:t.y*e}:{x:t.x*e.x,y:t.y*e.y}}function bw(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function CJ(t){return t.x*t.x+t.y*t.y}function LJ(t,e){const i=xw(t,e);return Math.sqrt(i.x*i.x+i.y*i.y)}function wJ(t,e){const i=xw(t,e);return i.x*i.x+i.y*i.y}function TJ(t){const e=bw(t);return{x:t.x/e,y:t.y/e}}function NJ(t,e){return e==null?Math.atan2(t.y,t.x):Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)}function OJ(t,e,i=Yj()){const s=bw(t);return{x:i.x+s*Math.cos(e),y:i.y+s*Math.sin(e)}}function _J(t,e,i){const s=e.x-t.x;return(i==null?e.y-t.y:i-e.y-(i-t.y))/s}function EJ(t,e,i){return(i==null?t.y:i-t.y)-e*t.x}function PJ(t,e,i=0,s){return{x:t===1/0?1/0:(i-e)/t,y:s==null?i:s-i}}function RJ(t,e,i=0,s){const n=t===1/0?1/0:t*i+e;return{x:i,y:s==null?n:s-n}}function BJ(t,e=2){return{x:Lk(t.x,e),y:Lk(t.y,e)}}function zJ(t,e){return t.x===e.x&&t.y===e.y}function FJ(t,e){if(typeof t=="number")return{x:t,y:e};if("currentX"in t)return{x:t.currentX,y:t.currentY};if("offsetWidth"in t)return{x:t.offsetWidth,y:t.offsetHeight};if("width"in t)return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y+t.height}];if("x1"in t)return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(t)}] [${e}]`)}function jJ(t,e){return t.x=e.x,t.y=e.y,t}function GJ(t){return{x:t?.x??0,y:t?.y??0}}function Yj(){return{x:0,y:0}}var ed,Zj=k({"packages/ag-charts-community/src/util/vector.ts"(){"use strict";R(),ed={add:IJ,angle:NJ,apply:jJ,equal:zJ,distance:LJ,distanceSquared:wJ,from:FJ,gradient:_J,intercept:EJ,intersectAtX:RJ,intersectAtY:PJ,length:bw,lengthSquared:CJ,multiply:AJ,normalized:TJ,origin:Yj,required:GJ,rotate:OJ,round:BJ,sub:xw}}}),VJ=k({"packages/ag-charts-community/src/module/axisModule.ts"(){"use strict"}}),WJ=k({"packages/ag-charts-community/src/module/axisOptionModule.ts"(){"use strict"}}),HJ=k({"packages/ag-charts-community/src/module/baseModule.ts"(){"use strict"}}),UJ=k({"packages/ag-charts-community/src/module/coreModules.ts"(){"use strict"}}),$J=k({"packages/ag-charts-community/src/module/optionsModuleTypes.ts"(){"use strict"}}),KJ=k({"packages/ag-charts-community/src/module/axisContext.ts"(){"use strict"}}),YJ=k({"packages/ag-charts-community/src/module/moduleContext.ts"(){"use strict"}}),ZJ=k({"packages/ag-charts-community/src/chart/chartAnimationPhase.ts"(){"use strict"}}),XJ=k({"packages/ag-charts-community/src/chart/series/seriesEvents.ts"(){"use strict"}}),qJ=k({"packages/ag-charts-community/src/chart/series/seriesTypes.ts"(){"use strict"}}),vw,Xj,qj,QJ=k({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeries.ts"(){"use strict";R(),xb(),am(),Lu(),vw=class gk{constructor(e,i,s,n,a,o,r,l,c){this.series=e,this.datumIndex=i,this.datum=s,this.sizeValue=n,this.colorValue=a,this.sumSize=o,this.depth=r,this.parent=l,this.children=c,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(e,i=gk.Walk.PreOrder){i===gk.Walk.PreOrder&&e(this),this.children.forEach(s=>{s.walk(e,i)}),i===gk.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}},vw.Walk={PreOrder:0,PostOrder:1},Xj=vw,qj=class extends fm{constructor(t){super({moduleCtx:t,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new qh,this.animationState=new Lp("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}processData(){const{NodeClass:t}=this,{childrenKey:e,sizeKey:i,colorKey:s,colorRange:n}=this.properties;let a=0,o=1/0,r=-1/0;const l=(d,p,g)=>{const f=g.depth!=null?g.depth+1:0,x=e!=null?d[e]:void 0,y=x==null||x.length===0;let b=i!=null?d[i]:void 0;Number.isFinite(b)?b=Math.max(b,0):b=y?1:0;const v=b;a=Math.max(a,f);const M=s!=null?d[s]:void 0;return typeof M=="number"&&(o=Math.min(o,M),r=Math.max(r,M)),c(new t(this,p,d,b,M,v,f,g,[]),x)},c=(d,p)=>{const{datumIndex:g}=d;return p?.forEach((f,x)=>{const y=l(f,g.concat(x),d);d.children.push(y),d.sumSize+=y.sumSize}),d},h=c(new t(this,[],void 0,0,void 0,0,void 0,void 0,[]),this.data),u=[o,r];this.colorScale.domain=o<r?[o,r]:[0,1],this.colorScale.range=n??["black"],this.colorScale.update(),this.rootNode=h,this.maxDepth=a,this.colorDomain=u}update({seriesRect:t}){this.updateSelections(),this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}resetAllAnimation(t){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s}=this.properties,{id:n,ctx:{legendManager:a},visible:o}=this;return t==="gradient"&&e!=null&&s!=null?[{legendType:"gradient",enabled:o&&a.getItemEnabled({seriesId:n}),seriesId:n,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return t.datumIndex.join(":")}getDatumId(t){return this.getDatumIdFromData(t)}removeMeIndexPathForIndex(t){return this.datumSelection.at(t+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(t){for(const{index:e,datum:i}of this.datumSelection)if(Jo(i.datumIndex,t))return e-1;return 0}pickFocus(t){if(!this.rootNode?.children.length)return;const e=Nt(0,t.datumIndex-t.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:i,otherIndexDelta:s}=t;let n=this.removeMeIndexPathForIndex(e);const a=n.reduce((l,c)=>l.children[c],this.rootNode);if(s>0&&a.hasChildren)n=[...n,0];else if(s<0&&n.length>1)n=n.slice(0,-1);else if(s===0&&i!==0){const l=a.parent.children.length-1;n=n.slice(),n[n.length-1]=Nt(0,n[n.length-1]+i,l)}const o=n.reduce((l,c)=>l.children[c],this.rootNode),r=this.computeFocusBounds(this.datumSelection.at(e+1));if(r!=null)return{datum:o,datumIndex:this.removeMeIndexForIndexPath(n),otherIndex:o.depth,bounds:r,clipFocusBox:!0}}getDatumAriaText(t,e){if(!(t instanceof this.NodeClass)){st.error(`datum is not HierarchyNode: ${JSON.stringify(t)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(t.depth??-1)+1,count:t.children.length,description:e})}getCategoryValue(t){}datumIndexForCategoryValue(t){}}}}),Ja,JJ=k({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeriesProperties.ts"(){"use strict";mt(),RS(),vl(),Ja=class extends Pn{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(ni),this.fillGradientDefaults=new ya,this.fillPatternDefaults=new Ee,this.fillImageDefaults=new gn,this.strokes=Object.values(Fo)}},S([I],Ja.prototype,"childrenKey",2),S([I],Ja.prototype,"sizeKey",2),S([I],Ja.prototype,"colorKey",2),S([I],Ja.prototype,"colorName",2),S([I],Ja.prototype,"fills",2),S([I],Ja.prototype,"fillGradientDefaults",2),S([I],Ja.prototype,"fillPatternDefaults",2),S([I],Ja.prototype,"fillImageDefaults",2),S([I],Ja.prototype,"strokes",2),S([I],Ja.prototype,"colorRange",2)}}),ttt=k({"packages/ag-charts-community/src/chart/series/topologySeries.ts"(){"use strict"}}),ett=k({"packages/ag-charts-community/src/chart/series/flowProportionSeries.ts"(){"use strict"}}),itt=k({"packages/ag-charts-community/src/chart/series/topology/geojson.ts"(){"use strict"}}),Qj,stt=k({"packages/ag-charts-community/src/chart/series/topology/lonLatBbox.ts"(){"use strict";Qj=class{constructor(t,e,i,s){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=s}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}}}}),Ny,f0,m0,y0,x0,Jj,ntt=k({"packages/ag-charts-community/src/chart/series/topology/mercatorScale.ts"(){"use strict";mb(),Ft(),Ny=Math.PI/180,f0=t=>t*Ny,m0=t=>-Math.log(Math.tan(Math.PI*.25+t*Ny*.5)),y0=t=>t/Ny,x0=t=>(Math.atan(Math.exp(-t))-Math.PI*.25)/(Ny*.5),Jj=class fO extends zf{constructor(e,i){super(),this.domain=e,this.range=i,this.type="mercator",this.bounds=fO.bounds(e)}static bounds(e){const[[i,s],[n,a]]=e,o=f0(i),r=m0(s),l=f0(n),c=m0(a);return new ut(Math.min(o,l),Math.min(r,c),Math.abs(l-o),Math.abs(c-r))}static fixedScale(){return new fO([[y0(0),x0(0)],[y0(1),x0(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...e){let i=-1/0,s=1/0,n=-1/0,a=1/0;for(const o of e)for(const[r,l]of o)i=Math.min(r,i),s=Math.max(r,s),n=Math.min(l,n),a=Math.max(l,a);return{domain:[[i,n],[s,a]],animatable:!0}}convert([e,i]){const[[s,n],[a,o]]=this.range,r=(a-s)/this.bounds.width,l=(o-n)/this.bounds.height;return[(f0(e)-this.bounds.x)*r+s,(m0(i)-this.bounds.y)*l+n]}invert([e,i]){const[[s,n],[a,o]]=this.range,r=(a-s)/this.bounds.width,l=(o-n)/this.bounds.height;return[y0((e-s)/r+this.bounds.x),x0((i-n)/l+this.bounds.y)]}}}}),att=k({"packages/ag-charts-community/src/chart/series/gaugeSeries.ts"(){"use strict"}}),b0,tG,ott=k({"packages/ag-charts-community/src/chart/axis/axisTicks.ts"(){"use strict";R(),Nu(),Ft(),We(),al(),Nn(),gc(),la(),cC(),Hs(),bc(),eC(),dm(),b0=class mO{constructor(){this.id=ia(this),this.axisGroup=new ss({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=gi.select(this.axisGroup,Gi),this.interval=new vc,this.label=new Ii,this.scale=new $a,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(e){e.appendChild(this.axisGroup)}calculateLayout(){const e=[],i=this.generateTicks(),{translationX:s,translationY:n}=this;return this.labelSelection.update(i.ticks.map(a=>this.createLabelDatum(a)),void 0,a=>a.tickId),this.labelSelection.each((a,o)=>{a.setProperties(o),o.visible&&e.push(a.getBBox())}),this.axisGroup.setProperties({translationX:s,translationY:n}),e.length>0?ut.merge(e):void 0}getLabelParams(e){const{padding:i}=this,{translate:s}=e;switch(this.position){case"top":case"bottom":return{x:s,y:i,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:i,y:s,textAlign:"start",textBaseline:"middle"}}}inRange(e,i=.001){const[s,n]=ns(this.scale.range);return e>=s-i&&e<=n+i}createLabelDatum(e){const{x:i,y:s,textBaseline:n,textAlign:a}=this.getLabelParams(e);return{visible:!!e.tickLabel,tickId:e.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:e.tickLabel,textAlign:a,textBaseline:n,x:i,y:s}}generateTicks(){const{minSpacing:e,maxSpacing:i}=this.interval,{maxTickCount:s,minTickCount:n,tickCount:a}=BR(Dp(this.scale.range),1,e,i,mO.DefaultTickCount,mO.DefaultMinSpacing),o=this.getTicksData({nice:!0,interval:this.interval.step,tickCount:a,minTickCount:n,maxTickCount:s});if(this.position==="bottom"||this.position==="top"){const r=wo.getMeasurer({font:this.label}),{domain:l}=this.scale,h=l[0]>l[1]?-1:1;let u=-1/0*h;o.ticks=o.ticks.filter(d=>Math.sign(d.translate-u)!==h?!1:(u=d.translate+r.textWidth(d.tickLabel,!0)*h,!0))}return o}getTicksData(e){const i=[],s=e.nice?this.scale.niceDomain(e):this.scale.domain,n=this.scale.ticks(e,s)?.ticks??[],a=n.reduce((c,h)=>Math.max(c,Tf(h)),0),o=[],r=lC(),l=typeof this.label.format=="string"?this.scale.tickFormatter({domain:s,ticks:n,fractionDigits:a,specifier:this.label.format}):c=>tl(c,a);for(let c=0;c<n.length;c++){const h=n[c],u=this.scale.convert(h);if(!this.inRange(u))continue;const d=this.label.formatter?.({value:h,index:c,domain:s,fractionDigits:a,boundSeries:o})??l(h),p=r(d);i.push({tick:h,tickId:p,tickLabel:d,translate:u})}return{rawTicks:n,fractionDigits:a,ticks:i}}},b0.DefaultTickCount=5,b0.DefaultMinSpacing=10,tG=b0}}),rtt=k({"packages/ag-charts-community/src/chart/chartAxis.ts"(){"use strict"}});function ltt({yDirection:t,padding:e=0,position:i="top",bbox:s}){const n=t?eG:iG,{xTranslationDirection:a,yTranslationDirection:o}=n[i],r=a*(e+s.width/2),l=o*(e+s.height/2);return{xTranslation:r,yTranslation:l}}var eG,iG,ctt=k({"packages/ag-charts-community/src/chart/crossline/crossLineLabelPosition.ts"(){"use strict";eG={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},iG={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}}}}),htt=k({"packages/ag-charts-community/src/chart/legend/legendDatum.ts"(){"use strict"}});function utt(t,e){const i=Bt("button",v0("ag-charts-input ag-charts-button",e));return t.label!==void 0?i.append(t.label):(i.append(sG(t.icon)),i.ariaLabel=t.altText),i.addEventListener("click",t.onPress),Wh(i,e),i}function dtt(t,e){const i=Bt("input",v0("ag-charts-input ag-charts-checkbox",e));return i.type="checkbox",i.checked=t.checked,i.addEventListener("change",s=>t.onChange(i.checked,s)),i.addEventListener("keydown",s=>{TI(s)&&(s.preventDefault(),i.click())}),Wh(i,e),i}function ptt(t,e){const i=Bt("select",v0("ag-charts-input ag-charts-select",e));return i.append(...t.options.map(s=>{const n=Bt("option");return n.value=s.value,n.textContent=s.label,n})),Ht(i,"data-preventdefault",!1),i.value=t.value,i.addEventListener("change",s=>t.onChange(i.value,s)),Wh(i,e),i}function gtt(t,e){const i=Bt("textarea",v0("ag-charts-input ag-charts-textarea",e));return i.value=t.value,i.addEventListener("input",s=>t.onChange(i.value,s)),Wh(i,e),Ht(i,"data-preventdefault",!1),i}function sG(t){const e=Bt("span",`ag-charts-icon ag-charts-icon-${t}`);return Ht(e,"aria-hidden",!0),e}function v0(t,e){return e==null?t:`${t} ${e.class}`}var ftt=k({"packages/ag-charts-community/src/dom/elements.ts"(){"use strict";R(),ru()}}),mtt=k({"packages/ag-charts-community/src/scale/scale.ts"(){"use strict"}}),S0,ytt=k({"packages/ag-charts-community/src/scene/shape/svgPath.ts"(){"use strict";aa(),_o(),S0=class extends Zs{constructor(t=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=t}get d(){return this._d}set d(t){if(t!==this._d){this._d=t,this.commands.length=0;for(const[e,i,s]of t.matchAll(/([A-Z])([0-9. ]*)/g)){const n=s.split(/\s+/g).map(Number);this.commands.push([i,n])}this.checkPathDirty()}}updatePath(){const{path:t,x:e,y:i}=this;t.clear();let s=e,n=i;for(const[a,o]of this.commands)switch(a){case"M":t.moveTo(e+o[0],i+o[1]),s=e+o[0];break;case"C":t.cubicCurveTo(e+o[0],i+o[1],e+o[2],i+o[3],e+o[4],i+o[5]),s=e+o[4],n=i+o[5];break;case"H":t.lineTo(e+o[0],n),s=i+o[0];break;case"L":t.lineTo(e+o[0],i+o[1]),s=e+o[0],n=i+o[1];break;case"V":t.lineTo(s,i+o[0]),n=i+o[0];break;case"Z":t.closePath();break;default:throw new Error(`Could not translate command '${a}' with '${o.join(" ")}'`)}t.closePath()}},S([ot()],S0.prototype,"x",2),S([ot()],S0.prototype,"y",2)}}),id,xtt=k({"packages/ag-charts-community/src/scene/image.ts"(){"use strict";za(),id=class extends er{constructor(t){super(),this.sourceImage=t,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(t){const{ctx:e}=t,i=this.sourceImage;i&&(e.globalAlpha=this.opacity,e.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(t)}},S([ot()],id.prototype,"x",2),S([ot()],id.prototype,"y",2),S([ot()],id.prototype,"width",2),S([ot()],id.prototype,"height",2),S([ot()],id.prototype,"opacity",2)}}),M0,nG=k({"packages/ag-charts-community/src/widget/menuItemWidget.ts"(){"use strict";R(),GE(),M0=class extends PI{constructor(){super(Bt("div"),"menuitem")}}}}),aG,Sw,btt=k({"packages/ag-charts-community/src/widget/menuWidget.ts"(){"use strict";R(),kI(),ru(),nG(),RI(),aG=["Escape","ArrowLeft"],Sw=class b5 extends Qb{constructor(e="vertical"){super(e,"menu"),this.closeSubMenu=i=>this.openSubMenu(i,void 0)}destructor(){this.selfClose("2")}addSeparator(){const e=So().createElement("div");return Ht(e,"role","separator"),this.elem.appendChild(e),e}onChildAdded(e){super.onChildAdded(e),e.hasPopup()||e.addListener("mouseenter",this.closeSubMenu)}onChildRemoved(e){super.onChildRemoved(e),e.hasPopup()||e.removeListener("mouseenter",this.closeSubMenu)}addSubMenu(){const e=new M0,i=Nf(),s=new b5(this.orientation),n=o=>{e.isDisabled()||this.openSubMenu(o,s)},a=o=>{Kf(o.sourceEvent)&&o.sourceEvent.code==="ArrowRight"&&n(o)};return e.setAriaHasPopup("menu"),e.setAriaExpanded(!1),e.setAriaControls(i),e.addListener("click",n),e.addListener("mouseenter",n),e.addListener("keydown",a),s.addListener("close-widget",()=>e.setAriaExpanded(!1)),s.addListener("open-widget",()=>e.setAriaExpanded(!0)),s.id=i,this.addChild(e),{subMenuButton:e,subMenu:s}}openSubMenu(e,i){const{openScope:s}=this;s&&(s.openSubMenu?.selfClose("4"),i?.open(e),s.openSubMenu=i)}open(e,i){const{overrideFocusVisible:s=void 0}=i??{};if(this.openScope!=null)return;this.openScope={lastFocus:Yb(e.sourceEvent),openSubMenu:void 0,abort:()=>this.selfClose("1"),close:()=>this.selfClose("0"),removers:new Hb};const n=this.children.map(a=>a.getElement());Ht(this.openScope.lastFocus,"aria-expanded",!0),CI(this.openScope.removers,this.elem,this.openScope.abort),LI(this.openScope.removers,this.elem,this.openScope.abort);for(const a of this.children)$b(this.openScope.removers,a.getElement(),this.openScope.close,aG);s!==void 0&&wI(this.openScope.removers,this.elem,n,s),this.internalListener?.dispatch("open-widget",this,{type:"open-widget"}),this.children[0]?.focus({preventScroll:!0})}selfClose(e){if(this.openScope===void 0)return;const{lastFocus:i,removers:s,openSubMenu:n}=this.openScope;this.openScope=void 0,n?.selfClose("3"),Ht(i,"aria-expanded",!1),e==="0"&&i?.focus({preventScroll:!0}),s.destroy(),this.internalListener?.dispatch("close-widget",this,{type:"close-widget"})}close(){this.selfClose("0")}}}}),oG={};cn(oG,{ButtonWidget:()=>yp,MenuItemWidget:()=>M0,MenuWidget:()=>Sw,NativeWidget:()=>cu,SliderWidget:()=>ev,ToolbarWidget:()=>Yf,WIDGET_HTML_EVENTS:()=>Rb,Widget:()=>Lo,WidgetEventUtil:()=>ar});var rG=k({"packages/ag-charts-community/src/widget/exports.ts"(){"use strict";qr(),Bb(),Jb(),zI(),qb(),KE(),btt(),nG()}}),Mw,D0,Dw=k({"packages/ag-charts-community/src/components/popover/popover.ts"(){"use strict";R(),tr(),ru(),Mw="canvas-overlay",D0=class extends Of{constructor(t,e,i){super(),this.ctx=t,this.hideFns=[],this.moduleId=`popover-${e}`,i?.detached?this.element=Bt("div"):this.element=t.domManager.addChild(Mw,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push(()=>t.domManager.removeChild(Mw,this.moduleId))}attachTo(t){this.element.parentElement||t.element.append(this.element)}hide(t){const{lastFocus:e=this.lastFocus}=t??{};this.element.children.length!==0&&(this.hideFns.forEach(i=>i()),e?.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(t,e){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=Bt("div","ag-charts-popover");if(e.ariaLabel!=null&&i.setAttribute("aria-label",e.ariaLabel),e.class!=null&&i.classList.add(e.class),i.replaceChildren(...t),this.element.replaceChildren(i),this.hideFns.push(()=>this.removeChildren()),e.onHide&&this.hideFns.push(e.onHide),e.initialFocus&&e.sourceEvent){const s=Yb(e.sourceEvent);s!==void 0&&(this.lastFocus=s,this.initialFocus=e.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(t){const e=this.getPopoverElement();e&&(e.style.setProperty("right","unset"),e.style.setProperty("bottom","unset"),t.x!=null&&e.style.setProperty("left",`${Math.floor(t.x)}px`),t.y!=null&&e.style.setProperty("top",`${Math.floor(t.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}}}}),kw,lG=k({"packages/ag-charts-community/src/components/popover/anchoredPopover.ts"(){"use strict";R(),Dw(),kw=class extends D0{setAnchor(t,e){this.anchor=t,this.fallbackAnchor=e,this.updatePosition(t),this.repositionWithinBounds()}showWithChildren(t,e){const i=e.anchor??this.anchor,s=e.fallbackAnchor??this.fallbackAnchor,n=super.showWithChildren(t,e);return i&&this.setAnchor(i,s),be().requestAnimationFrame(()=>{this.repositionWithinBounds()}),n}repositionWithinBounds(){const{anchor:t,ctx:e,fallbackAnchor:i}=this,s=this.getPopoverElement();if(!t||!s)return;const n=e.domManager.getBoundingClientRect(),{offsetWidth:a,offsetHeight:o}=s;let r=Nt(0,t.x,n.width-a),l=Nt(0,t.y,n.height-o);r!==t.x&&i?.x!=null&&(r=Nt(0,i.x-a,n.width-a)),l!==t.y&&i?.y!=null&&(l=Nt(0,i.y-o,n.height-o)),this.updatePosition({x:r,y:l})}}}}),cG,vtt=k({"packages/ag-charts-community/src/components/menu/menu.ts"(){"use strict";R(),iu(),ru(),lG(),cG=class extends kw{show(t){const e=t.items.map(s=>this.createRow(t,s)),i=this.showWithChildren(e,t);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=wE({orientation:"vertical",menu:i,buttons:e,sourceEvent:t.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push(()=>{this.menuCloser?.finishClosing(),this.menuCloser=void 0})}createRow(t,e){const{menuItemRole:i="menuitem"}=t,s=e.value===t.value,n=Bt("div","ag-charts-menu__row");if(n.setAttribute("role",i),i==="menuitemradio"&&n.setAttribute("aria-checked",(t.value===e.value).toString()),typeof e.value=="string"&&(n.dataset.popoverId=e.value),n.classList.toggle("ag-charts-menu__row--active",s),e.icon!=null){const l=Bt("span",`ag-charts-menu__icon ${Tb(e.icon)}`);n.appendChild(l)}const a=e.strokeWidth!=null;if(a&&(n.classList.toggle("ag-charts-menu__row--stroke-width-visible",a),n.style.setProperty("--strokeWidth",a?`${e.strokeWidth}px`:null)),e.label!=null){const l=Bt("span","ag-charts-menu__label");l.textContent=this.ctx.localeManager.t(e.label),n.appendChild(l)}"altText"in e&&(n.ariaLabel=this.ctx.localeManager.t(e.altText));const o=()=>{t.onPress?.(e)},r=l=>{TI(l)&&(o(),l.preventDefault(),l.stopPropagation())};return n.addEventListener("keydown",r),n.addEventListener("click",r),n.addEventListener("mousemove",()=>{n.focus({preventScroll:!0})}),n}}}}),Iw,hG=k({"packages/ag-charts-community/src/components/popover/draggablePopover.ts"(){"use strict";Zj(),Dw(),Iw=class extends D0{constructor(){super(...arguments),this.dragged=!1}setDragHandle(t){t.addListener("drag-start",e=>{t.addClass(this.dragHandleDraggingClass),this.onDragStart(e)}),t.addListener("drag-move",this.onDragMove.bind(this)),t.addListener("drag-end",()=>{t.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(t){const e=this.getPopoverElement();e&&(t.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:ed.from(t.clientX,t.clientY),position:ed.from(Number(e.style.getPropertyValue("left").replace("px","")),Number(e.style.getPropertyValue("top").replace("px","")))})}onDragMove(t){const{dragStartState:e}=this,i=this.getPopoverElement();if(!e||!i)return;const s=ed.sub(ed.from(t.clientX,t.clientY),e.client),n=ed.add(e.position,s),a=this.ctx.domManager.getBoundingClientRect(),o={};n.x>=0&&n.x+i.offsetWidth<=a.width&&(o.x=n.x),n.y>=0&&n.y+i.offsetHeight<=a.height&&(o.y=n.y),this.updatePosition(o)}onDragEnd(){this.dragStartState=void 0}}}}),yg,Stt=k({"packages/ag-charts-community/src/components/toolbar/toolbarButtonProperties.ts"(){"use strict";mt(),mt(),yg=class extends wt{},S([I],yg.prototype,"icon",2),S([I],yg.prototype,"label",2),S([I],yg.prototype,"ariaLabel",2),S([I],yg.prototype,"tooltip",2)}}),Aw,uG=k({"packages/ag-charts-community/src/components/toolbar/toolbarButtonWidget.ts"(){"use strict";R(),iu(),qb(),Aw=class extends yp{constructor(t){super(),this.localeManager=t}update(t){const{localeManager:e}=this;t.tooltip&&(this.elem.title=e.t(t.tooltip));let i="";if(t.icon!=null&&(i=`<span class="${Tb(t.icon)} ag-charts-toolbar__icon"></span>`),t.label!=null){const s=e.t(t.label);i=`${i}<span class="ag-charts-toolbar__label">${s}</span>`}this.elem.innerHTML=i}setChecked(t){Ht(this.elem,"aria-checked",t)}}}}),Cw,k0,dG,pG=k({"packages/ag-charts-community/src/components/toolbar/toolbar.ts"(){"use strict";Ft(),pc(),mt(),zI(),uG(),Cw="ag-charts-toolbar__button--active",k0=class extends Yf{constructor(t,e="horizontal"){super(e),this.localeManager=t,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new Qr,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",e==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",e==="vertical")}addToolbarListener(t,e){return this.events.addListener(t,e)}clearButtons(){for(const t of this.buttonWidgets)t.destroy();this.buttonWidgets.splice(0)}updateButtons(t){const{buttonWidgets:e}=this;for(const[i,s]of t.entries())(this.buttonWidgets.at(i)??this.createButton(i,s)).update(s);for(let i=t.length;i<e.length;i++)this.buttonWidgets.at(i)?.destroy();this.buttonWidgets.splice(t.length),this.refreshButtonClasses()}updateButtonByIndex(t,e){this.buttonWidgets.at(t)?.update(e)}clearActiveButton(){for(const t of this.buttonWidgets)t.toggleClass(Cw,!1)}toggleActiveButtonByIndex(t){if(t!==-1)for(const[e,i]of this.buttonWidgets.entries())i.toggleClass(Cw,t!=null&&t===e)}toggleButtonEnabledByIndex(t,e){t!==-1&&this.buttonWidgets.at(t)?.setEnabled(e)}toggleSwitchCheckedByIndex(t,e){t!==-1&&this.buttonWidgets.at(t)?.setChecked(e)}getButtonBounds(){return this.buttonWidgets.map(t=>this.getButtonWidgetBounds(t))}setButtonHiddenByIndex(t,e){this.buttonWidgets.at(t)?.setHidden(e)}getButtonWidgetBounds(t){const e=this.getBounds(),i=t.getBounds();return new ut(i.x+e.x,i.y+e.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:t,hasPrefix:e}=this;let i,s,n;for(const[a,o]of t.entries())i=!e&&a===0||n!=o.section,s=a===t.length-1||o.section!=t.at(a+1)?.section,o.toggleClass("ag-charts-toolbar__button--first",i),o.toggleClass("ag-charts-toolbar__button--last",s),o.toggleClass("ag-charts-toolbar__button--gap",a>0&&i),n=o.section}createButton(t,e){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",s=>{const n={index:t,...e instanceof wt?e.toJson():e},a=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:s,button:n,buttonBounds:a})}),i.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:t}})}),e.section&&(i.section=e.section),this.buttonWidgets.push(i),this.addChild(i),i}},dG=class extends k0{createButtonWidget(){return new Aw(this.localeManager)}}}}),gG,fG,mG,Mtt=k({"packages/ag-charts-community/src/components/toolbar/floatingToolbar.ts"(){"use strict";R(),Ft(),iu(),Jb(),hG(),pG(),gG=class extends Iw{constructor(t,e,i){super(t,e),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(t,e={}){this.showWithChildren(t,{...e,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const t=this.getPopoverElement();return new ut(t?.offsetLeft??0,t?.offsetTop??0,t?.offsetWidth??0,t?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(t,e,i){const s=this.getPopoverElement();if(!s)return;const n=t.position??"above",{offsetWidth:a,offsetHeight:o}=s;let r=t.y-o-i,l=t.x-a/2;n==="below"?r=t.y+i:n==="right"?(r=t.y-o/2,l=t.x+e):n==="above-left"&&(l=t.x),this.updatePosition({x:l,y:r})}ignorePointerEvents(){const t=this.getPopoverElement();t&&(t.style.pointerEvents="none")}capturePointerEvents(){const t=this.getPopoverElement();t&&(t.style.pointerEvents="unset")}updatePosition(t){const e=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();t.x=Math.floor(Nt(0,t.x,i.width-e.width)),t.y=Math.floor(Nt(0,t.y,i.height-e.height)),super.updatePosition(t),this.onPopoverMoved()}},fG=class extends k0{constructor(t,e){super(t.localeManager),this.hasPrefix=!0,this.popover=new gG(t,e,this.onPopoverMoved.bind(this)),this.dragHandle=new mG(t.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(t={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],t)}hide(){this.popover.hide()}setAnchor(t){this.popover.setAnchor(t,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){const t=this.popover.getBounds();if(this.popoverBounds?.equals(t))return;this.popoverBounds=t.clone();const e=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:t,buttonBounds:e})}getButtonWidgetBounds(t){const e=this.popover.getBounds(),i=super.getButtonWidgetBounds(t),s=this.dragHandle.getBounds();return new ut(i.x+e.x-s.width,i.y+e.y,i.width,i.height)}},mG=class extends cu{constructor(t){super(Bt("div","ag-charts-floating-toolbar__drag-handle"));const e=new cu(Bt("span",`${Tb("drag-handle")} ag-charts-toolbar__icon`));e.setAriaHidden(!0),this.addChild(e),this.elem.title=t}}}}),yG={};cn(yG,{AbstractBarSeries:()=>EL,AbstractBarSeriesProperties:()=>DS,ActionOnSet:()=>wn,AnchoredPopover:()=>kw,Animation:()=>XI,AnimationManager:()=>tA,Arc:()=>Go,Axis:()=>Rv,AxisGroupZIndexMap:()=>oC,AxisInterval:()=>vc,AxisLabel:()=>Ii,AxisTick:()=>Sc,AxisTickGenerator:()=>hC,AxisTicks:()=>tG,BBox:()=>ut,BBoxValues:()=>rc,Background:()=>Eu,BackgroundModule:()=>KC,BandScale:()=>Ip,BarSeries:()=>cg,BarSeriesModule:()=>GL,BaseModuleInstance:()=>Of,BaseProperties:()=>wt,BaseToolbar:()=>k0,ButtonWidget:()=>yp,CachedTextMeasurer:()=>vI,CachedTextMeasurerPool:()=>wo,CallbackCache:()=>WI,Caption:()=>_e,CartesianAxis:()=>_p,CartesianSeries:()=>Ml,CartesianSeriesNodeEvent:()=>dS,CartesianSeriesProperties:()=>br,CategoryAxis:()=>cl,CategoryScale:()=>Bp,ChangeDetectableProperties:()=>cS,Chart:()=>vm,ChartAxisDirection:()=>Vb,ChartEventManager:()=>eA,ChartOptions:()=>p0,ChartUpdateType:()=>bp,CollapseMode:()=>uL,Color:()=>ue,ColorScale:()=>qh,ConicGradient:()=>tI,ContextMenuBuiltins:()=>iA,ContextMenuRegistry:()=>sA,ContinuousScale:()=>ye,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Tc,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Nc,DEFAULT_TOOLTIP_CLASS:()=>os,DEFAULT_TOOLTIP_DARK_CLASS:()=>IC,DIRECTION_SWAP_AXES:()=>tL,DOMManager:()=>EI,DataController:()=>FA,DataModel:()=>BA,DataModelSeries:()=>uS,DataService:()=>Xf,Debug:()=>ne,Deprecated:()=>MB,DeprecatedAndRenamedTo:()=>y8,DiscreteTimeScale:()=>ja,DragInterpreter:()=>hA,DraggablePopover:()=>Iw,DropShadow:()=>Ya,ExtendedPath2D:()=>Qh,FILL_IMAGE_DEFAULTS:()=>Lc,FILL_PATTERN_DEFAULTS:()=>yl,FONT_SIZE_RATIO:()=>tS,FillGradientDefaults:()=>ya,FillImageDefaults:()=>gn,FillPatternDefaults:()=>Ee,FloatingToolbar:()=>fG,Gradient:()=>Ff,Group:()=>Ot,GroupedCategoryAxis:()=>Ac,HdpiCanvas:()=>sv,HierarchyNode:()=>Xj,HierarchySeries:()=>qj,HierarchySeriesProperties:()=>Ja,HighlightManager:()=>nA,HighlightProperties:()=>hS,HighlightStyle:()=>ag,Image:()=>id,InteractionManager:()=>JI,InteractionState:()=>QI,InterpolationProperties:()=>zu,Invalidating:()=>cp,LARGEST_KEY_INTERVAL:()=>GC,Label:()=>Vi,LayoutElement:()=>Wb,LayoutManager:()=>DI,LegendMarkerLabel:()=>fa,Line:()=>ws,LineSeries:()=>ug,LineSeriesModule:()=>JL,LinearGradient:()=>eI,LinearScale:()=>$a,Listeners:()=>Qr,LogScale:()=>Xv,LonLatBBox:()=>Qj,Marker:()=>Wi,Menu:()=>cG,MenuItemWidget:()=>M0,MenuWidget:()=>Sw,MercatorScale:()=>Jj,ModuleRegistry:()=>Gs,Motion:()=>UI,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Va,NativeWidget:()=>cu,NewAreaSeriesModule:()=>wL,NewBarSeriesModule:()=>VL,NewBubbleSeriesModule:()=>$L,NewHistogramSeriesModule:()=>XL,NewLineSeriesModule:()=>t2,NewScatterSeriesModule:()=>n2,NiceMode:()=>nC,Node:()=>er,NumberAxis:()=>mr,ObserveChanges:()=>dc,OrdinalTimeScale:()=>lm,PHASE_METADATA:()=>Mp,PHASE_ORDER:()=>hu,PREV_NEXT_KEYS:()=>ou,Padding:()=>Xr,ParallelStateMachine:()=>wR,Path:()=>Zs,PointerEvents:()=>Yk,PolarAxis:()=>Hu,PolarSeries:()=>my,PolarZIndexMap:()=>u2,Popover:()=>D0,PropertiesArray:()=>up,Property:()=>I,ProxyInteractionService:()=>FI,ProxyOnWrite:()=>x6,ProxyProperty:()=>me,ProxyPropertyOnWrite:()=>us,QUICK_TRANSITION:()=>qf,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>Gm,RadialColumnShape:()=>ba,Range:()=>Wa,Rect:()=>Ts,RepeatType:()=>ZI,Rotatable:()=>fp,RotatableGroup:()=>H_,RotatableText:()=>SI,SAFE_FILLS_OPERATION:()=>rS,SAFE_FILL_OPERATION:()=>Vz,SAFE_RANGE2_OPERATION:()=>Wz,SAFE_STROKE_FILL_OPERATION:()=>zm,SKIP_JS_BUILTINS:()=>db,SMALLEST_KEY_INTERVAL:()=>jC,SORT_DOMAIN_GROUPS:()=>VC,Scalable:()=>lI,ScalableGroup:()=>W_,Scene:()=>Zf,SceneArrayChangeDetection:()=>$k,SceneChangeDetection:()=>ot,SceneObjectChangeDetection:()=>na,Sector:()=>rs,SectorBox:()=>o2,Selection:()=>gi,Series:()=>fm,SeriesContentZIndexMap:()=>xC,SeriesGroupingChangedEvent:()=>Gv,SeriesItemHighlightStyle:()=>xr,SeriesMarker:()=>Hi,SeriesNodeEvent:()=>Ep,SeriesNodePickMode:()=>bC,SeriesProperties:()=>Pn,SeriesTooltip:()=>Ns,SeriesZIndexMap:()=>yC,Shape:()=>ra,SimpleTextMeasurer:()=>jb,SliderWidget:()=>ev,StateMachine:()=>Lp,StateMachineProperty:()=>D9,StopProperties:()=>vb,SvgPath:()=>S0,TRIPLE_EQ:()=>Zh,Text:()=>Gi,TextUtils:()=>Te,TextWrapper:()=>Gb,ThemeConstants:()=>jz,ThemeSymbols:()=>JC,TimeAxisParentLevel:()=>_u,TimeScale:()=>Op,Toolbar:()=>dG,ToolbarButtonProperties:()=>yg,ToolbarButtonWidget:()=>Aw,ToolbarWidget:()=>Yf,Tooltip:()=>da,TooltipManager:()=>Qf,TooltipPosition:()=>pr,Transformable:()=>Ve,TransformableGroup:()=>eu,TransformableText:()=>su,Translatable:()=>tu,TranslatableGroup:()=>ss,TranslatableLine:()=>cB,UnitTimeScale:()=>En,UpdateService:()=>NA,Vec2:()=>ed,Vec4:()=>Ap,WIDGET_HTML_EVENTS:()=>Rb,Widget:()=>Lo,WidgetEventUtil:()=>ar,ZIndexMap:()=>HI,ZoomManager:()=>TA,accumulateGroup:()=>gz,accumulateStack:()=>fz,accumulatedValue:()=>az,accumulativeValueProperty:()=>Mm,addEscapeEventListener:()=>$b,addHitTestersToQuadtree:()=>NL,addMouseCloseListener:()=>CI,addOverrideFocusVisibleEventListener:()=>wI,addTouchCloseListener:()=>LI,adjustLabelPlacement:()=>LF,angleBetween:()=>pb,angleCategoryAxisOptionsDefs:()=>L2,angleNumberAxisOptionsDefs:()=>C2,angularPadding:()=>Zk,animationValidation:()=>Fp,annotationCalloutStylesDefs:()=>R2,annotationChannelStyleDefs:()=>a0,annotationChannelTextDefs:()=>N2,annotationCommentStylesDefs:()=>B2,annotationCrossLineStyleDefs:()=>n0,annotationDisjointChannelStyleDefs:()=>E2,annotationFibonacciStylesDefs:()=>o0,annotationLineStyleDefs:()=>Cy,annotationLineTextDefs:()=>Ay,annotationMeasurerStylesDefs:()=>Ly,annotationNoteStylesDefs:()=>z2,annotationOptionsDef:()=>Qu,annotationParallelChannelStyleDefs:()=>P2,annotationQuickMeasurerStylesDefs:()=>F2,annotationShapeStylesDefs:()=>r0,annotationTextStylesDef:()=>mg,applyShapeFillBBox:()=>jv,applyShapeStyle:()=>Cu,areScalingEqual:()=>Fu,area:()=>RC,autoSizedLabelOptionsDefs:()=>Il,boxPlotSeriesThemeableOptionsDef:()=>j2,buildFormatter:()=>tm,buildResetPathFn:()=>bL,calculateDataDiff:()=>zL,calculateDefaultTimeTickFormat:()=>tR,calculateDerivativeExtrema:()=>nI,calculateDerivativeExtremaXY:()=>E_,calculateLabelTranslation:()=>ltt,calculatePlacement:()=>kB,callWithContext:()=>av,candlestickSeriesThemeableOptionsDef:()=>V2,cartesianAxisCrosshairOptions:()=>Oc,cartesianAxisLabelOptionsDefs:()=>og,cartesianAxisOptionsDefs:()=>Mr,cartesianChartOptionsDefs:()=>M2,cartesianCrossLineOptionsDefs:()=>Sr,cartesianNumericAxisLabel:()=>vS,cartesianTimeAxisLabel:()=>rg,cartesianTimeAxisParentLevel:()=>Jm,checkCrisp:()=>IF,chordSeriesThemeableOptionsDef:()=>W2,clampArray:()=>uA,clippedRoundRect:()=>Cm,collapsedStartingBarPosition:()=>ly,commonAxisLabelOptionsDefs:()=>Pc,commonAxisOptionsDefs:()=>kl,commonChartOptionsDefs:()=>It,commonCrossLineLabelOptionsDefs:()=>Ec,commonCrossLineOptionsDefs:()=>Bo,commonSeriesOptionsDefs:()=>Bn,commonSeriesThemeableOptionsDefs:()=>Zt,compareDates:()=>Lv,computeBarFocusBounds:()=>RL,computeMarkerFocusBounds:()=>Xm,coneFunnelSeriesThemeableOptionsDef:()=>H2,continuousAxisOptions:()=>_c,countExpandingSearch:()=>_P,createButton:()=>utt,createCheckbox:()=>dtt,createDatumId:()=>pa,createDeprecationWarning:()=>vC,createIcon:()=>sG,createSelect:()=>ptt,createTextArea:()=>gtt,dateToNumber:()=>Ks,datesSortOrder:()=>ZA,datumKeys:()=>gv,datumStylerProperties:()=>fc,deconstructSelectionsOrNodes:()=>rv,deepClone:()=>Oe,deepFreeze:()=>Yh,defaultTimeTickFormat:()=>AA,diff:()=>jp,drawCorner:()=>Wp,drawMarkerUnitPolygon:()=>xm,easing:()=>UI,enterpriseModule:()=>Cl,errorBarOptionsDefs:()=>oy,errorBarThemeableOptionsDefs:()=>lg,evaluateBezier:()=>Sb,extent:()=>hl,extractDecoratedProperties:()=>m_,fillsOptionsDef:()=>dg,findMinMax:()=>ns,findQuadtreeMatch:()=>OL,findRangeExtent:()=>Dp,fixNumericExtent:()=>_n,flowProportionChartOptionsDefs:()=>H4,focusCursorAtEnd:()=>XY,formatNumber:()=>UE,formatPercent:()=>HE,formatValue:()=>tl,fromToMotion:()=>He,funnelSeriesThemeableOptionsDef:()=>U2,gaugeChartOptionsDefs:()=>U4,getAngleRatioRadians:()=>b_,getColorStops:()=>I_,getCrossLineValue:()=>VR,getDateTicksForInterval:()=>JA,getDatumRefPoint:()=>aA,getElementBBox:()=>U_,getIconClassNames:()=>Tb,getLastFocus:()=>Yb,getMissCount:()=>EA,getPath:()=>op,getPathComponents:()=>bR,getRadialColumnWidth:()=>Uj,getSequentialColors:()=>ma,getShapeFill:()=>Au,getShapeStyle:()=>dr,groupAccumulativeValueProperty:()=>Ic,groupAverage:()=>nz,groupCount:()=>PC,groupStackValueProperty:()=>dz,groupSum:()=>sz,hasNoModifiers:()=>Kf,heatmapSeriesThemeableOptionsDef:()=>$2,hierarchyChartOptionsDefs:()=>W4,initMenuKeyNav:()=>wE,initRovingTabIndex:()=>LE,interpolatePoints:()=>pS,interpolationOptionsDefs:()=>ry,isAgFlowProportionChartOptions:()=>fB,isAgGaugeChartOptions:()=>gC,isAgHierarchyChartOptions:()=>pB,isAgStandaloneChartOptions:()=>pC,isAgTopologyChartOptions:()=>gB,isBetweenAngles:()=>lc,isButtonClickEvent:()=>TI,isChartAxisDirection:()=>N6,isContinuous:()=>_v,isDecoratedObject:()=>cb,isDenseInterval:()=>Np,isGradientFill:()=>Ao,isGradientOrPatternFill:()=>ZY,isImageFill:()=>pp,isInputPending:()=>$_,isObjectWithProperty:()=>x_,isObjectWithStringProperty:()=>AY,isPatternFill:()=>Jh,isProperties:()=>hp,isScaleValid:()=>Um,jsonApply:()=>Wf,jsonDiff:()=>sr,jsonPropertyCompare:()=>K_,jsonResolveOperations:()=>Nb,jsonWalk:()=>nr,keyProperty:()=>Po,legendSymbolSvg:()=>TB,lineDistanceSquared:()=>Gf,linearGaugeSeriesOptionsDef:()=>Al,linearGaugeSeriesThemeableOptionsDef:()=>My,linearGaugeTargetOptionsDef:()=>vy,listDecoratedProperties:()=>Kh,makeAccessibleClickListener:()=>F6,mapLineBackgroundSeriesThemeableOptionsDef:()=>Z2,mapLineSeriesThemeableOptionsDef:()=>Y2,mapMarkerSeriesThemeableOptionsDef:()=>X2,mapShapeBackgroundSeriesThemeableOptionsDef:()=>Q2,mapShapeSeriesThemeableOptionsDef:()=>q2,mapValues:()=>y_,markerFadeInAnimation:()=>Km,markerOptionsDefs:()=>Dr,markerScaleInAnimation:()=>mL,markerSwipeScaleInAnimation:()=>yL,merge:()=>Rf,mergeArrayDefaults:()=>ub,mergeDefaults:()=>Kt,midpointStartingBarPosition:()=>Oq,moduleRegistry:()=>Io,motion:()=>xG,nearestSquared:()=>ob,nearestSquaredInContainer:()=>kY,nightingaleSeriesThemeableOptionsDef:()=>J2,normaliseGroupTo:()=>Kv,normalisePropertyTo:()=>Tu,normalisedExtentWithMetadata:()=>_C,normalizeAngle180:()=>Bf,normalizeAngle360:()=>di,normalizeAngle360FromDegrees:()=>Yr,normalizeAngle360Inclusive:()=>OY,normalizeContinuousDomains:()=>dA,numberFormatValidator:()=>Dl,objectsEqual:()=>hn,objectsEqualWith:()=>Wk,ohlcSeriesThemeableOptionsDef:()=>K2,ordinalTimeAxisOptionsDefs:()=>Xu,pairUpSpans:()=>Hm,partialAssign:()=>Uk,pathFadeInAnimation:()=>yS,pathMotion:()=>lS,pathSwipeInAnimation:()=>xL,pickByMatchingAngle:()=>c2,plotAreaPathFill:()=>mF,plotInterpolatedAreaSeriesFillSpans:()=>mS,plotInterpolatedLinePathStroke:()=>gS,plotLinePathStroke:()=>pL,polarChartOptionsDefs:()=>D2,prepareAreaFillAnimationFns:()=>yF,prepareAreaPathAnimation:()=>xF,prepareAxisAnimationContext:()=>qR,prepareAxisAnimationFunctions:()=>QR,prepareBarAnimationFunctions:()=>cy,prepareLinePathAnimation:()=>fF,prepareLinePathPropertyAnimation:()=>fL,prepareLinePathStrokeAnimationFns:()=>gL,preparePieSeriesAnimationFunctions:()=>Vu,pyramidSeriesThemeableOptionsDef:()=>tw,radarAreaSeriesThemeableOptionsDef:()=>ew,radarLineSeriesThemeableOptionsDef:()=>iw,radialBarSeriesThemeableOptionsDef:()=>sw,radialColumnSeriesThemeableOptionsDef:()=>nw,radialGaugeSeriesOptionsDef:()=>pg,radialGaugeSeriesThemeableOptionsDef:()=>Dy,radialGaugeTargetOptionsDef:()=>Sy,radiusCategoryAxisOptionsDefs:()=>T2,radiusNumberAxisOptionsDefs:()=>w2,range:()=>wv,rangeAreaSeriesThemeableOptionsDef:()=>aw,rangeBarSeriesThemeableOptionsDef:()=>ow,rangeValidator:()=>iy,rangedValueProperty:()=>zC,resetAxisGroupFn:()=>JR,resetAxisLabelSelectionFn:()=>Ev,resetAxisLineSelectionFn:()=>sC,resetBarSelectionsFn:()=>hy,resetLabelFn:()=>xl,resetMarkerFn:()=>Ym,resetMarkerPositionFn:()=>Zm,resetMotion:()=>as,resetPieSelectionsFn:()=>l2,rowCountProperty:()=>hz,sankeySeriesThemeableOptionsDef:()=>rw,scale:()=>Xs,sectorBox:()=>XF,seriesLabelFadeInAnimation:()=>de,seriesLabelFadeOutAnimation:()=>wc,seriesLabelOptionsDefs:()=>pe,setElementBBox:()=>wb,setPath:()=>Hk,shadowOptionsDefs:()=>zo,shallowClone:()=>hI,solveBezier:()=>Mb,sortAndUniqueDates:()=>YA,splitBezier:()=>Db,standaloneChartOptionsDefs:()=>V4,staticFromToMotion:()=>nl,stopPageScrolling:()=>TE,sum:()=>P8,sumValues:()=>$v,sunburstSeriesThemeableOptionsDef:()=>lw,timeIntervalUnit:()=>bS,toDegrees:()=>_Y,toRadians:()=>ji,toolbarButtonOptionsDefs:()=>Rc,tooltipContentAriaLabel:()=>_B,tooltipHtml:()=>RB,tooltipOptionsDefs:()=>ee,topologyChartOptionsDefs:()=>G4,trailingAccumulatedValue:()=>oz,trailingAccumulatedValueProperty:()=>z8,treemapSeriesThemeableOptionsDef:()=>cw,updateClipPath:()=>xS,updateLabelNode:()=>CF,validateCrossLineValue:()=>WR,valueProperty:()=>Yt,visibleRangeIndices:()=>OP,waterfallSeriesThemeableOptionsDef:()=>hw,without:()=>ft});var xG,Dtt=k({"packages/ag-charts-community/src/module-support.ts"(){"use strict";Ls(),Mu(),Wv(),Im(),ku(),R(),y2(),zn(),ju(),wj(),ju(),k2(),Oj(),_j(),TL(),KL(),qL(),a2(),pi(),ov(),XA(),ap(),iu(),DB(),gr(),gc(),Ln(),ru(),pc(),rb(),la(),Rt(),IB(),mt(),un(),am(),im(),Hs(),MI(),uv(),mt(),Zj(),LA(),VJ(),WJ(),HJ(),UJ(),Gj(),$J(),tr(),KJ(),YJ(),A2(),Nz(),Oz(),ZJ(),mE(),aC(),hB(),Ga(),vR(),pP(),fr(),BC(),fR(),xE(),kP(),IP(),wP(),LP(),RP(),TP(),MP(),oA(),rR(),FZ(),Lu(),XJ(),bl(),vl(),jm(),Sl(),qJ(),r8(),du(),RF(),WL(),$m(),PL(),Rn(),UF(),e2(),fS(),dL(),BL(),bF(),FL(),qm(),TF(),vL(),_L(),oL(),aL(),jS(),h2(),Wq(),QJ(),JJ(),ttt(),ett(),itt(),stt(),ntt(),att(),ll(),rC(),eC(),dm(),iC(),tj(),kc(),Zv(),gm(),Vp(),ott(),rtt(),HR(),ctt(),htt(),NB(),bm(),uu(),Sp(),Mu(),Ls(),eL(),FE(),ftt(),XE(),Gz(),dP(),bc(),Xh(),Fi(),cm(),gp(),ip(),fI(),sI(),Nv(),UC(),sm(),Sm(),Us(),xu(),Ov(),Cv(),xb(),Nu(),mtt(),qk(),ng(),iL(),za(),aa(),hs(),al(),bb(),A_(),M_(),S_(),_S(),Tz(),ytt(),Nn(),Us(),Ov(),Oo(),Eo(),wB(),Pz(),bm(),ZF(),eP(),xtt(),Ib(),kb(),Sp(),nu(),Ft(),We(),VI(),Hj(),xc(),GR(),_o(),$j(),Lm(),PS(),hc(),fi(),si(),Gz(),rG(),vtt(),lG(),hG(),Dw(),Stt(),uG(),pG(),Mtt(),xG={...CR,...LR}}}),_={};cn(_,{AG_CHARTS_LOCALE_EN_US:()=>jI,AgCharts:()=>Tl,AgChartsCommunityModule:()=>bG,AgErrorBarSupportedSeriesTypes:()=>g4,AgTooltipAnchorToType:()=>WS,AgTooltipPlacementType:()=>HS,AgTooltipPositionType:()=>US,VERSION:()=>au,_ModuleSupport:()=>yG,_Scene:()=>fw,_Theme:()=>mw,_Util:()=>yw,_Widget:()=>oG,setupCommunityModules:()=>f2,time:()=>MA});var bG,E=k({"packages/ag-charts-community/src/main.ts"(){"use strict";vJ(),p4(),SJ(),DJ(),kJ(),Ub(),qE(),m2(),il(),Dtt(),rG(),bG={VERSION:au,_Scene:fw,_Theme:mw,_Util:yw,create:Tl.create.bind(Tl),createSparkline:Tl.__createSparkline.bind(Tl),setup:f2,isEnterprise:!1}}}),I0=Object.defineProperty,vG=Object.getOwnPropertyDescriptor,ktt=Object.getOwnPropertyNames,Itt=Object.prototype.hasOwnProperty,Att=(t,e)=>{for(var i in e)I0(t,i,{get:e[i],enumerable:!0})},Lw=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ktt(e))!Itt.call(t,n)&&n!==i&&I0(t,n,{get:()=>e[n],enumerable:!(s=vG(e,n))||s.enumerable});return t},Ctt=(t,e,i)=>(Lw(t,e,"default"),i&&Lw(i,e,"default")),Ltt=t=>Lw(I0({},"__esModule",{value:!0}),t),m=(t,e,i,s)=>{for(var n=s>1?void 0:s?vG(e,i):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&I0(e,i,n),n},ww={};Att(ww,{AgChartsEnterpriseModule:()=>PMt,LicenseManager:()=>EMt,setupEnterpriseModules:()=>JK}),vo.exports=Ltt(ww);var Nl=(E(),w(_)),wtt=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],s=t[1],n=t[2],a=t[3];i=this.ff(i,s,n,a,e[0],7,-680876936),a=this.ff(a,i,s,n,e[1],12,-389564586),n=this.ff(n,a,i,s,e[2],17,606105819),s=this.ff(s,n,a,i,e[3],22,-1044525330),i=this.ff(i,s,n,a,e[4],7,-176418897),a=this.ff(a,i,s,n,e[5],12,1200080426),n=this.ff(n,a,i,s,e[6],17,-1473231341),s=this.ff(s,n,a,i,e[7],22,-45705983),i=this.ff(i,s,n,a,e[8],7,1770035416),a=this.ff(a,i,s,n,e[9],12,-1958414417),n=this.ff(n,a,i,s,e[10],17,-42063),s=this.ff(s,n,a,i,e[11],22,-1990404162),i=this.ff(i,s,n,a,e[12],7,1804603682),a=this.ff(a,i,s,n,e[13],12,-40341101),n=this.ff(n,a,i,s,e[14],17,-1502002290),s=this.ff(s,n,a,i,e[15],22,1236535329),i=this.gg(i,s,n,a,e[1],5,-165796510),a=this.gg(a,i,s,n,e[6],9,-1069501632),n=this.gg(n,a,i,s,e[11],14,643717713),s=this.gg(s,n,a,i,e[0],20,-373897302),i=this.gg(i,s,n,a,e[5],5,-701558691),a=this.gg(a,i,s,n,e[10],9,38016083),n=this.gg(n,a,i,s,e[15],14,-660478335),s=this.gg(s,n,a,i,e[4],20,-405537848),i=this.gg(i,s,n,a,e[9],5,568446438),a=this.gg(a,i,s,n,e[14],9,-1019803690),n=this.gg(n,a,i,s,e[3],14,-187363961),s=this.gg(s,n,a,i,e[8],20,1163531501),i=this.gg(i,s,n,a,e[13],5,-1444681467),a=this.gg(a,i,s,n,e[2],9,-51403784),n=this.gg(n,a,i,s,e[7],14,1735328473),s=this.gg(s,n,a,i,e[12],20,-1926607734),i=this.hh(i,s,n,a,e[5],4,-378558),a=this.hh(a,i,s,n,e[8],11,-2022574463),n=this.hh(n,a,i,s,e[11],16,1839030562),s=this.hh(s,n,a,i,e[14],23,-35309556),i=this.hh(i,s,n,a,e[1],4,-1530992060),a=this.hh(a,i,s,n,e[4],11,1272893353),n=this.hh(n,a,i,s,e[7],16,-155497632),s=this.hh(s,n,a,i,e[10],23,-1094730640),i=this.hh(i,s,n,a,e[13],4,681279174),a=this.hh(a,i,s,n,e[0],11,-358537222),n=this.hh(n,a,i,s,e[3],16,-722521979),s=this.hh(s,n,a,i,e[6],23,76029189),i=this.hh(i,s,n,a,e[9],4,-640364487),a=this.hh(a,i,s,n,e[12],11,-421815835),n=this.hh(n,a,i,s,e[15],16,530742520),s=this.hh(s,n,a,i,e[2],23,-995338651),i=this.ii(i,s,n,a,e[0],6,-198630844),a=this.ii(a,i,s,n,e[7],10,1126891415),n=this.ii(n,a,i,s,e[14],15,-1416354905),s=this.ii(s,n,a,i,e[5],21,-57434055),i=this.ii(i,s,n,a,e[12],6,1700485571),a=this.ii(a,i,s,n,e[3],10,-1894986606),n=this.ii(n,a,i,s,e[10],15,-1051523),s=this.ii(s,n,a,i,e[1],21,-2054922799),i=this.ii(i,s,n,a,e[8],6,1873313359),a=this.ii(a,i,s,n,e[15],10,-30611744),n=this.ii(n,a,i,s,e[6],15,-1560198380),s=this.ii(s,n,a,i,e[13],21,1309151649),i=this.ii(i,s,n,a,e[4],6,-145523070),a=this.ii(a,i,s,n,e[11],10,-1120210379),n=this.ii(n,a,i,s,e[2],15,718787259),s=this.ii(s,n,a,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(s,t[1]),t[2]=this.add32(n,t[2]),t[3]=this.add32(a,t[3])}cmn(t,e,i,s,n,a){return e=this.add32(this.add32(e,t),this.add32(s,a)),this.add32(e<<n|e>>>32-n,i)}ff(t,e,i,s,n,a,o){return this.cmn(e&i|~e&s,t,e,n,a,o)}gg(t,e,i,s,n,a,o){return this.cmn(e&s|i&~s,t,e,n,a,o)}hh(t,e,i,s,n,a,o){return this.cmn(e^i^s,t,e,n,a,o)}ii(t,e,i,s,n,a,o){return this.cmn(i^(e|~s),t,e,n,a,o)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=t.length;s+=64)this.md5cycle(i,this.md5blk(t.substring(s-64,s)));t=t.substring(s-64);const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)n[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,n),s=0;s<16;s++)n[s]=0;return n[14]=e*8,this.md5cycle(i,n),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=e[t>>s*8+4&15]+e[t>>s*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function Tw(t){return t==null||t.length===0}var A0={"01":"GRID","02":"CHARTS","0102":"BOTH"},SG="https://www.ag-grid.com/charts/licensing/",Nw=class Qi{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new wtt,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(Qi.licenseKey,Qi.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`;let s="";if(e.suppliedLicenseType==="BOTH"?s="AG Grid and AG Charts Enterprise":e.suppliedLicenseType==="GRID"?s="AG Grid Enterprise":e.suppliedLicenseType!==void 0&&(s="AG Charts Enterprise"),e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const n=Qi.getChartsReleaseDate(),a=Qi.formatDate(n);this.outputExpiredKey(e.expiry,a,s)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,s):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,s)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(Qi.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const s=i.length-32,n=i.substring(s),a=i.substring(0,s),[o,r,l]=Qi.extractBracketedInformation(i);return{md5:n,license:a,version:o,isTrial:r,type:l}}getLicenseDetails(e,i=!1){const s="CHARTS";if(Tw(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:s};const n=Qi.getChartsReleaseDate(),{md5:a,license:o,version:r,isTrial:l,type:c}=Qi.extractLicenseComponents(e);let h=a===this.md5.md5(o)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,u,d,p=null,g=!1,f;function x(){u=p<new Date,d=void 0}if(h&&(p=Qi.extractExpiry(o),h=!isNaN(p.getTime()),h))switch(d=n>p,r){case"legacy":case"2":{h=!1;break}case"3":Tw(c)?h=!1:(f=c,c!==A0["02"]&&c!==A0["0102"]?(h=!1,g=!0):l&&x())}return h?{licenseKey:e,valid:h,expiry:Qi.formatDate(p),expired:d,version:r,isTrial:l,trialExpired:u,invalidLicenseTypeForCombo:i?f!=="BOTH":void 0,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}:{licenseKey:e,valid:h,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isE2ETest()&&!this.isWebsiteUrl()&&!Tw(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage??""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView??window;if(!e)return"localhost";const i=e.location,{hostname:s=""}=i;return s}isForceWatermark(){if(!this.document)return!1;const e=this.document?.defaultView??typeof window<"u"?window:void 0;if(!e)return!1;const{pathname:i}=e.location;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){const e=this.getHostname();return/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(e)!==null}isLocalhost(){const e=this.getHostname();return/^(?:127\.0\.0\.1|localhost)$/.exec(e)!==null}isE2ETest(){const e=this.getHostname();return/^(?:172\.17\.0\.1|host\.docker\.internal)$/.exec(e)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=e.getDate(),n=e.getMonth(),a=e.getFullYear();return s+" "+i[n]+" "+a}static getChartsReleaseDate(){return new Date(parseInt(Qi.decode(Qi.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,a,o,r,l,c,h,u=0;const d=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<d.length;)r=i.indexOf(d.charAt(u++)),l=i.indexOf(d.charAt(u++)),c=i.indexOf(d.charAt(u++)),h=i.indexOf(d.charAt(u++)),n=r<<2|l>>4,a=(l&15)<<4|c>>2,o=(c&3)<<6|h,s=s+String.fromCharCode(n),c!=64&&(s=s+String.fromCharCode(a)),h!=64&&(s=s+String.fromCharCode(o));return s=Qi.utf8_decode(s),s}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);n<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(n&63|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(n&63|128))}return i}static setGridContext(e=!1){Qi.gridContext=e}static setLicenseKey(e){Qi.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const s=i.filter(r=>r==="TRIAL").length===1,n=i.filter(r=>r.startsWith("v"))[0],a=n?n.replace("v",""):"legacy",o=A0[i.filter(r=>A0[r])[0]];return[a,s,o]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",s=""){console.error(e.padEnd(this.totalMessageLength-s.length,i)+s)}outputInvalidLicenseKey(e,i,s){Qi.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${s} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${SG}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${SG}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,s){Qi.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${s} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){Qi.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,s){Qi.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};Nw.RELEASE_INFORMATION="MTc0OTAyMzU3MDQyNA==",Nw.gridContext=!1;var xg=Nw,bg=(E(),w(_)),Ttt=(E(),w(_)),MG=(R(),w(nt));function Ow(t,e,i){const s=(a,o,r,l)=>{let c=t[0];for(let h=a;r>0?h<=o:h>o;h+=r){const u=t[h];if(l(c,u))return!0;c=u}return!1},n=Math.floor(t.length/2);return s(e,n,e,i)?!0:s(t.length-e,n,-e,i)}var Ntt=(E(),w(_)),{AxisInterval:Ott,Property:_tt}=Ntt._ModuleSupport,_w=class extends Ott{};m([_tt],_w.prototype,"minSpacing",2);var C0=(E(),w(_)),sd=(R(),w(nt)),DG=(E(),w(_)),Ew=(R(),w(nt)),Ett=(E(),w(_)),Ptt=(R(),w(nt)),{BaseProperties:kG,ChartAxisDirection:Rtt,Property:mi,Group:Pw}=Ett._ModuleSupport,Vo=class extends kG{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};m([mi],Vo.prototype,"enabled",2),m([mi],Vo.prototype,"text",2),m([mi],Vo.prototype,"fontStyle",2),m([mi],Vo.prototype,"fontWeight",2),m([mi],Vo.prototype,"fontSize",2),m([mi],Vo.prototype,"fontFamily",2),m([mi],Vo.prototype,"padding",2),m([mi],Vo.prototype,"color",2),m([mi],Vo.prototype,"parallel",2);var bn=class extends kG{constructor(){super(...arguments),this.id=(0,Ptt.createId)(this),this.defaultColorRange=[],this.shape="polygon",this.label=new Vo,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Rtt.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new Pw({name:this.id}),this.rangeGroup=new Pw({name:this.id}),this.labelGroup=new Pw({name:this.id}),this._isRange=void 0}assignCrossLineGroup(t,e){t!==this._isRange&&(t?this.rangeGroup.appendChild(e):this.lineGroup.appendChild(e)),this._isRange=t}setSectorNodeProps(t){t.fill=this.fill,t.fillOpacity=this.fillOpacity??1,t.stroke=this.stroke,t.strokeOpacity=this.strokeOpacity??1,t.strokeWidth=this.strokeWidth??1,t.lineDash=this.lineDash}setLabelNodeProps(t,e,i,s,n){const{label:a}=this;t.x=e,t.y=i,t.text=a.text,t.textAlign="center",t.textBaseline=s,t.rotation=n,t.rotationCenterX=e,t.rotationCenterY=i,t.fill=a.color,t.fontFamily=a.fontFamily,t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.visible=!0}};m([mi],bn.prototype,"enabled",2),m([mi],bn.prototype,"type",2),m([mi],bn.prototype,"range",2),m([mi],bn.prototype,"value",2),m([mi],bn.prototype,"defaultColorRange",2),m([mi],bn.prototype,"fill",2),m([mi],bn.prototype,"fillOpacity",2),m([mi],bn.prototype,"stroke",2),m([mi],bn.prototype,"strokeWidth",2),m([mi],bn.prototype,"strokeOpacity",2),m([mi],bn.prototype,"lineDash",2),m([mi],bn.prototype,"shape",2),m([mi],bn.prototype,"label",2);var{ChartAxisDirection:Btt,getCrossLineValue:IG,validateCrossLineValue:ztt,normalizeAngle360:Rw,Group:Ftt,Path:AG,Sector:jtt,RotatableText:Gtt,ContinuousScale:Vtt}=DG._ModuleSupport,Bw=class extends bn{constructor(){super(),this.direction=Btt.Angle,this.polygonNode=new AG,this.sectorNode=new jtt,this.lineNode=new AG,this.crossLineRange=new Ftt,this.labelNode=new Gtt,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!Vtt.is(this.scale))return!0;const[t,e]=this.scale.domain,i=IG(this);if((0,Ew.isArray)(i)){const[s,n]=i;return s>=t&&s<=e&&n>=s&&n<=e}else return i>=t&&i<=e}update(t){const{scale:e}=this;if(!e||!ztt(IG(this),e)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(t){const{scale:e,type:i,value:s,lineNode:n}=this;if(!t||i!=="line"||!e){n.visible=!1;return}const a=e.convert(s);if(isNaN(a)){n.visible=!1;return}const{axisInnerRadius:o,axisOuterRadius:r}=this;n.visible=!0,n.stroke=this.stroke,n.strokeOpacity=this.strokeOpacity??1,n.strokeWidth=this.strokeWidth??1,n.fill=void 0,n.lineDash=this.lineDash;const l=r*Math.cos(a),c=r*Math.sin(a),h=o*Math.cos(a),u=o*Math.sin(a);n.path.clear(!0),n.path.moveTo(h,u),n.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(t){const{polygonNode:e,range:i,scale:s,shape:n,type:a,ticks:o}=this;if(!t||a!=="range"||n!=="polygon"||!s||!i){e.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this,c=o.indexOf(i[0]),h=o.indexOf(i[1]),d=(c<=h?o.slice(c,h+1):o.slice(c).concat(o.slice(0,h+1))).map(g=>s.convert(g));e.visible=!0,this.setSectorNodeProps(e);const{path:p}=e;p.clear(!0),d.forEach((g,f)=>{const x=l*Math.cos(g),y=l*Math.sin(g);f===0?p.moveTo(x,y):p.lineTo(x,y)}),r===0?p.lineTo(0,0):d.slice().reverse().forEach(g=>{const f=r*Math.cos(g),x=r*Math.sin(g);p.lineTo(f,x)}),e.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(t){const{sectorNode:e,range:i,scale:s,shape:n,type:a}=this;if(!t||a!=="range"||n!=="circle"||!s||!i){e.visible=!1;return}const{axisInnerRadius:o,axisOuterRadius:r}=this,l=i.map(u=>s.convert(u)),c=s.step??0,h=s instanceof DG._ModuleSupport.BandScale?c/2:0;e.visible=!0,this.setSectorNodeProps(e),e.centerX=0,e.centerY=0,e.innerRadius=o,e.outerRadius=r,e.startAngle=l[0]-h,e.endAngle=l[1]+h,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(t){const{label:e,labelNode:i,range:s,scale:n,type:a,ticks:o}=this;if(!t||e.enabled===!1||!e.text||!n||a==="range"&&!s){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:r,axisOuterRadius:l}=this;let c,h,u,d;if(a==="line"){const p=Rw(n.convert(this.value)),g=1.5*Math.PI,f=(0,Ew.isNumberEqual)(p,g)||p>g||p<Math.PI/2,x=(r+l)/2*Math.cos(p),y=(r+l)/2*Math.sin(p);c=x+e.padding*Math.cos(p+Math.PI/2),h=y+e.padding*Math.sin(p+Math.PI/2),d=f?"top":"bottom",u=f?p:p-Math.PI}else{const[p,g]=s.map(b=>Rw(n.convert(b)));let f=(p+g)/2;p>g&&(f-=Math.PI),f=Rw(f);const x=((0,Ew.isNumberEqual)(f,0)||f>0)&&f<Math.PI;let y;this.shape==="circle"||o.length<3?y=l-e.padding:y=l*Math.cos(Math.PI/o.length)-e.padding,c=y*Math.cos(f),h=y*Math.sin(f),d=x?"bottom":"top",u=x?f-Math.PI/2:f+Math.PI/2}this.setLabelNodeProps(i,c,h,d,u)}};Bw.className="AngleCrossLine";var{ChartAxisDirection:Wtt,TextWrapper:Htt,TextUtils:Utt,Property:zw,toRadians:Oy,normalizeAngle360:Qc,normalizeAngle360Inclusive:$tt,Path:Ktt,RotatableText:Ytt,Transformable:Ztt,BBox:Xtt,Selection:CG,Line:LG}=C0._ModuleSupport,Fw=class extends C0._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};m([zw],Fw.prototype,"orientation",2);var _y=class extends C0._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=CG.select(this.tickLineGroup,LG,!1),this.gridLineGroupSelection=CG.select(this.gridLineGroup,LG,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new C0._ModuleSupport.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new Ktt),this.includeInvisibleDomains=!0}get direction(){return Wtt.Angle}createLabel(){return new Fw}calculateRotations(){const t=Oy(this.startAngle),e=Qc(t),i=Qc(t-Math.PI/2);return{rotation:t,parallelFlipRotation:e,regularFlipRotation:i}}calculateTickLayout(t){const{nice:e,scale:i}=this,s={nice:e,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},n=e?i.niceDomain(s,t):t,a=this.generateAngleTicks(n);this.tickData=a;const o=a.map(l=>l.value),r=o.reduce((l,c)=>Math.max(typeof c=="number"?(0,sd.countFractionDigits)(c):0,l),0);return{niceDomain:n,tickDomain:n,ticks:o,rawTickCount:void 0,fractionDigits:r,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const t=Qc(-Math.PI/2+Oy(this.startAngle)),e=this.endAngle!=null?$tt(Oy(this.endAngle)-Oy(this.startAngle)):2*Math.PI,i=t+e;return[t,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const t=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?t:[]),this.tickLineGroupSelection.update(this.tick.enabled?t:[]),this.tickLabelGroupSelection.update(this.label.enabled?t:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:t,radiusLineGroup:e}=this,i=Math.floor(t.x),s=Math.floor(t.y);e.translationX=i,e.translationY=s}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:n,y:a,moveTo:o,arc:r,radius:l=0,startAngle:c=0,endAngle:h=0})=>{r?e.arc(n,a,l,c,h):o?e.moveTo(n,a):e.lineTo(n,a)}),s&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.stroke,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){const{scale:t,shape:e,gridLength:i}=this,[s,n]=this.range,a=(0,sd.isNumberEqual)(n-s,2*Math.PI),o=[];if(e==="circle")a?o.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):o.push({x:i*Math.cos(s),y:i*Math.sin(s),moveTo:!0},{x:0,y:0,radius:i,startAngle:Qc(s),endAngle:Qc(n),arc:!0,moveTo:!1});else if(e==="polygon"){const r=t.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>t.convert(l));r&&r.length>2&&r.forEach((l,c)=>{const h=i*Math.cos(l),u=i*Math.sin(l),d=c===0;o.push({x:h,y:u,moveTo:d})})}return{points:o,closePath:a}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{style:i,width:s},innerRadiusRatio:n}=this;if(!(i&&e>0))return;const a=e*n,o=i.length;this.gridLineGroupSelection.each((r,l,c)=>{const{value:h}=l,{stroke:u,lineDash:d}=i[c%o],p=t.convert(h);r.x1=a*Math.cos(p),r.y1=a*Math.sin(p),r.x2=e*Math.cos(p),r.y2=e*Math.sin(p),r.stroke=u,r.strokeWidth=s,r.lineDash=d,r.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this;e.each((i,s,n)=>{const a=this.labelData[n];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(t),i.fill=t.color,i.x=a.x,i.y=a.y,i.textAlign=a.textAlign,i.textBaseline=a.textBaseline,i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:s}=this;s.each((n,a)=>{const{value:o}=a,r=t.convert(o),l=Math.cos(r),c=Math.sin(r);n.x1=e*l,n.y1=e*c,n.x2=(e+i.size)*l,n.y2=(e+i.size)*c,n.stroke=i.stroke,n.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:s,gridLength:n,scale:a,tick:o}=this;if(!s.enabled)return[];const r=new Ytt,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=t.map((u,d)=>{const{value:p}=u,g=n+s.spacing+o.size,f=a.convert(p),x=Math.cos(f),y=Math.sin(f),b=g*x,v=g*y,{textAlign:M,textBaseline:D}=this.getLabelAlign(f),L=d===t.length-1&&p!==t[0]&&(0,sd.isNumberEqual)(Qc(f),Qc(a.convert(t[0]))),A=this.getLabelRotation(f);let C=this.formatTick(p,d,a.domain);r.text=C,r.x=b,r.y=v,r.setFont(s),r.textAlign=M,r.textBaseline=D,r.rotation=A,A&&(r.rotationCenterX=b,r.rotationCenterY=v);let T=A?Ztt.toCanvas(r):r.getBBox();if(T&&e.hideWhenNecessary&&!A){const N=l-T.x,P=T.x+T.width-c,O=1;if(N>O||P>O){const B=T.width-Math.max(N,P);C=Htt.wrapText(C,{maxWidth:B,font:s,textWrap:"never"}),C===Utt.EllipsisChar&&(C=""),r.text=C,T=r.getBBox()}}return{text:C,x:b,y:v,textAlign:M,textBaseline:D,hidden:C===""||u.hidden||L,rotation:A,box:T}});return s.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(t,e){this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:Xtt.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof Fw?t.orientation:"fixed"}getLabelRotation(t){let e=Oy(this.label.rotation??0);t=Qc(t);const i=this.getLabelOrientation();return i==="parallel"?(e+=t,t>=0&&t<Math.PI?e-=Math.PI/2:e+=Math.PI/2):i==="perpendicular"&&(e+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(e+=Math.PI)),e}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let s,n;const a=this.getLabelOrientation(),o=(0,sd.isNumberEqual)(e,0),r=(0,sd.isNumberEqual)(i,0),l=(0,sd.isNumberEqual)(e,1),c=(0,sd.isNumberEqual)(i,-1),h=e>0&&!o,u=i>0&&!r;return a==="parallel"?(s="center",n=l&&r||u?"top":"bottom"):a==="perpendicular"?(s=c||h?"left":"right",n="middle"):(s="right",o?s="center":h&&(s="left"),n="bottom",r?n="middle":u&&(n="top")),{textAlign:s,textBaseline:n}}updateCrossLines(){const{shape:t,gridLength:e,innerRadiusRatio:i}=this;this.crossLines.forEach(s=>{s instanceof Bw&&(s.ticks=this.tickData.map(n=>n.value),s.shape=t,s.axisOuterRadius=e,s.axisInnerRadius=e*i)}),super.updateCrossLines()}};_y.CrossLineConstructor=Bw,m([zw],_y.prototype,"startAngle",2),m([zw],_y.prototype,"endAngle",2);var{Property:jw,CategoryScale:qtt}=Ttt._ModuleSupport,Jc=class extends _y{constructor(t){super(t,new qtt),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new _w}generateAngleTicks(){const{scale:t,gridLength:e}=this,{values:i,minSpacing:s}=this.interval,n=i??t.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks??[];if(n.length<2||s==null)return n.map(c=>({value:c,visible:!0}));const a=n[0],o=t.convert(a),r=e*Math.cos(o),l=e*Math.sin(o);for(let c=1;c<n.length-1;c++){const h=n[c],u=t.convert(h);if(u-o>Math.PI)break;const d=e*Math.cos(u),p=e*Math.sin(u);if(Math.sqrt((d-r)**2+(p-l)**2)>s){const f=new Set([a]);return Ow(n,c,(x,y)=>{f.add(y)}),n.map(x=>{const y=f.has(x);return{value:x,visible:y}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(t){const{minSpacing:e}=this.label;if(t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(e==null)return l.box.collidesBBox(c.box);const h=l.box.clone().grow(e/2),u=c.box.clone().grow(e/2);return h.collidesBBox(u)},s=t[0],n=t.at(-1),a=new Set([s]),o=(0,MG.isNumberEqual)(s.x,n.x)&&(0,MG.isNumberEqual)(s.y,n.y),r=Math.floor(t.length/2);for(let l=1;l<=r;l++){const c=o?t.slice(0,-1):t;if(!Ow(c,l,i)){Ow(c,l,(u,d)=>{a.add(d)});break}}t.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};Jc.className="AngleCategoryAxis",Jc.type="angle-category",m([jw],Jc.prototype,"groupPaddingInner",2),m([jw],Jc.prototype,"paddingInner",2),m([jw],Jc.prototype,"interval",2);var Qtt={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:t=>new Jc(t)},Jtt=(E(),w(_)),wG=(R(),w(nt)),tet=(E(),w(_)),eet=(R(),w(nt)),{range:TG,isDenseInterval:iet,LinearScale:Gw}=tet._ModuleSupport,NG=class yO extends Gw{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(e,i){const[s,n]=i;let a=Gw.getTickStep(s,n,e);const o=isNaN(e.maxTickCount)?1/0:e.maxTickCount,r=Math.abs(n-s)/a;let l=Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));return l>o&&(l/=2,a*=2),{count:l,step:a}}ticks(e,i=this.domain){const{arcLength:s}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||s<=0)return{ticks:[],count:0};const{nice:n,interval:a}=e,[o,r]=i;if(a){const c=Math.abs(a),h=this.getPixelRange();if(!iet((r-o)/c,h))return TG(o,r,c)}let l;if(n&&this.hasNiceRange()){const c=super.niceDomain(e,i);l=yO.getNiceStepAndTickCount(e,c).step}else l=Gw.getTickStep(o,r,e);return TG(o,r,l)}hasNiceRange(){const e=this.range.slice().sort((s,n)=>s-n);return[Math.PI,2*Math.PI].some(s=>(0,eet.isNumberEqual)(s,e[1]-e[0]))}niceDomain(e,i=this.domain){const s=super.niceDomain(e,i);if(!this.hasNiceRange())return s;const n=s[0]>s[1],a=n?s[1]:s[0],{step:o,count:r}=yO.getNiceStepAndTickCount(e,s),l=1/o,c=o>=1?Math.ceil(a/o+r)*o:Math.ceil((a+r*o)*l)/l;return n?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{Property:Vw,angleBetween:set,normalisedExtentWithMetadata:net,findMinMax:aet}=Jtt._ModuleSupport,nd=class extends _y{constructor(t){super(t,new NG),this.shape="circle",this.interval=new _w}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=net(t,e,i);return{domain:s,clipped:n}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),s=set(e,i)||2*Math.PI,n=this.gridLength;return s*n}generateAngleTicks(t){const{scale:e,range:i,nice:s}=this,{values:n,step:a,minSpacing:o,maxSpacing:r}=this.interval;let l;if(n==null){const{arcLength:c}=e,h=r?Math.floor(c/r):1,u=o?Math.floor(c/o):1/0,d=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),p=Math.max(h,Math.min(u,d)),g={nice:s,interval:a,tickCount:p,minTickCount:h,maxTickCount:u};l=e.ticks(g,t)?.ticks??[]}else{const[c,h]=aet(t.map(Number));l=n.filter(u=>u>=c&&u<=h).sort((u,d)=>u-d)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(t){const{minSpacing:e}=this.label,i=(a,o)=>{if(a.hidden||o.hidden)return!1;if(e==null)return a.box.collidesBBox(o.box);const r=a.box.clone().grow(e/2),l=o.box.clone().grow(e/2);return r.collidesBBox(l)},s=t[0],n=t.at(-1);s!==n&&(0,wG.isNumberEqual)(s.x,n.x)&&(0,wG.isNumberEqual)(s.y,n.y)&&(n.hidden=!0);for(let a=1;a<t.length;a*=2){let o=!1;for(let r=a;r<t.length;r+=a){const l=t[r],c=t[r-a];if(i(c,l)){o=!0;break}}if(!o){t.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}t.forEach((a,o)=>{o>0&&(a.hidden=!0,a.box=void 0)})}};nd.className="AngleNumberAxis",nd.type="angle-number",m([Vw],nd.prototype,"min",2),m([Vw],nd.prototype,"max",2),m([Vw],nd.prototype,"interval",2);var oet={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:t=>new nd(t)},OG=(E(),w(_)),{OrdinalTimeScale:ret,Property:cet,TimeAxisParentLevel:het}=OG._ModuleSupport,Ey=class extends OG._ModuleSupport.CategoryAxis{constructor(t){super(t,new ret),this.parentLevel=new het}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}};Ey.className="OrdinalTimeAxis",Ey.type="ordinal-time",m([cet],Ey.prototype,"parentLevel",2);var uet={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:t=>new Ey(t)},det=(E(),w(_)),L0=(E(),w(_)),pet=(R(),w(nt)),_G=(E(),w(_)),Ww=(R(),w(nt)),{ChartAxisDirection:get,Property:fet,getCrossLineValue:met,validateCrossLineValue:yet,normalizeAngle360FromDegrees:xet,Group:bet,Path:vet,Sector:Met,RotatableText:Det}=_G._ModuleSupport,EG=class extends Vo{constructor(){super(...arguments),this.positionAngle=void 0}};m([fet],EG.prototype,"positionAngle",2);var Hw=class extends bn{constructor(){super(),this.direction=get.Radius,this.label=new EG,this.polygonNode=new vet,this.sectorNode=new Met,this.crossLineRange=new bet,this.labelNode=new Det,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e}=this;if(!e||!yet(met(this),e)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:s}=this;t&&(t=i>=this.axisInnerRadius&&s<=this.axisOuterRadius),this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:t,scale:e,type:i,axisInnerRadius:s,axisOuterRadius:n}=this;if(!e)return{innerRadius:0,outerRadius:0};const a=l=>n+s-l;let o,r;if(i==="line")o=a(e.convert(this.value)),r=o;else{const l=Math.abs(e?.bandwidth??0),c=t.map(h=>e.convert(h));o=a(Math.max(...c)),r=a(Math.min(...c))+l}this.outerRadius=o,this.innerRadius=r}drawPolygon(t,e,i){e.forEach((s,n)=>{const a=t*Math.cos(s),o=t*Math.sin(s);n===0?i.path.moveTo(a,o):i.path.lineTo(a,o)}),i.path.closePath()}updatePolygonNode(t){const{gridAngles:e,polygonNode:i,scale:s,shape:n,type:a,innerRadius:o,outerRadius:r}=this;if(!t||n!=="polygon"||!s||!e){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(r-l,e,i);const c=e.slice().reverse(),h=a==="line"?r-l:o+l;this.drawPolygon(h,c,i),this.setSectorNodeProps(i)}updateSectorNode(t){const{axisInnerRadius:e,axisOuterRadius:i,scale:s,sectorNode:n,shape:a,innerRadius:o,outerRadius:r}=this;if(!t||a!=="circle"||!s){n.visible=!1;return}n.visible=!0,n.startAngle=0,n.endAngle=2*Math.PI;const l=this.getPadding(),c=(0,Ww.clamp)(e,o+l,i),h=(0,Ww.clamp)(e,r-l,i);n.innerRadius=Math.min(c,h),n.outerRadius=Math.max(c,h),this.setSectorNodeProps(n)}updateLabelNode(t){const{innerRadius:e,label:i,labelNode:s,scale:n,shape:a,type:o}=this;if(!t||i.enabled===!1||!i.text||!n){s.visible=!1;return}const r=xet((i.positionAngle??0)-90),l=((0,Ww.isNumberEqual)(r,0)||r>0)&&r<Math.PI,c=l?r-Math.PI/2:r+Math.PI/2;let h;const u=this.gridAngles??[];o==="line"?h=e+i.padding:a==="circle"||u.length<3?h=e-i.padding:h=e*Math.cos(Math.PI/u.length)-i.padding;const d=h*Math.cos(r),p=h*Math.sin(r);let g;o==="line"?g=l?"top":"bottom":g=l?"bottom":"top",this.setLabelNodeProps(s,d,p,g,c)}getPadding(){const{scale:t}=this;if(!t)return 0;const e=Math.abs(t.bandwidth??0),i=Math.abs(t.step??0);return t instanceof _G._ModuleSupport.BandScale?(i-e)/2:0}};Hw.className="RadiusCrossLine";var{ChartAxisDirection:ket,ZIndexMap:Iet,Property:Uw,normalizeAngle360:PG,toRadians:Aet,Caption:Cet,Group:Let,TransformableGroup:RG,Path:wet,Line:BG,Selection:zG,AxisTickGenerator:Tet,AxisGroupZIndexMap:Net}=L0._ModuleSupport,$w=class extends L0._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};m([Uw],$w.prototype,"autoRotate",2),m([Uw],$w.prototype,"autoRotateAngle",2);var w0=class extends L0._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.gridLineGroupSelection=zG.select(this.gridLineGroup,BG,!1),this.tickGenerator=new Tet(this),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new RG({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new RG({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new BG({name:`${this.id}-Axis-line`,zIndex:Net.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new Let({name:`${this.id}-gridPaths`,zIndex:Iet.AXIS_GRID})),this.gridPathSelection=zG.select(this.gridPathGroup,wet),this.headingLabelGroup.appendChild(this.title.caption.node),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return ket.Radius}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:s}=this,n=t*s,a=Aet(i);return{translationX:e.x,translationY:e.y-t-n,rotation:a,rotationCenterX:0,rotationCenterY:t+n}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:t,stroke:e,width:i}=this.line;this.lineNode.setProperties({stroke:e,strokeWidth:t?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const t=this.getAxisTransform();this.tickLineGroup.setProperties(t),this.tickLabelGroup.setProperties(t),this.lineNodeGroup.setProperties(t),this.headingLabelGroup.setProperties(t)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(t,e,i){const n=-Math.PI/2,a=[0,1],o=this.label.getSideFlag(),r=o*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),l=this.tickGenerator.generateTicks({domain:t,niceMode:e,visibleRange:a,primaryTickCount:void 0,parallelFlipRotation:0,regularFlipRotation:n,labelX:r,sideFlag:o,removeOverflowLabels:!1}),{tickData:c}=l,{ticks:h,rawTicks:u,rawTickCount:d,tickDomain:p,fractionDigits:g,niceDomain:f=t}=c,x=h.map(y=>this.getTickLabelProps(y,l));return this.generatedTicks={ticks:h,labels:x},{ticks:u,tickDomain:p,niceDomain:f,rawTickCount:d,fractionDigits:g,timeInterval:void 0}}updateSelections(){const{generatedTicks:t}=this;if(!t)return;const{ticks:e,labels:i}=t;this.gridLineGroupSelection.update(this.gridLength?e:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(e):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const t=L0._ModuleSupport.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((e,i)=>{e.fill=i.fill,e.fontFamily=i.fontFamily,e.fontSize=i.fontSize,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.text=i.text,e.textBaseline=i.textBaseline,e.textAlign=i.textAlign??"center",e.setProperties(t(e,i))})}updateGridLines(){const{gridLine:{style:t,width:e},shape:i,generatedTicks:s}=this;if(!t||!s)return;const n=t.length,a=(d,p)=>{const{stroke:g,lineDash:f}=t[p%n];d.stroke=g,d.strokeWidth=e,d.lineDash=f,d.fill=void 0},[o,r]=this.gridRange??[0,2*Math.PI],l=(0,pet.isNumberEqual)(r-o,2*Math.PI),u=i==="circle"?(d,p)=>{const{path:g}=d;g.clear(!0);const f=this.getTickRadius(p);l?(g.moveTo(f,0),g.arc(0,0,f,0,2*Math.PI)):(g.moveTo(f*Math.cos(o),f*Math.sin(o)),g.arc(0,0,f,PG(o),PG(r))),l&&g.closePath()}:(d,p)=>{const{path:g}=d,f=this.gridAngles;if(g.clear(!0),!f||f.length<3)return;const x=this.getTickRadius(p);f.forEach((y,b)=>{const v=x*Math.cos(y),M=x*Math.sin(y);b===0?g.moveTo(v,M):g.lineTo(v,M),f.forEach((D,L)=>{const A=x*Math.cos(D),C=x*Math.sin(D);L===0?g.moveTo(A,C):g.lineTo(A,C)}),g.closePath()}),g.closePath()};this.gridPathSelection.each((d,p,g)=>{a(d,g),u(d,p)})}updateTitle(){const t=o=>o.defaultValue,{title:e,range:i}=this,{formatter:s=t}=this.title;e.caption.enabled=e.enabled,e.caption.fontFamily=e.fontFamily,e.caption.fontSize=e.fontSize,e.caption.fontStyle=e.fontStyle,e.caption.fontWeight=e.fontWeight,e.caption.color=e.color,e.caption.wrapping=e.wrapping;let n=!1;const a=e.caption.node;e.enabled&&(n=!0,a.rotation=Math.PI/2,a.x=Math.floor((i[0]+i[1])/2),a.y=-Cet.SMALL_PADDING,a.textAlign="center",a.textBaseline="bottom",a.text=this.callWithContext(s,this.getTitleFormatterParams(this.scale.domain))),a.visible=n}updateCrossLines(){this.crossLines.forEach(t=>{if(t instanceof Hw){const{shape:e,gridAngles:i,range:s,innerRadiusRatio:n}=this,a=s[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=a,t.axisInnerRadius=a*n}}),super.updateCrossLines()}createLabel(){return new $w}getTickLabelProps(t,e){const{label:i}=this,{rotation:s,textBaseline:n,textAlign:a}=e,o=this.scale.range,r=t.tickLabel??"",c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),h=r!==""&&r!=null,u=s;return{...this.getLabelStyles({value:t.tickLabel}),tickId:t.tickId,rotation:u,text:r,textAlign:a,textBaseline:n,visible:h,x:c,y:t.translationY,rotationCenterX:c,rotationCenterY:t.translationY,range:o}}};w0.CrossLineConstructor=Hw,m([Uw],w0.prototype,"positionAngle",2);var{ProxyPropertyOnWrite:FG,Property:Kw,CategoryScale:jG}=det._ModuleSupport,th=class extends w0{constructor(t){super(t,new jG),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}normaliseDataDomain(t){return{domain:t,clipped:!1}}prepareGridPathTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e,innerRadiusRatio:i}=this,s=e.range[0],n=s*i;if(jG.is(e)){const a=e.domain,o=a.length-1-a.indexOf(t.tick);return o===0?n:e.inset+e.step*(o-.5)+e.bandwidth/2}else{const a=(s-n)/e.domain.length;return s-t.translationY+n-a/2}}};th.className="RadiusCategoryAxis",th.type="radius-category",m([Kw],th.prototype,"groupPaddingInner",2),m([FG("scale","paddingInner"),Kw],th.prototype,"paddingInner",2),m([FG("scale","paddingOuter"),Kw],th.prototype,"paddingOuter",2);var Oet={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:t=>new th(t)},_et=(E(),w(_)),{Property:GG,normalisedExtentWithMetadata:Eet,LinearScale:Pet}=_et._ModuleSupport,vg=class extends w0{constructor(t){super(t,new Pet),this.shape="polygon"}prepareGridPathTickData(t){const{scale:e}=this,i=e.domain[1];return t.filter(({tick:s})=>s!==i).sort((s,n)=>n.tick-s.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],s=i*this.innerRadiusRatio;return i-t.translationY+s}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=Eet(t,e,i);return{domain:s,clipped:n}}};vg.className="RadiusNumberAxis",vg.type="radius-number",m([GG],vg.prototype,"min",2),m([GG],vg.prototype,"max",2);var Ret={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:t=>new vg(t)},VG=(E(),w(_)),{ObserveChanges:WG,Property:HG}=VG._ModuleSupport,Yw=class extends VG._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1),this.destroyFns.push(()=>{t.animationManager.skip(!0)})}};m([WG((t,e)=>{t.ctx.animationManager.skip(!e)}),HG],Yw.prototype,"enabled",2),m([WG((t,e)=>{t.ctx.animationManager.defaultDuration=e}),HG],Yw.prototype,"duration",2);var Bet={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Yw(t),themeTemplate:{animation:{enabled:!0}}},T0=(E(),w(_)),Zw=(R(),w(nt)),Xw=(E(),w(_)),zet=(R(),w(nt)),Fet='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>',{focusCursorAtEnd:jet}=Xw._ModuleSupport,UG="text-input",$G="canvas-overlay",Get=class extends Xw._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=t.domManager.addChild($G,UG),this.element.classList.add("ag-charts-text-input"),this.destroyFns.push(()=>t.domManager.removeChild($G,UG))}setKeyDownHandler(t){this.element.addEventListener("keydown",t),this.destroyFns.push(()=>this.element.removeEventListener("keydown",t))}show(t){this.element.innerHTML=Fet;const e=this.element.firstElementChild;(0,zet.setAttribute)(e,"data-preventdefault",!1),e.isContentEditable||(e.contentEditable="true"),e.setAttribute("placeholder",this.ctx.localeManager.t(t.placeholderText??"inputTextareaPlaceholder")),t.styles?.placeholderColor&&e.style.setProperty("--placeholder-text-color",t.styles?.placeholderColor),e.innerText=t.text??"",e.style.color=t.styles?.color??"inherit",e.style.fontFamily=t.styles?.fontFamily??"inherit",e.style.fontSize=t.styles?.fontSize?`${t.styles.fontSize}px`:"inherit",e.style.fontStyle=t.styles?.fontStyle??"inherit",e.style.fontWeight=typeof t.styles?.fontWeight=="number"?`${t.styles.fontWeight}`:t.styles?.fontWeight??"inherit",jet(e),e.addEventListener("input",()=>{this.updatePosition(),t.onChange?.(this.getValue(),this.getBBox())}),e.addEventListener("click",i=>{i.stopPropagation()}),t.layout&&(this.layout=t.layout,this.updatePosition()),t.onChange?.(this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(t){this.element.firstElementChild&&(this.element.firstElementChild.style.color=t)}updateFontSize(t){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize=`${t}px`,this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:t}=this,e=t.firstElementChild;if(!e)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:s,getTextInputCoords:n,getTextPosition:a,alignment:o,textAlign:r}=this.layout;t.style.setProperty("width",s?`${s}px`:"unset");const l=e.getBoundingClientRect(),c=n(l.height);let h=c.x;o==="center"?h-=(s??l.width)/2:o==="right"&&(h-=s??l.width);const u=a();let d=c.y;u==="center"?d-=l.height/2:u==="bottom"&&(d-=l.height),t.style.setProperty("top",`${d}px`),t.style.setProperty("left",`${h}px`),t.style.setProperty("max-width",`${i.width-h}px`),t.style.setProperty("text-align",o),e.style.setProperty("text-align",r)}getBBox(){const{left:t,top:e,width:i,height:s}=this.element.getBoundingClientRect();return new Xw._ModuleSupport.BBox(t,e,i,s)}},Vet=(E(),w(_)),{BaseProperties:Wet,Property:KG}=Vet._ModuleSupport,qw=class extends Wet{constructor(){super(...arguments),this.enabled=!1,this.axes="y"}};m([KG],qw.prototype,"enabled",2),m([KG],qw.prototype,"axes",2);var Het=(E(),w(_)),Qw=(t=>(t.Line="line",t.HorizontalLine="horizontal-line",t.VerticalLine="vertical-line",t.DisjointChannel="disjoint-channel",t.ParallelChannel="parallel-channel",t.FibonacciRetracement="fibonacci-retracement",t.FibonacciRetracementTrendBased="fibonacci-retracement-trend-based",t.Callout="callout",t.Comment="comment",t.Note="note",t.Text="text",t.Arrow="arrow",t.ArrowUp="arrow-up",t.ArrowDown="arrow-down",t.DateRange="date-range",t.PriceRange="price-range",t.DatePriceRange="date-price-range",t.QuickDatePriceRange="quick-date-price-range",t))(Qw||{}),Uet=Object.values(Qw);function $et(t){for(const e of Uet)if(e===t)return e}var Ket=(R(),w(nt)),Yet=(E(),w(_)),Zet=(R(),w(nt)),Xet=(E(),w(_)),qet=(R(),w(nt)),{BaseProperties:eh,Property:Xt}=Xet._ModuleSupport,Py=class extends eh{};m([Xt],Py.prototype,"x",2),m([Xt],Py.prototype,"y",2);var Qet=class extends qs(Ol(qG(eh))){},Jw=class extends qs(Ol(Lr(iT(rd(eh))))){constructor(){super(...arguments),this.cornerRadius=2}};m([Xt],Jw.prototype,"enabled",2),m([Xt],Jw.prototype,"cornerRadius",2);var Jet=class extends Lr(eh){},tit=class extends qs(Ol(Lr(eh))){},ad=class extends rd(eh){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};m([Xt],ad.prototype,"label",2),m([Xt],ad.prototype,"position",2),m([Xt],ad.prototype,"alignment",2);var eit=class extends rd(eh){},Ry=class extends rd(eh){constructor(){super(...arguments),this.label=""}};m([Xt],Ry.prototype,"label",2),m([Xt],Ry.prototype,"position",2),m([Xt],Ry.prototype,"alignment",2);function od(t){class e extends sit(qG(t)){constructor(){super(...arguments),this.id=(0,qet.generateUUID)()}}return e}function tT(t){class e extends t{constructor(){super(...arguments),this.start=new Py,this.end=new Py}}return m([Xt],e.prototype,"start",2),m([Xt],e.prototype,"end",2),e}function YG(t){class e extends t{}return m([Xt],e.prototype,"x",2),m([Xt],e.prototype,"y",2),e}function ZG(t){class e extends t{}return m([Xt],e.prototype,"value",2),e}function eT(t){class e extends t{constructor(){super(...arguments),this.background=new Jet}}return m([Xt],e.prototype,"background",2),e}function ih(t){class e extends t{constructor(){super(...arguments),this.handle=new tit}}return m([Xt],e.prototype,"handle",2),e}function XG(t){class e extends t{constructor(){super(...arguments),this.axisLabel=new Jw}}return m([Xt],e.prototype,"axisLabel",2),e}function iT(t){class e extends t{constructor(){super(...arguments),this.padding=void 0,this.textAlign="center",this.formatter=void 0}}return m([Xt],e.prototype,"padding",2),m([Xt],e.prototype,"textAlign",2),m([Xt],e.prototype,"formatter",2),e}function iit(t){class e extends t{}return e}function sT(t){class e extends t{}return m([Xt],e.prototype,"extendStart",2),m([Xt],e.prototype,"extendEnd",2),e}function sit(t){class e extends t{}return m([Xt],e.prototype,"locked",2),e}function nT(t){class e extends t{setLocaleManager(s){this.localeManager??(this.localeManager=s)}}return e}function qG(t){class e extends t{}return m([Xt],e.prototype,"visible",2),e}function Lr(t){class e extends t{}return m([Xt],e.prototype,"fill",2),m([Xt],e.prototype,"fillOpacity",2),e}function qs(t){class e extends t{}return m([Xt],e.prototype,"stroke",2),m([Xt],e.prototype,"strokeOpacity",2),m([Xt],e.prototype,"strokeWidth",2),e}function Ol(t){class e extends t{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return m([Xt],e.prototype,"lineDash",2),m([Xt],e.prototype,"lineDashOffset",2),m([Xt],e.prototype,"lineStyle",2),e}function rd(t){class e extends t{constructor(){super(...arguments),this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return m([Xt],e.prototype,"fontStyle",2),m([Xt],e.prototype,"fontWeight",2),m([Xt],e.prototype,"fontSize",2),m([Xt],e.prototype,"fontFamily",2),m([Xt],e.prototype,"color",2),e}var nit=(E(),w(_)),ait=(E(),w(_)),aT=(R(),w(nt));function QG(t){return(0,aT.isNumber)(t)||(0,aT.isString)(t)||(0,aT.isDate)(t)?{value:t,groupPercentage:0}:t??{value:void 0,groupPercentage:0}}function Ki(t){return QG(t)?.value}var{clampArray:oit}=ait._ModuleSupport;function vn(t,e){if(t.start==null||t.end==null)return;const i=ai(t.start,e),s=ai(t.end,e);if(!(i==null||s==null))return{x1:i.x,y1:i.y,x2:s.x,y2:s.y}}function ai(t,e){const i=_l(t.x,e.xAxis),s=_l(t.y,e.yAxis);return{x:i,y:s}}function _l(t,e){if(t==null)return 0;const{value:i,groupPercentage:s}=QG(t),{scale:n,snapToGroup:a}=e,o=n.bandwidth===0?n.step??0:n.bandwidth??0,r=a?o/2:o*s;return n.convert(i)+r}function Sn(t,e){const i=N0(t.x,e.xAxis),s=N0(t.y,e.yAxis);return{x:i,y:s}}function N0(t,e){const{scale:i}=e;if(e.continuous&&i.step==null)return e.scaleInvert(t);const s=e.scaleInvertNearest(t),n=i.bandwidth===0?i.step:i.bandwidth??0,a=i.convert(s),o=a+n,r=oit(t,i.range),l=a===o?0:(r-a)/(o-a);return{value:s,groupPercentage:l}}var rit=(E(),w(_)),{BaseProperties:lit}=rit._ModuleSupport,oT=class extends od(tT(ih(lit))){constructor(){super(...arguments),this.snapToAngle=45}getDefaultColor(t){}getDefaultOpacity(t){}},{Property:cit}=nit._ModuleSupport,JG=class extends nT(iT(rd(oT))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;let e=this.text;return t&&(e=this.placeholderText??"",this.localeManager&&(e=this.localeManager.t(e))),{text:e,isPlaceholder:t}}getTextInputCoords(t,e){return ai(this.end,t)}getTextPosition(){return this.position}};m([cit],JG.prototype,"text",2);var{Property:hit,Color:tV}=Yet._ModuleSupport,uit={top:6,right:12,bottom:9,left:12},Wo=class extends Lr(qs(JG)){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(t){return(0,Zet.isObject)(t)&&t.type==="callout"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=tV.fromString(this.color??"#888888");return new tV(t,e,i,.66).toString()}getPadding(){const{padding:t}=this;return t==null?{...uit}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),s=this.getPadding(),n=s.left??0,a=s.bottom??0;return{x:i.x+n,y:i.y-a}}};m([hit],Wo.prototype,"type",2);var dit=(E(),w(_)),pit=(R(),w(nt)),git=(E(),w(_)),{BaseProperties:fit,Property:mit}=git._ModuleSupport,O0=class extends od(YG(ih(iT(rd(fit))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;return{text:t?this.placeholderText??"":this.text,isPlaceholder:t}}getTextInputCoords(t,e){return ai(this,t)}getTextPosition(){return this.position}};m([mit],O0.prototype,"text",2);var{Property:yit,Color:eV}=dit._ModuleSupport,_0={top:8,right:14,bottom:8,left:14},wr=class extends Lr(qs(O0)){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(t){return(0,pit.isObject)(t)&&t.type==="comment"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=eV.fromString(this.color??"#888888");return new eV(t,e,i,.66).toString()}getPadding(){const{padding:t,fontSize:e}=this;return t==null?{top:Math.max(e*.4,_0.top),bottom:Math.max(e*.4,_0.bottom),left:Math.max(e*.8,_0.left),right:Math.max(e*.8,_0.right)}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),s=this.getPadding();return{x:i.x+s.left,y:i.y-s.bottom}}};m([yit],wr.prototype,"type",2);var xit=(E(),w(_)),E0=(R(),w(nt)),bit=(E(),w(_)),{Vec2:ld}=bit._ModuleSupport;function By(t,e){return t?"dashed":e??"solid"}function iV(t,e){switch(e){case"solid":return[];case"dashed":return[t*4,t*2];case"dotted":return[0,t*2]}}function Sg(t,e,i,s){const n=By(t,i);return e??t??iV(s??1,n)}function Mg(t,e,i){const s=By(e,i);return t??s==="dotted"?"round":void 0}function vit(t,e){const[i,s]=ld.from(t),n=e.height,a=ld.gradient(s,i,n),o=ld.intercept(s,a,n),r=[{x:i.x,y:n??0},{x:i.x,y:n==null?e.height:n-e.height}];if(a===1/0)return r;let l=[ld.intersectAtY(a,o,0,n),ld.intersectAtY(a,o,e.height,n),ld.intersectAtX(a,o,0,n),ld.intersectAtX(a,o,e.width,n)];return l=l.filter(c=>c.x>=e.x&&c.x<=e.width&&c.y>=e.y&&c.y<=e.height).sort((c,h)=>c.x===h.x?0:c.x<h.x?-1:1),l.length!==2?r:l}var{BaseProperties:rT,Property:jn}=xit._ModuleSupport,Sit=class extends qs(rT){},lT=class extends rd(Lr(qs(rT))){constructor(){super(...arguments),this.divider=new Sit}};m([jn],lT.prototype,"divider",2);var cT=class extends Lr(qs(ih(rT))){constructor(){super(...arguments),this.statistics=new lT}};m([jn],cT.prototype,"statistics",2);var Dg=class extends nT(eT(qs(Ol(oT)))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new lT,this.getVolume=()=>{},this.text=new ad}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return Sg(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return Mg(this.lineCap,this.lineDash,this.lineStyle)}};m([jn],Dg.prototype,"statistics",2),m([jn],Dg.prototype,"text",2);function hT(t){class e extends t{constructor(){super(...arguments),this.hasDateRange=!0}}return e}function uT(t){class e extends t{constructor(){super(...arguments),this.hasPriceRange=!0}}return e}var to=class extends hT(Dg){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(t){return(0,E0.isObject)(t)&&t.type==="date-range"}};m([jn],to.prototype,"type",2),m([jn],to.prototype,"extendAbove",2),m([jn],to.prototype,"extendBelow",2);var eo=class extends uT(Dg){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(t){return(0,E0.isObject)(t)&&t.type==="price-range"}};m([jn],eo.prototype,"type",2),m([jn],eo.prototype,"extendLeft",2),m([jn],eo.prototype,"extendRight",2);var El=class extends hT(uT(Dg)){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(t){return(0,E0.isObject)(t)&&t.type==="date-price-range"}};m([jn],El.prototype,"type",2);var va=class extends hT(uT(Dg)){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new cT,this.down=new cT,this.direction="both"}static is(t){return(0,E0.isObject)(t)&&t.type==="quick-date-price-range"}};m([jn],va.prototype,"type",2),m([jn],va.prototype,"up",2),m([jn],va.prototype,"down",2);var Mit=(E(),w(_)),sV=(R(),w(nt)),Dit=(E(),w(_)),{TextWrapper:kit,CachedTextMeasurerPool:Iit,BBox:Ait}=Dit._ModuleSupport,zy=1.38;function nV(t){return{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},textAlign:t.textAlign,textBaseline:t.position=="center"?"middle":t.position,lineHeight:zy,avoidOrphans:!1,textWrap:"always"}}function P0(t,e,i){return i?kit.wrapText(e,{...nV(t),maxWidth:i}):e}function Cit(t,e){const i=nV(t),{lineMetrics:s,width:n}=Iit.measureLines(e,i),a=s.length*(t.fontSize??14)*zy;return{width:n,height:a}}function dT(t,e,i,s){let n=s?.width??0,a=s?.height??0;if(!s){const o=t.width!=null?P0(t,e,t.width):e;({width:n,height:a}=Cit(t,o))}return new Ait(i.x,i.y,n,a)}function aV(t,e,i,s,{x:n,y:a},o){const{visible:r=!0,fontFamily:l,fontSize:c=14,fontStyle:h,fontWeight:u,textAlign:d}=s,p=c*zy;o??(o=s.position=="center"?"middle":s.position);const g=i?s.getPlaceholderColor():s.color;t.setProperties({x:n,y:a,visible:r,text:e,fill:g,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u,textAlign:d,lineHeight:p,textBaseline:o})}var{BaseProperties:Lit,Property:oV}=Mit._ModuleSupport,wit=10,Tit=11,rV=20,Nit=22,Oit=10,lV=rV+Oit,cV=34,_it=class extends Lr(qs(Lit)){},Gn=class extends Lr(qs(O0)){constructor(){super(...arguments),this.type="note",this.background=new _it,this.position="bottom",this.alignment="center",this.width=200}static is(t){return(0,sV.isObject)(t)&&t.type==="note"}getDefaultColor(t){switch(t){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(t){switch(t){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){const t=this.padding??wit;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const{width:i,text:s}=this,n=super.getTextInputCoords(t,e),a=this.getPadding().top,o=dT(this,s,n);o.x=(0,sV.clamp)(i/2,o.x,t.seriesRect.width-i/2);const r=o.y-lV-a*2,l=o.y+Tit+a*2,c=Math.max(o.height,e);return r-c-cV<0?(o.y=l,this.position="top"):(o.y=r+a,this.position="bottom"),{x:o.x,y:o.y}}};m([oV],Gn.prototype,"type",2),m([oV],Gn.prototype,"background",2);var Eit=(E(),w(_)),{BaseProperties:Pit}=Eit._ModuleSupport,Rit=class extends od(YG(ih(Pit))){getDefaultColor(t){}getDefaultOpacity(t){}},pT=class v5 extends Lr(Rit){constructor(){super(...arguments),this.size=32}static is(e){return e instanceof v5}getDefaultColor(e){return e==="fill-color"?this.fill:void 0}getDefaultOpacity(e){return e==="fill-color"?this.fillOpacity:void 0}},Bit=(E(),w(_)),hV=(R(),w(nt)),{BaseProperties:uV,Property:R0}=Bit._ModuleSupport,Qs=class extends od(ZG(ih(XG(qs(Ol(uV)))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new ad}static is(t){return(0,hV.isObject)(t)&&t.type==="horizontal-line"}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return Sg(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return Mg(this.lineCap,this.lineDash,this.lineStyle)}};m([R0],Qs.prototype,"type",2),m([R0],Qs.prototype,"text",2);var Tr=class extends od(ZG(ih(XG(qs(Ol(uV)))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new ad}static is(t){return(0,hV.isObject)(t)&&t.type==="vertical-line"}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return Sg(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return Mg(this.lineCap,this.lineDash,this.lineStyle)}};m([R0],Tr.prototype,"type",2),m([R0],Tr.prototype,"text",2);var zit=(E(),w(_)),dV=(R(),w(nt)),{BaseProperties:Fit,Property:B0}=zit._ModuleSupport,io=class extends od(eT(tT(ih(sT(qs(Ol(Fit))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new Ry,this.snapToAngle=45}static is(t){return(0,dV.isObject)(t)&&t.type==="disjoint-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.startHeight,t.end.y-=this.endHeight):dV.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return Sg(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return Mg(this.lineCap,this.lineDash,this.lineStyle)}};m([B0],io.prototype,"type",2),m([B0],io.prototype,"startHeight",2),m([B0],io.prototype,"endHeight",2),m([B0],io.prototype,"text",2);var jit=(E(),w(_)),Git=(R(),w(nt)),Vit=(E(),w(_)),Wit=(E(),w(_)),pV=(R(),w(nt)),{Property:gT}=Wit._ModuleSupport,z0=class extends nT(iit(sT(qs(Ol(oT))))){constructor(){super(...arguments),this.text=new ad}getDefaultColor(t){switch(t){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return Sg(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return Mg(this.lineCap,this.lineDash,this.lineStyle)}};m([gT],z0.prototype,"text",2);var Pl=class extends z0{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(t){return(0,pV.isObject)(t)&&t.type==="arrow"}};m([gT],Pl.prototype,"type",2);var Rl=class extends z0{constructor(){super(...arguments),this.type="line"}static is(t){return(0,pV.isObject)(t)&&t.type==="line"}};m([gT],Rl.prototype,"type",2);var{Property:cd}=Vit._ModuleSupport,Bl=class extends z0{constructor(){super(...arguments),this.label=new eit,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(t){switch(t){case"line-color":return this.rangeStroke??this.stroke;case"text-color":return this.text.color}}};m([cd],Bl.prototype,"label",2),m([cd],Bl.prototype,"reverse",2),m([cd],Bl.prototype,"showFill",2),m([cd],Bl.prototype,"isMultiColor",2),m([cd],Bl.prototype,"strokes",2),m([cd],Bl.prototype,"rangeStroke",2),m([cd],Bl.prototype,"bands",2);var{Property:gV}=jit._ModuleSupport,Nr=class extends Bl{constructor(){super(...arguments),this.type="fibonacci-retracement-trend-based",this.endRetracement=new Py}static is(t){return(0,Git.isObject)(t)&&t.type==="fibonacci-retracement-trend-based"}};m([gV],Nr.prototype,"type",2),m([gV],Nr.prototype,"endRetracement",2);var Hit=(E(),w(_)),Uit=(R(),w(nt)),{Property:$it}=Hit._ModuleSupport,zl=class extends Bl{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(t){return(0,Uit.isObject)(t)&&t.type==="fibonacci-retracement"}};m([$it],zl.prototype,"type",2);var Kit=(E(),w(_)),fV=(R(),w(nt)),{BaseProperties:Yit,Property:F0}=Kit._ModuleSupport,so=class extends od(eT(tT(ih(sT(qs(Ol(Yit))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new Qet,this.text=new Ry,this.snapToAngle=45}static is(t){return(0,fV.isObject)(t)&&t.type==="parallel-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.height,t.end.y-=this.height):fV.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return Sg(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return Mg(this.lineCap,this.lineDash,this.lineStyle)}};m([F0],so.prototype,"type",2),m([F0],so.prototype,"height",2),m([F0],so.prototype,"middle",2),m([F0],so.prototype,"text",2);var Zit=(E(),w(_)),Xit=(R(),w(nt)),{Property:qit}=Zit._ModuleSupport,Fl=class extends O0{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(t){return(0,Xit.isObject)(t)&&t.type==="text"}};m([qit],Fl.prototype,"type",2);function sh(t){return va.is(t)}function j0(t){return Rl.is(t)||Qs.is(t)||Tr.is(t)||Pl.is(t)||mV(t)}function jl(t){return io.is(t)||so.is(t)}function mV(t){return zl.is(t)||Nr.is(t)}function Or(t){return Wo.is(t)||wr.is(t)||Gn.is(t)||Fl.is(t)}function Fy(t){return to.is(t)||eo.is(t)||El.is(t)||va.is(t)}function fT(t){return Or(t)&&!Gn.is(t)}function nh(t){return j0(t)||jl(t)||Fy(t)&&!va.is(t)}function Qit(t){return j0(t)||jl(t)||Fy(t)||Wo.is(t)||Gn.is(t)}function Jit(t){return Gn.is(t)}function tst(t){return jl(t)||Fy(t)||Wo.is(t)||wr.is(t)||pT.is(t)}function est(t){return Or(t)&&!Gn.is(t)}function kg(t){return(j0(t)||jl(t)||Fy(t))&&!sh(t)&&(0,Ket.isObject)(t.text)}function ist(t,e){"fontSize"in t&&(t.fontSize=e),kg(t)&&(t.text.fontSize=e)}function yV(t,e){const i=e?.strokeWidth??t.strokeWidth??1,s=e?.type??t.lineStyle,n=s??By(t.lineDash,s),a=iV(i,n);t.strokeWidth=i,t.computedLineDash=a,t.lineStyle=n,t.lineCap=n==="dotted"?"round":void 0}function G0(t,e,i,s,n,a){switch(e){case"fill-color":{"fill"in t&&(t.fill=s),"fillOpacity"in t&&(t.fillOpacity=n),"background"in t&&(t.background.fill=s,t.background.fillOpacity=n);break}case"line-color":{"axisLabel"in t&&(t.axisLabel.fill=s,t.axisLabel.fillOpacity=n,t.axisLabel.stroke=s,t.axisLabel.strokeOpacity=n),"fill"in t&&"fillOpacity"in t&&Jit(t)?(t.fill=s,t.fillOpacity=n):("strokeOpacity"in t&&(t.strokeOpacity=n),"isMultiColor"in t&&"rangeStroke"in t?(t.isMultiColor=a,t.rangeStroke=s):"stroke"in t&&(t.stroke=s));break}case"text-color":{"color"in t&&(t.color=i),kg(t)&&(t.text.color=s);break}}}var{deepClone:no}=Het._ModuleSupport,sst=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(Qw).map(t=>[t,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciOptions=new Map([["fibonacci-retracement",{bands:void 0,reverse:void 0,showFill:void 0}],["fibonacci-retracement-trend-based",{bands:void 0,reverse:void 0,showFill:void 0}]])}createMemento(){return{colors:no(this.colors),fontSizes:no(this.fontSizes),lineStyles:no(this.lineStyles),lineTextAlignments:no(this.lineTextAlignments),lineTextPositions:no(this.lineTextPositions),fibonacciOptions:no(this.fibonacciOptions)}}guardMemento(t){return!0}restoreMemento(t,e,i){this.colors=no(i.colors),this.fontSizes=no(i.fontSizes),this.lineStyles=no(i.lineStyles),this.lineTextAlignments=no(i.lineTextAlignments),this.lineTextPositions=no(i.lineTextPositions),this.fibonacciOptions=no(i.fibonacciOptions)}setDefaultColor(t,e,i,s,n,a){this.colors.get(t)?.set(e,[i,s,n,a])}setDefaultFontSize(t,e){this.fontSizes.set(t,e)}setDefaultLineStyleType(t,e){const i=this.lineStyles.get(t);i?i.type=e:this.lineStyles.set(t,{type:e})}setDefaultLineStyleWidth(t,e){const i=this.lineStyles.get(t);i?i.strokeWidth=e:this.lineStyles.set(t,{strokeWidth:e})}setDefaultLineTextAlignment(t,e){this.lineTextAlignments.set(t,e)}setDefaultLineTextPosition(t,e){this.lineTextPositions.set(t,e)}setDefaultFibonacciOptions(t,e,i){if(t!="fibonacci-retracement"&&t!="fibonacci-retracement-trend-based")return;const s=this.fibonacciOptions.get(t);s[e]=i,this.fibonacciOptions.set(t,s)}applyDefaults(t){for(const[e,i]of this.colors)if(t.type===e)for(const[s,[n,a,o,r]=[]]of i)n&&a&&o!=null&&r!=null&&G0(t,s,n,a,o,r);for(const[e,i]of this.fontSizes)t.type!==e||i==null||ist(t,i);for(const[e,i]of this.lineStyles)t.type!==e||i==null||yV(t,i);for(const[e,i]of this.lineTextPositions)t.type!==e||i==null||(t.text.position=i);for(const[e,i]of this.lineTextAlignments)t.type!==e||i==null||(t.text.alignment=i);for(const[e,i]of this.fibonacciOptions)t.type!==e||i==null||Object.keys(i).forEach(s=>{const n=i[s];n!=null&&t.set({[s]:n})})}},xV=(E(),w(_)),bV=(E(),w(_)),jy=(R(),w(nt)),nst='<div class="ag-charts-color-picker__palette" tabindex="0"></div><div class="ag-charts-color-picker__color-row"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',{Color:mT}=bV._ModuleSupport,vV=t=>{try{const e=mT.fromString(t),[i,s,n]=e.toHSB();return[i,s,n,e.a]}catch{return}},SV=class extends bV._ModuleSupport.AnchoredPopover{constructor(t,e){super(t,"color-picker",e),this.hasChanged=!1,this.hideFns.push(()=>{this.hasChanged&&this.onChangeHide?.()})}show(t){this.hasChanged=!1,this.onChangeHide=t.onChangeHide;const{element:e,initialFocus:i}=this.createColorPicker(t),s=this.showWithChildren([e],{initialFocus:i,...t});s.classList.add("ag-charts-color-picker"),s.setAttribute("role","dialog")}createColorPicker(t){let e=t.isMultiColor??!1,[i,s,n,a]=vV(t.color??"#f00")??[0,1,.5,1];a=t.opacity??a;const o=(0,jy.createElement)("div","ag-charts-color-picker__content");o.innerHTML=nst,o.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const r=o.querySelector(".ag-charts-color-picker__palette"),l=o.querySelector(".ag-charts-color-picker__hue-input"),c=o.querySelector(".ag-charts-color-picker__multi-color-button"),h=o.querySelector(".ag-charts-color-picker__alpha-input"),u=o.querySelector(".ag-charts-color-picker__color-input"),d=o.querySelector(".ag-charts-color-picker__color-label");c.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!t.hasMultiColorOption);const p=(y=!0)=>{const v=mT.fromHSB(i,s,n,a).toHexString();if(o.style.setProperty("--h",`${i}`),o.style.setProperty("--s",`${s}`),o.style.setProperty("--v",`${n}`),o.style.setProperty("--a",`${a}`),o.style.setProperty("--color",v.slice(0,7)),o.style.setProperty("--color-a",v),l.value=`${i}`,h.value=`${a}`,h.classList.toggle("ag-charts-color-picker__alpha-input--opaque",a===1),c.classList.toggle("ag-charts-color-picker__multi-color-button--active",e),d.classList.toggle("ag-charts-color-picker__color-label--multi-color",e),document.activeElement!==u&&(u.value=e?"Multi Colour":v.toUpperCase()),y||t.color==null){const M=mT.fromHSB(i,s,n,1).toHexString();t.onChange?.(v,M,a,e)}y&&(this.hasChanged=!0)};p(!1);const g=y=>y.preventDefault(),f=y=>y.stopPropagation(),x=y=>{y.preventDefault();const b=y.currentTarget;b.focus();const v=b.getBoundingClientRect(),M=({clientX:L,clientY:A})=>{e=!1,s=Math.min(Math.max((L-v.left)/v.width,0),1),n=1-Math.min(Math.max((A-v.top)/v.height,0),1),p()},D=()=>{window.removeEventListener("pointermove",M)};M(y),window.addEventListener("pointermove",M),window.addEventListener("pointerup",D,{once:!0})};return o.addEventListener("mousedown",f),o.addEventListener("touchstart",f),o.addEventListener("touchmove",f),o.addEventListener("keydown",y=>{switch(y.stopPropagation(),y.key){case"Enter":case"Escape":this.hide();break;default:return}y.preventDefault()}),r.addEventListener("pointerdown",x),r.addEventListener("touchstart",g,{passive:!1}),r.addEventListener("touchmove",g,{passive:!1}),r.addEventListener("keydown",y=>{if(y.key==="ArrowLeft")s=(0,jy.clamp)(0,s-.01,1);else if(y.key==="ArrowRight")s=(0,jy.clamp)(0,s+.01,1);else if(y.key==="ArrowUp")n=(0,jy.clamp)(0,n+.01,1);else if(y.key==="ArrowDown")n=(0,jy.clamp)(0,n-.01,1);else return;y.preventDefault(),p()}),c.addEventListener("click",()=>{e=!e,p()}),l.addEventListener("input",y=>{e=!1,i=y.currentTarget.valueAsNumber??0,p()}),h.addEventListener("input",y=>{e=!1,a=y.currentTarget.valueAsNumber??0,p()}),u.addEventListener("input",y=>{e=!1;const b=vV(y.currentTarget.value);b!=null&&([i,s,n,a]=b,p())}),u.addEventListener("blur",()=>p()),u.addEventListener("keydown",y=>{y.key==="Enter"&&(y.currentTarget.blur(),p())}),{element:o,initialFocus:r}}},MV=(E(),w(_));function DV(t){return!(t instanceof MV._ModuleSupport.LogScale)&&!(t instanceof MV._ModuleSupport.BandScale)}var ast=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel",visible:DV},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel",visible:DV}],ost=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"},{label:"toolbarAnnotationsFibonacciRetracementTrendBased",icon:"fibonacci-retracement-trend-based-drawing",value:"fibonacci-retracement-trend-based"}],rst=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],lst=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],cst=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],hst=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],kV=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],Gy=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],IV=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{Color:AV,FloatingToolbar:ust,Listeners:dst,Menu:yT,PropertiesArray:pst,ToolbarButtonProperties:CV,ToolbarButtonWidget:gst,Property:hd}=xV._ModuleSupport,Ig=class extends CV{constructor(){super(...arguments),this.checkedOverrides=new CV}};m([hd],Ig.prototype,"value",2),m([hd],Ig.prototype,"checkedOverrides",2),m([hd],Ig.prototype,"color",2),m([hd],Ig.prototype,"strokeWidth",2),m([hd],Ig.prototype,"isMultiColor",2);var fst=class extends gst{update(t){super.update(t),t.value==="line-stroke-width"&&this.updateLineStrokeWidth(t),(t.value==="fill-color"||t.value==="line-color"||t.value==="text-color")&&this.updateFillColor(t)}updateFillColor(t){const e=this.getElement();e.classList.add("ag-charts-annotations__color-picker-button"),e.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",t.isMultiColor),e.style.setProperty("--color",t.color??null)}updateLineStrokeWidth(t){const e=this.getElement();e.classList.add("ag-charts-annotations__stroke-width-button"),e.style.setProperty("--stroke-width",`${t.strokeWidth}px`)}},mst=class extends ust{createButtonWidget(){return new fst(this.localeManager)}},xT=class extends xV._ModuleSupport.BaseProperties{constructor(t,e){super(),this.ctx=t,this.getActiveDatum=e,this.enabled=!0,this.buttons=new pst(Ig),this.destroyFns=[],this.events=new dst,this.visibleButtons=[],this.toolbar=new mst(this.ctx,"annotation-options"),this.colorPicker=new SV(this.ctx),this.textSizeMenu=new yT(this.ctx,"text-size"),this.lineStyleTypeMenu=new yT(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new yT(this.ctx,"annotations-line-stroke-width"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),t.widgets.seriesWidget.addListener("drag-start",this.onDragStart.bind(this)),t.widgets.seriesWidget.addListener("drag-end",this.onDragEnd.bind(this)),()=>this.colorPicker.destroy())}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}show(){this.enabled&&this.toolbar.show()}hide(){this.toolbar.hide()}updateButtons(t){if(!this.enabled)return;const e={"line-style-type":nh(t),"line-stroke-width":nh(t),"line-color":Qit(t),"text-color":est(t),"fill-color":tst(t),"text-size":fT(t),settings:kg(t),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter(i=>e[i.value]),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(t)}setAnchorScene(t){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(t.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.dispatch("hid-overlays")}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(t){this.updateColorPickerColor("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("text-color",t.getDefaultColor("text-color"),t.getDefaultOpacity("text-color"),"isMultiColor"in t&&t?.isMultiColor)}updateColorPickerColor(t,e,i,s){if(e!=null&&i!=null){const{r:n,g:a,b:o}=AV.fromString(e);e=AV.fromArray([n,a,o,i]).toHexString()}this.updateButtonByValue(t,{color:e,isMultiColor:s})}updateFontSize(t){this.updateButtonByValue("text-size",{label:t!=null?String(t):void 0})}updateLineStyleType(t){this.updateButtonByValue("line-style-type",{icon:t.icon})}updateStrokeWidth(t){this.updateButtonByValue("line-stroke-width",{label:t.label,strokeWidth:t.value})}dispatch(t,e){this.events.dispatch(t,e)}onButtonPress({event:t,button:e}){const i=this.getActiveDatum();if(i)switch(this.hideOverlays(),e.value){case"line-style-type":{const s=nh(i)?By(i.lineDash,i.lineStyle):void 0;this.lineStyleTypeMenu.show({items:Gy,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:s,sourceEvent:t.sourceEvent,onPress:n=>this.onLineStyleTypeMenuPress(n,i),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const s=nh(i)?i.strokeWidth:void 0;this.lineStrokeWidthMenu.show({items:kV,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:s,sourceEvent:t.sourceEvent,onPress:n=>this.onLineStrokeWidthMenuPress(n,i),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":{this.toolbar.toggleActiveButtonByIndex(e.index),this.colorPicker.show({color:i?.getDefaultColor(e.value),opacity:i?.getDefaultOpacity(e.value),sourceEvent:t.sourceEvent,hasMultiColorOption:"isMultiColor"in i,isMultiColor:"isMultiColor"in i&&i?.isMultiColor,onChange:i!=null?this.onColorPickerChange.bind(this,e.value,i):void 0,onChangeHide:(s=>{this.dispatch("saved-color",{type:i.type,colorPickerType:e.value,color:i.getDefaultColor(s)})}).bind(this,e.value)});break}case"text-size":{const s=Or(i)?i.fontSize:void 0;this.textSizeMenu.show({items:IV,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:s,sourceEvent:t.sourceEvent,onPress:n=>this.onTextSizeMenuPress(n,i),class:"ag-charts-annotations__text-size-menu"});break}case"delete":{this.dispatch("pressed-delete");break}case"lock":{i.locked=!i.locked,this.refreshButtons(i),this.dispatch("pressed-lock");break}case"settings":{this.toolbar.toggleActiveButtonByIndex(e.index),this.dispatch("pressed-settings",t);break}}}onToolbarMoved(t){const{buttonBounds:e,popoverBounds:i}=t,s={x:i.x,y:i.y+i.height+4},n={y:i.y-4};this.colorPicker.setAnchor(s,n);for(const[a,o]of e.entries()){const r=this.visibleButtons.at(a);if(!r)continue;const l={x:o.x,y:o.y+o.height-1},c={y:o.y};switch(r.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(l,c);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(l,c);break;case"text-size":this.textSizeMenu.setAnchor(l,c);break}}}onColorPickerChange(t,e,i,s,n,a){this.dispatch("updated-color",{type:e.type,colorPickerType:t,colorOpacity:i,color:s,opacity:n,isMultiColor:a}),this.updateColorPickerColor(t,i,n,a)}onTextSizeMenuPress(t,e){if(!fT(e))return;const i=t.value;this.dispatch("updated-font-size",{type:e.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(t,e){if(!nh(e))return;const i=t.value;this.dispatch("updated-line-style",{type:e.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(t)}onLineStrokeWidthMenuPress(t,e){if(!nh(e))return;const i=t.value;this.dispatch("updated-line-width",{type:e.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(t)}refreshButtons(t){const e=t.locked??!1;for(const[i,s]of this.visibleButtons.entries())s&&(s.value==="lock"?(this.toolbar.toggleSwitchCheckedByIndex(i,e),this.updateButtonByIndex(i,e?s.checkedOverrides.toJson():s.toJson())):this.toolbar.toggleButtonEnabledByIndex(i,!e));fT(t)&&this.updateFontSize(t.fontSize),this.updateColors(t),this.updateLineStyles(t)}updateLineStyles(t){if(!nh(t))return;const e=t.strokeWidth??1,i=By(t.lineDash,t.lineStyle);this.updateStrokeWidth({strokeWidth:e,value:e,label:String(e)}),this.updateLineStyleType(Gy.find(s=>s.value===i)??Gy[0])}updateButtonByValue(t,e){const i=this.visibleButtons.findIndex(s=>s.value===t);i!==-1&&this.updateButtonByIndex(i,e)}updateButtonByIndex(t,e){const i=this.visibleButtons.at(t);i&&this.toolbar.updateButtonByIndex(t,{...i.toJson(),...e,value:e.value??i.value})}};m([hd],xT.prototype,"enabled",2),m([hd],xT.prototype,"buttons",2);var yst=(E(),w(_)),{StateMachine:LV,StateMachineProperty:bT,Vec2:wV,Debug:xst}=yst._ModuleSupport,wi=class extends LV{constructor(t){const e=({context:i})=>{this.node?.drag(this.datum,this.offset,i,this.snapping),t.update()};super("idle",{idle:{dragStart:{target:"dragging",action:({offset:i,context:s})=>{this.hasMoved=!1,this.dragStart=i,this.offset=i,this.node?.dragStart(this.datum,i,s)}}},dragging:{keyDown:e,keyUp:e,drag:({offset:i,context:s})=>{this.hasMoved=wV.lengthSquared(wV.sub(i,this.dragStart))>0,this.offset=i,this.node?.drag(this.datum,i,s,this.snapping),t.update()},dragEnd:{target:LV.parent,action:()=>{this.node?.stopDragging(),this.hasMoved&&t.recordAction("Move annotation"),t.update()}}}}),this.debug=xst.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};m([bT()],wi.prototype,"snapping",2),m([bT()],wi.prototype,"datum",2),m([bT()],wi.prototype,"node",2);var bst=(E(),w(_)),vst=(R(),w(nt)),{Property:Sst}=bst._ModuleSupport,ah=class extends pT{constructor(){super(...arguments),this.type="arrow-down"}static is(t){return(0,vst.isObject)(t)&&t.type==="arrow-down"}};m([Sst],ah.prototype,"type",2);var TV=(E(),w(_)),NV=(E(),w(_)),V0=(E(),w(_)),Mst=(R(),w(nt)),ud=(E(),w(_)),OV=class S5 extends ud._ModuleSupport.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:i,locked:s}=this;return s?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-i.x,y:e.y-i.y}}}toggleActive(e){this.active=e,e||(this.handle.strokeWidth=S5.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,i){return this.handle.containsPoint(e,i)}};OV.INACTIVE_STROKE_WIDTH=2;var oh=OV,vT=class M5 extends oh{constructor(){super(),this.handle=new ud._ModuleSupport.Marker({shape:"circle"}),this.glow=new ud._ModuleSupport.Marker({shape:"circle"}),this.append([this.handle]),this.handle.size=M5.HANDLE_SIZE,this.handle.strokeWidth=oh.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties({...e,strokeWidth:oh.INACTIVE_STROKE_WIDTH})}drag(e){return{point:e,offset:{x:0,y:0}}}};vT.HANDLE_SIZE=7,vT.GLOW_SIZE=9;var rh=vT,W0=class Qn extends oh{constructor(){super(),this.handle=new ud._ModuleSupport.Rect,this.glow=new ud._ModuleSupport.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=Qn.CORNER_RADIUS,this.handle.width=Qn.HANDLE_SIZE,this.handle.height=Qn.HANDLE_SIZE,this.handle.strokeWidth=oh.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=Qn.CORNER_RADIUS,this.glow.width=Qn.GLOW_SIZE,this.glow.height=Qn.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){if(super.toggleLocked(e),e){const i=(Qn.HANDLE_SIZE-rh.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=rh.HANDLE_SIZE,this.handle.height=rh.HANDLE_SIZE,this.glow.width=rh.GLOW_SIZE,this.glow.height=rh.GLOW_SIZE}else this.handle.cornerRadius=Qn.CORNER_RADIUS,this.handle.width=Qn.HANDLE_SIZE,this.handle.height=Qn.HANDLE_SIZE,this.glow.width=Qn.GLOW_SIZE,this.glow.height=Qn.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(e){if(this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked){delete e.fill,delete e.strokeWidth;const i=(Qn.HANDLE_SIZE-rh.HANDLE_SIZE)/2;e.x-=i,e.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(e),this.glow.setProperties({...e,x:(e.x??this.glow.x)-2,y:(e.y??this.glow.y)-2,strokeWidth:0,fill:e.stroke})}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return this.gradient==="vertical"?"col-resize":"row-resize"}};W0.HANDLE_SIZE=12,W0.GLOW_SIZE=16,W0.CORNER_RADIUS=4;var Ag=W0,ST=class Bx extends oh{constructor(){super(),this.handle=new ud._ModuleSupport.Marker({shape:"circle"}),this.glow=new ud._ModuleSupport.Marker({shape:"circle"}),this.append([this.glow,this.handle]),this.handle.size=Bx.HANDLE_SIZE,this.handle.strokeWidth=oh.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=Bx.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){super.toggleLocked(e),e?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=rh.HANDLE_SIZE,this.glow.size=rh.GLOW_SIZE):(this.handle.size=Bx.HANDLE_SIZE,this.glow.size=Bx.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties({...e,strokeWidth:0,fill:e.stroke})}getCursor(){return"pointer"}};ST.HANDLE_SIZE=11,ST.GLOW_SIZE=17;var oi=ST,{ZIndexMap:Dst}=V0._ModuleSupport,bs=class extends V0._ModuleSupport.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=Dst.CHART_ANNOTATION}static isCheck(t,e){return(0,Mst.isObject)(t)&&Object.hasOwn(t,"type")&&t.type===e}toggleHovered(t){this.toggleHandles(t)}*nonHandleChildren(){for(const t of this.children())t instanceof oh||(yield t)}computeBBoxWithoutHandles(){return V0._ModuleSupport.Transformable.toCanvas(this,V0._ModuleSupport.Group.computeChildrenBBox(this.nonHandleChildren()))}updateNode(t,e,i){if(!i&&e){this.removeChild(e);return}return i&&e==null&&(e=new t,this.appendChild(e)),e}},kst=(E(),w(_)),Ist=(E(),w(_)),Ast=(R(),w(nt)),{ContinuousScale:Cst,Vec2:ao,toRadians:Lst}=Ist._ModuleSupport;function Vy(t,e,i=!1,s,n=1){if(!i)return Sn(t,e);const a=s?ai(s,e):ao.origin();return Sn(H0(t,a,n),e)}function H0(t,e,i){const s=ao.sub(t,e),n=Lst(i),a=Math.round(ao.angle(s)/n)*n;return ao.rotate(s,a,e)}function U0(t,e){const i={};for(const[s,n]of(0,Ast.entries)(t))i[s]=ai(n,e);return i}function Gl(t,e,i,s={overflowContinuous:0,translateVectors:void 0,invertYVectors:void 0,snap:void 0}){const{xAxis:n,yAxis:a}=i,o=Object.keys(t),r=[],l=[],c=new Set(s.translateVectors??o),h=new Set(s.invertYVectors??[]),u=new Set([...c,...h]),d=ao.multiply(e,ao.from(1,-1));for(const y of o)u.has(y)&&(t[y]=ao.add(t[y],h.has(y)?d:e),s.snap&&(t[y]=H0(t[y],s.snap.vectors[y],s.snap.angle))),r.push(n.getRangeOverflow(t[y].x)),l.push(a.getRangeOverflow(t[y].y));const p=(y,b)=>Math.abs(y)-Math.abs(b),g=(y,b,v)=>s.overflowContinuous===0||!Cst.is(y)?v.toSorted(p).at(-1)??0:o.length===u.size?v.toSorted(p).at(-s.overflowContinuous-1)??0:v.filter(D=>D!==0).length<=s.overflowContinuous?0:v.filter((D,L)=>D!==0&&Math.abs(D)<=Math.abs(b)&&u.has(o[L])).toSorted(p).at(-1)??0,f=ao.from(g(n.scale,e.x,r),g(a.scale,e.y,l));if(!ao.equal(f,ao.origin()))for(const y of o)u.has(y)&&(t[y]=ao.round(ao.sub(t[y],f),4));const x={};for(const y of o)x[y]=Sn(t[y],i);return x}var{Vec2:wst}=kst._ModuleSupport,_V=class extends bs{constructor(){super(...arguments),this.handle=new oi,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=ai(t,e);this.updateHandle(t,i),this.anchor=this.updateAnchor(t,i,e)}dragStart(t,e,i){this.dragState={offset:e,...U0({handle:t},i)}}drag(t,e,i){const{dragState:s}=this;if(t.locked||!s)return;const{point:n}=Gl({point:s.handle},wst.sub(e,s.offset),i);t.x=n.x,t.y=n.y}translate(t,e,i){if(t.locked)return;const{point:s}=Gl({point:ai(t,i)},e,i);t.x=s.x,t.y=s.y}toggleHandles(t){this.handle.visible=!!t,this.handle.toggleHovered(this.activeHandle==="handle")}toggleActive(t){this.toggleHandles(t),this.handle.toggleActive(t)}stopDragging(){this.handle.toggleDragging(!1)}copy(t,e,i){const s=ai(t,i),n=Sn({x:s.x-30,y:s.y-30},i);return e.x=n.x,e.y=n.y,e}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{handle:i}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="handle",!0):!1}getNodeAtCoords(t,e){if(this.handle.containsPoint(t,e))return"handle"}updateHandle(t,e,i){const{x:s,y:n}=this.getHandleCoords(t,e,i),a=this.getHandleStyles(t);this.handle.update({...a,x:s,y:n}),this.handle.toggleLocked(t.locked??!1)}updateAnchor(t,e,i){const s=this.getHandleCoords(t,e);return{x:s.x+i.seriesRect.x,y:s.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i){return{x:e.x,y:e.y}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},EV=class extends _V{constructor(){super(),this.append([this.handle])}update(t,e){super.update(t,e);const i=ai(t,e);this.updateShape(t,i)}updateShape(t,e){this.updateShapeStyles(t),this.updateShapePath(t,e)}updateShapeStyles(t){const{shape:e}=this;e.fill=t.fill,e.fillOpacity=t.fillOpacity??1}updateShapePath(t,e){const{shape:i}=this;i.x=e.x,i.y=e.y,i.size=t.size}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}getNodeAtCoords(t,e){return this.shape.containsPoint(t,e)?"shape":super.getNodeAtCoords(t,e)}},PV=[[.5,0],[1,.5],[.75,.5],[.75,1],[.25,1],[.25,.5],[0,.5]];function RV(t){NV._ModuleSupport.drawMarkerUnitPolygon(t,PV)}RV.anchor={x:.5,y:0};var $0=class extends EV{constructor(){super(),this.type="arrow-up",this.shape=new NV._ModuleSupport.Marker({shape:RV}),this.append([this.shape])}static is(t){return bs.isCheck(t,"arrow-up")}getHandleCoords(t,e){const i=oi.HANDLE_SIZE/2,s=super.getHandleCoords(t,e);return s.y-=i,s}},Tst=PV.map(([t,e])=>[t,1-e]);function BV(t){TV._ModuleSupport.drawMarkerUnitPolygon(t,Tst)}BV.anchor={x:.5,y:1};var K0=class extends EV{constructor(){super(),this.type="arrow-down",this.shape=new TV._ModuleSupport.Marker({shape:BV}),this.append([this.shape])}static is(t){return bs.isCheck(t,"arrow-down")}updateAnchor(t,e,i){const s=super.updateAnchor(t,e,i);return s.y-=t.size,s}getHandleCoords(t,e){const i=oi.HANDLE_SIZE/2,s=super.getHandleCoords(t,e);return s.y+=i,s}},Nst=(E(),w(_)),{StateMachine:Y0,StateMachineProperty:Ost,Debug:_st}=Nst._ModuleSupport,MT=class extends Y0{constructor(t){const e=({point:s})=>{const n=this.createDatum();n.set({x:s.x,y:s.y}),t.create(n)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},cancel:Y0.parent,reset:Y0.parent},"waiting-first-render":{render:{target:Y0.parent,action:i}}}),this.debug=_st.create(!0,"annotations")}};m([Ost()],MT.prototype,"node",2);var Est=class extends MT{createDatum(){return new ah}},zV={type:"arrow-down",datum:ah,scene:K0,isDatum:ah.is,translate:(t,e,i,s)=>{ah.is(e)&&K0.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(ah.is(e)&&ah.is(i)&&K0.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{ah.is(e)&&K0.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Est({...t,create:e("arrow-down")}),dragState:t=>new wi(t)},Pst=(E(),w(_)),Rst=(R(),w(nt)),{Property:Bst}=Pst._ModuleSupport,lh=class extends pT{constructor(){super(...arguments),this.type="arrow-up"}static is(t){return(0,Rst.isObject)(t)&&t.type==="arrow-up"}};m([Bst],lh.prototype,"type",2);var zst=class extends MT{createDatum(){return new lh}},FV={type:"arrow-up",datum:lh,scene:$0,isDatum:lh.is,translate:(t,e,i,s)=>{lh.is(e)&&$0.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(lh.is(e)&&lh.is(i)&&$0.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{lh.is(e)&&$0.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new zst({...t,create:e("arrow-up")}),dragState:t=>new wi(t)},Fst=(E(),w(_)),jV=(E(),w(_)),jst=(E(),w(_)),Gst=(R(),w(nt)),Vst=(E(),w(_)),{Vec2:Wst,Vec4:GV}=Vst._ModuleSupport,VV=class extends bs{constructor(){super(...arguments),this.overflowContinuous=0}extendLine({x1:t,y1:e,x2:i,y2:s},n,a){const o={x1:t,y1:e,x2:i,y2:s};if(!n.extendStart&&!n.extendEnd)return o;const[r,l]=vit(o,a.yAxis.bounds),c=o.x2<o.x1,h=o.y1>=o.y2,u=o.x2===o.x1;return n.extendEnd&&(u?o.y2=h?l.y:r.y:(o.x2=c?r.x:l.x,o.y2=c?r.y:l.y)),n.extendStart&&(u?o.y1=h?r.y:l.y:(o.x1=c?l.x:r.x,o.y1=c?l.y:r.y)),o}dragStart(t,e,i){this.dragState={offset:e,...U0({start:t.start,end:t.end},i)}}drag(t,e,i,s){t.locked||(this.activeHandle?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}dragAll(t,e,i){const{dragState:s}=this;s&&this.translatePoints(t,s.start,s.end,Wst.sub(e,s.offset),i)}translate(t,e,i){t.locked||this.translatePoints(t,ai(t.start,i),ai(t.end,i),e,i)}copy(t,e,i){const s=vn(t,i);if(!s)return;const n=this.computeBBoxWithoutHandles(),a={x:-n.width/2,y:-n.height/2};return this.translatePoints(e,GV.start(s),GV.end(s),a,i),e}translatePoints(t,e,i,s,n){const a=this.getTranslatePointsVectors(e,i),o=Gl(a,s,n,{overflowContinuous:this.overflowContinuous});t.start.x=o.start.x,t.end.x=o.end.x,t.start.y=o.start.y,t.end.y=o.end.y}getTranslatePointsVectors(t,e){return{start:t,end:e}}},{Vec2:Hst,Vec4:WV}=jst._ModuleSupport,DT=class extends VV{constructor(){super(...arguments),this.start=new oi,this.end=new oi,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=vn(t,e);i!=null&&(this.updateHandles(t,i),this.updateAnchor(t,i,e))}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of(0,Gst.entries)(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i,s){const{activeHandle:n,dragState:a}=this;if(!n||!a)return;this[n].toggleDragging(!0);const o=n==="start"?"end":"start",r=s?{vectors:{[n]:ai(t[o],i)},angle:t.snapToAngle}:void 0,{[n]:l}=Gl({[n]:a[n]},Hst.sub(e,a.offset),i,{overflowContinuous:0,snap:r});t[n].x=l.x,t[n].y=l.y}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{start:i,end:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):s.containsPoint(t,e)?(this.activeHandle="end",!0):!1}getNodeAtCoords(t,e){if(this.start.containsPoint(t,e)||this.end.containsPoint(t,e))return"handle"}updateHandles(t,e,i){this.start.update({...this.getHandleStyles(t,"start"),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t,"end"),...this.getHandleCoords(t,e,"end",i)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}updateAnchor(t,e,i,s){this.anchor={x:e.x1+i.seriesRect.x,y:e.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i,s){return i==="start"?WV.start(e):WV.end(e)}getHandleStyles(t,e){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},{Vec4:HV}=jV._ModuleSupport,Ust=class extends DT{constructor(){super(...arguments),this.label=new jV._ModuleSupport.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty("TextualStartEndScene")}update(t,e){const i=vn(t,e);if(i==null)return;const s=this.getTextBBox(t,i);this.updateLabel(t,s,i),this.updateHandles(t,i,s),this.updateShape(t,s,i),this.updateAnchor(t,i,e,s)}containsPoint(t,e){return super.containsPoint(t,e)||this.label.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e){const{text:i}=t.getText();return dT(t,i,HV.end(e),this.textInputBBox)}updateLabel(t,e,i){const{text:s,isPlaceholder:n}=t.getText();aV(this.label,s,n,t,this.getLabelCoords(t,e,i))}updateShape(t,e,i){}getLabelCoords(t,e,i){return HV.end(i)}getHandleStyles(t,e){return{...super.getHandleStyles(t,e),stroke:t.handle.stroke??t.color}}},{drawCorner:$st,Path:Kst}=Fst._ModuleSupport,Z0=class extends Ust{constructor(){super(),this.type="callout",this.shape=new Kst,this.append([this.shape,this.label,this.start,this.end])}static is(t){return bs.isCheck(t,"callout")}drag(t,e,i,s){t.locked||(this.activeHandle==="end"?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}getLabelCoords(t,e,i){const s=t.getPadding(),{bodyBounds:n={x:0,y:0,width:0,height:0}}=this.getDimensions(t,e,i)??{};return{x:n.x+s.left,y:n.y-s.bottom}}getHandleStyles(t,e){return e==="start"?{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(t,e,i,s){const{bodyBounds:n}=this.getDimensions(t,s,e)??{},a=n??s;this.anchor={x:a.x+i.seriesRect.x,y:a.y+i.seriesRect.y-a.height,position:this.anchor.position}}updateShape(t,e,i){const{shape:s}=this;s.fill=t.fill,s.fillOpacity=t.fillOpacity??1,s.stroke=t.stroke,s.strokeWidth=t.strokeWidth??1,s.strokeOpacity=t.strokeOpacity??1;const{tailPoint:n,bodyBounds:a}=this.getDimensions(t,e,i)??{};!n||!a||this.updatePath(n,a)}updatePath(t,e){const{x:i,y:s}=t,{x:n,y:a,width:o,height:r}=e,l=a-r,c=n+o,h=this.calculateCalloutPlacement({x:i,y:s},e),u=8,d=[{coordinates:{x0:n,x1:n+u,y0:l+u,y1:l,cx:h==="topLeft"?i:n+u,cy:h==="topLeft"?s:l+u},type:h==="topLeft"?"calloutCorner":"corner"},{coordinates:{x0:n+u,x1:c-u,y0:l,y1:l,cx:i,cy:s},type:h==="top"?"calloutSide":"side"},{coordinates:{x0:c-u,x1:c,y0:l,y1:l+u,cx:h==="topRight"?i:c-u,cy:h==="topRight"?s:l+u},type:h==="topRight"?"calloutCorner":"corner"},{coordinates:{x0:c,x1:c,y0:l+u,y1:a-u,cx:i,cy:s},type:h==="right"?"calloutSide":"side"},{coordinates:{x0:c,x1:c-u,y0:a-u,y1:a,cx:h==="bottomRight"?i:c-u,cy:h==="bottomRight"?s:a-u},type:h==="bottomRight"?"calloutCorner":"corner"},{coordinates:{x0:c-u,x1:n+u,y0:a,y1:a,cx:i,cy:s},type:h==="bottom"?"calloutSide":"side"},{coordinates:{x0:n+u,x1:n,y0:a,y1:a-u,cx:h==="bottomLeft"?i:n+u,cy:h==="bottomLeft"?s:a-u},type:h==="bottomLeft"?"calloutCorner":"corner"},{coordinates:{x0:n,x1:n,y0:a-u,y1:l+u,cx:i,cy:s},type:h==="left"?"calloutSide":"side"}],{path:p}=this.shape;p.clear(),p.moveTo(n,l+u),d.forEach(({coordinates:g,type:f})=>{this.drawPath(p,g,u,f)}),p.closePath()}drawPath(t,{x0:e,y0:i,x1:s,y1:n,cx:a,cy:o},r,l){switch(l){case"calloutCorner":{t.lineTo(a,o),t.lineTo(s,n);break}case"corner":{$st(t,{x0:e,x1:s,y0:i,y1:n,cx:a,cy:o},r,!1);break}case"calloutSide":{if(e!==s){const h=e>s?-1:1,u=Math.min(e,s)+Math.abs(s-e)/2;t.lineTo(u-6*h,i),t.lineTo(a,o),t.lineTo(u+6*h,i),t.lineTo(s,n)}else{const h=i>n?-1:1,u=Math.min(i,n)+Math.abs(i-n)/2;t.lineTo(e,u-6*h),t.lineTo(a,o),t.lineTo(e,u+6*h),t.lineTo(s,n)}break}case"side":default:{t.lineTo(s,n);break}}}calculateCalloutPlacement(t,e){const i=e.x+e.width,s=e.y-e.height;let n,a;return t.x>i?n="right":t.x<e.x&&(n="left"),t.y>e.y?a="bottom":t.y<s&&(a="top"),n&&a?`${a}${n[0].toUpperCase()}${n.substring(1)}`:a??n}getDimensions(t,e,i){const{fontSize:s}=t,n=t.getPadding(),a=n.left+n.right,o=n.top+n.bottom,r=e.width+a,l=Math.max(e.height+o,s+o);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:e.x,y:e.y,width:r,height:l}}}containsPoint(t,e){const{start:i,end:s,shape:n}=this;if(this.activeHandle=void 0,i.containsPoint(t,e))return this.activeHandle="start",!0;const a=s.containsPoint(t,e)||n.containsPoint(t,e);return a&&(this.activeHandle="end"),a}},Yst=(E(),w(_));function kT({key:t}){return t==="Escape"}function IT({key:t,shiftKey:e}){return!e&&t==="Enter"}var{StateMachine:Ho,StateMachineProperty:UV,Debug:Zst}=Yst._ModuleSupport,AT=class extends Ho{constructor(t){const e=({point:d})=>{const p=this.createDatum();p.set({start:d,end:d,visible:!0}),t.create(p)},i=()=>{const{node:d}=this;d?.toggleActive(!0),d?.toggleHandles({start:!0})},s=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},n=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},a=d=>{this.node?.setTextInputBBox(d),t.update()},o=({point:d})=>{const{datum:p,node:g}=this;p?.set({end:d}),g?.toggleActive(!0),g?.toggleHandles({end:!1}),t.update()},r=()=>{t.showAnnotationOptions(),this.node?.toggleHandles({end:!0})},l=({colorPickerType:d,colorOpacity:p,color:g,opacity:f,isMultiColor:x})=>{const{datum:y}=this;y&&(d==="text-color"&&t.updateTextInputColor(g),G0(y,d,p,g,f,x),t.update())},c=d=>{const{datum:p,node:g}=this;!p||!g||!Or(p)||(p.fontSize=d,t.updateTextInputFontSize(d),t.update())},h=()=>{t.delete()},u=({textInputValue:d,bbox:p})=>{const{datum:g}=this;if(p!=null&&d!=null&&d.length>0){if(!Or(g))return;const f=P0(g,d,p.width);g?.set({text:f}),t.update(),t.recordAction(`Create ${g?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:Ho.parent,reset:Ho.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,drag:o,click:{target:"edit",action:r},dragEnd:{target:"edit",action:r},reset:{target:Ho.parent,action:h},cancel:{target:Ho.parent,action:h}},edit:{onEnter:s,updateTextInputBBox:a,color:l,fontSize:c,textInput:[{guard:kT,target:Ho.parent,action:h},{guard:IT,target:Ho.parent,action:u}],click:{target:Ho.parent,action:u},dragStart:{target:Ho.parent,action:u},resize:{target:Ho.parent,action:u},onExit:n,cancel:{target:Ho.parent,action:h}}}),this.debug=Zst.create(!0,"annotations")}};m([UV()],AT.prototype,"datum",2),m([UV()],AT.prototype,"node",2);var Xst=class extends AT{createDatum(){return new Wo}},$V={type:"callout",datum:Wo,scene:Z0,isDatum:Wo.is,translate:(t,e,i,s)=>{if(Wo.is(e)&&Z0.is(t))return t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Wo.is(e)&&Wo.is(i)&&Z0.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Wo.is(e)&&Z0.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Xst({...t,create:e("callout")}),dragState:t=>new wi(t)},KV=(E(),w(_)),qst=(E(),w(_)),CT=class extends _V{constructor(){super(...arguments),this.label=new qst._ModuleSupport.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty("TextualPointScene")}update(t,e){const i=ai(t,e),s=this.getTextBBox(t,i,e);this.updateLabel(t,s),this.updateHandle(t,i,s),this.updateShape(t,s),this.anchor=this.updateAnchor(t,s,e)}copy(t,e,i){const s=ai(t,i),n=this.getTextBBox(t,s,i),a=t.getPadding(),o=a.left+a.right,r=a.top+a.bottom,l=(n.width+o)/2,c=n.height+r,h=Sn({x:s.x-l,y:s.y-c},i);return e.x=h.x,e.y=h.y,e}containsPoint(t,e){const{label:i}=this;return super.containsPoint(t,e)||i.visible&&i.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.visible&&this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e,i){const{text:s}=t.getText();return dT(t,s,{x:e.x,y:e.y},this.textInputBBox)}updateLabel(t,e){const{text:i,isPlaceholder:s}=t.getText();aV(this.label,i,s,t,this.getLabelCoords(t,e),this.getTextBaseline(t))}updateShape(t,e){}updateAnchor(t,e,i){return{x:e.x+i.seriesRect.x,y:e.y+i.seriesRect.y-e.height,position:this.anchor.position}}getLabelCoords(t,e){return e}getTextBaseline(t){return t.position=="center"?"middle":t.position}getHandleCoords(t,e,i){return i}getHandleStyles(t){const e=super.getHandleStyles(t);return e.stroke=t.handle.stroke??t.color,e}},{drawCorner:LT}=KV._ModuleSupport,X0=class extends CT{constructor(){super(),this.type="comment",this.shape=new KV._ModuleSupport.Path,this.append([this.shape,this.label,this.handle])}static is(t){return bs.isCheck(t,"comment")}updateShape(t,e){const{shape:i}=this;i.fill=t.fill,i.fillOpacity=t.fillOpacity??1,i.stroke=t.stroke??"transparent",i.strokeWidth=t.strokeWidth??1,i.strokeOpacity=t.strokeOpacity??1,this.updatePath(t,e)}getLabelCoords(t,e){const i=t.getPadding();return{x:e.x+i.left,y:e.y-i.bottom}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}updateAnchor(t,e,i){const s=super.updateAnchor(t,e,i),n=t.getPadding();return s.y-=n.bottom+n.top,s}updatePath(t,e){const i=t.getPadding(),{x:s,y:n}=e;let{width:a,height:o}=e;const{fontSize:r}=t,l=i.left+i.right,c=i.top+i.bottom;a=a+l,o=Math.max(o+c,r+c);const h=n-o,u=s+a,d=(r*zy+c)/2,{path:p}=this.shape;p.clear(),p.moveTo(s,n),p.lineTo(s,h+d),LT(p,{x0:s,x1:s+d,y0:h+d,y1:h,cx:s+d,cy:h+d},d,!1),p.lineTo(u-d,h),LT(p,{x0:u-d,x1:u,y0:h,y1:h+d,cx:u-d,cy:h+d},d,!1),p.lineTo(u,n-d),LT(p,{x0:u,x1:u-d,y0:n-d,y1:n,cx:u-d,cy:n-d},d,!1),p.closePath()}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}},Qst=(E(),w(_)),{StateMachine:Vl,StateMachineProperty:YV,Debug:Jst}=Qst._ModuleSupport,Wy=class extends Vl{constructor(t){const e=({point:h})=>{const u=this.createDatum();u.set({x:h.x,y:h.y}),t.create(u)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()},s=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},n=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},a=h=>{this.node?.setTextInputBBox(h),t.update()},o=({colorPickerType:h,colorOpacity:u,color:d,opacity:p,isMultiColor:g})=>{this.datum&&(h==="text-color"&&t.updateTextInputColor(d),G0(this.datum,h,u,d,p,g),t.update())},r=h=>{const{datum:u,node:d}=this;!u||!d||!Or(u)||(u.fontSize=h,t.updateTextInputFontSize(h),t.update())},l=()=>{t.delete()},c=({textInputValue:h,bbox:u})=>{if(u!=null&&h!=null&&h.length>0){const{datum:d}=this;if(!Or(d))return;const p=P0(d,h,u.width);d?.set({text:p}),t.update(),t.recordAction(`Create ${d?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:Vl.parent,reset:Vl.parent},"waiting-first-render":{render:{target:"edit",action:i}},edit:{onEnter:s,updateTextInputBBox:a,color:o,fontSize:r,textInput:[{guard:kT,target:Vl.parent,action:l},{guard:IT,target:Vl.parent,action:c}],click:{target:Vl.parent,action:c},dragStart:{target:Vl.parent,action:c},resize:{target:Vl.parent,action:c},onExit:n,cancel:{target:Vl.parent,action:l}}}),this.debug=Jst.create(!0,"annotations")}};m([YV()],Wy.prototype,"datum",2),m([YV()],Wy.prototype,"node",2);var tnt=class extends Wy{createDatum(){return new wr}},ZV={type:"comment",datum:wr,scene:X0,isDatum:wr.is,translate:(t,e,i,s)=>{wr.is(e)&&X0.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(wr.is(e)&&wr.is(i)&&X0.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{wr.is(e)&&X0.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new tnt({...t,create:e("comment")}),dragState:t=>new wi(t)},ent=(E(),w(_)),q0=(E(),w(_)),{calculateLabelTranslation:int,ChartAxisDirection:snt}=q0._ModuleSupport,XV=class extends q0._ModuleSupport.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new q0._ModuleSupport.Text({zIndex:1}),this.rect=new q0._ModuleSupport.Rect;const{label:t}=this;t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.textBaseline="middle",t.textAlign="center",this.append([this.rect,this.label])}update(t){this.updateLabel(t),this.updateRect(t),this.updatePosition(t)}updateLabel({value:t,styles:e,context:i}){const{fontWeight:s,fontSize:n,fontStyle:a,fontFamily:o,textAlign:r,color:l="white",formatter:c}=e,h=c?c({value:t}):i.scaleValueFormatter()(t);this.label.setProperties({fontWeight:s,fontSize:n,fontStyle:a,fontFamily:o,textAlign:r,fill:l,text:h})}updateRect({styles:t}){const{rect:e}=this,{cornerRadius:i,fill:s,fillOpacity:n,stroke:a,strokeOpacity:o}=t;e.setProperties({cornerRadius:i,fill:s,fillOpacity:n,stroke:a,strokeOpacity:o})}updatePosition({x:t,y:e,context:i,styles:{padding:s}}){const{label:n,rect:a}=this,o=n.getBBox()?.clone(),r=s??8,l=s??5;o.grow(r,"horizontal"),o.grow(l,"vertical");const c=i.direction===snt.X?Math.round(l/2):r,{xTranslation:h,yTranslation:u}=int({yDirection:!0,padding:i.labelPadding-c,position:i.position??"left",bbox:o}),d=t+h,p=e+u;n.x=d,n.y=p,a.y=p-Math.round(o.height/2),a.x=d-Math.round(o.width/2),a.height=o.height,a.width=o.width}};XV.className="AxisLabel";var Q0=(E(),w(_)),{Vec2:_r}=Q0._ModuleSupport,Vn=class extends Q0._ModuleSupport.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(t,e){return super.setProperties(t,e),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:t,strokeWidth:e,x1:i,y1:s,x2:n,y2:a}=this;let o=e+t;o%2===0&&(o+=1);const r=_r.from(i,s-Math.floor(o/2)),l=_r.from(n,a),c=_r.distance(r,l);this.collisionBBox=new Q0._ModuleSupport.BBox(r.x,r.y,c,o)}isPointInPath(t,e){const{collisionBBox:i,x1:s,y1:n,x2:a,y2:o}=this;if(!i)return!1;const r=_r.from(s,n),l=_r.from(a,o),c=_r.sub(_r.from(t,e),r),h=_r.sub(l,r),u=_r.rotate(c,_r.angle(c,h),r);return i.containsPoint(u.x,u.y)??!1}render(t){this.applyClipMask(t.ctx),super.render(t),this.closeClipMask(t.ctx)}setClipMask(t,e){const i=this.clipMask.get(t);Q0._ModuleSupport.jsonDiff(i,e)!=null&&this.markDirty("CollidableLine"),e?this.clipMask.set(t,e):this.clipMask.delete(t)}applyClipMask(t){const{clipMask:e}=this;e.size!==0&&this.clipMask.forEach(i=>{const{x:s,y:n,radius:a}=i;t.save(),t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.ellipse(s,n,a,a,0,Math.PI*2,0,!0),t.clip()})}closeClipMask(t){this.clipMask.size!==0&&t.restore()}},nnt=(E(),w(_)),dd=class extends nnt._ModuleSupport.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(t,e){const i=this.fromParentPoint(t,e),s=this.computeBBoxWithoutTransforms();return s?s.grow(this.growCollisionBox).containsPoint(i.x,i.y):!1}},ant=(E(),w(_)),{Vec2:Js}=ant._ModuleSupport;function Cg(t,e,i,s,n,a,o){if(!a||!n||!s){e.setClipMask(t);return}const{alignment:r,position:l}=s,c=QV(i,s.fontSize,o),{point:h,textBaseline:u}=JV(c,l,r);tW(n,a,s,h,c.angle,u);const{x:d,y:p,width:g,height:f}=n.getBBox(),x=Js.length(Js.from(g,f)),y={x:d+g/2,y:p+f/2,radius:x/2+Js.length(c.offset)};return l==="center"?e.setClipMask(t,y):e.setClipMask(t),{clipMask:y,numbers:c}}function qV(t,e,i,s,n,a,o){if(!o||!a)return;const{alignment:r,position:l}=s,[c,h]=e.y1<=i.y1?[e,i]:[i,e];let u=c;l==="bottom"?u=h:l==="inside"&&(u={x1:(c.x1+h.x1)/2,y1:(c.y1+h.y1)/2,x2:(c.x2+h.x2)/2,y2:(c.y2+h.y2)/2});const d=QV(u,s.fontSize,n),{point:p,textBaseline:g}=JV(d,l==="inside"?"center":l,r,t);tW(a,o,s,p,d.angle,g)}function QV(t,e,i){let[s,n]=Js.from(t);s.x>n.x&&([s,n]=[n,s]);const a=Js.normalized(Js.sub(n,s)),o=Js.angle(a),r=Js.multiply(a,oi.HANDLE_SIZE/2+(e??14)/2),l=Js.multiply(a,(i??2)/2+(e??14)/3);return{left:s,right:n,normal:a,angle:o,inset:r,offset:l}}function JV({left:t,right:e,normal:i,angle:s,inset:n,offset:a},o,r,l){let c;r==="right"?c=Js.sub(e,n):r==="center"?c=Js.add(t,Js.multiply(i,Js.distance(t,e)/2)):c=Js.add(t,n);let h="bottom";return o==="bottom"?(c=Js.rotate(a,s+Math.PI/2,c),h="top"):o==="center"&&!l?h="middle":c=Js.rotate(a,s-Math.PI/2,c),{point:c,textBaseline:h}}function tW(t,e,i,s,n,a){t.setProperties({text:e,x:s.x,y:s.y,rotation:n,rotationCenterX:s.x,rotationCenterY:s.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:a})}var{ChartAxisDirection:ont,Vec2:pd,Vec4:wT}=ent._ModuleSupport,ch=class extends bs{constructor(){super(),this.type="cross-line",this.line=new Vn,this.middle=new Ag,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(t){return bs.isCheck(t,"cross-line")}update(t,e){const{seriesRect:i}=e;this.seriesRect=i,this.isHorizontal=Qs.is(t);const s=this.isHorizontal?e.yAxis:e.xAxis,n=this.convertCrossLine(t,s);if(n==null){this.visible=!1;return}this.visible=t.visible??!0,this.visible&&(this.updateLine(t,n),this.updateHandle(t,n),this.updateText(t,n),this.updateAxisLabel(t,s,n))}updateLine(t,e){const{line:i}=this,{lineDashOffset:s,stroke:n,strokeWidth:a,strokeOpacity:o}=t,{x1:r,y1:l,x2:c,y2:h}=e;i.setProperties({x1:r,y1:l,x2:c,y2:h,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:s,stroke:n,strokeWidth:a,strokeOpacity:o,fillOpacity:0})}updateHandle(t,e){const{middle:i}=this,{locked:s,stroke:n,strokeWidth:a,strokeOpacity:o}=t,r={fill:t.handle.fill,stroke:t.handle.stroke??n,strokeOpacity:t.handle.strokeOpacity??o,strokeWidth:t.handle.strokeWidth??a},l=pd.sub(wT.center(e),pd.from(i.handle.width/2,i.handle.height/2));i.gradient=this.isHorizontal?"horizontal":"vertical",i.update({...r,...l}),i.toggleLocked(s??!1)}updateText(t,e){this.text=this.updateNode(dd,this.text,!!t.text.label),Cg(this.line.id,this.line,e,t.text,this.text,t.text.label,t.strokeWidth)}createAxisLabel(t){const e=new XV;return t.attachLabel(e),e}updateAxisLabel(t,e,i){this.axisLabel||(this.axisLabel=this.createAxisLabel(e));const{axisLabel:s,seriesRect:n}=this,{direction:a,position:o}=e;if(t.axisLabel.enabled){s.visible=this.visible;const r=o==="left"||o==="top"?wT.start(i):wT.end(i),l=a===ont.X?r.x:r.y;if(!e.inRange(l)){s.visible=!1;return}const c=Ki(t.value);s.update({...pd.add(r,pd.required(n)),value:c,styles:t.axisLabel,context:e})}else s.visible=!1}setAxisLabelOpacity(t){this.axisLabel&&(this.axisLabel.opacity=t)}setAxisLabelVisible(t){this.axisLabel&&(this.axisLabel.visible=t)}toggleHandles(t){this.middle.visible=t,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){super.destroy(),this.axisLabel?.destroy()}toggleActive(t){this.toggleHandles(t),this.middle.toggleActive(t)}dragStart(t,e,i){const s=Qs.is(t)?{x:e.x,y:_l(t.value,i.yAxis)}:{x:_l(t.value,i.xAxis),y:e.y};this.dragState={offset:e,middle:s}}drag(t,e,i){const{activeHandle:s,dragState:n}=this;t.locked||!n||(s&&this[s].toggleDragging(!0),this.translatePoint(t,n.middle,pd.sub(e,n.offset),i))}translate(t,e,i){if(t.locked)return;const s=Qs.is(t)?pd.from(0,_l(t.value,i.yAxis)):pd.from(_l(t.value,i.xAxis),0);this.translatePoint(t,s,e,i)}translatePoint(t,e,i,s){const n=Qs.is(t);n?i.x=0:i.y=0;const{point:a}=Gl({point:e},i,s);t.value=n?a.y:a.x}stopDragging(){this.middle.toggleDragging(!1)}copy(t,e,i){const s=Qs.is(t),n=this.isHorizontal?i.yAxis:i.xAxis,a=this.convertCrossLine(t,n);if(!a)return;const o=s?-30:0,r=s?0:-30,l=Sn({x:a.x1+r,y:a.y1+o},i);return e.set({value:s?l.y:l.x}),e}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(t,e){const{middle:i,line:s,text:n}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="middle",!0):s.isPointInPath(t,e)||!!n?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.line.isPointInPath(t,e))return"line";if(this.middle.containsPoint(t,e))return"handle"}getAnchor(){const t=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:t.x+t.width/2,y:t.y}:{x:t.x+t.width,y:t.y+t.height/2,position:"right"}}convertCrossLine(t,e){if(t.value==null)return;let i=0,s=0,n,a;const{bounds:o}=e,r=_l(t.value,e);return Qs.is(t)?(n=o.width,s=r,a=r):(i=r,n=r,a=o.height),{x1:i,y1:s,x2:n,y2:a}}},rnt=(E(),w(_)),{StateMachine:J0,StateMachineProperty:lnt,Debug:cnt}=rnt._ModuleSupport,TT=class extends J0{constructor(t,e){const i=({point:n})=>{const a=t==="horizontal",o=a?new Qs:new Tr;o.set({value:a?n.y:n.x}),e.create(o),e.recordAction(`Create ${a?"horizontal-line":"vertical-line"} annotation`)},s=()=>{this.node?.toggleActive(!0),e.showAnnotationOptions(),e.update()};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:J0.parent,cancel:J0.parent},"waiting-first-render":{render:{target:J0.parent,action:s}}}),this.debug=cnt.create(!0,"annotations")}};m([lnt()],TT.prototype,"node",2);var eW={type:"horizontal-line",datum:Qs,scene:ch,isDatum:Qs.is,translate:(t,e,i,s)=>{Qs.is(e)&&ch.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Qs.is(e)&&Qs.is(i)&&ch.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Qs.is(e)&&ch.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new TT("horizontal",{...t,create:e("horizontal-line")}),dragState:t=>new wi(t)},iW={type:"vertical-line",datum:Tr,scene:ch,isDatum:Tr.is,translate:(t,e,i,s)=>{Tr.is(e)&&ch.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Tr.is(e)&&Tr.is(i)&&ch.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Tr.is(e)&&ch.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new TT("vertical",{...t,create:e("vertical-line")}),dragState:t=>new wi(t)},hnt=(E(),w(_)),sW=(E(),w(_)),unt=(E(),w(_)),{Vec4:dnt}=unt._ModuleSupport,nW=class{static updateBackground(t,e,i,s){const{background:n}=this,{seriesRect:a}=s;n.path.clear(!0);const o=dnt.from(0,0,a.width,a.height),r=this.getBackgroundPoints(t,e,i,o);for(let c=0;c<r.length;c++){const h=r[c];c===0?n.path.moveTo(h.x,h.y):n.path.lineTo(h.x,h.y)}n.path.closePath(),n.checkPathDirty();const l=this.getBackgroundStyles?.(t)??t.background;n.setProperties({fill:l.fill,fillOpacity:l.fillOpacity})}},aW=class extends VV{constructor(){super(...arguments),this.handles={},this.overflowContinuous=2,this.topLine=new Vn,this.bottomLine=new Vn,this.background=new sW._ModuleSupport.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=nW.updateBackground.bind(this)}update(t,e){const{locked:i,visible:s}=t,n=vn(t,e),a=vn(t.bottom,e);if(n==null||a==null){this.visible=!1;return}else this.visible=s??!0;const o=this.extendLine(n,t,e),r=this.extendLine(a,t,e);this.updateLines(t,o,r,e,n,a),this.updateHandles(t,n,a),this.updateText(t,n,a),this.updateBackground(t,o,r,e),this.updateAnchor(n,a);for(const l of Object.values(this.handles))l.toggleLocked(i??!1)}toggleHandles(t){const{handles:e}=this;if(typeof t=="boolean"){for(const[i,s]of Object.entries(e))s.visible=t,s.toggleHovered(this.activeHandle===i);return}for(const[i,s]of Object.entries(t)){const n=e[i];n.visible=s??!0,n.toggleHovered(this.activeHandle===i)}}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){const{handles:i,topLine:s,bottomLine:n,text:a}=this;this.activeHandle=void 0;for(const[o,r]of Object.entries(i))if(r.containsPoint(t,e))return this.activeHandle=o,!0;return s.containsPoint(t,e)||n.containsPoint(t,e)||!!a?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.topLine.containsPoint(t,e)||this.bottomLine.containsPoint(t,e))return"line";for(const[i,s]of Object.entries(this.handles))if(s.containsPoint(t,e))return"handle"}updateAnchor(t,e){const{x:i,y:s}=sW._ModuleSupport.Transformable.toCanvasPoint(this.topLine,(t.x1+t.x2)/2,Math.min(t.y1,t.y2,e.y1,e.y2));this.anchor.x=i,this.anchor.y=s}},{Vec2:oo,Vec4:hh}=hnt._ModuleSupport,tM=class extends aW{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new oi,topRight:new oi,bottomLeft:new oi,bottomRight:new Ag},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return bs.isCheck(t,"disjoint-channel")}dragHandle(t,e,i,s){const{activeHandle:n,handles:a}=this;if(n==null)return;const{offset:o}=a[n].drag(e);a[n].toggleDragging(!0),n==="bottomRight"&&(o.x=0);let r=[],l=[],c=s;switch(n){case"topLeft":r=["topLeft"],l=["bottomLeft"];break;case"bottomLeft":r=["bottomLeft"],l=["topLeft"];break;case"topRight":r=["topRight"],l=["bottomRight"];break;case"bottomRight":r=["bottomLeft","bottomRight"],c=!1;break}const h=vn(t,i),u=vn(t.bottom,i);if(!h||!u)return;const d={topLeft:hh.start(h),topRight:hh.end(h),bottomLeft:hh.start(u),bottomRight:hh.end(u)},p={vectors:{topLeft:d.topRight,bottomLeft:d.bottomRight,topRight:d.topLeft,bottomRight:d.bottomLeft},angle:t.snapToAngle},g=Gl(d,o,i,{overflowContinuous:this.overflowContinuous,translateVectors:r,invertYVectors:l,snap:c?p:void 0});t.start.x=g.topLeft.x,t.start.y=g.topLeft.y,t.end.x=g.topRight.x,t.end.y=g.topRight.y,t.startHeight=g.topLeft.y-g.bottomLeft.y,t.endHeight=g.topRight.y-g.bottomRight.y}getTranslatePointsVectors(t,e){const{bottomLeft:i,bottomRight:s,topLeft:n,topRight:a}=this.handles,o=i.getBBox().y-n.getBBox().y,r=s.getBBox().y-a.getBBox().y,l=oo.add(t,oo.from(0,o)),c=oo.add(e,oo.from(0,r));return{start:t,end:e,bottomStart:l,bottomEnd:c}}updateLines(t,e,i){const{topLine:s,bottomLine:n}=this,{lineDashOffset:a,stroke:o,strokeOpacity:r,strokeWidth:l}=t,c={lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:a,stroke:o,strokeOpacity:r,strokeWidth:l};s.setProperties({...e,...c}),n.setProperties({...i,...c})}updateHandles(t,e,i){const{handles:{topLeft:s,topRight:n,bottomLeft:a,bottomRight:o}}=this,r={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};s.update({...r,...hh.start(e)}),n.update({...r,...hh.end(e)}),a.update({...r,...hh.start(i)}),o.update({...r,...oo.sub(hh.end(i),oo.from(o.handle.width/2,o.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(dd,this.text,!!t.text.label),qV(!1,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,s){const n=e.x1>e.x2,a=e.y1>e.y2,o=a?s.y2:s.y1,r=a?s.y1:s.y2,l=oo.from(e);return t.extendEnd&&e.y2===r&&l.push(oo.from(n?s.x1:s.x2,a?s.y1:s.y2)),t.extendEnd&&i.y2===o&&l.push(oo.from(n?s.x1:s.x2,a?s.y2:s.y1)),l.push(...oo.from(i).reverse()),t.extendStart&&i.y1===r&&l.push(oo.from(n?s.x2:s.x1,a?s.y1:s.y2)),t.extendStart&&e.y1===o&&l.push(oo.from(n?s.x2:s.x1,a?s.y2:s.y1)),l}},pnt=(E(),w(_)),Lg=(R(),w(nt)),{StateMachine:uh,StateMachineProperty:NT,Debug:gnt}=pnt._ModuleSupport,eM=class extends uh{constructor(t){const e=({point:l})=>{const c=new io;c.set({start:l,end:l,startHeight:0,endHeight:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})},s=({offset:l,context:c})=>{const{datum:h,snapping:u}=this;h&&(h.set({end:Vy(l,c,u,h.start,h.snapToAngle)}),t.update())},n=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},a=({point:l})=>{const{datum:c,node:h}=this,u=Ki(c?.end.y),d=Ki(c?.start.y),{y:p}=l;if(c==null||!(0,Lg.isNumber)(d)||!(0,Lg.isNumber)(u)||!(0,Lg.isNumber)(p))return;const g=u-(p??0),f=(d-u)*2+g,x={x:c?.start.x,y:d-f},y={x:c?.end.x,y:l.y};h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint(x,{overflowContinuous:!0})||!t.validatePoint(y,{overflowContinuous:!0}))&&(c.set({startHeight:f,endHeight:g}),t.update())},o=({point:l})=>{const{datum:c,node:h}=this,u=Ki(c?.end.y),d=Ki(c?.start.y),{y:p}=l;if(c==null||!(0,Lg.isNumber)(d)||!(0,Lg.isNumber)(u)||!(0,Lg.isNumber)(p))return;const g=u-(p??0),f=(d-u)*2+g,x={x:c.start.x,y:d-g},y={x:c.end.x,y:l.y};h?.toggleHandles(!0),!(!t.validatePoint(x,{overflowContinuous:!0})||!t.validatePoint(y,{overflowContinuous:!0}))&&(c.set({startHeight:f,endHeight:g}),t.recordAction("Create disjoint-channel annotation"),t.showAnnotationOptions(),t.update())},r=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:uh.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,drag:s,click:{target:"height",action:n},dragEnd:{target:"height",action:n},reset:{target:uh.parent,action:r},cancel:{target:uh.parent,action:r}},height:{hover:a,click:{target:uh.parent,action:o},drag:{target:uh.parent,action:o},reset:{target:uh.parent,action:r},cancel:{target:uh.parent,action:r}}}),this.debug=gnt.create(!0,"annotations"),this.snapping=!1}};m([NT()],eM.prototype,"datum",2),m([NT()],eM.prototype,"node",2),m([NT()],eM.prototype,"snapping",2);var oW={type:"disjoint-channel",datum:io,scene:tM,isDatum:io.is,translate:(t,e,i,s)=>{io.is(e)&&tM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(io.is(e)&&io.is(i)&&tM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{io.is(e)&&tM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new eM({...t,create:e("disjoint-channel")}),dragState:t=>new wi(t)},fnt=(E(),w(_)),mnt=(R(),w(nt)),Wl=(E(),w(_)),OT=[0,23.6,38.2,50,61.8,78.6,100],ynt=[161.8,261.8,361.8,423.6],xnt=[...OT,...ynt],bnt={10:xnt,6:OT,4:OT.filter(t=>t!==78.6&&t!==23.6)},vnt=10;function Snt(t,e){const{x2:i,y1:s,y2:n}=t,a=s-n;return e==null?{x1:i,x2:i,y1:n-a,y2:n}:{x1:e.x1,x2:e.x2,y1:e.y2-a,y2:e.y2}}function rW({x1:t,y1:e,x2:i,y2:s},n,a,o,r=10){const l=e-s,c=a?-1:1;let h=o;const u=[];return bnt[r].forEach((d,p)=>{const g=o+l*(d/100)*c,f=n.yAxis.scaleInvert(g);u.push({id:p,x1:t,x2:i,y1:h,y2:g,tag:d==100?0:1,label:{x1:Math.min(t,i)-vnt,x2:i,y1:g,y2:g,text:`${(d/100).toFixed(3)} (${f.toFixed(2)})`}}),h=g}),u}var{Vec2:Mnt,Vec4:lW}=Wl._ModuleSupport,cW=class extends bs{constructor(){super(),this.trendLine=new Vn,this.rangeFillsGroup=new Wl._ModuleSupport.Group({name:`${this.id}-range-fills`}),this.rangeFillsGroupSelection=Wl._ModuleSupport.Selection.select(this.rangeFillsGroup,Wl._ModuleSupport.Range),this.rangeStrokesGroup=new Wl._ModuleSupport.Group({name:`${this.id}-range-strokes`}),this.rangeStrokesGroupSelection=Wl._ModuleSupport.Selection.select(this.rangeStrokesGroup,Vn),this.labelsGroup=new Wl._ModuleSupport.Group({name:`${this.id}-ranges-labels`}),this.labelsGroupSelection=Wl._ModuleSupport.Selection.select(this.labelsGroup,dd),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(t,e){let i=vn(t,e);if(i==null){this.visible=!1;return}if(i=lW.round(i),this.visible=t.visible??!0,!this.visible)return;this.updateLine(t,i,this.trendLine),this.updateHandles(t,i),this.updateAnchor(t,i,e);const{reverse:s}=t,n=this.extendLine(i,t,e),a=s?n.y1:n.y2,o=s?n.y2:n.y1,r=rW(n,e,t.reverse,a,t.bands);this.updateRanges(t,r,e);const l={...n,y1:o,y2:o};this.updateText(t,l)}extendLine({x1:t,y1:e,x2:i,y2:s},n,a){const o={x1:t,y1:e,x2:i,y2:s};if(!n.extendStart&&!n.extendEnd)return o;const{x:r,width:l}=a.xAxis.bounds;return n.extendEnd&&(o[t>i?"x1":"x2"]=r+l),n.extendStart&&(o[t>i?"x2":"x1"]=r),o}updateLine(t,e,i){if(!e||!i)return;const{lineDashOffset:s,strokeWidth:n,strokeOpacity:a,stroke:o}=t;i.setProperties({...e,lineCap:t.getLineCap(),lineDash:[3,4],lineDashOffset:s,strokeWidth:n,strokeOpacity:a,fillOpacity:0,stroke:o})}updateRangeStrokes(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:s,strokes:n,rangeStroke:a,isMultiColor:o}=t;this.rangeStrokesGroupSelection.each((r,{x1:l,x2:c,y2:h,tag:u},d)=>{const p=h,g=o?n[d%n.length]:a;r.setProperties({x1:l,x2:c,y1:p,y2:p,stroke:g,strokeOpacity:s,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,tag:u})})}updateRanges(t,e,i){const s=n=>n.id;this.rangeFillsGroupSelection.update(e,void 0,s),this.rangeStrokesGroupSelection.update(e,void 0,s),this.labelsGroupSelection.update(e,void 0,s),this.updateRangeFills(t),this.updateRangeStrokes(t),this.updateRangeLabels(t,i)}updateRangeFills(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:s,strokes:n,rangeStroke:a,showFill:o,isMultiColor:r}=t;this.rangeFillsGroupSelection.each((l,{x1:c,x2:h,y1:u,y2:d},p)=>{const g=r?n[p%n.length]:a;if(!o){l.visible=!1;return}l.setProperties({x1:c,x2:h,y1:u,y2:d,startLine:!1,endLine:!1,stroke:g,strokeOpacity:s,fill:g,fillOpacity:(s??1)*.15,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,visible:!0})})}updateRangeLabels(t,{xAxis:e}){const{rangeStrokesGroupSelection:i}=this,{strokes:s,strokeWidth:n,rangeStroke:a,isMultiColor:o,label:{fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,color:u}}=t,d={fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h},p=this.checkWithinBounds(e,d,this.labelsGroupSelection.at(0));this.labelsGroupSelection.each((g,f,x)=>{const y=u??(o?s[x%s.length]:a),b=i.at(x);if(!b)return;const{text:v,...M}=f.label;if(p)g.setProperties({...d,text:v,x:M.x1,y:M.y1,textBaseline:"middle",textAlign:"end",fill:y}),Cg(g.id,b,M);else{const D={...d,label:v,position:"center",alignment:"left",color:y};Cg(g.id,b,M,D,g,v,n)}})}checkWithinBounds(t,e,i){if(!i)return!1;const{text:s,...n}=i.datum.label;i.setProperties({...e,text:s,x:n.x1,y:n.y1,textBaseline:"middle",textAlign:"end"});const{x:a}=i.getBBox();return a>=t.bounds.x&&a<=t.bounds.x+t.bounds.width}updateText(t,e){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0];if(!i)return;const{text:s,strokeWidth:n}=t;this.text=this.updateNode(dd,this.text,!!s.label),Cg(i.id,i,e,s,this.text,s.label,n)}updateAnchor(t,e,i,s){const n=lW.topCenter(e);Mnt.apply(this.anchor,Wl._ModuleSupport.Transformable.toCanvasPoint(this.trendLine,n.x,n.y))}containsPoint(t,e){const{trendLine:i,rangeStrokesGroupSelection:s,text:n}=this;let a=!1;return s.each(o=>a||(a=o.isPointInPath(t,e))),a||i.isPointInPath(t,e)||!!n?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.trendLine.isPointInPath(t,e))return"line"}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}drag(t,e,i,s){t.locked||(this.activeHandle?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},Dnt=(E(),w(_)),hW=(R(),w(nt)),{ContinuousScale:uW}=Dnt._ModuleSupport;function iM(t,e,i={overflowContinuous:!1},s){if(e.x==null||e.y==null)return s&&hW.Logger.warnOnce(`${s}requires both an [x] and [y] property, ignoring.`),!1;const{xAxis:n,yAxis:a}=t,o=i.overflowContinuous&&uW.is(n.scale),r=i.overflowContinuous&&uW.is(a.scale),l=o||dW(e.x,n),c=r||dW(e.y,a);if(l&&c)return!0;if(s){let h="x & y domains";l&&(h="y domain"),c&&(h="x domain");const u=Ki(e.x),d=Ki(e.y);hW.Logger.warnOnce(`${s}is outside the ${h}, ignoring. - x: [${u}], y: ${d}]`)}return!1}function dW(t,e){const{domain:i}=e.scale,s=Ki(t);return i&&s!=null&&e.continuous?s>=i[0]&&s<=i.at(-1):!0}var{Vec2:knt,Vec4:gd}=fnt._ModuleSupport,sM=class extends cW{constructor(){super(),this.type="fibonacci-retracement-trend-based",this.endRetracementLine=new Vn,this.start=new oi,this.end=new oi,this.endRetracement=new oi,this.append([this.endRetracementLine,this.start,this.end,this.endRetracement])}static is(t){return bs.isCheck(t,"fibonacci-retracement-trend-based")}update(t,e){let{coords1:i,coords2:s}=this.getCoords(t,e);if(i==null||s==null){this.visible=!1;return}if(i=gd.round(i),s=gd.round(s),this.visible=t.visible??!0,!this.visible)return;(t.endRetracement.x==null||t.endRetracement.y==null)&&(s=void 0),this.updateLine(t,i,this.trendLine),this.updateLine(t,s,this.endRetracementLine),this.updateHandles(t,i,s),this.updateAnchor(t,s??i,e);const{reverse:n,bands:a}=t,o=Snt(i,s),r=this.extendLine(o,t,e),l=r.y2,c=r.y1,h=s?rW(r,e,n,l,a):[];this.updateRanges(t,h,e);const u={...r,y1:c,y2:c};this.updateText(t,u)}containsPoint(t,e){const{start:i,end:s,endRetracement:n,endRetracementLine:a}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):s.containsPoint(t,e)?(this.activeHandle="end",!0):n.containsPoint(t,e)?(this.activeHandle="endRetracement",!0):a.isPointInPath(t,e)||super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)||this.endRetracement.containsPoint(t,e)?"handle":this.endRetracementLine.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...U0({start:t.start,end:t.end,endRetracement:t.endRetracement},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1),this.endRetracement.toggleDragging(!1)}dragAll(t,e,i){const{dragState:s}=this;s&&this.translatePoints({datum:t,start:s.start,end:s.end,endRetracement:s.endRetracement,translation:knt.sub(e,s.offset),context:i})}dragHandle(t,e,i,s){const{activeHandle:n,dragState:a}=this;if(!n||!a)return;this[n].toggleDragging(!0);const o=s?this.snapToAngle(t,e,i):Sn(this[n].drag(e).point,i);!o||!iM(i,o)||(t[n].x=o.x,t[n].y=o.y)}snapToAngle(t,e,i){const{activeHandle:s}=this,n=["start","end","endRetracement"];if(!s)return;const a=(n.indexOf(s)+1)%n.length,o=n[a];this[s].toggleDragging(!0);const r=ai(t[o],i);return Sn(H0(e,r,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,endRetracement:s,translation:n,context:a}){const o=Gl({start:e,end:i,endRetracement:s},n,a,{overflowContinuous:2});t.start.x=o.start.x,t.end.x=o.end.x,t.endRetracement.x=o.endRetracement.x,t.start.y=o.start.y,t.end.y=o.end.y,t.endRetracement.y=o.endRetracement.y}translate(t,e,i){this.translatePoints({datum:t,start:ai(t.start,i),end:ai(t.end,i),endRetracement:ai(t.endRetracement,i),translation:e,context:i})}copy(t,e,i){const{coords1:s,coords2:n}=this.getCoords(t,i);if(!s||!n)return;const a=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:gd.start(s),end:gd.end(s),endRetracement:gd.end(n),translation:{x:-a.width/2,y:-a.height/2},context:i}),e}getCoords(t,e){return{coords1:vn(t,e),coords2:vn({start:t.end,end:t.endRetracement},e)}}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t,this.endRetracement.visible=t;else for(const[e,i]of(0,mnt.entries)(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end"),this.endRetracement.toggleHovered(this.activeHandle==="endRetracement")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t),this.endRetracement.toggleActive(t)}updateHandles(t,e,i,s){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",s)}),i&&this.endRetracement.update({...this.getHandleStyles(t),...this.getHandleCoords(t,i,"endRetracement",s)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1),this.endRetracement.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,s){return i==="start"?gd.start(e):gd.end(e)}},Int=(E(),w(_)),{StateMachine:dh,StateMachineProperty:_T,Debug:Ant}=Int._ModuleSupport,nM=class extends dh{constructor(t){const e=({point:c})=>{const h=this.createDatum();h.set({start:c,end:c}),t.create(h)},i=()=>{const{node:c}=this;c?.toggleActive(!0),c?.toggleHandles({start:!0,end:!1,endRetracement:!1})},s=({offset:c,context:h})=>{const{datum:u,snapping:d}=this;u&&(u.set({end:Vy(c,h,d,u.start,u.snapToAngle)}),t.update())},n=()=>{const{datum:c}=this;c&&(c.endRetracement.x=c.end.x,c.endRetracement.y=c.end.y,this.node?.toggleHandles({end:!0}),t.update())},a=({offset:c,context:h})=>{const{datum:u,snapping:d}=this;u&&(u.set({endRetracement:Vy(c,h,d,u.end,u.snapToAngle)}),t.update())},o=()=>{this.node?.toggleHandles({endRetracement:!0}),t.update()},r=()=>t.delete(),l=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:dh.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,click:{target:"endRetracement",action:n},drag:s,dragEnd:{target:"endRetracement",action:n},reset:{target:dh.parent,action:r},cancel:{target:dh.parent,action:r},onExit:l},endRetracement:{hover:a,click:{target:dh.parent,action:o},drag:{target:dh.parent,action:o},reset:{target:dh.parent,action:r},cancel:{target:dh.parent,action:r}}}),this.debug=Ant.create(!0,"annotations"),this.snapping=!1}createDatum(){return new Nr}};m([_T()],nM.prototype,"datum",2),m([_T()],nM.prototype,"node",2),m([_T()],nM.prototype,"snapping",2);var pW={type:"fibonacci-retracement-trend-based",datum:Nr,scene:sM,isDatum:Nr.is,translate:(t,e,i,s)=>{Nr.is(e)&&sM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Nr.is(e)&&Nr.is(i)&&sM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Nr.is(e)&&sM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new nM({...t,create:e("fibonacci-retracement-trend-based")}),dragState:t=>new wi(t)},Cnt=(E(),w(_)),Lnt=(R(),w(nt)),{Vec2:wnt,Vec4:gW}=Cnt._ModuleSupport,aM=class extends cW{constructor(){super(),this.type="fibonacci-retracement",this.start=new oi,this.end=new oi,this.append([this.start,this.end])}static is(t){return bs.isCheck(t,"fibonacci-retracement")}containsPoint(t,e){const{start:i,end:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):s.containsPoint(t,e)?(this.activeHandle="end",!0):super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...U0({start:t.start,end:t.end},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(t,e,i){const{dragState:s}=this;s&&this.translatePoints({datum:t,start:s.start,end:s.end,translation:wnt.sub(e,s.offset),context:i})}dragHandle(t,e,i,s){const{activeHandle:n,dragState:a}=this;if(!n||!a)return;this[n].toggleDragging(!0);const o=s?this.snapToAngle(t,e,i):Sn(this[n].drag(e).point,i);!o||!iM(i,o)||(t[n].x=o.x,t[n].y=o.y)}snapToAngle(t,e,i){const{activeHandle:s}=this,a=["start","end"].find(r=>r!==s);if(!s||!a)return;this[s].toggleDragging(!0);const o=ai(t[a],i);return Sn(H0(e,o,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,translation:s,context:n}){const a=Gl({start:e,end:i},s,n,{overflowContinuous:1});t.start.x=a.start.x,t.end.x=a.end.x,t.start.y=a.start.y,t.end.y=a.end.y}translate(t,e,i){this.translatePoints({datum:t,start:ai(t.start,i),end:ai(t.end,i),translation:e,context:i})}copy(t,e,i){const s=vn(t,i);if(!s)return;const n=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:{x:s.x1,y:s.y1},end:{x:s.x2,y:s.y2},translation:{x:-n.width/2,y:-n.height/2},context:i}),e}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of(0,Lnt.entries)(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}updateHandles(t,e,i,s){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",s)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,s){return i==="start"?gW.start(e):gW.end(e)}},Tnt=(E(),w(_)),{StateMachine:wg,StateMachineProperty:ET,Debug:Nnt}=Tnt._ModuleSupport,Tg=class extends wg{constructor(t){const e=({point:r})=>{const l=this.createDatum();l.set({start:r,end:r}),t.create(l)},i=()=>{const{node:r}=this;r?.toggleActive(!0),r?.toggleHandles({start:!0,end:!1})},s=({offset:r,context:l})=>{const{datum:c,snapping:h}=this;c&&(c.set({end:Vy(r,l,h,c.start,c.snapToAngle)}),t.update())},n=()=>{this.node?.toggleHandles({end:!0}),t.update()},a=()=>t.delete(),o=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:wg.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,click:{target:wg.parent,action:n},drag:s,dragEnd:{target:wg.parent,action:n},reset:{target:wg.parent,action:a},cancel:{target:wg.parent,action:a},onExit:o}}),this.debug=Nnt.create(!0,"annotations"),this.snapping=!1}};m([ET()],Tg.prototype,"datum",2),m([ET()],Tg.prototype,"node",2),m([ET()],Tg.prototype,"snapping",2);var Ont=class extends Tg{createDatum(){return new Pl}},_nt=class extends Tg{createDatum(){return new Rl}},Ent=class extends Tg{createDatum(){return new zl}},fW={type:"fibonacci-retracement",datum:zl,scene:aM,isDatum:zl.is,translate:(t,e,i,s)=>{zl.is(e)&&aM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(zl.is(e)&&zl.is(i)&&aM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{zl.is(e)&&aM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Ent({...t,create:e("fibonacci-retracement")}),dragState:t=>new wi(t)},mW=(E(),w(_)),PT=(E(),w(_)),{Vec2:Hy}=PT._ModuleSupport,Pnt=class extends PT._ModuleSupport.Group{},oM=class extends Pnt{constructor(){super(),this.type="arrow",this.path=new PT._ModuleSupport.Path,this.armLength=6,this.append([this.path])}update(t){const{path:e}=this,{x:i,y:s,angle:n,...a}=t,o=Hy.from(i,s),r=3*Math.PI/4,l=this.armLength+(t.strokeWidth??0)*2,c=Hy.rotate(Hy.from(0,l),n+r,o),h=Hy.rotate(Hy.from(l,0),n-r,o);e.setProperties(a),e.fillOpacity=0,e.path.clear(),e.path.moveTo(c.x,c.y),e.path.lineTo(o.x,o.y),e.path.lineTo(h.x,h.y)}},{Vec2:Uo,Vec4:yW}=mW._ModuleSupport,ph=class extends DT{constructor(){super(),this.type="line",this.line=new Vn,this.append([this.line,this.start,this.end])}static is(t){return bs.isCheck(t,"line")}update(t,e){let i=vn(t,e);if(i==null){this.visible=!1;return}i=yW.round(i),this.visible=t.visible??!0,this.visible&&(this.updateLine(t,i,e),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateAnchor(t,i,e))}updateLine(t,e,i){const{line:s}=this,{lineDashOffset:n,stroke:a,strokeWidth:o,strokeOpacity:r}=t,l=this.extendLine(e,t,i);s.setProperties({...l,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:n,stroke:a,strokeWidth:o,strokeOpacity:r,fillOpacity:0})}updateText(t,e){this.text=this.updateNode(dd,this.text,!!t.text.label),Cg(this.line.id,this.line,e,t.text,this.text,t.text.label,t.strokeWidth)}updateCaps(t,e){if(!t.startCap&&this.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),!t.endCap&&this.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),!t.startCap&&!t.endCap)return;const{stroke:i,strokeWidth:s,strokeOpacity:n}=t,[a,o]=Uo.from(e),r=Uo.angle(Uo.sub(o,a));t.startCap&&(this.startCap&&this.startCap.type!==t.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),this.startCap==null&&(this.startCap=new oM,this.append([this.startCap])),this.startCap.update({x:a.x,y:a.y,angle:r-Math.PI,stroke:i,strokeWidth:s,strokeOpacity:n})),t.endCap&&(this.endCap&&this.endCap.type!==t.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),this.endCap==null&&(this.endCap=new oM,this.append([this.endCap])),this.endCap.update({x:o.x,y:o.y,angle:r,stroke:i,strokeWidth:s,strokeOpacity:n}))}updateAnchor(t,e,i,s){const n=yW.topCenter(e);Uo.apply(this.anchor,mW._ModuleSupport.Transformable.toCanvasPoint(this.line,n.x,n.y))}containsPoint(t,e){const{line:i,text:s}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.line.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}getHandleCoords(t,e,i,s){const{startCap:n,endCap:a}=this;let[o,r]=Uo.from(e);const l=Uo.angle(Uo.sub(r,o));return n&&(o=Uo.rotate(Uo.from(0,-oi.HANDLE_SIZE/2),l,o)),a&&(r=Uo.rotate(Uo.from(0,oi.HANDLE_SIZE/2),l,r)),i==="start"?o:r}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}},xW={type:"line",datum:Rl,scene:ph,isDatum:Rl.is,translate:(t,e,i,s)=>{Rl.is(e)&&ph.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Rl.is(e)&&Rl.is(i)&&ph.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Rl.is(e)&&ph.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new _nt({...t,create:e("line")}),dragState:t=>new wi(t)},bW={type:"arrow",datum:Pl,scene:ph,isDatum:Pl.is,translate:(t,e,i,s)=>{Pl.is(e)&&ph.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Pl.is(e)&&Pl.is(i)&&ph.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Pl.is(e)&&ph.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Ont({...t,create:e("arrow")}),dragState:t=>new wi(t)},RT=(E(),w(_)),Ng=(R(),w(nt)),Sa=(E(),w(_)),vW=(E(),w(_));function SW(t,e=0,i=0){let s=e;for(const n of t)if(Array.isArray(n)){for(const a of n)MW(a,s);s+=vW._ModuleSupport.Group.computeChildrenBBox(n).width+i}else MW(n,s),s+=n.getBBox().width+i}function Rnt(t,e=0,i=0){let s=e;for(const n of t)if(Array.isArray(n)){for(const a of n)DW(a,s);s+=vW._ModuleSupport.Group.computeChildrenBBox(n).height+i}else DW(n,s),s+=n.getBBox().height+i}function MW(t,e){"x1"in t?(t.x2=e+(t.x2-t.x1),t.x1=e):t.x=e}function DW(t,e){"y1"in t?(t.y2=e+(t.y2-t.y1),t.y1=e):t.y=e}function kW(t,e){"x1"in t?(t.x1+=e,t.x2+=e):t.x+=e}function IW(t,e){"y1"in t?(t.y1+=e,t.y2+=e):t.y+=e}var{Vec4:BT}=Sa._ModuleSupport,AW=class extends Sa._ModuleSupport.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new Sa._ModuleSupport.Rect,this.dateRangeBarsText=new Sa._ModuleSupport.Text,this.dateRangeDivider=new Sa._ModuleSupport.Line,this.dateRangeValueText=new Sa._ModuleSupport.Text,this.priceRangeValueText=new Sa._ModuleSupport.Text,this.priceRangeDivider=new Sa._ModuleSupport.Line,this.priceRangePercentageText=new Sa._ModuleSupport.Text,this.volumeText=new Sa._ModuleSupport.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(t,e,i,s,n,a,o){this.verticalDirection=a;const r=this.updateStatistics(t,e,i,o),l=Sa._ModuleSupport.Group.computeChildrenBBox(r.flat()),c=10;l.grow(c),this.updateBackground(t,l,c),this.reposition(r,c,n),this.checkVisibility(t,n,s)}checkVisibility(t,e,i){const s=BT.from(new Sa._ModuleSupport.BBox(0,0,e.seriesRect.width,e.seriesRect.height));BT.collides(i,s)?this.visible=t.visible??!0:this.visible=!1}updateStatistics(t,e,i,s){const{dateRangeBarsText:n,dateRangeDivider:a,dateRangeValueText:o,priceRangeValueText:r,priceRangeDivider:l,priceRangePercentageText:c,volumeText:h}=this,u=8,d=6,p=t.statistics.fontSize+3,g=-2,f=this.getTextStyles(t),x={...this.getDividerStyles(t),x1:0,y1:0,x2:0,y2:p},y=[n,a,o],b=[r,l,c],v=[];return e.priceRange&&(r.setProperties({...f,text:this.formatPriceRangeValue(e.priceRange.value,s)}),l.setProperties(x),c.setProperties({...f,text:this.formatPriceRangePercentage(e.priceRange.percentage,s)}),SW(b,i.x,u),v.push(b)),e.dateRange&&(n.setProperties({...f,text:this.formatDateRangeBars(e.dateRange.bars,s)}),a.setProperties(x),o.setProperties({...f,text:this.formatDateRangeValue(e.dateRange.value)}),SW(y,i.x,u),v.push(y)),e.volume!=null?(h.setProperties({...f,x:i.x,text:this.formatVolume(e.volume,s),visible:!0}),v.push(h)):h.visible=!1,Rnt(v,i.y,d),l.y1+=g,l.y2+=g,a.y1+=g,a.y2+=g,v}updateBackground(t,e,i){const s=this.getBackgroundStyles(t);this.background.setProperties({...s,...e,x:e.x-e.width/2+i,y:e.y})}reposition(t,e,i){const{width:s,height:n}=i.seriesRect,a=BT.from(this.background.getBBox());let o=0;a.x1<0&&(o=-a.x1),a.x2>s&&(o=s-a.x2);const r=Math.min(e,n-a.y2);for(const l of t)if(Array.isArray(l)){const c=Sa._ModuleSupport.Group.computeChildrenBBox(l).width;for(const h of l)kW(h,o-c/2),IW(h,r)}else kW(l,o-l.getBBox().width/2),IW(l,r);this.background.x+=o,this.background.y+=r}getTextStyles(t){return{fill:t.statistics.color,fontFamily:t.statistics.fontFamily,fontSize:t.statistics.fontSize,fontStyle:t.statistics.fontStyle,fontWeight:t.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(t){return{stroke:t.statistics.divider.stroke,strokeOpacity:t.statistics.divider.strokeOpacity,strokeWidth:t.statistics.divider.strokeWidth}}getBackgroundStyles(t){return{fill:t.statistics.fill,stroke:t.statistics.stroke,strokeOpacity:t.statistics.strokeOpacity,strokeWidth:t.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(t,e){return e?.t("measurerDateRangeBars",{value:t})??`${t}`}formatDateRangeValue(t){const e=[],i=t>=0?"":"-";t=Math.abs(t);const s=1e3*60,n=s*60,a=n*24,o=Math.floor(t/s),r=Math.floor(t/n),l=Math.floor(t/a),c=r%(a/n),h=o%(n/s);return l>=1&&e.push(`${l}d`),r>=1&&(t<a||c!==0)&&e.push(`${c}h`),(t<n||h!==0)&&e.push(`${h}m`),e[0]=`${i}${e[0]}`,e.join(" ")}formatPriceRangeValue(t,e){return e?.t("measurerPriceRangeValue",{value:Number(t.toFixed(2))})??`${t}`}formatPriceRangePercentage(t,e){return e?.t("measurerPriceRangePercent",{value:t})??`${t}`}formatVolume(t,e){const i=isNaN(t)?"":this.volumeFormatter.format(t);return e?.t("measurerVolume",{value:i})??i}},Bnt=class extends AW{getDirectionStyles(t){return this.verticalDirection==="down"?t.down.statistics:t.up.statistics}getTextStyles(t){const e=this.getDirectionStyles(t);return{...super.getTextStyles(t),fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight}}getDividerStyles(t){const e=this.getDirectionStyles(t);return{stroke:e.divider.stroke,strokeOpacity:e.divider.strokeOpacity,strokeWidth:e.divider.strokeWidth}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{...super.getBackgroundStyles(t),fill:e.fill,stroke:e.stroke,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth}}},{Vec2:Er,Vec4:fd}=RT._ModuleSupport,Ma=class extends DT{constructor(){super(),this.type="measurer",this.horizontalLine=new Vn,this.verticalLine=new Vn,this.horizontalStartLine=new Vn,this.horizontalEndLine=new Vn,this.verticalStartLine=new Vn,this.verticalEndLine=new Vn,this.horizontalEndCap=new oM,this.verticalEndCap=new oM,this.background=new RT._ModuleSupport.Path({zIndex:-1}),this.updateBackground=nW.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(t){return bs.isCheck(t,"measurer")}createStatisticsScene(){return new AW}update(t,e){const i=vn(t,e);if(i==null){this.visible=!1;return}if(this.visible=t.visible??!0,!this.visible)return;const s=this.extendPerpendicular(i,t,e),n={...s,y2:s.y1},a={...s,y1:s.y2};this.verticalDirection=i.y1<i.y2?"down":"up",this.updateVisibilities(t),this.updateLines(t,i),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateBoundingLines(t,s),this.updateBackground(t,n,a,e),this.updateStatistics(t,i,e),this.updateAnchor(t,i,e)}extendPerpendicular(t,e,i){const s={x1:Math.min(t.x1,t.x2),x2:Math.max(t.x1,t.x2),y1:Math.min(t.y1,t.y2),y2:Math.max(t.y1,t.y2)},[n,a]=Er.from(i.yAxis.bounds);return to.is(e)?(e.extendAbove&&(s.y1=n.y),e.extendBelow&&(s.y2=a.y)):eo.is(e)&&(e.extendLeft&&(s.x1=n.x),e.extendRight&&(s.x2=a.x)),s}updateVisibilities(t){const{horizontalStartLine:e,horizontalEndLine:i,horizontalEndCap:s,verticalStartLine:n,verticalEndLine:a,verticalEndCap:o}=this,{direction:r}=t;n.visible=r!=="vertical",a.visible=r!=="vertical",s.visible=r!=="vertical",e.visible=r!=="horizontal",i.visible=r!=="horizontal",o.visible=r!=="horizontal"}updateLines(t,e){const{horizontalLine:i,verticalLine:s}=this,{direction:n}=t,{x1:a,y1:o,x2:r,y2:l}=e,c=Er.round(fd.center(e),0),h=this.getLineStyles(t);n!=="vertical"&&i.setProperties({...h,x1:a,x2:r,y1:c.y,y2:c.y}),n!=="horizontal"&&s.setProperties({...h,x1:c.x,x2:c.x,y1:o,y2:l})}updateText(t,e){const{direction:i}=t,s=Er.round(fd.center(e),0);let n;const a={...e};i==="vertical"?(n=this.verticalLine,a.x1=s.x,a.x2=s.x):(n=this.horizontalLine,a.y1=s.y,a.y2=s.y),this.text=this.updateNode(dd,this.text,!!t.text.label);const{id:o}=n,r=Cg(o,n,a,t.text,this.text,t.text.label,t.strokeWidth);let l;if(i==="both"&&r&&this.text){const c=fd.from(this.text.getBBox()),{offset:h}=r.numbers;c.x1<=s.x+h.x&&c.x2>=s.x-h.x&&(l={x:s.x,y:r.clipMask.y,radius:this.text.getBBox().height/2+Er.length(h)})}this.verticalLine.setClipMask(o,l)}updateCaps(t,e){const{horizontalEndCap:i,verticalEndCap:s}=this,{direction:n}=t,{x1:a,y1:o,x2:r,y2:l}=e,c=Er.round(fd.center(e),0),{stroke:h,strokeWidth:u,strokeOpacity:d}=this.getLineStyles(t),p={stroke:h,strokeWidth:u,strokeOpacity:d};if(n!=="vertical"){const g=a<=r?0:Math.PI;let f=r;n==="horizontal"&&(f+=a<=r?-2:2),i.update({...p,x:f,y:c.y,angle:g})}if(n!=="horizontal"){const g=o<=l?Math.PI/2:Math.PI/-2;let f=l;n==="vertical"&&(f+=o<=l?-2:2),s.update({...p,x:c.x,y:f,angle:g})}}updateBoundingLines(t,e){const{verticalStartLine:i,verticalEndLine:s,horizontalStartLine:n,horizontalEndLine:a}=this,{direction:o}=t,{x1:r,y1:l,x2:c,y2:h}=e,u=this.getLineStyles(t);o==="horizontal"&&(i.setProperties({...u,x1:r,y1:l,x2:r,y2:h}),s.setProperties({...u,x1:c,y1:l,x2:c,y2:h})),o==="vertical"&&(n.setProperties({...u,x1:r,y1:l,x2:c,y2:l}),a.setProperties({...u,x1:r,y1:h,x2:c,y2:h}))}updateStatistics(t,e,i){const s=Er.add(fd.bottomCenter(e),Er.from(0,10)),n={volume:this.getVolume(t)};t.hasPriceRange&&(n.priceRange={percentage:this.getPriceRangePercentage(t),value:this.getPriceRangeValue(t)}),t.hasDateRange&&(n.dateRange={bars:this.getDateRangeBars(e,i),value:this.getDateRangeValue(t)}),this.statistics.update(t,n,s,e,i,this.verticalDirection,t.localeManager)}updateAnchor(t,e,i,s){const n=fd.topCenter(e);Er.apply(this.anchor,RT._ModuleSupport.Transformable.toCanvasPoint(this.horizontalLine,n.x,n.y))}getBackgroundPoints(t,e,i,s){const[n,a]=Er.from(e),[o,r]=Er.from(i);return[n,a,r,o]}getLineStyles(t){const{lineDashOffset:e,stroke:i,strokeWidth:s,strokeOpacity:n}=t;return{lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,stroke:i,strokeWidth:s,strokeOpacity:n,fillOpacity:0}}getBackgroundStyles(t){const{background:e}=t;return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}containsPoint(t,e){const{horizontalLine:i,text:s,verticalLine:n,horizontalStartLine:a,horizontalEndLine:o,verticalStartLine:r,verticalEndLine:l}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||n.isPointInPath(t,e)||a.visible&&a.isPointInPath(t,e)||o.visible&&o.isPointInPath(t,e)||r.visible&&r.isPointInPath(t,e)||l.visible&&l.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":"line"}getDateRangeBars(t,e){const{step:i}=e.xAxis.scale,s=t.x1<=t.x2?1:-1;return i?Math.round(fd.width(t)/i)*s:0}getDateRangeValue(t){const e=Ki(t.start.x),i=Ki(t.end.x);if(!(0,Ng.isDate)(e)||!(0,Ng.isDate)(i))throw new Error("Can not create a date range measurement of non-date x-axis.");return i.getTime()-e.getTime()}getPriceRangePercentage(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const e=Ki(t.end.y),i=Ki(t.start.y);if(!(0,Ng.isNumber)(e)||!(0,Ng.isNumber)(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(e-i)/i}getPriceRangeValue(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const e=Ki(t.end.y),i=Ki(t.start.y);if(!(0,Ng.isNumber)(e)||!(0,Ng.isNumber)(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return e-i}getVolume(t){return t.getVolume(t.start.x,t.end.x)}},rM=class extends Ma{constructor(){super(...arguments),this.type="quick-measurer"}static is(t){return bs.isCheck(t,"quick-measurer")}createStatisticsScene(){return new Bnt}getDirectionStyles(t){return this.verticalDirection==="down"?t.down:t.up}getLineStyles(t){const e=this.getDirectionStyles(t);return{...super.getLineStyles(t),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){const e=this.getDirectionStyles(t);return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}},znt=(E(),w(_)),{StateMachine:Og,StateMachineProperty:CW,Debug:Fnt}=znt._ModuleSupport,_g=class extends Og{constructor(t){const e=({point:o})=>{const r=this.createDatum();r.set({start:o,end:o}),t.create(r)},i=({point:o})=>{const{datum:r,node:l}=this;r?.set({end:o}),l?.toggleActive(!0),l?.toggleHandles({end:!1}),t.update()},s=()=>{this.node?.toggleHandles({end:!0})},n=()=>t.delete(),a=()=>{t.showAnnotationOptions(),!sh(this.datum)&&t.recordAction(`Create ${this.node?.type} annotation`)};super("start",{start:{reset:Og.parent,click:{target:"end",action:e},drag:{target:"end",action:e}},end:{hover:i,drag:i,click:{target:Og.parent,action:s},dragEnd:{target:Og.parent,action:s},reset:{target:Og.parent,action:n},cancel:{target:Og.parent,action:n},onExit:a}}),this.debug=Fnt.create(!0,"annotations")}};m([CW()],_g.prototype,"datum",2),m([CW()],_g.prototype,"node",2);var jnt=class extends _g{createDatum(){return new to}},Gnt=class extends _g{createDatum(){return new eo}},Vnt=class extends _g{createDatum(){return new El}},Wnt=class extends _g{createDatum(){return new va}},LW={type:"date-range",datum:to,scene:Ma,isDatum:to.is,translate:(t,e,i,s)=>{to.is(e)&&Ma.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(to.is(e)&&to.is(i)&&Ma.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{to.is(e)&&Ma.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new jnt({...t,create:e("date-range")}),dragState:t=>new wi(t)},wW={type:"price-range",datum:eo,scene:Ma,isDatum:eo.is,translate:(t,e,i,s)=>{eo.is(e)&&Ma.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(eo.is(e)&&eo.is(i)&&Ma.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{eo.is(e)&&Ma.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Gnt({...t,create:e("date-range")}),dragState:t=>new wi(t)},TW={type:"date-price-range",datum:El,scene:Ma,isDatum:El.is,translate:(t,e,i,s)=>{El.is(e)&&Ma.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(El.is(e)&&El.is(i)&&Ma.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{El.is(e)&&Ma.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Vnt({...t,create:e("date-range")}),dragState:t=>new wi(t)},NW={type:"quick-date-price-range",datum:va,scene:rM,isDatum:va.is,translate:(t,e,i,s)=>{va.is(e)&&rM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(va.is(e)&&va.is(i)&&rM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{va.is(e)&&rM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Wnt({...t,create:e("quick-date-price-range")}),dragState:t=>new wi(t)},Uy=(E(),w(_)),Hnt=(R(),w(nt)),{ZIndexMap:OW,TextWrapper:Unt}=Uy._ModuleSupport,lM=class extends CT{constructor(){super(),this.type="note",this.shape=new Uy._ModuleSupport.Rect,this.iconBackground=new Uy._ModuleSupport.SvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new Uy._ModuleSupport.SvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new Uy._ModuleSupport.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(t){return bs.isCheck(t,"note")}update(t,e){this.updateIcon(t,e),super.update(t,e)}getTextBBox(t,e,i){const s=super.getTextBBox(t,e,i);s.x-=t.width/2,s.x=(0,Hnt.clamp)(0,s.x,i.seriesRect.width-t.width);const n=t.getPadding().top,a=s.y-lV-n*2,o=s.y+oi.HANDLE_SIZE+n*2;return a-s.height-cV<0?(s.y=o,t.position="top"):(s.y=a+n,t.position="bottom"),s}updateLabel(t,e){const i=t.visible===!1?!1:this.label.visible;super.updateLabel(t,e),this.label.visible=i,this.label.text=Unt.wrapText(t.text,{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},avoidOrphans:!1,textAlign:t.textAlign,textBaseline:"hanging",textWrap:"always",maxWidth:200})}updateShape(t,e){const{shape:i}=this;i.fill=t.background.fill,i.fillOpacity=t.background.fillOpacity??1,i.stroke=t.background.stroke,i.strokeOpacity=t.background.strokeOpacity??1,i.strokeWidth=t.background.strokeWidth??1,i.cornerRadius=4;const s=t.getPadding().top,n=t.position==="top";i.x=e.x-s,i.width=t.width+s*2,i.height=e.height+s*2,i.y=e.y+(n?0:-e.height)-s}updateIcon(t,e){const{active:i,iconBackground:s,iconLines:n}=this,{x:a,y:o}=ai(t,e);s.x=a-Nit/2,s.y=o-rV,n.x=s.x,n.y=s.y,s.fill=t.fill,s.fillOpacity=t.fillOpacity??1,s.stroke=t.stroke,s.strokeOpacity=t.strokeOpacity??1,s.strokeWidth=t.strokeWidth??1,n.fill=t.stroke,i?s.fillShadow.color=t.fill??"rgba(0, 0, 0, 0.22)":s.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(t,e,i){const s=t.getPadding().top,n=t.position==="top",a=n?1:-1;return{x:e.x+i.seriesRect.x+t.width/2,y:e.y+i.seriesRect.y+a*(e.height+s),position:n?"below":"above"}}getLabelCoords(t,e){const i=t.position==="top",s=t.getPadding().top+t.fontSize*zy/2;return{x:e.x,y:e.y+(i?s/2:0)}}getTextBaseline(t){return t.position==="top"?"middle":t.position}getHandleCoords(t,e,i){return{x:e.x,y:e.y+oi.HANDLE_SIZE/2+4}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}toggleHovered(t){super.toggleHovered(t),this.label.visible=t,this.shape.visible=t,this.zIndex=t?OW.CHART_ANNOTATION_FOCUSED:OW.CHART_ANNOTATION}toggleActive(t){super.toggleActive(t),this.label.visible=t,this.shape.visible=t,this.active=t}containsPoint(t,e){return this.shape.visible&&this.shape.containsPoint(t,e)||this.iconBackground.containsPoint(t,e)?!0:super.containsPoint(t,e)}},$nt=class extends Wy{createDatum(){return new Gn}},_W={type:"note",datum:Gn,scene:lM,isDatum:Gn.is,translate:(t,e,i,s)=>{Gn.is(e)&&lM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Gn.is(e)&&Gn.is(i)&&lM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Gn.is(e)&&lM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new $nt({...t,create:e("note")}),dragState:t=>new wi(t)},Knt=(E(),w(_)),{Vec2:ro,Vec4:Pr}=Knt._ModuleSupport,cM=class extends aW{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new oi,topMiddle:new Ag,topRight:new oi,bottomLeft:new oi,bottomMiddle:new Ag,bottomRight:new oi},this.middleLine=new Vn,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return bs.isCheck(t,"parallel-channel")}dragHandle(t,e,i,s){const{activeHandle:n,handles:a}=this;if(n==null)return;const{offset:o}=a[n].drag(e);a[n].toggleDragging(!0),(n==="topMiddle"||n==="bottomMiddle")&&(o.x=0);let r=[],l=s;switch(n){case"topLeft":case"bottomLeft":r=["topLeft","bottomLeft"];break;case"topMiddle":r=["topLeft","topRight"],o.y-=Ag.HANDLE_SIZE/2,l=!1;break;case"topRight":case"bottomRight":r=["topRight","bottomRight"];break;case"bottomMiddle":r=["bottomLeft","bottomRight"],o.y-=Ag.HANDLE_SIZE/2,l=!1;break}const c=vn(t,i),h=vn(t.bottom,i);if(!c||!h)return;const u={topLeft:Pr.start(c),topRight:Pr.end(c),bottomLeft:Pr.start(h),bottomRight:Pr.end(h)},d={vectors:{topLeft:u.topRight,bottomLeft:u.bottomRight,topRight:u.topLeft,bottomRight:u.bottomLeft},angle:t.snapToAngle},p=Gl(u,o,i,{overflowContinuous:this.overflowContinuous,translateVectors:r,snap:l?d:void 0});t.start.x=p.topLeft.x,t.start.y=p.topLeft.y,t.end.x=p.topRight.x,t.end.y=p.topRight.y,t.height=p.topLeft.y-p.bottomLeft.y}getTranslatePointsVectors(t,e){const{bottomLeft:i,topLeft:s}=this.handles,n=i.getBBox().y-s.getBBox().y,a=ro.add(t,ro.from(0,n)),o=ro.add(e,ro.from(0,n));return{start:t,end:e,bottomStart:a,bottomEnd:o}}containsPoint(t,e){return super.containsPoint(t,e)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)}getNodeAtCoords(t,e){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)?"line":super.getNodeAtCoords(t,e)}updateLines(t,e,i,s,n,a){const{topLine:o,middleLine:r,bottomLine:l}=this,{lineDashOffset:c,stroke:h,strokeOpacity:u,strokeWidth:d}=t,p=t.getLineDash(),g={lineCap:t.getLineCap(),lineDash:p,lineDashOffset:c,stroke:h,strokeOpacity:u,strokeWidth:d};o.setProperties({...e,...g}),l.setProperties({...i,...g});const f=this.extendLine({x1:n.x1,y1:a.y1+(n.y1-a.y1)/2,x2:n.x2,y2:a.y2+(n.y2-a.y2)/2},t,s);r.setProperties({...f,lineDash:t.middle.lineDash??p,lineDashOffset:t.middle.lineDashOffset??c,stroke:t.middle.stroke??h,strokeOpacity:t.middle.strokeOpacity??u,strokeWidth:t.middle.strokeWidth??d,visible:t.middle.visible??!0})}updateHandles(t,e,i){const{handles:{topLeft:s,topMiddle:n,topRight:a,bottomLeft:o,bottomMiddle:r,bottomRight:l}}=this,c={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};s.update({...c,...Pr.start(e)}),a.update({...c,...Pr.end(e)}),o.update({...c,...Pr.start(i)}),l.update({...c,...Pr.end(i)}),n.update({...c,...ro.sub(Pr.center(e),ro.from(n.handle.width/2,n.handle.height/2))}),r.update({...c,...ro.sub(Pr.center(i),ro.from(r.handle.width/2,r.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(dd,this.text,!!t.text.label),qV(!0,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,s){const n=e.x1>e.x2,a=e.y1>e.y2,o=e.x1!==i.x1&&e.y1!==i.y1,r=e.x2!==i.x2&&e.y2!==i.y2,l=ro.from(e);return t.extendEnd&&r&&l.push(ro.from(n?s.x1:s.x2,a?s.y1:s.y2)),l.push(...ro.from(i).reverse()),t.extendStart&&o&&l.push(ro.from(n?s.x2:s.x1,a?s.y2:s.y1)),l}},Ynt=(E(),w(_)),Eg=(R(),w(nt)),{StateMachine:gh,StateMachineProperty:zT,Debug:Znt}=Ynt._ModuleSupport,hM=class extends gh{constructor(t){const e=({point:l})=>{const c=new so;c.set({start:l,end:l,height:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})},s=({offset:l,context:c})=>{const{datum:h,snapping:u}=this;h&&(h.set({end:Vy(l,c,u,h.start,h.snapToAngle)}),t.update())},n=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},a=({point:l})=>{const{datum:c,node:h}=this,u=Ki(c?.end.y),d=Ki(c?.start.y),{y:p}=l;if(c==null||!(0,Eg.isNumber)(d)||!(0,Eg.isNumber)(u)||!(0,Eg.isNumber)(p))return;const g=u-(p??0),f=d-g;h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint({x:c.start.x,y:f},{overflowContinuous:!0})||!t.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:g}),t.update())},o=({point:l})=>{const{datum:c,node:h}=this,u=Ki(c?.end.y),d=Ki(c?.start.y),{y:p}=l;if(c==null||!(0,Eg.isNumber)(d)||!(0,Eg.isNumber)(u)||!(0,Eg.isNumber)(p))return;const g=u-(p??0),f=d-g;h?.toggleHandles(!0),!(!t.validatePoint({x:c.start.x,y:f},{overflowContinuous:!0})||!t.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:g}),t.recordAction("Create parallel-channel annotation"),t.showAnnotationOptions(),t.update())},r=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:gh.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:s,drag:s,click:{target:"height",action:n},dragEnd:{target:"height",action:n},reset:{target:gh.parent,action:r},cancel:{target:gh.parent,action:r}},height:{hover:a,click:{target:gh.parent,action:o},drag:{target:gh.parent,action:o},reset:{target:gh.parent,action:r},cancel:{target:gh.parent,action:r}}}),this.debug=Znt.create(!0,"annotations"),this.snapping=!1}};m([zT()],hM.prototype,"datum",2),m([zT()],hM.prototype,"node",2),m([zT()],hM.prototype,"snapping",2);var EW={type:"parallel-channel",datum:so,scene:cM,isDatum:so.is,translate:(t,e,i,s)=>{so.is(e)&&cM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(so.is(e)&&so.is(i)&&cM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{so.is(e)&&cM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new hM({...t,create:e("parallel-channel")}),dragState:t=>new wi(t)},uM=class extends CT{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(t){return bs.isCheck(t,"text")}getHandleCoords(t,e){const i=oi.HANDLE_SIZE/2;return{x:e.x+i,y:e.y+2+i}}},Xnt=class extends Wy{createDatum(){return new Fl}},PW={type:"text",datum:Fl,scene:uM,isDatum:Fl.is,translate:(t,e,i,s)=>{Fl.is(e)&&uM.is(t)&&t.translate(e,i,s)},copy:(t,e,i,s)=>{if(Fl.is(e)&&Fl.is(i)&&uM.is(t))return t.copy(e,i,s)},update:(t,e,i)=>{Fl.is(e)&&uM.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new Xnt({...t,create:e("text")}),dragState:t=>new wi(t)},Da={[xW.type]:xW,[eW.type]:eW,[iW.type]:iW,[EW.type]:EW,[oW.type]:oW,[fW.type]:fW,[pW.type]:pW,[$V.type]:$V,[ZV.type]:ZV,[_W.type]:_W,[PW.type]:PW,[bW.type]:bW,[FV.type]:FV,[zV.type]:zV,[LW.type]:LW,[wW.type]:wW,[TW.type]:TW,[NW.type]:NW};function md(t){for(const{isDatum:e}of Object.values(Da))if(e(t))return t}var qnt=(E(),w(_)),{ActionOnSet:Qnt,ParallelStateMachine:Jnt,StateMachine:FT,StateMachineProperty:Rr,Debug:tat}=qnt._ModuleSupport,dM=class extends Jnt{constructor(t){super(new eat(e=>{this.snapping=e}),new iat(()=>{this.node=this.active==null?void 0:t.node(this.active)}),new fh(t,e=>{this.active=e,this.datum=this.active==null?void 0:t.datum(this.active),this.node=this.active==null?void 0:t.node(this.active)})),this.snapping=!1}getActive(){return this.active}isActive(t){return t===this.active}};m([Rr()],dM.prototype,"snapping",2),m([Rr()],dM.prototype,"datum",2),m([Rr()],dM.prototype,"node",2);var eat=class extends FT{constructor(t){super("idle",{idle:{hover:({shiftKey:e})=>t(e),keyDown:({shiftKey:e})=>t(e),keyUp:({shiftKey:e})=>t(e),click:({shiftKey:e})=>t(e),drag:({shiftKey:e})=>t(e)},dragging:{},translating:{},"text-input":{}})}},iat=class extends FT{constructor(t){super("idle",{idle:{onEnter:t,render:t},dragging:{onEnter:t,render:t},translating:{onEnter:t,render:t},"text-input":{render:t}})}},fh=class extends FT{constructor(t,e){const i=v=>M=>{t.create(v,M),this.active=t.selectLast()},s=()=>{this.active!=null&&t.delete(this.active),this.active=void 0,t.select()},n={createDatum:i},a={...t,delete:s,showTextInput:()=>{this.active!=null&&t.showTextInput(this.active)},deselect:()=>{const v=this.active;this.active=void 0,this.hovered=void 0,t.select(this.active,v)},showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}},o=Object.fromEntries(Object.entries(Da).map(([v,M])=>[v,M.createState(a,n)])),r=Object.fromEntries(Object.entries(Da).map(([v,M])=>[v,M.dragState(t,n)])),l=({colorPickerType:v,colorOpacity:M,color:D,opacity:L,isMultiColor:A})=>{this.datum&&(v==="text-color"&&t.updateTextInputColor(D),G0(this.datum,v,M,D,L,A),t.update())},c=v=>{const{datum:M,node:D}=this;!M||!D||(Or(M)?(M.fontSize=v,t.updateTextInputFontSize(v)):kg(M)&&(M.text.fontSize=v),t.update())},h=v=>{const{datum:M,node:D}=this;!M||!D||!nh(M)||(yV(M,v),t.update())},u=v=>{const{node:M}=this;!M||!("setTextInputBBox"in M)||(M.setTextInputBBox(v),t.update())},d=({textInputValue:v,bbox:M})=>{const{datum:D}=this;if(M!=null&&v!=null&&v.length>0){if(!Or(D))return;const L=P0(D,v,M.width);D.set({text:L}),t.update(),t.recordAction(`Change ${D.type} annotation text`)}else t.delete(this.active),t.recordAction(`Delete ${D?.type} annotation`)},p=()=>{t.updateTextInputBBox(void 0)},g=()=>this.active!=null,f=()=>this.copied!=null,x=()=>{const{active:v,datum:M}=this;return v==null||!M?!1:kg(M)&&!M.locked},y=()=>this.active!=null&&!sh(this.datum),b=()=>this.hovered!=null;super("idle",{idle:{onEnter:()=>{t.select(this.active,this.active),this.hoverCoords&&(this.hovered=t.hoverAtCoords(this.hoverCoords,this.active,this.hovered))},hover:({offset:v})=>{this.hovered=t.hoverAtCoords(v,this.active,this.hovered),this.hoverCoords=v},translate:{guard:g,target:"translating",action:({translation:v})=>{t.startInteracting(),t.translate(this.active,v),t.update()}},copy:{guard:y,action:()=>{this.copied=t.copy(this.active)}},cut:{guard:y,action:()=>{this.copied=t.copy(this.active),s()}},paste:{guard:f,action:()=>{t.paste(this.copied)}},selectLast:()=>{const v=this.active;this.active=t.selectLast(),t.select(this.active,v)},click:[{guard:()=>{const{active:v,hovered:M,datum:D}=this;return v==null||M!==v||!D?!1:Or(D)&&!D.locked},target:"text-input"},{action:()=>{const v=this.active;this.active=this.hovered,t.select(this.active,v)}}],dblclick:{guard:x,action:({offset:v})=>{const M=t.getNodeAtCoords(v,this.active)==="text"?"text":"line";t.showAnnotationSettings(this.active,void 0,M)}},dragStart:[{guard:b,target:"dragging",action:()=>{const v=this.active;this.active=this.hovered,t.select(this.active,v),t.startInteracting()}},{action:()=>{const v=this.active;this.active=this.hovered,t.select(this.active,v)}}],color:{guard:g,action:l},fontSize:{guard:g,action:c},lineProps:{guard:g,action:v=>{const M=md(this.datum);M?.set(v),t.update(),t.recordAction(`Change ${M?.type} ${Object.entries(v).map(([D,L])=>`${D} to ${L}`).join(", ")}`)}},lineStyle:{guard:g,action:h},lineText:{guard:g,action:v=>{const M=md(this.datum);kg(M)&&(jl(M)&&v.position==="center"&&(v.position="inside"),M.text.set(v),t.update())}},updateTextInputBBox:{guard:g,action:u},toolbarPressSettings:{guard:x,action:v=>{t.showAnnotationSettings(this.active,v)}},reset:()=>{this.active!=null&&this.node?.toggleActive(!1),this.hovered=void 0,this.active=void 0,t.select(this.active,this.active),t.resetToIdle()},delete:()=>{this.active!=null&&(t.delete(this.active),!sh(this.datum)&&t.recordAction(`Delete ${this.datum?.type} annotation`))},deleteAll:()=>{t.deleteAll()},...o},dragging:{onEnter:(v,M)=>{if(this.active==null)return;const D=t.getAnnotationType(this.active);D&&(this.transitionRoot(D),this.transitionRoot("dragStart",M))},...r},translating:{onEnter:()=>{},translate:{guard:g,target:"translating",action:({translation:v})=>{t.startInteracting(),t.translate(this.active,v),t.update()}},translateEnd:{guard:g,target:"idle"},onExit:()=>{t.stopInteracting(),t.update(),t.recordAction("Translate annotation")}},"text-input":{onEnter:()=>{if(this.active==null)return;const v=md(this.datum);!v||!("getTextInputCoords"in v)||(t.startInteracting(),t.showTextInput(this.active),v.visible=!1,t.update())},updateTextInputBBox:{guard:g,action:u},resize:{target:"idle",action:d},click:{target:"idle",action:d},drag:{target:"idle",action:d},textInput:[{guard:kT,target:"idle",action:p},{guard:IT,target:"idle",action:d}],color:{guard:g,action:l},fontSize:{guard:g,action:c},cancel:{target:"idle",action:p},onExit:()=>{t.stopInteracting(),t.hideTextInput();const v=this.active;if(this.active=this.hovered=void 0,t.select(this.active,v),v==null)return;const M=t.datum(v),D=t.node(v);!M||!D||(M.visible=!0)}}}),this.setActive=e,this.debug=tat.create(!0,"annotations"),this.snapping=!1}};m([Qnt({changeValue(t){this.setActive(t)}}),Rr()],fh.prototype,"active",2),m([Rr()],fh.prototype,"hovered",2),m([Rr()],fh.prototype,"hoverCoords",2),m([Rr()],fh.prototype,"copied",2),m([Rr()],fh.prototype,"snapping",2),m([Rr()],fh.prototype,"datum",2),m([Rr()],fh.prototype,"node",2);var jT=(E(),w(_)),{ActionOnSet:sat,LayoutElement:nat,Menu:aat,PropertiesArray:oat,ToolbarButtonProperties:rat,Property:pM,ChartAxisDirection:lat}=jT._ModuleSupport,RW=class extends rat{};m([pM],RW.prototype,"value",2);var gM=class extends jT._ModuleSupport.BaseProperties{constructor(t){super(),this.ctx=t,this.enabled=!0,this.padding=20,this.buttons=new oat(RW),this.events=new jT._ModuleSupport.Listeners,this.annotationMenu=new aat(this.ctx,"annotations"),this.destroyFns=[],this.toolbar=t.sharedToolbar.getSharedToolbar("annotations");const e=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",e),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),t.layoutManager.registerElement(nat.ToolbarLeft,this.onLayoutStart.bind(this)),()=>{this.toolbar.removeListener("keydown",e),this.toolbar.destroy()})}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}toggleVisibility(t){this.toolbar.setHidden(!t)}toggleClearButtonEnabled(t){const e=this.buttons.findIndex(i=>i.value==="clear");this.toolbar.toggleButtonEnabledByIndex(e,t)}resetButtonIcons(){for(const[t,e]of this.buttons.entries())switch(e.value){case"line-menu":this.updateButtonByIndex(t,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(t,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(t,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(t,{icon:"arrow-drawing",value:"shape-menu"});break;case"measurer-menu":this.updateButtonByIndex(t,{icon:"measurer-drawing",value:"measurer-menu"});break}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}dispatch(t,e){this.events.dispatch(t,e)}onLayoutStart(t){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(t.layoutBox,this.padding))}refreshButtonsEnabled(t){for(const[e,i]of this.buttons.entries())i&&this.toolbar.toggleButtonEnabledByIndex(e,t)}onToolbarButtonPress({event:t,button:e,buttonBounds:i}){const s=this.ctx.axisManager.getAxisContext(lat.Y)[0].scale;switch(e.value){case"clear":this.dispatch("pressed-clear");break;case"line-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsLineAnnotations",ast.filter(n=>n.visible?n.visible(s):!0));break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsFibonacciAnnotations",ost);break;case"text-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsTextAnnotations",lst);break;case"shape-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsShapeAnnotations",cst);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsMeasurerAnnotations",hst);break}}onToolbarButtonPressShowMenu(t,e,i,s,n){this.dispatch("pressed-show-menu");const a=this.buttons.findIndex(o=>o.value===i);this.toolbar.toggleActiveButtonByIndex(a),this.annotationMenu.setAnchor({x:e.x+e.width+6,y:e.y}),this.annotationMenu.show({items:n,ariaLabel:this.ctx.localeManager.t(s),class:"ag-charts-annotations__toolbar-menu",sourceEvent:t.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,i)})}onButtonPressMenuCreateAnnotation(t,e){const i=this.buttons.findIndex(s=>s.value===t);this.updateButtonByIndex(i,{icon:e.icon}),this.dispatch("pressed-create-annotation",{annotation:e.value}),this.annotationMenu.hide()}onKeyDown({sourceEvent:t}){t.key==="Escape"&&this.dispatch("cancel-create-annotation")}updateButtonByIndex(t,e){const i=this.buttons.at(t);i&&(i.set({...i.toJson(),...e,value:e.value??i.value}),this.toolbar.updateButtonByIndex(t,{...i.toJson()}))}};m([pM,sat({changeValue(t){this.toolbar?.setHidden(!t)}})],gM.prototype,"enabled",2),m([pM],gM.prototype,"padding",2),m([pM],gM.prototype,"buttons",2);var BW=(E(),w(_)),{BaseModuleInstance:cat,InteractionState:$y,Property:hat,ChartAxisDirection:uat,getIconClassNames:dat}=BW._ModuleSupport,Ky="ag-charts-annotations__axis-button",zW=class extends cat{constructor(t,e,i,s){super(),this.ctx=t,this.axisCtx=e,this.onButtonClick=i,this.seriesRect=s,this.enabled=!0,this.snap=!1,this.padding=0,this.button=this.setup(),this.toggleVisibility(!1),this.updateButtonElement(),this.snap=!!e.scale.bandwidth,t.domManager.addEventListener("focusin",({target:n})=>{const a=n instanceof HTMLElement?n:void 0;!(a&&t.domManager.contains(a,"series-area"))&&a!==this.button.getElement()&&this.hide()}),this.destroyFns.push(t.widgets.seriesWidget.addListener("drag-move",n=>this.onMouseDrag(n)),t.widgets.seriesWidget.addListener("mousemove",n=>this.onMouseMove(n)),t.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseLeave()),t.widgets.seriesDragInterpreter.addListener("click",n=>this.onClick(n)),t.chartEventManager.addListener("series-focus-change",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.hide()),t.zoomManager.addListener("zoom-change",()=>this.hide()),()=>this.destroyElements(),()=>this.button.destroy())}update(t,e){this.seriesRect=t,this.padding=e}setup(){const t=new BW._Widget.ButtonWidget;return t.addClass(Ky),t.setTabIndex(-1),t.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),this.ctx.widgets.seriesWidget.getElement().appendChild(t.getElement()),t}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",Ky)}onMouseMove(t){this.ctx.interactionManager.isState($y.Clickable)&&this.show(t)}onMouseDrag(t){this.ctx.interactionManager.isState($y.AnnotationsMoveable)&&this.show(t)}onMouseLeave(){this.ctx.interactionManager.isState($y.Clickable)&&this.hide()}onClick(t){this.ctx.interactionManager.isState($y.Clickable)&&t.device==="touch"&&this.show(t)}show(t){const{sourceEvent:e,currentX:i,currentY:s}=t;if(!(this.enabled&&this.ctx.widgets.seriesWidget.getElement().contains(e.target))){this.hide();return}this.toggleVisibility(!0);const n=this.getButtonCoordinates({x:i,y:s});this.coords={x:n.x+this.button.clientWidth/2,y:n.y+this.button.clientHeight/2},this.updatePosition(n)}hide(){this.toggleVisibility(!1)}onKeyPress(){this.snap&&this.ctx.interactionManager.isState($y.Default)||this.hide()}getButtonCoordinates({x:t,y:e}){const{axisCtx:{direction:i,position:s},seriesRect:n,snap:a,axisCtx:o,padding:r}=this,{clientWidth:l,clientHeight:c}=this.button,[h,u]=[0,n.height],[d,p]=[0,n.width];if(a&&(t=_l(N0(t-n.x,o),o)+n.x,e=_l(N0(e-n.y,o),o)+n.y),i===uat.X){const f=c-Math.max(0,r-5);t=t-l/2,e=s==="top"?h-c+f:u-f}else{const f=l-Math.max(0,r-9);t=s==="left"?d-l+f:p-f,e=e-c/2}return{x:t,y:e}}toggleVisibility(t){const{button:e}=this;if(e==null)return;const i=this.enabled&&t;this.toggleClass("-hidden",!i)}toggleClass(t,e){this.button.toggleClass(`${Ky}-${t}`,e)}updatePosition({x:t,y:e}){this.button.getElement().style.transform=`translate(${Math.round(t)}px, ${Math.round(e)}px)`}updateButtonElement(){const{button:t}=this;t.addListener("click",()=>this.onButtonClick(this.coords)),t.addListener("touchend",()=>this.onButtonClick(this.coords)),t.addListener("drag-start",()=>{}),t.setInnerHTML(`<span class="${dat("zoom-in")} ${Ky}-icon"></span>`)}};m([hat],zW.prototype,"enabled",2);var pat=(E(),w(_)),gat=(E(),w(_)),Yi=(R(),w(nt)),{Color:FW,DraggablePopover:fat,NativeWidget:GT,Vec2:Zi,createButton:fM,createCheckbox:mat,createSelect:yat,createTextArea:xat,initRovingTabIndex:jW,getIconClassNames:bat,mapValues:VT}=gat._ModuleSupport,GW=class xO extends fat{constructor(e,i){super(e,i),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new SV(this.ctx,{detached:!0}),this.destroyFns.push(e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(e,i){const s=super.showWithChildren(e,i);return s.classList.add("ag-charts-dialog"),s.setAttribute("role","dialog"),s.addEventListener("mousedown",n=>{n.target.classList?.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()}),s.addEventListener("keydown",this.onKeyDown.bind(this)),(0,Yi.getWindow)().requestAnimationFrame(()=>this.reposition()),this.colorPicker.attachTo(this),s}updatePosition(e){super.updatePosition(e);const{anchor:i,fallbackAnchor:s}=this.getColorPickerAnchors()??{};i&&this.colorPicker.setAnchor(i,s)}createTabs(e,i,s){const n=(0,Yi.createElement)("div","ag-charts-dialog__tabs"),a=VT(s,()=>(0,Yi.createElementId)()),o=VT(s,()=>(0,Yi.createElementId)());for(const[p,g]of(0,Yi.entries)(s))(0,Yi.setAttributes)(g.panel,{id:o[p],role:"tabpanel","aria-labelledby":a[p]});const r=p=>{for(const[g,f]of(0,Yi.entries)(s))f.panel.classList.toggle("ag-charts-dialog__tab-panel--active",g===p),h[g].classList.toggle("ag-charts-dialog__tab-button--active",g===p),(0,Yi.setAttribute)(h[g],"aria-selected",g===p),g===p&&f.onShow?.()},l=new GT((0,Yi.createElement)("div","ag-charts-dialog__header"));l.addListener("drag-start",p=>{const{sourceEvent:g}=p;g.target instanceof Element&&g.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(p)}),l.addListener("drag-move",p=>this.onDragMove(p)),l.addListener("drag-end",()=>this.onDragEnd());const c=new Sat;this.setDragHandle(c);const h=VT(s,(p,g)=>fM({label:this.ctx.localeManager.t(p.label),onPress:()=>r(g)},{id:a[g],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":o[g]})),u=(0,Yi.createElement)("div","ag-charts-dialog__tab-list");(0,Yi.setAttributes)(u,{role:"tablist","aria-label":this.ctx.localeManager.t(e)}),u.append(...Object.values(h));const d=this.createHeaderCloseButton();return l.getElement().append(c.getElement(),u,d),n.append(l.getElement(),...Object.values(s).map(p=>p.panel)),r(i),jW({orientation:"horizontal",buttons:Object.values(h)}),{tabs:n,initialFocus:h[i]}}createTabPanel(){return(0,Yi.createElement)("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return(0,Yi.createElement)("div","ag-charts-dialog__input-group-line")}createRadioGroup({label:e,options:i,value:s,onChange:n}){const a=this.createInputGroup(e);(0,Yi.setAttributes)(a,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(e)});const o="ag-charts-dialog__button--active",r=[];for(const l of i){const{icon:c,altText:h}=l,u=this.ctx.localeManager.t(h),d=fM({icon:c,altText:u,onPress:()=>{for(const p of Array.from(a.children))p.classList.remove(o),p.ariaChecked="false";d.classList.add(o),d.ariaChecked="true",n(l.value)}},{"aria-checked":l.value===s,class:"ag-charts-dialog__button",role:"radio",title:u});l.value===s&&d.classList.add(o),a.appendChild(d),r.push(d)}return jW({orientation:"horizontal",buttons:r}),a}createSelect({altText:e,label:i,options:s,value:n,onChange:a}){const o=this.createInputGroup(i),r=this.ctx.localeManager.t(e),l=yat({value:n,options:s,onChange:a},{class:"ag-charts-dialog__select","aria-label":r,title:r});return o.append(l),o}createTextArea({placeholder:e,value:i,onChange:s}){const n=e?this.ctx.localeManager.t(e):void 0;return xat({value:i,onChange:s},{placeholder:n})}createCheckbox({label:e,checked:i,onChange:s}){const n=(0,Yi.createElementId)(),a=this.createInputGroup(e,{for:n}),o=mat({checked:i,onChange:s},{class:"ag-charts-dialog__checkbox",role:"switch",id:n});return a.append(o),a}createColorPicker({color:e,opacity:i,label:s,altText:n,onChange:a,onChangeHide:o,isMultiColor:r,hasMultiColorOption:l}){const c=this.createInputGroup(s),h=this.ctx.localeManager.t(n),u=fM({label:h,onPress:d=>{const{anchor:p,fallbackAnchor:g}=this.getColorPickerAnchors(u)??{};this.colorPicker.show({anchor:p,fallbackAnchor:g,color:e,opacity:i,isMultiColor:r,hasMultiColorOption:l,sourceEvent:d,onChange:(f,x,y,b)=>{u.style.setProperty("--color",f),u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",b),a(f,x,y,b)},onChangeHide:o})}},{"aria-label":h,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:h});if(r)u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(e){const d=FW.fromString(e),p=new FW(d.r,d.g,d.b,i);u.style.setProperty("--color",p.toHexString())}return c.append(u),this.hideFns.push(()=>{this.colorPicker.hide()}),c}createHeaderCloseButton(){return fM({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(e,i){const s=(0,Yi.createElement)("div","ag-charts-dialog__input-group"),n=(0,Yi.createElement)("label","ag-charts-dialog__input-group-label");return n.innerText=this.ctx.localeManager.t(e),(0,Yi.setAttribute)(n,"for",i?.for),s.appendChild(n),s}onLayoutComplete(e){this.seriesRect=e.series.paddedRect,this.reposition()}onKeyDown(e){e.altKey||e.ctrlKey||e.metaKey||e.isComposing||e.key!=="Escape"||this.hide()}reposition(){const{seriesRect:e,ctx:i}=this,s=i.domManager.getBoundingClientRect(),n=this.getPopoverElement();if(!e||!n)return;const a=Zi.from(0,e.y),o=Zi.from(s.width,e.height),r=Zi.from(n),l=Zi.from(.5,1);let c;if(e.width>1e3){const h=Zi.sub(Zi.add(a,Zi.multiply(o,l)),Zi.multiply(r,l));c=Zi.sub(h,Zi.from(0,xO.offset))}else{const h=Zi.sub(Zi.add(a,o),r);c=Zi.sub(h,xO.offset)}this.updatePosition(c)}getColorPickerAnchors(e){if(e&&(this.colorPickerAnchorElement=e),!this.colorPickerAnchorElement)return;const i=this.colorPickerAnchorElement.getBoundingClientRect(),s=this.ctx.domManager.getBoundingClientRect(),n=Zi.sub(Zi.from(i.x,i.y),Zi.from(s.left,s.top)),a=Zi.add(n,Zi.from(0,i.height+5)),o=Zi.sub(n,Zi.from(0,5));return{anchor:a,fallbackAnchor:o}}};GW.offset=60;var vat=GW,Sat=class extends GT{constructor(){super((0,Yi.createElement)("div","ag-charts-dialog__drag-handle"));const t=new GT((0,Yi.createElement)("span",bat("drag-handle")));t.setAriaHidden(!0),this.addChild(t)}},{Listeners:Mat,focusCursorAtEnd:Dat}=pat._ModuleSupport,kat=class extends vat{constructor(t){super(t,"settings"),this.events=new Mat,this.hideFns.push(()=>this.events.dispatch("hidden"))}addListener(t,e){return this.events.addListener(t,e)}show(t,e){const i=this.createLinearLineTab(t,e),s=this.createLinearTextTab(t,e);let n="dialogHeaderLine";jl(t)?n="dialogHeaderChannel":mV(t)?n="dialogHeaderFibonacciRange":t.type==="date-range"?n="dialogHeaderDateRange":t.type==="price-range"?n="dialogHeaderPriceRange":t.type==="date-price-range"&&(n="dialogHeaderDatePriceRange");const{tabs:a,initialFocus:o}=this.createTabs("ariaLabelSettingsTabBar",e.initialSelectedTab,{line:{label:n,panel:i},text:{label:"dialogHeaderText",panel:s.panel,onShow:s.onShow}});e.initialFocus=o,this.showWithChildren([a],e).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(t,e){const i=this.createTabPanel(),s=this.createInputGroupLine(),n=this.createInputGroupLine(),a="isMultiColor"in t,o=this.createColorPickerInput("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),a?t.isMultiColor:!1,a,e.onChangeLineColor,e.onChangeHideLineColor),r=this.createStrokeWidthSelect(t.strokeWidth??2,e.onChangeLineStyleWidth),l=this.createLineStyleRadioGroup(t.lineStyle??"solid",e.onChangeLineStyleType);if(s.append(o),"background"in t){const c=this.createColorPickerInput("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),!1,!1,e.onChangeFillColor,e.onChangeHideFillColor);s.append(c),n.append(r)}else"showFill"in t?(s.append(this.createCheckbox({label:"dialogInputShowFill",checked:t.showFill??!0,onChange:c=>e.onChangeLine({showFill:c})})),n.append(r)):s.append(r);return n.append(l),i.append(s,n),"bands"in t&&i.append(this.createFibonacciRatioSelect(t.bands??10,c=>e.onChangeLine({bands:c}))),"extendStart"in t&&"extendEnd"in t&&i.append(this.createCheckbox({label:jl(t)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:t.extendStart??!1,onChange:c=>e.onChangeLine({extendStart:c})}),this.createCheckbox({label:jl(t)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:t.extendEnd??!1,onChange:c=>e.onChangeLine({extendEnd:c})})),"extendAbove"in t&&"extendBelow"in t&&i.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:t.extendAbove??!1,onChange:c=>e.onChangeLine({extendAbove:c})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:t.extendBelow??!1,onChange:c=>e.onChangeLine({extendBelow:c})})),"extendLeft"in t&&"extendRight"in t&&i.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:t.extendLeft??!1,onChange:c=>e.onChangeLine({extendLeft:c})}),this.createCheckbox({label:"dialogInputExtendRight",checked:t.extendRight??!1,onChange:c=>e.onChangeLine({extendRight:c})})),"reverse"in t&&"showFill"in t&&i.append(this.createCheckbox({label:"dialogInputReverse",checked:t.reverse??!1,onChange:c=>e.onChangeLine({reverse:c})})),i}createLinearTextTab(t,e){const i=this.createTabPanel(),s=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:t.text.label,onChange:h=>e.onChangeText({label:h})}),n=this.createFontSizeSelect(t.text.fontSize,e.onChangeTextFontSize),a=this.createColorPickerInput("text-color",t.text.color,1,!1,!1,e.onChangeTextColor,e.onChangeHideTextColor),o=t.text.position==="inside"?"center":t.text.position,r=this.createPositionRadioGroup(o??"top",h=>e.onChangeText({position:h})),l=this.createAlignmentRadioGroup(t.text.alignment??"center",h=>e.onChangeText({alignment:h})),c=this.createInputGroupLine();return c.append(n,a,r,l),i.append(s,c),{panel:i,onShow:()=>Dat(s)}}createColorPickerInput(t,e,i,s,n,a,o){const r=t==="fill-color"?"dialogInputFillColorPicker":"dialogInputColorPicker",l=t==="fill-color"?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:r,altText:l,color:e,opacity:i,isMultiColor:s,hasMultiColorOption:n,onChange:a,onChangeHide:o})}createStrokeWidthSelect(t,e){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:kV.map(({label:i,value:s})=>({label:i,value:`${s}`})),value:String(t),onChange:i=>e(Number(i))})}createFibonacciRatioSelect(t,e){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:rst.map(({label:i,value:s})=>({label:i,value:`${s}`})),value:String(t),onChange:i=>e(Number(i))})}createLineStyleRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:t,onChange:e})}createFontSizeSelect(t,e){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:IV.map(({label:i,value:s})=>({label:i,value:String(s)})),value:String(t),onChange:i=>e(Number(i))})}createPositionRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:t,onChange:e})}createAlignmentRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:t,onChange:e})}};function WT(t){return t.gridPadding+t.seriesAreaPadding+t.tickSize+t.label.spacing}function Iat(t,e,i){for(const{update:s}of Object.values(Da))s(t,e,i)}var{ChartUpdateType:Aat,InteractionState:Wn,ObserveChanges:Cat,PropertiesArray:Lat,Property:Yy,ChartAxisDirection:wat,Vec2:yd,keyProperty:Tat,valueProperty:Nat,Selection:Oat,BBox:_at}=T0._ModuleSupport,Pg=class D5 extends T0._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.toolbar=new gM(this.ctx),this.optionsToolbar=new xT(this.ctx,()=>{const i=this.state.getActive();if(i!=null)return md(this.annotationData.at(i))}),this.axesButtons=new qw,this.snap=!1,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new Lat(D5.createAnnotationDatum),this.defaults=new sst,this.container=new T0._ModuleSupport.Group({name:"static-annotations"}),this.annotations=new Oat(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new kat(this.ctx),this.textInput=new Get(this.ctx),this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(e.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this))}setupStateMachine(){const{ctx:e}=this;return new dM({resetToIdle:()=>{e.domManager.updateCursor("annotations"),this.popAnnotationState(Wn.Annotations),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(i,s,n)=>{let a;return this.annotations.each((o,r,l)=>{const c=o.containsPoint(i.x,i.y);c&&(a??(a=l)),o.toggleHovered(c||s===l)}),a!=null?e.tooltipManager.suppressTooltip("annotations"):this.isAnnotationState()||e.tooltipManager.unsuppressTooltip("annotations"),this.ctx.domManager.updateCursor("annotations",a==null?void 0:this.annotations.at(a)?.getCursor()),a!==n&&this.update(),a},getNodeAtCoords:(i,s)=>{const n=this.annotations.at(s);if(n)return n.getNodeAtCoords(i.x,i.y)},translate:(i,s)=>{const n=this.annotations.at(i),a=md(this.annotationData.at(i));if(!(!n||!a))return this.translateNode(n,a,s)},copy:i=>{const s=this.annotations.at(i),n=md(this.annotationData.at(i));if(!(!s||!n))return this.createAnnotationDatumCopy(s,n)},paste:i=>{this.createAnnotation(i.type,i,!1),this.postUpdateFns.push(()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")})},select:(i,s)=>{const{annotations:n,optionsToolbar:a,toolbar:o}=this;this.hideOverlays(),o.clearActiveButton(),o.resetButtonIcons();const r=i!=null?n.at(i):null,l=s!=null?n.at(s):null;l===r&&r!=null||(l?.toggleActive(!1),a.hide(),r?(this.pushAnnotationState(Wn.AnnotationsSelected),r.toggleActive(!0),a.updateButtons(this.annotationData.at(i)),this.postUpdateFns.push(()=>{a.show(),a.setAnchorScene(r)})):(this.popAnnotationState(Wn.AnnotationsSelected),this.popAnnotationState(Wn.Annotations)),this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.pushAnnotationState(Wn.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.pushAnnotationState(Wn.Annotations)},stopInteracting:()=>{this.popAnnotationState(Wn.Annotations)},create:(i,s)=>{this.createAnnotation(i,s)},delete:i=>{this.annotationData.splice(i,1)},deleteAll:()=>{this.annotationData.splice(0,this.annotationData.length)},validatePoint:(i,s)=>{const n=this.getAnnotationContext();return n?iM(n,i,s):!0},getAnnotationType:i=>$et(this.annotationData[i].type),datum:i=>this.annotationData.at(i),node:i=>this.annotations.at(i),recordAction:i=>{this.recordActionAfterNextUpdate(i)},update:()=>{this.postUpdateFns.push(()=>{const i=this.state.getActive(),s=i!=null?this.annotations.at(i):null;s!=null&&this.optionsToolbar.setAnchorScene(s)}),this.update()},showTextInput:i=>{const s=md(this.annotationData.at(i));if(!this.annotations.at(i)||!s||!("getTextInputCoords"in s)||!("getTextPosition"in s))return;const a={color:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,placeholderColor:s.getPlaceholderColor()},o=this.getAnnotationContext(),r=c=>yd.add(s.getTextInputCoords(o,c),yd.required(this.seriesRect)),l=()=>s.getTextPosition();this.textInput.show({styles:a,layout:{getTextInputCoords:r,getTextPosition:l,alignment:s.alignment,textAlign:s.textAlign,width:s.width},text:s.text,placeholderText:s.placeholderText,onChange:(c,h)=>{this.state.transition("updateTextInputBBox",h)}}),this.ctx.domManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:i=>{this.textInput.updateColor(i)},updateTextInputFontSize:i=>{const s=this.textInput.updateFontSize(i);this.state.transition("updateTextInputBBox",s)},updateTextInputBBox:i=>{this.state.transition("updateTextInputBBox",i)},showAnnotationOptions:i=>{const s=this.annotations.at(i);!s||sh(this.annotationData.at(i))||(this.optionsToolbar.updateButtons(this.annotationData.at(i)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(s))},showAnnotationSettings:(i,s,n="line")=>{const a=this.annotationData.at(i);if(!j0(a)&&!jl(a)&&!Fy(a)||sh(a))return;const o=c=>(h,u,d,p)=>{this.setColorAndDefault(a.type,c,h,u,d,p),this.optionsToolbar.updateColorPickerColor(c,u,d,p)},r=c=>()=>{this.recordActionAfterNextUpdate(`Change ${a.type} ${c} to ${a.getDefaultColor(c)}`,["annotations","defaults"]),this.update()},l={initialSelectedTab:n,ariaLabel:this.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:s,onChangeLine:c=>{this.state.transition("lineProps",c),c.bands!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"bands",c.bands),c.reverse!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"reverse",c.reverse),c.showFill!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"showFill",c.showFill)},onChangeText:c=>{this.state.transition("lineText",c),c.alignment&&this.defaults.setDefaultLineTextAlignment(a.type,c.alignment),c.position&&this.defaults.setDefaultLineTextPosition(a.type,c.position),this.recordActionAfterNextUpdate(`Change ${a.type} text ${Object.keys(c).map(h=>`${h} to ${c[h]}`).join(", ")}`)},onChangeFillColor:o("fill-color"),onChangeHideFillColor:r("fill-color"),onChangeLineColor:o("line-color"),onChangeHideLineColor:r("line-color"),onChangeLineStyleType:c=>{this.setLineStyleTypeAndDefault(a.type,c),this.optionsToolbar.updateLineStyleType(Gy.find(h=>h.value===c)??Gy[0])},onChangeLineStyleWidth:c=>{this.setLineStyleWidthAndDefault(a.type,c),this.optionsToolbar.updateStrokeWidth({strokeWidth:c,value:c,label:String(c)})},onChangeTextColor:o("text-color"),onChangeHideTextColor:r("text-color"),onChangeTextFontSize:c=>{this.setFontSizeAndDefault(a.type,c)}};this.settingsDialog.show(a,l)}})}setupListeners(){const{ctx:e,optionsToolbar:i,settingsDialog:s,toolbar:n}=this,{seriesWidget:a,seriesDragInterpreter:o,chartWidget:r}=e.widgets;this.destroyFns.push(o.addListener("click",this.hoverTouchPreHandler.bind(this)),o.addListener("drag-start",this.hoverTouchPreHandler.bind(this)),o.addListener("drag-move",this.dragMoveTouchPreHandler.bind(this)),o.addListener("mousemove",this.onHover.bind(this)),o.addListener("click",this.onClick.bind(this)),o.addListener("dblclick",this.onDoubleClick.bind(this)),o.addListener("drag-start",this.onDragStart.bind(this)),o.addListener("drag-move",this.onDrag.bind(this)),o.addListener("drag-end",this.onDragEnd.bind(this)),a.addListener("keydown",this.onKeyDown.bind(this)),a.addListener("keyup",this.onKeyUp.bind(this)),r.addListener("click",this.onCancel.bind(this)),e.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),e.zoomManager.addListener("zoom-change",()=>this.onResize()),e.domManager.addListener("resize",()=>this.onResize()),n.addListener("cancel-create-annotation",()=>{this.cancel(),this.reset(),this.update()}),n.addListener("pressed-create-annotation",({annotation:l})=>{this.cancel(),this.pushAnnotationState(Wn.Annotations),this.state.transition(l),this.update()}),n.addListener("pressed-clear",()=>{this.clear(),this.recordActionAfterNextUpdate("Clear all")}),n.addListener("pressed-show-menu",()=>{this.cancel(),this.reset()}),n.addListener("pressed-unrelated",()=>{this.reset()}),i.addListener("pressed-delete",()=>{this.cancel(),this.delete(),this.reset()}),i.addListener("pressed-settings",({sourceEvent:l})=>{this.state.transition("toolbarPressSettings",l)}),i.addListener("pressed-lock",()=>{this.update()}),i.addListener("hid-overlays",()=>{this.settingsDialog.hide()}),i.addListener("saved-color",({type:l,colorPickerType:c,color:h})=>{this.recordActionAfterNextUpdate(`Change ${l} ${c} to ${h}`,["annotations","defaults"])}),i.addListener("updated-color",({type:l,colorPickerType:c,colorOpacity:h,color:u,opacity:d,isMultiColor:p})=>{this.setColorAndDefault(l,c,h,u,d,p)}),i.addListener("updated-font-size",({type:l,fontSize:c})=>{this.setFontSizeAndDefault(l,c)}),i.addListener("updated-line-style",({type:l,lineStyleType:c})=>{this.setLineStyleTypeAndDefault(l,c)}),i.addListener("updated-line-width",({type:l,strokeWidth:c})=>{this.setLineStyleWidthAndDefault(l,c)}),s.addListener("hidden",()=>{this.optionsToolbar.clearActiveButton()}))}setupDOM(){const{ctx:e,toolbar:i}=this;this.destroyFns.push(e.annotationManager.attachNode(this.container),()=>e.domManager.removeStyles(Ky),()=>i.destroy())}async processData(e){if(!this.enabled||this.data==null||this.xKey==null||this.volumeKey==null)return;const i=[Tat(this.xKey,void 0,{id:"date"}),Nat(this.volumeKey,"number",{id:"volume"})],{dataModel:s,processedData:n}=await e.request("annotations",this.data,{props:i});this.dataModel=s,this.processedData=n}createAnnotationScene(e){if(e.type in Da)return new Da[e.type].scene;throw new Error(`AG Charts - Cannot create annotation scene of type [${e.type}], expected one of [${Object.keys(Da)}], ignoring.`)}static createAnnotationDatum(e){if(e.type in Da)return new Da[e.type].datum().set(e);throw new Error(`AG Charts - Cannot create annotation datum of unknown type [${e.type}], expected one of [${Object.keys(Da)}], ignoring.`)}createAnnotation(e,i,s=!0){if(this.annotationData.push(i),s){const n=this.ctx.annotationManager.getAnnotationTypeStyles(e);n&&i.set(n),this.defaults.applyDefaults(i)}this.injectDatumDependencies(i),this.update()}injectDatumDependencies(e){"setLocaleManager"in e&&e.setLocaleManager(this.ctx.localeManager),"getVolume"in e&&(e.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(e,i){const{dataModel:s,processedData:n}=this;let a=Ki(e),o=Ki(i);if(!(0,Zw.isValidDate)(a)||!(0,Zw.isValidDate)(o)||!s||!n||this.volumeKey==null)return;a>o&&([a,o]=[o,a]);const r=s.resolveKeysById({id:"annotations"},"date",n),l=s.resolveColumnById({id:"annotations"},"volume",n);let c=0;for(let h=0;h<n.input.count;h++){const u=r[h];(0,Zw.isValidDate)(u)&&u>=a&&u<=o&&(c+=l[h])}return c}translateNode(e,i,s){const n=this.getAnnotationConfig(i),a=this.getAnnotationContext();a&&n.translate(e,i,s,a)}createAnnotationDatumCopy(e,i){const s=this.getAnnotationConfig(i),n=new s.datum;n.set(i.toJson());const a=this.getAnnotationContext();if(a)return s.copy(e,i,n,a)}getAnnotationConfig(e){if(e.type in Da)return Da[e.type];throw new Error(`AG Charts - Cannot get annotation config of unknown type [${e.type}], expected one of [${Object.keys(Da)}], ignoring.`)}onRestoreAnnotations(e){this.enabled&&(this.clear(),this.annotationData.set(e.annotations),this.postUpdateFns.push(()=>{this.ctx.annotationManager.fireChangedEvent()}),this.update())}onLayoutComplete(e){const i=e.series.paddedRect;this.seriesRect=i,this.container.setClipRect(i);for(const s of e.axes??[])s.direction===T0._ModuleSupport.ChartAxisDirection.X?this.xAxis=this.getAxis(s,i,this.xAxis?.button):this.yAxis=this.getAxis(s,i,this.yAxis?.button);this.showAnnotations()?this.animateAnnotations({from:0,to:1,phase:"trailing"}):this.animateAnnotations({from:1,to:0,phase:"remove"})}showAnnotations(){if(!this.yAxis||!this.xAxis)return!1;const e=this.ctx.chartService.series.some(n=>n.hasData),s=this.yAxis.context.seriesIds().some(n=>this.ctx.chartService.series.find(o=>o.id===n)?.visible);return e&&s}animateAnnotations({from:e,to:i,phase:s}){const{annotations:n}=this;this.ctx.animationManager?.animate({from:e,to:i,id:"chart-annotations",phase:s,groupId:"opacity",onUpdate(a){n.each(o=>{o.opacity=a,"setAxisLabelOpacity"in o&&o.setAxisLabelOpacity(a)})},onStop(){n.each(a=>{a.opacity=i,"setAxisLabelOpacity"in a&&a.setAxisLabelOpacity(i)})}})}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(e,i,s){const n=this.ctx.axisManager.getAxisContext(e.direction)[0],{position:a="bottom",direction:o}=n,r=e.gridPadding+e.seriesAreaPadding,l=new _at(0,0,i.width,i.height).grow(r,a),c=n.direction===wat.X?"vertical":"horizontal",{axesButtons:h,snap:u}=this;if(this.enabled&&h.enabled&&(h.axes==="xy"||h.axes===o)){s??(s=new zW(this.ctx,{...n,snapToGroup:u},g=>this.onAxisButtonClick(g,c),i));const p=WT(e);s.update(i,p)}else s?.destroy(),s=void 0;return{layout:e,context:n,bounds:l,button:s}}recordActionAfterNextUpdate(e,i=["annotations"]){const{defaults:s,ctx:{annotationManager:n,historyManager:a}}=this,o=i.map(r=>r==="defaults"?s:n);this.postUpdateFns.push(()=>{a.record(e,...o),n.fireChangedEvent()})}setColorAndDefault(e,i,s,n,a,o){this.state.transition("color",{colorPickerType:i,colorOpacity:s,color:n,opacity:a,isMultiColor:o}),this.defaults.setDefaultColor(e,i,s,n,a,o)}setFontSizeAndDefault(e,i){this.state.transition("fontSize",i),this.defaults.setDefaultFontSize(e,i),this.recordActionAfterNextUpdate(`Change ${e} font size to ${i}`,["annotations","defaults"])}setLineStyleTypeAndDefault(e,i){this.state.transition("lineStyle",{type:i}),this.defaults.setDefaultLineStyleType(e,i),this.recordActionAfterNextUpdate(`Change ${e} line style to ${i}`,["annotations","defaults"])}setLineStyleWidthAndDefault(e,i){this.state.transition("lineStyle",{strokeWidth:i}),this.defaults.setDefaultLineStyleWidth(e,i),this.recordActionAfterNextUpdate(`Change ${e} stroke width to ${i}`,["annotations","defaults"])}updateAnnotations(){const{annotationData:e,annotations:i,seriesRect:s,ctx:{annotationManager:n}}=this,a=this.getAnnotationContext();if(!s||!a)return;n.updateData(e.toJson().filter(r=>!sh(r)));const o=this.showAnnotations();this.toolbar.refreshButtonsEnabled(o),this.toolbar.toggleClearButtonEnabled(e.length>0&&o),i.update(e??[],void 0,r=>r.id).each((r,l)=>{if(!o){r.visible=!1,"setAxisLabelVisible"in r&&r.setAxisLabelVisible(!1);return}"setAxisLabelVisible"in r&&r.setAxisLabelVisible(!0),this.injectDatumDependencies(l),Iat(r,l,a)}),this.postUpdateFns.forEach(r=>r()),this.postUpdateFns=[]}getAnnotationContext(){const{seriesRect:e,xAxis:i,yAxis:s,snap:n}=this;if(e&&i&&s)return{seriesRect:e,xAxis:{...i.context,bounds:i.bounds,labelPadding:WT(i.layout),snapToGroup:n},yAxis:{...s.context,bounds:s.bounds,labelPadding:WT(i.layout),snapToGroup:n}}}onHover(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const n=e.sourceEvent.shiftKey,a=yd.from(e),o=Sn(a,s);i.transition("hover",{offset:a,point:o,shiftKey:n,context:s})}onClick(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const n=e.sourceEvent.shiftKey,a=Sn(yd.from(e),s),o=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("click",{point:a,shiftKey:n,textInputValue:o,bbox:r})}onDoubleClick(e){const{state:i}=this;if(!this.getAnnotationContext())return;const n=yd.from(e);i.transition("dblclick",{offset:n})}onAxisButtonClick(e,i){this.cancel(),this.reset();const s=this.getAnnotationContext();if(!this.annotationData||!s)return;const{state:n}=this;this.pushAnnotationState(Wn.Annotations);const a=i==="horizontal";if(n.transition(a?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!e)return;const o=Sn(e,s);iM(s,o)&&(n.transition("click",{point:o,shiftKey:!1}),this.update())}onResize(){const e=this.textInput.getValue(),i=this.textInput.getBBox();this.state.transition("resize",{textInputValue:e,bbox:i})}hoverTouchPreHandler(e){e.device==="touch"&&this.onHover(e)}dragMoveTouchPreHandler(e){e.device==="touch"&&this.ctx.interactionManager.isState(Wn.AnnotationsSelected)&&e.sourceEvent.preventDefault()}onDragStart(e){if(!this.ctx.interactionManager.isState(Wn.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const s=yd.from(e),n=Sn(s,i),a=this.textInput.getValue(),o=this.textInput.getBBox();this.state.transition("dragStart",{context:i,offset:s,point:n,textInputValue:a,bbox:o})}onDrag(e){if(!this.ctx.interactionManager.isState(Wn.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const s=yd.from(e),n=Sn(s,i),a=e.sourceEvent.shiftKey,o=this.textInput.getValue(),r=this.textInput.getBBox();this.state.transition("drag",{context:i,offset:s,point:n,shiftKey:a,textInputValue:o,bbox:r})}onDragEnd(){this.state.transition("dragEnd")}onCancel(e){const{sourceEvent:i}=e??{};i?.currentTarget===i?.target&&(this.cancel(),this.reset())}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const{key:n,shiftKey:a}=e,o=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("textInput",{key:n,shiftKey:a,textInputValue:o,bbox:r,context:s})}onKeyDown(e){const{state:i}=this,s=this.getAnnotationContext();if(!s)return;const{sourceEvent:n}=e,{shiftKey:a,ctrlKey:o,metaKey:r}=n,l=o||r,c=o||a;i.transition("keyDown",{shiftKey:a,context:s});const h={x:0,y:0},u=Math.max(s?.xAxis.scale.bandwidth??0,c?10:1),d=Math.max(s?.yAxis.scale.bandwidth??0,c?10:1);switch(n.key){case"ArrowDown":h.y=d;break;case"ArrowUp":h.y=-d;break;case"ArrowLeft":h.x=-u;break;case"ArrowRight":h.x=u;break;case"Escape":this.onCancel();return;case"Backspace":case"Delete":this.onDelete();return}if((h.x||h.y)&&(i.transition("translate",{translation:h}),n.stopPropagation(),n.preventDefault()),!!l)switch(n.key){case"c":i.transition("copy");return;case"x":i.transition("cut"),this.recordActionAfterNextUpdate("Cut annotation");return;case"v":i.transition("paste"),this.recordActionAfterNextUpdate("Paste annotation");return}}onKeyUp(e){const{shiftKey:i}=e.sourceEvent,s=this.getAnnotationContext();s&&(this.state.transition("keyUp",{shiftKey:i,context:s}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){for(const[e,i]of this.annotationData.entries())sh(i)&&this.annotationData.splice(e,1)}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}pushAnnotationState(e){this.ctx.interactionManager.pushState(e),this.ctx.tooltipManager.suppressTooltip("annotations")}popAnnotationState(e){this.ctx.interactionManager.popState(e),this.ctx.tooltipManager.unsuppressTooltip("annotations")}isAnnotationState(){return this.ctx.interactionManager.isState(Wn.Annotations)||this.ctx.interactionManager.isState(Wn.AnnotationsSelected)}update(e=Aat.PRE_SCENE_RENDER){this.ctx.updateService.update(e)}};m([Cat((t,e,i)=>{const{ctx:{annotationManager:s,stateManager:n}}=t;e!==i&&(t.toolbar?.toggleVisibility(!!e),i===!1&&e===!0?n.restoreState(s):e===!1&&t.clear())}),Yy],Pg.prototype,"enabled",2),m([Yy],Pg.prototype,"toolbar",2),m([Yy],Pg.prototype,"optionsToolbar",2),m([Yy],Pg.prototype,"axesButtons",2),m([Yy],Pg.prototype,"snap",2);var Eat=Pg,Pat=(E(),w(_)),{FONT_SIZE_RATIO:Rat,ThemeSymbols:_s}=Pat._ModuleSupport,lo={stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:2},Es={fill:_s.DEFAULT_ANNOTATION_HANDLE_FILL,strokeOpacity:1,strokeWidth:2},xd={color:{$ref:"backgroundColor"},fontSize:{$rem:[Rat.LARGE]},fontFamily:{$ref:"fontFamily"}},VW={...xd,enabled:!0,fill:{$ref:"foregroundColor"},fontSize:{$ref:"fontSize"}},mM={...xd,textAlign:"left"},bd={...xd,position:"top",alignment:"center",color:{$ref:"textColor"}},WW={...xd,position:"top",alignment:"center",color:{$ref:"textColor"}},HT={...xd,fontSize:{$ref:"fontSize"},color:_s.DEFAULT_ANNOTATION_STATISTICS_COLOR,fill:_s.DEFAULT_ANNOTATION_STATISTICS_FILL,stroke:_s.DEFAULT_ANNOTATION_STATISTICS_STROKE,strokeWidth:1,divider:{stroke:_s.DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE,strokeWidth:1,strokeOpacity:.5}},UT={...lo,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...Es},text:{...bd},statistics:{...HT}},Bat={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}],padding:{$ref:"padding"}},zat={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},Fat={enabled:!1,line:{...lo,handle:{...Es},text:{...bd}},"horizontal-line":{...lo,handle:{...Es},axisLabel:{...VW},text:{...bd}},"vertical-line":{...lo,handle:{...Es},axisLabel:{...VW},text:{...bd}},"disjoint-channel":{...lo,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...Es},text:{...WW}},"parallel-channel":{...lo,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...Es},text:{...WW}},"fibonacci-retracement":{...lo,strokes:_s.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...Es},text:{...bd,position:"center"},label:{...xd,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...lo,strokes:_s.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...Es},text:{...bd,position:"center"},label:{...xd,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...lo,...mM,color:{$ref:"textColor"},handle:{...Es},fill:{$ref:"foregroundColor"},fillOpacity:.075},comment:{...mM,fontWeight:700,handle:{...Es},fill:{$ref:"foregroundColor"}},note:{...mM,color:_s.DEFAULT_TEXTBOX_COLOR,fill:_s.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...Es},background:{fill:_s.DEFAULT_TEXTBOX_FILL,stroke:_s.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}},text:{...mM,color:{$ref:"textColor"},handle:{...Es}},arrow:{...lo,handle:{...Es},text:{...bd}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...Es,stroke:{$ref:"foregroundColor"}}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...Es,stroke:{$ref:"foregroundColor"}}},"date-range":{...UT},"price-range":{...UT},"date-price-range":{...UT},"quick-date-price-range":{up:{...lo,fill:_s.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2,handle:{...Es},statistics:{...HT,color:"#fff",fill:_s.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...lo,stroke:_s.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE,fill:_s.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,fillOpacity:.2,handle:{...Es,stroke:_s.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE},statistics:{...HT,color:"#fff",fill:_s.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{},toolbar:Bat,optionsToolbar:zat},jat={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Eat(t),themeTemplate:{annotations:Fat}},$T=(E(),w(_)),HW=(E(),w(_)),Gat=(R(),w(nt)),{BaseProperties:Vat,ObserveChanges:Wat,ProxyProperty:Hat,Property:vd,calculatePlacement:Uat}=HW._ModuleSupport,Br=class extends Vat{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),this.onLoad?.())},this.imageElement=(0,Gat.createElement)("img"),this.imageElement.onload=this.onImageLoad,this.node=new HW._ModuleSupport.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e;const i={width:t,height:e},s=Uat(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?{visible:!0,opacity:this.opacity,...s}:{visible:!1}),s}};m([vd],Br.prototype,"top",2),m([vd],Br.prototype,"right",2),m([vd],Br.prototype,"bottom",2),m([vd],Br.prototype,"left",2),m([vd],Br.prototype,"width",2),m([vd],Br.prototype,"height",2),m([vd],Br.prototype,"opacity",2),m([Hat("imageElement.src"),Wat(t=>t.loadedSynchronously=t.complete)],Br.prototype,"url",2);var{ActionOnSet:$at,Property:Kat}=$T._ModuleSupport,UW=class extends $T._ModuleSupport.Background{constructor(){super(...arguments),this.image=new Br}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update($T._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};m([Kat,$at({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],UW.prototype,"image",2);var Yat={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new UW(t)},zMt=(E(),w(_)),$W=(E(),w(_)),Zat=(R(),w(nt)),{ActionOnSet:Xat,LayoutElement:qat,Menu:Qat,Property:Jat}=$W._ModuleSupport,KT=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],KW=class extends $W._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.menu=new Qat(this.ctx,"chart-toolbar"),this.toolbar=t.sharedToolbar.getSharedToolbar("chartToolbar"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),t.layoutManager.registerElement(qat.ToolbarLeft,this.onLayoutStart.bind(this)),()=>this.toolbar.destroy())}onLayoutStart(t){this.enabled&&(this.updateButton(),this.toolbar.layout(t.layoutBox))}onButtonPressed({event:t,buttonBounds:e}){this.menu.setAnchor({x:e.x+e.width+6,y:e.y}),this.menu.show({items:KT,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:t.sourceEvent,onPress:i=>{this.setChartType(i.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){const t=this.getChartType(),e=KT.find(i=>i.value===t)?.icon;e!=null&&this.toolbar.updateButtons([{icon:e,tooltip:"toolbarSeriesTypeDropdown"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(t){const e={chartType:t};this.ctx.chartService.publicApi?.updateDelta(e).catch(i=>Zat.Logger.error(i))}getChartType(){const t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return t==null||!KT.some(e=>e.value===t)?"candlestick":t}};m([Jat,Xat({changeValue(t){this.toolbar?.setHidden(!t)}})],KW.prototype,"enabled",2);var tot={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new KW(t)},eot=(E(),w(_)),Sd=(E(),w(_)),Hl=(R(),w(nt)),iot=(R(),w(nt));function sot(t,e){return t==="always"?!0:t==="series-area"?e==="series-area"||e==="series-node":t===e}function YW(t,e,i){let s=!0;if(e.type==="separator"){const n=i.at(i.length-1);s=n!==void 0&&n.type!=="separator"}if(s&&(s=sot(e.showOn??"always",t)),s){const n=new aot(e);return i.push(n),n}}function ZW(t,e,i,s){e.isVisible(i)&&YW(t,e.builtins.items[i],s)}function not(t,e,i,s){const{builtins:n}=e;if((0,iot.isKeyOf)(i,n.lists))for(const a of n.lists[i])ZW(t,e,a,s);else ZW(t,e,i,s)}function YT(t,e,i,s){for(const n of i)if(typeof n=="string")not(t,e,n,s);else{const a=YW(t,n,s);n.items&&a&&n.items.length>0&&YT(t,e,n.items,a.items)}s[s.length-1]?.type==="separator"&&s.pop()}var aot=class{constructor(t){this.type="action",this.showOn="always",this.label="",this.iconUrl=void 0,this.enabled=!0,this.items=[],this.action=void 0,t&&this.setOptions(t),this.items=[]}setField(t,e,i){e[t]=i}setOptions(t){let e;for(e in t)t[e]!==void 0&&this.setField(e,this,t[e])}},Rg="ag-charts-context-menu",yM="ag-charts-dark-context-menu",{Deprecated:xM,Property:ZT,ContextMenuRegistry:Zy}=Sd._ModuleSupport,XT="context-menu",bM="Use [items] instead",mh=class extends Sd._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.items=["defaults"],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.closingSubMenus=0,this.menuWidget=new Sd._Widget.MenuWidget;const e=this;if(this.deprecationMap={extraActions:{get items(){return e.extraActions??[]},showOn:"always"},extraSeriesAreaActions:{get items(){return e.extraSeriesAreaActions??[]},showOn:"series-area"},extraNodeActions:{get items(){return e.extraNodeActions??[]},showOn:"series-node"},extraLegendItemActions:{get items(){return e.extraLegendItemActions??[]},showOn:"legend-item"}},this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.element=t.domManager.addChild("canvas-overlay",XT),this.element.classList.add(Rg),this.element.style.display="none",this.element.addEventListener("contextmenu",i=>i.preventDefault()),this.element.addEventListener("focusout",({relatedTarget:i})=>{this.closingSubMenus>0||(i==null||i instanceof Node&&!this.element.contains(i))&&this.hide()}),this.destroyFns.push(()=>this.element.parentNode?.removeChild(this.element),()=>this.menuWidget.destroy(),t.domManager.addListener("hidden",()=>this.hide()),this.menuWidget.addListener("close-widget",()=>this.onClose())),this.menuWidget.addClass(`${Rg}__menu`),typeof MutationObserver<"u"){const i=new MutationObserver(()=>{this.element.contains(this.menuWidget.getElement())&&this.reposition()});i.observe(this.element,{childList:!0}),this.mutationObserver=i,this.destroyFns.push(()=>i.disconnect())}this.ctx.contextMenuRegistry.builtins.items.download.action=()=>{const i=t.chartService.title;let s="image";i?.enabled&&i?.text!==void 0&&(s=i.text.replace(/\.+/,"")),this.ctx.chartService.publicApi?.download({fileName:s}).catch(n=>{Hl.Logger.error("Unable to download chart",n)})},this.destroyFns.push(this.registry.addListener("context-complete",i=>this.onContext(i)))}createDeprecatedAdaptorItems(){const t=[];for(const e of Object.keys(this.deprecationMap)){const{items:i,showOn:s}=this.deprecationMap[e];t.push("separator");for(const{action:n,label:a}of i){const o="action";t.push({type:o,showOn:s,enabled:!0,label:a,action:n})}}return t}expandItemsOptions(t){const e=[],i=this.createDeprecatedAdaptorItems();return YT(t,this.ctx.contextMenuRegistry,this.items,e),YT(t,this.ctx.contextMenuRegistry,i,e),e}onContext(t){if(!this.enabled)return;t.widgetEvent.sourceEvent.preventDefault(),this.showEvent=t.widgetEvent.sourceEvent,this.x=t.x,this.y=t.y,this.pickedNode=void 0,this.pickedLegendItem=void 0,Zy.check("series-node",t)?this.pickedNode=t.context.pickedNode:Zy.check("legend-item",t)&&(this.pickedLegendItem=t.context.legendItem);const e=this.expandItemsOptions(t.showOn);e.length!==0&&this.show(t.widgetEvent,e)}show(t,e){this.interactionManager.pushState(Sd._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(yM,this.darkTheme),this.element.style.display="block";const i=t.sourceEvent.pointerType==="touch"?!1:void 0;i!==void 0&&this.ctx.chartService.overrideFocusVisible(i),this.createMenu(e),this.element.appendChild(this.menuWidget.getElement()),this.menuWidget.open(t,{overrideFocusVisible:i})}hide(){this.menuWidget.close()}onClose(){this.interactionManager.popState(Sd._ModuleSupport.InteractionState.ContextMenu),this.element.removeChild(this.menuWidget.getElement()),this.element.style.display="none"}onSubMenuOpen(t,e){const i=t.getBounds();t.setFocusOverride(!0),t.getElement().insertAdjacentElement("afterend",e.getElement()),e.getElement().style.position="absolute";const s=this.ctx.domManager.getBoundingClientRect(),n=t.getBoundingClientRect(),a=s.right-n.right,o=n.left-s.left,{offsetWidth:r,offsetHeight:l}=e.getElement();let c=i.y;if(s.height>l){const h=s.bottom-n.top;h<l&&(c-=l-h)}if(a>=r)e.setBounds({x:i.x+i.width,y:c});else{const h=i.x-r,u=o+h;u>=0?e.setBounds({x:h,y:c}):e.setBounds({x:h-u,y:c})}}onSubMenuClose(t,e){t.setFocusOverride(void 0),this.closingSubMenus++,e.remove(),this.closingSubMenus--}createMenu(t){const{menuWidget:e}=this;e.clear(),e.toggleClass(yM,this.darkTheme),e.setTabIndex(-1),this.createMenuItems(e,t)}createMenuItems(t,e){for(const i of e)switch(i.type){case"separator":const s=t.addSeparator();s.classList.add(`${Rg}__divider`),s.classList.toggle(yM,this.darkTheme),this.initTableCells(s);break;case"action":if(i.items.length===0){const n=new Sd._Widget.MenuItemWidget;this.initButtonElement(n,i),t.addChild(n)}else{const{subMenuButton:n,subMenu:a}=t.addSubMenu();a.addClass(`${Rg}__menu`),a.addListener("open-widget",()=>this.onSubMenuOpen(n,a)),a.addListener("close-widget",()=>this.onSubMenuClose(n,a)),this.initButtonElement(n,i),this.createMenuItems(a,i.items)}break;default:throw new Error("unhandled case")}}createButtonOnClick(t,e){return Zy.checkCallback("legend-item",t,e)?i=>{const s=i.sourceEvent;if(this.pickedLegendItem){const{seriesId:n,itemId:a}=this.pickedLegendItem;e({type:"contextmenu",seriesId:n,itemId:a,event:s}),this.hide()}else Hl.Logger.error("legend item not found")}:Zy.checkCallback("series-area",t,e)?()=>{e({type:"seriesContextMenuAction",event:this.showEvent}),this.hide()}:Zy.checkCallback("series-node",t,e)?()=>{const{pickedNode:i,showEvent:s}=this,n=i?.series.createNodeContextMenuActionEvent(s,i);n?e(n):Hl.Logger.error("series node not found"),this.hide()}:()=>{e({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}initTableCells(t){const e=(0,Hl.createElement)("div"),i=(0,Hl.createElement)("div"),s=(0,Hl.createElement)("div");return e.classList.toggle("ag-charts-context-menu__icon",!0),i.classList.toggle("ag-charts-context-menu__label",!0),s.classList.toggle("ag-charts-context-menu__rightarrowhead",!0),e.ariaHidden="true",i.role="presentation",s.ariaHidden="true",t.append(e,i,s),{cellIcon:e,cellLabel:i,cellArrow:s}}initButtonElement(t,e){t.addClass(`${Rg}__item`),t.toggleClass(yM,this.darkTheme),t.setEnabled(e.enabled);const i=this.ctx.localeManager.t(e.label),s=`${Rg}__cellpadding`,{cellIcon:n,cellLabel:a,cellArrow:o}=this.initTableCells(t.getElement());if(a.textContent=i,a.classList.add(s),e.iconUrl!=null){const c=(0,Hl.createElement)("img");c.src=e.iconUrl,n.append(c),n.classList.add(s)}e.items.length>0&&(o.textContent="\u276F",o.classList.add(s));const{showOn:r,action:l}=e;if(l!=null){const c=this.createButtonOnClick(r,l);t.addListener("click",c),t.addListener("keydown",h=>{Sd._ModuleSupport.isButtonClickEvent(h.sourceEvent)&&(h.sourceEvent.preventDefault(),c(h))})}t.addListener("mousemove",()=>t.focus({preventScroll:!0}))}reposition(){let{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:s,offsetHeight:n}=this.element;t=(0,Hl.clamp)(0,t,i.width-s),e=(0,Hl.clamp)(0,e,i.height-n),this.element.style.left=`${t}px`,this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){super.destroy(),this.mutationObserver?.disconnect(),this.ctx.domManager.removeStyles(XT),this.ctx.domManager.removeChild("canvas-overlay",XT)}};m([ZT],mh.prototype,"enabled",2),m([ZT],mh.prototype,"darkTheme",2),m([ZT],mh.prototype,"items",2),m([xM(bM)],mh.prototype,"extraActions",2),m([xM(bM)],mh.prototype,"extraNodeActions",2),m([xM(bM)],mh.prototype,"extraSeriesAreaActions",2),m([xM(bM)],mh.prototype,"extraLegendItemActions",2);var oot={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsKey:"contextMenu",moduleFactory:t=>new mh(t),themeTemplate:{contextMenu:{enabled:!0,darkTheme:eot._ModuleSupport.ThemeSymbols.IS_DARK_THEME}}},FMt=(E(),w(_)),Bg=(E(),w(_)),XW=(R(),w(nt)),qT=(E(),w(_)),qW=(R(),w(nt)),{BaseProperties:rot,Property:zr}=qT._ModuleSupport,lot="ag-charts-crosshair-label",zg=class extends qT._ModuleSupport.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};m([zr],zg.prototype,"enabled",2),m([zr],zg.prototype,"xOffset",2),m([zr],zg.prototype,"yOffset",2),m([zr],zg.prototype,"format",2),m([zr],zg.prototype,"renderer",2);var Fg=class extends rot{constructor(t,e,i){super(),this.domManager=t,this.id=(0,qW.createId)(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=t.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(lot),(0,qW.setAttribute)(this.element,"aria-hidden",!0),this.element.setAttribute("data-key",e),this.element.setAttribute("data-axis-id",i)}show(t){const{element:e}=this,i=t.x+this.xOffset,s=t.y+this.yOffset;e.style.top=`${Math.round(s)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml({html:t,styles:e}){t!==void 0&&(this.element.innerHTML=t),e!==void 0&&Object.assign(this.element.style,e)}getBBox(){const{element:t}=this;return new qT._ModuleSupport.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}toggle(t){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!t)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(t,e){if(typeof t=="string")return{html:t,styles:{}};e=e??{};const{text:i=e.text??"",color:s=e.color,backgroundColor:n=e.backgroundColor,opacity:a=e.opacity??1}=t,o={opacity:a,"background-color":n?.toLowerCase(),color:s};return{html:`<div class="ag-charts-crosshair-label-content">
                    <span>${i}</span>
                </div>`,styles:o}}};m([zr],Fg.prototype,"enabled",2),m([zr],Fg.prototype,"xOffset",2),m([zr],Fg.prototype,"yOffset",2),m([zr],Fg.prototype,"format",2),m([zr],Fg.prototype,"renderer",2);var{Group:cot,TranslatableGroup:hot,Line:QW,BBox:JW,InteractionState:vM,Property:yh,ZIndexMap:t3,formatNumber:uot,ChartAxisDirection:e3}=Bg._ModuleSupport,Ul=class extends Bg._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=(0,XW.createId)(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new zg,this.seriesRect=new JW(0,0,0,0),this.bounds=new JW(0,0,0,0),this.crosshairGroup=new hot({name:"crosshairs",zIndex:t3.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new cot({name:`${this.id}-crosshair-lines`,zIndex:t3.SERIES_CROSSHAIR})),this.lineGroupSelection=Bg._ModuleSupport.Selection.select(this.lineGroup,QW,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.labels={},this.hideCrosshairs(),t.domManager.addEventListener("focusin",({target:e})=>{const i=e instanceof HTMLElement&&t.domManager.contains(e,"series-area");this.crosshairGroup.visible&&!i&&(this.hideCrosshairs(),this.ctx.updateService.update(Bg._ModuleSupport.ChartUpdateType.PERFORM_LAYOUT))}),this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),t.widgets.seriesWidget.addListener("mousemove",e=>this.onMouseHoverLike(e)),t.widgets.seriesWidget.addListener("drag-move",e=>this.onMouseHoverLike(e)),t.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseOut()),t.widgets.seriesDragInterpreter.addListener("click",e=>this.onClick(e)),t.chartEventManager.addListener("series-focus-change",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.onMouseOut()),t.zoomManager.addListener("zoom-change",()=>this.onMouseOut()),t.highlightManager.addListener("highlight-change",e=>this.onHighlightChange(e)),t.layoutManager.addListener("layout:complete",e=>this.layout(e)),()=>Object.values(this.labels).forEach(e=>e.destroy()))}layout({series:{rect:t,visible:e},axes:i}){if(!e||!i||!this.enabled)return;this.seriesRect=t;const{position:s="left",axisId:n}=this.axisCtx,a=i.find(c=>c.id===n);if(!a)return;this.axisLayout=a,this.bounds=t.clone().grow(a.gridPadding+a.seriesAreaPadding,s);const{crosshairGroup:o,bounds:r}=this;o.translationX=Math.round(r.x),o.translationY=Math.round(r.y);const l=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(l),this.updateLines(),this.updateLabels(l)}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new QW),e=>e)}updateLabels(t){const{labels:e,ctx:i}=this;for(const s of t)this.label.enabled&&(e[s]??(e[s]=new Fg(i.domManager,s,this.axisCtx.axisId))),e[s]&&this.updateLabel(e[s]);this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(t){const{enabled:e,xOffset:i,yOffset:s,format:n,renderer:a}=this.label;t.enabled=e,t.xOffset=i,t.yOffset=s,t.format=n,t.renderer=a}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,axisLayout:r}=this;if(!r)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=s,c.strokeOpacity=n,c.lineDash=a,c.lineDashOffset=o,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction===e3.X}isHover(t){return t.type==="mousemove"||t.type==="click"||t.device==="touch"&&this.ctx.chartService.touch.dragAction==="hover"}formatValue(t){const{labelFormatter:e,axisLayout:i}=this;if(e){const s=this.cachedCallWithContext(e,t);if(s!=null)return s}if(typeof t=="number"){const s=(i?.label.fractionDigits??0)+((0,XW.isInteger)(t)?0:1);return uot(t,s)}return String(t??"")}onClick(t){t.device==="touch"&&this.onMouseHoverLike(t)}onMouseHoverLike(t){if(!this.enabled||this.snap)return;const e=this.isHover(t)?vM.Clickable:vM.AnnotationsMoveable;this.ctx.interactionManager.isState(e)&&(this.updatePositions(this.getData(t)),this.crosshairGroup.visible=!0,this.ctx.updateService.update(Bg._ModuleSupport.ChartUpdateType.SCENE_RENDER))}onMouseOut(){this.ctx.interactionManager.isState(vM.Clickable)&&(this.hideCrosshairs(),this.ctx.updateService.update(Bg._ModuleSupport.ChartUpdateType.SCENE_RENDER))}onKeyPress(){this.enabled&&!this.snap&&this.ctx.interactionManager.isState(vM.Default)&&this.hideCrosshairs()}onHighlightChange(t){if(!this.enabled)return;const{crosshairGroup:e,axisCtx:i}=this,{datum:s,series:n}=t.currentHighlight??{},a=s&&(n?.axes.x?.id===i.axisId||n?.axes.y?.id===i.axisId);if(this.activeHighlight=a?t.currentHighlight:void 0,!this.activeHighlight)this.hideCrosshairs();else if(this.snap){const o=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(o),e.visible=!0}}isInRange(t){return this.axisCtx.inRange(t)}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((s,n)=>{const a=t[n];if(!a){s.visible=!1,this.hideLabel(n);return}s.visible=!0;const{value:o,position:r}=a;let l=0,c=0;this.isVertical()?(l=r,s.x=Math.round(l)):(c=r,s.y=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,o,n):this.hideLabel(n)})}getData(t){const{axisCtx:e}=this,i="pointer",{datum:s,xKey:n="",yKey:a=""}=this.activeHighlight??{},{currentX:o,currentY:r}=t,l=this.isVertical(),c=l?o:r;let h=s?.[l?n:a]??"";return e.continuous&&(h=e.scaleInvert(c)),{[i]:{position:c,value:h}}}getActiveHighlightData(t){const{axisCtx:e}=this,{datum:i,series:s,xKey:n="",aggregatedValue:a,cumulativeValue:o,midPoint:r}=t,l=s.getKeyProperties(e.direction),c=(e.scale.bandwidth??0)/2,h=s.axes[e.direction]?.id===e.axisId,u=l.indexOf("yKey")>-1&&h,d=l.indexOf("xKey")>-1&&h,p=a??o;if(u&&p!==void 0){const f=e.scale.convert(p)+c;return this.isInRange(f)?{yKey:{value:p,position:f}}:{}}if(d){const f=(this.isVertical()?r?.x:r?.y)??0,x=e.continuous?e.scaleInvert(f):i[n];return this.isInRange(f)?{xKey:{value:x,position:f}}:{}}const g={};return l.forEach(f=>{const x=s.properties[f],y=i[x],b=e.scale.convert(y)+c;this.isInRange(b)&&(g[f]={value:y,position:b})}),g}getLabelHtml(t,e){const i=this.axisLayout?.label?.fractionDigits??0,s={text:this.formatValue(t)};return this.label.renderer?e.toLabelHtml(this.label.renderer({value:t,fractionDigits:i}),s):e.toLabelHtml(s)}showLabel(t,e,i,s){if(!this.axisLayout)return;const{bounds:n}=this,a=this.labels[s],o=this.getLabelHtml(i,a);a.setLabelHtml(o);const{width:r,height:l}=a.getBBox(),c=this.axisCtx.position;let h=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===e3.X?(h-=4,a.show({x:t-r/2,y:c==="bottom"?n.y+n.height+h:n.y-l-h})):(h-=8,a.show({x:c==="right"?n.x+n.width+h:n.x-r-h,y:e-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t of Object.keys(this.labels))this.hideLabel(t)}hideLabel(t){this.labels[t]?.toggle(!1)}cachedCallWithContext(t,...e){const{callbackCache:i,chartService:s}=this.ctx;return i.call(this.axisCtx,s,t,...e)}};m([yh],Ul.prototype,"enabled",2),m([yh],Ul.prototype,"stroke",2),m([yh],Ul.prototype,"lineDash",2),m([yh],Ul.prototype,"lineDashOffset",2),m([yh],Ul.prototype,"strokeWidth",2),m([yh],Ul.prototype,"strokeOpacity",2),m([yh],Ul.prototype,"snap",2),m([yh],Ul.prototype,"label",2);var dot={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","unit-time","number","log","time"],moduleFactory:t=>new Ul(t),themeTemplate:{crosshair:{snap:!0,stroke:{$ref:"subtleTextColor"},strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},i3=(E(),w(_)),{ActionOnSet:Xy,Property:s3}=i3._ModuleSupport,jg=class extends i3._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};m([Xy({newValue(t){this.updateCallback(t,this.getData)}}),s3],jg.prototype,"enabled",2),m([Xy({newValue(t){this.updateCallback(this.enabled,t)}}),s3],jg.prototype,"getData",2),m([Xy({newValue(t){this.dataService.requestThrottle=t}})],jg.prototype,"requestThrottle",2),m([Xy({newValue(t){this.dataService.dispatchThrottle=t}})],jg.prototype,"updateThrottle",2),m([Xy({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],jg.prototype,"updateDuringInteraction",2);var pot={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new jg(t),themeTemplate:{dataSource:{enabled:!1}}},got=(E(),w(_)),qy=(E(),w(_)),Mn=(R(),w(nt)),Qy=(E(),w(_)),{nearestSquaredInContainer:fot,partialAssign:mot,mergeDefaults:n3,BBox:$l}=Qy._ModuleSupport,yot=class{constructor(t){this.components=t,this.union=$l.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},xot=class extends Qy._ModuleSupport.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new Qy._ModuleSupport.Path,this.capsPath=new Qy._ModuleSupport.Path,this.bboxes=new yot([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:s}=t,{lengthRatioMultiplier:n,lengthMax:a}=e,o=s??i*n;return Math.min(o,a)}getItemStylerParams(t,e,i){const{datum:s}=this;if(s==null||t.itemStyler==null)return;const{xLowerKey:n,xUpperKey:a,yLowerKey:o,yUpperKey:r}=t;return{...e,datum:s.datum,seriesId:s.datum.seriesId,xKey:s.xKey,yKey:s.yKey,xLowerKey:n,xUpperKey:a,yLowerKey:o,yUpperKey:r,highlighted:i}}formatStyles(t,e,i,s){let{cap:n,...a}=t;const o=this.getItemStylerParams(e,t,s);if(o!=null&&e.itemStyler!=null){const r=i.callWithContext(e.itemStyler,o);a=n3(r,a),n=n3(r?.cap,r,n)}return{whiskerStyle:a,capsStyle:n}}applyStyling(t,e){mot(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i,s){if(this.datum===void 0)return;const{whiskerStyle:n,capsStyle:a}=this.formatStyles(t,e,i,s),{xBar:o,yBar:r,capDefaults:l}=this.datum,c=this.whiskerPath;this.applyStyling(c,n),c.path.clear(!0),r!==void 0&&(c.path.moveTo(r.lowerPoint.x,r.lowerPoint.y),c.path.lineTo(r.upperPoint.x,r.upperPoint.y)),o!==void 0&&(c.path.moveTo(o.lowerPoint.x,o.lowerPoint.y),c.path.lineTo(o.upperPoint.x,o.upperPoint.y)),c.path.closePath(),this.capLength=this.calculateCapLength(a??{},l);const h=this.capLength/2,u=this.capsPath;this.applyStyling(u,a),u.path.clear(!0),r!==void 0&&(u.path.moveTo(r.lowerPoint.x-h,r.lowerPoint.y),u.path.lineTo(r.lowerPoint.x+h,r.lowerPoint.y),u.path.moveTo(r.upperPoint.x-h,r.upperPoint.y),u.path.lineTo(r.upperPoint.x+h,r.upperPoint.y)),o!==void 0&&(u.path.moveTo(o.lowerPoint.x,o.lowerPoint.y-h),u.path.lineTo(o.lowerPoint.x,o.lowerPoint.y+h),u.path.moveTo(o.upperPoint.x,o.upperPoint.y-h),u.path.lineTo(o.upperPoint.x,o.upperPoint.y+h)),u.path.closePath()}updateBBoxes(){const{capLength:t,whiskerPath:e,capsPath:i}=this,{yBar:s,xBar:n}=this.datum??{},a=t/2,o=[];if(s!==void 0){const r=s.lowerPoint.y-s.upperPoint.y;o.push(new $l(s.lowerPoint.x,s.upperPoint.y,e.strokeWidth,r),new $l(s.lowerPoint.x-a,s.lowerPoint.y,t,i.strokeWidth),new $l(s.upperPoint.x-a,s.upperPoint.y,t,i.strokeWidth))}if(n!==void 0){const r=n.upperPoint.x-n.lowerPoint.x;o.push(new $l(n.lowerPoint.x,n.upperPoint.y,r,e.strokeWidth),new $l(n.lowerPoint.x,n.lowerPoint.y-a,i.strokeWidth,t),new $l(n.upperPoint.x,n.upperPoint.y-a,i.strokeWidth,t))}this.bboxes.components=o,this.bboxes.union=$l.merge(o)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:s}=this;if(s.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:n}=$l.nearestBox(t,e,s.components);return{nearest:this,distanceSquared:n}}},bot=class extends Qy._ModuleSupport.Group{nearestSquared(t,e){const{nearest:i,distanceSquared:s}=fot(t,e,{children:this.children()});if(i!==void 0&&!isNaN(s))return{datum:i.datum,distanceSquared:s}}},vot=(E(),w(_)),{BaseProperties:a3,Property:Qe}=vot._ModuleSupport,Kl=class extends a3{};m([Qe],Kl.prototype,"visible",2),m([Qe],Kl.prototype,"stroke",2),m([Qe],Kl.prototype,"strokeWidth",2),m([Qe],Kl.prototype,"strokeOpacity",2),m([Qe],Kl.prototype,"lineDash",2),m([Qe],Kl.prototype,"lineDashOffset",2),m([Qe],Kl.prototype,"length",2),m([Qe],Kl.prototype,"lengthRatio",2);var Ps=class extends a3{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new Kl}};m([Qe],Ps.prototype,"yLowerKey",2),m([Qe],Ps.prototype,"yLowerName",2),m([Qe],Ps.prototype,"yUpperKey",2),m([Qe],Ps.prototype,"yUpperName",2),m([Qe],Ps.prototype,"xLowerKey",2),m([Qe],Ps.prototype,"xLowerName",2),m([Qe],Ps.prototype,"xUpperKey",2),m([Qe],Ps.prototype,"xUpperName",2),m([Qe],Ps.prototype,"visible",2),m([Qe],Ps.prototype,"stroke",2),m([Qe],Ps.prototype,"strokeWidth",2),m([Qe],Ps.prototype,"strokeOpacity",2),m([Qe],Ps.prototype,"lineDash",2),m([Qe],Ps.prototype,"lineDashOffset",2),m([Qe],Ps.prototype,"itemStyler",2),m([Qe],Ps.prototype,"cap",2);var{fixNumericExtent:Sot,groupAccumulativeValueProperty:Mot,mergeDefaults:Dot,valueProperty:SM,ChartAxisDirection:QT}=qy._ModuleSupport;function kot(t){for(const e of qy.AgErrorBarSupportedSeriesTypes)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${qy.AgErrorBarSupportedSeriesTypes.join(", ")}`)}var Iot=class zx extends qy._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.properties=new Ps;const i=kot(e),{annotationGroup:s,annotationSelections:n}=i;this.cartesianSeries=i,this.groupNode=new bot({name:`${s.id}-errorBars`}),s.appendChild(this.groupNode),this.selection=qy._ModuleSupport.Selection.select(this.groupNode,()=>this.errorBarFactory()),n.add(this.selection),i.addEventListener("seriesVisibilityChange",a=>this.onToggleSeriesItem(a)),this.destroyFns.push(i.addListener("data-processed",a=>this.onDataProcessed(a)),i.addListener("data-update",a=>this.onDataUpdate(a)),e.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>s.removeChild(this.groupNode),()=>n.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:n}=this.properties;return(0,Mn.isDefined)(e)&&(0,Mn.isDefined)(i)||(0,Mn.isDefined)(s)&&(0,Mn.isDefined)(n)}isStacked(){const e=this.cartesianSeries.seriesGrouping?.stackCount;return e==null?!1:e>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:o,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:h}=e;return a!=null&&o!=null&&i.push(SM(a,h,{id:`${l}-lower`}),SM(o,h,{id:`${l}-upper`})),s!=null&&n!=null&&i.push(SM(s,c,{id:`${r}-lower`}),SM(n,c,{id:`${r}-upper`})),i}getStackPropertyDefinition(e){const i=[],{cartesianSeries:s}=this,{xLowerKey:n,xUpperKey:a,yLowerKey:o,yUpperKey:r,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:h,yScaleType:u}=e,d=s.seriesGrouping?.groupIndex??s.id,p={invalidValue:null,missingValue:0,separateNegative:!0,...s.visible?{}:{forceValue:0}},g=(x,y,b,v)=>Mot(x,"normal","current",{id:`${y}-${b}`,groupId:`errorGroup-${d}-${b}`,...p},v),f=(x,y,b,v)=>{i.push(...g(x,b,"lower",v),...g(y,b,"upper",v))};return o!=null&&r!=null&&f(o,r,c,u),n!=null&&a!=null&&f(n,a,l,h),i}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:s,xErrorsID:n,yLowerKey:a,yUpperKey:o,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===QT.X?(0,Mn.isDefined)(i)&&(0,Mn.isDefined)(s):(0,Mn.isDefined)(a)&&(0,Mn.isDefined)(o)){const{dataModel:c,processedData:h,cartesianSeries:u}=this;if(c!=null&&h!=null){const d={x:n,y:r}[e],p=c.getDomain(u,`${d}-lower`,"value",h),g=c.getDomain(u,`${d}-upper`,"value",h),f=[Math.min(...p,...g),Math.max(...p,...g)];return Sot(f)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,(0,Mn.isDefined)(e.dataModel)&&(0,Mn.isDefined)(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){return this.hasErrorBars()?this.cartesianSeries.contextNodeData?.nodeData:void 0}createNodeData(){const e=this.getNodeData(),i=this.cartesianSeries.axes[QT.X]?.scale,s=this.cartesianSeries.axes[QT.Y]?.scale;if(!(!i||!s||!e))for(let n=0;n<e.length;n++){const{midPoint:a,xLower:o,xUpper:r,yLower:l,yUpper:c}=this.getDatum(e,n);if(a!=null){let h,u;(0,Mn.isDefined)(o)&&(0,Mn.isDefined)(r)&&(h={lowerPoint:{x:this.convert(i,o),y:a.y},upperPoint:{x:this.convert(i,r),y:a.y}}),(0,Mn.isDefined)(l)&&(0,Mn.isDefined)(c)&&(u={lowerPoint:{x:a.x,y:this.convert(s,l)},upperPoint:{x:a.x,y:this.convert(s,c)}}),e[n].xBar=h,e[n].yBar=u}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:n}=this.properties,[a,o]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,s]=[s,e],[i,n]=[n,i],[a,o]=[o,a]),{xLowerKey:e,xUpperKey:i,xErrorsID:a,yLowerKey:s,yUpperKey:n,yErrorsID:o}}static getDatumKey(e,i,s){if(i==null)return;const n=e.datum[i];if(n!=null){if(typeof n!="number"){Mn.Logger.warnOnce(`Found [${i}] error value of type ${typeof n}. Expected number type`);return}return n+s}}getDatum(e,i){const{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:o}=this.getMaybeFlippedKeys(),r=e[i],l=r.cumulativeValue==null||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:zx.getDatumKey(r,s,c),xUpper:zx.getDatumKey(r,n,c),yLower:zx.getDatumKey(r,a,h),yUpper:zx.getDatumKey(r,o,h)}}convert(e,i){const s=(e.bandwidth??0)/2;return e.convert(i)+s}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,s,n)=>this.updateNode(i,s,n)))}updateNode(e,i,s){e.datum=i,e.update(this.getDefaultStyle(),this.properties,this.cartesianSeries,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:s}=e,n=this.groupNode.pickNode(i,s);if(n!=null)return{datum:n.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:n,xLowerName:a=e,xUpperName:o=i,yLowerName:r=s,yUpperName:l=n}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:i,xUpperName:o,yLowerKey:s,yLowerName:r,yUpperKey:n,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.visible}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:Dot(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,s){const n=this.getNodeData();if(n!=null){for(let a=0;a<n.length;a++)if(e===n[a]){this.selection.at(a)?.update(i,this.properties,this.cartesianSeries,s);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:s}=e;s?.series===this.cartesianSeries&&this.restyleHighlightChange(s,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new xot}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}=this.properties;return{stroke:e,strokeWidth:i,visible:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}}},jMt=(E(),w(_)),Aot={series:{errorBar:{visible:!0,stroke:{$ref:"foregroundColor"},strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},Cot={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:got.AgErrorBarSupportedSeriesTypes,moduleFactory:t=>new Iot(t),themeTemplate:Aot},MM=(E(),w(_)),{ZIndexMap:Lot,ActionOnSet:wot,Property:JT,ProxyPropertyOnWrite:o3}=MM._ModuleSupport,DM=class extends MM._ModuleSupport.Background{constructor(){super(...arguments),this.image=new Br,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new MM._ModuleSupport.Group({name:"foreground",zIndex:Lot.FOREGROUND})}onLayoutComplete(t){super.onLayoutComplete(t);const{width:e,height:i}=t.chart;let s={x:0,y:0,width:e,height:i};this.image&&(s=this.image.performLayout(e,i)),this.text&&this.updateTextNode(s)}onImageLoad(){this.ctx.updateService.update(MM._ModuleSupport.ChartUpdateType.SCENE_RENDER)}updateTextNode(t){const{textNode:e}=this;e.fontWeight="bold",e.fontFamily="Impact, sans-serif",e.fontSize=19,e.opacity=.7,e.fill="#9b9b9b",e.textBaseline="top";const i=this.textNode.getBBox(),s=10;e.x=t.x+t.width/2-i.width/2,e.y=t.y+t.height+s}};m([JT,wot({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],DM.prototype,"image",2),m([JT,o3("rectNode","fill")],DM.prototype,"fill",2),m([JT,o3("rectNode","fillOpacity")],DM.prototype,"fillOpacity",2);var Tot={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new DM(t)},GMt=(E(),w(_)),tN=(E(),w(_)),kM=(R(),w(nt)),r3=(E(),w(_)),l3=(R(),w(nt)),Not=(E(),w(_)),{TranslatableGroup:Oot,SceneChangeDetection:c3}=Not._ModuleSupport,eN=class extends Oot{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(t,e){const{cornerRadius:i,inset:s}=this,{x:n,y:a,width:o,height:r}=e;t.beginPath(),t.roundRect(n+s,a+s,o-2*s,r-2*s,i),t.clip()}};m([c3()],eN.prototype,"inset",2),m([c3()],eN.prototype,"cornerRadius",2);var{Property:iN,ZIndexMap:Md,ActionOnSet:h3,CategoryAxis:_ot,TextUtils:Eot,Padding:Pot,Group:Dd,BBox:u3,ProxyProperty:d3}=r3._ModuleSupport,sN=class{constructor(){this.top=0,this.bottom=0}};m([iN],sN.prototype,"top",2),m([iN],sN.prototype,"bottom",2);var Gg=class extends r3._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new sN,this.root=new Dd({name:"root"}),this.seriesRoot=this.root.appendChild(new eN({name:"Series-root",zIndex:Md.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new Dd({name:"Axes-Grids",zIndex:Md.AXIS_GRID})),this.axisGroup=this.root.appendChild(new Dd({name:"Axes-Grids",zIndex:Md.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new Dd({name:"Axes-Labels",zIndex:Md.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new Dd({name:"Axes-Crosslines-Range",zIndex:Md.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new Dd({name:"Axes-Crosslines-Line",zIndex:Md.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new Dd({name:"Axes-Crosslines-Label",zIndex:Md.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){const i=e?.filter(s=>!t.includes(s))??[];this.destroySeries(i);for(const s of t){if(e?.includes(s))continue;s.attachSeries(this.seriesRoot,this.seriesRoot,void 0);const n=this;s.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return n.seriesRect}},s.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.detachSeries(this.seriesRoot,this.seriesRoot,void 0),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{const i=e.direction;(t[i]??(t[i]=[])).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const s=t[i];if(!s){l3.Logger.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const n=e.getKeys(i),a=this.findMatchingAxis(s,n);if(!a){l3.Logger.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`);return}e.axes[i]=a})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const s of e)if(i.keys.includes(s))return i}}}updateData(t){this.series.forEach(e=>e.setChartData(t)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})}async processData(t){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),await Promise.all(this.series.map(e=>(e.resetDatumCallbackCache(),e.processData(t))));for(const e of this.axes)e.processData()}computeAxisPadding(){const t=new Pot;return this.enabled&&this.axes.forEach(({position:e,thickness:i,line:s,label:n})=>{if(e==null)return;let a;i?a=i:a=(s.enabled?s.width:0)+(n.enabled?Eot.getLineHeight(n.fontSize??0)+n.spacing:0),t[e]=Math.ceil(a)}),t}async layout(t,e){const{padding:i}=this,s=this.seriesRect!=null,n=new u3(0,0,t,e-(i.top+i.bottom));this.seriesRect=n,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectCanvasSpace(new u3(0,-i.top,t,e)),this.axes.forEach(a=>{const{position:o="left"}=a;switch(o){case"top":case"bottom":a.range=[0,n.width],a.gridLength=n.height;break;case"right":case"left":{const r=a instanceof _ot;a.range=r?[0,n.height]:[n.height,0],a.gridLength=n.width;break}}a.gridPadding=0,a.translation.x=0,a.translation.y=0,o==="right"?a.translation.x=t:o==="bottom"&&(a.translation.y=e),s||a.resetAnimation("initial"),a.calculateLayout(),a.update()}),await Promise.all(this.series.map(a=>a.update({seriesRect:n})))}};m([iN],Gg.prototype,"enabled",2),m([d3(["seriesRoot","inset"])],Gg.prototype,"inset",2),m([d3(["seriesRoot","cornerRadius"])],Gg.prototype,"cornerRadius",2),m([h3({changeValue(t,e=[]){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const s of e)t.includes(s)||(s.detachAxis(i),s.destroy());for(const s of t)e?.includes(s)||s.attachAxis(i)}})],Gg.prototype,"axes",2),m([h3({changeValue(t,e){this.onSeriesChange(t,e)}})],Gg.prototype,"series",2);var Rot=(E(),w(_)),Bot=(R(),w(nt)),{SliderWidget:p3}=Rot._ModuleSupport,zot=class{constructor(t,e){this.ctx=t,this.sliderHandlers=e,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=t,this.toolbar=t.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[t.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:-1/0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:2,ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,s]of["min","pan","max"].entries()){const n=this.sliders[i];n.step=p3.STEP_HUNDRETH,n.keyboardStep=p3.STEP_ONE,n.orientation="horizontal",n.setPreventsDefault(!1),n.addListener("drag-start",a=>this.onDragStart(i,a,s)),n.addListener("drag-move",a=>this.onDrag(n,a,s)),n.addListener("drag-end",()=>this.updateSliderRatios()),n.addListener("contextmenu",a=>this.onContextMenu(n,a))}this.sliders[0].addListener("change",()=>this.onMinSliderChange()),this.sliders[1].addListener("change",()=>this.onPanSliderChange()),this.sliders[2].addListener("change",()=>this.onMaxSliderChange()),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(t){this.toolbar.setHidden(!t)}updateZoom(){const{_min:t,_max:e}=this;if(!(t==null||e==null))return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e}})}updateBounds(t){this.toolbar.setBounds(t)}updateSliderBounds(t,e){this.sliders[t].setBounds(e)}updateMinMax(t,e){this._min=t,this._max=e,this.updateSliderRatios()}updateSliderRatios(){let{_min:t,_max:e}=this;t=Math.round(t*100)/100,e=Math.round(e*100)/100;const i=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e});this.sliders[0].setValueRatio(t),this.sliders[1].setValueRatio(t,{ariaValueText:i}),this.sliders[2].setValueRatio(e)}toCanvasOffsets(t){return{offsetX:this.dragStartX+t.originDeltaX}}moveToFront(t){if(t===1)return;const e=this.sliders[t],i=this.sliders[2-t];this.toolbar.moveChild(i,e.domIndex-1)}onDragStart(t,e,i){const s=this.sliders[t],n=this.toolbar.cssLeft(),a=s.cssLeft();this.dragStartX=n+a+e.offsetX,this.moveToFront(t),e.device==="touch"&&e.sourceEvent.preventDefault(),this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(e))}onDrag(t,e,i){e.device==="touch"&&e.sourceEvent.preventDefault(),this.sliderHandlers.onDrag(i,this.toCanvasOffsets(e))}onContextMenu(t,e){const{offsetX:i,offsetY:s}=e,{x:n,y:a}=this.toolbar.getBounds(),{x:o,y:r}=t.getBounds(),l=i+n+o,c=s+a+r;this.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:e,canvasX:l,canvasY:c},void 0)}onPanSliderChange(){const t=this.sliders[1].getValueRatio(),e=this._max-this._min;this._min=(0,Bot.clamp)(0,t,1-e),this._max=this._min+e,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}},g3=(E(),w(_)),{Property:IM,SceneChangeDetection:AM,BBox:Fot,ExtendedPath2D:jot}=g3._ModuleSupport,xh=class extends g3._ModuleSupport.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new jot}setCenter(t,e){this.dirtyPath=!0,(this.centerX!==t||this.centerY!==e)&&(this.centerX=t,this.centerY=e,this.markDirty("center"))}static align(t,e,i,s,n,a,o,r,l){const c=t.align(i+n*o)+l,h=c+t.align(i+n*o,n*(r-o))-2*l,u=t.align(s+a/2);t.setCenter(c,u),e.setCenter(h,u)}computeBBox(){const{centerX:t,centerY:e,width:i,height:s}=this,n=t-i/2,a=e-s/2;return new Fot(n,a,i,s)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}updatePath(){const{centerX:t,centerY:e,path:i,gripPath:s,strokeWidth:n,cornerRadius:a,grip:o}=this,r=n/2,l=this.layerManager?.canvas?.pixelRatio??1;i.clear(),s.clear();const c=Math.floor(this.width/2*l)/l,h=Math.floor(this.height/2*l)/l;i.roundRect(t-c+r,e-h+r,2*(c-r),2*(h-r),a);const u=3;if(o)for(let d=-.5;d<=.5;d+=1)for(let p=-1;p<=1;p+=1)s.arc(t+d*u,e+p*u,1,0,2*Math.PI),s.closePath()}renderFill(t,e){const{stroke:i}=this;super.renderFill(t,e),t.fillStyle=typeof i=="string"?i:"black",t.fill(this.gripPath.getPath2D())}};xh.className="RangeHandle",m([IM,AM()],xh.prototype,"width",2),m([IM,AM()],xh.prototype,"height",2),m([IM,AM()],xh.prototype,"cornerRadius",2),m([IM,AM()],xh.prototype,"grip",2);var Got=(E(),w(_)),{Path:Vot,BBox:Jy,ExtendedPath2D:Wot,clippedRoundRect:nN,Property:Hot,SceneChangeDetection:Uot}=Got._ModuleSupport,aN=class extends Vot{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new Wot}layout(t,e,i,s,n,a){n=isNaN(n)?this.min:n,a=isNaN(a)?this.max:a,(t!==this.x||e!==this.y||i!==this.width||this.height!==s||n!==this.min||a!==this.max)&&(this.x=t,this.y=e,this.width=i,this.height=s,this.min=n,this.max=a,this.dirtyPath=!0,this.markDirty("RangeMask.layout"))}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new Jy(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:n,max:a}=this,o=t+i*n,r=t+i*a;return new Jy(o,e,r-o,s)}updatePath(){const{path:t,visiblePath:e,x:i,y:s,width:n,height:a,min:o,max:r,strokeWidth:l,cornerRadius:c}=this,h=l/2;t.clear(),e.clear();const u=this.align(i)+h,d=this.align(s)+h,p=this.align(i,n)-2*h,g=this.align(s,a)-2*h,f=this.align(i+n*o)+h,x=f+this.align(i+n*o,n*(r-o))-2*h,y={topLeft:c,topRight:c,bottomRight:c,bottomLeft:c};nN(t,u,d,p,g,y,new Jy(u,d,f-u,g)),nN(t,u,d,p,g,y,new Jy(x,d,p+u-x,g)),x-f>1&&nN(e,u,d,p,g,y,new Jy(f,d,x-f,g))}renderStroke(t,e){super.renderStroke(t,e),super.renderStroke(t,this.visiblePath.getPath2D())}};aN.className="RangeMask",m([Hot,Uot()],aN.prototype,"cornerRadius",2);var CM=(E(),w(_)),$ot=class extends CM._ModuleSupport.Group{constructor(t){super({name:"rangeSelectorGroup",zIndex:CM._ModuleSupport.ZIndexMap.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new CM._ModuleSupport.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(t)}layout(t,e,i,s,n,a){this.x=t,this.y=e,this.width=i,this.height=s,this.lOffset=n,this.rOffset=a,this.background.translationX=t,this.background.translationY=e,this.markDirty("RangeSelector")}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e),this.markDirty("RangeSelector")}computeBBox(){const{x:t,y:e,width:i,height:s,lOffset:n,rOffset:a}=this;return new CM._ModuleSupport.BBox(t-n,e,i+(n+a),s)}},{BaseModuleInstance:Kot,ObserveChanges:oN,Property:LM}=tN._ModuleSupport,Vg=class extends Kot{constructor(t){super(),this.ctx=t,this.enabled=!1,this.mask=new aN,this.minHandle=new xh,this.maxHandle=new xh,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,i)=>({x:e,y:i})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new $ot([this.mask,this.minHandle,this.maxHandle]),this.destroyFns.push(t.scene.attachNode(this.rangeSelector),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),this.ctx.layoutManager.registerElement(tN._ModuleSupport.LayoutElement.Navigator,e=>this.onLayoutStart(e)),this.ctx.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.zoomManager.addListener("zoom-change",e=>this.onZoomChange(e))),this.domProxy=new zot(t,this),this.updateGroupVisibility(),this.miniChart=new Gg(t)}updateBackground(t,e){this.rangeSelector?.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,this.domProxy.updateVisibility(t),t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(t){if(this.enabled){const{layoutBox:e}=t,i=this.height+this.spacing;e.shrink(i,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:e,bottom:i}=this.miniChart.computeAxisPadding();t.layoutBox.shrink(e+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}onLayoutComplete(t){const{x:e,width:i}=t.series.rect,{y:s,height:n}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:a,_max:o}=this.domProxy;this.layoutNodes(e,s,i,n,a,o),this.domProxy.updateBounds({x:e,y:s,width:i,height:n})}this.x=e,this.width=i,this.miniChart?.layout(i,n).catch(a=>kM.Logger.error(a))}canDrag(){return this.enabled&&this.ctx.interactionManager.isState(tN._ModuleSupport.InteractionState.ZoomDraggable)}onDragStart(t,{offsetX:e}){this.canDrag()&&(t==="pan"&&(this.panStart=(e-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(t,{offsetX:e}){if(!this.canDrag())return;const{panStart:i,x:s,width:n}=this,{minRange:a}=this.domProxy;let{_min:o,_max:r}=this.domProxy;const l=(e-s)/n;if(t==="min")o=(0,kM.clamp)(0,l,r-a);else if(t==="max")r=(0,kM.clamp)(o+a,l,1);else if(t==="pan"&&i!=null){const c=r-o;o=(0,kM.clamp)(0,l-i,1-c),r=o+c}this.domProxy._min=o,this.domProxy._max=r,this.updateZoom()}onZoomChange(t){const{x:e}=t;if(!e)return;const{x:i,y:s,width:n,height:a}=this,{min:o,max:r}=e;this.domProxy.updateMinMax(o,r),this.layoutNodes(i,s,n,a,o,r)}layoutNodes(t,e,i,s,n,a){const{rangeSelector:o,mask:r,minHandle:l,maxHandle:c}=this;r.layout(t,e,i,s,n,a),o.layout(t,e,i,s,l.width/2,c.width/2),xh.align(l,c,t,e,i,s,n,a,r.strokeWidth/2),n+(a-n)/2<.5?(l.zIndex=3,c.zIndex=4):(l.zIndex=4,c.zIndex=3),[l,this.maskVisibleRange,c].forEach((h,u)=>{const d=h.getBBox(),p={x:d.x-t,y:d.y-e,height:d.height,width:d.width};this.domProxy.updateSliderBounds(u,p)})}updateZoom(){this.enabled&&this.domProxy.updateZoom()}updateData(t){return this.miniChart?.updateData(t)}async processData(t){if(this.miniChart)return this.miniChart?.processData(t)}};m([oN((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],Vg.prototype,"miniChart",2),m([LM,oN((t,e)=>{t.ctx.zoomManager.setNavigatorEnabled(!!e),t.updateGroupVisibility()})],Vg.prototype,"enabled",2),m([LM],Vg.prototype,"height",2),m([LM,oN((t,e)=>{t.mask.cornerRadius=e})],Vg.prototype,"cornerRadius",2),m([LM],Vg.prototype,"spacing",2);var Yot=(E(),w(_)),Zot={enabled:!1,height:18,cornerRadius:4,mask:{fill:{$ref:"foregroundColor"},fillOpacity:.1,stroke:{$ref:"borderColor"},strokeWidth:1},minHandle:{fill:{$ref:"backgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:{$ref:"backgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:{$ref:"textColor"},fontSize:{$rem:[Yot._ModuleSupport.FONT_SIZE_RATIO.SMALLER]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:5},padding:{top:0,bottom:0}}},Xot={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Vg(t),removable:!1,themeTemplate:{navigator:Zot}},f3=(E(),w(_)),qot=(E(),w(_)),{ToolbarButtonProperties:Qot,Property:Jot}=qot._ModuleSupport,m3=class extends Qot{};m([Jot],m3.prototype,"value",2);var{ChartAxisDirection:rN,LayoutElement:trt,PropertiesArray:ert,Toolbar:irt,Property:y3}=f3._ModuleSupport,lN=class extends f3._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.buttons=new ert(m3),this.verticalSpacing=10,this.container=t.domManager.addChild("canvas-overlay","range-buttons"),this.container.role="presentation",this.toolbar=new irt(this.ctx.localeManager),this.toolbar.addClass("ag-charts-range-buttons"),this.container.append(this.toolbar.getElement()),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),t.layoutManager.registerElement(trt.ToolbarBottom,this.onLayoutStart.bind(this)),t.zoomManager.addListener("zoom-change",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.container.removeChild(this.toolbar.getElement()),this.toolbar.destroy()}onLayoutStart(t){const{buttons:e,ctx:i,enabled:s,toolbar:n,verticalSpacing:a}=this,{layoutBox:o}=t;if(!s||!i.zoomManager.isZoomEnabled()){n.setHidden(!0);return}n.setHidden(!1),n.updateButtons(e);const r=n.getBounds().height;n.setBounds({x:o.x,y:o.y+o.height-r,width:o.width,height:r}),o.shrink({bottom:r+a})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress({button:{index:t}}){const{zoomManager:e}=this.ctx,i=this.buttons.at(t);if(!i)return;const{value:s}=i;typeof s=="number"?e.extendToEnd("zoom-buttons",rN.X,s):Array.isArray(s)?e.updateWith("zoom-buttons",rN.X,()=>s):typeof s=="function"&&e.updateWith("zoom-buttons",rN.X,s),this.toolbar.toggleActiveButtonByIndex(t)}};m([y3],lN.prototype,"enabled",2),m([y3],lN.prototype,"buttons",2);var x3=1e3*60*60*24,cN=x3*30,srt=x3*365,nrt={type:"root",optionsKey:"ranges",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new lN(t),themeTemplate:{ranges:{enabled:!1,buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:cN},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*cN},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*cN},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:srt},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e]}]}}},VMt=(E(),w(_)),b3=(E(),w(_)),v3=class Fx extends b3._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]},this.container=this.ctx.domManager.addChild("canvas-overlay","shared-toolbar"),this.container.role="presentation"}getSharedToolbar(e){return this.sharedToolbar||this.createSharedToolbar(),this.toolbarWithSection(e)}createSharedToolbar(){this.sharedToolbar=new b3._ModuleSupport.Toolbar(this.ctx.localeManager,"vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.container.append(this.sharedToolbar.getElement()),this.destroyFns.push(()=>{this.sharedToolbar&&(this.container.removeChild(this.sharedToolbar.getElement()),this.sharedToolbar.destroy(),this.sharedToolbar=void 0)})}toolbarWithSection(e){const i=this.sharedToolbar,s={layout:(n,a)=>{if(this.firstLayoutSection!=null&&this.firstLayoutSection!==e&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=e;const o=i.getBounds().width;i.setBounds({x:n.x,y:n.y,width:o}),n.shrink({left:o+i.horizontalSpacing+(a??0)})},addToolbarListener:(n,a)=>i.addToolbarListener(n,o=>{const r=this.getSectionIndex(e,o.button.index);if(r<0)return;const l={...o,button:this.sectionButtons[e][r]};a(l)}),updateButtons:n=>{this.sectionButtons[e]=n;const a=Fx.SECTION_ORDER.flatMap(o=>this.sectionButtons[o]);i.updateButtons(a)},updateButtonByIndex:(n,a)=>{i.updateButtonByIndex(this.getIndex(e,n),a)},toggleActiveButtonByIndex:n=>{i.toggleActiveButtonByIndex(this.getIndex(e,n))},toggleButtonEnabledByIndex:(n,a)=>{i.toggleButtonEnabledByIndex(this.getIndex(e,n),a)},setHidden:n=>{n?this.activeSections.delete(e):this.activeSections.add(e);let a=0;for(const o of Fx.SECTION_ORDER){if(o!==e){a+=this.sectionButtons[o].length;continue}for(const r of this.sectionButtons[e].keys())i.setButtonHiddenByIndex(a+r,n)}},destroy:()=>{s.setHidden(!0),this.activeSections.size===0&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return s.setHidden(!1),s}getIndex(e,i){let s=0;for(const n of Fx.SECTION_ORDER){if(n===e)return s+i;s+=this.sectionButtons[n].length}return-1}getSectionIndex(e,i){let s=0;for(const n of Fx.SECTION_ORDER){if(n===e)return i>=s+this.sectionButtons[e].length?-1:i-s;s+=this.sectionButtons[n].length}return-1}};v3.SECTION_ORDER=["chartToolbar","annotations"];var art=v3,ort={type:"context",contextKey:"sharedToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new art(t)},rrt=(E(),w(_)),hN=(E(),w(_)),{CachedTextMeasurerPool:tx,ZIndexMap:lrt,LayoutElement:crt,Property:Dn,BaseProperties:hrt,valueProperty:urt,TextUtils:drt,Group:prt,Label:ex,Rect:grt,Text:vs}=hN._ModuleSupport,S3={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},frt={up:"positive",down:"negative"},mrt={hlc:"altNeutral"},uN=class extends hrt{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};m([Dn],uN.prototype,"fill",2),m([Dn],uN.prototype,"fillOpacity",2);var Hn=class extends hN._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new ex,this.positive=new ex,this.negative=new ex,this.neutral=new ex,this.altNeutral=new ex,this.background=new uN,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.layer=new prt({name:"StatusBar",zIndex:lrt.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new hN._ModuleSupport.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new grt),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new vs),value:this.labelGroup.appendChild(new vs),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=t.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(t.scene.attachNode(this.layer),t.layoutManager.registerElement(crt.Overlay,e=>this.startPerformLayout(e)),t.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.highlightManager.addListener("highlight-change",()=>this.updateHighlight()))}async processData(t){if(!this.enabled||this.data==null)return;const e=[];for(const n of this.labels){const{id:a,key:o}=n,r=this[o];r==null?n.domain=void 0:e.push(urt(r,"number",{id:a}))}if(e.length===0)return;const{processedData:i,dataModel:s}=await t.request(this.id,this.data,{props:e});for(const n of this.labels){const{id:a,key:o}=n;this[o]!=null&&(n.domain=s.getDomain(this,a,"value",i))}}startPerformLayout(t){if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return;const{layoutBox:e}=t,i=4,s=12,n=0,a=8;this.labelGroup.translationY=e.y+n;const o=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),r=drt.getLineHeight(o),l=S3[this.getChartType()]??0;let c=0,h,u="alphabetic";if(this.layoutStyle==="block")e.shrink(n+r+a,"top"),h=o+(r-o)/2;else{const{title:d}=this.ctx.chartService;if(u="top",h=n+d.padding,d.enabled){const p=d.node.getBBox();c=p.x+p.width+s}else c=d.padding}for(const{label:d,configuration:p,title:g,value:f,domain:x,formatter:y}of this.labels){if(x==null||!(l&p)){g.visible=!1,f.visible=!1;continue}const b=Math.max(tx.measureText(y.format(x[0]),{font:this.positive.getFont(),textBaseline:u,textAlign:"left"}).width,tx.measureText(y.format(x[1]),{font:this.positive.getFont(),textBaseline:u,textAlign:"left"}).width,tx.measureText(y.format(x[0]),{font:this.negative.getFont(),textBaseline:u,textAlign:"left"}).width,tx.measureText(y.format(x[1]),{font:this.negative.getFont(),textBaseline:u,textAlign:"left"}).width);g.visible=!0,f.visible=!0;const v=tx.measureText(d,{font:this.title.getFont(),textBaseline:u,textAlign:"left"});g.setFont(this.title),g.fill=this.title.color,g.text=d,g.textBaseline=u,g.y=h,g.x=c,c+=v.width+i,f.textBaseline=u,f.y=h,f.x=c,c+=b+s}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=c-s,this.backgroundNode.height=r+n+a,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(t){this.labelGroup.translationX=t.series.rect.x,this.updateHighlight()}updateHighlight(){if(!this.enabled)return;const t=this.highlightManager.getActiveHighlight(),e=t?.datum??this.data?.at(-1);if(e==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const i=t?.itemId;let s=i!=null?frt[i]:void 0;s==null&&this.openKey!=null&&this.closeKey!=null&&(e[this.openKey]<e[this.closeKey]?s="positive":s="negative");for(const{domain:n,value:a,key:o,formatter:r,style:l}of this.labels){if(n==null)continue;let c=l??s??"neutral";c==="neutral"&&(c=mrt[this.getChartType()]??c);const h=this[o],u=h!=null?e?.[h]:void 0;a.setFont(this[c]),a.fill=this[c].color,a.text=typeof u=="number"?r.format(u):""}}getChartType(){let t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(t==null||S3[t]==null)&&(t="candlestick"),t}};m([Dn],Hn.prototype,"enabled",2),m([Dn],Hn.prototype,"openKey",2),m([Dn],Hn.prototype,"highKey",2),m([Dn],Hn.prototype,"lowKey",2),m([Dn],Hn.prototype,"closeKey",2),m([Dn],Hn.prototype,"volumeKey",2),m([Dn],Hn.prototype,"title",2),m([Dn],Hn.prototype,"positive",2),m([Dn],Hn.prototype,"negative",2),m([Dn],Hn.prototype,"neutral",2),m([Dn],Hn.prototype,"altNeutral",2),m([Dn],Hn.prototype,"background",2),m([Dn],Hn.prototype,"layoutStyle",2);var yrt={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Hn(t),themeTemplate:{statusBar:{enabled:!1,layoutStyle:rrt._ModuleSupport.ThemeSymbols.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:{$ref:"textColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},positive:{color:{$palette:"up.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},negative:{color:{$palette:"down.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},neutral:{color:{$palette:"neutral.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},background:{fill:{$ref:"backgroundColor"},fillOpacity:.5},altNeutral:{color:"gray",fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}}}}},M3=(E(),w(_)),Un=(R(),w(nt)),{BaseProperties:xrt,CartesianAxis:dN,ChartAxisDirection:kd,ContinuousScale:pN,ChartUpdateType:wM,ObserveChanges:Wg,TooltipManager:brt,Property:Hg,findMinMax:TM,isObjectWithStringProperty:vrt}=M3._ModuleSupport,Fr=M3._ModuleSupport.Debug.create("sync");function D3(t,e,i){const s=t.getKeys(e),n=t.getKeys(i);return t.shouldFlipXY?.()?[n,s]:[s,n]}function gN(t="x"){switch(t){case"x":return[kd.X];case"y":return[kd.Y];case"xy":return[kd.X,kd.Y]}}var bh=class extends xrt{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0,this.domainMode="key",this.domainSync=new Un.AsyncAwaitQueue}updateSiblings(t){const{syncManager:e}=this.moduleContext;for(const i of e.getGroupSiblings(t??this.groupId))Fr("ChartSync.updateSiblings()",i.id,i),this.updateChart(i)}updateChart(t,e=wM.PROCESS_DOMAIN){Fr("ChartSync.updateChart()",t.id,wM[e],t),e===wM.PROCESS_DOMAIN?t.ctx.updateService.update(e,{forceNodeDataRefresh:!0}):t.ctx.updateService.update(e)}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync?.(),this.disableZoomSync=e.addListener("zoom-change",()=>{for(const i of t.getGroupSiblings(this.groupId))i.modulesManager.getModule("sync")?.zoom&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:t}=this.moduleContext;this.disableNodeInteractionSync?.(),this.disableNodeInteractionSync=t.addListener("highlight-change",this.onHighlightChange.bind(this))}onHighlightChange(t){const{syncManager:e}=this.moduleContext;if(t.callerId.endsWith("-sync"))return;Fr("ChartSync.onHighlightChange()",t);const i=t.currentHighlight?.series,[s]=gN(this.axes),n=s===kd.X?kd.Y:kd.X,[a,o]=i?D3(i,s,n):[];let r=a?.[0]?t.currentHighlight?.datum?.[a[0]]:void 0;const l=(0,Un.isDate)(r);if(l&&(r=r.getTime()),!t.currentHighlight?.datum){for(const h of e.getGroupSiblings(this.groupId))h.modulesManager.getModule("sync")?.nodeInteraction&&(h.ctx.highlightManager.updateHighlight(`${h.id}-sync`),h.ctx.tooltipManager.removeTooltip(`${h.id}-sync`));return}const c=e.getGroupSyncMode(this.groupId)==="multi-series";this.findMatchingHighlightNodes(s,n,c?o:[],l,r,t)}findMatchingHighlightNodes(t,e,i,s,n,a){const{syncManager:o}=this.moduleContext;Fr("ChartSync.findMatchingHighlightNodes()",{mainDirection:t,secondaryKeys:i});for(const r of o.getGroupSiblings(this.groupId)){if(!r.modulesManager.getModule("sync")?.nodeInteraction)continue;let l=!1;for(const c of r.axes){if(!dN.is(c)||c.direction!==t)continue;const h=r.series.filter(u=>{if(!u.visible)return!1;if(i.length>0){const[,d]=D3(u,t,e);return i.every(p=>d.includes(p))}return!0}).map(this.findMatchingNodes(c,t,s,n)).filter(Un.isDefined);if(h.length===1&&h[0]?.nodeDatum!==r.ctx.highlightManager.getActiveHighlight()){this.dispatchHighlightUpdate(r,h[0].nodeDatum),l=!0;break}}l||(Fr("ChartSync.findMatchingHighlightNodes() - no matching nodes",r.id,a),this.dispatchHighlightUpdate(r))}}findMatchingNodes(t,e,i,s){return n=>{const a=n.getKeys(t.direction);if(t.keys.length&&!t.keys.some(u=>a.includes(u)))return;const o=n.contextNodeData?.nodeData??[];if(!o?.length)return;const r=o[0],l=`${e}Key`;if(!vrt(r,l))return;const c=r[l],h=o.find(u=>{const d=u.datum[c];return i?d.getTime()===s:d===s});return h?{series:n,nodeDatum:h}:null}}dispatchHighlightUpdate(t,e){Fr("ChartSync.dispatchHighlightUpdate()",t.id,e),t.ctx.highlightManager.updateHighlight(`${t.id}-sync`,e);const i=e?.series.tooltipEnabled??t.tooltip.enabled;if(e&&i){const s=t.seriesAreaBoundingBox,n=s.x+(e.midPoint?.x??e.point?.x??0),a=s.y+(e.midPoint?.y??e.point?.y??0),o=brt.makeTooltipMeta({type:"pointermove",canvasX:n,canvasY:a},e.series,e,void 0);t.ctx.tooltipManager.updateTooltip(`${t.id}-sync`,o,t.getTooltipContent(e.series,e.datumIndex,e))}else t.ctx.tooltipManager.removeTooltip(`${t.id}-sync`);this.updateChart(t,wM.SERIES_UPDATE)}async getSyncedDomain(t){if(!dN.is(t)||this.axes!=="xy"&&this.axes!==t.direction)return;const{groupState:e,directionDomains:i,domainsByKey:s,positionDomains:n}=this.updateDomainState(t);return this.validateAxis(t,e),await this.waitForDomainsToBeReady(),this.domainMode==="position"?this.calculateDerivedDomain(t,n):this.domainMode==="direction"||t.keys.length===0?this.calculateDerivedDomain(t,i):this.calculateKeyDerivedDomain(t,s)}updateDomainState(t){var e,i,s,n,a;const{syncManager:o}=this.moduleContext,r=o.getChart().id,l=t.id,c=o.getGroupState(this.groupId);if(!c)throw new Error("AG Charts - no GroupState for groupId: "+this.groupId);const h=c.domains??(c.domains={}),u=h[e=t.direction]??(h[e]={derived:[],sources:{},dirty:!0}),d=(i=u.sources)[r]??(i[r]={});d[l]=t.dataDomain.domain,u.dirty=!0;const p=c.domainsByKey??(c.domainsByKey={});for(const y of t.keys??[]){const b=p[y]??(p[y]={derived:[],sources:{},dirty:!0}),v=(s=b.sources)[r]??(s[r]={});v[l]=t.dataDomain.domain,b.dirty=!0}const g=c.domainsByPosition??(c.domainsByPosition={}),f=g[n=t.position]??(g[n]={derived:[],sources:{},dirty:!0}),x=(a=f.sources)[r]??(a[r]={});return x[l]=t.dataDomain.domain,f.dirty=!0,{groupState:c,directionDomains:u,domainsByKey:p,positionDomains:f}}validateAxis(t,e){const i=this.moduleContext.syncManager.getGroupSyncMode(this.groupId)==="multi-series";gN(this.axes).includes(t.direction)&&(i?this.validateMultiSeries(t,e):this.validateSingleSeries(t,e))}validateMultiSeries(t,e){const{min:i,max:s,nice:n,reverse:a}=t,o=new Set(t.boundSeries.flatMap(r=>r.getKeys(t.direction)));for(const r of e.members){const{axes:l,modulesManager:c}=r,h=gN(c.getModule("sync")?.axes),u=l.filter(p=>h.includes(p.direction)).filter(p=>p.boundSeries.some(g=>g.getKeys(p.direction).some(f=>o.has(f))));if(u.length===0)continue;const[d]=u;if(d.min!==i||d.max!==s||d.nice!==n||d.reverse!==a){Un.Logger.warnOnce("To allow synchronization, ensure that all synchronized axes with matching keys have matching min, max, nice, and reverse properties."),this.enabled=!1;return}}}validateSingleSeries(t,e){const i=e.members,[{axes:s}]=i,{direction:n,min:a,max:o,nice:r,reverse:l}=t;for(const c of s)if(n===c.direction&&(r!==c.nice||l!==c.reverse||a!==c.min&&((0,Un.isFiniteNumber)(a)||(0,Un.isFiniteNumber)(c.min))||o!==c.max&&((0,Un.isFiniteNumber)(o)||(0,Un.isFiniteNumber)(c.max)))){Un.Logger.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),this.enabled=!1;return}}calculateDerivedDomain(t,e){if(!e.dirty)return e.derived;const i=e.derived;return e.derived=(0,Un.unique)(Object.values(e.sources).map(s=>Object.values(s)).flat(2)),pN.is(t.scale)&&(e.derived=TM(e.derived)),e.dirty=!1,(0,Un.arraysEqual)(i,e.derived)||(Fr(t.id,"updated",t.keys,{before:i,after:e.derived}),this.updateSiblings()),e.derived}calculateKeyDerivedDomain(t,e){let i=[],s=[],n=!1;for(const a of t.keys??[]){const o=e[a],r=o.derived;if(i.push(...r),!o.dirty){s.push(...o.derived);continue}o.derived=(0,Un.unique)(Object.values(o.sources).map(l=>Object.values(l)).flat(2)),pN.is(t.scale)&&(o.derived=TM(o.derived)),s.push(...o.derived),o.dirty=!1,n||(n=!(0,Un.arraysEqual)(r,o.derived))}return pN.is(t.scale)&&(i=TM(i),s=TM(s)),n&&!(0,Un.arraysEqual)(i,s)&&(Fr(t.id,"updated",t.keys,{before:i,after:s}),this.updateSiblings()),s}removeAxis(t){if(!dN.is(t)||this.axes!=="xy"&&this.axes!==t.direction)return;const{syncManager:e}=this.moduleContext,i=e.getGroupState(this.groupId),s=e.getChart().id,n=t.id;delete i?.domains?.[t.direction]?.sources?.[s]?.[n];for(const a of t.keys??[])delete i?.domainsByKey?.[a]?.sources?.[s]?.[n];delete i?.domainsByPosition?.[t.position]?.sources?.[s]?.[n]}async waitForDomainsToBeReady(){const{syncManager:t}=this.moduleContext;let e=0;for(;t.getGroupMembers(this.groupId).some(i=>i.syncStatus==="init");)Fr("ChartSync.waitForDomainsToBeReady() - waiting for all domains to be calculated",this.groupId),await this.domainSync.await(),e++;e>0&&Fr("ChartSync.waitForDomainsToBeReady() - waited for",e,"iterations"),this.domainSync.notify()}mergeZoom(t){const{zoomManager:e}=this.moduleContext;if(this.axes==="xy")return e.getZoom();const i=t.ctx.zoomManager.getZoom()??{};return i[this.axes]=e.getZoom()?.[this.axes],i}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():this.disableNodeInteractionSync?.()}onZoomChange(){this.enabled&&this.zoom?this.enabledZoomSync():this.disableZoomSync?.()}destroy(){const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(),this.disableZoomSync?.()}};bh.className="Sync",m([Hg,Wg(t=>t.onEnabledChange())],bh.prototype,"enabled",2),m([Hg,Wg((t,e,i)=>t.onGroupIdChange(e,i))],bh.prototype,"groupId",2),m([Hg,Wg(t=>t.onAxesChange())],bh.prototype,"axes",2),m([Hg,Wg(t=>t.onNodeInteractionChange())],bh.prototype,"nodeInteraction",2),m([Hg,Wg(t=>t.onZoomChange())],bh.prototype,"zoom",2),m([Hg,Wg(t=>t.onAxesChange())],bh.prototype,"domainMode",2);var Srt={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new bh(t),themeTemplate:{sync:{enabled:!1}}},Id=(E(),w(_)),ix=(R(),w(nt)),fN=(E(),w(_)),{Property:k3}=fN._ModuleSupport,I3="#2196f3",Mrt="#8a8a8a",NM=class extends fN._ModuleSupport.Rect{constructor(){super(...arguments),this.fill=I3,this.fillOpacity=.2,this.zIndex=fN._ModuleSupport.ZIndexMap.ZOOM_SELECTION}updateValid(){this.fill=I3}updateInvalid(){this.fill=Mrt}};NM.className="ZoomRect",m([k3],NM.prototype,"fill",2),m([k3],NM.prototype,"fillOpacity",2);var mN=(E(),w(_)),WMt=(E(),w(_)),yN=(R(),w(nt)),Je={min:0,max:1},Ad=Je.max-Je.min,A3="end",C3="middle",OM=(t,e=Je.min,i=Je.max)=>(0,yN.clamp)(e,t,i);function xN(){return{x:{...Je},y:{...Je}}}function Ss(t){return t.x.max-t.x.min}function ka(t){return t.y.max-t.y.min}function L3(t,e,i=1e-10){return(0,yN.isNumberEqual)(t.min,e.min,i)&&(0,yN.isNumberEqual)(t.max,e.max,i)}function sx(t,e,i){return L3(t.x,e.x,i)&&L3(t.y,e.y,i)}function tn(t){return{x:{min:t?.x?.min??Je.min,max:t?.x?.max??Je.max},y:{min:t?.y?.min??Je.min,max:t?.y?.max??Je.max}}}function Yl(t,e,i){if(!t)return{x:0,y:0};const s=OM(e-t.x,0,t.x+t.width),n=OM(i-t.y,0,t.y+t.height),a=1/t.width*s,o=1-1/t.height*n;return{x:OM(a),y:OM(o)}}function Cd(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function _M(t,e,i){return{x:{min:t.x.min,max:t.x.min+Ss(t)*e},y:{min:t.y.min,max:t.y.min+ka(t)*i}}}function w3(t,e,i){const s=Ss(t),n=ka(t),a=t.x.min+s/2,o=t.y.min+n/2;return{x:{min:a-s*e/2,max:a+s*e/2},y:{min:o-n*i/2,max:o+n*i/2}}}function Ia(t,e,i,s){const{min:n,max:a}=e,o=n+(a-n)/2,r=t.max-t.min;switch(i){case"start":return{min:n,max:e.min+r};case"end":return{min:e.max-r,max:a};case"middle":return{min:o-r/2,max:o+r/2};case"pointer":return Drt(t,e,s??o);default:return{min:n,max:a}}}function Drt(t,e,i){const s=t.max-t.min,n=e.max-e.min,a=i*(1-(n-s)),o=i-a,r=t.min+o,l=t.max+o;return{min:r,max:l}}function krt(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function co(t){return{x:EM(t.x),y:EM(t.y)}}function EM(t){const e=t.max-t.min;let i=t.max>Je.max?Je.max-e:t.min,s=t.min<Je.min?e:t.max;return i=Math.max(Je.min,i),s=Math.min(Je.max,s),{min:i,max:s}}var Irt=class{update(t,e,i,s,n,a){return this.oldZoom??(this.oldZoom=tn(e===mN._ModuleSupport.ChartAxisDirection.X?{...n,x:a}:{...n,y:a})),this.updateCoords(t.currentX,t.currentY),this.updateZoom(e,i,s)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:s,oldZoom:n}=this;let a=tn(n);if(!s||!n)return t===mN._ModuleSupport.ChartAxisDirection.X?a.x:a.y;const o=Yl(i,s.x1,s.y1),r=Yl(i,s.x2,s.y2);if(t===mN._ModuleSupport.ChartAxisDirection.X){const c=(r.x-o.x)*Ss(n);return a.x.max+=c,a.x=Ia(a.x,n.x,e,o.x),a=co(a),a.x}const l=(r.y-o.y)*ka(n);return a.y.max-=l,a.y=Ia(a.y,n.y,e,o.y),a=co(a),a.y}},Art=class{constructor(t,e,i,s,n,a){this.contextMenuRegistry=t,this.zoomManager=e,this.getModuleProperties=i,this.getRect=s,this.updateZoom=n,this.isZoomValid=a}registerActions(t){const{contextMenuRegistry:e}=this;if(t)e.setVisible("zoom-to-cursor",!0),e.setVisible("pan-to-cursor",!0);else{e.setVisible("zoom-to-cursor",!1),e.setVisible("pan-to-cursor",!1);return}e.builtins.items["zoom-to-cursor"].action=this.onZoomToHere.bind(this),e.builtins.items["pan-to-cursor"].action=this.onPanToHere.bind(this);const i=a=>{const o=this.getRect();if(!o)return!0;const r=Yl(o,a.x,a.y);return this.iterateFindNextZoomAtPoint(r)!=null},s=()=>!sx(tn(this.zoomManager.getZoom()),xN()),n=e.addListener("context-setup",a=>{e.builtins.items["zoom-to-cursor"].enabled=i(a),e.builtins.items["pan-to-cursor"].enabled=s()});return()=>{n(),e.setVisible("zoom-to-cursor",!1),e.setVisible("pan-to-cursor",!1)}}computeOrigin(t){const e=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!e||!t?.target||!(t instanceof MouseEvent))return;const s={x:0,y:0,width:e.width,height:e.height};return Yl(s,t.offsetX,t.offsetY)}onZoomToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=this.iterateFindNextZoomAtPoint(e);i!=null&&this.updateZoom(i)}onPanToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=tn(this.zoomManager.getZoom()),s=Ss(i),n=ka(i),a=e.x*s,o=e.y*n,r=Ad/2;let l={x:{min:e.x-r,max:e.x+r},y:{min:e.y-r,max:e.y+r}};l=w3(l,s,n),l=Cd(l,i.x.min-e.x+a,i.y.min-e.y+o),this.updateZoom(co(l))}iterateFindNextZoomAtPoint(t){const{scrollingStep:e}=this.getModuleProperties();for(let i=e;i<=1-e;i+=e){const s=this.getNextZoomAtPoint(t,i);if(this.isZoomValid(s))return s}}getNextZoomAtPoint(t,e){const{isScalingX:i,isScalingY:s}=this.getModuleProperties(),n=tn(this.zoomManager.getZoom()),a=t.x*Ss(n),o=t.y*ka(n),r=Ad/2;let l={x:{min:t.x-r,max:t.x+r},y:{min:t.y-r,max:t.y+r}};return l=w3(l,i?Ss(n)*e:Ad,s?ka(n)*e:Ad),l=Cd(l,n.x.min-t.x+a,n.y.min-t.y+o),co(l)}},T3=(E(),w(_)),{BBoxValues:Crt,ChartAxisDirection:Lrt}=T3._ModuleSupport,wrt=class{constructor(t){this.axesHandlers=t,this.axes=[]}destroy(){this.axes.forEach(t=>t.div.destroy())}update(t,e){if(this.axes.forEach(r=>r.div.setHidden(!t)),!t)return;const{X:i,Y:s}=T3._ModuleSupport.ChartAxisDirection,n=[...e.axisManager.getAxisContext(i),...e.axisManager.getAxisContext(s)],{removed:a,added:o}=this.diffAxisIds(n);a.length>0&&(this.axes=this.axes.filter(r=>a.includes(r.axisId)?(r.div.destroy(),!1):!0));for(const r of o){const{axisId:l,direction:c}=r;this.axes.push(this.initAxis(e,l,this.axesHandlers,c))}for(const r of this.axes){const c=n.find(h=>h.axisId===r.axisId).getCanvasBounds();r.div.setHidden(Crt.isEmpty(c)),c!==void 0&&r.div.setBounds(c)}}toggleAxisDraggingCursor(t,e){for(const i of this.axes)i.direction===t&&i.div.setCursor(e?this.getCursor(t):void 0)}getCursor(t){return t===Lrt.X?"ew-resize":"ns-resize"}initAxis(t,e,i,s){const n="afterend",a=t.proxyInteractionService.createProxyElement({type:"region",domManagerId:e,where:n});return a.setCursor(this.getCursor(s)),a.addListener("drag-start",o=>{o.device==="touch"&&o.sourceEvent.preventDefault(),i.onDragStart(e,s)}),a.addListener("drag-move",o=>i.onDrag(o)),a.addListener("drag-end",i.onDragEnd),a.addListener("dblclick",()=>i.onDoubleClick(e,s)),{axisId:e,div:a,direction:s}}diffAxisIds(t){const e=this.axes.map(a=>a.axisId),i=t.map(a=>a.axisId),s=e.filter(a=>!i.includes(a)),n=t.filter(a=>!e.includes(a.axisId));return{removed:s,added:n}}},HMt=(E(),w(_)),N3=(R(),w(nt)),O3=16,Trt={off:1,short:.01,long:.002},Nrt=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){const{deceleration:t}=this;return Math.max(typeof t=="number"?t:Trt[t]??1,1e-4)}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){this.updateCoords(t.currentX,t.currentY);const{x1:e=0,y1:i=0,x2:s=0,y2:n=0}=this.coords??{};this.onUpdate?.({type:"update",deltaX:e-s,deltaY:i-n})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,s=0;if(t.length>0){const n=this.zoomCoordsHistoryIndex%O3;let a=n-1;a<0&&(a=t.length-1);let o=n;o>=t.length&&(o=0);const r=t[a],l=t[o];e=r.x-l.x,i=r.y-l.y,s=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,s>0&&this.decelerationValue<1){const n=e/s,a=i/s,o=Math.hypot(n,a),r=Math.atan2(a,n),l=performance.now();this.inertiaHandle=(0,N3.getWindow)().requestAnimationFrame(c=>{this.animateInertia(c,c,l,o,r)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:s,y2:n}=t,a=Date.now();e[i%O3]={x:s,y:n,t:a},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,s,n){const a=1-this.decelerationValue,o=-s/Math.log(a),r=s*(a**(e-i)-1)/Math.log(a),l=s*(a**(t-i)-1)/Math.log(a);this.onUpdate?.({type:"update",deltaX:-Math.cos(n)*(l-r),deltaY:-Math.sin(n)*(l-r)}),!(l>=o-1)&&(this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,t,i,s,n)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,s){const n=Yl(t,t.x+Math.abs(i),t.y+t.height-Math.abs(s)),a=Math.sign(i)*n.x,o=-Math.sign(s)*n.y,r={};for(const[l,{direction:c,zoom:h}]of(0,N3.entries)(e)){if(h&&h.min===Je.min&&h.max===Je.max)continue;let u=tn({[c]:h});u=co(Cd(u,a*Ss(u),o*ka(u))),r[l]={direction:c,zoom:u[c]}}return r}},Ort=(E(),w(_)),_rt=(R(),w(nt)),Ert=200,Prt=class{update(t,e,i,s){const n=t.deltaX*e*Ert;return this.translateZooms(i,s,n)}translateZooms(t,e,i){const s={},n=Yl(t,t.x+Math.abs(i),0),a=i<0?-n.x:n.x;for(const[o,{direction:r,zoom:l}]of(0,_rt.entries)(e)){if(r!==Ort._ModuleSupport.ChartAxisDirection.X)continue;let c=tn({x:l});c=co(Cd(c,a*Ss(c),0)),s[o]={direction:r,zoom:c.x}}return s}},_3=(E(),w(_)),Rrt=(R(),w(nt)),Brt=class{updateAxes(t,e,i,s){const n=t.sourceEvent,a={},{anchorPointX:o,anchorPointY:r,isScalingX:l,isScalingY:c,scrollingStep:h}=e,u=Yl(i,n.offsetX??n.clientX,n.offsetY??n.clientY);for(const[d,{direction:p,zoom:g}]of(0,Rrt.entries)(s)){if(g==null)continue;let f={...g};const x=h*t.deltaY*(g.max-g.min);if(p===_3._ModuleSupport.ChartAxisDirection.X&&l)f.max+=x,f=Ia(f,g,o,u.x);else if(p===_3._ModuleSupport.ChartAxisDirection.Y&&c)f.max+=x,f=Ia(f,g,r,u.y);else continue;a[d]={direction:p,zoom:EM(f)}}return a}update(t,e,i,s){const{anchorPointX:n,anchorPointY:a,isScalingX:o,isScalingY:r,scrollingStep:l}=e,c=t.offsetX+i.x,h=t.offsetY+i.y,u=Yl(i,c,h),d=t.deltaY;let p=tn(s);return p.x.max+=o?l*d*Ss(s):0,p.y.max+=r?l*d*ka(s):0,o&&(p.x=Ia(p.x,s.x,n,u.x)),r&&(p.y=Ia(p.y,s.y,a,u.y)),p=co(p),p}updateDelta(t,e,i){const{anchorPointX:s,anchorPointY:n,isScalingX:a,isScalingY:o,scrollingStep:r}=e;let l=tn(i);return l.x.max+=a?r*-t*Ss(i):0,l.y.max+=o?r*-t*ka(i):0,a&&(l.x=Ia(l.x,i.x,s)),o&&(l.y=Ia(l.y,i.y,n)),l=co(l),l}},zrt=class{constructor(t,e,i){this.rect=t,this.getZoom=e,this.isZoomValid=i,this.rect.visible=!1}update(t,e,i){const s=t.currentX+(i?.x??0),n=t.currentY+(i?.y??0);this.rect.visible=!0,this.updateCoords(s,n,e,i),this.updateRect(i)}stop(t,e,i){let s=tn();if(!t||!e)return s;this.coords&&(s=this.createZoomFromCoords(e,i));const n=e.width/t.width,a=e.height/t.height;return s=co(krt(s,n,a)),this.reset(),s}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(t,e,i,s){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}const{coords:n}=this;if(n.x2=t,n.y2=e,!s)return;const{isScalingX:a,isScalingY:o,keepAspectRatio:r}=i,l=this.getNormalisedDimensions();if(r&&a&&o){const c=s.width/s.height;n.y2<n.y1?n.y2=Math.min(n.y1-l.width/c,n.y1):n.y2=Math.max(n.y1+l.width/c,n.y1)}a||(n.x1=s.x,n.x2=s.x+s.width),o||(n.y1=s.y,n.y2=s.y+s.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:s,height:n}=i;let{x:a,y:o}=i;a=Math.max(a,t.x),a-=Math.max(0,a+s-(t.x+t.width)),o=Math.max(o,t.y),o-=Math.max(0,o+n-(t.y+t.height)),e.x=a,e.y=o,e.width=s,e.height=n;const r=this.createZoomFromCoords(t,this.getZoom());this.isZoomValid(r)?e.updateValid():e.updateInvalid()}createZoomFromCoords(t,e){const i=tn(e),s=this.getNormalisedDimensions(),n=Yl(t,s.x,s.y+s.height),a=s.width/t.width,o=s.height/t.height;let r=_M(i,a,o);const l=n.x*Ss(i),c=n.y*ka(i);return r=Cd(r,l,c),r=co(r),r}getNormalisedDimensions(){const{x1:t=0,y1:e=0,x2:i=0,y2:s=0}=this.coords??{},n=t<=i?t:i,a=e<=s?e:s,o=t<=i?i-t:t-i,r=e<=s?s-e:e-s;return{x:n,y:a,width:o,height:r}}},Frt=(E(),w(_)),E3=(R(),w(nt)),{ActionOnSet:P3,BaseProperties:jrt,ChartAxisDirection:Grt,NativeWidget:Vrt,PropertiesArray:Wrt,Toolbar:Hrt,ToolbarButtonProperties:Urt,Property:Ld}=Frt._ModuleSupport,bN=class extends Urt{};m([Ld],bN.prototype,"value",2),m([Ld],bN.prototype,"section",2);var Ug=class extends jrt{constructor(t,e,i,s,n,a,o){super(),this.ctx=t,this.getModuleProperties=e,this.getResetZoom=i,this.updateZoom=s,this.updateAxisZoom=n,this.resetZoom=a,this.isZoomValid=o,this.enabled=!1,this.buttons=new Wrt(bN),this.visible="hover",this.verticalSpacing=10,this.detectionRange=38,this.destroyFns=[],this.container=new Vrt((0,E3.createElement)("div")),this.container.addClass("ag-charts-zoom-buttons"),t.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new Hrt(t.localeManager),this.container.addChild(this.toolbar),this.toolbar.getElement().style.transform="translateY(54px)",this.toggleVisibility(this.visible==="always"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),t.widgets.containerWidget.addListener("mousemove",this.onHover.bind(this)),t.widgets.containerWidget.addListener("mouseleave",this.onLeave.bind(this)),t.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){for(const t of this.destroyFns)t()}toggleVisibleZoomed(t){this.visible==="zoomed"&&this.toggleVisibility(!t)}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(t){const{buttons:e,container:i}=this,{rect:s}=t.series;this.toolbar.updateButtons(e),this.toggleButtons();const n=i.getBounds().height;i.setBounds({y:s.y+s.height-n})}onHover(t){if(!this.enabled||this.visible!=="hover"||this.toolbar.isHidden())return;const{container:e,detectionRange:i,ctx:{scene:s}}=this,{currentY:n,sourceEvent:{target:a}}=t,o=e.getElement(),r=o.offsetTop-i,l=n>r&&n<s.canvas.element.offsetHeight||a===o;this.toggleVisibility(l)}onLeave(){this.visible==="hover"&&this.toggleVisibility(!1)}toggleVisibility(t,e=!1){const{container:i,toolbar:s,verticalSpacing:n}=this;s.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!t);const a=s.getElement();a.style.transitionDuration=e?"0s":"",a.style.transform=t?"translateY(0)":`translateY(${i.getBounds().height+n}px)`}toggleButtons(){const t=tn(this.ctx.zoomManager.getZoom());if(!(this.previousZoom&&sx(this.previousZoom,t))){this.previousZoom=t;for(const[e,i]of this.buttons.entries()){let s=!0;switch(i?.value){case"pan-start":s=t.x.min>Je.min;break;case"pan-end":s=t.x.max<Je.max;break;case"pan-left":s=t.x.min>Je.min;break;case"pan-right":s=t.x.max<Je.max;break;case"zoom-out":s=!sx(t,xN());break;case"zoom-in":s=this.isZoomValid(this.getNextZoomStateUnified("zoom-in",t,this.getModuleProperties()));break;case"reset":s=!sx(t,this.getResetZoom());break}this.toolbar.toggleButtonEnabledByIndex(e,s)}}}onButtonPress({button:t}){if(!this.enabled||this.toolbar.isHidden())return;const e=this.getModuleProperties();if(e.independentAxes&&t.value!=="reset"){const i=this.ctx.zoomManager.getAxisZooms();for(const[s,{direction:n,zoom:a}]of(0,E3.entries)(i))a!=null&&this.onButtonPressAxis(t,e,s,n,a)}else this.onButtonPressUnified(t,e)}onButtonFocus(t){this.toggleVisibility(!0,!0)}onButtonPressAxis(t,e,i,s,n){const{isScalingX:a,isScalingY:o,scrollingStep:r}=e;let l={...n};const c=n.max-n.min;switch(t.value){case"pan-start":l.max=c,l.min=0;break;case"pan-end":l.min=l.max-c,l.max=Je.max;break;case"pan-left":l.min-=c*r,l.max-=c*r;break;case"pan-right":l.min+=c*r,l.max+=c*r;break;case"zoom-in":case"zoom-out":{const h=s===Grt.X,u=h&&a||!h&&o;let d=t.value==="zoom-in"?1-r:1+r;u||(d=1);const p=h?this.getAnchorPointX(e):this.getAnchorPointY(e);l.max=l.min+(l.max-l.min)*d,l=Ia(l,n,p);break}}this.updateAxisZoom(i,s,EM(l))}onButtonPressUnified(t,e){const{scrollingStep:i}=e,s=tn(this.ctx.zoomManager.getZoom());let n=tn(s);switch(t.value){case"reset":this.resetZoom();return;case"pan-start":n.x.max=Ss(n),n.x.min=0;break;case"pan-end":n.x.min=Je.max-Ss(n),n.x.max=Je.max;break;case"pan-left":n=Cd(n,-Ss(n)*i,0);break;case"pan-right":n=Cd(n,Ss(n)*i,0);break;case"zoom-in":case"zoom-out":{n=this.getNextZoomStateUnified(t.value,s,e);break}}this.updateZoom(co(n))}getNextZoomStateUnified(t,e,i){const{isScalingX:s,isScalingY:n,scrollingStep:a}=i,o=t==="zoom-in"?1-a:1+a,r=_M(e,s?o:1,n?o:1);return r.x=Ia(r.x,e.x,this.getAnchorPointX(i)),r.y=Ia(r.y,e.y,this.getAnchorPointY(i)),r}getAnchorPointX(t){const e=this.anchorPointX??t.anchorPointX;return e==="pointer"?A3:e}getAnchorPointY(t){const e=this.anchorPointY??t.anchorPointY;return e==="pointer"?C3:e}};m([Ld,P3({changeValue(t){this.toolbar?.setHidden(!t)}})],Ug.prototype,"enabled",2),m([Ld],Ug.prototype,"buttons",2),m([Ld,P3({changeValue(t,e){e!=null&&this.toggleVisibility(t==="always")}})],Ug.prototype,"visible",2),m([Ld],Ug.prototype,"anchorPointX",2),m([Ld],Ug.prototype,"anchorPointY",2);var UMt=(E(),w(_)),wd=1e6;function PM({min:t,max:e},i,s,n){return n===0?0:wd*((i-s)/n*(e-t)+t)}function $rt(t,e,i,s,n,a){[t,e]=[Math.min(t,e),Math.max(t,e)],[i,s]=[Math.min(i,s),Math.max(i,s)];const o=wd*(i-n)/a,r=wd*(s-n)/a,l=(i-n)/(s-n),c=(t-l*e)/(wd-o+l*(r-wd)),h=(e+(r-wd)*c)/r;return{min:c,max:h}}function R3(t,e,i,s){e===0&&(e=30),s===0&&(s=30);const n=t-e,a=t+e,o=i-s,r=i+s;return!(a<o||r<n)}var Krt=class{constructor(){this.touchStart={origins:[{identifier:0,normalX:NaN,normalY:NaN},{identifier:0,normalX:NaN,normalY:NaN}]},this.initialZoom={x:{min:0,max:1},y:{min:0,max:1}},this.previous={a1:NaN,a2:NaN,b1:NaN,b2:NaN}}start(t,e,i){if(t.sourceEvent.targetTouches.length!==2)return!1;t.sourceEvent.preventDefault();const s=Array.from(t.sourceEvent.targetTouches),{x:n,y:a,width:o,height:r}=e.getBoundingClientRect();this.initialZoom.x.min=i.x?.min??0,this.initialZoom.x.max=i.x?.max??1,this.initialZoom.y.min=i.y?.min??0,this.initialZoom.y.max=i.y?.max??1,this.touchStart.origins.forEach(g=>g.identifier=0),this.previous.a1=NaN,this.previous.a2=NaN,this.previous.b1=NaN,this.previous.b2=NaN;for(const g of[0,1]){const f=s[g].clientX,x=a+r-s[g].clientY;this.touchStart.origins[g].identifier=s[g].identifier,this.touchStart.origins[g].normalX=PM(this.initialZoom.x,f,n,o),this.touchStart.origins[g].normalY=PM(this.initialZoom.y,x,a,r)}const[l,c]=s,[h,u]=this.touchStart.origins,d=R3(l.clientX,l.radiusX,c.clientX,c.radiusX);return R3(l.clientY,l.radiusY,c.clientY,c.radiusY)&&(h.normalY=u.normalY=(h.normalY+u.normalY)/2),d&&(h.normalX=u.normalX=(h.normalX+u.normalX)/2),!0}update(t,e){t.sourceEvent.preventDefault();const i=Array.from(t.sourceEvent.targetTouches),{x:s,y:n,width:a,height:o}=e.getBoundingClientRect(),{origins:r}=this.touchStart,l=[0,1].map(y=>i.find(b=>b.identifier===r[y].identifier)),c=r[0].normalX,h=r[1].normalX,u=l[0].clientX,d=l[1].clientX,p=r[0].normalY,g=r[1].normalY,f=n+o-l[0].clientY,x=n+o-l[1].clientY;return this.twitchTolerantZoomPan4(c,h,u,d,p,g,f,x,s,n,a,o)}end(t){const e=Array.from(t.sourceEvent.targetTouches).map(i=>i.identifier);return!e.includes(this.touchStart.origins[0].identifier)||!e.includes(this.touchStart.origins[1].identifier)}twitchTolerantZoomPan4(t,e,i,s,n,a,o,r,l,c,h,u){const{initialZoom:d,previous:p}=this,g=B3(t,e,i,s,p,"a1","a2",l,h,d.x),f=B3(n,a,o,r,p,"b1","b2",c,u,d.y);return{x:g,y:f}}};function B3(t,e,i,s,n,a,o,r,l,c){if(t!=e){const h=n[a],u=n[o];return Math.abs(i-h)+Math.abs(s-u)<=1?(i=h,s=u):(n[a]=i,n[o]=s),$rt(t,e,i,s,r,l)}else{const h=PM(c,i,r,l),u=PM(c,s,r,l),d=(h+u)/2,p=(t-d)/wd;return{min:c.min+p,max:c.max+p}}}var{ActionOnSet:RM,ChartAxisDirection:Td,ChartUpdateType:z3,Deprecated:F3,Property:yi,InteractionState:BM,ProxyProperty:Yrt}=Id._ModuleSupport,zM=t=>(0,ix.roundTo)(t,10),j3="zoom-cursor",vN="zoom-tooltip",SN=class extends Id._ModuleSupport.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.padding=0}};m([yi,RM({changeValue(t){this.onChange({enabled:t,padding:this.padding})}})],SN.prototype,"enabled",2),m([yi,RM({changeValue(t){this.onChange({enabled:this.enabled,padding:t})}})],SN.prototype,"padding",2);var Ti=class extends Id._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.enableTwoFingerZoom=!0,this.panKey="alt",this.axes="x",this.scrollingStep=Ad/10,this.keepAspectRatio=!1,this.minVisibleItems=2,this.anchorPointX=A3,this.anchorPointY=C3,this.autoScaling=new SN(i=>{this.ctx.zoomManager.setAutoScaleYAxis(i.enabled,i.padding)}),this.buttons=new Ug(this.ctx,this.getModuleProperties.bind(this),this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this),this.isZoomValid.bind(this)),this.axisDragger=new Irt,this.panner=new Nrt,this.scroller=new Brt,this.scrollPanner=new Prt,this.twoFingers=new Krt,this.deceleration="short",this.dragState=0,this.isState=i=>this.ctx.interactionManager.isState(i),this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=(0,ix.debounce)(()=>{this.isFirstWheelEvent=!0},100);const e=new NM;this.selector=new zrt(e,this.getZoom.bind(this),this.isZoomValid.bind(this)),this.contextMenu=new Art(t.contextMenuRegistry,t.zoomManager,this.getModuleProperties.bind(this),()=>this.paddedRect,this.updateZoom.bind(this),this.isZoomValid.bind(this)),this.domProxy=new wrt({onDragStart:(i,s)=>this.onAxisDragStart(i,s),onDrag:i=>{this.onDragMove({...i,currentX:i.offsetX,currentY:i.offsetY})},onDragEnd:()=>this.onDragEnd(),onDoubleClick:(i,s)=>{this.hoveredAxis={id:i,direction:s},this.onDoubleClick(),this.hoveredAxis=void 0}}),this.destroyFns.push(t.scene.attachNode(e),t.chartEventManager.addListener("series-keynav-zoom",i=>this.onNavZoom(i)),t.widgets.seriesDragInterpreter.addListener("dblclick",i=>this.onDoubleClick(i)),t.widgets.seriesDragInterpreter.addListener("drag-move",i=>this.onDragMove(i)),t.widgets.seriesDragInterpreter.addListener("drag-start",i=>this.onDragStart(i)),t.widgets.seriesDragInterpreter.addListener("drag-end",()=>this.onDragEnd()),t.widgets.seriesWidget.addListener("wheel",i=>this.onWheel(i)),t.widgets.seriesWidget.addListener("touchstart",(i,s)=>this.onTouchStart(i,s)),t.widgets.seriesWidget.addListener("touchmove",(i,s)=>this.onTouchMove(i,s)),t.widgets.seriesWidget.addListener("touchend",i=>this.onTouchEnd(i)),t.widgets.seriesWidget.addListener("touchcancel",i=>this.onTouchEnd(i)),t.updateService.addListener("process-data",i=>this.onProcessData(i)),t.layoutManager.addListener("layout:complete",i=>this.onLayoutComplete(i)),t.zoomManager.addListener("zoom-change",i=>this.onZoomChange(i)),t.zoomManager.addListener("zoom-pan-start",i=>this.onZoomPanStart(i)),this.panner.addListener("update",i=>this.onPanUpdate(i)),()=>this.teardown())}teardown(){this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),this.destroyContextMenuActions?.()}onEnabledChange(t){this.ctx.zoomManager.setZoomModuleEnabled(t),this.contextMenu&&(this.destroyContextMenuActions?.(),this.destroyContextMenuActions=this.contextMenu.registerActions(t))}isIgnoredTouch(t){if(t?.device!=="touch")return!1;if(this.ctx.chartService.touch.dragAction!=="drag")return!0;if(this.enableSelecting)return!1;if(!this.enablePanning)return!0;const{x:e,y:i}=this.getZoom();return e.min===0&&e.max===1&&i.min===0&&i.max===1}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:s,ctx:{zoomManager:n}}=this;!e||!i||!this.isState(BM.ZoomClickable)||(s?n.resetAxisZoom("zoom",s.id):t?.preventZoomDblClick||this.resetZoom())}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:s,enableSelecting:n,hoveredAxis:a,ctx:{domManager:o,zoomManager:r}}=this;if(!e||!this.hoveredAxis&&(!this.isState(BM.ZoomDraggable)||this.dragState!==0||this.isIgnoredTouch(t)))return;this.panner.stopInteractions();let l=0;if(i&&a)l=1;else if(t!=null){const c=this.isPanningKeyPressed(t.sourceEvent);s&&(!n||c)?(o.updateCursor(j3,"grabbing"),l=2,this.panner.start()):n&&!c&&(l=3)}(this.dragState=l)!==0&&r.fireZoomPanStartEvent("zoom")}onDragMove(t){const{anchorPointX:e,anchorPointY:i,axisDragger:s,dragState:n,enabled:a,paddedRect:o,panner:r,selector:l,seriesRect:c,shouldFlipXY:h,hoveredAxis:u,ctx:{interactionManager:d,tooltipManager:p,updateService:g,zoomManager:f}}=this;if(!a||!o||!c||!u&&(!this.isState(BM.ZoomDraggable)||this.isIgnoredTouch(t)))return;d.pushState(Id._ModuleSupport.InteractionState.ZoomDrag),t.device==="touch"&&t.sourceEvent.preventDefault();const x=this.getZoom();switch(n){case 1:{if(!u)break;const{id:y,direction:b}=u;let v=b===Td.X?e:i;h&&(v=b===Td.X?i:e);const M=f.getAxisZoom(y),D=s.update(t,b,v,c,x,M);f.setAxisManuallyAdjusted("zoom",y),this.updateAxisZoom(y,b,D);break}case 2:r.update(t);break;case 3:l.update(t,this.getModuleProperties(),o);break;case 0:return}p.updateTooltip(vN),g.update(z3.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:t,dragState:e,enabled:i,panner:s,selector:n,ctx:{domManager:a,interactionManager:o,tooltipManager:r}}=this;if(o.popState(Id._ModuleSupport.InteractionState.ZoomDrag),!(!i||e===0)){switch(e){case 1:this.hoveredAxis=void 0,t.stop();break;case 2:s.stop();break;case 3:{if(!n.didUpdate())break;const l=this.getZoom(),c=n.stop(this.seriesRect,this.paddedRect,l);this.updateZoom(c);break}}this.dragState=0,a.updateCursor(j3),r.removeTooltip(vN)}}onNavZoom(t){const{enabled:e,enableScrolling:i,scroller:s}=this;!this.ctx.interactionManager.isState(Id._ModuleSupport.InteractionState.Default)||!e||!i||(t.widgetEvent.sourceEvent.preventDefault(),this.updateZoom(s.updateDelta(t.delta,this.getModuleProperties(),this.getZoom())))}onWheel(t){const{enabled:e,enablePanning:i,enableScrolling:s,paddedRect:n}=this;if(!e||!s||!n||!this.isState(BM.ZoomWheelable))return;const{deltaX:a,deltaY:o}=t.sourceEvent,r=a!=null&&o!=null&&Math.abs(a)>Math.abs(o);i&&r?this.onWheelPanning(t):this.onWheelScrolling(t)}onWheelPanning(t){const{scrollingStep:e,scrollPanner:i,seriesRect:s,ctx:{zoomManager:n}}=this;if(!s)return;t.sourceEvent.preventDefault();const a=i.update(t,e,s,n.getAxisZooms());for(const[o,{direction:r,zoom:l}]of(0,ix.entries)(a))this.updateAxisZoom(o,r,l)}onWheelScrolling(t){const{enableAxisDragging:e,enableIndependentAxes:i,hoveredAxis:s,scroller:n,seriesRect:a,ctx:{zoomManager:o}}=this;if(!a)return;const r=this.getZoom();let l=t.deltaY>0&&this.isMaxZoom(r);const c=e&&s!=null;let h=this.isScalingX(),u=this.isScalingY();c&&(h=s.direction===Id._ModuleSupport.ChartAxisDirection.X,u=!h);const d=this.getModuleProperties({isScalingX:h,isScalingY:u});let p=!0;if(i===!0){const g=n.updateAxes(t,d,a,o.getAxisZooms());for(const[f,{direction:x,zoom:y}]of(0,ix.entries)(g))c&&s.id!==f||p&&(p=this.updateAxisZoom(f,x,y))}else{const g=n.update(t,d,a,this.getZoom());p=this.updateUnifiedZoom(g)}l||(l=t.deltaY<0&&!p),(!this.isFirstWheelEvent||!l)&&t.sourceEvent.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset()}onAxisDragStart(t,e){this.hoveredAxis={id:t,direction:e},this.onDragStart(void 0)}onTouchStart(t,e){!this.enableTwoFingerZoom||this.dragState!==0||this.twoFingers.start(t,e,this.getZoom())&&(this.dragState=4)}onTouchMove(t,e){if(!this.enableTwoFingerZoom||this.dragState!==4)return;const i=this.twoFingers.update(t,e);this.updateZoom(co(i))}onTouchEnd(t){!this.enableTwoFingerZoom||this.dragState!==4||(t.sourceEvent.preventDefault(),this.twoFingers.end(t)&&(this.dragState=0))}onProcessData(t){this.shouldFlipXY=t.series.shouldFlipXY}onLayoutComplete(t){this.domProxy.update(this.enableAxisDragging,this.ctx),this.enabled&&(this.seriesRect=t.series.rect,this.paddedRect=t.series.paddedRect,this.enableAxisDragging&&this.toggleAxisDraggingCursors())}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom();this.buttons.toggleVisibleZoomed(this.isMaxZoom(e))}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:s,zoomManager:n}}=this;if(!i)return;const a=e.translateZooms(i,n.getAxisZooms(),t.deltaX,t.deltaY);for(const[o,{direction:r,zoom:l}]of(0,ix.entries)(a))this.updateAxisZoom(o,r,l);s.updateTooltip(vN)}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMaxZoom(t){return sx(t,xN())}isZoomValid(t){const{minVisibleItems:e,minVisibleItemsX:i,minVisibleItemsY:s,ctx:{zoomManager:n}}=this;if(e===0)return!0;const a=this.getZoom(),o=zM(Ss(t))<zM(Ss(a)),r=zM(ka(t))<zM(ka(a));return!o&&!r?!0:i!=null&&o?n.isVisibleItemsCountAtLeast(t,i):s!=null&&r?n.isVisibleItemsCountAtLeast(t,s):n.isVisibleItemsCountAtLeast(t,e)}isAxisZoomValid(t,e){const{minVisibleItems:i,minVisibleItemsX:s,minVisibleItemsY:n,ctx:{zoomManager:a}}=this,o=this.getZoom(),r=e.max-e.min,l=o[t].max-o[t].min,c={...o,[t]:e},h=t===Td.X?s:n;return r>=l||a.isVisibleItemsCountAtLeast(c,h??i)}resetZoom(){this.ctx.zoomManager.resetZoom("zoom")}updateZoom(t){this.enableIndependentAxes?this.updatePrimaryAxisZooms(t):this.updateUnifiedZoom(t)}updateUnifiedZoom(t){return this.isZoomValid(t)?(this.ctx.zoomManager.updateZoom("zoom",t),!0):(this.ctx.updateService.update(z3.SCENE_RENDER,{skipAnimations:!0}),!1)}updatePrimaryAxisZooms(t){this.updatePrimaryAxisZoom(t,Td.X),this.updatePrimaryAxisZoom(t,Td.Y)}updatePrimaryAxisZoom(t,e){const i=this.ctx.zoomManager.getPrimaryAxisId(e);i!=null&&this.updateAxisZoom(i,e,t[e])}updateAxisZoom(t,e,i){const{enableIndependentAxes:s,ctx:{zoomManager:n}}=this;if(!i)return!1;const a=this.getZoom();return s!==!0?(a[e]=i,this.updateUnifiedZoom(a)):this.isAxisZoomValid(e,i)?(n.updateAxisZoom("zoom",t,i),!0):!1}toggleAxisDraggingCursors(){const{anchorPointX:t,anchorPointY:e,domProxy:i}=this,s=this.getZoom();let n=Ss(s)!==Ad,a=ka(s)!==Ad;if(!n){const o=_M(s,.999,1);o.x=Ia(o.x,s.x,t),n=this.isZoomValid(o)}if(!a){const o=_M(s,1,.999);o.y=Ia(o.y,s.y,e),a=this.isZoomValid(o)}i.toggleAxisDraggingCursor(Td.X,n),i.toggleAxisDraggingCursor(Td.Y,a)}getZoom(){return tn(this.ctx.zoomManager.getZoom())}getResetZoom(){return tn(this.ctx.zoomManager.getRestoredZoom())}getModuleProperties(t){return{anchorPointX:t?.anchorPointX??this.getAnchorPointX(),anchorPointY:t?.anchorPointY??this.getAnchorPointY(),enabled:t?.enabled??this.enabled,independentAxes:t?.independentAxes??this.enableIndependentAxes===!0,isScalingX:t?.isScalingX??this.isScalingX(),isScalingY:t?.isScalingY??this.isScalingY(),keepAspectRatio:t?.keepAspectRatio??this.keepAspectRatio,scrollingStep:t?.scrollingStep??this.scrollingStep}}};m([RM({newValue(t){this.onEnabledChange(t)}}),yi],Ti.prototype,"enabled",2),m([yi],Ti.prototype,"enableAxisDragging",2),m([yi],Ti.prototype,"enableDoubleClickToReset",2),m([RM({changeValue(t){this.ctx.zoomManager.setIndependentAxes(!!t)}}),yi],Ti.prototype,"enableIndependentAxes",2),m([yi],Ti.prototype,"enablePanning",2),m([yi],Ti.prototype,"enableScrolling",2),m([yi],Ti.prototype,"enableSelecting",2),m([yi],Ti.prototype,"enableTwoFingerZoom",2),m([yi],Ti.prototype,"panKey",2),m([yi],Ti.prototype,"axes",2),m([yi],Ti.prototype,"scrollingStep",2),m([yi],Ti.prototype,"keepAspectRatio",2),m([yi],Ti.prototype,"minVisibleItems",2),m([F3("Use [minVisibleItems] instead."),yi],Ti.prototype,"minVisibleItemsX",2),m([F3("Use [minVisibleItems] instead."),yi],Ti.prototype,"minVisibleItemsY",2),m([yi],Ti.prototype,"anchorPointX",2),m([yi],Ti.prototype,"anchorPointY",2),m([yi],Ti.prototype,"autoScaling",2),m([yi],Ti.prototype,"buttons",2),m([Yrt("panner.deceleration"),yi],Ti.prototype,"deceleration",2);var Zrt={enabled:!0,visible:"hover",buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},Xrt={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],moduleFactory:t=>new Ti(t),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:Zrt,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,enableTwoFingerZoom:!0,deceleration:"short",minVisibleItems:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:!1,padding:.05}}}},$Mt=(E(),w(_)),qrt=(E(),w(_)),Qrt=(R(),w(nt)),{BaseProperties:Jrt,AxisTicks:tlt,ZIndexMap:elt,ProxyProperty:MN,Property:Nd,LayoutElement:ilt,Group:slt,Rect:nlt,Marker:alt,TranslatableGroup:olt,BBox:rlt}=qrt._ModuleSupport,DN=class extends Jrt{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};m([Nd],DN.prototype,"thickness",2),m([Nd],DN.prototype,"preferredLength",2);var FM=class{constructor(t){this.axisTicks=t}};m([MN("axisTicks.label")],FM.prototype,"label",2),m([MN("axisTicks.interval")],FM.prototype,"interval",2),m([MN("axisTicks.padding")],FM.prototype,"padding",2);var Od=class{constructor(t){this.ctx=t,this.id=(0,Qrt.createId)(this),this.legendGroup=new olt({name:"legend",zIndex:elt.LEGEND}),this.gradientRect=new nlt,this.arrow=new alt({shape:"triangle"}),this.ticksGroup=new slt({name:"legend-axis-group"}),this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new DN,this.spacing=20,this.data=[],this.highlightManager=t.highlightManager,this.axisTicks=new tlt,this.axisTicks.attachAxis(this.ticksGroup),this.scale=new FM(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.destroyFns.push(t.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange()),t.layoutManager.registerElement(ilt.Legend,e=>this.onStartLayout(e)),()=>this.legendGroup.remove())}isVertical(){return this.position==="right"||this.position==="left"}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.legendGroup)}onStartLayout(t){const[e]=this.data;if(!this.enabled||!e?.enabled||e.legendType!=="gradient"){this.legendGroup.visible=!1;return}const{colorRange:i}=this.normalizeColorArrays(e);this.updateGradientRect(t.layoutBox,i);const s=this.updateAxis(e)??new rlt(0,0,0,0),{left:n,top:a}=this.getMeasurements(t.layoutBox,s);this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=n,this.legendGroup.translationY=a}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const[s,n]=e,a=i.length;return e=i.map((o,r)=>r===0?s:r===a-1?n:s+(n-s)*r/(a-1)),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{gradientRect:i}=this,{preferredLength:s,thickness:n}=this.gradient;let a;this.isVertical()?(a=0,i.width=n,i.height=Math.min(t.height,s)):(a=90,i.width=Math.min(t.width,s),i.height=n),i.fill={type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:e.map((o,r)=>({stop:r/(e.length-1),color:o})),rotation:a}}updateAxis(t){const{axisTicks:e}=this,i=this.isVertical(),s=this.reverseOrder!==i;return e.position=this.position,e.translationX=i?this.gradient.thickness:0,e.translationY=i?0:this.gradient.thickness,e.scale.domain=s?t.colorDomain.slice().reverse():t.colorDomain,e.scale.range=i?[0,this.gradientRect.height]:[0,this.gradientRect.width],e.calculateLayout()}updateArrow(){const t=this.highlightManager.getActiveHighlight(),{arrow:e}=this;if(t?.colorValue==null){e.visible=!1;return}const{scale:i,label:s}=this.axisTicks,n=s.fontSize??0,a=i.convert(t.colorValue);let{x:o,y:r}=this.gradientRect,l=Math.PI;this.isVertical()?(o-=n/2,r+=a,l/=2):(o+=a,r-=n/2),e.visible=!0,e.fill=s.color,e.rotation=l,e.size=n,e.translationX=o,e.translationY=r}getMeasurements(t,e){let{x:i,y:s}=t,{width:n,height:a}=this.gradientRect;switch(this.isVertical()?n+=e.width+5:a+=e.height+5,this.position){case"left":s+=t.height/2-a/2,t.shrink(n+this.spacing,"left");break;case"right":i+=t.width-n,s+=t.height/2-a/2,t.shrink(n+this.spacing,"right");break;case"top":i+=t.width/2-n/2,t.shrink(a+this.spacing,"top");break;case"bottom":i+=t.width/2-n/2,s+=t.height-a,t.shrink(a+this.spacing,"bottom")}return{top:s,left:i}}onChartHoverChange(){this.enabled&&this.updateArrow()}};Od.className="GradientLegend",m([Nd],Od.prototype,"enabled",2),m([Nd],Od.prototype,"position",2),m([Nd],Od.prototype,"reverseOrder",2),m([Nd],Od.prototype,"gradient",2),m([Nd],Od.prototype,"spacing",2);var llt={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient",moduleFactory:t=>new Od(t),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}},interval:{minSpacing:15}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},removable:"standalone-only"},KMt=(E(),w(_)),clt=(R(),w(nt));function hlt(t,e){const i=t.addChild("canvas-overlay","watermark"),s=(0,clt.createElement)("span");s.innerText=e,i.addEventListener("animationend",()=>{t.removeChild("canvas-overlay","watermark"),t.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(s)}var ult=(E(),w(_)),dlt=(E(),w(_)),YMt=(R(),w(nt)),{ordinalTimeAxisOptionsDefs:plt,angleNumberAxisOptionsDefs:glt,angleCategoryAxisOptionsDefs:flt,radiusNumberAxisOptionsDefs:mlt,radiusCategoryAxisOptionsDefs:ylt}=dlt._ModuleSupport,xlt={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:plt,create:t=>new Ey(t)},blt={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:glt,create:t=>new nd(t)},vlt={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:flt,create:t=>new Jc(t)},Slt={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:mlt,create:t=>new vg(t)},Mlt={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:ylt,create:t=>new th(t)},Dlt=(E(),w(_)),klt=(E(),w(_)),{Chart:Ilt,Property:Alt}=klt._ModuleSupport;function Clt(t){return t.type==="sankey"||t.type==="chord"}var jM=class extends Ilt{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const t=this.getOptions();this.nodes!==t.nodes&&(this.nodes=t.nodes);const{nodes:e}=this;this.series.forEach(i=>{Clt(i)&&i.setChartNodes(e)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n,e.visible=this.series.some(a=>a.visible);for(const a of[e,i])a.translationX=Math.floor(n.x),a.translationY=Math.floor(n.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:n,paddedRect:n}})}};jM.className="FlowProportionChart",jM.type="flow-proportion",m([Alt],jM.prototype,"nodes",2);var{isAgFlowProportionChartOptions:Llt,flowProportionChartOptionsDefs:wlt}=Dlt._ModuleSupport,Tlt={type:"chart",name:"flow-proportion",enterprise:!0,options:wlt,detect:Llt,create(t,e){return new jM(t,e)}},Nlt=(E(),w(_)),Olt=(E(),w(_)),{Chart:_lt}=Olt._ModuleSupport,kN=class extends _lt{getChartType(){return"gauge"}performLayout(t){const{seriesRoot:e,annotationRoot:i,series:s,seriesArea:n}=this,{layoutBox:a}=t,o=a.clone();a.shrink(n.padding.toJson()),this.seriesRect=o.clone().translate(o.x-a.x,o.y-a.y),this.animationRect=a,e.visible=s.some(r=>r.visible);for(const r of[e,i])r.translationX=Math.floor(a.x),r.translationY=Math.floor(a.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:o,paddedRect:a}})}getAriaLabel(){const t=[],e=this.getCaptionText();e.length!==0&&t.push(e);for(const s of this.series)t.push(s.getCaptionText());const i=t.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};kN.className="GaugeChart",kN.type="gauge";var{isAgGaugeChartOptions:Elt,gaugeChartOptionsDefs:Plt}=Nlt._ModuleSupport,Rlt={type:"chart",name:"gauge",enterprise:!0,options:Plt,detect:Elt,create(t,e){return new kN(t,e)}},Blt=(E(),w(_)),zlt=(E(),w(_)),{Chart:Flt}=zlt._ModuleSupport,IN=class extends Flt{getChartType(){return"hierarchy"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n;for(const a of[e,i])a.translationX=Math.floor(n.x),a.translationY=Math.floor(n.y);e.visible=this.series[0].visible,e.setClipRect(n.clone()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:n,paddedRect:n}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};IN.className="HierarchyChart",IN.type="hierarchy";var{isAgHierarchyChartOptions:jlt,hierarchyChartOptionsDefs:Glt}=Blt._ModuleSupport,Vlt={type:"chart",name:"hierarchy",enterprise:!0,options:Glt,detect:jlt,create(t,e){return new IN(t,e)}},Wlt=(E(),w(_)),Hlt=(E(),w(_)),{Chart:Ult}=Hlt._ModuleSupport,AN=class extends Ult{getChartType(){return"standalone"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n;for(const a of[e,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);e.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:n,paddedRect:s}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};AN.className="StandaloneChart",AN.type="standalone";var{isAgStandaloneChartOptions:$lt,standaloneChartOptionsDefs:Klt}=Wlt._ModuleSupport,Ylt={type:"chart",name:"standalone",enterprise:!0,options:Klt,detect:$lt,create(t,e){return new AN(t,e)}},Zlt=(E(),w(_)),Xlt=(E(),w(_)),{Chart:qlt,MercatorScale:G3,NumberAxis:V3,Property:Qlt}=Xlt._ModuleSupport;function W3(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var GM=class extends qlt{constructor(t,e){super(t,e),this.xAxis=new V3(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new V3(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const t=this.getOptions();this.topology!==t.topology&&(this.topology=t.topology);const{topology:e}=this;this.series.forEach(i=>{W3(i)&&i.setChartTopology(e)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:s}=t;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n;const a=this.series.filter(W3),o=a.reduce((c,h)=>{if(!h.visible)return c;const u=h.topologyBounds;return u==null?c:c==null?u:(c.merge(u),c)},void 0);let r;if(o!=null){const{lon0:c,lat0:h,lon1:u,lat1:d}=o,p=[[c,h],[u,d]],g=G3.bounds(p),{width:f,height:x}=n,y=Math.min(f/g.width,x/g.height),b=g.width*y,v=g.height*y,M=(f-b)/2,D=(x-v)/2,L=M,A=D,C=M+b,T=D+v,N=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),P=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),O=(C-L)/(N.max-N.min),B=L-O*N.min,G=(T-A)/(1-P.min-(1-P.max)),V=A-G*(1-P.max);r=new G3(p,[[B,V],[B+O,V+G]])}a.forEach(c=>{c.scale=r});const l=this.series.some(c=>c.visible);e.visible=l;for(const c of[e,i])c.translationX=Math.floor(n.x),c.translationY=Math.floor(n.y),c.setClipRect(n.clone());this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:l,rect:n,paddedRect:n}})}};GM.className="TopologyChart",GM.type="topology",m([Qlt],GM.prototype,"topology",2);var{isAgTopologyChartOptions:Jlt,topologyChartOptionsDefs:tct}=Zlt._ModuleSupport,ect={type:"chart",name:"topology",enterprise:!0,options:tct,detect:Jlt,create(t,e){return new GM(t,e)}},ict=(E(),w(_)),sct=(E(),w(_)),_t=(R(),w(nt)),{annotationCalloutStylesDefs:nct,annotationNoteStylesDefs:act,annotationTextStylesDef:oct,annotationCommentStylesDefs:rct,annotationMeasurerStylesDefs:CN,annotationShapeStylesDefs:H3,annotationChannelTextDefs:lct,annotationCrossLineStyleDefs:U3,annotationFibonacciStylesDefs:$3,annotationLineStyleDefs:K3,annotationLineTextDefs:cct,annotationDisjointChannelStyleDefs:hct,annotationParallelChannelStyleDefs:uct}=sct._ModuleSupport,nx=(0,_t.optionsDefs)({__type:(0,_t.required)((0,_t.constant)("date")),value:(0,_t.or)(_t.string,_t.number)},"a serializable date object"),Y3=(0,_t.or)(_t.string,_t.number,nx),LN=(0,_t.or)(Y3,(0,_t.optionsDefs)({value:Y3,groupPercentage:(0,_t.numberRange)(-1,1)})),Z3={...lct,label:_t.string},Zl={...cct,label:_t.string},Re={x:LN,y:_t.number},dct=(0,_t.typeUnion)({line:{...K3,start:Re,end:Re,text:Zl},"horizontal-line":{...U3,value:LN,text:Zl},"vertical-line":{...U3,value:LN,text:Zl},"disjoint-channel":{...hct,startHeight:_t.positiveNumber,endHeight:_t.positiveNumber,start:Re,end:Re,text:Z3},"parallel-channel":{...uct,height:_t.positiveNumber,start:Re,end:Re,text:Z3},"fibonacci-retracement":{...$3,start:Re,end:Re,text:Zl,reverse:_t.boolean},"fibonacci-retracement-trend-based":{...$3,start:Re,end:Re,endRetracement:Re,text:Zl,reverse:_t.boolean},callout:{...nct,start:Re,end:Re,text:_t.string},comment:{...rct,...Re,text:_t.string},note:{...act,...Re,text:_t.string},text:{...oct,...Re,text:_t.string},arrow:{...K3,text:Zl,start:Re,end:Re},"arrow-up":{...H3,...Re},"arrow-down":{...H3,...Re},"date-range":{...CN,extendAbove:_t.boolean,extendBelow:_t.boolean,text:Zl,start:Re,end:Re},"price-range":{...CN,extendLeft:_t.boolean,extendRight:_t.boolean,text:Zl,start:Re,end:Re},"date-price-range":{...CN,text:Zl,start:Re,end:Re}},"an annotation initial state object"),pct={chartType:(0,_t.union)("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:(0,_t.arrayOfDefs)(dct),legend:(0,_t.arrayOfDefs)({visible:_t.boolean,seriesId:_t.string,itemId:_t.string,legendItemName:_t.string},"legend state array"),zoom:{rangeX:{start:(0,_t.or)(_t.number,nx),end:(0,_t.or)(_t.number,nx)},rangeY:{start:(0,_t.or)(_t.number,nx),end:(0,_t.or)(_t.number,nx)},ratioX:{start:_t.ratio,end:_t.ratio},ratioY:{start:_t.ratio,end:_t.ratio},autoScaledAxes:(0,_t.arrayOf)((0,_t.constant)("y"))}},gct=(E(),w(_)),Ie=(R(),w(nt)),fct=(E(),w(_)),wN=(E(),w(_)),ZMt=(R(),w(nt));function mct(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function yct(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var X3=(E(),w(_)),xct=(R(),w(nt)),{ScalableGroup:bct,Rect:ax,Line:ox,BBox:vct,Selection:q3,applyShapeFillBBox:Sct}=X3._ModuleSupport,Mct=class extends bct{constructor(){super(),this.append([new ax({tag:0}),new ax({tag:2}),new ax({tag:1}),new ox({tag:3}),new ox({tag:3}),new ox({tag:4}),new ox({tag:4})])}updateDatumStyles(t,e,i,s,n){const{bandwidth:a,scaledValues:{xValue:o,medianValue:r}}=t;let{minValue:l,q1Value:c,q3Value:h,maxValue:u}=t.scaledValues;(i&&!s||!i&&s)&&([u,h,c,l]=[l,c,h,u]);const d=(z,Y,Z,X)=>i?{y:z,x:Y,width:X,height:Z}:{x:z,y:Y,width:Z,height:X},p=(z,Y,Z)=>i?{y1:z,y2:Y,x:Z}:{x1:z,x2:Y,y:Z},g=(z,Y,Z)=>i?{x1:Y,x2:Z,y:z}:{x:z,y1:Y,y2:Z},f=(z,Y,Z,X)=>({x:z,y:Y,width:Z,height:X}=d(z,Y,Z,X),new vct(z,Y,Z,X)),{fill:x,fillOpacity:y,stroke:b,strokeWidth:v,strokeOpacity:M,lineDash:D,lineDashOffset:L,cornerRadius:A,cap:C,whisker:T}=e,N=q3.select(this,ax),[P]=N.selectByTag(0),[O]=N.selectByTag(2),[B]=N.selectByTag(1),G=N.selectByTag(3),V=N.selectByTag(4);T.strokeWidth>a&&(T.strokeWidth=a);const W=d(c,o,h-c,a);O.setProperties(W),P.setProperties(W),P.setProperties({cornerRadius:A});const H=Math.max(Math.round(r-v/2),c+v),$=Math.min(Math.round(r+v/2),h-v);B.setProperties(W),B.setProperties({visible:H<$,cornerRadius:A,clipBBox:f(H,o+v,$-H,Math.max(0,a-v*2))});const F=Math.floor(o+a*(1-C.lengthRatio)/2),j=Math.ceil(o+a*(1+C.lengthRatio)/2);V[0].setProperties(g(l,F,j)),V[1].setProperties(g(u,F,j)),G[0].setProperties(p(Math.round(l+T.strokeWidth/2),c,Math.floor(o+a/2))),G[1].setProperties(p(h,Math.round(u-T.strokeWidth/2),Math.floor(o+a/2))),Sct(P,x,n),P.setProperties({fill:x,fillOpacity:y,strokeWidth:v*2,strokeOpacity:0}),B.setProperties({fill:b,fillOpacity:M,strokeWidth:0});for(const z of[...G,...V])z.setProperties(T);O.setProperties({stroke:b,strokeWidth:v,strokeOpacity:M,lineDash:D,lineDashOffset:L,cornerRadius:A,fillOpacity:0})}distanceSquared(t,e){const i=q3.selectByClass(this,ax,ox);return X3._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(xct.Logger.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}},Dct=(E(),w(_)),{BaseProperties:Q3,FillGradientDefaults:kct,FillPatternDefaults:Ict,FillImageDefaults:Act,AbstractBarSeriesProperties:Cct,SeriesTooltip:Lct,Property:ce,mergeDefaults:wct}=Dct._ModuleSupport,J3=class extends Q3{constructor(){super(...arguments),this.lengthRatio=.5}};m([ce],J3.prototype,"lengthRatio",2);var $g=class extends Q3{};m([ce],$g.prototype,"stroke",2),m([ce],$g.prototype,"strokeWidth",2),m([ce],$g.prototype,"strokeOpacity",2),m([ce],$g.prototype,"lineDash",2),m([ce],$g.prototype,"lineDashOffset",2);var Ae=class extends Cct{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new kct,this.fillPatternDefaults=new Ict,this.fillImageDefaults=new Act,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new J3,this.whisker=new $g,this.tooltip=new Lct}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:n}=this,a=super.toJson();return a.whisker=wct(a.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:n}),a}};m([ce],Ae.prototype,"xKey",2),m([ce],Ae.prototype,"minKey",2),m([ce],Ae.prototype,"q1Key",2),m([ce],Ae.prototype,"medianKey",2),m([ce],Ae.prototype,"q3Key",2),m([ce],Ae.prototype,"maxKey",2),m([ce],Ae.prototype,"xName",2),m([ce],Ae.prototype,"yName",2),m([ce],Ae.prototype,"minName",2),m([ce],Ae.prototype,"q1Name",2),m([ce],Ae.prototype,"medianName",2),m([ce],Ae.prototype,"q3Name",2),m([ce],Ae.prototype,"maxName",2),m([ce],Ae.prototype,"fill",2),m([ce],Ae.prototype,"fillGradientDefaults",2),m([ce],Ae.prototype,"fillPatternDefaults",2),m([ce],Ae.prototype,"fillImageDefaults",2),m([ce],Ae.prototype,"fillOpacity",2),m([ce],Ae.prototype,"stroke",2),m([ce],Ae.prototype,"strokeWidth",2),m([ce],Ae.prototype,"strokeOpacity",2),m([ce],Ae.prototype,"lineDash",2),m([ce],Ae.prototype,"lineDashOffset",2),m([ce],Ae.prototype,"cornerRadius",2),m([ce],Ae.prototype,"itemStyler",2),m([ce],Ae.prototype,"cap",2),m([ce],Ae.prototype,"whisker",2),m([ce],Ae.prototype,"tooltip",2);var{extractDecoratedProperties:tH,fixNumericExtent:Tct,keyProperty:Nct,mergeDefaults:TN,SeriesNodePickMode:eH,SMALLEST_KEY_INTERVAL:Oct,valueProperty:rx,diff:_ct,animationValidation:Ect,computeBarFocusBounds:Pct,createDatumId:iH,ContinuousScale:Rct,ChartAxisDirection:Bct,motion:sH,isGradientFill:zct,getShapeStyle:lx}=wN._ModuleSupport,Fct=class extends wN._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},VM=class extends wN._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[eH.NEAREST_NODE,eH.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new Ae,this.NodeEvent=Fct}async processData(t){if(!this.visible)return;const{xKey:e,minKey:i,q1Key:s,medianKey:n,q3Key:a,maxKey:o}=this.properties,r=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:l,yScale:c}),p=[];r&&this.processedData&&p.push(_ct(this.id,this.processedData)),r&&p.push(Ect());const{processedData:g}=await this.requestDataModel(t,this.data,{props:[Nct(e,u,{id:"xValue"}),rx(i,d,{id:"minValue"}),rx(s,d,{id:"q1Value"}),rx(n,d,{id:"medianValue"}),rx(a,d,{id:"q3Value"}),rx(o,d,{id:"maxValue"}),...h?[Oct]:[],...p]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t!==this.getBarDirection()){const{index:n,def:a}=i.resolveProcessedDataDefById(this,"xValue"),o=e.domain.keys[n];return a.type==="key"&&a.valueType==="category"?o:this.padBandExtent(o)}const s=this.domainForClippedRange(t,["minValue","maxValue"],"xValue",!0);return Tct(s)}getSeriesRange(t,e){return this.domainForVisibleRange(Bct.Y,["maxValue","minValue"],"xValue",e,!0)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,s=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&i&&s&&n))return;const{xKey:a,fill:o,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:d,cap:p,whisker:g}=this.properties,f=[],x=e.resolveKeysById(this,"xValue",i),y=e.resolveColumnById(this,"minValue",i),b=e.resolveColumnById(this,"q1Value",i),v=e.resolveColumnById(this,"medianValue",i),M=e.resolveColumnById(this,"q3Value",i),D=e.resolveColumnById(this,"maxValue",i),{barWidth:L,groupIndex:A}=this.updateGroupScale(s),C=Rct.is(s.scale)?L*-.5:0,{groupScale:T}=this,N=this.isVertical(),P={itemId:a,nodeData:f,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};return t&&(i.dataSources.get(this.id)??[]).forEach((B,G)=>{const V=x[G];if(V==null)return;const W=y[G],H=b[G],$=v[G],F=M[G],j=D[G];if([W,H,$,F,j].some(Q=>typeof Q!="number")||W>H||H>$||$>F||F>j)return;const z={xValue:Math.round(s.scale.convert(V)),minValue:Math.round(n.scale.convert(W)),q1Value:Math.round(n.scale.convert(H)),medianValue:Math.round(n.scale.convert($)),q3Value:Math.round(n.scale.convert(F)),maxValue:Math.round(n.scale.convert(j))};z.xValue+=Math.round(T.convert(String(A)))+C;const Y=Math.round(L),Z=Math.abs(z.q3Value-z.q1Value),X=z.xValue+Y/2,tt=Math.min(z.q3Value,z.q1Value)+Z/2,q={x:N?X:tt,y:N?tt:X};let it;N?it={x:q.x-Y/2,y:z.minValue,width:Y,height:z.maxValue-z.minValue}:it={x:z.minValue,y:q.y-Y/2,width:z.maxValue-z.minValue,height:Y},f.push({series:this,itemId:V,datum:B,datumIndex:G,xKey:a,bandwidth:Y,scaledValues:z,cap:p,whisker:g,fill:o,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:d,midPoint:q,focusRect:it})}),P}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:lx({fill:t,fillOpacity:e,stroke:i,strokeOpacity:n,strokeWidth:s,lineDash:a,lineDashOffset:o},r,l,c)}}getLegendData(t){const{id:e,ctx:{legendManager:i},visible:s}=this,{xKey:n,yName:a,showInLegend:o,legendItemName:r}=this.properties;return!n||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:e}),label:{text:r??a??e},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!o}]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{xKey:a,xName:o,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:d,q3Name:p,minKey:g,minName:f,maxKey:x,maxName:y,legendItemName:b,tooltip:v}=n,M=this.getCategoryAxis(),D=this.getValueAxis();if(!i||!s||!M||!D)return;const L=s.dataSources.get(this.id)?.[t],A=i.resolveKeysById(this,"xValue",s)[t],C=i.resolveColumnById(this,"minValue",s)[t],T=i.resolveColumnById(this,"q1Value",s)[t],N=i.resolveColumnById(this,"medianValue",s)[t],P=i.resolveColumnById(this,"q3Value",s)[t],O=i.resolveColumnById(this,"maxValue",s)[t];if(A==null)return;const B=this.getItemBaseStyle(!1);return Object.assign(B,this.getItemStyleOverrides(String(t),L,B,!1)),this.formatTooltipWithContext(v,{heading:M.formatDatum(A),title:b??r,symbol:this.legendItemSymbol(),data:[{label:f,fallbackLabel:g,value:D.formatDatum(C)},{label:u,fallbackLabel:h,value:D.formatDatum(T)},{label:c,fallbackLabel:l,value:D.formatDatum(N)},{label:p,fallbackLabel:d,value:D.formatDatum(P)},{label:y,fallbackLabel:x,value:D.formatDatum(O)}]},{seriesId:e,datum:L,title:r,xKey:a,xName:o,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:d,q3Name:p,minKey:g,minName:f,maxKey:x,maxName:y,...B})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:s}=mct(e);sH.resetMotion([t],yct(e)),sH.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,cap:s,whisker:n,fillGradientDefaults:a,fillPatternDefaults:o,fillImageDefaults:r}=e,l=t?e.highlightStyle.item:void 0,c=this.getStrokeWidth(e.strokeWidth);return lx({fill:l?.fill??e.fill,fillOpacity:l?.fillOpacity??e.fillOpacity,stroke:l?.stroke??e.stroke,strokeWidth:l?.strokeWidth??c,strokeOpacity:l?.strokeOpacity??e.strokeOpacity,lineDash:l?.lineDash??e.lineDash??[],lineDashOffset:l?.lineDashOffset??e.lineDashOffset,cornerRadius:i,cap:s,whisker:n},a,o,r)}getItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,minKey:r,q1Key:l,medianKey:c,q3Key:h,maxKey:u,fillGradientDefaults:d,fillPatternDefaults:p,fillImageDefaults:g,itemStyler:f}=a;if(f==null)return;const x=this.cachedDatumCallback(iH(t,s?"highlight":"node"),()=>this.callWithContext(f,{seriesId:n,datum:e,xKey:o,minKey:r,q1Key:l,medianKey:c,q3Key:h,maxKey:u,highlighted:s,...i}));return lx(x,d,p,g)}updateDatumNodes({datumSelection:t,isHighlight:e}){const i=this.isVertical(),s=this.getValueAxis()?.isReversed(),{highlightStyle:n}=this.properties;t.each((a,o)=>{let r=this.getFormattedStyles(o,e?"highlight":"node");e&&(r=TN(n.item,r));const{stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:d}=r;r.whisker=TN(r.whisker,{stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:d});const p=this.getShapeFillBBox();a.updateDatumStyles(o,r,i,s,p)})}updateLabelNodes(){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}nodeFactory(){return new Mct}getFormattedStyles(t,e){const{id:i,properties:s}=this,{xKey:n,minKey:a,q1Key:o,medianKey:r,q3Key:l,maxKey:c,itemStyler:h,cornerRadius:u,fillGradientDefaults:d,fillPatternDefaults:p,fillImageDefaults:g}=s,{datum:f,stroke:x,strokeWidth:y,strokeOpacity:b,lineDash:v,lineDashOffset:M,cap:D,whisker:L}=t;let A,C=1;zct(t.fill)?A=t.fill:(A=t.fill,C=s.fillOpacity);let T=lx({fill:A,fillOpacity:C,stroke:x,strokeWidth:y,strokeOpacity:b,lineDash:v,lineDashOffset:M,cornerRadius:u,cap:tH(D),whisker:tH(L)},d,p,g);if(h){const N=this.cachedDatumCallback(iH(f.index,e),()=>this.callWithContext(h,{datum:f,seriesId:i,highlighted:e==="highlight",...T,xKey:n,minKey:a,q1Key:o,medianKey:r,q3Key:l,maxKey:c}));N&&(T=lx(TN(N,T),d,p,g))}return T}computeFocusBounds({datumIndex:t}){return Pct(this,this.contextNodeData?.nodeData[t].focusRect)}};VM.className="BoxPlotSeries",VM.type="box-plot";var jct=(E(),w(_)),ri=(R(),w(nt)),{boxPlotSeriesThemeableOptionsDef:Gct,commonSeriesOptionsDefs:Vct}=jct._ModuleSupport,Wct={...Gct,...Vct,type:(0,ri.required)((0,ri.constant)("box-plot")),xKey:(0,ri.required)(ri.string),minKey:(0,ri.required)(ri.string),q1Key:(0,ri.required)(ri.string),medianKey:(0,ri.required)(ri.string),q3Key:(0,ri.required)(ri.string),maxKey:(0,ri.required)(ri.string),xName:ri.string,yName:ri.string,minName:ri.string,q1Name:ri.string,medianName:ri.string,q3Name:ri.string,maxName:ri.string,grouped:ri.boolean,legendItemName:ri.string},WM=(E(),w(_)),{CARTESIAN_AXIS_TYPE:nH}=WM._ModuleSupport.ThemeConstants,Hct={series:{direction:"vertical",fill:{$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$palette:"fill"}]}]},{$palette:"fill"},{$mix:[WM._ModuleSupport.SAFE_FILL_OPERATION,{$ref:"backgroundColor"},.7]}]},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:WM._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:WM._ModuleSupport.FILL_IMAGE_DEFAULTS,strokeWidth:2},axes:{[nH.NUMBER]:{crosshair:{snap:!1}},[nH.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},Uct={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:t=>new VM(t),tooltipDefaults:{range:"exact"},defaultAxes:fct._ModuleSupport.DIRECTION_SWAP_AXES,themeTemplate:Hct,groupable:!0},aH={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:Wct,create:t=>new VM(t)},$ct=(E(),w(_)),Kct=(E(),w(_)),NN=(E(),w(_)),oH=(R(),w(nt)),Yct=(E(),w(_)),{findMinMax:Zct}=Yct._ModuleSupport,Rs=0,kn=1,$n=2,Kn=3,Aa=4;function cx(t,e=1){let i=Math.ceil(Math.log2(t.length/e))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function hx(t){return Zct(t.map(e=>Number(e)))}function HM(t,e,i){return(t.valueOf()-e)/(i-e)}function UM(t,e){return Math.min(Math.floor(t*e),e-1)*Aa|0}function ux(t,e,i,s,n,a){const o=new Int32Array(a*Aa).fill(-1),r=new Float64Array(a*Aa).fill(NaN);for(let l=0;l<t.length;l+=1){const c=t[l],h=e[l],u=i[l];if(c==null||h==null||u==null)continue;const d=HM(c,s,n),p=h.valueOf(),g=u.valueOf(),f=UM(d,a),x=o[f+Rs]===-1;(x||d<r[f+Rs])&&(o[f+Rs]=l,r[f+Rs]=d),(x||d>r[f+kn])&&(o[f+kn]=l,r[f+kn]=d),(x||g<r[f+$n])&&(o[f+$n]=l,r[f+$n]=g),(x||p>r[f+Kn])&&(o[f+Kn]=l,r[f+Kn]=p)}return{indexData:o,valueData:r}}function dx(t,e,i,{inPlace:s=!1}={}){const n=i/2|0,a=s?t:new Int32Array(n*Aa),o=s?e:new Float64Array(n*Aa);for(let r=0;r<n;r+=1){const l=r*Aa|0,c=l*2|0,h=c+Aa|0,u=t[h+Rs]===-1,d=u||e[c+Rs]<e[h+Rs]?c:h;a[l+Rs]=t[d+Rs],o[l+Rs]=e[d+Rs];const p=u||e[c+kn]>e[h+kn]?c:h;a[l+kn]=t[p+kn],o[l+kn]=e[p+kn];const g=u||e[c+$n]<e[h+$n]?c:h;a[l+$n]=t[g+$n],o[l+$n]=e[g+$n];const f=u||e[c+Kn]>e[h+Kn]?c:h;a[l+Kn]=t[f+Kn],o[l+Kn]=e[f+Kn]}return{maxRange:n,indexData:a,valueData:o}}var Xct=1e3,rH=Rs,qct=Kn,Qct=$n,lH=kn;function Jct(t,e,i,s){if(t.length<Xct)return;const[n,a]=hx(s);let o=cx(t),{indexData:r,valueData:l}=ux(t,e,i,n,a,o);const c=[{maxRange:o,indexData:r}];for(;o>64;)({indexData:r,valueData:l,maxRange:o}=dx(r,l,o)),c.push({maxRange:o,indexData:r});return c.reverse(),c}var{fixNumericExtent:tht,keyProperty:eht,createDatumId:cH,SeriesNodePickMode:hH,ChartAxisDirection:uH,SMALLEST_KEY_INTERVAL:iht,valueProperty:$M,diff:sht,animationValidation:nht,computeBarFocusBounds:aht,visibleRangeIndices:dH,ContinuousScale:oht,DiscreteTimeScale:rht,BandScale:lht,getShapeStyle:ON}=NN._ModuleSupport,cht=class extends NN._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.openKey=s.properties.openKey,this.closeKey=s.properties.closeKey,this.highKey=s.properties.highKey,this.lowKey=s.properties.lowKey}},pH=class extends NN._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[hH.AXIS_ALIGNED,hH.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=cht,this.dataAggregationFilters=void 0}async processData(t){if(!this.visible)return;const{xKey:e,openKey:i,closeKey:s,highKey:n,lowKey:a}=this.properties,o=!this.ctx.animationManager.isSkipped(),r=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:h,yScaleType:u}=this.getScaleInformation({xScale:r,yScale:l}),d=[];o&&(this.processedData&&d.push(sht(this.id,this.processedData)),d.push(nht())),i&&d.push($M(i,u,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:p,processedData:g}=await this.requestDataModel(t,this.data,{props:[eht(e,h,{id:"xValue"}),$M(s,u,{id:"closeValue"}),$M(n,u,{id:"highValue"}),$M(a,u,{id:"lowValue"}),...c?[iht]:[],...d]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(p,g),this.animationState.transition("updateData")}aggregateData(t,e){const i=this.axes[uH.X];if(i==null||!(oht.is(i.scale)||rht.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),n=t.resolveColumnById(this,"highValue",e),a=t.resolveColumnById(this,"lowValue",e),{index:o}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[o];return Jct(s,n,a,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t!==this.getBarDirection()){const{index:n,def:a}=i.resolveProcessedDataDefById(this,"xValue"),o=e.domain.keys[n];return a.type==="key"&&a.valueType==="category"?o:this.padBandExtent(o)}const s=this.domainForClippedRange(t,["highValue","lowValue"],"xValue",!0);return tht(s)}getSeriesRange(t,e){return this.domainForVisibleRange(uH.Y,["highValue","lowValue"],"xValue",e,!0)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["highValue","lowValue"],t,e,i)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,s=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&i&&s&&n))return;const a=[],{xKey:o,highKey:r,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],h=e.resolveKeysById(this,"xValue",i),u=e.resolveColumnById(this,"openValue",i),d=e.resolveColumnById(this,"closeValue",i),p=e.resolveColumnById(this,"highValue",i),g=e.resolveColumnById(this,"lowValue",i),{groupScale:f}=this,{barWidth:x,groupIndex:y}=this.updateGroupScale(s),b=f.convert(String(y)),v=x>=1?x:f.rawBandwidth,M=lht.is(s.scale),D={itemId:o,nodeData:a,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!t)return D;const L=(G,V,W,H,$,F,j,z)=>{const Y=c[G],Z=M?j/2:0,X=s.scale.convert(V)+b+Z,tt=n.scale.convert(W),q=n.scale.convert(H),it=n.scale.convert($),Q=n.scale.convert(F),rt=H>W,at=rt?"up":"down",ht=Math.min(it,Q),dt=Math.max(it,Q)-ht,Mt={x:X,y:ht+dt/2};a.push({series:this,itemId:at,datum:Y,datumIndex:G,xKey:o,xValue:V,openValue:W,closeValue:H,highValue:$,lowValue:F,midPoint:Mt,aggregatedValue:H,isRising:rt,centerX:X,width:j,y:ht,height:dt,yOpen:tt,yClose:q,crisp:z})},{dataAggregationFilters:A}=this,C=s.scale,[T,N]=C.range,P=N-T,O=G=>C.convert(h[G])+b,B=A?.find(G=>G.maxRange>P);if(B==null){let[G,V]=dH(c.length,s.range,W=>{const H=O(W);return[H,H+v]});i.input.count<1e3&&(G=0,V=i.input.count);for(let W=G;W<V;W+=1){const H=h[W];if(H==null)continue;const $=u[W],F=d[W],j=p[W],z=g[W],Y=z!=null&&z<=$&&z<=F,Z=j!=null&&j>=$&&j>=F;if(!Y){oH.Logger.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!Z){oH.Logger.warnOnce(`invalid high value for key [${r}] in data element, high value cannot be lower than datum open or close values.`);continue}L(W,H,$,F,j,z,v,!0)}}else{const{maxRange:G,indexData:V}=B,[W,H]=dH(G,s.range,$=>{const F=$*Aa,j=V[F+rH],z=V[F+lH];if(j!==-1)return[O(j),O(z)+v]});for(let $=W;$<H;$+=1){const F=$*Aa,j=V[F+rH],z=V[F+lH],Y=V[F+qct],Z=V[F+Qct];if(j===-1)continue;const X=(j+z)/2|0,tt=h[X];if(tt==null)continue;const q=u[j],it=d[z],Q=p[Y],rt=g[Z],at=Math.abs(O(z)-O(j))+v;L(X,tt,q,it,Q,rt,at,!1)}}return D}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}updateLabelNodes(t){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}getItemBaseStyle(t,e){const{properties:i}=this,s=i.item[t],n=e?i.highlightStyle.item:void 0,a={fill:n?.fill??s.fill,fillOpacity:n?.fillOpacity??s.fillOpacity,stroke:n?.stroke??s.stroke,strokeWidth:n?.strokeWidth??s.strokeWidth,strokeOpacity:n?.strokeOpacity??s.strokeOpacity,lineDash:n?.lineDash??s.lineDash,lineDashOffset:n?.lineDashOffset??s.lineDashOffset};return s.fillGradientDefaults&&s.fillPatternDefaults&&s.fillImageDefaults?ON(a,s.fillGradientDefaults,s.fillPatternDefaults,s.fillImageDefaults):a}getItemStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,r=o.item[i],{itemStyler:l}=o;if(l==null)return;const{xKey:c,openKey:h,closeKey:u,highKey:d,lowKey:p}=o,g=this.cachedDatumCallback(cH(t,n?"highlight":"node"),()=>this.callWithContext(l,{seriesId:a,datum:e,itemId:i,xKey:c,openKey:h,closeKey:u,highKey:d,lowKey:p,highlighted:n,...s}));return r.fillGradientDefaults&&r.fillPatternDefaults&&r.fillImageDefaults?ON(g,r.fillGradientDefaults,r.fillPatternDefaults,r.fillImageDefaults):g}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{xKey:a,xName:o,yName:r,openKey:l,openName:c,highKey:h,highName:u,lowKey:d,lowName:p,closeKey:g,closeName:f,legendItemName:x,tooltip:y}=n,b=this.getCategoryAxis(),v=this.getValueAxis();if(!i||!s||!b||!v)return;const M=s.dataSources.get(this.id)?.[t],D=i.resolveKeysById(this,"xValue",s)[t],L=i.resolveColumnById(this,"openValue",s)[t],A=i.resolveColumnById(this,"highValue",s)[t],C=i.resolveColumnById(this,"lowValue",s)[t],T=i.resolveColumnById(this,"closeValue",s)[t];if(D==null)return;const N=T>=L?"up":"down",P=this.properties.item[N],O=this.getItemBaseStyle(N,!1);Object.assign(O,this.getItemStyleOverrides(String(t),M,N,O,!1));let B={fill:P.fill??P.stroke,fillOpacity:P.fillOpacity??P.strokeOpacity??1,stroke:P.stroke,strokeWidth:P.strokeWidth??1,strokeOpacity:P.strokeOpacity??1,lineDash:P.lineDash??[0],lineDashOffset:P.lineDashOffset??0};return P.fillGradientDefaults&&P.fillPatternDefaults&&P.fillImageDefaults&&(B=ON(B,P.fillGradientDefaults,P.fillPatternDefaults,P.fillImageDefaults)),this.formatTooltipWithContext(y,{heading:b.formatDatum(D),title:x,symbol:{marker:B},data:[{label:c,fallbackLabel:l,value:v.formatDatum(L)},{label:u,fallbackLabel:h,value:v.formatDatum(A)},{label:p,fallbackLabel:d,value:v.formatDatum(C)},{label:f,fallbackLabel:g,value:v.formatDatum(T)}]},{seriesId:e,datum:M,title:r,itemId:N,xKey:a,xName:o,yName:r,openKey:l,openName:c,highKey:h,highName:u,lowKey:d,lowName:p,closeKey:g,closeName:f,...O})}getDatumId(t){return cH(t.xValue)}computeFocusBounds(t){const e=this.getNodeData()?.at(t.datumIndex);if(e==null)return;const{centerX:i,y:s,width:n,height:a}=e,o={x:i-n/2,y:s,width:n,height:a};return aht(this,o)}},hht=(E(),w(_)),uht=(E(),w(_)),{Path:dht,SceneChangeDetection:vh,BBox:pht}=uht._ModuleSupport,jr=class extends dht{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:t,y:e,width:i,height:s}=this;return new pht(t-i/2,e,i,s)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:t,width:e,height:i,crisp:s,strokeAlignment:n}=this;let{centerX:a,yOpen:o,yClose:r}=this,l=a-e/2,c=a+e/2,h=t,u=t+i;if(s&&e>1){a=this.align(a),o=this.align(o),r=this.align(r);const p=this.align(e/2);l=a-p,c=a+p,h=this.align(t),u=h+this.align(h,i)}const d=(h+u)/2;return a+=n,l+=n,c+=n,h-=n,u+=n,o+=o<d?n:-n,r+=r<d?n:-n,{centerX:a,x0:l,x1:c,y0:h,y1:u,yOpen:o,yClose:r}}executeStroke(t,e){const{width:i,strokeWidth:s}=this;i<s&&(t.lineWidth=i),super.executeStroke(t,e)}};m([vh()],jr.prototype,"centerX",2),m([vh()],jr.prototype,"y",2),m([vh()],jr.prototype,"width",2),m([vh()],jr.prototype,"height",2),m([vh()],jr.prototype,"yOpen",2),m([vh()],jr.prototype,"yClose",2),m([vh()],jr.prototype,"crisp",2),m([vh()],jr.prototype,"strokeAlignment",2);var ght=class extends jr{updatePath(){const{path:t}=this,{centerX:e,x0:i,x1:s,y0:n,y1:a,yOpen:o,yClose:r}=this.alignedCoordinates();t.clear(),t.moveTo(e,n),t.lineTo(e,a),Math.abs(s-i)>1&&(t.moveTo(i,o),t.lineTo(e,o),t.moveTo(e,r),t.lineTo(s,r))}},{SceneArrayChangeDetection:fht,SceneChangeDetection:KM,ExtendedPath2D:mht,BBox:yht}=hht._ModuleSupport,Kg=class extends jr{constructor(){super(...arguments),this.wickPath=new mht,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:t,centerX:e,yOpen:i,yClose:s}=this,n=Math.min(i,s),o=Math.max(i,s)-n,r=e-t/2,l=e+t/2;return new yht(r,n,l-r,o)}updatePath(){const{path:t,stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:a,wickStroke:o,wickStrokeWidth:r,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:h,strokeAlignment:u}=this,{centerX:d,x0:p,x1:g,y0:f,y1:x,yOpen:y,yClose:b}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const M=o!=null&&o!==e||r!=null&&r!==i||l!=null&&l!==s||c!=null&&c!==n||h!=null&&h!==a?this.wickPath:t;if(Math.abs(g-p)<=3){M.moveTo(d,f),M.lineTo(d,x);return}const D=Math.min(y,b),L=Math.max(y,b);M.moveTo(d,f),M.lineTo(d,D+i/2),M.moveTo(d,x),M.lineTo(d,L-i/2);const A=u+i/2,C=L-D-2*A;if(C>0)t.rect(p+A,D+A,g-p-2*A,C);else{const T=(D+L)/2;t.moveTo(p,T),t.lineTo(g,T)}}drawPath(t){super.drawPath(t);const{wickPath:e}=this;if(e.isEmpty())return;const{stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,wickStroke:r=i,wickStrokeWidth:l=s,wickStrokeOpacity:c=n,wickLineDash:h=a,wickLineDashOffset:u=o}=this;l!==0&&(t.globalAlpha*=c,typeof r=="string"&&(t.strokeStyle=r),t.lineWidth=l,h!=null&&t.setLineDash([...h]),t.lineDashOffset=u,t.stroke(e.getPath2D()))}};m([KM()],Kg.prototype,"wickStroke",2),m([KM()],Kg.prototype,"wickStrokeWidth",2),m([KM()],Kg.prototype,"wickStrokeOpacity",2),m([fht()],Kg.prototype,"wickLineDash",2),m([KM()],Kg.prototype,"wickLineDashOffset",2);var xht=(E(),w(_)),bht=(E(),w(_)),{BaseProperties:gH,Property:Ni,AbstractBarSeriesProperties:vht,SeriesTooltip:Sht}=bht._ModuleSupport,_d=class extends gH{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};m([Ni],_d.prototype,"stroke",2),m([Ni],_d.prototype,"strokeWidth",2),m([Ni],_d.prototype,"strokeOpacity",2),m([Ni],_d.prototype,"lineDash",2),m([Ni],_d.prototype,"lineDashOffset",2);var _N=class extends gH{constructor(){super(...arguments),this.up=new _d,this.down=new _d}};m([Ni],_N.prototype,"up",2),m([Ni],_N.prototype,"down",2);var Ca=class extends vht{};m([Ni],Ca.prototype,"xKey",2),m([Ni],Ca.prototype,"openKey",2),m([Ni],Ca.prototype,"closeKey",2),m([Ni],Ca.prototype,"highKey",2),m([Ni],Ca.prototype,"lowKey",2),m([Ni],Ca.prototype,"xName",2),m([Ni],Ca.prototype,"yName",2),m([Ni],Ca.prototype,"openName",2),m([Ni],Ca.prototype,"closeName",2),m([Ni],Ca.prototype,"highName",2),m([Ni],Ca.prototype,"lowName",2);var YM=class extends Ca{constructor(){super(...arguments),this.tooltip=new Sht,this.item=new _N}};m([Ni],YM.prototype,"tooltip",2),m([Ni],YM.prototype,"item",2),m([Ni],YM.prototype,"itemStyler",2);var{FillGradientDefaults:Mht,FillPatternDefaults:Dht,FillImageDefaults:kht,BaseProperties:EN,SeriesTooltip:Iht,Property:xi}=xht._ModuleSupport,Yg=class extends EN{};m([xi],Yg.prototype,"stroke",2),m([xi],Yg.prototype,"strokeWidth",2),m([xi],Yg.prototype,"strokeOpacity",2),m([xi],Yg.prototype,"lineDash",2),m([xi],Yg.prototype,"lineDashOffset",2);var Yn=class extends EN{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Mht,this.fillPatternDefaults=new Dht,this.fillImageDefaults=new kht,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Yg}};m([xi],Yn.prototype,"fill",2),m([xi],Yn.prototype,"fillGradientDefaults",2),m([xi],Yn.prototype,"fillPatternDefaults",2),m([xi],Yn.prototype,"fillImageDefaults",2),m([xi],Yn.prototype,"fillOpacity",2),m([xi],Yn.prototype,"stroke",2),m([xi],Yn.prototype,"strokeWidth",2),m([xi],Yn.prototype,"strokeOpacity",2),m([xi],Yn.prototype,"lineDash",2),m([xi],Yn.prototype,"lineDashOffset",2),m([xi],Yn.prototype,"cornerRadius",2),m([xi],Yn.prototype,"wick",2);var PN=class extends EN{constructor(){super(...arguments),this.up=new Yn,this.down=new Yn}};m([xi],PN.prototype,"up",2),m([xi],PN.prototype,"down",2);var ZM=class extends Ca{constructor(){super(...arguments),this.item=new PN,this.tooltip=new Iht}};m([xi],ZM.prototype,"item",2),m([xi],ZM.prototype,"tooltip",2),m([xi],ZM.prototype,"itemStyler",2);var{createDatumId:Aht,isGradientFill:fH,isPatternFill:RN,isImageFill:BN,getShapeFill:mH,applyShapeStyle:Cht,getShapeStyle:zN}=Kct._ModuleSupport,XM=class extends pH{constructor(){super(...arguments),this.properties=new ZM}nodeFactory(){return new Kg}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:s}=this,{xKey:n,highKey:a,lowKey:o,openKey:r,closeKey:l,item:c,itemStyler:h}=s,{up:u,down:d}=c,p=zN({fill:u.fill,fillOpacity:u.fillOpacity,stroke:u.stroke,strokeWidth:u.strokeWidth,strokeOpacity:u.strokeOpacity,lineDash:u.lineDash,lineDashOffset:u.lineDashOffset},u.fillGradientDefaults,u.fillPatternDefaults,u.fillImageDefaults),g=zN({fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeWidth:d.strokeWidth,strokeOpacity:d.strokeOpacity,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},d.fillGradientDefaults,d.fillPatternDefaults,d.fillImageDefaults),f=e?s.highlightStyle.item:void 0;t.each((x,y)=>{const{isRising:b,centerX:v,width:M,y:D,height:L,yOpen:A,yClose:C,crisp:T}=y;let N;if(h!=null){const{fill:G,fillOpacity:V,stroke:W,strokeWidth:H,strokeOpacity:$,lineDash:F,lineDashOffset:j}=b?p:g;N=zN(this.cachedDatumCallback(Aht(this.getDatumId(y),e?"highlight":"node"),()=>this.callWithContext(h,{seriesId:i,itemId:y.itemId,xKey:n,highKey:a,lowKey:o,openKey:r,closeKey:l,datum:y.datum,fill:G,fillOpacity:V,strokeOpacity:$,stroke:W,strokeWidth:H,lineDash:F,lineDashOffset:j,highlighted:e})),b?u.fillGradientDefaults:d.fillGradientDefaults,b?u.fillPatternDefaults:d.fillPatternDefaults,b?u.fillImageDefaults:d.fillImageDefaults)}x.centerX=v,x.width=M,x.y=D,x.height=L,x.yOpen=A,x.yClose=C,x.crisp=T;const P=b?p:g,O=b?u.wick:d.wick;Cht(x,{fill:f?.fill??N?.fill??P.fill,fillOpacity:f?.fillOpacity??N?.fillOpacity??P.fillOpacity,stroke:f?.stroke??N?.stroke??P.stroke,strokeWidth:f?.strokeWidth??N?.strokeWidth??P.strokeWidth,strokeOpacity:f?.strokeOpacity??N?.strokeOpacity??P.strokeOpacity,lineDash:f?.lineDash??N?.lineDash??P.lineDash,lineDashOffset:f?.lineDashOffset??N?.lineDashOffset??P.lineDashOffset},void 0,this.getShapeFillBBox());const B=N?.wick;x.wickStroke=f?.stroke??B?.stroke??O.stroke,x.wickStrokeWidth=f?.strokeWidth??B?.strokeWidth??O.strokeWidth,x.wickStrokeOpacity=f?.strokeOpacity??B?.strokeOpacity??O.strokeOpacity,x.wickLineDash=f?.lineDash??B?.lineDash??O.lineDash,x.wickLineDashOffset=f?.lineDashOffset??B?.lineDashOffset??O.lineDashOffset,x.strokeAlignment=(N?.strokeWidth??P.strokeWidth)/2})}legendItemSymbol(){const{up:t,down:e}=this.properties.item,i=mH(t.fill,t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults),s=fH(i)?i.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:RN(i)||BN(i)?t.stroke:i,stop:0},{color:RN(i)||BN(i)?t.stroke:i,stop:.5}],n=mH(e.fill,e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults),a=fH(n)?n.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:RN(n)||BN(n)?e.stroke:n,stop:.5}],o={type:"gradient",gradient:"linear",rotation:90,colorStops:[...s,...a],reverse:!1},r={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:t.stroke,stop:0},{color:t.stroke,stop:.5},{color:e.stroke,stop:.5}],reverse:!1};return{marker:{fill:o,fillOpacity:t.fillOpacity,stroke:r,strokeWidth:t.strokeWidth??1,strokeOpacity:t.strokeOpacity??1,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset}}}getLegendData(t){const{id:e,data:i,visible:s,ctx:{legendManager:n}}=this,{xKey:a,yName:o,showInLegend:r,legendItemName:l}=this.properties;return!i?.length||!a||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:s&&n.getItemEnabled({seriesId:e,itemId:e}),label:{text:l??o??e},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!r}]}};XM.className="CandleStickSeries",XM.type="candlestick";var Lht=(E(),w(_)),bi=(R(),w(nt)),{commonSeriesOptionsDefs:wht,candlestickSeriesThemeableOptionsDef:Tht}=Lht._ModuleSupport,FN={...Tht,...wht,type:(0,bi.required)((0,bi.constant)("candlestick")),xKey:(0,bi.required)(bi.string),openKey:(0,bi.required)(bi.string),highKey:(0,bi.required)(bi.string),lowKey:(0,bi.required)(bi.string),closeKey:(0,bi.required)(bi.string),xName:bi.string,yName:bi.string,openName:bi.string,highName:bi.string,lowName:bi.string,closeName:bi.string};FN.pickOutsideVisibleMinorAxis=(0,bi.undocumented)(bi.boolean),FN.focusPriority=(0,bi.undocumented)(bi.number);var jN=(E(),w(_)),{CARTESIAN_AXIS_TYPE:yH}=jN._ModuleSupport.ThemeConstants;function xH(t){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},t==="up"?"transparent":{$palette:"fill"},{$palette:`${t}.fill`}]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${t}.stroke`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${t}.fill`}]},{$isPattern:[{$palette:`${t}.fill`}]},{$isImage:[{$palette:`${t}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${t}.fill`}]}]},[{$mix:[{$palette:`${t}.fill`},"black",.15]},{$mix:[{$palette:`${t}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:jN._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:jN._ModuleSupport.FILL_IMAGE_DEFAULTS}}var Nht={series:{item:{up:xH("up"),down:xH("down")},highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[yH.NUMBER]:{crosshair:{snap:!1}},[yH.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:bH,CARTESIAN_POSITION:vH}=$ct._ModuleSupport.ThemeConstants,Oht={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:t=>new XM(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:bH.NUMBER,position:vH.LEFT},{type:bH.ORDINAL_TIME,position:vH.BOTTOM}],themeTemplate:Nht,groupable:!1},SH={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:FN,create:t=>new XM(t)},_ht=(E(),w(_)),GN=(E(),w(_)),Eht=(R(),w(nt)),Pht=(E(),w(_)),VN=(R(),w(nt)),{CachedTextMeasurerPool:MH,TextUtils:DH,TextWrapper:qM}=Pht._ModuleSupport;function Rht(t,e){const{fontSize:i,minimumFontSize:s=i}=t,{fontSize:n,minimumFontSize:a=n}=e,o=i-s,r=n-a;let l=t.fontSize,c=e.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:n}];for(;l>s||c>a;){const u=o>0?(l-s)/o:-1,d=r>0?(c-a)/r:-1;u>d?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function Zg(t,e){return t.lineHeight!=null&&t.fontSize!=null?t.lineHeight*e/t.fontSize:DH.getLineHeight(e)}function kH(t,e,i,s,{padding:n},a){const{spacing:o=0}=e,r=2*n,l=2*n+o,c=(e.minimumFontSize??e.fontSize)+(s.minimumFontSize??s.fontSize);if(c>a(c+l,!1).height-l)return;const h=Rht(e,s),u={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},d={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let p,g;return(0,VN.findMaxValue)(0,h.length-1,f=>{const{labelFontSize:x,secondaryLabelFontSize:y}=h[f],b=f===0,v=Zg(e,x),M=Zg(s,y),D=a(v+M+l,b),L=D.width-r,A=D.height-l;if(v+M>A||((p==null||p.fontSize!==x)&&(u.fontSize=x,p=AH(e,t,L,A,u,e.wrapping,b?e.overflowStrategy:"hide")),p==null||p.width>L||p.height>A)||((g==null||g.fontSize!==y)&&(d.fontSize=y,g=AH(s,i,L,A,d,s.wrapping,b?s.overflowStrategy:"hide")),g==null))return;const C=p.height+g.height;if(!(g.width>L||C>A))return{width:Math.max(p.width,g.width),height:C+o,meta:D.meta,label:p,secondaryLabel:g}})}function px(t,e,{padding:i},s){const n=2*i,a=Math.min(e.minimumFontSize??e.fontSize,e.fontSize),o={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return(0,VN.findMaxValue)(a,e.fontSize,r=>{const l=Zg(e,r),c=r===a,h=s(l+n,c),u=h.width-n,d=h.height-n;if(l>d)return;o.fontSize=r;const p=qM.wrapLines(t,{maxWidth:u,maxHeight:d,font:o,textWrap:e.wrapping,overflow:(c?e.overflowStrategy:void 0)??"hide"});if(!p.length)return;const g=Bht(p,{lineHeight:l,font:o,maxWidth:u,maxHeight:d});if(g)return[{fontSize:r,lineHeight:l,...g},h.meta]})}function IH(t){return t?.minimumFontSize!=null&&t?.fontSize!=null&&t?.minimumFontSize>t?.fontSize}function WN(t,e,i,s,n,a){const o=e.enabled?t:void 0,r=s.enabled?i:void 0;(IH(e)||IH(s))&&VN.Logger.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;o!=null&&r!=null&&(l=kH(o,e,r,s,n,a));let c;if(l==null&&o!=null&&(c=px(o,e,n,a)),c!=null){const[u,d]=c;l={width:u.width,height:u.height,meta:d,label:u,secondaryLabel:void 0}}let h;if(l==null&&o==null&&r!=null&&(h=px(r,s,n,a)),h!=null){const[u,d]=h;l={width:u.width,height:u.height,meta:d,label:void 0,secondaryLabel:u}}return l}function AH(t,e,i,s,n,a,o){const r=qM.wrapLines(e,{maxWidth:i,maxHeight:s,font:n,textWrap:a,overflow:o});if(!r.length)return;const l=Zg(t,n.fontSize),{width:c}=MH.measureLines(r,{font:n});return{width:c,lineHeight:l,text:r.join(`
`),height:r.length*l,fontSize:n.fontSize}}function Bht(t,{font:e,lineHeight:i=DH.defaultLineHeight,maxWidth:s,maxHeight:n=1/0}){let a=i*t.length;for(;a>n;){if(t.length===1)return;t.pop(),t[t.length-1]=qM.appendEllipsis(t.at(-1)),a=i*t.length}const o=MH.measureLines(t,{font:e});let r,l;if(o.width>s){const c=[];l=0;for(const h of o.lineMetrics){if(h.width>s){if(!c.length)return;break}c.push(h.text),l=Math.max(l,h.width)}r=qM.appendEllipsis(c.join(`
`))}else r=t.join(`
`),l=o.width;return{text:r,width:l,height:a}}var zht=(E(),w(_)),CH=(E(),w(_)),{Property:gx}=CH._ModuleSupport,Xg=class extends CH._ModuleSupport.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};m([gx],Xg.prototype,"wrapping",2),m([gx],Xg.prototype,"overflowStrategy",2),m([gx],Xg.prototype,"lineHeight",2),m([gx],Xg.prototype,"minimumFontSize",2);var Gr=class extends Xg{constructor(){super(...arguments),this.spacing=0}};m([gx],Gr.prototype,"spacing",2);var fx=class extends Xg{},{CartesianSeriesProperties:Fht,SeriesTooltip:jht,Property:Bs}=zht._ModuleSupport,Ms=class extends Fht{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Gr,this.tooltip=new jht}};m([Bs],Ms.prototype,"title",2),m([Bs],Ms.prototype,"xKey",2),m([Bs],Ms.prototype,"yKey",2),m([Bs],Ms.prototype,"colorKey",2),m([Bs],Ms.prototype,"xName",2),m([Bs],Ms.prototype,"yName",2),m([Bs],Ms.prototype,"colorName",2),m([Bs],Ms.prototype,"colorRange",2),m([Bs],Ms.prototype,"stroke",2),m([Bs],Ms.prototype,"strokeOpacity",2),m([Bs],Ms.prototype,"strokeWidth",2),m([Bs],Ms.prototype,"textAlign",2),m([Bs],Ms.prototype,"verticalAlign",2),m([Bs],Ms.prototype,"itemPadding",2),m([Bs],Ms.prototype,"itemStyler",2),m([Bs],Ms.prototype,"label",2),m([Bs],Ms.prototype,"tooltip",2);var{SeriesNodePickMode:LH,computeBarFocusBounds:Ght,getMissCount:Vht,valueProperty:HN,ChartAxisDirection:ho,DEFAULT_CARTESIAN_DIRECTION_KEYS:Wht,DEFAULT_CARTESIAN_DIRECTION_NAMES:Hht,createDatumId:Uht,ColorScale:$ht,Rect:Kht,PointerEvents:Yht,applyShapeStyle:Zht}=GN._ModuleSupport,Xht=class extends GN._ModuleSupport.CartesianSeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.colorKey=s.properties.colorKey}},qht={left:-.5,center:0,right:-.5},Qht={top:-.5,middle:0,bottom:-.5},QM=class extends GN._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:Wht,directionNames:Hht,categoryKey:void 0,pickModes:[LH.NEAREST_NODE,LH.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new Ms,this.NodeEvent=Xht,this.colorScale=new $ht}async processData(t){const e=this.axes[ho.X],i=this.axes[ho.Y];if(!e||!i||!this.data?.length)return;const{xKey:s,yKey:n,colorRange:a,colorKey:o}=this.properties,r=this.axes[ho.X]?.scale,l=this.axes[ho.Y]?.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:l}),u=this.colorScale.type,{dataModel:d,processedData:p}=await this.requestDataModel(t,this.data,{props:[HN(s,c,{id:"xValue"}),HN(n,h,{id:"yValue"}),...o?[HN(o,u,{id:"colorValue",invalidValue:null})]:[]]});if(this.isColorScaleValid()){const g=d.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=p.domain.values[g],this.colorScale.range=a,this.colorScale.update()}}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.input.count,a=Vht(this,i.defs.values[s].missing);return!(n===0||n===a)}xCoordinateRange(t,e){const i=this.axes[ho.X].scale,s=e*(i.bandwidth??0)/2,n=i.convert(t)+s,a=e*(i.bandwidth??10);return[n,n+a]}yCoordinateRange(t,e){const i=this.axes[ho.Y].scale,s=e*(i.bandwidth??0)/2,n=i.convert(t[0])+s,a=e*(i.bandwidth??10);return[n,n+a]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===ho.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,visible:e,axes:i,dataModel:s,processedData:n}=this,a=i[ho.X],o=i[ho.Y];if(!(t&&s&&n&&e&&a&&o))return;if(a.type!=="category"||o.type!=="category"){Eht.Logger.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${o.type}" instead.`);return}const{xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,textAlign:p,verticalAlign:g,itemPadding:f,label:x}=this.properties,y=s.resolveColumnById(this,"xValue",n),b=s.resolveColumnById(this,"yValue",n),v=u?s.resolveColumnById(this,"colorValue",n):void 0,M=a.scale,D=o.scale,L=(M.bandwidth??0)/2,A=(D.bandwidth??0)/2,C=[],T=[],N=M.bandwidth??10,P=D.bandwidth??10,O=(N-2*f)*qht[p],B=(P-2*f)*Qht[g],G=()=>({width:N,height:P,meta:null});return(n.dataSources.get(this.id)??[]).forEach((W,H)=>{const $=y[H],F=b[H],j=M.convert($)+L,z=D.convert(F)+A,Y=v?.[H],Z=Y==null?void 0:this.getLabelText(x,{value:Y,datum:W,colorKey:u,colorName:d,xKey:r,yKey:c,xName:l,yName:h}),X=WN(Z,this.properties.label,void 0,this.properties.label,{padding:f},G),tt={x:j,y:z,size:0};if(C.push({series:this,itemId:c,datumIndex:H,yKey:c,xKey:r,xValue:$,yValue:F,colorValue:Y,datum:W,point:tt,width:N,height:P,midPoint:{x:j,y:z},missing:v!=null&&Y==null}),X?.label!=null){const{text:q,fontSize:it,lineHeight:Q,height:rt}=X.label,{fontStyle:at,fontFamily:ht,fontWeight:dt,color:Mt}=this.properties.label,Ct=tt.x+O*(N-2*f),bt=tt.y+B*(P-2*f)-(X.height-rt)*.5;T.push({series:this,itemId:c,datum:W,datumIndex:H,text:q,fontSize:it,lineHeight:Q,fontStyle:at,fontFamily:ht,fontWeight:dt,color:Mt,textAlign:p,verticalAlign:g,x:Ct,y:bt})}}),{itemId:this.properties.yKey??this.id,nodeData:C,labelData:T,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new Kht}update(t){return this.ctx.animationManager.skipCurrentBatch(),super.update(t)}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{fill:i?.fill,fillOpacity:i?.fillOpacity??1,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getItemStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,{xKey:r,yKey:l,itemStyler:c}=o,h=this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):"transparent";let u=s.fill==null?{fill:h}:void 0;if(c!=null){u??(u={});const d=this.cachedDatumCallback(Uht(t,n?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,xKey:r,yKey:l,highlighted:n,...s,fill:h}));Object.assign(u,d)}return u}updateDatumNodes(t){const{isHighlight:e}=t,i=this.axes[ho.X],[s,n]=i?.visibleRange??[],o=!(s!==0||n!==1),r=this.getItemBaseStyle(e);t.datumSelection.each((l,c)=>{const{datumIndex:h,colorValue:u,datum:d,point:p,width:g,height:f}=c,x=this.getItemStyleOverrides(String(h),d,u,r,e);l.crisp=o,l.x=Math.floor(p.x-g/2),l.y=Math.floor(p.y-f/2),l.width=Math.ceil(g),l.height=Math.ceil(f),Zht(l,r,x)})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t,{enabled:s}=this.properties.label,n=s?e:[];return i.update(n)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=Yht.None})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a,colorScale:o}=this,{xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,colorRange:p,title:g,legendItemName:f,tooltip:x}=a,y=n[ho.X],b=n[ho.Y];if(!i||!s||!y||!b)return;const v=s.dataSources.get(this.id)?.[t],M=i.resolveColumnById(this,"xValue",s)[t],D=i.resolveColumnById(this,"yValue",s)[t],L=u!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",s)[t]:void 0;if(M==null)return;const A=[];let C;L==null?C=p[0]:(C=o.convert(L),A.push({label:d,fallbackLabel:u,value:String(L)})),A.push({label:l,fallbackLabel:r,value:y.formatDatum(M)},{label:h,fallbackLabel:c,value:b.formatDatum(D)});const T=this.getItemBaseStyle(!1);Object.assign(T,this.getItemStyleOverrides(String(t),v,L,T,!1)),T.fill!=null&&(C=T.fill);const N=C!=null?{marker:{shape:"square",fill:C,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return this.formatTooltipWithContext(x,{title:g??f,symbol:N,data:A},{seriesId:e,datum:v,title:g,xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,...T})}getLegendData(t){return t!=="gradient"||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e===void 0)return;const{width:i,height:s,midPoint:n}=e,a={x:n.x-i/2,y:n.y-s/2,width:i,height:s};return Ght(this,a)}};QM.className="HeatmapSeries",QM.type="heatmap";var Jht=(E(),w(_)),uo=(R(),w(nt)),{commonSeriesOptionsDefs:tut,heatmapSeriesThemeableOptionsDef:eut}=Jht._ModuleSupport,iut={...eut,...tut,type:(0,uo.required)((0,uo.constant)("heatmap")),xKey:(0,uo.required)(uo.string),yKey:(0,uo.required)(uo.string),colorKey:uo.string,xName:uo.string,yName:uo.string,colorName:uo.string,colorRange:(0,uo.arrayOf)(uo.color)},sut=(E(),w(_)),nut={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$path:["./0",{$palette:"stroke"},{$palette:"strokes"}]}]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},sut._ModuleSupport.SAFE_RANGE2_OPERATION]},label:{enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:wH,CARTESIAN_POSITION:TH}}=_ht._ModuleSupport,aut={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:t=>new QM(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:wH.CATEGORY,position:TH.LEFT},{type:wH.CATEGORY,position:TH.BOTTOM}],themeTemplate:nut},NH={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:iut,create:t=>new QM(t)},out=(E(),w(_)),rut=(E(),w(_)),{createDatumId:lut}=rut._ModuleSupport,JM=class extends pH{constructor(){super(...arguments),this.properties=new YM}nodeFactory(){return new ght}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:s}=this,{xKey:n,highKey:a,lowKey:o,openKey:r,closeKey:l,item:c,itemStyler:h}=s,{up:u,down:d}=c,{stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:x,lineDashOffset:y}=u,{stroke:b,strokeWidth:v,strokeOpacity:M,lineDash:D,lineDashOffset:L}=d,A=e?s.highlightStyle.item:void 0;t.each((C,T)=>{const{isRising:N,centerX:P,width:O,y:B,height:G,yOpen:V,yClose:W,crisp:H}=T;let $;if(h!=null){const{stroke:F,strokeWidth:j,strokeOpacity:z,lineDash:Y,lineDashOffset:Z}=N?u:d;$=this.cachedDatumCallback(lut(this.getDatumId(T),e?"highlight":"node"),()=>this.callWithContext(h,{seriesId:i,itemId:T.itemId,xKey:n,highKey:a,lowKey:o,openKey:r,closeKey:l,datum:T.datum,strokeOpacity:z,stroke:F,strokeWidth:j,lineDash:Y,lineDashOffset:Z,highlighted:e}))}C.centerX=P,C.width=O,C.y=B,C.height=G,C.yOpen=V,C.yClose=W,C.crisp=H,C.stroke=A?.stroke??$?.stroke??(N?p:b),C.strokeWidth=A?.strokeWidth??$?.strokeWidth??(N?g:v),C.strokeOpacity=A?.strokeOpacity??$?.strokeOpacity??(N?f:M),C.lineDash=A?.lineDash??$?.lineDash??(N?x:D),C.lineDashOffset=A?.lineDashOffset??$?.lineDashOffset??(N?y:L),C.strokeAlignment=($?.strokeWidth??(N?g:v))/2})}getLegendData(t){const{id:e,data:i,ctx:{legendManager:s},visible:n}=this,{xKey:a,yName:o,item:{up:r,down:l},showInLegend:c,legendItemName:h}=this.properties;if(!i?.length||!a||t!=="category")return[];const u={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:r.stroke,stop:0},{color:r.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:n&&s.getItemEnabled({seriesId:e,itemId:e}),label:{text:h??o??e},symbol:{marker:{fill:u,fillOpacity:r.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:h,hideInLegend:!c}]}};JM.className="ohlc",JM.type="ohlc";var cut=(E(),w(_)),vi=(R(),w(nt)),{commonSeriesOptionsDefs:hut,ohlcSeriesThemeableOptionsDef:uut}=cut._ModuleSupport,UN={...uut,...hut,type:(0,vi.required)((0,vi.constant)("ohlc")),xKey:(0,vi.required)(vi.string),openKey:(0,vi.required)(vi.string),highKey:(0,vi.required)(vi.string),lowKey:(0,vi.required)(vi.string),closeKey:(0,vi.required)(vi.string),xName:vi.string,yName:vi.string,openName:vi.string,highName:vi.string,lowName:vi.string,closeName:vi.string};UN.pickOutsideVisibleMinorAxis=(0,vi.undocumented)(vi.boolean),UN.focusPriority=(0,vi.undocumented)(vi.number);var{CARTESIAN_AXIS_TYPE:tD,CARTESIAN_POSITION:OH}=out._ModuleSupport.ThemeConstants,dut={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:t=>new JM(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:tD.NUMBER,position:OH.LEFT},{type:tD.ORDINAL_TIME,position:OH.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}}},axes:{[tD.NUMBER]:{crosshair:{snap:!1}},[tD.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},_H={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:UN,create:t=>new JM(t)},put=(E(),w(_)),eD=(E(),w(_)),gut=1e3;function EH(t,e,i,s,n,a){const o=t[a];if(o==null)return!1;const r=HM(o,e,i),l=UM(r,n);return a===s[l+Kn]}function PH(t,e,i,s,n,a){const o=t[a];if(o==null)return!1;const r=HM(o,e,i),l=UM(r,n);return a===s[l+$n]}function fut(t,e,i,s){if(t.length<gut)return;const[n,a]=hx(s);let o=cx(t);const{indexData:r,valueData:l}=ux(t,e,i,n,a,o);let c=[],h=[];for(let d=0;d<t.length;d+=1)EH(t,n,a,r,o,d)&&c.push(d),PH(t,n,a,r,o,d)&&h.push(d);const u=[{maxRange:o,topIndices:c,bottomIndices:h}];for(;o>64;)({maxRange:o}=dx(r,l,o,{inPlace:!0})),c=c.filter(EH.bind(null,t,n,a,r,o)),h=h.filter(PH.bind(null,t,n,a,r,o)),u.push({maxRange:o,topIndices:c,bottomIndices:h});return u.reverse(),u}var mut=(E(),w(_)),{CartesianSeriesProperties:yut,FillGradientDefaults:xut,FillPatternDefaults:but,FillImageDefaults:vut,InterpolationProperties:Sut,SeriesMarker:Mut,SeriesTooltip:Dut,Property:Fe,DropShadow:kut,Label:Iut}=mut._ModuleSupport,$N=class extends Iut{constructor(){super(...arguments),this.placement="outside",this.padding=6}};m([Fe],$N.prototype,"placement",2),m([Fe],$N.prototype,"padding",2);var ti=class extends yut{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new xut,this.fillPatternDefaults=new but,this.fillImageDefaults=new vut,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Sut,this.shadow=new kut().set({enabled:!1}),this.marker=new Mut,this.label=new $N,this.tooltip=new Dut,this.connectMissingData=!1}};m([Fe],ti.prototype,"xKey",2),m([Fe],ti.prototype,"yLowKey",2),m([Fe],ti.prototype,"yHighKey",2),m([Fe],ti.prototype,"xName",2),m([Fe],ti.prototype,"yName",2),m([Fe],ti.prototype,"yLowName",2),m([Fe],ti.prototype,"yHighName",2),m([Fe],ti.prototype,"fill",2),m([Fe],ti.prototype,"fillGradientDefaults",2),m([Fe],ti.prototype,"fillPatternDefaults",2),m([Fe],ti.prototype,"fillImageDefaults",2),m([Fe],ti.prototype,"fillOpacity",2),m([Fe],ti.prototype,"stroke",2),m([Fe],ti.prototype,"strokeWidth",2),m([Fe],ti.prototype,"strokeOpacity",2),m([Fe],ti.prototype,"lineDash",2),m([Fe],ti.prototype,"lineDashOffset",2),m([Fe],ti.prototype,"interpolation",2),m([Fe],ti.prototype,"shadow",2),m([Fe],ti.prototype,"marker",2),m([Fe],ti.prototype,"label",2),m([Fe],ti.prototype,"tooltip",2),m([Fe],ti.prototype,"connectMissingData",2);var Aut=(E(),w(_)),{CollapseMode:iD,isScaleValid:RH,pairUpSpans:sD,prepareAreaFillAnimationFns:Cut,plotInterpolatedLinePathStroke:qg,prepareLinePathPropertyAnimation:Lut,areScalingEqual:BH}=Aut._ModuleSupport;function wut(t,e,i,s){const n=(l,c)=>{qg(l,c,e.removed),qg(l,c,i.removed)},a=(l,c)=>{qg(l,c,e.moved),qg(l,c,i.moved)},o=(l,c)=>{qg(l,c,e.added),qg(l,c,i.added)},r=Lut(t,s);return{status:t,path:{addPhaseFn:o,updatePhaseFn:a,removePhaseFn:n},pathProperties:r}}function Tut(t,e,i){const s=t.scales.x?.type==="category",n=e.scales.x?.type==="category";if(s!==n||!RH(t.scales.x)||!RH(e.scales.x))return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const o=sD({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},iD.Split);if(o==null)return;const r=sD({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},iD.Split);if(r==null)return;const l=sD({scales:t.scales,data:t.highStrokeData.spans},{scales:e.scales,data:e.highStrokeData.spans},iD.Split);if(l==null)return;const c=sD({scales:t.scales,data:t.lowStrokeData.spans},{scales:e.scales,data:e.lowStrokeData.spans},iD.Split);if(c==null)return;const h="fade",u=Cut(a,o,r,h),d=wut(a,l,c,h),p=(i?.changed??!0)||!BH(t.scales.x,e.scales.x)||!BH(t.scales.y,e.scales.y)||a!=="updated";return{status:a,fill:u,stroke:d,hasMotion:p}}var{valueProperty:zH,keyProperty:Nut,ChartAxisDirection:en,mergeDefaults:Out,updateLabelNode:_ut,fixNumericExtent:FH,buildResetPathFn:Eut,resetLabelFn:Put,resetMarkerFn:Rut,resetMarkerPositionFn:jH,pathSwipeInAnimation:But,resetMotion:zut,markerSwipeScaleInAnimation:Fut,seriesLabelFadeInAnimation:KN,animationValidation:jut,diff:Gut,updateClipPath:GH,computeMarkerFocusBounds:VH,plotAreaPathFill:Vut,plotLinePathStroke:WH,interpolatePoints:HH,pathFadeInAnimation:UH,markerFadeInAnimation:$H,fromToMotion:KH,pathMotion:YH,extent:Wut,createDatumId:Hut,applyShapeFillBBox:Uut,PointerEvents:YN,Group:$ut,BBox:Kut,ContinuousScale:Yut,DiscreteTimeScale:Zut,findMinMax:Xut,getShapeStyle:qut,getShapeFill:Qut,applyShapeStyle:Jut}=eD._ModuleSupport,tdt=class extends eD._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},nD=class extends eD._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[eD._ModuleSupport.SeriesNodePickMode.AXIS_ALIGNED],directionKeys:{[en.X]:["xKey"],[en.Y]:["yLowKey","yHighKey"]},directionNames:{[en.X]:["xName"],[en.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:Eut({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Put,marker:(e,i)=>({...Rut(e),...jH(e,i)})},clipFocusBox:!1}),this.properties=new ti,this.NodeEvent=tdt,this.dataAggregationFilters=void 0}async processData(t){const{xKey:e,yLowKey:i,yHighKey:s}=this.properties,n=this.axes[en.X]?.scale,a=this.axes[en.Y]?.scale,{xScaleType:o,yScaleType:r}=this.getScaleInformation({xScale:n,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(Gut(this.id,this.processedData)),c&&l.push(jut());const{dataModel:h,processedData:u}=await this.requestDataModel(t,this.data,{props:[Nut(e,o,{id:"xValue"}),zH(i,r,{id:"yLowValue"}),zH(s,r,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(h,u),this.animationState.transition("updateData")}aggregateData(t,e){const i=this.axes[en.X];if(i==null||!(Yut.is(i.scale)||Zut.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),n=t.resolveColumnById(this,"yHighValue",e),a=t.resolveColumnById(this,"yLowValue",e),{index:o}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[o];return fut(s,n,a,r)}xCoordinateRange(t){const e=this.axes[en.X].scale.convert(t);return[e,e]}yCoordinateRange(t){const e=this.axes[en.Y].scale.convert(t[0]);return[e,e]}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];const{domain:{keys:[s]}}=e;if(t===en.X){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n.def.valueType==="category"?s:FH(Wut(s))}else{const n=this.domainForClippedRange(en.Y,["yHighValue","yLowValue"],"xValue",!0),a=Xut(n);return FH(a)}}getSeriesRange(t,e){return this.domainForVisibleRange(en.Y,["yHighValue","yLowValue"],"xValue",e,!0)}createNodeData(){const{data:t,dataModel:e,processedData:i,axes:s}=this,n=s[en.X],a=s[en.Y];if(!(t&&n&&a&&e&&i))return;const o=n.scale,r=a.scale,{xKey:l,yLowKey:c,yHighKey:h,connectMissingData:u,marker:d,interpolation:p}=this.properties,g=i.dataSources.get(this.id)??[],f=(o.bandwidth??0)/2,x=e.resolveKeysById(this,"xValue",i),y=e.resolveColumnById(this,"yHighValue",i),b=e.resolveColumnById(this,"yLowValue",i),v=j=>o.convert(x[j])+f,M=[],D=[],L=[],A=(j,z,Y)=>{const Z=g[j],X=x[j];if(X==null)return;const tt=L[L.length-1];if(Number.isFinite(z)&&Number.isFinite(Y)){const q=(Mt,Ct,bt)=>{D.push({index:j,series:this,itemId:Mt,datum:Z,datumIndex:j,midPoint:{x:Q,y:bt},yHighValue:z,yLowValue:Y,xValue:X,xKey:l,yLowKey:c,yHighKey:h,point:{x:Q,y:bt,size:ht},enabled:!0});const qt=this.createLabelData({datumIndex:j,point:{x:Q,y:bt},value:Ct,yLowValue:Y,yHighValue:z,itemId:Mt,inverted:it,datum:Z,series:this});M.push(qt)},it=Y>z,Q=v(j),rt=r.convert(z),at=r.convert(Y),{size:ht}=d;q("high",z,rt),q("low",Y,at);const dt={high:{point:{x:Q,y:rt},xDatum:X,yDatum:z},low:{point:{x:Q,y:at},xDatum:X,yDatum:Y}};Array.isArray(tt)?tt.push(dt):tt!=null?(tt.skip+=1,L.push([dt])):L.push([dt])}else u||(Array.isArray(tt)||tt==null?L.push({skip:0}):tt.skip+=1)},{dataAggregationFilters:C}=this,[T,N]=o.range,P=N-T,O=C?.find(j=>j.maxRange>P),B=O?.topIndices,G=O?.bottomIndices;let[V,W]=this.visibleRange("xValue",n.range,B);V=Math.max(V-1,0),W=Math.min(W+1,B?.length??x.length),i.input.count<1e3&&(V=0,W=i.input.count);for(let j=V;j<W;j+=1){const z=B?.[j]??j,Y=G?.[j]??j;A(z,y[z],b[Y])}const H=L.flatMap(j=>{if(!Array.isArray(j))return[];const z=j.map(Y=>Y.high);return HH(z,p)}),$=L.flatMap(j=>{if(!Array.isArray(j))return[];const z=j.map(Y=>Y.low);return HH(z,p)});return{itemId:`${c}-${h}`,labelData:M,nodeData:D,fillData:{itemId:"high",spans:H,phantomSpans:$},highStrokeData:{itemId:"high",spans:H},lowStrokeData:{itemId:"low",spans:$},scales:this.calculateScaling(),visible:this.visible}}createLabelData({datumIndex:t,point:e,value:i,itemId:s,inverted:n,datum:a,series:o}){const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yName:u,yLowName:d,yHighName:p,label:g}=this.properties,{placement:f,padding:x=10}=g;let y=s;n&&(y=s==="low"?"high":"low");const b=f==="outside"&&y==="high"||f==="inside"&&y==="low"?-1:1;return{x:e.x,y:e.y+x*b,series:o,itemId:s,datum:a,datumIndex:t,text:this.getLabelText(g,{value:i,datum:a,itemId:s,xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:d,yHighName:p,yName:u}),textAlign:"center",textBaseline:b===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){const{opacity:e,visible:i}=t,[s,n]=t.paths,a=this.getStrokeWidth(this.properties.strokeWidth);n.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:YN.None,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i});const o=Qut(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),r=this.getShapeFillBBox();Uut(s,o,r),Jut(s,{stroke:void 0,fill:o,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,strokeWidth:a},void 0,r),s.setProperties({pointerEvents:YN.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:e,visible:i}),GH(this,n),GH(this,s)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(t,e){const[i]=t;i.path.clear(),Vut(i,e.fillData),i.markDirty("RangeArea")}updateStrokePath(t,e){const[,i]=t;i.path.clear(),WH(i,e.highStrokeData.spans),WH(i,e.lowStrokeData.spans),i.markDirty("RangeArea")}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return{shape:i.shape,size:i.size,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,yHighKey:r,yLowKey:l,marker:c}=a,{itemStyler:h}=c;if(h!=null)return this.cachedDatumCallback(Hut(t,s?"highlight":"node"),()=>this.callWithContext(h,{seriesId:n,datum:e,xKey:o,yHighKey:r,yLowKey:l,highlighted:s,...i}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yLowKey:n,yHighKey:a,marker:o,fill:r,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u}=this.properties,d=Out(i&&this.properties.highlightStyle.item,o.getStyle(),{fill:r,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:u}),p=this.getShapeFillBBox();e.each((g,f)=>{this.updateMarkerStyle(o,g,f.datum,f.point,{xKey:s,yHighKey:a,yLowKey:n},i,d,p)}),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.pointerEvents=YN.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{_ut(e,this.properties.label,i)})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}getTooltipContent(t,e){const{id:i,dataModel:s,processedData:n,axes:a,properties:o}=this,{xName:r,yName:l,yLowKey:c,yLowName:h,xKey:u,yHighKey:d,yHighName:p,tooltip:g}=o,f=a[en.X],x=a[en.Y];if(!s||!n||!f||!x)return;const y=n.dataSources.get(this.id)?.[t],b=s.resolveKeysById(this,"xValue",n)[t],v=s.resolveColumnById(this,"yHighValue",n)[t],M=s.resolveColumnById(this,"yLowValue",n)[t];if(b==null)return;const D=this.getMarkerItemBaseStyle(!1);Object.assign(D,this.getMarkerItemStyleOverrides(String(t),t,D,!1));const L=`${x.formatDatum(M)} - ${x.formatDatum(v)}`;return this.formatTooltipWithContext(g,{heading:f.formatDatum(b),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:`${h??c} - ${p??d}`,value:L}]},{seriesId:i,datum:y,title:l,itemId:e?.itemId??"unknown",xName:r,yName:l,yLowKey:c,yLowName:h,xKey:u,yHighKey:d,yHighName:p,...D})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,marker:a}=this.properties;return{marker:qut({shape:a.shape,fill:a.fill??t,stroke:a.stroke??e,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},a.fillGradientDefaults,a.fillPatternDefaults,a.fillImageDefaults),line:{stroke:e,strokeOpacity:s,strokeWidth:i,lineDash:n}}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yLowKey:s,yHighKey:n,yName:a,yLowName:o,yHighName:r,showInLegend:l}=this.properties,c=a??`${o??s} - ${r??n}`,h=`${s}-${n}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new $ut}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),But(this,a,...n),zut([e],jH),Fut(this,a,e),KN(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,contextData:n,paths:a,previousContextData:o}=t,[r,l]=a;if(r==null&&l==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(a,n)},h=()=>{e.skipCurrentBatch(),c()};if(n==null||o==null){c(),$H(this,e,"added",i),UH(this,"fill_path_properties",e,"add",r),UH(this,"stroke_path_properties",e,"add",l),KN(this,"labels",e,s);return}const u=Tut(n,o,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){h();return}else if(u.status==="no-op")return;KH(this.id,"fill_path_properties",e,[r],u.fill.pathProperties),KH(this.id,"stroke_path_properties",e,[l],u.stroke.pathProperties),u.status==="added"?this.updateAreaPaths(a,n):u.status==="removed"?this.updateAreaPaths(a,o):(YH(this.id,"fill_path_update",e,[r],u.fill.path),YH(this.id,"stroke_path_update",e,[l],u.stroke.path)),u.hasMotion&&($H(this,e,void 0,i),KN(this,"labels",e,s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,n)})}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{xKey:e,yLowKey:i,yHighKey:s},!0)}computeFocusBounds(t){const e=VH(this,t),i=VH(this,{...t,datumIndex:t.datumIndex+1});if(e&&i)return Kut.merge([e,i])}isDatumEnabled(t,e){return e%2===0&&super.isDatumEnabled(t,e)}};nD.className="RangeAreaSeries",nD.type="range-area";var edt=(E(),w(_)),sn=(R(),w(nt)),{commonSeriesOptionsDefs:idt,rangeAreaSeriesThemeableOptionsDef:sdt}=edt._ModuleSupport,ZN={...sdt,...idt,type:(0,sn.required)((0,sn.constant)("range-area")),xKey:(0,sn.required)(sn.string),yLowKey:(0,sn.required)(sn.string),yHighKey:(0,sn.required)(sn.string),xName:sn.string,yName:sn.string,yLowName:sn.string,yHighName:sn.string};ZN.pickOutsideVisibleMinorAxis=(0,sn.undocumented)(sn.boolean),ZN.focusPriority=(0,sn.undocumented)(sn.number);var aD=(E(),w(_)),ndt={series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:aD._ModuleSupport.FILL_PATTERN_DEFAULTS,stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:aD._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:aD._ModuleSupport.FILL_IMAGE_DEFAULTS,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"}},axes:{[aD._ModuleSupport.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:ZH,CARTESIAN_POSITION:XH}}=put._ModuleSupport,adt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:t=>new nD(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:ZH.NUMBER,position:XH.LEFT},{type:ZH.CATEGORY,position:XH.BOTTOM}],themeTemplate:ndt},qH={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:ZN,create:t=>new nD(t)},odt=(E(),w(_)),oD=(E(),w(_)),rdt=1e3,ldt=5;function cdt(t,e,i,s){if(t.length<rdt)return;const[n,a]=hx(s);let o=cx(t,ldt),{indexData:r,valueData:l}=ux(t,e,i,n,a,o);const c=[{maxRange:o,indexData:r}];for(;o>64;)({indexData:r,valueData:l,maxRange:o}=dx(r,l,o)),c.push({maxRange:o,indexData:r});return c.reverse(),c}var hdt=(E(),w(_)),{AbstractBarSeriesProperties:udt,FillGradientDefaults:ddt,FillPatternDefaults:pdt,FillImageDefaults:gdt,SeriesTooltip:fdt,Property:je,DropShadow:mdt,Label:ydt}=hdt._ModuleSupport,XN=class extends ydt{constructor(){super(...arguments),this.placement="inside",this.padding=6}};m([je],XN.prototype,"placement",2),m([je],XN.prototype,"padding",2);var ei=class extends udt{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new ddt,this.fillPatternDefaults=new pdt,this.fillImageDefaults=new gdt,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new mdt().set({enabled:!1}),this.label=new XN,this.tooltip=new fdt,this.fastDataProcessing=!1}};m([je],ei.prototype,"xKey",2),m([je],ei.prototype,"yLowKey",2),m([je],ei.prototype,"yHighKey",2),m([je],ei.prototype,"xName",2),m([je],ei.prototype,"yName",2),m([je],ei.prototype,"yLowName",2),m([je],ei.prototype,"yHighName",2),m([je],ei.prototype,"fill",2),m([je],ei.prototype,"fillGradientDefaults",2),m([je],ei.prototype,"fillPatternDefaults",2),m([je],ei.prototype,"fillImageDefaults",2),m([je],ei.prototype,"fillOpacity",2),m([je],ei.prototype,"stroke",2),m([je],ei.prototype,"strokeWidth",2),m([je],ei.prototype,"strokeOpacity",2),m([je],ei.prototype,"lineDash",2),m([je],ei.prototype,"lineDashOffset",2),m([je],ei.prototype,"cornerRadius",2),m([je],ei.prototype,"itemStyler",2),m([je],ei.prototype,"shadow",2),m([je],ei.prototype,"label",2),m([je],ei.prototype,"tooltip",2),m([je],ei.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:QH,valueProperty:JH,keyProperty:xdt,ChartAxisDirection:rD,checkCrisp:bdt,updateLabelNode:vdt,SMALLEST_KEY_INTERVAL:Sdt,LARGEST_KEY_INTERVAL:Mdt,diff:Ddt,prepareBarAnimationFunctions:tU,midpointStartingBarPosition:eU,resetBarSelectionsFn:kdt,fixNumericExtent:Idt,seriesLabelFadeInAnimation:iU,resetLabelFn:Adt,animationValidation:Cdt,computeBarFocusBounds:Ldt,visibleRangeIndices:sU,createDatumId:wdt,ContinuousScale:nU,DiscreteTimeScale:Tdt,Rect:Ndt,PointerEvents:Odt,motion:aU,applyShapeStyle:_dt,findMinMax:Edt,getShapeStyle:qN,areScalingEqual:Pdt}=oD._ModuleSupport,Rdt=class extends oD._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},lD=class extends oD._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[QH.AXIS_ALIGNED,QH.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:kdt,label:Adt}}),this.properties=new ei,this.dataAggregationFilters=void 0,this.NodeEvent=Rdt}async processData(t){const{xKey:e,yLowKey:i,yHighKey:s,fastDataProcessing:n}=this.properties,a=!n,o=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:o,yScale:r}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(Ddt(this.id,this.processedData)),u.push(Cdt()));const d=this.visible?{}:{forceValue:0},{dataModel:p,processedData:g}=await this.requestDataModel(t,this.data,{props:[xdt(e,c,{id:"xValue"}),JH(i,h,{id:"yLowValue",invalidValue:null,...d}),JH(s,h,{id:"yHighValue",invalidValue:null,...d}),...l?[Sdt,Mdt]:[],...u],groupByKeys:a});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.largestDataInterval=g.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(p,g),this.animationState.transition("updateData")}aggregateData(t,e){if(e.type!=="grouped")return;const i=this.axes[rD.X];if(i==null||!(nU.is(i.scale)||Tdt.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),n=t.resolveColumnById(this,"yHighValue",e),a=t.resolveColumnById(this,"yLowValue",e),{index:o}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[o];return cdt(s,n,a,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[s]}=e.domain;if(t===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n?.def.valueType==="category"?s:this.padBandExtent(s)}else{const n=this.domainForClippedRange(t,["yHighValue","yLowValue"],"xValue",!0),a=Edt(n);return Idt(a)}}getSeriesRange(t,e){return this.domainForVisibleRange(rD.Y,["yHighValue","yLowValue"],"xValue",e,!0)}createNodeData(){const{data:t,dataModel:e,groupScale:i,processedData:s,visible:n}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&a&&o&&e&&s?.dataSources))return;const r=a.scale,l=o.scale,c=this.getBarDirection()===rD.X,{xKey:h,yLowKey:u,yHighKey:d,strokeWidth:p}=this.properties,g=`${u}-${d}`,f={itemId:g,nodeData:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!n)return f;const x=s.dataSources.get(this.id)??[],y=e.resolveKeysById(this,"xValue",s),b=e.resolveColumnById(this,"yLowValue",s),v=e.resolveColumnById(this,"yHighValue",s),{barWidth:M,groupIndex:D}=this.updateGroupScale(a),L=nU.is(r)?M*-.5:0,A=i.convert(String(D)),C=bdt(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),T=W=>Math.round(r.convert(y[W]))+A+L,N=(W,H,$,F,j,z,Y)=>{const Z=x[W],X=y[W];if(X==null)return;const tt=b[W],q=v[W];if(!Number.isFinite(tt?.valueOf())||!Number.isFinite(q?.valueOf()))return;const[it,Q]=tt<q?[tt,q]:[q,tt],rt=Math.round(l.convert(z)),at=Math.round(l.convert(j)),ht=Math.max(p,Math.abs(at-rt)),dt={x:c?Math.min(rt,at):$,y:c?$:Math.min(rt,at),width:c?ht:F,height:c?F:ht},Mt={x:dt.x+dt.width/2,y:dt.y+dt.height/2},Ct=this.createLabelData({datumIndex:W,rect:dt,barAlongX:c,yLowValue:it,yHighValue:Q,datum:Z,series:this}),bt={index:H,valueIndex:W,series:this,itemId:g,datum:Z,datumIndex:W,xValue:X,yLowValue:tt,yHighValue:q,yLowKey:u,yHighKey:d,xKey:h,x:dt.x,y:dt.y,width:dt.width,height:dt.height,midPoint:Mt,crisp:Y,labels:Ct};f.nodeData.push(bt),f.labelData.push(...Ct)},{dataAggregationFilters:P}=this,[O,B]=r.range,G=B-O,V=P?.find(W=>W.maxRange>G);if(V!=null){const{maxRange:W,indexData:H}=V,[$,F]=sU(W,a.range,j=>{const z=j*Aa,Y=H[z+Rs],Z=H[z+kn];if(Y===-1)return;const X=(Y+Z)/2|0;return[T(X),T(Z)+M]});for(let j=$;j<F;j+=1){const z=j*Aa,Y=H[z+Rs],Z=H[z+kn],X=H[z+$n],tt=H[z+Kn];if(Y===-1)continue;const q=(Y+Z)/2|0;if(y[q]==null)continue;const Q=T(q),rt=Math.abs(T(Y)-T(Z))+M,at=b[X],ht=v[tt];N(q,0,Q,rt,at,ht,!1)}}else if(s.type==="ungrouped"){let[W,H]=sU(x.length,a.range,$=>[T($),M]);s.input.count<1e3&&(W=0,H=s.input.count);for(let $=W;$<H;$+=1){const F=T($),j=M,z=b[$],Y=v[$];N($,0,F,j,z,Y,C)}}else for(const{datumIndex:W,groupIndex:H}of e.forEachGroupDatum(this,s)){const $=T(W),F=M,j=b[W],z=v[W];N(W,H,$,F,j,z,C)}return f}createLabelData({datumIndex:t,rect:e,barAlongX:i,yLowValue:s,yHighValue:n,datum:a,series:o}){const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:p,label:g}=this.properties,f={datum:a,xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:p},{placement:x,padding:y}=g,v=y*(x==="outside"?1:-1),M={datumIndex:t,x:e.x+(i?-v:e.width/2),y:e.y+(i?e.height/2:e.height+v),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(g,{itemId:"low",value:s,...f}),itemId:"low",datum:a,series:o},D={datumIndex:t,x:e.x+(i?e.width+v:e.width/2),y:e.y+(i?e.height/2:-v),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(g,{itemId:"high",value:n,...f}),itemId:"high",datum:a,series:o};return x==="outside"&&(M.textAlign=i?"right":"center",M.textBaseline=i?"middle":"top",D.textAlign=i?"left":"center",D.textBaseline=i?"middle":"bottom"),[M,D]}nodeFactory(){return new Ndt}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s,void 0,n=>this.getDatumId(n))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,fillGradientDefaults:s,fillPatternDefaults:n,fillImageDefaults:a}=e,o=t?e.highlightStyle.item:void 0;return qN({fill:o?.fill??e.fill,fillOpacity:o?.fillOpacity??e.fillOpacity,stroke:o?.stroke??e.stroke,strokeWidth:o?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:o?.strokeOpacity??e.strokeOpacity,lineDash:o?.lineDash??e.lineDash??[],lineDashOffset:o?.lineDashOffset??e.lineDashOffset,cornerRadius:i},s,n,a)}getItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,yHighKey:r,yLowKey:l,itemStyler:c,fillGradientDefaults:h,fillPatternDefaults:u,fillImageDefaults:d}=a;if(c==null)return;const p=this.cachedDatumCallback(wdt(t,s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:n,datum:e,xKey:o,yHighKey:r,yLowKey:l,highlighted:s,...i}));return qN(p,h,u,d)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getCategoryDirection()===rD.X,n=this.getItemBaseStyle(i),a=this.getShapeFillBBox();e.each((o,r)=>{const l=this.getItemStyleOverrides(String(r.datumIndex),r.datum,n,i);_dt(o,n,l,a),o.cornerRadius=l?.cornerRadius??n.cornerRadius,o.visible=s?r.width>0:r.height>0,o.crisp=r.crisp})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=Odt.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{vdt(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{xKey:a,xName:o,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,tooltip:d}=n,p=this.getCategoryAxis(),g=this.getValueAxis();if(!i||!s||!p||!g)return;const f=s.dataSources.get(this.id)?.[t],x=i.resolveKeysById(this,"xValue",s)[t],y=i.resolveColumnById(this,"yHighValue",s)[t],b=i.resolveColumnById(this,"yLowValue",s)[t];if(x==null)return;const v=this.getItemBaseStyle(!1);Object.assign(v,this.getItemStyleOverrides(String(t),f,v,!1));const M=`${g.formatDatum(b)} - ${g.formatDatum(y)}`;return this.formatTooltipWithContext(d,{heading:p.formatDatum(x),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:`${h??l} - ${u??c}`,value:M}]},{seriesId:e,datum:f,title:r,xKey:a,xName:o,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,...v})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:qN({fill:t,stroke:e,fillOpacity:s,strokeOpacity:n,strokeWidth:i,lineDash:a,lineDashOffset:o},r,l,c)}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yName:s,yLowName:n,yHighName:a,yLowKey:o,yHighKey:r,showInLegend:l}=this.properties,c=s??`${n??o} - ${a??r}`,h=`${o}-${r}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=tU(eU(this.isVertical(),"normal"));aU.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),iU(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i,contextData:s,previousContextData:n}=t,a=oD._ModuleSupport.calculateDataDiff(this.id,e,this.getDatumId.bind(this),s,n,this.processedData);this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=n==null?"fade":"normal",r=tU(eU(this.isVertical(),o));aU.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],r,(l,c)=>this.getDatumId(c),a),(a?.changed||!Pdt(s.groupScale,n?.groupScale))&&iU(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return Ldt(this,this.contextNodeData?.nodeData[t])}};lD.className="RangeBarSeries",lD.type="range-bar";var Bdt=(E(),w(_)),Ds=(R(),w(nt)),{commonSeriesOptionsDefs:zdt,rangeBarSeriesThemeableOptionsDef:Fdt}=Bdt._ModuleSupport,cD={...Fdt,...zdt,type:(0,Ds.required)((0,Ds.constant)("range-bar")),xKey:(0,Ds.required)(Ds.string),yLowKey:(0,Ds.required)(Ds.string),yHighKey:(0,Ds.required)(Ds.string),xName:Ds.string,yName:Ds.string,yLowName:Ds.string,yHighName:Ds.string};cD.pickOutsideVisibleMinorAxis=(0,Ds.undocumented)(Ds.boolean),cD.fastDataProcessing=(0,Ds.undocumented)(Ds.boolean),cD.focusPriority=(0,Ds.undocumented)(Ds.number);var QN=(E(),w(_)),jdt={series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:QN._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:QN._ModuleSupport.FILL_IMAGE_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},placement:"inside"}},axes:{[QN._ModuleSupport.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},Gdt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:t=>new lD(t),tooltipDefaults:{range:"exact"},defaultAxes:odt._ModuleSupport.DIRECTION_SWAP_AXES,themeTemplate:jdt,groupable:!0},oU={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:cD,create:t=>new lD(t)},Vdt=(E(),w(_)),Ed=(E(),w(_)),Wdt=(E(),w(_)),{AbstractBarSeriesProperties:Hdt,BaseProperties:mx,FillGradientDefaults:Udt,FillPatternDefaults:$dt,FillImageDefaults:Kdt,PropertiesArray:Ydt,SeriesTooltip:Zdt,Property:Ut,DropShadow:Xdt,Label:qdt}=Wdt._ModuleSupport,hD=class extends mx{};m([Ut],hD.prototype,"totalType",2),m([Ut],hD.prototype,"index",2),m([Ut],hD.prototype,"axisLabel",2);var rU=class extends mx{};m([Ut],rU.prototype,"renderer",2);var JN=class extends qdt{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};m([Ut],JN.prototype,"placement",2),m([Ut],JN.prototype,"padding",2);var ls=class extends mx{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Udt,this.fillPatternDefaults=new $dt,this.fillImageDefaults=new Kdt,this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Xdt().set({enabled:!1}),this.label=new JN,this.tooltip=new rU}};m([Ut],ls.prototype,"name",2),m([Ut],ls.prototype,"fill",2),m([Ut],ls.prototype,"fillGradientDefaults",2),m([Ut],ls.prototype,"fillPatternDefaults",2),m([Ut],ls.prototype,"fillImageDefaults",2),m([Ut],ls.prototype,"stroke",2),m([Ut],ls.prototype,"fillOpacity",2),m([Ut],ls.prototype,"strokeOpacity",2),m([Ut],ls.prototype,"lineDash",2),m([Ut],ls.prototype,"lineDashOffset",2),m([Ut],ls.prototype,"strokeWidth",2),m([Ut],ls.prototype,"cornerRadius",2),m([Ut],ls.prototype,"itemStyler",2),m([Ut],ls.prototype,"shadow",2),m([Ut],ls.prototype,"label",2),m([Ut],ls.prototype,"tooltip",2);var Pd=class extends mx{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};m([Ut],Pd.prototype,"enabled",2),m([Ut],Pd.prototype,"stroke",2),m([Ut],Pd.prototype,"strokeOpacity",2),m([Ut],Pd.prototype,"lineDash",2),m([Ut],Pd.prototype,"lineDashOffset",2),m([Ut],Pd.prototype,"strokeWidth",2);var uD=class extends mx{constructor(){super(...arguments),this.positive=new ls,this.negative=new ls,this.total=new ls}};m([Ut],uD.prototype,"positive",2),m([Ut],uD.prototype,"negative",2),m([Ut],uD.prototype,"total",2);var Xl=class extends Hdt{constructor(){super(...arguments),this.item=new uD,this.totals=new Ydt(hD),this.line=new Pd,this.tooltip=new Zdt}};m([Ut],Xl.prototype,"xKey",2),m([Ut],Xl.prototype,"yKey",2),m([Ut],Xl.prototype,"xName",2),m([Ut],Xl.prototype,"yName",2),m([Ut],Xl.prototype,"item",2),m([Ut],Xl.prototype,"totals",2),m([Ut],Xl.prototype,"line",2),m([Ut],Xl.prototype,"tooltip",2);var{adjustLabelPlacement:Qdt,SeriesNodePickMode:lU,fixNumericExtent:Jdt,valueProperty:cU,keyProperty:tpt,accumulativeValueProperty:dD,trailingAccumulatedValueProperty:ept,ChartAxisDirection:t1,createDatumId:ipt,checkCrisp:spt,updateLabelNode:npt,prepareBarAnimationFunctions:apt,collapsedStartingBarPosition:opt,resetBarSelectionsFn:rpt,seriesLabelFadeInAnimation:lpt,resetLabelFn:cpt,animationValidation:hpt,DEFAULT_CARTESIAN_DIRECTION_KEYS:upt,DEFAULT_CARTESIAN_DIRECTION_NAMES:dpt,computeBarFocusBounds:ppt,isContinuous:hU,Rect:gpt,motion:fpt,applyShapeStyle:mpt,getShapeStyle:e1}=Ed._ModuleSupport,pD=class extends Ed._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:upt,directionNames:dpt,categoryKey:void 0,pickModes:[lU.NEAREST_NODE,lU.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:rpt,label:cpt}}),this.properties=new Xl,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(t){const{xKey:e,yKey:i,totals:s}=this.properties,{data:n=[]}=this;if(!this.visible)return;const a=b=>hU(b)&&Number(b)>=0,o=b=>hU(b)&&Number(b)>=0,r=b=>b==="total"||b==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],h=s.reduce((b,v)=>{const M=b.get(v.index);return M?M.push(v):b.set(v.index,[v]),b},new Map);n.forEach((b,v)=>{c.push(b),h.get(v)?.forEach(M=>c.push({...M.toJson(),[e]:M.axisLabel}))});const u=[];this.ctx.animationManager.isSkipped()||u.push(hpt());const d=this.getCategoryAxis()?.scale,p=this.getValueAxis()?.scale,{isContinuousX:g,xScaleType:f,yScaleType:x}=this.getScaleInformation({xScale:d,yScale:p}),{processedData:y}=await this.requestDataModel(t,c,{props:[tpt(e,f,{id:"xValue"}),dD(i,x,{...l,id:"yCurrent"}),dD(i,x,{...l,missingValue:0,id:"yCurrentTotal"}),dD(i,x,{...l,id:"yCurrentPositive",validation:a}),dD(i,x,{...l,id:"yCurrentNegative",validation:o}),ept(i,x,{...l,id:"yPrevious"}),cU(i,x,{id:"yRaw"}),cU("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:r}),...g?[Ed._ModuleSupport.SMALLEST_KEY_INTERVAL,Ed._ModuleSupport.LARGEST_KEY_INTERVAL]:[],...u]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.largestDataInterval=y.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[s],values:n}=e.domain;if(t===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return s;const o=t===t1.Y,r=this.getCategoryAxis().isReversed();return this.padBandExtent(s,r!==o)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),o=n[a],r=[Math.min(0,o[0]),Math.max(0,o[1])];return Jdt(r)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,dataModel:e,processedData:i}=this,s=this.getCategoryAxis(),n=this.getValueAxis();if(!t||!s||!n||!e||!i)return;const{line:a}=this.properties,o=s.scale,r=n.scale,l=this.getBarDirection()===t1.X,c=this.getBandwidth(s)??10,h=s.isReversed(),u=n.isReversed();if(i.type!=="ungrouped")return;const d={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!this.visible)return d;const p=[],g=e.resolveKeysById(this,"xValue",i),f=e.resolveColumnById(this,"yRaw",i),x=e.resolveColumnById(this,"totalTypeValue",i),y=e.resolveColumnById(this,"yCurrent",i),b=e.resolveColumnById(this,"yPrevious",i),v=e.resolveColumnById(this,"yCurrentTotal",i),M=spt(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function D(G,V,W){return G||V?{cumulativeValue:v[W],trailingValue:V?A:0}:{cumulativeValue:y[W],trailingValue:b[W]}}function L(G,V,W,H,$){return G?H:V?(H??0)-($??0):W}let A=0;const{xKey:C,yKey:T,xName:N,yName:P}=this.properties;(i.dataSources.get(this.id)??[]).forEach((G,V)=>{const W=x[V],H=this.isSubtotal(W),$=this.isTotal(W),F=$||H,j=g[V];if(j==null)return;const z=Math.round(o.convert(j)),Y=f[V],{cumulativeValue:Z,trailingValue:X}=D($,H,V);F&&(A=Z??0);const tt=Math.round(r.convert(Z)),q=Math.round(r.convert(X)),it=L($,H,Y,Z,X),Q=(it??0)>=0,rt=this.getSeriesItemType(Q,W),{strokeWidth:at,label:ht}=this.getItemConfig(rt),dt=Q?tt:q,Mt=Q?q:tt,Ct=Math.max(at,Math.abs(Mt-dt)),bt={x:l?Math.min(dt,Mt):z,y:l?z:Math.min(dt,Mt),width:l?Ct:c,height:l?c:Ct},qt={x:bt.x+bt.width/2,y:bt.y+bt.height/2},Jt=F?tt:q,Vt=Math.floor(a.strokeWidth)%2/2,Qt=h?tt:Jt,Lt=h?Jt:tt;let Wt,se;l?(Wt={x:Qt+Vt,y:bt.y},se={x:Lt+Vt,y:bt.y+bt.height}):(Wt={x:bt.x,y:Qt+Vt},se={x:bt.x+bt.width,y:Lt+Vt});const js={x:h?se.x:Wt.x,y:h?se.y:Wt.y,x2:h?Wt.x:se.x,y2:h?Wt.y:se.y,size:0};p.push(js);const ln=rt==="subtotal"?"total":rt,bo=this.getLabelText(ht,{itemId:ln,value:it,datum:G,xKey:C,yKey:T,xName:N,yName:P}),Ud={index:V,series:this,itemId:rt,datum:G,datumIndex:V,cumulativeValue:Z??0,xValue:j,yValue:it,yKey:T,xKey:C,x:bt.x,y:bt.y,width:bt.width,height:bt.height,midPoint:qt,crisp:M,label:{text:bo,...Qdt({isUpward:(it??-1)>=0!==u,isVertical:!l,placement:ht.placement,padding:ht.padding,rect:bt})}};d.nodeData.push(Ud),d.labelData.push(Ud)});const B=this.properties.line.enabled;return y!=null&&B&&(d.pointData=p),d}updateSeriesItemTypes(){const{dataModel:t,seriesItemTypes:e,processedData:i}=this;if(!t||!i)return;e.clear();const s=t.resolveProcessedDataIndexById(this,"yCurrentPositive"),n=t.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=t.resolveProcessedDataIndexById(this,"totalTypeValue"),o=i.domain.values[s]??[],r=i.domain.values[n]??[];o.length>0&&e.add("positive"),r.length>0&&e.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&e.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new gpt}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s)}getItemStyle(t,e,i,s){const{id:n,properties:a}=this,o=a.item[i==="subtotal"?"total":i],r=s?a.highlightStyle.item:void 0,{itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:h,fillImageDefaults:u}=o,{xKey:d,yKey:p}=a,g=e1({fill:r?.fill??o.fill,fillOpacity:r?.fillOpacity??o.fillOpacity,stroke:r?.stroke??o.stroke,strokeWidth:r?.strokeWidth??o.strokeWidth,strokeOpacity:r?.strokeOpacity??o.strokeOpacity,lineDash:r?.lineDash??o.lineDash??[],lineDashOffset:r?.lineDashOffset??o.lineDashOffset,cornerRadius:o.cornerRadius},c,h,u);if(l!=null){let f=this.cachedDatumCallback(ipt(t,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:n,itemId:i,datum:e,xKey:d,yKey:p,highlighted:s,...g}));f=e1(f,c,h,u),Object.assign(g,f)}return g}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getCategoryDirection()===t1.X,n=this.getShapeFillBBox();e.each((a,o)=>{const r=o.itemId,l=this.getItemStyle(String(o.datumIndex),o.datum,r,i);mpt(a,l,void 0,n),a.visible=s?o.width>0:o.height>0,a.crisp=o.crisp})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const s=e.filter(n=>{const{label:a}=this.getItemConfig(n.itemId);return a.enabled});return i.update(s)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{npt(e,this.getItemConfig(i.itemId).label,i.label)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{xKey:a,xName:o,yKey:r,yName:l,tooltip:c}=n,h=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!s||!h||!u)return;const d=s.dataSources.get(this.id)?.[t],p=i.resolveKeysById(this,"xValue",s)[t],g=i.resolveColumnById(this,"yRaw",s)[t],f=i.resolveColumnById(this,"yCurrentTotal",s),x=i.resolveColumnById(this,"totalTypeValue",s);if(p==null)return;const y=x[t],b=(g??0)>=0,v=this.getSeriesItemType(b,y);let M;if(this.isTotal(y))M=f[t];else if(this.isSubtotal(y)){M=f[t];for(let L=t-1;L>=0;L-=1)if(this.isSubtotal(x[L])){M=M-f[L];break}}else M=g;const D=this.getItemStyle(String(t),d,v,!1);return this.formatTooltipWithContext(c,{heading:h.formatDatum(p),symbol:this.legendItemSymbol(v),data:[{label:l,fallbackLabel:r,value:u.formatDatum(M)}]},{seriesId:e,datum:d,title:l,itemId:v,xKey:a,xName:o,yKey:r,yName:l,...D})}legendItemSymbol(t){const{fill:e,stroke:i,fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:h}=this.getItemConfig(t);return{marker:e1({fill:e,stroke:i,fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r},l,c,h)}}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,s=[],n=o=>o.charAt(0).toUpperCase()+o.substring(1),{showInLegend:a}=this.properties;return i.forEach(o=>{const{name:r}=this.getItemConfig(o);s.push({legendType:"category",id:e,itemId:o,seriesId:e,enabled:!0,label:{text:r??n(o)},symbol:this.legendItemSymbol(o),hideInLegend:!a,isFixed:!0})}),s}toggleSeriesItem(){}animateEmptyUpdateReady(t){const{datumSelection:e,labelSelection:i,contextData:s}=t,n=apt(opt(this.isVertical(),this.axes,"normal"));fpt.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],n),lpt(this,"labels",this.ctx.animationManager,i);const{pointData:a}=s;a&&(this.isVertical()?this.animateConnectorLinesVertical(t):this.animateConnectorLinesHorizontal(t))}animateConnectorLinesHorizontal(t){const{pointData:e=[]}=t.contextData,[i]=t.paths,{path:s}=i;this.updateLineNode(i);const n=this.getValueAxis(),a=n?.isReversed(),o=a?(h,u)=>h<u:(h,u)=>h>u,r=n?.scale.convert(0),l=e.reduce((h,u)=>(o(u.x,h)&&(h=u.x),h),a?1/0:0),c=(h,u,d,p,g)=>(h-u)/(d-u)*(g-p)+p;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:Ed._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(h){s.clear(!0),e.forEach((u,d)=>{const p=c(h,r,l,r,u.x),g=c(h,r,l,r,u.x2);d!==0&&s.lineTo(p,u.y),s.moveTo(g,u.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(t)})}animateConnectorLinesVertical(t){const{pointData:e=[]}=t.contextData,[i]=t.paths,{path:s}=i;this.updateLineNode(i);const n=this.getValueAxis(),a=n?.isReversed(),o=a?(h,u)=>h>u:(h,u)=>h<u,r=n?.scale.convert(0),l=e.reduce((h,u)=>(o(u.y,h)&&(h=u.y),h),a?0:1/0),c=(h,u,d,p,g)=>(h-u)/(d-u)*(g-p)+p;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:Ed._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(h){s.clear(!0),e.forEach((u,d)=>{const p=c(h,r,l,r,u.y),g=c(h,r,l,r,u.y2);d!==0&&s.lineTo(u.x,p),s.moveTo(u.x2,g)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(t)})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:s}=i;s.clear(!0);const{pointData:n}=t;n&&(n.forEach((a,o)=>{o!==0&&s.lineTo(a.x,a.y),s.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:s,lineDash:n,lineDashOffset:a,lineJoin:"round",pointerEvents:Ed._ModuleSupport.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return ppt(this,this.contextNodeData?.nodeData[t])}};pD.className="WaterfallSeries",pD.type="waterfall";var ypt=(E(),w(_)),In=(R(),w(nt)),{commonSeriesOptionsDefs:xpt,waterfallSeriesThemeableOptionsDef:bpt}=ypt._ModuleSupport,vpt={...bpt,...xpt,type:(0,In.required)((0,In.constant)("waterfall")),xKey:(0,In.required)(In.string),yKey:(0,In.required)(In.string),xName:In.string,yName:In.string,totals:(0,In.arrayOfDefs)({totalType:(0,In.required)((0,In.union)("total","subtotal")),index:(0,In.required)(In.positiveNumber),axisLabel:(0,In.required)(In.string)},"a total definition options array")},uU=(E(),w(_));function i1(t,e){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`./${e}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${t}.fill`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${t}.fill`}]},{$isPattern:[{$palette:`${t}.fill`}]},{$isImage:[{$palette:`${t}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${t}.fill`}]}]},[{$mix:[{$palette:`${t}.fill`},"black",.15]},{$mix:[{$palette:`${t}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:uU._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:uU._ModuleSupport.FILL_IMAGE_DEFAULTS,stroke:{$palette:`${t}.stroke`},strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end"}}}var Spt={series:{item:{positive:i1("altUp",0),negative:i1("altDown",1),total:i1("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},Mpt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:t=>new pD(t),tooltipDefaults:{range:"exact"},defaultAxes:Vdt._ModuleSupport.DIRECTION_SWAP_AXES,themeTemplate:Spt},dU={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:vpt,create:t=>new pD(t)},{NewAreaSeriesModule:Dpt,NewBarSeriesModule:kpt,NewBubbleSeriesModule:Ipt,NewHistogramSeriesModule:Apt,NewLineSeriesModule:Cpt,NewScatterSeriesModule:Lpt,numberFormatValidator:wpt,without:La}=gct._ModuleSupport,pU={width:Ie.positiveNumber,height:Ie.positiveNumber,grip:Ie.boolean,fill:Ie.color,stroke:Ie.color,strokeWidth:Ie.positiveNumber,cornerRadius:Ie.positiveNumber},wa=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],Tpt={enabled:Ie.boolean,height:Ie.positiveNumber,spacing:Ie.positiveNumber,cornerRadius:Ie.number,mask:{fill:Ie.color,fillOpacity:Ie.ratio,stroke:Ie.color,strokeWidth:Ie.positiveNumber},minHandle:pU,maxHandle:pU,miniChart:{enabled:Ie.boolean,padding:{top:Ie.positiveNumber,bottom:Ie.positiveNumber},label:{enabled:Ie.boolean,avoidCollisions:Ie.boolean,spacing:Ie.positiveNumber,format:wpt,formatter:Ie.callback,interval:{minSpacing:Ie.positiveNumber,maxSpacing:Ie.positiveNumber,values:Ie.array,step:Ie.number},...Ie.fontOptionsDef},series:(0,Ie.arrayOfDefs)((0,Ie.typeUnion)({area:La(Dpt.options,wa),bar:La(kpt.options,[...wa,"errorBar","label","legendItemName","direction"]),"box-plot":La(aH.options,[...wa,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"]),bubble:La(Ipt.options,[...wa,"title","label","labelKey","labelName","sizeName"]),candlestick:La(SH.options,wa),heatmap:La(NH.options,[...wa,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"]),histogram:La(Apt.options,[...wa,"label"]),line:La(Cpt.options,[...wa,"errorBar","title","label"]),ohlc:La(_H.options,wa),"range-area":La(qH.options,[...wa,"label","yLowName","yHighName"]),"range-bar":La(oU.options,[...wa,"direction","label","yLowName","yHighName"]),scatter:La(Lpt.options,[...wa,"errorBar","title","label","labelKey","labelName"]),waterfall:La(dU.options,[...wa,"direction"])},"miniChart series options"))}},{annotationOptionsDef:Npt}=ict._ModuleSupport,Opt={type:"plugin",name:"annotations",chartType:"cartesian",options:Npt,create(){return null}},_pt={type:"plugin",name:"navigator",chartType:"cartesian",options:Tpt,create(){return null}},Ept={type:"plugin",name:"initialState",options:pct,create(){return null}},gU=(E(),w(_)),Ppt=(E(),w(_)),Rpt=(R(),w(nt)),fU=(E(),w(_)),Bpt=(R(),w(nt));function mU(t,e,i){i||(e=zpt(e));const s=new Map;for(const a of t)s.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let n=0;return s.forEach((a,o)=>{n=Math.max(n,s1(s,e,a,o,-1,[])+s1(s,e,a,o,1,[])+1)}),{links:e,nodeGraph:s,maxPathLength:n}}function yU(t,e,i,s){const n=s.indexOf(e);if(n!==-1){for(let o=n;o<s.length;o+=1)i.add(s[o]);return}s.push(e);const{toNode:a}=e;for(const o of t)o.fromNode===a&&yU(t,o,i,s);s.pop()}function zpt(t){const e=new Set;for(const i of t)yU(t,i,e,[]);return e.size!==0&&Bpt.Logger.warnOnce("Some links formed circular references. These will be removed from the output."),e.size===0?t:t.filter(i=>!e.has(i))}function s1(t,e,i,s,n,a){if(a.includes(s))return 1/0;let o=n===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(o===-1){o=0;const r=n===-1?i.linksBefore:i.linksAfter;for(const l of e){const{fromNode:c,toNode:h}=l,u=n===-1?h.id:c.id,d=n===-1?c.id:h.id,p=s===u?t.get(d):void 0;p!=null&&(r.push({node:p,link:l}),a?.push(s),o=Math.max(o,s1(t,e,p,d,n,a)+1),a?.pop())}n===-1?i.maxPathLengthBefore=o:i.maxPathLengthAfter=o}return o}var{Series:Fpt,DataController:jpt,keyProperty:Gpt,valueProperty:gD,Selection:Rd,Group:Qg,TransformableText:Vpt}=fU._ModuleSupport,Wpt=class extends fU._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s);const{datumIndex:n}=i,a=s.contextNodeData?.nodeData.find(o=>o.datumIndex.type===n.type&&o.datumIndex.index===n.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},xU=class extends Fpt{constructor(){super(...arguments),this.NodeEvent=Wpt,this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Qg({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Qg({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Qg({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Qg({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Qg({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Qg({name:"nodeGroup"})),this.labelSelection=Rd.select(this.labelGroup,Vpt),this.linkSelection=Rd.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Rd.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Rd.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Rd.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Rd.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Rd.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(t){this._chartNodes=t,this.nodes===t&&(this.nodeDataRefresh=!0)}async processData(t){const{data:e,nodes:i}=this;if(e==null)return;const{fromKey:s,toKey:n,sizeKey:a,idKey:o,labelKey:r}=this.properties,l=new jpt("standalone",t.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[Gpt(o,void 0,{id:"idValue",includeProperty:!1}),...r!=null?[gD(r,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=t.request(this.id,e,{props:[gD(s,void 0,{id:"fromValue",includeProperty:!1}),gD(n,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[gD(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[u,d]=await Promise.all([c,h]);this.nodesDataModel=u?.dataModel,this.nodesProcessedData=u?.processedData,this.linksDataModel=d?.dataModel,this.linksProcessedData=d?.processedData;const p=new Map;if(u==null){const g=d.dataModel.resolveColumnById(this,"fromValue",d.processedData),f=d.dataModel.resolveColumnById(this,"toValue",d.processedData),x=y=>{const b=p.size;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:b},type:1,index:b,linksBefore:[],linksAfter:[],id:y,size:0,label:y}};d.processedData.dataSources.get(this.id)?.forEach((y,b)=>{const v=g[b],M=f[b];v==null||M==null||(p.has(v)||p.set(v,x(v)),p.has(M)||p.set(M,x(M)))})}else{const g=u.dataModel.resolveColumnById(this,"idValue",u.processedData),f=r!=null?u.dataModel.resolveColumnById(this,"labelValue",u.processedData):void 0;u.processedData.dataSources.get(this.id)?.forEach((x,y)=>{const b=g[y],v=f?.[y];p.set(b,{series:this,itemId:void 0,datum:x,datumIndex:{type:1,index:y},type:1,index:y,linksBefore:[],linksAfter:[],id:b,size:0,label:v})})}this.processedNodes=p}getNodeGraph(t,e,{includeCircularReferences:i}){const{linksDataModel:s,linksProcessedData:n}=this;if(s==null||n==null){const{links:g,nodeGraph:f,maxPathLength:x}=mU(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:f,links:g,maxPathLength:x}}const{sizeKey:a}=this.properties,o=s.resolveColumnById(this,"fromValue",n),r=s.resolveColumnById(this,"toValue",n),l=a!=null?s.resolveColumnById(this,"sizeValue",n):void 0,c=new Map;this.processedNodes.forEach(g=>{const f=t(g);c.set(g.id,f)});const h=[];n.dataSources.get(this.id)?.forEach((g,f)=>{const x=o[f],y=r[f],b=l!=null?l[f]:1,v=c.get(x),M=c.get(y);if(b<=0||v==null||M==null)return;const D=e({series:this,itemId:void 0,datum:g,datumIndex:{type:0,index:f},type:0,index:f,fromNode:v,toNode:M,size:b});h.push(D)});const{links:u,nodeGraph:d,maxPathLength:p}=mU(c.values(),h,i);return d.forEach(g=>{g.datum.linksBefore=g.linksBefore.map(f=>f.link),g.datum.linksAfter=g.linksAfter.map(f=>f.link)}),this.nodeCount=d.size,this.linkCount=u.length,{nodeGraph:d,links:u,maxPathLength:p}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(t){const{seriesRect:e}=t,i={seriesRectWidth:e?.width??0,seriesRectHeight:e?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const s=this.contextNodeData?.nodeData??[],n=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:h}=a;a=h!=null?s.find(u=>u.type===1&&u.id===h):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlightStyle.series.dimOpacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:n,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:s.filter(h=>h.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:s.filter(h=>h.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let o,r,l,c;a?.type===1?(o=s.filter(h=>h.type===0&&(h.toNode===a||h.fromNode===a)),r=o.map(h=>h.fromNode===a?h.toNode:h.fromNode),r.push(a),l=[],c=[a]):a?.type===0?(o=[a],r=[a.fromNode,a.toNode],l=[a],c=[]):(o=[],r=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:o,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:r,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(t){}getSeriesDomain(t){return[]}getSeriesRange(t,e){return[NaN,NaN]}legendItemSymbol(t,e,i={}){const{fills:s,strokes:n}=this.properties,{fill:a=s[e%s.length],fillOpacity:o=1,stroke:r=n[e%n.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:h=[0],lineDashOffset:u=0}=i;return{marker:{fill:a,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}}}getLegendData(t){if(t!=="category")return[];const{showInLegend:e}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:s},n)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:s??i},symbol:this.legendItemSymbol(1,n),hideInLegend:!e,isFixed:!0}))}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.linkSelection.each((n,a)=>{const o=n.containsPoint(t,e)?0:1/0;o<i&&(i=o,s=a)}),this.nodeSelection.each((n,a)=>{const o=n.distanceSquared(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}getDatumAriaText(t,e){if(t.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:t.index+1,count:this.linkCount,from:t.fromNode.id,to:t.toNode.id,size:t.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(t.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:t.index+1,count:this.nodeCount,description:e})}pickFocus(t){const{datumIndexDelta:e,otherIndexDelta:i}=t,s=this.contextNodeData?.nodeData[t.datumIndex-t.datumIndexDelta];let n=s;if(i!==0||e===0)return;if(s?.type===0){const r=Array.from(this.linkSelection,h=>h.datum),c=r.indexOf(s)+e;if(c>=0&&c<r.length)n=r[c];else if(c>0)n=r[r.length-1];else{const h=Array.from(this.nodeSelection,u=>u.datum);n=h[h.length-1]}}else if(s?.type===1){const r=Array.from(this.nodeSelection,h=>h.datum),c=r.indexOf(s)+e;c>=0&&c<r.length?n=r[c]:c<0?n=r[0]:n=Array.from(this.linkSelection,u=>u.datum)[0]}if(n==null)return;const a=n.type===1?Array.from(this.nodeSelection).find(r=>r.datum===n):Array.from(this.linkSelection).find(r=>r.datum===n);if(a==null)return;const o=this.computeFocusBounds(a.node);if(o!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:o,clipFocusBox:!0}}getCategoryValue(t){}datumIndexForCategoryValue(t){}},Hpt=(E(),w(_)),{Path:Upt,SceneChangeDetection:Sh}=Hpt._ModuleSupport;function bU({radius:t,startAngle:e,endAngle:i,tension:s}){const n=t*Math.cos(e),a=t*Math.sin(e),o=t*Math.cos(i),r=t*Math.sin(i),l=n*s,c=a*s,h=o*s,u=r*s;return{x:[n,l,h,o],y:[a,c,u,r]}}var ql=class extends Upt{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(t,e,i,s,n,a,o,r){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-t)*h+t,(s-e)*h+e,(n-o)*h+o,(a-r)*h+r,o,r)}updatePath(){const{path:t,centerX:e,centerY:i,radius:s}=this;let{startAngle1:n,endAngle1:a,startAngle2:o,endAngle2:r}=this;n>o&&([n,o]=[o,n],[a,r]=[r,a]),t.clear();const l=e+s*Math.cos(n),c=i+s*Math.sin(n);t.moveTo(l,c),this.tensionedCurveTo(l,c,e,i,e,i,e+s*Math.cos(r),i+s*Math.sin(r)),t.arc(e,i,s,r,o,!0),this.tensionedCurveTo(e+s*Math.cos(o),i+s*Math.sin(o),e,i,e,i,e+s*Math.cos(a),i+s*Math.sin(a)),t.arc(e,i,s,a,n,!0),t.closePath()}};m([Sh()],ql.prototype,"centerX",2),m([Sh()],ql.prototype,"centerY",2),m([Sh()],ql.prototype,"radius",2),m([Sh()],ql.prototype,"startAngle1",2),m([Sh()],ql.prototype,"endAngle1",2),m([Sh()],ql.prototype,"startAngle2",2),m([Sh()],ql.prototype,"endAngle2",2),m([Sh()],ql.prototype,"tension",2);var $pt=(E(),w(_)),{FillGradientDefaults:Kpt,FillPatternDefaults:Ypt,FillImageDefaults:Zpt,BaseProperties:vU,SeriesTooltip:Xpt,SeriesProperties:qpt,Property:$t,Label:Qpt}=$pt._ModuleSupport,n1=class extends Qpt{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};m([$t],n1.prototype,"spacing",2),m([$t],n1.prototype,"maxWidth",2);var Vr=class extends vU{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};m([$t],Vr.prototype,"fill",2),m([$t],Vr.prototype,"fillOpacity",2),m([$t],Vr.prototype,"stroke",2),m([$t],Vr.prototype,"strokeOpacity",2),m([$t],Vr.prototype,"strokeWidth",2),m([$t],Vr.prototype,"lineDash",2),m([$t],Vr.prototype,"lineDashOffset",2),m([$t],Vr.prototype,"tension",2),m([$t],Vr.prototype,"itemStyler",2);var $o=class extends vU{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};m([$t],$o.prototype,"spacing",2),m([$t],$o.prototype,"width",2),m([$t],$o.prototype,"fill",2),m([$t],$o.prototype,"fillOpacity",2),m([$t],$o.prototype,"stroke",2),m([$t],$o.prototype,"strokeOpacity",2),m([$t],$o.prototype,"strokeWidth",2),m([$t],$o.prototype,"lineDash",2),m([$t],$o.prototype,"lineDashOffset",2),m([$t],$o.prototype,"itemStyler",2);var cs=class extends qpt{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new Kpt,this.fillPatternDefaults=new Ypt,this.fillImageDefaults=new Zpt,this.fills=[],this.strokes=[],this.label=new n1,this.link=new Vr,this.node=new $o,this.tooltip=new Xpt}};m([$t],cs.prototype,"fromKey",2),m([$t],cs.prototype,"toKey",2),m([$t],cs.prototype,"idKey",2),m([$t],cs.prototype,"idName",2),m([$t],cs.prototype,"labelKey",2),m([$t],cs.prototype,"labelName",2),m([$t],cs.prototype,"sizeKey",2),m([$t],cs.prototype,"sizeName",2),m([$t],cs.prototype,"nodes",2),m([$t],cs.prototype,"fillGradientDefaults",2),m([$t],cs.prototype,"fillPatternDefaults",2),m([$t],cs.prototype,"fillImageDefaults",2),m([$t],cs.prototype,"fills",2),m([$t],cs.prototype,"strokes",2),m([$t],cs.prototype,"label",2),m([$t],cs.prototype,"link",2),m([$t],cs.prototype,"node",2),m([$t],cs.prototype,"tooltip",2);var{SeriesNodePickMode:SU,CachedTextMeasurerPool:Jpt,TextWrapper:tgt,TextUtils:egt,createDatumId:fD,angleBetween:mD,normalizeAngle360:igt,isBetweenAngles:MU,Sector:sgt,evaluateBezier:yD,applyShapeStyle:DU,getShapeStyle:xD,BBox:ngt}=Ppt._ModuleSupport,bD=t=>t.startAngle+mD(t.startAngle,t.endAngle)/2,vD=class extends xU{constructor(t){super({moduleCtx:t,pickModes:[SU.NEAREST_NODE,SU.EXACT_SHAPE_MATCH]}),this.properties=new cs}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new ql}nodeFactory(){return new sgt}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:n,sizeKey:a,label:{spacing:o,maxWidth:r,fontSize:l},node:{width:c,spacing:h}}=this.properties,u=e/2,d=i/2;let p=[];const{nodeGraph:g,links:f}=this.getNodeGraph(B=>({...B,centerX:u,centerY:d,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),B=>({...B,centerX:u,centerY:d,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let x=0;g.forEach(({datum:B,linksBefore:G,linksAfter:V},W)=>{const H=G.reduce(($,{link:F})=>$+F.size,0)+V.reduce(($,{link:F})=>$+F.size,0);if(H===0)g.delete(W);else{B.size=H,x+=B.size;const $=this.getLabelText(this.properties.label,{datum:B.datum,value:B.label,fromKey:s,toKey:n,sizeKey:a,size:B.size});B.label=String($)}});let y=0;if(this.isLabelEnabled()){const B=this.properties.label.getFont();let G=0;g.forEach(({datum:V})=>{const{id:W,label:H}=V;if(H==null)return;const $=tgt.wrapText(H,{maxWidth:r,font:this.properties.label,textWrap:"never"}),{width:F}=Jpt.measureText($,{font:B,textAlign:"left",textBaseline:"middle"});G=Math.max(F,G),p.push({id:W,text:$,centerX:u,centerY:d,angle:NaN,radius:NaN})}),y=G+o}const b=g.size;let v=Math.min(e,i)/2-c-y,M=h/v;if(y!==0&&(b*M>=1.5*Math.PI||v<=0)&&(p=[],v=Math.min(e,i)/2-c,M=h/v),b*M>=2*Math.PI||v<=0){Rpt.Logger.warnOnce("There was insufficient space to display the Chord Series.");return}const D=v,L=v+c,A=Math.max((2*Math.PI-b*M)/x,0);let C=0;g.forEach(({datum:B})=>{B.innerRadius=D,B.outerRadius=L,B.startAngle=C,B.endAngle=C+B.size*A,C=B.endAngle+M;const G=(B.innerRadius+B.outerRadius)/2,V=bD(B);B.midPoint={x:B.centerX+G*Math.cos(V),y:B.centerY+G*Math.sin(V)}});const T=[];g.forEach(({datum:B,linksBefore:G,linksAfter:V})=>{const W=bD(B),H=[...G.map(F=>({link:F.link,distance:mD(bD(F.node.datum),W),after:!1})),...V.map(F=>({link:F.link,distance:mD(bD(F.node.datum),W),after:!0}))];let $=B.startAngle;H.toSorted((F,j)=>F.distance-j.distance).forEach(({link:F,after:j})=>{const z=F.size*A;j?(F.startAngle1=$,F.endAngle1=$+z):(F.startAngle2=$,F.endAngle2=$+z),$+=F.size*A}),T.push(B)});const{tension:N}=this.properties.link;f.forEach(B=>{B.radius=v;const G=bU({radius:v,startAngle:B.startAngle1,endAngle:B.endAngle2,tension:N}),V=bU({radius:v,startAngle:B.startAngle2,endAngle:B.endAngle1,tension:N}),W=yD(...G.x,.5),H=yD(...G.y,.5),$=yD(...V.x,.5),F=yD(...V.y,.5);B.midPoint={x:B.centerX+(W+$)/2,y:B.centerY+(H+F)/2},T.push(B)}),p.forEach(B=>{const G=g.get(B.id)?.datum;G!=null&&(B.radius=L+o,B.angle=igt(G.startAngle+mD(G.startAngle,G.endAngle)/2))}),p.sort((B,G)=>B.angle-G.angle);let P=1/0,O=-1/0;return p=p.filter(B=>{const G=egt.getLineHeight(l),V=Math.atan2(G/2,B.radius),W=B.angle-V,H=B.angle+V;return MU(P,W,H)||MU(O,W,H)?!1:(P=Math.min(W,P),O=Math.max(H,O),!0)}),{itemId:t,nodeData:T,labelData:p}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{text:l,centerX:c,centerY:h,radius:u,angle:d})=>{r.visible=!0,r.translationX=c+u*Math.cos(d),r.translationY=h+u*Math.sin(d),r.text=l,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textBaseline="middle",Math.cos(d)>=0?(r.textAlign="left",r.rotation=d):(r.textAlign="right",r.rotation=d-Math.PI)})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>fD([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}=e.node,l=t?e.highlightStyle.item:void 0;return xD({fill:l?.fill??i,fillOpacity:l?.fillOpacity??s,stroke:l?.stroke??n,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.node.strokeWidth),lineDash:l?.lineDash??o,lineDashOffset:l?.lineDashOffset??r},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getNodeStyleOverrides(t,e,i,s,n,a,o){const{id:r,properties:l}=this,{fills:c,strokes:h}=l,{itemStyler:u}=l.node,d=a.fill??c[i%c.length],p=a.stroke??h[i%h.length];let g;if(o||(g??(g={}),g.fill=d,g.stroke=p),u!=null){const f=this.cachedDatumCallback(fD(t,"node",o?"highlight":"node"),()=>{const{fillOpacity:x=1,strokeOpacity:y=1,strokeWidth:b=0,lineDash:v=[],lineDashOffset:M=0}=a;return this.callWithContext(u,{seriesId:r,datum:e,highlighted:o,label:n,size:s,fill:d,fillOpacity:x,stroke:p,strokeOpacity:y,strokeWidth:b,lineDash:v,lineDashOffset:M})});g??(g={}),Object.assign(g,f)}return xD(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseNodeStyle(i),n=this.getShapeFillBBox();e.each((a,o)=>{const{datumIndex:r,size:l,label:c}=o,h=this.getNodeStyleOverrides(String(r.index),o.datum,r.index,l,c,s,i);DU(a,s,h,n),a.centerX=o.centerX,a.centerY=o.centerY,a.innerRadius=o.innerRadius,a.outerRadius=o.outerRadius,a.startAngle=o.startAngle,a.endAngle=o.endAngle,a.inset=a.strokeWidth/2})}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>fD([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:n,strokeOpacity:a,lineDash:o,lineDashOffset:r,tension:l}=e.link,c=t?e.highlightStyle.item:void 0;return xD({fill:c?.fill??i,fillOpacity:c?.fillOpacity??s,stroke:c?.stroke??n,strokeOpacity:c?.strokeOpacity??a,strokeWidth:c?.strokeWidth??this.getStrokeWidth(e.link.strokeWidth),lineDash:c?.lineDash??o,lineDashOffset:c?.lineDashOffset??r,tension:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getLinkStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,{fills:r,strokes:l}=o,{itemStyler:c}=o.link,h=s.fill??r[i%r.length],u=s.stroke??l[i%l.length];let d;if(n||(d??(d={}),d.fill=h,d.stroke=u),c!=null){const p=this.cachedDatumCallback(fD(t,"link",n?"highlight":"node"),()=>{const{fillOpacity:g=1,strokeOpacity:f=1,strokeWidth:x=0,lineDash:y=[],lineDashOffset:b=0,tension:v}=s;return this.callWithContext(c,{seriesId:a,datum:e,highlighted:n,tension:v,fill:h,fillOpacity:g,stroke:u,strokeOpacity:f,strokeWidth:x,lineDash:y,lineDashOffset:b})});d??(d={}),Object.assign(d,p)}return xD(d,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseLinkStyle(i),n=this.getShapeFillBBox();e.each((a,o)=>{const{datumIndex:r}=o,l=o.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(r.index),o.datum,l.index,s,i);a.centerX=o.centerX,a.centerY=o.centerY,a.radius=o.radius,a.startAngle1=o.startAngle1,a.endAngle1=o.endAngle1,a.startAngle2=o.startAngle2,a.endAngle2=o.endAngle2,DU(a,s,c,n),a.tension=c?.tension??s.tension})}getShapeFillBBox(){const t=this._nodeDataDependencies?.seriesRectWidth??0,e=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(t,e),s=(t-i)/2,n=(e-i)/2,a=new ngt(s,n,t,e);return{series:a,axis:a}}getTooltipContent(t){const{id:e,linksProcessedData:i,nodesProcessedData:s,properties:n}=this,{fromKey:a,toKey:o,sizeKey:r,sizeName:l,tooltip:c}=n,h=this.contextNodeData?.nodeData.find(x=>x.datumIndex.type===t.type&&x.datumIndex.index===t.index);if(h==null)return;const u=h.type===0?h.fromNode.index:h.index,d=h.type===0?`${h.fromNode.label} - ${h.toNode.label}`:h.label,p=t.type===0?i?.dataSources.get(this.id)?.[t.index]:s?.dataSources.get(this.id)?.[t.index],g=h.size;let f;if(h.type===0){const x=h.fromNode.datumIndex,y=this.getBaseLinkStyle(!1);Object.assign(y,this.getLinkStyleOverrides(String(t.index),p,x.index,y,!1)),f=y}else{const x=h.label,y=this.getBaseNodeStyle(!1);Object.assign(y,this.getNodeStyleOverrides(String(t.index),p,t.index,g,x,y,!1)),f=y}return this.formatTooltipWithContext(c,{title:d,symbol:this.legendItemSymbol(h.type,u,f),data:r!=null?[{label:l,fallbackLabel:r,value:String(g)}]:[]},{seriesId:e,datum:p,title:d,fromKey:a,toKey:o,sizeKey:r,sizeName:l,size:g,...f})}computeFocusBounds(t){return t}};vD.className="ChordSeries",vD.type="chord";var agt=(E(),w(_)),Zn=(R(),w(nt)),{commonSeriesOptionsDefs:ogt,chordSeriesThemeableOptionsDef:rgt}=agt._ModuleSupport,SD={...rgt,...ogt,type:(0,Zn.required)((0,Zn.constant)("chord")),fromKey:(0,Zn.required)(Zn.string),toKey:(0,Zn.required)(Zn.string),sizeKey:Zn.string,sizeName:Zn.string};SD.fillGradientDefaults=(0,Zn.undocumented)(Zn.fillGradientDefaults),SD.fillPatternDefaults=(0,Zn.undocumented)(Zn.fillPatternDefaults),SD.fillImageDefaults=(0,Zn.undocumented)(Zn.fillImageDefaults);var lgt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:t=>new vD(t),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:gU._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:gU._ModuleSupport.FILL_IMAGE_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},cgt={type:"series",name:"chord",chartType:"flow-proportion",enterprise:!0,options:SD,create:t=>new vD(t)},XMt=(E(),w(_)),a1=(E(),w(_)),{ThemeConstants:{CARTESIAN_AXIS_TYPE:Jg,CARTESIAN_POSITION:tf},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:hgt}}=a1._ModuleSupport,kU={$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},[{type:Jg.NUMBER,position:tf.LEFT},{type:Jg.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"before"]},tf.TOP,tf.BOTTOM]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}}],[{type:Jg.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"after"]},tf.RIGHT,tf.LEFT]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}},{type:Jg.NUMBER,position:tf.BOTTOM}]]},ugt={series:{direction:"vertical",strokeWidth:0,spacingRatio:.25,fills:[{$palette:"fill"}],strokes:[{$palette:"stroke"}],fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:a1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:a1._ModuleSupport.FILL_IMAGE_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:0},shadow:{enabled:!1,color:hgt,xOffset:3,yOffset:3,blur:5}},axes:{[Jg.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[Jg.CATEGORY]:{line:{enabled:!1}}}},dgt=(E(),w(_)),o1=(E(),w(_)),pgt=(E(),w(_)),{lineDistanceSquared:MD,BBox:ggt,Path:fgt,SceneChangeDetection:Mh}=pgt._ModuleSupport,IU=1e-6;function AU([t,e],[i,s]){return Math.abs(t-i)<=IU&&Math.abs(e-s)<=IU}var Wr=class extends fgt{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:t,y0:e,x1:i,y1:s,x2:n,y2:a,x3:o,y3:r}=this;return{x:(t+i+n+o)/4,y:(e+s+a+r)/4}}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const{x0:i,y0:s,x1:n,y1:a,x2:o,y2:r,x3:l,y3:c}=this;return Math.min(MD(t,e,i,s,n,a,1/0),MD(t,e,n,a,o,r,1/0),MD(t,e,o,r,l,c,1/0),MD(t,e,l,c,i,s,1/0))}computeBBox(){const{x0:t,y0:e,x1:i,y1:s,x2:n,y2:a,x3:o,y3:r}=this,l=Math.min(t,i,n,o),c=Math.max(t,i,n,o)-l,h=Math.min(e,s,a,r),u=Math.max(e,s,a,r)-h;return new ggt(l,h,c,u)}updatePath(){const{path:t,x0:e,y0:i,x1:s,y1:n,x2:a,y2:o,x3:r,y3:l}=this,c=[[e,i],[s,n],[a,o],[r,l]];t.clear();let h,u;c.forEach(d=>{if(h!=null&&AU(h,d)||u!=null&&AU(u,d))return;const[p,g]=d;h==null?t.moveTo(p,g):t.lineTo(p,g),h??(h=d),u=d}),t.closePath()}};m([Mh()],Wr.prototype,"x0",2),m([Mh()],Wr.prototype,"y0",2),m([Mh()],Wr.prototype,"x1",2),m([Mh()],Wr.prototype,"y1",2),m([Mh()],Wr.prototype,"x2",2),m([Mh()],Wr.prototype,"y2",2),m([Mh()],Wr.prototype,"x3",2),m([Mh()],Wr.prototype,"y3",2);var mgt=(E(),w(_)),{NODE_UPDATE_STATE_TO_PHASE_MAPPING:ygt}=mgt._ModuleSupport;function CU(t,e,i,s){const{x0:n,y0:a,x1:o,y1:r,x2:l,y2:c,x3:h,y3:u,opacity:d}=t;return i?{x0:(n+h)/2,y0:(a+u)/2,x1:(o+l)/2,y1:(r+c)/2,x2:(o+l)/2,y2:(r+c)/2,x3:(n+h)/2,y3:(a+u)/2,opacity:d}:{x0:(n+o)/2,y0:(a+r)/2,x1:(n+o)/2,y1:(a+r)/2,x2:(l+h)/2,y2:(c+u)/2,x3:(l+h)/2,y3:(c+u)/2,opacity:d}}function xgt(t,e){const i=a=>a==null;return{fromFn:(a,o,r)=>{r==="updated"&&i(o)?r="removed":r==="updated"&&i(a.previousDatum)&&(r="added");let l;r==="added"&&a.previousDatum==null&&e==="fade"?l={...yx(a,o),opacity:0}:r==="unknown"||r==="added"?l=CU(o,a.previousDatum,t,e):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=ygt[r];return{...l,phase:c}},toFn:(a,o,r)=>{let l;return r==="removed"&&a.datum==null&&e==="fade"?l={...yx(a,o),opacity:0}:r==="removed"||i(o)?l=CU(o,a.previousDatum,t,e):l=yx(a,o),l}}}function yx(t,e){const{x0:i,y0:s,x1:n,y1:a,x2:o,y2:r,x3:l,y3:c,opacity:h}=e;return{x0:i,y0:s,x1:n,y1:a,x2:o,y2:r,x3:l,y3:c,opacity:h}}var{SeriesNodePickMode:LU,SeriesZIndexMap:wU,valueProperty:bgt,keyProperty:vgt,ChartAxisDirection:Sgt,updateLabelNode:Mgt,SMALLEST_KEY_INTERVAL:Dgt,LARGEST_KEY_INTERVAL:kgt,diff:Igt,fixNumericExtent:Agt,seriesLabelFadeInAnimation:TU,resetMotion:Cgt,resetLabelFn:Lgt,animationValidation:wgt,computeBarFocusBounds:Tgt,ContinuousScale:Ngt,Group:Ogt,Selection:_gt,PointerEvents:NU,motion:Egt,checkCrisp:Pgt,createDatumId:Rgt,applyShapeStyle:Bgt,getShapeStyle:zgt,getShapeFill:Fgt}=o1._ModuleSupport,jgt=class extends o1._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.stageKey,this.yKey=s.properties.valueKey}},OU=class extends o1._ModuleSupport.AbstractBarSeries{constructor({moduleCtx:t,animationResetFns:e}){super({moduleCtx:t,pickModes:[LU.AXIS_ALIGNED,LU.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["stageKey"],y:["valueKey"]},directionNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:e.datum,label:Lgt}}),this.NodeEvent=jgt,this.connectorNodeGroup=this.contentGroup.appendChild(new Ogt({name:`${this.id}-series-connectorNodes`,zIndex:wU.BACKGROUND})),this.connectorSelection=_gt.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=NU.None}get pickModeAxis(){return"main-category"}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.connectorNodeGroup.zIndex=[wU.BACKGROUND,t],!0):!1}isVertical(){return!super.isVertical()}connectionFactory(){return new Wr}async processData(t){const{stageKey:e,valueKey:i}=this.properties,{visible:s,id:n}=this,a=(g,f,x)=>s&&this.ctx.legendManager.getItemEnabled({seriesId:n,itemId:x}),o=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:o,yScale:r}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(Igt(this.id,this.processedData)),u.push(wgt()));const d=this.visible?{}:{forceValue:0},{processedData:p}=await this.requestDataModel(t,this.data,{props:[vgt(e,c,{id:"xValue"}),bgt(i,h,{id:"yValue",...d,validation:a,invalidValue:0}),...l?[Dgt,kgt]:[],...u],groupByKeys:!1});this.smallestDataInterval=p.reduced?.smallestKeyInterval,this.largestDataInterval=p.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,id:s,ctx:{legendManager:n}}=this;if(!e||!i)return[];const{keys:[a]}=e.domain;if(t===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o?.def.valueType==="category"?this.hasData?a.filter((r,l)=>n.getItemEnabled({seriesId:s,itemId:l})):[]:this.padBandExtent(a)}else{const o=this.domainForClippedRange(t,["yValue"],"xValue",!0),r=Math.max(...o),l=[-r,r];return Agt(l)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{hasData:t,data:e,dataModel:i,groupScale:s,processedData:n,id:a,ctx:{legendManager:o}}=this,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(t&&e&&r&&l&&i&&n?.type==="ungrouped"))return;const c=r.scale,h=l.scale,u=this.getBarDirection()===Sgt.X,{stageKey:d,valueKey:p}=this.properties,{strokeWidth:g}=this.barStyle(),f=`${p}`,x={itemId:f,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},y=this.visible;if(!y)return x;const b=i.resolveKeysById(this,"xValue",n),v=i.resolveColumnById(this,"yValue",n),{barWidth:M,groupIndex:D}=this.updateGroupScale(r),L=Ngt.is(c)?M*-.5:0,A=Pgt(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let C;return(n.dataSources.get(this.id)??[]).forEach((N,P)=>{const O=y&&o.getItemEnabled({seriesId:a,itemId:P}),B=b[P];if(B==null)return;const G=Math.round(c.convert(B))+s.convert(String(D))+L,V=v[P],W=Math.round(h.convert(-V)),H=Math.round(h.convert(V)),$=Math.max(g,Math.abs(H-W)),F={x:u?Math.min(H,W):G,y:u?G:Math.min(H,W),width:u?$:M,height:u?M:$},j={x:F.x+F.width/2,y:F.y+F.height/2},z=this.createLabelData({datumIndex:P,rect:F,barAlongX:u,yDatum:V,datum:N,visible:O}),Y={index:P,series:this,itemId:f,datum:N,datumIndex:P,xValue:B,yValue:V,xKey:d,yKey:p,x:F.x,y:F.y,width:F.width,height:F.height,midPoint:j,strokeWidth:g,crisp:A,label:z,visible:O};if(x.nodeData.push(Y),z!=null&&x.labelData.push(z),C!=null){const Z=C.rect,X=C.nodeDatum,tt=C.datumIndex;u?x.connectorData.push({datum:X,datumIndex:tt,x0:Z.x,y0:Z.y+Z.height,x1:Z.x+Z.width,y1:Z.y+Z.height,x2:F.x+F.width,y2:F.y,x3:F.x,y3:F.y,opacity:1}):x.connectorData.push({datum:X,datumIndex:tt,x0:Z.x+Z.width,y0:Z.y,x1:F.x,y1:F.y,x2:F.x,y2:F.y+F.height,x3:Z.x+Z.width,y3:Z.y+Z.height,opacity:1})}O&&(C={itemId:f,rect:F,nodeDatum:Y,datumIndex:P})}),x}updateNodes(t,e,i){super.updateNodes(t,e,i);const{connectorSelection:s}=this,n=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:s,connectorData:n}),this.updateConnectorNodes({connectorSelection:s})}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s,void 0,n=>this.getDatumId(n))}updateConnectorSelection(t){const{connectorData:e,connectorSelection:i}=t;return i.update(this.connectorEnabled()?e:[],void 0,s=>this.getDatumId(s.datum))}updateConnectorNodes(t){const{fills:e,strokes:i,fillGradientDefaults:s,fillPatternDefaults:n,fillImageDefaults:a}=this.properties,{fill:o,fillOpacity:r,stroke:l,strokeOpacity:c,strokeWidth:h,lineDash:u,lineDashOffset:d}=this.connectorStyle(),p=this.getShapeFillBBox();t.connectorSelection.each((g,f)=>{const{datumIndex:x}=f;g.setProperties(yx(g,f));const y=Fgt(o??e[x%e.length],s,n,a);Bgt(g,{fill:y,stroke:l??i[x%i.length],fillOpacity:r,strokeOpacity:c,strokeWidth:h,lineDash:u,lineDashOffset:d},void 0,p)})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=NU.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{Mgt(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{stageKey:a,valueKey:o,tooltip:r}=n,l=this.getCategoryAxis(),c=this.getValueAxis();if(!i||!s||!l||!c)return;const h=s.dataSources.get(this.id)?.[t],u=i.resolveKeysById(this,"xValue",s)[t],d=i.resolveColumnById(this,"yValue",s)[t];if(u!=null)return this.formatTooltipWithContext(r,{symbol:this.legendItemSymbol(t),data:[{label:l.formatDatum(u),value:c.formatDatum(d)}]},{seriesId:e,datum:h,title:a,stageKey:a,valueKey:o,...this.tooltipStyle(h,t)})}resetAllAnimation(t){super.resetAllAnimation(t),Cgt([this.connectorSelection],yx)}animateEmptyUpdateReady({labelSelection:t}){const{connectorSelection:e}=this,i=this.isVertical(),n=xgt(i,"normal");Egt.fromToMotion(this.id,"connectors",this.ctx.animationManager,[e],n),TU(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(t){const{labelSelection:e}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id),TU(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return Rgt(t.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return Tgt(this,this.contextNodeData?.nodeData[t])}legendItemSymbol(t){const{strokeWidth:e,fillOpacity:i,strokeOpacity:s,lineDash:n,lineDashOffset:a,fillGradientDefaults:o,fillPatternDefaults:r,fillImageDefaults:l}=this.barStyle(),{fills:c,strokes:h}=this.properties,u=c[t%c.length]??"black",d=h[t%h.length]??"black";return{marker:zgt({fill:u,fillOpacity:i,stroke:d,strokeWidth:e,strokeOpacity:s,lineDash:n,lineDashOffset:a},o,r,l)}}getLegendData(t){const{id:e,processedData:i,dataModel:s,ctx:{legendManager:n},visible:a}=this;if(!s||!i||t!=="category")return[];const{showInLegend:o}=this.properties,r=s.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const h=r[c];if(h!=null)return{legendType:"category",id:e,datum:l,itemId:c,seriesId:e,enabled:a&&n.getItemEnabled({seriesId:e,itemId:c}),label:{text:String(h)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!o}}).filter(l=>l!=null)}},Ggt=(E(),w(_)),{FillGradientDefaults:Vgt,FillPatternDefaults:Wgt,FillImageDefaults:Hgt,Label:Ugt,AbstractBarSeriesProperties:$gt,SeriesTooltip:Kgt,AxisLabel:Ygt,Property:ks}=Ggt._ModuleSupport,r1=class extends Ugt{constructor(){super(...arguments),this.spacing=0}};m([ks],r1.prototype,"placement",2),m([ks],r1.prototype,"spacing",2);var _U=class extends Ygt{};m([ks],_U.prototype,"placement",2);var nn=class extends $gt{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new Vgt,this.fillPatternDefaults=new Wgt,this.fillImageDefaults=new Hgt,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new r1,this.stageLabel=new _U,this.tooltip=new Kgt}};m([ks],nn.prototype,"stageKey",2),m([ks],nn.prototype,"valueKey",2),m([ks],nn.prototype,"fills",2),m([ks],nn.prototype,"fillGradientDefaults",2),m([ks],nn.prototype,"fillPatternDefaults",2),m([ks],nn.prototype,"fillImageDefaults",2),m([ks],nn.prototype,"fillOpacity",2),m([ks],nn.prototype,"strokes",2),m([ks],nn.prototype,"strokeWidth",2),m([ks],nn.prototype,"strokeOpacity",2),m([ks],nn.prototype,"lineDash",2),m([ks],nn.prototype,"lineDashOffset",2),m([ks],nn.prototype,"label",2),m([ks],nn.prototype,"stageLabel",2),m([ks],nn.prototype,"tooltip",2);function EU(t,{x:e,y:i,width:s,height:n,opacity:a}){return{x1:e,y1:i,x2:e+s,y2:i+n,opacity:a}}var{formatValue:Zgt,Line:Xgt}=dgt._ModuleSupport,DD=class extends OU{constructor(t){super({moduleCtx:t,animationResetFns:{datum:EU}}),this.properties=new nn}get hasData(){const{id:t,ctx:{legendManager:e}}=this,i=this.data?.reduce((s,n,a)=>s+(e.getItemEnabled({seriesId:t,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}connectorStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:n,fillGradientDefaults:a,fillPatternDefaults:o,fillImageDefaults:r}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:n,fillGradientDefaults:a,fillPatternDefaults:o,fillImageDefaults:r}}nodeFactory(){return new Xgt}createLabelData({datumIndex:t,rect:e,barAlongX:i,yDatum:s,datum:n,visible:a}){const{stageKey:o,valueKey:r,label:l}=this.properties,{spacing:c,placement:h}=l;let u,d,p,g;if(i)switch(u=e.x+e.width/2,p="center",h){case"before":d=e.y-c,g="bottom";break;case"after":d=e.y+e.height+c,g="top";break;default:d=e.y+e.height/2,g="middle"}else switch(d=e.y+e.height/2,g="middle",h){case"before":u=e.x-c,p="right";break;case"after":u=e.x+e.width+c,p="left";break;default:u=e.x+e.width/2,p="center"}return{x:u,y:d,textAlign:p,textBaseline:g,text:this.getLabelText(l,{itemId:r,value:s,datum:n,stageKey:o,valueKey:r},f=>Zgt(f,0)),itemId:r,datum:n,datumIndex:t,series:this,visible:a}}updateDatumNodes(t){const e=t.isHighlight?this.properties.highlightStyle.item:void 0;t.datumSelection.each((i,s)=>{i.setProperties(EU(i,s)),i.stroke=e?.stroke,i.strokeWidth=e?.strokeWidth??0,i.strokeOpacity=e?.strokeOpacity??1,i.lineDash=e?.lineDash,i.lineDashOffset=e?.lineDashOffset??0})}tooltipStyle(t,e){const{fills:i,strokes:s}=this.properties,n=i[e%i.length]??"black",a=s[e%s.length]??"black",{fillOpacity:o,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=this.barStyle();return{fill:n,fillOpacity:o,stroke:a,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}}};DD.className="ConeFunnelSeries",DD.type="cone-funnel";var qgt=(E(),w(_)),ef=(R(),w(nt)),{commonSeriesOptionsDefs:Qgt,coneFunnelSeriesThemeableOptionsDef:Jgt}=qgt._ModuleSupport,tft={...Jgt,...Qgt,type:(0,ef.required)((0,ef.constant)("cone-funnel")),stageKey:(0,ef.required)(ef.string),valueKey:(0,ef.required)(ef.string)},xx=(E(),w(_)),{ThemeConstants:{CARTESIAN_AXIS_TYPE:PU}}=xx._ModuleSupport,eft={series:{direction:"vertical",fills:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},xx._ModuleSupport.SAFE_RANGE2_OPERATION]},strokes:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},xx._ModuleSupport.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:xx._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:xx._ModuleSupport.FILL_IMAGE_DEFAULTS,strokeWidth:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4}},seriesArea:{padding:{top:20,bottom:20}},axes:{[PU.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[PU.CATEGORY]:{line:{enabled:!1}}}},ift={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"cone-funnel",moduleFactory:t=>new DD(t),solo:!0,tooltipDefaults:{range:"nearest"},defaultAxes:kU,themeTemplate:eft},sft={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:tft,create:t=>new DD(t)},qMt=(E(),w(_)),nft=(E(),w(_)),aft=(E(),w(_)),{FillGradientDefaults:oft,FillPatternDefaults:rft,FillImageDefaults:lft,Label:cft,DropShadow:hft,AbstractBarSeriesProperties:uft,BaseProperties:dft,SeriesTooltip:pft,AxisLabel:gft,Property:we}=aft._ModuleSupport,fft=class extends cft{},RU=class extends gft{};m([we],RU.prototype,"placement",2);var Ql=class extends dft{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};m([we],Ql.prototype,"enabled",2),m([we],Ql.prototype,"fill",2),m([we],Ql.prototype,"fillOpacity",2),m([we],Ql.prototype,"stroke",2),m([we],Ql.prototype,"strokeWidth",2),m([we],Ql.prototype,"strokeOpacity",2),m([we],Ql.prototype,"lineDash",2),m([we],Ql.prototype,"lineDashOffset",2);var Xi=class extends uft{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new oft,this.fillPatternDefaults=new rft,this.fillImageDefaults=new lft,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new Ql,this.shadow=new hft().set({enabled:!1}),this.label=new fft,this.stageLabel=new RU,this.tooltip=new pft}};m([we],Xi.prototype,"stageKey",2),m([we],Xi.prototype,"valueKey",2),m([we],Xi.prototype,"fills",2),m([we],Xi.prototype,"fillGradientDefaults",2),m([we],Xi.prototype,"fillPatternDefaults",2),m([we],Xi.prototype,"fillImageDefaults",2),m([we],Xi.prototype,"fillOpacity",2),m([we],Xi.prototype,"strokes",2),m([we],Xi.prototype,"strokeWidth",2),m([we],Xi.prototype,"strokeOpacity",2),m([we],Xi.prototype,"lineDash",2),m([we],Xi.prototype,"lineDashOffset",2),m([we],Xi.prototype,"spacingRatio",2),m([we],Xi.prototype,"itemStyler",2),m([we],Xi.prototype,"dropOff",2),m([we],Xi.prototype,"shadow",2),m([we],Xi.prototype,"label",2),m([we],Xi.prototype,"stageLabel",2),m([we],Xi.prototype,"tooltip",2);var{ChartAxisDirection:mft,resetBarSelectionsFn:yft,prepareBarAnimationFunctions:BU,midpointStartingBarPosition:zU,createDatumId:xft,formatValue:bft,Rect:vft,motion:FU,applyShapeStyle:Sft,getShapeStyle:jU}=nft._ModuleSupport,kD=class extends OU{constructor(t){super({moduleCtx:t,animationResetFns:{datum:yft}}),this.properties=new Xi}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:n,fillGradientDefaults:a,fillPatternDefaults:o,fillImageDefaults:r}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:s,lineDashOffset:n,fillGradientDefaults:a,fillPatternDefaults:o,fillImageDefaults:r}}connectorStyle(){const{fill:t,fillOpacity:e,stroke:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o}=this.properties.dropOff;return{fill:t,fillOpacity:e,stroke:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}nodeFactory(){return new vft}createLabelData({datumIndex:t,rect:e,yDatum:i,datum:s,visible:n}){const{valueKey:a,stageKey:o,label:r}=this.properties;return{x:e.x+e.width/2,y:e.y+e.height/2,textAlign:"center",textBaseline:"middle",text:this.getLabelText(r,{itemId:o,value:i,datum:s,valueKey:a,stageKey:o},l=>bft(l,0)),itemId:o,datum:s,datumIndex:t,series:this,visible:n}}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return jU({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getItemStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,{stageKey:r,valueKey:l,fills:c,strokes:h,itemStyler:u}=o,d=s.fill??c[i%c.length]??"black",p=s.stroke??h[i%h.length]??"black",g={};if(n||(g.fill=d,g.stroke=p),u!=null){const f=this.cachedDatumCallback(xft(t,n?"highlight":"node"),()=>{const{fillOpacity:x,strokeOpacity:y,strokeWidth:b,lineDash:v,lineDashOffset:M}=s;return this.callWithContext(u,{seriesId:a,datum:e,highlighted:n,stageKey:r,valueKey:l,fill:d,fillOpacity:x,stroke:p,strokeOpacity:y,strokeWidth:b,lineDash:v,lineDashOffset:M})});Object.assign(g,f)}return jU(g,o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults)}updateDatumNodes(t){const{shadow:e}=this.properties,{datumSelection:i,isHighlight:s}=t,n=this.getCategoryDirection()===mft.X,a=this.getItemBaseStyle(s),o=this.getShapeFillBBox();i.each((r,l)=>{const{datumIndex:c}=l,h=this.getItemStyleOverrides(String(l.datumIndex),l.datum,c,a,s);Sft(r,a,h,o),r.visible=n?l.width>0:l.height>0,r.crisp=l.crisp,r.fillShadow=e})}tooltipStyle(t,e){const i=this.getItemBaseStyle(!1);return Object.assign(i,this.getItemStyleOverrides(String(e),t,e,i,!1)),i}animateEmptyUpdateReady(t){super.animateEmptyUpdateReady(t);const{datumSelection:e}=t,i=this.isVertical(),n=BU(zU(i,"normal"));FU.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],n)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t);const{datumSelection:e}=t,{processedData:i}=this,s=i?.reduced?.diff?.[this.id],n=BU(zU(this.isVertical(),"fade"));FU.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],n,(a,o)=>o.xValue,s)}};kD.className="FunnelSeries",kD.type="funnel";var Mft=(E(),w(_)),sf=(R(),w(nt)),{commonSeriesOptionsDefs:Dft,funnelSeriesThemeableOptionsDef:kft}=Mft._ModuleSupport,Ift={...kft,...Dft,type:(0,sf.required)((0,sf.constant)("funnel")),stageKey:(0,sf.required)(sf.string),valueKey:(0,sf.required)(sf.string)},Aft={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"funnel",moduleFactory:t=>new kD(t),solo:!0,tooltipDefaults:{range:"exact"},defaultAxes:kU,themeTemplate:ugt},Cft={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:Ift,create:t=>new kD(t)},l1=(E(),w(_)),nf=(E(),w(_)),GU=class{*[Symbol.iterator](){const{node:t,datum:e}=this;t&&e&&(yield{node:t,datum:e})}nodes(){return this.node?[this.node]:[]}update(t,e,i,s){const n=t.nodes();if(n.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,e.appendChild(this.node));const a=n[0],o=n.toReversed().find(r=>r.datum.datum.value>r.datum.datum.segmentStart)??n[n.length-1];this.node.datum=this.datum=a.datum,s(this.node,a,o)}}},Lft=(E(),w(_)),VU={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function WU(t,e){if(t==null)return"";const{min:i,max:s}=e,n=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=s!==0?Math.ceil(Math.log10(Math.abs(s))):0,o=Math.max(2-Math.max(n,a),0);return t.toFixed(o)}function bx(t,e,i,s){if(i.text!=null)return i.text;const n=s??i.value;let a;if(i?.formatter!=null&&(a=c1(e,i.formatter,{seriesId:t,datum:void 0,value:n})),a!=null)return String(a)}function c1(t,e,i){return Lft._ModuleSupport.callWithContext(t.chartService,void 0,e,[i])}var QMt=(E(),w(_));function HU({path:t,x:e,y:i,size:s}){t.moveTo(e,i-s/2),t.lineTo(e,i+s/2)}var JMt=(E(),w(_)),h1=(R(),w(nt));function UU(t,e){const i=(0,h1.iterate)(t.datumUnion.nodes(),t.targetSelection.nodes());return t.pickNodeNearestDistantObject(e,i)}function $U(t,e){const i=[{data:t.contextNodeData?.nodeData,selection:t.datumUnion},{data:t.contextNodeData?.targetData,selection:t.targetSelection}].filter(l=>l.data&&l.data.length>0),s=(0,h1.clamp)(0,e.otherIndex+e.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:n,selection:a}=i[s];if(n==null||n.length===0)return;const o=(0,h1.clamp)(0,e.datumIndex,n.length-1),r=n[o];for(const l of a)if(l.datum===r)return{bounds:l.node,clipFocusBox:!0,datum:r,datumIndex:o,otherIndex:s}}var u1=(E(),w(_)),wft=(E(),w(_)),Tft=(R(),w(nt)),{BaseProperties:KU,Property:af}=wft._ModuleSupport,ID=class extends KU{getSegments(t,e){const{values:i,step:s,count:n}=this,a=Math.min(...t.domain),o=Math.max(...t.domain);let r;if(i!=null){const l=i.filter(c=>c>a&&c<o).sort((c,h)=>c-h);r=[a,...l,o]}else if(s!=null){const l=[];for(let c=a;c<o;c+=s)l.push(c);l.push(o),r=l}else if(n!=null){const l=n+1;r=Array.from({length:l+1},(c,h)=>h/l*(o-a)+a)}else{const l=t.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.filter(c=>c>a&&c<o);r=l!=null?[a,...l,o]:void 0}return r!=null&&r.length>e&&(Tft.Logger.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),r=void 0),r??(r=[a,o]),r}};m([af],ID.prototype,"values",2),m([af],ID.prototype,"step",2),m([af],ID.prototype,"count",2);var vx=class extends KU{constructor(){super(...arguments),this.enabled=!1,this.interval=new ID,this.spacing=0}};m([af],vx.prototype,"enabled",2),m([af],vx.prototype,"interval",2),m([af],vx.prototype,"spacing",2);var{BaseProperties:AD,SeriesTooltip:Nft,SeriesProperties:Oft,PropertiesArray:d1,Property:Dt,Label:_ft,AxisLabel:Eft}=u1._ModuleSupport,YU=class extends _ft{};m([Dt],YU.prototype,"spacing",2);var zs=class extends AD{constructor(){super(...arguments),this.value=0,this.label=new YU}};m([Dt],zs.prototype,"text",2),m([Dt],zs.prototype,"value",2),m([Dt],zs.prototype,"shape",2),m([Dt],zs.prototype,"placement",2),m([Dt],zs.prototype,"spacing",2),m([Dt],zs.prototype,"size",2),m([Dt],zs.prototype,"rotation",2),m([Dt],zs.prototype,"fill",2),m([Dt],zs.prototype,"fillOpacity",2),m([Dt],zs.prototype,"stroke",2),m([Dt],zs.prototype,"strokeWidth",2),m([Dt],zs.prototype,"strokeOpacity",2),m([Dt],zs.prototype,"lineDash",2),m([Dt],zs.prototype,"lineDashOffset",2),m([Dt],zs.prototype,"label",2);var Ta=class extends AD{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new d1(u1._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};m([Dt],Ta.prototype,"enabled",2),m([Dt],Ta.prototype,"thickness",2),m([Dt],Ta.prototype,"thicknessRatio",2),m([Dt],Ta.prototype,"fills",2),m([Dt],Ta.prototype,"fillMode",2),m([Dt],Ta.prototype,"fill",2),m([Dt],Ta.prototype,"fillOpacity",2),m([Dt],Ta.prototype,"stroke",2),m([Dt],Ta.prototype,"strokeWidth",2),m([Dt],Ta.prototype,"strokeOpacity",2),m([Dt],Ta.prototype,"lineDash",2),m([Dt],Ta.prototype,"lineDashOffset",2);var Sx=class extends AD{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};m([Dt],Sx.prototype,"values",2),m([Dt],Sx.prototype,"step",2),m([Dt],Sx.prototype,"minSpacing",2),m([Dt],Sx.prototype,"maxSpacing",2);var ZU=class extends Eft{constructor(){super(...arguments),this.placement=void 0}};m([Dt],ZU.prototype,"placement",2);var an=class extends AD{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new d1(u1._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Sx,this.label=new ZU}};m([Dt],an.prototype,"min",2),m([Dt],an.prototype,"max",2),m([Dt],an.prototype,"fills",2),m([Dt],an.prototype,"fillMode",2),m([Dt],an.prototype,"fill",2),m([Dt],an.prototype,"fillOpacity",2),m([Dt],an.prototype,"stroke",2),m([Dt],an.prototype,"strokeWidth",2),m([Dt],an.prototype,"strokeOpacity",2),m([Dt],an.prototype,"lineDash",2),m([Dt],an.prototype,"lineDashOffset",2),m([Dt],an.prototype,"defaultFill",2),m([Dt],an.prototype,"interval",2),m([Dt],an.prototype,"label",2);var CD=class extends Gr{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};m([Dt],CD.prototype,"text",2),m([Dt],CD.prototype,"placement",2),m([Dt],CD.prototype,"avoidCollisions",2);var on=class extends Oft{constructor(){super(...arguments),this.value=0,this.segmentation=new vx,this.defaultColorRange=[],this.targets=new d1(zs),this.defaultTarget=new zs,this.defaultScale=new an,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new an,this.bar=new Ta,this.label=new CD,this.tooltip=new Nft}};m([Dt],on.prototype,"value",2),m([Dt],on.prototype,"segmentation",2),m([Dt],on.prototype,"defaultColorRange",2),m([Dt],on.prototype,"targets",2),m([Dt],on.prototype,"defaultTarget",2),m([Dt],on.prototype,"defaultScale",2),m([Dt],on.prototype,"direction",2),m([Dt],on.prototype,"thickness",2),m([Dt],on.prototype,"cornerRadius",2),m([Dt],on.prototype,"cornerMode",2),m([Dt],on.prototype,"margin",2),m([Dt],on.prototype,"scale",2),m([Dt],on.prototype,"bar",2),m([Dt],on.prototype,"label",2),m([Dt],on.prototype,"tooltip",2);var Pft=(E(),w(_)),{CachedTextMeasurerPool:Rft,BBox:Bft}=Pft._ModuleSupport;function p1(t){const{x0:e,y0:i,x1:s,y1:n,horizontalInset:a,verticalInset:o}=t,r=Math.min(e,s)+a,l=Math.min(i,n)+o,c=Math.max(Math.abs(s-e)-2*a,0),h=Math.max(Math.abs(n-i)-2*o,0);return{x:r,y:l,width:c,height:h}}function zft(t,e){if(e==null)return!0;const i=p1(t),s=1e-6,n=i.x+s,a=i.y+s,o=i.x+i.width-s,r=i.y+i.height-s,l=e.x,c=e.x+e.width,h=e.y,u=e.y+e.height;return Math.max(n,l)<=Math.min(o,c)&&Math.max(a,h)<=Math.min(r,u)}function g1(t){const{clipX0:e,clipX1:i,clipY0:s,clipY1:n}=t;return e!=null&&i!=null||s!=null&&n!=null}function Fft(t){if(!g1(t))return;const{x0:e,y0:i,x1:s,y1:n}=t,{x:a,y:o,width:r,height:l}=p1(t);let{clipX0:c,clipX1:h,clipY0:u,clipY1:d}=t;(c==null||h==null)&&(c=e,h=s),(u==null||d==null)&&(u=i,d=n);const p=Math.min(c,h),g=Math.min(u,d),f=Math.abs(h-c),x=Math.abs(d-u);return c=Math.max(a,p),u=Math.max(o,g),h=Math.min(a+r,p+f),d=Math.min(o+l,g+x),new Bft(Math.min(c,h),Math.min(u,d),Math.abs(h-c),Math.abs(d-u))}function XU(t,e){const i=t?"initial":"update";return{node:{fromFn(n,a){const o=n.previousDatum;let{x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:p,clipY1:g}=o??a;const{horizontalInset:f,verticalInset:x}=a,y=o!=null&&g1(o),b=g1(a);return y&&b||(!y&&b?({x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:p,clipY1:g}=a,t&&(e?p=a.clipX0:g=a.clipY0)):y&&!b?({x0:r,y0:l,x1:c,y1:h}=a,u=void 0,d=void 0,p=void 0,g=void 0):t&&(e?c=r:h=l)),{x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:p,clipY1:g,horizontalInset:f,verticalInset:x,phase:i}},toFn(n,a){const{x0:o,y0:r,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:d,clipY1:p,horizontalInset:g,verticalInset:f}=a;return{x0:o,y0:r,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:d,clipY1:p,horizontalInset:g,verticalInset:f}},applyFn(n,a){n.setProperties(LD(n,a))}}}}function LD(t,e){const{x:i,y:s,width:n,height:a}=p1(e),o=Fft(e),r=zft(e,o);return{x:i,y:s,width:n,height:a,clipBBox:o,visible:r}}var jft={Before:"right",Center:"center",After:"left"},Gft={Before:"top",Center:"middle",After:"bottom"},Vft={Before:-1,Center:-.5,After:0},Wft={Before:0,Center:-.5,After:-1};function Hft(t,e,i,s,n,a){const{seriesRect:o,gaugeRect:r,barRect:l}=n,{padding:c,horizontal:h}=s;i.each((u,d)=>{const p=bx(t.id,e,d,a?.label);let g,f;d.placement==="outside-start"?h?(g=r.x,f=o.height):(g=o.width,f=o.height-(r.y+r.height)):d.placement==="outside-end"?h?(g=o.width-(r.x+r.width),f=o.height):(g=o.width,f=r.y):d.avoidCollisions&&(g=r.width,f=r.height);let x;if(p==null)return;if(g!=null&&f!=null)x=px(p,d,{padding:c},()=>({width:g,height:f,meta:null}))?.[0];else{const V={fontSize:d.fontSize,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontFamily:d.fontFamily,lineHeight:d.lineHeight},{width:W,height:H}=Rft.measureText(p,{font:V});x={text:p,fontSize:d.fontSize,lineHeight:Zg(d,d.fontSize),width:W,height:H}}if(x==null){u.visible=!1;return}const y=h?r.x:r.y+r.height,b=h?r.x+r.width:r.y,v=h?l.x:l.y+l.height,M=h?l.x+l.width:l.y,D=d.spacing*(h?1:-1);let L,A,C,T;switch(d.placement){case"outside-start":L=-1/0,A=1/0,C=y-D,T="Before";break;case"outside-end":L=-1/0,A=1/0,C=b+D,T="After";break;case"inside-start":L=y,A=M,C=y+D,T="After";break;case"inside-end":L=M,A=b,C=b-D,T="Before";break;case"inside-center":L=y,A=b,C=(y+b)/2,T="Center";break;case"bar-inside":L=v,A=M,C=(v+M)/2,T="Center";break;case"bar-inside-end":L=v,A=M,C=M-D,T="Before";break;case"bar-outside-end":L=M,A=b,C=M+D,T="After";break;case"bar-end":L=-1/0,A=1/0,C=M,T="Center";break}const N=h?C:r.x+r.width/2,P=h?r.y+r.height/2:C;let O,B;h?(O=N+Vft[T]*x.width,B=O+x.width):(O=P+Wft[T]*x.height,B=O+x.height);const G=Math.min(O,B)>=Math.min(L,A)&&Math.max(O,B)<=Math.max(L,A);if(d.avoidCollisions&&!G){u.visible=!1;return}u.visible=!0,u.text=x.text,u.fontSize=x.fontSize,u.lineHeight=x.lineHeight,u.textAlign=h?jft[T]:"center",u.textBaseline=h?"middle":Gft[T],u.x=N,u.y=P})}var{fromToMotion:f1,resetMotion:Uft,SeriesNodePickMode:qU,StateMachine:$ft,createDatumId:QU,CachedTextMeasurerPool:Kft,toRadians:JU,BBox:Dh,Group:Bd,PointerEvents:t$,Selection:zd,Rect:Yft,Text:e$,TransformableText:Zft,Marker:Xft,LinearScale:qft,AxisTickGenerator:Qft,NiceMode:Jft,easing:tmt,getColorStops:emt,findRangeExtent:imt}=nf._ModuleSupport,smt={before:180,middle:0,after:0},nmt={before:90,middle:0,after:-90},amt=class{constructor(t,e){this.gauge=t,this.ctx=e}get defaultTickMinSpacing(){return 0}get range(){return this.gauge.range}get reverse(){return!1}get scale(){return this.gauge.scale}get label(){return this.gauge.properties.scale.label}get interval(){return this.gauge.properties.scale.interval}formatTick(t,e,i,s,n,a){const{label:o}=this;return this.formatWithContext(t,e,i)??(o.format!=null?a?.(t):void 0)??this.gauge.formatLabel(t)}formatWithContext(t,e,i){let s;return this.label.formatter&&(s=c1(this.ctx,this.label.formatter,{value:t,index:e,domain:i,boundSeries:void 0})),s}inRange(){return!0}},wD=class extends nf._ModuleSupport.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[qU.EXACT_SHAPE_MATCH,qU.NEAREST_NODE]}),this.properties=new on,this.seriesRect=Dh.NaN,this.gaugeRect=Dh.NaN,this.scale=new qft,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new Bd({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Bd({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Bd({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Bd({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Bd({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Bd({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Bd({name:"tickGroup"})),this.scaleSelection=zd.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=zd.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=zd.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=zd.select(this.itemTargetLabelGroup,e$),this.labelSelection=zd.select(this.itemLabelGroup,e$),this.highlightTargetSelection=zd.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=zd.select(this.tickGroup,Zft),this.datumUnion=new GU,this.axis=new amt(this,t),this.tickGenerator=new Qft(this.axis),this.animationState=new $ft("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=t$.None,this.tickGroup.pointerEvents=t$.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const t=new Yft;return t.crisp=!0,t}markerFactory(){return new Xft}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){return WU(t,this.properties.scale)}createLinearGradient(t,e,i){const{properties:s,horizontal:n}=this,{defaultColorRange:a}=s;return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:emt(e,a,t.domain,i),rotation:n?90:0}}getShapeFillBBox(){const{properties:t,originX:e,originY:i,horizontal:s,scale:n}=this,{thickness:a}=t,o=imt(n.range);return new Dh(e,i,s?o:a,s?a:o)}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:s=e.text,value:n=e.value??0,shape:a=e.shape??"triangle",rotation:o=e.rotation??0,strokeWidth:r=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:u=e.fill??"black",fillOpacity:d=e.fillOpacity??1,stroke:p=e.stroke??"black",strokeOpacity:g=e.strokeOpacity??1,lineDash:f=e.lineDash??[0],lineDashOffset:x=e.lineDashOffset??0}=i,{enabled:y=e.label.enabled,color:b=e.label.color??"black",fontStyle:v=e.label.fontStyle??"normal",fontWeight:M=e.label.fontWeight??"normal",fontSize:D=e.label.fontSize,fontFamily:L=e.label.fontFamily,spacing:A=e.label.spacing??0}=i.label;return{text:s,value:n,shape:a,placement:l,spacing:c,size:h,rotation:o,fill:u,fillOpacity:d,stroke:p,strokeWidth:r,strokeOpacity:g,lineDash:f,lineDashOffset:x,label:{enabled:y,color:b,fontStyle:v,fontWeight:M,fontSize:D,fontFamily:L,spacing:A}}})}getTargetPoint(t){const{properties:e,originX:i,originY:s,horizontal:n,scale:a,gaugeRect:o}=this,{thickness:r}=e,{value:l,placement:c,spacing:h,size:u}=t,d=a.convert(l);let p;switch(c){case"before":p=-(h+u/2);break;case"after":p=r+h+u/2;break;default:p=r/2;break}return{x:i+o.x+(n?d:p),y:s+o.y+(n?p:d)}}getTargetLabel(t){const{size:e,placement:i,label:s}=t,{spacing:n,color:a,fontStyle:o,fontWeight:r,fontSize:l,fontFamily:c}=s,h=void 0,u=e/2+n;let d,p,g=0,f=0;return this.horizontal?(d="center",i==="after"?(p="top",f=u):(p="bottom",f=-u)):(p="middle",i==="before"?(d="right",g=-u):(d="left",g=u)),{offsetX:g,offsetY:f,fill:a,textAlign:d,textBaseline:p,fontStyle:o,fontWeight:r,fontSize:l,fontFamily:c,lineHeight:h}}labelDatum(t,e){const{placement:i,avoidCollisions:s,spacing:n,text:a,color:o,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:d,wrapping:p,overflowStrategy:g,formatter:f=x=>this.formatLabel(x.value)}=t;return{placement:i,avoidCollisions:s,spacing:n,text:a,value:e,fill:o,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:d,wrapping:p,overflowStrategy:g,formatter:f}}verticalLabelInset(){const{properties:t}=this,{label:e}=t,i=e.text?.split(`
`),s=Zg(e,e.fontSize)*(i?.length??1);return e.spacing+s}horizontalLabelInset(){const{scale:t,properties:e}=this,{scale:i,label:s}=e,n=s.text?.split(`
`),a=s.getFont(),o=i.interval.values??t.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5})?.ticks??[],l=(n??o?.map(c=>bx(this.id,this.ctx,this.labelDatum(s,c))??"")).reduce((c,h)=>{const{width:u}=Kft.measureText(h,{font:a});return Math.max(c,u)},0);return s.spacing+l}createNodeData(){const{id:t,properties:e,horizontal:i,scale:s,seriesRect:n}=this,{value:a,segmentation:o,thickness:r,cornerRadius:l,cornerMode:c,bar:h,scale:u,label:d}=e;s.domain=[u.min,u.max],s.range=i?[0,n.width]:[n.height,0];let p,g;i?(g=1,p=Math.PI/2):u.label.placement==="before"?(g=1,p=0):(g=-1,p=0);const f=p-Math.PI/2;let x,y,b,v;i?(x=0,y=n.width,b=(n.height-r)/2,v=b+r,d.placement==="outside-start"?x+=this.horizontalLabelInset():d.placement==="outside-end"&&(y-=this.horizontalLabelInset())):(x=(n.width-r)/2,y=x+r,v=0,b=n.height,d.placement==="outside-start"?b-=this.verticalLabelInset():d.placement==="outside-end"&&(v+=this.verticalLabelInset())),this.gaugeRect=new Dh(Math.min(x,y),Math.min(b,v),Math.abs(y-x),Math.abs(v-b));const M=0,D=0;s.domain=[u.min,u.max],s.range=i?[x,y]:[b,v];const{ticks:L}=this.tickGenerator.generateTicks({domain:s.domain,primaryTickCount:void 0,visibleRange:[0,1],niceMode:Jft.Off,labelX:0,parallelFlipRotation:p,regularFlipRotation:f,sideFlag:g,removeOverflowLabels:!1}).tickData,A=!1,C=this.getTargets(),T=[],N=[],P=[],O=[],[B,G]=s.range,V=Math.abs(G-B),W=i?s.convert(a):y,H=i?v:s.convert(a),$=o.enabled?o.spacing/2:0,F=i?$:0,j=i?0:$,z=Math.min(h.thickness??Math.round(h.thicknessRatio*r),r),Y=-(r-z)/2,Z=i?0:Y,X=i?Y:0,tt=c==="item",q=Math.ceil(V);let it=o.enabled?o.interval.getSegments(s,q):void 0;const Q=h.fill??this.createLinearGradient(s,h.fills,h.fillMode),rt=u.fill??(h.enabled&&u.fills.length===0?u.defaultFill:void 0)??this.createLinearGradient(s,u.fills,u.fillMode);if(it==null&&tt){const ht=Math.min(...s.domain),dt=Math.max(...s.domain),Mt={value:a,segmentStart:ht,segmentEnd:dt};if(h.enabled){const Qt=Math.min(l,z/2,V/2)*(A?-1:1),Lt=i?Qt:0,Wt=i?0:Qt;T.push({series:this,itemId:"value",datum:Mt,datumIndex:{type:0},type:0,x0:M+x-Lt-Z,y0:D+b-Wt-X,x1:M+W+Lt+Z,y1:D+H+Wt+X,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:Q,horizontalInset:F,verticalInset:j})}const bt=Math.min(l,r/2,V/2)*(A?-1:1),qt=i?bt:0,Jt=i?0:bt;O.push({series:this,itemId:"scale",datum:Mt,datumIndex:{type:0},type:0,x0:M+x-qt,y0:D+b-Jt,x1:M+y+qt,y1:D+v+Jt,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:rt,horizontalInset:F,verticalInset:j})}else{it??(it=s.domain);const ht=M+x-Z,dt=D+b-X,Mt=M+W+Z,Ct=D+H+X;for(let bt=0;bt<it.length-1;bt+=1){const qt=it[bt+0],Jt=it[bt+1],Vt={value:a,segmentStart:qt,segmentEnd:Jt},Qt=bt===0,Lt=bt===it.length-2,Wt=s.convert(qt),se=s.convert(Jt),js=tt||Qt?l:0,ln=tt||Lt?l:0,bo=i?js:ln,Ud=ln,ic=i?ln:js,_h=js;h.enabled&&T.push({series:this,itemId:`value-${bt}`,datum:Vt,datumIndex:{type:0},type:0,x0:M+(i?Wt:x),y0:D+(i?b:Wt),x1:M+(i?se:y),y1:D+(i?v:se),clipX0:ht,clipY0:dt,clipX1:Mt,clipY1:Ct,topLeftCornerRadius:bo,topRightCornerRadius:Ud,bottomRightCornerRadius:ic,bottomLeftCornerRadius:_h,fill:Q,horizontalInset:F,verticalInset:j}),O.push({series:this,itemId:`scale-${bt}`,datum:Vt,datumIndex:{type:0},type:0,x0:M+(i?Wt:x),y0:D+(i?b:Wt),x1:M+(i?se:y),y1:D+(i?v:se),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:bo,topRightCornerRadius:Ud,bottomRightCornerRadius:ic,bottomLeftCornerRadius:_h,fill:rt,horizontalInset:F,verticalInset:j})}}d.enabled&&P.push(this.labelDatum(d,a));const at=i?smt:nmt;for(let ht=0;ht<C.length;ht+=1){const dt=C[ht],{value:Mt,text:Ct,shape:bt,size:qt,fill:Jt,fillOpacity:Vt,stroke:Qt,strokeWidth:Lt,strokeOpacity:Wt,lineDash:se,lineDashOffset:js}=dt,ln=this.getTargetPoint(dt),bo=JU(dt.rotation+at[dt.placement]);N.push({series:this,itemId:`target-${ht}`,midPoint:ln,datum:{value:Mt},datumIndex:{type:1,index:ht},type:1,value:Mt,text:Ct,x:ln.x,y:ln.y,shape:bt,size:qt,rotation:bo,fill:Jt,fillOpacity:Vt,stroke:Qt,strokeOpacity:Wt,strokeWidth:Lt,lineDash:se,lineDashOffset:js,label:this.getTargetLabel(dt)})}return{itemId:t,nodeData:T,tickData:L,targetData:N,labelData:P,scaleData:O}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,targetSelection:s,targetLabelSelection:n,scaleSelection:a,highlightTargetSelection:o,tickSelection:r}=this;this.seriesRect=t??Dh.NaN;const l=this.checkResize(t);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],h=this.contextNodeData?.labelData??[],u=this.contextNodeData?.targetData??[],d=this.contextNodeData?.scaleData??[],p=this.contextNodeData?.tickData??[],g=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:d,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:u,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:u,targetLabelSelection:n}),this.updateTargetLabelNodes({targetLabelSelection:n}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:h,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:g!=null?[g]:[],targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:p,tickSelection:r}),this.updateTickNodes({tickSelection:r}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>QU(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:s}=this,{bar:n}=s,{fillOpacity:a,stroke:o,strokeOpacity:r,lineDash:l,lineDashOffset:c}=n,h=this.getStrokeWidth(n.strokeWidth),u=i.animationManager.isSkipped(),d=this.getShapeFillBBox();e.each((p,g)=>{const{topLeftCornerRadius:f,topRightCornerRadius:x,bottomRightCornerRadius:y,bottomLeftCornerRadius:b,fill:v}=g;p.fill=v,p.fillBBox=d,p.fillOpacity=a,p.stroke=o,p.strokeOpacity=r,p.strokeWidth=h,p.lineDash=l,p.lineDashOffset=c,p.topLeftCornerRadius=f,p.topRightCornerRadius=x,p.bottomRightCornerRadius=y,p.bottomLeftCornerRadius=b,p.pointerEvents=this.properties.bar.enabled?nf._ModuleSupport.PointerEvents.All:nf._ModuleSupport.PointerEvents.None,(u||p.previousDatum==null)&&p.setProperties(LD(p,g))}),this.datumUnion.update(e,this.itemGroup,nf._ModuleSupport.Rect,(p,g,f)=>{p.pointerEvents=nf._ModuleSupport.PointerEvents.None,p.clipBBox??(p.clipBBox=new Dh(NaN,NaN,NaN,NaN)),p.x=g.x,p.y=g.y,p.clipBBox.x=g.clipBBox?.x??g.x,p.clipBBox.y=g.clipBBox?.y??g.y,this.horizontal?(p.height=p.clipBBox.height=f.height,p.width=f===g?f.width:f.x+f.width,p.clipBBox.width=p.width-(f.width-(f.clipBBox?.width??f.width)),p.topLeftCornerRadius=g.topLeftCornerRadius,p.bottomLeftCornerRadius=g.bottomLeftCornerRadius,p.topRightCornerRadius=f.topRightCornerRadius,p.bottomRightCornerRadius=f.bottomRightCornerRadius):(p.width=p.clipBBox.width=f.width,p.height=f===g?f.height:f.x+f.height,p.clipBBox.height=p.height-(f.height-(f.clipBBox?.height??f.height)),p.topLeftCornerRadius=g.topLeftCornerRadius,p.topRightCornerRadius=g.topRightCornerRadius,p.bottomLeftCornerRadius=f.bottomLeftCornerRadius,p.bottomRightCornerRadius=f.bottomRightCornerRadius)})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>QU(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i}=this.properties,{fillOpacity:s,stroke:n,strokeOpacity:a,strokeWidth:o,lineDash:r,lineDashOffset:l}=i,c=this.getShapeFillBBox();e.each((h,u)=>{const{topLeftCornerRadius:d,topRightCornerRadius:p,bottomRightCornerRadius:g,bottomLeftCornerRadius:f,fill:x}=u;h.fill=x,h.fillBBox=c,h.fillOpacity=s,h.stroke=n,h.strokeOpacity=a,h.strokeWidth=o,h.lineDash=r,h.lineDashOffset=l,h.topLeftCornerRadius=d,h.topRightCornerRadius=p,h.bottomRightCornerRadius=g,h.bottomLeftCornerRadius=f,h.setProperties(LD(h,u))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,s=i?this.properties.highlightStyle.item:void 0;e.each((n,a)=>{const{x:o,y:r,shape:l,size:c,rotation:h,fill:u,fillOpacity:d,stroke:p,strokeOpacity:g,strokeWidth:f,lineDash:x,lineDashOffset:y}=a;n.size=c,n.shape=l==="line"?HU:l,n.fill=s?.fill??u,n.fillOpacity=s?.fillOpacity??d,n.stroke=s?.stroke??p,n.strokeOpacity=s?.strokeOpacity??g,n.strokeWidth=s?.strokeWidth??f,n.lineDash=s?.lineDash??x,n.lineDashOffset=s?.lineDashOffset??y,n.translationX=o,n.translationY=r,n.rotation=h})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,s)=>{const{x:n,y:a,text:o}=s,{offsetX:r,offsetY:l,fill:c,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:p,textAlign:g,textBaseline:f}=s.label;i.visible=!0,i.x=n+r,i.y=a+l,i.text=o,i.fill=c,i.fontStyle=h,i.fontWeight=u,i.fontSize=d,i.fontFamily=p,i.textAlign=g,i.textBaseline=f})}updateTickSelection(t){return t.tickSelection.update(t.tickData,void 0,e=>e.tickId)}updateTickNodes(t){const{gaugeRect:e,properties:i}=this,s=i.defaultScale,{enabled:n,color:a,fontFamily:o=s.label.fontFamily,fontSize:r=s.label.fontSize,fontStyle:l,fontWeight:c=s.label.fontWeight,spacing:h}=i.scale.label;let{placement:u}=i.scale.label;const d=JU(i.scale.label.rotation??0);let p,g,f,x;this.horizontal?(u??(u="after"),p="center",g=u==="before"?"bottom":"top",x=this.originY+e.y+(u==="before"?-h:e.height+h)):(u??(u="before"),p=u==="before"?"end":"start",g="middle",f=this.originX+e.x+(u==="before"?-h:e.width+h)),t.tickSelection.each((y,b)=>{if(!n){y.visible=!1;return}const v=f??b.translationY,M=x??b.translationY;y.visible=!0,y.text=b.tickLabel,y.fill=a,y.fontFamily=o,y.fontSize=r,y.fontStyle=l,y.fontWeight=c,y.textBaseline=g,y.textAlign=p,y.x=v,y.y=M,y.rotationCenterX=v,y.rotationCenterY=M,y.rotation=d})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>"primary")}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((s,n)=>{s.fill=n.fill,s.fontStyle=n.fontStyle,s.fontWeight=n.fontWeight,s.fontFamily=n.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,horizontal:i,scale:s,seriesRect:n,gaugeRect:a}=this,{x:o,y:r,width:l,height:c}=a,h=t?.label??this.properties.value;let u;if(i){const g=s.convert(h);u=new Dh(o,r,g-o,c)}else{const g=s.convert(h);u=new Dh(o,g,l,c-g)}const d={seriesRect:n,gaugeRect:a,barRect:u},{margin:p}=this.properties;Hft(this,this.ctx,e,{padding:p,horizontal:i},d,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Uft([this.datumSelection],LD),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i=0,s=0;if(this.labelSelection.each((n,a)=>{n.opacity=1,i=n.previousDatum?.value??t.from??a.value,s=a.value}),!this.labelsHaveExplicitText())if(i===s)this.formatLabelText({label:s});else{const n=`${this.id}_labels`;e.animate({id:n,groupId:"label",from:{label:i},to:{label:s},phase:t.phase??"update",ease:tmt.easeOut,onUpdate:a=>this.formatLabelText(a)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=XU(!0,this.horizontal);f1(this.id,"node",t,[this.datumSelection],e,(i,s)=>s.itemId),f1(this.id,"label",t,[this.labelSelection],VU,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=XU(!1,this.horizontal);f1(this.id,"node",t,[this.datumSelection],e,(i,s)=>s.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:s}=i;let n,a;if(t.type===0?(n=i.value,a=i.label.text):{value:n,text:a}=i.targets[t.index],n!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(n)}]},{seriesId:e,title:void 0,datum:void 0,value:n})}pickNodeClosestDatum(t){return UU(this,t)}pickFocus(t){return $U(this,t)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(t){}datumIndexForCategoryValue(t){}};wD.className="LinearGaugeSeries",wD.type="linear-gauge";var omt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:t=>new wD(t),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},l1._ModuleSupport.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",l1._ModuleSupport.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{spacing:11}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[2]},minimumFontSize:12,spacing:18,color:{$ref:"backgroundColor"}},margin:4}}},rmt={type:"series",name:"linear-gauge",chartType:"gauge",enterprise:!0,options:l1._ModuleSupport.linearGaugeSeriesOptionsDef,create:t=>new wD(t)},i$=(E(),w(_)),Mx={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1}},s$=(E(),w(_)),n$=(R(),w(nt)),lmt=(E(),w(_)),cmt=1e-9;function a$(t,e,i,s){const[n,a]=t,[o,r]=e,l=o-n,c=r-a,h=l*l+c*c;let u,d;if(Math.abs(h)<cmt)u=n,d=a;else{let f=((i-n)*l+(s-a)*c)/h;f=Math.max(0,Math.min(1,f)),u=n+f*(o-n),d=a+f*(r-a)}const p=i-u,g=s-d;return p*p+g*g}function o$(t,e,i){let s=1/0,n=t[t.length-1];for(const a of t)s=Math.min(s,a$(n,a,e,i)),n=a;return Math.sqrt(s)}function m1(t){let[e,i]=t[0],s=0;for(let n=1;n<t.length;n+=1){const[a,o]=t[n],r=Math.hypot(a-e,o-i);s+=r,e=a,i=o}return s}function TD(t){if(t.length===0)return;const e=m1(t)/2;let[i,s]=t[0],n=0;for(let a=1;a<t.length;a+=1){const[o,r]=t[a],l=Math.hypot(o-i,r-s),c=n+l;if(c>e){const h=(e-n)/l,u=[i+(o-i)*h,s+(r-s)*h],d=Math.atan2(r-s,o-i);return{point:u,angle:d}}n=c,i=o,s=r}}var hmt=(E(),w(_)),{LonLatBBox:umt}=hmt._ModuleSupport;function Dx(t,e,i,s,n){return t==null?t=new umt(e,i,s,n):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,s),t.lat1=Math.max(t.lat1,n)),t}function Fd(t,e){return t.forEach(i=>{const[s,n]=i;e=Dx(e,s,n,s,n)}),e}function dmt(t){if(t.length===0)return;let e=0,i=0,s=0,[n,a]=t[t.length-1];for(const[o,r]of t){const l=n*r-o*a;s+=l,e+=(n+o)*l,i+=(a+r)*l,n=o,a=r}return s*=3,[e/s,i/s]}function ND(t,e,i){let s=!1,n=1/0;for(const a of t){let o=a[a.length-1],[r,l]=o;for(const c of a){const[h,u]=c;u>i!=l>i&&e<(r-h)*(i-u)/(l-u)+h&&(s=!s),n=Math.min(n,a$(o,c,e,i)),o=c,r=h,l=u}}return(s?-1:1)*Math.sqrt(n)}var{Path:pmt,ExtendedPath2D:gmt,BBox:fmt,SceneChangeDetection:mmt,SceneObjectChangeDetection:ymt,objectsEqual:xmt}=lmt._ModuleSupport,of=class extends pmt{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new gmt}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(t,e)?!1:this.geometryDistance(i,t,e)<=0}distanceSquared(t,e){const{projectedGeometry:i}=this;if(i==null)return 1/0;const s=this.geometryDistance(i,t,e);return s>0?s*s:0}geometryDistance(t,e,i){const{renderMode:s,strokeWidth:n}=this,a=(s&1)!==0,o=(s&2)!==0,r=Math.max(n/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return a?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(ND(c,e,i),0)),1/0):1/0;case"Polygon":return a?Math.max(ND(t.coordinates,e,i),0):1/0;case"MultiLineString":return o?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(o$(c,e,i)-r,0)),1/0):1/0;case"LineString":return o?Math.max(o$(t.coordinates,e,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:s,strokePath:n}=this,a=(i&1)!==0,o=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(r=>{e=this.drawGeometry(r,e)});break;case"MultiPolygon":a&&t.coordinates.forEach(r=>{e=this.drawPolygon(s,r,e)});break;case"Polygon":a&&(e=this.drawPolygon(s,t.coordinates,e));break;case"LineString":o&&(e=this.drawLineString(n,t.coordinates,e,!1));break;case"MultiLineString":o&&t.coordinates.forEach(r=>{e=this.drawLineString(n,r,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let s=1;s<e.length;s+=1){const n=e[s];this.drawLineString(t,n,void 0,!0)}return i}drawLineString(t,e,i,s){if(e.length<2)return i;const n=s?e.length-1:e.length;for(let a=0;a<n;a+=1){const[o,r]=e[a];if(a===0?t.moveTo(o,r):t.lineTo(o,r),i==null)i=new fmt(o,r,0,0);else{const{x:l,y:c}=i,h=l+i.width,u=c+i.height;i.x=Math.min(l,o),i.y=Math.min(c,r),i.width=Math.max(h,o)-i.x,i.height=Math.max(u,r)-i.y}}return s&&t.closePath(),i}};m([ymt({equals:xmt})],of.prototype,"projectedGeometry",2),m([mmt()],of.prototype,"renderMode",2);function rf(t,e){if(t.bbox!=null){const[i,s,n,a]=t.bbox;return e=Dx(e,i,s,n,a),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=rf(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=Fd(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=Fd(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=Fd(i,e)});break;case"LineString":e=Fd(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[s,n]=i;e=Dx(e,s,n,s,n)});break;case"Point":{const[i,s]=t.coordinates;e=Dx(e,i,s,i,s);break}}return e}function OD(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(s=>{const n=OD(s);if(n==null)return;const a=Fd(n[0],void 0);if(a==null)return;const o=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(e==null||o>e)&&(e=o,i=n)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(s=>{const n=Fd(s[0],void 0);if(n==null)return;const a=Math.abs(n.lat1-n.lat0)*Math.abs(n.lon1-n.lon0);(e==null||a>e)&&(e=a,i=s)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function _D(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(s=>{const n=_D(s);if(n==null)return;const a=m1(n);a!=null&&(e==null||a>e)&&(e=a,i=n)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(s=>{const n=m1(s);n>e&&(e=n,i=s)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function y1(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>y1(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function kh(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>kh(i,e))};case"Polygon":return{type:"Polygon",coordinates:x1(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:bmt(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:x1(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:b1(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:b1(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function bmt(t,e){return t.map(i=>x1(i,e))}function x1(t,e){return t.map(i=>b1(i,e))}function b1(t,e){return t.map(i=>e.convert(i))}function vmt(){return{fromFn:(i,s,n)=>n==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,s,n)=>n==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function r$(t,e){const i=t.contextNodeData?.nodeData[e.datumIndex];if(i!==void 0){for(const s of t.datumSelection.nodes())if(s.datum===i)return s}}var l$=(E(),w(_)),tDt=class extends l$._ModuleSupport.SeriesProperties{},kx=class extends l$._ModuleSupport.DataModelSeries{addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}},Smt=(E(),w(_)),{Property:li,SeriesProperties:Mmt,SeriesTooltip:Dmt,Label:kmt}=Smt._ModuleSupport,ii=class extends Mmt{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new kmt,this.tooltip=new Dmt}};m([li],ii.prototype,"topology",2),m([li],ii.prototype,"title",2),m([li],ii.prototype,"legendItemName",2),m([li],ii.prototype,"idKey",2),m([li],ii.prototype,"topologyIdKey",2),m([li],ii.prototype,"idName",2),m([li],ii.prototype,"labelKey",2),m([li],ii.prototype,"labelName",2),m([li],ii.prototype,"sizeKey",2),m([li],ii.prototype,"sizeName",2),m([li],ii.prototype,"colorKey",2),m([li],ii.prototype,"colorName",2),m([li],ii.prototype,"sizeDomain",2),m([li],ii.prototype,"colorRange",2),m([li],ii.prototype,"maxStrokeWidth",2),m([li],ii.prototype,"stroke",2),m([li],ii.prototype,"strokeOpacity",2),m([li],ii.prototype,"strokeWidth",2),m([li],ii.prototype,"lineDash",2),m([li],ii.prototype,"lineDashOffset",2),m([li],ii.prototype,"itemStyler",2),m([li],ii.prototype,"label",2),m([li],ii.prototype,"tooltip",2);var{getMissCount:Imt,createDatumId:c$,SeriesNodePickMode:h$,valueProperty:Ix,CachedTextMeasurerPool:Amt,ColorScale:Cmt,LinearScale:Lmt,Selection:v1,Text:wmt,Transformable:Tmt}=s$._ModuleSupport,ED=class extends kx{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[h$.EXACT_SHAPE_MATCH,h$.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new ii,this._chartTopology=void 0,this.colorScale=new Cmt,this.sizeScale=new Lmt,this.datumSelection=v1.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=v1.select(this.labelGroup,wmt),this.highlightDatumSelection=v1.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new of;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}async processData(t){if(this.data==null)return;const{data:e,topology:i,sizeScale:s,colorScale:n}=this,{topologyIdKey:a,idKey:o,sizeKey:r,colorKey:l,labelKey:c,sizeDomain:h,colorRange:u}=this.properties,d=new Map;i?.features.forEach(v=>{const M=v.properties?.[a];M==null||!y1(v.geometry,2)||d.set(M,v)});const p=this.sizeScale.type,g=this.colorScale.type,f=this.scale?.type,{dataModel:x,processedData:y}=await this.requestDataModel(t,e,{props:[Ix(o,f,{id:"idValue",includeProperty:!1}),Ix(o,f,{id:"featureValue",includeProperty:!1,processor:()=>v=>d.get(v)}),...c!=null?[Ix(c,"band",{id:"labelValue"})]:[],...r!=null?[Ix(r,p,{id:"sizeValue"})]:[],...l!=null?[Ix(l,g,{id:"colorValue"})]:[]]}),b=x.resolveColumnById(this,"featureValue",y);if(this.topologyBounds=b.reduce((v,M)=>{const D=M?.geometry;return D==null?v:rf(D,v)},void 0),r!=null){const v=x.resolveProcessedDataIndexById(this,"sizeValue"),M=y.domain.values[v]??[];s.domain=h??M}if(u!=null&&this.isColorScaleValid()){const v=x.resolveProcessedDataIndexById(this,"colorValue");n.domain=y.domain.values[v],n.range=u,n.update()}i==null&&n$.Logger.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.input.count,a=Imt(this,i.defs.values[s].missing);return!(n===0||n===a)}getLabelDatum(t,e,i,s){if(e==null||i==null)return;const n=_D(i);if(n==null)return;const{idKey:a,idName:o,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d,label:p}=this.properties,g=this.getLabelText(p,{value:e,datum:t,idKey:a,idName:o,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d});if(g==null)return;const f=Amt.measureText(String(g),{font:s}),x=TD(n);if(x==null)return;const[y,b]=x.point,{width:v,height:M}=f;return{point:{x:y,y:b,size:0},label:{width:v,height:M,text:g},anchor:void 0,placement:void 0}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:s,properties:n,scale:a}=this,{idKey:o,sizeKey:r,colorKey:l,labelKey:c,label:h}=n;if(e==null||i==null)return;const u=e.resolveColumnById(this,"idValue",i),d=e.resolveColumnById(this,"featureValue",i),p=c!=null?e.resolveColumnById(this,"labelValue",i):void 0,g=r!=null?e.resolveColumnById(this,"sizeValue",i):void 0,f=l!=null?e.resolveColumnById(this,"colorValue",i):void 0,x=n.maxStrokeWidth??n.strokeWidth;s.range=[Math.min(n.strokeWidth,x),x];const y=h.getFont(),b=new Map;i.dataSources.get(this.id)?.forEach((C,T)=>{const N=u[T],P=d[T]?.geometry??void 0,O=P!=null&&a!=null?kh(P,a):void 0;N!=null&&O!=null&&b.set(N,O)});const v=[],M=[],D=[];(i.dataSources.get(this.id)??[]).forEach((C,T)=>{const N=u[T],P=f?.[T],O=g?.[T],B=p?.[T],G=b.get(N);G==null&&D.push(N);const V=this.getLabelDatum(C,B,G,y);V!=null&&M.push(V),v.push({series:this,itemId:o,datum:C,datumIndex:T,idValue:N,labelValue:B,colorValue:P,sizeValue:O,projectedGeometry:G})});const A=10;if(D.length>A){const C=D.length-A;D.length=A,D.push(`(+${C} more)`)}return D.length>0&&n$.Logger.warnOnce("some data items do not have matches in the provided topology",D),{itemId:t,nodeData:v,labelData:M}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,highlightDatumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let i=this.ctx.highlightManager?.getActiveHighlight();i!=null&&(i.series!==this||i.datum==null)&&(i=void 0);const s=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>c$(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset}}getItemStyleOverrides(t,e,i,s,n,a){const{id:o,properties:r,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:u}=r;let d;if(!a&&i!=null&&(d??(d={}),d.stroke=this.isColorScaleValid()?l.convert(i):h?.[0]??r.stroke),s!=null&&(d??(d={}),d.strokeWidth=c.convert(s,{clamp:!0})),u!=null){const p=this.cachedDatumCallback(c$(t,a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:o,datum:e,highlighted:a,...n,...d}));d??(d={}),Object.assign(d,p)}return d}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getItemBaseStyle(i);e.each((n,a)=>{const{datum:o,datumIndex:r,colorValue:l,sizeValue:c,projectedGeometry:h}=a;if(h==null){n.visible=!1,n.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(r),o,l,c,s,i);n.visible=!0,n.projectedGeometry=h,n.stroke=u?.stroke??s.stroke,n.strokeWidth=u?.strokeWidth??s.strokeWidth,n.strokeOpacity=u?.strokeOpacity??s.strokeOpacity,n.lineDash=u?.lineDash??s.lineDash,n.lineDashOffset=u?.lineDashOffset??s.lineDashOffset})}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=s$._ModuleSupport.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:u,text:d})=>{r.visible=!0,r.x=l+h/2,r.y=c+u/2,r.text=d,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textAlign="center",r.textBaseline="middle"})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((n,a)=>{const o=n.distanceSquared(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,s=i!=null?_D(i):void 0,n=s!=null?TD(s)?.point:void 0,a=n!=null?{x:n[0],y:n[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:s}=this,{strokeWidth:n,strokeOpacity:a,lineDash:o}=s;let{stroke:r}=s;if(t!=null&&this.isColorScaleValid()){const c=e.resolveColumnById(this,"colorValue",i)[t];r=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:r,strokeWidth:n,strokeOpacity:a,lineDash:o}}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:s,visible:n}=this,{title:a,legendItemName:o,idKey:r,idName:l,colorKey:c,colorName:h,colorRange:u,showInLegend:d}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:n,seriesId:s,colorName:h,colorRange:u,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:n,label:{text:o??a??l??r},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!d}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{idKey:a,idName:o,colorKey:r,colorName:l,sizeKey:c,sizeName:h,labelKey:u,labelName:d,title:p,legendItemName:g,tooltip:f}=n;if(!i||!s)return;const x=s.dataSources.get(this.id)?.[t],y=i.resolveColumnById(this,"idValue",s),b=[],v=c!=null?i.resolveColumnById(this,"sizeValue",s)[t]:void 0,M=r!=null?i.resolveColumnById(this,"colorValue",s)[t]:void 0;if(c!=null&&b.push({label:h,fallbackLabel:c,value:String(v)}),r!=null&&b.push({label:l,fallbackLabel:r,value:String(M)}),u!=null&&u!==a){const L=i.resolveColumnById(this,"labelValue",s)[t];b.push({label:d,fallbackLabel:u,value:L})}const D=this.getItemBaseStyle(!1);return Object.assign(D,this.getItemStyleOverrides(String(t),t,M,v,D,!1)),this.formatTooltipWithContext(f,{heading:y[t],title:p??g,symbol:this.legendItemSymbol(t),data:b},{seriesId:e,datum:x,title:p,idKey:a,idName:o,colorKey:r,colorName:l,sizeKey:c,sizeName:h,labelKey:u,labelName:d,...D})}computeFocusBounds(t){const e=r$(this,t);return e?Tmt.toCanvas(this.contentGroup,e.getBBox()):void 0}};ED.className="MapLineSeries",ED.type="map-line";var Nmt=(E(),w(_)),qi=(R(),w(nt)),{commonSeriesOptionsDefs:Omt,mapLineSeriesThemeableOptionsDef:_mt,without:Emt}=Nmt._ModuleSupport,u$={..._mt,...Emt(Omt,["highlightStyle"]),type:(0,qi.required)((0,qi.constant)("map-line")),idKey:(0,qi.required)(qi.string),sizeKey:qi.string,colorKey:qi.string,labelKey:qi.string,idName:qi.string,sizeName:qi.string,colorName:qi.string,labelName:qi.string,topology:qi.geoJson,topologyIdKey:qi.string,legendItemName:qi.string,title:qi.string};u$.colorRange=(0,qi.undocumented)((0,qi.and)((0,qi.arrayOf)(qi.color),(0,qi.arrayLength)(1)));var Pmt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:t=>new ED(t),tooltipDefaults:{range:"exact"},themeTemplate:{...Mx,series:{stroke:i$._ModuleSupport.SAFE_STROKE_FILL_OPERATION,colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},i$._ModuleSupport.SAFE_RANGE2_OPERATION]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},Rmt={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:u$,create:t=>new ED(t)},eDt=(E(),w(_)),Bmt=(E(),w(_)),zmt=(R(),w(nt)),Fmt=(E(),w(_)),{Property:jd,SeriesProperties:jmt,SeriesTooltip:Gmt}=Fmt._ModuleSupport,Ih=class extends jmt{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Gmt}};m([jd],Ih.prototype,"topology",2),m([jd],Ih.prototype,"stroke",2),m([jd],Ih.prototype,"strokeOpacity",2),m([jd],Ih.prototype,"strokeWidth",2),m([jd],Ih.prototype,"lineDash",2),m([jd],Ih.prototype,"lineDashOffset",2),m([jd],Ih.prototype,"tooltip",2);var{createDatumId:Vmt,SeriesNodePickMode:Wmt,Group:Hmt,Selection:Umt,PointerEvents:$mt}=Bmt._ModuleSupport,PD=class extends kx{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[Wmt.EXACT_SHAPE_MATCH]}),this.properties=new Ih,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Hmt({name:"itemGroup"})),this.datumSelection=Umt.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new of;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=$mt.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const s=i.geometry;return s==null?e:rf(s,e)},void 0),t==null&&zmt.Logger.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const s=[],n=[];return e.features.forEach((a,o)=>{const{geometry:r}=a,l=r!=null&&i!=null?kh(r,i):void 0;l!=null&&s.push({series:this,itemId:o,datum:a,datumIndex:0,index:o,projectedGeometry:l})}),{itemId:t,nodeData:s,labelData:n}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Vmt(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{stroke:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}=e,r=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=s,l.strokeWidth=r,l.strokeOpacity=n,l.lineDash=a,l.lineDashOffset=o})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}computeFocusBounds(t){}};PD.className="MapLineBackgroundSeries",PD.type="map-line-background";var Kmt=(E(),w(_)),S1=(R(),w(nt)),{mapLineBackgroundSeriesThemeableOptionsDef:Ymt}=Kmt._ModuleSupport,Zmt={...Ymt,type:(0,S1.required)((0,S1.constant)("map-line-background")),topology:S1.geoJson},Xmt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:t=>new PD(t),tooltipDefaults:{range:"exact"},themeTemplate:{...Mx,series:{stroke:{$path:["./1",{$palette:"stroke"},{$palette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},qmt={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:Zmt,create:t=>new PD(t)},M1=(E(),w(_)),d$=(R(),w(nt)),p$=(E(),w(_)),Qmt=(R(),w(nt)),Jmt=(t,e,i)=>{let s=t,n=s;for(const a of e)if(s==null||i(s.value,a)>0)s={value:a,next:s},n=s;else{for(n=n;n.next!=null&&i(n.next.value,a)<=0;)n=n.next;n.next={value:a,next:n.next}}return s};function g$(t,e,i){const s=Fd(t[0],void 0);if(s==null)return;const n=(s.lon0+s.lon1)/2,a=(s.lat0+s.lat1)/2,o=Math.abs(s.lon1-s.lon0),r=Math.abs(s.lat1-s.lat0),l=dmt(t[0]),[c,h]=l,u=-ND(t,c,h);let d;const p=(D,L)=>{const C=Math.max(L-u,0);return D-.5*C},g=(D,L,A)=>{const{distance:C,maxDistance:T}=i(t,D,L,A),N=Math.hypot(c-D,h-L),P=Math.min(Math.max(c,D-A/2),D+A/2),O=Math.min(Math.max(h,L-A/2),L+A/2),B=Math.hypot(c-P,h-O),G=p(C,N),V=p(T,B);return{distance:C,maxDistance:T,value:G,maxValue:V,x:D,y:L,stride:A}},f=(D,L,A,C)=>{const T=g(L,A,C);T.maxDistance>=0&&D.push(T)},x=Math.min(o,r)/2;let y={value:g(n,a,x),next:null};for(;y!=null;){const D=y.value,{distance:L,value:A,maxValue:C,x:T,y:N,stride:P}=D;if(y=y.next,L>0&&(d==null||A>d.value)&&(d=D),d!=null&&C-d.value<=e)continue;const O=P/2,B=[];f(B,T-O,N-O,O),f(B,T+O,N-O,O),f(B,T-O,N+O,O),f(B,T+O,N+O,O),B.sort(f$),y=Jmt(y,B,f$)}if(d==null)return;const{distance:b,x:v,y:M}=d;return{x:v,y:M,distance:b}}var f$=(t,e)=>e.maxValue-t.maxValue;function D1(t,e){const i=g$(t,e,(a,o,r,l)=>{const c=-ND(a,o,r),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:s,y:n}=i;return[s,n]}function m$(t,e){let i;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(s=>m$(s,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const s=OD(t);i=s!=null?D1(s,e):void 0;break}case"Polygon":{const s=t.coordinates;i=s!=null?D1(s,e):void 0;break}case"MultiLineString":{const s=_D(t);i=s!=null?TD(s)?.point:void 0;break}case"LineString":{const s=t.coordinates;i=TD(s)?.point;break}}return i!=null?[i]:[]}var tyt=(E(),w(_)),{BBox:eyt}=tyt._ModuleSupport;function y$(t){if(!t)return;const{range:e}=t,i=e[0][0],s=e[0][1],n=e[1][0]-i,a=e[1][1]-s,o=new eyt(i,s,n,a);return{series:o,axis:o}}var iyt=(E(),w(_)),{FillGradientDefaults:syt,FillPatternDefaults:nyt,FillImageDefaults:ayt,Property:ae,SeriesProperties:oyt,SeriesTooltip:ryt,Label:lyt}=iyt._ModuleSupport,x$=class extends lyt{constructor(){super(...arguments),this.placement="bottom"}};m([ae],x$.prototype,"placement",2);var oe=class extends oyt{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillGradientDefaults=new syt,this.fillPatternDefaults=new nyt,this.fillImageDefaults=new ayt,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new x$,this.tooltip=new ryt}};m([ae],oe.prototype,"topology",2),m([ae],oe.prototype,"title",2),m([ae],oe.prototype,"legendItemName",2),m([ae],oe.prototype,"idKey",2),m([ae],oe.prototype,"topologyIdKey",2),m([ae],oe.prototype,"idName",2),m([ae],oe.prototype,"latitudeKey",2),m([ae],oe.prototype,"latitudeName",2),m([ae],oe.prototype,"longitudeKey",2),m([ae],oe.prototype,"longitudeName",2),m([ae],oe.prototype,"labelKey",2),m([ae],oe.prototype,"labelName",2),m([ae],oe.prototype,"sizeKey",2),m([ae],oe.prototype,"sizeName",2),m([ae],oe.prototype,"colorKey",2),m([ae],oe.prototype,"colorName",2),m([ae],oe.prototype,"colorRange",2),m([ae],oe.prototype,"shape",2),m([ae],oe.prototype,"size",2),m([ae],oe.prototype,"maxSize",2),m([ae],oe.prototype,"sizeDomain",2),m([ae],oe.prototype,"fill",2),m([ae],oe.prototype,"fillGradientDefaults",2),m([ae],oe.prototype,"fillPatternDefaults",2),m([ae],oe.prototype,"fillImageDefaults",2),m([ae],oe.prototype,"fillOpacity",2),m([ae],oe.prototype,"stroke",2),m([ae],oe.prototype,"strokeWidth",2),m([ae],oe.prototype,"strokeOpacity",2),m([ae],oe.prototype,"lineDash",2),m([ae],oe.prototype,"lineDashOffset",2),m([ae],oe.prototype,"itemStyler",2),m([ae],oe.prototype,"label",2),m([ae],oe.prototype,"tooltip",2);var{CachedTextMeasurerPool:cyt,fromToMotion:hyt,StateMachine:uyt,getMissCount:dyt,createDatumId:b$,SeriesNodePickMode:v$,valueProperty:Gd,computeMarkerFocusBounds:pyt,ColorScale:gyt,LinearScale:fyt,Group:myt,Selection:k1,Text:yyt,Marker:I1,applyShapeStyle:xyt,getShapeStyle:S$}=p$._ModuleSupport,RD=class extends kx{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[v$.EXACT_SHAPE_MATCH,v$.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new oe,this._chartTopology=void 0,this.colorScale=new gyt,this.sizeScale=new fyt,this.markerGroup=this.contentGroup.appendChild(new myt({name:"markerGroup"})),this.labelSelection=k1.select(this.labelGroup,yyt,!1),this.markerSelection=k1.select(this.markerGroup,I1,!1),this.highlightMarkerSelection=k1.select(this.highlightNode,I1),this.animationState=new uyt("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[3,t],this.highlightGroup.zIndex=[4,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(t){if(this.data==null)return;const{data:e,topology:i,sizeScale:s,colorScale:n}=this,{topologyIdKey:a,idKey:o,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,sizeDomain:d,colorRange:p}=this.properties,g=new Map;i?.features.forEach(C=>{const T=C.properties?.[a];T!=null&&g.set(T,C)});const f=this.sizeScale.type,x=this.colorScale.type,y=this.scale?.type,b=r!=null&&l!=null,{dataModel:v,processedData:M}=await this.requestDataModel(t,e,{props:[...o!=null?[Gd(o,y,{id:"idValue",includeProperty:!1}),Gd(o,y,{id:"featureValue",includeProperty:!1,processor:()=>C=>g.get(C)})]:[],...b?[Gd(r,y,{id:"latValue"}),Gd(l,y,{id:"lonValue"})]:[],...u?[Gd(u,"band",{id:"labelValue"})]:[],...c?[Gd(c,f,{id:"sizeValue"})]:[],...h?[Gd(h,x,{id:"colorValue"})]:[]]}),D=o!=null?v.resolveColumnById(this,"featureValue",M):void 0,L=b?v.resolveColumnById(this,"latValue",M):void 0,A=b?v.resolveColumnById(this,"lonValue",M):void 0;if(this.topologyBounds=M.dataSources.get(this.id)?.reduce((C,T,N)=>{const O=D?.[N]?.geometry;if(O!=null&&(C=rf(O,C)),L!=null&&A!=null){const B=A[N],G=L[N];C=Dx(C,B,G,B,G)}return C},void 0),c!=null){const C=v.resolveProcessedDataIndexById(this,"sizeValue"),T=M.domain.values[C]??[];s.domain=d??T}if(p!=null&&this.isColorScaleValid()){const C=v.resolveProcessedDataIndexById(this,"colorValue");n.domain=M.domain.values[C],n.range=p,n.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.input.count,a=dyt(this,i.defs.values[s].missing);return!(n===0||n===a)}getLabelDatum(t,e,i,s,n,a){if(e==null)return;const{idKey:o,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:p,colorKey:g,colorName:f,labelKey:x,labelName:y,label:b,shape:v}=this.properties,{placement:M}=b,D=this.getLabelText(b,{value:e,datum:t,idKey:o,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:p,colorKey:g,colorName:f,labelKey:x,labelName:y});if(D==null)return;const{width:L,height:A}=cyt.measureText(String(D),{font:a}),C=I1.anchor(v);return{point:{x:i,y:s,size:n},label:{width:L,height:A,text:D},anchor:C,placement:M}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:s,properties:n,scale:a}=this,{idKey:o,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,label:d}=n;if(e==null||i==null||a==null)return;const p=r!=null&&l!=null,g=o!=null?e.resolveColumnById(this,"idValue",i):void 0,f=o!=null?e.resolveColumnById(this,"featureValue",i):void 0,x=p?e.resolveColumnById(this,"latValue",i):void 0,y=p?e.resolveColumnById(this,"lonValue",i):void 0,b=u!=null?e.resolveColumnById(this,"labelValue",i):void 0,v=c!=null?e.resolveColumnById(this,"sizeValue",i):void 0,M=h!=null?e.resolveColumnById(this,"colorValue",i):void 0,D=n.maxSize??n.size;s.range=[Math.min(n.size,D),D];const L=d.getFont();let A;g!=null&&f!=null&&(A=new Map,i.dataSources.get(this.id)?.forEach((B,G)=>{const V=g[G],W=f[G]?.geometry??void 0,H=W!=null&&a!=null?kh(W,a):void 0;V!=null&&H!=null&&A.set(V,H)}));const C=[],T=[],N=[];(i.dataSources.get(this.id)??[]).forEach((B,G)=>{const V=g?.[G],W=y?.[G],H=x?.[G],$=M?.[G],F=v?.[G],j=b?.[G],z=F!=null?s.convert(F,{clamp:!0}):n.size,Y=V!=null?A?.get(V):void 0;if(V!=null&&kh==null&&N.push(V),W!=null&&H!=null){const[Z,X]=a.convert([W,H]),tt=this.getLabelDatum(B,j,Z,X,z,L);tt&&T.push(tt),C.push({series:this,itemId:r,datum:B,datumIndex:G,index:-1,idValue:V,lonValue:W,latValue:H,labelValue:j,sizeValue:F,colorValue:$,point:{x:Z,y:X,size:z},midPoint:{x:Z,y:X}})}else Y!=null&&m$(Y,1).forEach(([Z,X],tt)=>{const q=this.getLabelDatum(B,j,Z,X,z,L);q&&T.push(q),C.push({series:this,itemId:r,datum:B,datumIndex:G,index:tt,idValue:V,lonValue:W,latValue:H,labelValue:j,sizeValue:F,colorValue:$,point:{x:Z,y:X,size:z},midPoint:{x:Z,y:X}})})});const O=10;if(N.length>O){const B=N.length-O;N.length=O,N.push(`(+${B} more)`)}return N.length>0&&Qmt.Logger.warnOnce("some data items do not have matches in the provided topology",N),{itemId:t,nodeData:C,labelData:T}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:t}){const e=this.checkResize(t),i=this.checkScaleChange(),{markerSelection:s,highlightMarkerSelection:n}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const o=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:o,markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:n}),this.updateMarkerNodes({markerSelection:n,isHighlight:!0,highlightedDatum:a}),(i||e)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=p$._ModuleSupport.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:u,text:d})=>{r.visible=!0,r.x=l+h/2,r.y=c+u/2,r.text=d,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textAlign="center",r.textBaseline="middle"})}updateMarkerSelection(t){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,s=>b$([s.index,s.idValue,s.lonValue,s.latValue]))}getMarkerItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return S$({shape:e.shape,size:e.size,fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getMarkerItemStyleOverrides(t,e,i,s,n,a){const{id:o,properties:r,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:u}=r;let d;if(d??(d={}),!a&&i!=null&&(d.fill=this.isColorScaleValid()?l.convert(i):h?.[0]??r.fill),s!=null&&(d.size=c.convert(s,{clamp:!0})),u!=null){const p=this.cachedDatumCallback(b$(t,a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:o,datum:e,highlighted:a,...n,...d}));d??(d={}),Object.assign(d,p)}return d}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i,highlightedDatum:s}=t,n=this.getMarkerItemBaseStyle(i),a=y$(this.scale);e.each((o,r)=>{const{datumIndex:l,datum:c,point:h,colorValue:u,sizeValue:d}=r,p=this.getMarkerItemStyleOverrides(String(l),c,u,d,n,i);o.shape=p?.shape??n.shape,o.size=p?.size??n.size,xyt(o,n,p,a),o.x=h.x,o.y=h.y,o.scalingCenterX=h.x,o.scalingCenterY=h.y,o.zIndex=!i&&s!=null&&c===s.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=vmt();hyt(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(t){const{x:e,y:i}=t;let s=1/0,n;return this.contextNodeData?.nodeData.forEach(a=>{const{x:o,y:r,size:l}=a.point,c=Math.max(Math.abs(o-e)-l,0),h=Math.max(Math.abs(r-i)-l,0),u=c*c+h*h;u<s&&(s=u,n=a)}),n!=null?{datum:n,distance:Math.sqrt(s)}:void 0}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:s}=this,{shape:n,fillOpacity:a,stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h}=s;let{fill:u}=s;if(t!=null&&this.isColorScaleValid()){const p=e.resolveColumnById(this,"colorValue",i)[t];u=this.colorScale.convert(p)}return{marker:S$({shape:n,fill:u,fillOpacity:a,stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:s,visible:n}=this,{title:a,legendItemName:o,idName:r,idKey:l,colorKey:c,colorName:h,colorRange:u,showInLegend:d}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:n,seriesId:s,colorName:h,colorRange:u,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:n,label:{text:o??a??r??l??s},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!d}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{idKey:a,idName:o,latitudeKey:r,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:u,colorName:d,sizeKey:p,sizeName:g,labelKey:f,labelName:x,title:y,legendItemName:b,tooltip:v}=n;if(!i||!s)return;const M=s.dataSources.get(this.id)?.[t],D=p!=null?i.resolveColumnById(this,"sizeValue",s)[t]:void 0,L=u!=null?i.resolveColumnById(this,"colorValue",s)[t]:void 0,A=[];if(D!=null&&A.push({label:g,fallbackLabel:p,value:String(D)}),L!=null&&A.push({label:d,fallbackLabel:u,value:String(L)}),f!=null&&f!==a){const N=i.resolveColumnById(this,"labelValue",s)[t];A.push({label:x,fallbackLabel:f,value:N})}let C;if(a!=null)C=i.resolveColumnById(this,"idValue",s)[t];else if(r!=null&&c!=null){const N=i.resolveColumnById(this,"latValue",s)[t],P=i.resolveColumnById(this,"lonValue",s)[t];C=`${Math.abs(N).toFixed(4)}\xB0 ${N>=0?"N":"S"}, ${Math.abs(P).toFixed(4)}\xB0 ${P>=0?"W":"E"}`}const T=this.getMarkerItemBaseStyle(!1);return Object.assign(T,this.getMarkerItemStyleOverrides(String(t),t,L,D,T,!1)),this.formatTooltipWithContext(v,{heading:C,title:y??b,symbol:this.legendItemSymbol(t),data:A},{seriesId:e,datum:M,title:y,idKey:a,idName:o,latitudeKey:r,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:u,colorName:d,sizeKey:p,sizeName:g,labelKey:f,labelName:x,...T})}getFormattedMarkerStyle(t){const{datumIndex:e,colorValue:i,sizeValue:s}=t,n=this.getMarkerItemBaseStyle(!1);return Object.assign(n,this.getMarkerItemStyleOverrides(String(e),e,i,s,n,!1)),{size:n.size}}computeFocusBounds(t){return pyt(this,t)}};RD.className="MapMarkerSeries",RD.type="map-marker";var byt=(E(),w(_)),Is=(R(),w(nt)),{commonSeriesOptionsDefs:vyt,mapMarkerSeriesThemeableOptionsDef:Syt,without:Myt}=byt._ModuleSupport,Dyt={...Syt,...Myt(vyt,["highlightStyle"]),type:(0,Is.required)((0,Is.constant)("map-marker")),idKey:Is.string,latitudeKey:Is.string,longitudeKey:Is.string,sizeKey:Is.string,colorKey:Is.string,labelKey:Is.string,idName:Is.string,latitudeName:Is.string,longitudeName:Is.string,sizeName:Is.string,colorName:Is.string,labelName:Is.string,topology:Is.geoJson,topologyIdKey:Is.string,legendItemName:Is.string,title:Is.string},kyt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:t=>new RD(t),tooltipDefaults:{range:"exact"},themeTemplate:{...Mx,series:{shape:"circle",maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},M1._ModuleSupport.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:M1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:M1._ModuleSupport.FILL_IMAGE_DEFAULTS,fillOpacity:.5,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},Iyt={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:Dyt,create:t=>new RD(t),validate(t,e,i){const s=(0,d$.validate)(t,e,i),{cleared:n,invalid:a}=s;if(n?.idKey==null&&(n?.latitudeKey==null||n?.longitudeKey==null)){const o=l=>i?`${i}.${l}`:l,r=`Either \`${o("idKey")}\` or both \`${o("latitudeKey")}\` and \`${o("longitudeKey")}\` are required.`;a.push(new d$.ValidationError("required",r,null,i))}return s}},A1=(E(),w(_)),M$=(E(),w(_)),D$=(R(),w(nt));function Ayt(t,{aspectRatio:e,precision:i}){const s=g$(t,i,(l,c,h,u)=>{const d=Lyt(l,c,h,e),p=d+2*u*e,g=d*Math.SQRT2,f=p*Math.SQRT2;return{distance:g,maxDistance:f}});if(s==null)return;const{x:n,y:a,distance:o}=s,r=o/Math.SQRT2;return{x:n,y:a,maxWidth:r}}function Cyt(t,e,i,s,n){const[a,o]=t,[r,l]=e,c=1/n,h=r-a,u=l-o,[d,p]=o<=l?t:e,[g,f]=a<=r?t:e,[x,y]=o<=l?e:t,[b,v]=a<=r?e:t;let M=1/0;if(h!==0){const N=u/h;for(let P=0;P<=1;P+=1){const O=P===0?c:-c,B=(N*a-o-O*i+s)/(N-O);if(B>=g&&B<=b){const G=Math.abs(i-B)*2;M=Math.min(M,G)}}}else for(let N=0;N<=1;N+=1){const O=(N===0?c:-c)*(a-i)+s;if(O>=p&&O<=y){const G=Math.abs(s-O)*2*n;M=Math.min(M,G)}}const D=n,L=Math.abs((d-i)/(p-s)),A=Math.abs((x-i)/(y-s));if(y<s&&A<D){const P=Math.abs(s-y)*2*n;M=Math.min(M,P)}else if(p>s&&L<D){const P=Math.abs(s-p)*2*n;M=Math.min(M,P)}const C=Math.abs((f-s)/(g-i)),T=Math.abs((v-s)/(b-i));if(b<i&&T<c){const N=Math.abs(i-b)*2;M=Math.min(M,N)}else if(g>i&&C<c){const N=Math.abs(i-g)*2;M=Math.min(M,N)}return M}function Lyt(t,e,i,s){let n=!1,a=1/0;for(const o of t){let r=o[o.length-1],[l,c]=r;for(const h of o){const[u,d]=h;d>i!=c>i&&e<(l-u)*(i-d)/(c-d)+u&&(n=!n);const p=Cyt(r,h,e,i,s);a=Math.min(a,p),r=h,l=u,c=d}}return(n?1:-1)*a}function BD(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function wyt(t,e,i,s,n,a){const o=n-a/2,r=n+a/2,[l,c]=e,[h,u]=i,d=h-l,p=u-c,[g,f]=l<=h?e:i,[x,y]=l<=h?i:e;if(d!==0){const b=p/d;for(let v=0;v<=1;v+=1){const D=((v===0?o:r)-c)/b+l;D>=g&&D<=x&&BD(t,s,D)}}else Math.max(o,Math.min(c,u))<=Math.min(r,Math.max(c,u))&&BD(t,s,l);return x<s&&y>=o&&y<=r?BD(t,s,x):g>s&&f>=o&&f<=r&&BD(t,s,g),t}function Tyt(t,e,i,s){const n={minX:-1/0,maxX:1/0};for(const r of t){let l=r[r.length-1];for(const c of r)wyt(n,l,c,e,i,s),l=c}const{minX:a,maxX:o}=n;return Number.isFinite(a)&&Number.isFinite(o)?{x:e+(a+o)/2,width:o-a}:{x:e,width:0}}var Nyt=(E(),w(_)),{Property:Ge,SeriesProperties:Oyt,SeriesTooltip:_yt,FillGradientDefaults:Eyt,FillPatternDefaults:Pyt,FillImageDefaults:Ryt}=Nyt._ModuleSupport,Be=class extends Oyt{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillGradientDefaults=new Eyt,this.fillPatternDefaults=new Pyt,this.fillImageDefaults=new Ryt,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new fx,this.tooltip=new _yt}};m([Ge],Be.prototype,"topology",2),m([Ge],Be.prototype,"title",2),m([Ge],Be.prototype,"legendItemName",2),m([Ge],Be.prototype,"idKey",2),m([Ge],Be.prototype,"idName",2),m([Ge],Be.prototype,"topologyIdKey",2),m([Ge],Be.prototype,"labelKey",2),m([Ge],Be.prototype,"labelName",2),m([Ge],Be.prototype,"colorKey",2),m([Ge],Be.prototype,"colorName",2),m([Ge],Be.prototype,"colorRange",2),m([Ge],Be.prototype,"fill",2),m([Ge],Be.prototype,"fillGradientDefaults",2),m([Ge],Be.prototype,"fillPatternDefaults",2),m([Ge],Be.prototype,"fillImageDefaults",2),m([Ge],Be.prototype,"fillOpacity",2),m([Ge],Be.prototype,"stroke",2),m([Ge],Be.prototype,"strokeOpacity",2),m([Ge],Be.prototype,"strokeWidth",2),m([Ge],Be.prototype,"lineDash",2),m([Ge],Be.prototype,"lineDashOffset",2),m([Ge],Be.prototype,"padding",2),m([Ge],Be.prototype,"itemStyler",2),m([Ge],Be.prototype,"label",2),m([Ge],Be.prototype,"tooltip",2);var{getMissCount:Byt,createDatumId:k$,SeriesNodePickMode:I$,valueProperty:zD,CachedTextMeasurerPool:zyt,TextUtils:A$,ColorScale:Fyt,Group:C$,Selection:C1,Text:jyt,PointerEvents:Gyt,applyShapeStyle:Vyt,getShapeStyle:L1}=M$._ModuleSupport,L$=M$._ModuleSupport.MercatorScale.fixedScale(),FD=class extends kx{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[I$.EXACT_SHAPE_MATCH,I$.NEAREST_NODE]}),this.properties=new Be,this._chartTopology=void 0,this.colorScale=new Fyt,this.itemGroup=this.contentGroup.appendChild(new C$({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new C$({name:"itemLabelGroup"})),this.datumSelection=C1.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=C1.select(this.itemLabelGroup,jyt),this.highlightDatumSelection=C1.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=Gyt.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new of;return t.renderMode=1,t.lineJoin="round",t}async processData(t){if(this.data==null)return;const{data:e,topology:i,colorScale:s}=this,{topologyIdKey:n,idKey:a,colorKey:o,labelKey:r,colorRange:l}=this.properties,c=new Map;i?.features.forEach(f=>{const x=f.properties?.[n];x==null||!y1(f.geometry,1)||c.set(x,f)});const h=this.colorScale.type,u=this.scale?.type,{dataModel:d,processedData:p}=await this.requestDataModel(t,e,{props:[zD(a,u,{id:"idValue",includeProperty:!1}),zD(a,u,{id:"featureValue",includeProperty:!1,processor:()=>f=>c.get(f)}),...r?[zD(r,"band",{id:"labelValue"})]:[],...o?[zD(o,h,{id:"colorValue"})]:[]]}),g=d.resolveColumnById(this,"featureValue",p);if(this.topologyBounds=g.reduce((f,x)=>{const y=x?.geometry;return y==null?f:rf(y,f)},void 0),l!=null&&this.isColorScaleValid()){const f=d.resolveProcessedDataIndexById(this,"colorValue");s.domain=p.domain.values[f],s.range=l,s.update()}i==null&&D$.Logger.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.input.count,a=Byt(this,i.defs.values[s].missing);return!(n===0||n===a)}getLabelLayout(t,e,i,s,n){if(e==null||s==null)return;const{idKey:a,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,padding:u,label:d}=this.properties,p=this.getLabelText(d,{value:e,datum:t,idKey:a,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h});if(p==null)return;const g=zyt.measureText(String(p),{font:i}),f=p.split(`
`).length,x=(g.width+2*u)/(f*A$.getLineHeight(d.fontSize)+2*u);if(n?.geometry===s&&n?.labelText===p&&n?.aspectRatio===x)return n;const y=kh(s,L$),b=OD(y);if(b==null)return;const v=Ayt(b,{aspectRatio:x,precision:.001});if(v==null)return;const{x:M,y:D,maxWidth:L}=v;return{geometry:s,labelText:p,aspectRatio:x,x:M,y:D,maxWidth:L,fixedPolygon:b}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:s,label:n}=this.properties,{labelText:a,aspectRatio:o,x:r,y:l,maxWidth:c,fixedPolygon:h}=t,u={width:Math.ceil(c*e),height:Math.ceil(c*e/o),meta:r},d=px(a,n,{padding:s},(M,D)=>{if(!D)return u;const L=Tyt(h,r,l,M/e);return{width:L.width*e,height:M,meta:L.x}});if(d==null)return;const[{text:p,fontSize:g,lineHeight:f,width:x},y]=d;if(p===A$.EllipsisChar)return;const b=x<u.width?r:y,v=this.scale.convert(L$.invert([b,l]));return{x:v[0],y:v[1],text:p,fontSize:g,lineHeight:f}}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:s,scale:n,previousLabelLayouts:a}=this,{idKey:o,colorKey:r,labelKey:l,label:c}=s;if(e==null||i==null)return;const h=n!=null?(n.range[1][0]-n.range[0][0])/n.bounds.width:NaN,u=e.resolveColumnById(this,"idValue",i),d=e.resolveColumnById(this,"featureValue",i),p=l!=null?e.resolveColumnById(this,"labelValue",i):void 0,g=r!=null?e.resolveColumnById(this,"colorValue",i):void 0,f=c.getFont(),x=new Map;this.previousLabelLayouts=x;const y=[],b=[],v=[];(i.dataSources.get(this.id)??[]).forEach((L,A)=>{const C=u[A],T=g?.[A],N=p?.[A],P=d[A]?.geometry??void 0;P==null&&v.push(C);const O=this.getLabelLayout(L,N,f,P,a?.get(C));O!=null&&x.set(C,O);const B=O!=null&&n!=null?this.getLabelDatum(O,h):void 0;B!=null&&b.push(B);const G=P!=null&&n!=null?kh(P,n):void 0;y.push({series:this,itemId:o,datum:L,datumIndex:A,idValue:C,colorValue:T,labelValue:N,projectedGeometry:G})});const D=10;if(v.length>D){const L=v.length-D;v.length=D,v.push(`(+${L} more)`)}return v.length>0&&D$.Logger.warnOnce("some data items do not have matches in the provided topology",v),{itemId:t,nodeData:y,labelData:b}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,labelSelection:e,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let s=this.ctx.highlightManager?.getActiveHighlight();s!=null&&(s.series!==this||s.datum==null)&&(s=void 0);const n=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:e}),this.updateLabelNodes({labelSelection:e}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:s!=null?[s]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>k$(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return L1({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getItemStyleOverrides(t,e,i,s,n){const{id:a,properties:o,colorScale:r}=this,{colorRange:l,itemStyler:c}=o;let h;if(!n&&i!=null&&(h??(h={}),h.fill=this.isColorScaleValid()?r.convert(i):l?.[0]??o.fill),c!=null){const u=this.cachedDatumCallback(k$(t,n?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,highlighted:n,...s,...h}));h??(h={}),Object.assign(h,u)}return L1(h,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getItemBaseStyle(i),n=y$(this.scale);e.each((a,o)=>{const{datum:r,datumIndex:l,colorValue:c,projectedGeometry:h}=o;if(h==null){a.visible=!1,a.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(l),r,c,s,i);a.visible=!0,a.projectedGeometry=h,Vyt(a,s,u,n)})}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontFamily:a}=this.properties.label;e.each((o,{x:r,y:l,text:c,fontSize:h,lineHeight:u})=>{o.visible=!0,o.x=r,o.y=l,o.text=c,o.fill=i,o.fontStyle=s,o.fontWeight=n,o.fontSize=h,o.lineHeight=u,o.fontFamily=a,o.textAlign="center",o.textBaseline="middle"})}resetAnimation(){}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((n,a)=>{const o=n.distanceSquared(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,s=i!=null?OD(i):void 0,n=s!=null?D1(s,2):void 0,a=n!=null?{x:n[0],y:n[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:s}=this,{fillOpacity:n,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:l,lineDashOffset:c}=s;let{fill:h}=s;if(t!=null&&this.isColorScaleValid()){const d=e.resolveColumnById(this,"colorValue",i)[t];h=this.colorScale.convert(d)}return{marker:L1({fill:h,fillOpacity:n,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:l,lineDashOffset:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:s,visible:n}=this,{title:a,legendItemName:o,idKey:r,idName:l,colorKey:c,colorName:h,colorRange:u,showInLegend:d}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:n,seriesId:s,colorName:h,colorRange:u,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:n,label:{text:o??a??l??r},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!d}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{idKey:a,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,legendItemName:u,title:d,tooltip:p}=n;if(!i||!s)return;const g=s.dataSources.get(this.id)?.[t],f=i.resolveColumnById(this,"idValue",s)[t],x=r!=null?i.resolveColumnById(this,"colorValue",s)[t]:void 0,y=[];if(x!=null&&y.push({label:l,fallbackLabel:r,value:String(x)}),c!=null&&c!==a){const v=i.resolveColumnById(this,"labelValue",s)[t];y.push({label:h,fallbackLabel:c,value:v})}const b=this.getItemBaseStyle(!1);return Object.assign(b,this.getItemStyleOverrides(String(t),t,x,b,!1)),this.formatTooltipWithContext(p,{heading:f,title:d??u,symbol:this.legendItemSymbol(t),data:y},{seriesId:e,datum:g,title:d,idKey:a,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,...b})}computeFocusBounds(t){return r$(this,t)}};FD.className="MapShapeSeries",FD.type="map-shape";var Wyt=(E(),w(_)),Na=(R(),w(nt)),{commonSeriesOptionsDefs:Hyt,mapShapeSeriesThemeableOptionsDef:Uyt,without:$yt}=Wyt._ModuleSupport,Kyt={...Uyt,...$yt(Hyt,["highlightStyle"]),type:(0,Na.required)((0,Na.constant)("map-shape")),idKey:(0,Na.required)(Na.string),colorKey:Na.string,labelKey:Na.string,idName:Na.string,colorName:Na.string,labelName:Na.string,topology:Na.geoJson,topologyIdKey:Na.string,legendItemName:Na.string,title:Na.string},Yyt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:t=>new FD(t),tooltipDefaults:{range:"exact"},themeTemplate:{...Mx,series:{fill:{$palette:"fill"},stroke:{$ref:"backgroundColor"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},A1._ModuleSupport.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:A1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:A1._ModuleSupport.FILL_IMAGE_DEFAULTS,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:{$ref:"backgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"}},tooltip:{range:"exact"}}},Zyt={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:Kyt,create:t=>new FD(t)},w$=(E(),w(_)),Xyt=(E(),w(_)),qyt=(R(),w(nt)),Qyt=(E(),w(_)),{FillGradientDefaults:Jyt,FillPatternDefaults:txt,FillImageDefaults:ext,Property:po,SeriesProperties:ixt,SeriesTooltip:sxt}=Qyt._ModuleSupport,Oa=class extends ixt{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillGradientDefaults=new Jyt,this.fillPatternDefaults=new txt,this.fillImageDefaults=new ext,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new sxt}};m([po],Oa.prototype,"topology",2),m([po],Oa.prototype,"fill",2),m([po],Oa.prototype,"fillGradientDefaults",2),m([po],Oa.prototype,"fillPatternDefaults",2),m([po],Oa.prototype,"fillImageDefaults",2),m([po],Oa.prototype,"fillOpacity",2),m([po],Oa.prototype,"stroke",2),m([po],Oa.prototype,"strokeOpacity",2),m([po],Oa.prototype,"strokeWidth",2),m([po],Oa.prototype,"lineDash",2),m([po],Oa.prototype,"lineDashOffset",2),m([po],Oa.prototype,"tooltip",2);var{createDatumId:nxt,SeriesNodePickMode:axt,Selection:oxt,Group:rxt,PointerEvents:lxt,getShapeStyle:cxt}=Xyt._ModuleSupport,jD=class extends kx{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[axt.EXACT_SHAPE_MATCH]}),this.properties=new Oa,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new rxt({name:"itemGroup"})),this.datumSelection=oxt.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new of;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=lxt.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const s=i.geometry;return s==null?e:rf(s,e)},void 0),t==null&&qyt.Logger.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const s=[],n=[];return e.features.forEach((a,o)=>{const{geometry:r}=a,l=r!=null&&i!=null?kh(r,i):void 0;l!=null&&s.push({series:this,itemId:o,datum:a,datumIndex:0,index:o,projectedGeometry:l})}),{itemId:t,nodeData:s,labelData:n}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>nxt(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{fill:s,fillOpacity:n,stroke:a,strokeOpacity:o,lineDash:r,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((h,u)=>{const{projectedGeometry:d}=u;if(d==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=d;const p=cxt({fill:s,fillOpacity:n,stroke:a,strokeWidth:c,strokeOpacity:o,lineDash:r,lineDashOffset:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);h.setProperties(p)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}pickFocus(){}computeFocusBounds(t){}};jD.className="MapShapeBackgroundSeries",jD.type="map-shape-background";var hxt=(E(),w(_)),w1=(R(),w(nt)),{commonSeriesOptionsDefs:uxt,mapShapeBackgroundSeriesThemeableOptionsDef:dxt}=hxt._ModuleSupport,pxt={...dxt,...uxt,type:(0,w1.required)((0,w1.constant)("map-shape-background")),topology:w1.geoJson},gxt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:t=>new jD(t),tooltipDefaults:{range:"exact"},themeTemplate:{...Mx,series:{fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$ref:"backgroundColor"},strokeWidth:1,fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:[{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]},{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}],rotation:0,reverse:!1},fillPatternDefaults:{...w$._ModuleSupport.FILL_PATTERN_DEFAULTS,fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]}},fillImageDefaults:w$._ModuleSupport.FILL_IMAGE_DEFAULTS}}},fxt={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:pxt,create:t=>new jD(t)},mxt=(E(),w(_)),yxt=(E(),w(_)),GD=(E(),w(_)),xxt=(R(),w(nt)),{ChartAxisDirection:Jl,PolarAxis:bxt,diff:vxt,fixNumericExtent:Sxt,groupAccumulativeValueProperty:T$,keyProperty:Mxt,normaliseGroupTo:Dxt,resetLabelFn:kxt,seriesLabelFadeInAnimation:Ixt,seriesLabelFadeOutAnimation:Axt,valueProperty:Cxt,animationValidation:Lxt,createDatumId:N$,SeriesNodePickMode:O$,normalizeAngle360:_$,CategoryScale:wxt,motion:E$,applyShapeStyle:Txt,isGradientFill:Nxt,getShapeStyle:T1}=GD._ModuleSupport,Oxt=class extends GD._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},P$=class extends GD._ModuleSupport.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,categoryKey:"angleValue",useLabelLayer:!0,canHaveAxes:!0,pickModes:[O$.NEAREST_NODE,O$.EXACT_SHAPE_MATCH],animationResetFns:{...e,label:kxt}}),this.NodeEvent=Oxt,this.groupScale=new wxt,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Jl.Angle)return e.getDomain(this,"angleValue","key",i);{const s=e.getDomain(this,"radiusValue-end","value",i),n=Number.isFinite(s[1]-s[0])?[s[0]>0?0:s[0],s[1]<0?0:s[1]]:[];return Sxt(n)}}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:s}=this.properties,n=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),o=`${a}-trailing`,r=[];(0,xxt.isDefined)(s)&&r.push(Dxt([a,o],Math.abs(s))),n&&this.processedData&&r.push(vxt(this.id,this.processedData)),n&&r.push(Lxt());const l=this.visible?{}:{forceValue:0},c=this.axes[Jl.Radius]?.scale.type,h=this.axes[Jl.Angle]?.scale.type;await this.requestDataModel(t,this.data,{props:[Mxt(e,h,{id:"angleValue"}),Cxt(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...T$(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...T$(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:o,separateNegative:!0,...l},c),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t!==s.r||e!==s.cx||i!==s.cy?(this.circleCache={r:t,cx:e,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Jl.Radius]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[Jl.Radius];return t instanceof bxt?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e,groupScale:i}=this;if(!e||!t||t.type!=="grouped")return;const s=this.axes[Jl.Angle],n=this.axes[Jl.Radius],a=s?.scale,o=n?.scale;if(!a||!o)return;const r=e.resolveKeysById(this,"angleValue",t),l=e.resolveColumnById(this,"radiusValue-start",t),c=e.resolveColumnById(this,"radiusValue-end",t),h=e.resolveColumnById(this,"radiusValue-raw",t),u=e.resolveProcessedDataIndexById(this,"radiusValue-range");let d=0,p=0;s instanceof Jc&&(d=s.groupPaddingInner,p=s.paddingInner);const f=(a.bandwidth??0)*(1-p),{index:x,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:y}).map((W,H)=>String(H)),i.range=[-f/2,f/2],i.paddingInner=y>1?d:0;const b=this.isRadiusAxisReversed(),v=b?this.radius:this.getAxisInnerRadius(),M=b?this.getAxisInnerRadius():this.radius,D=M+v,{angleKey:L,radiusKey:A,angleName:C,radiusName:T,label:N}=this.properties,P=(W,H,$,F)=>{const j=this.getLabelText(N,{value:H,datum:W,angleKey:L,radiusKey:A,angleName:C,radiusName:T});if(j)return{x:$,y:F,text:j,textAlign:"center",textBaseline:"middle"}},O=[],B={itemId:A,nodeData:O,labelData:O};if(!this.visible)return B;const{dataSources:G}=t,V=G.get(this.id)??[];for(const{datumIndex:W,group:H}of e.forEachGroupDatum(this,t)){const $=V[W],F=r[W];if(F==null)return;const j=h[W],z=j>=0&&!Object.is(j,-0),Y=l[W],Z=c[W],X=H.aggregation[u][z?1:0]??0,tt=z===b;if(Y===void 0||Z===void 0)return;let q,it;if(V.length===1)q=-.5*Math.PI,it=1.5*Math.PI;else{const Vt=a.convert(F);q=_$(Vt+i.convert(String(x))),it=_$(q+i.bandwidth)}const Q=q+i.bandwidth/2,rt=D-o.convert(Y),at=D-o.convert(Z),ht=(rt+at)/2,dt=D-o.convert(0),Mt=D-o.convert(X),Ct=Math.cos(Q)*ht,bt=Math.sin(Q)*ht,qt=this.properties.label.enabled?P($,j,Ct,bt):void 0,Jt=this.getColumnWidth(q,it);O.push({series:this,datum:$,datumIndex:W,point:{x:Ct,y:bt,size:0},midPoint:{x:Ct,y:bt},label:qt,angleValue:F,radiusValue:j,negative:tt,innerRadius:rt,outerRadius:at,stackInnerRadius:dt,stackOuterRadius:Mt,startAngle:q,endAngle:it,midAngle:Q,axisInnerRadius:v,axisOuterRadius:M,columnWidth:Jt,index:W})}return{itemId:A,nodeData:O,labelData:O}}getColumnWidth(t,e){return NaN}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return T1({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{angleKey:o,radiusKey:r,itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:h,fillImageDefaults:u}=a;if(l==null)return;const d=this.cachedDatumCallback(N$(t,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:n,datum:e,highlighted:s,angleKey:o,radiusKey:r,...i}));return T1(d,c,h,u)}updateSectorSelection(t,e){let i=[];if(e){const l=this.ctx.highlightManager?.getActiveHighlight();l?.datum&&l.series===this&&i.push(l)}else i=this.nodeData;const s=this.isRadiusAxisReversed(),n=s?this.radius:this.getAxisInnerRadius(),a=s?this.getAxisInnerRadius():this.radius,o=this.getShapeFillBBox(),r=this.getItemBaseStyle(e);t.update(i,void 0,l=>this.getDatumId(l)).each((l,c)=>{const{datum:h,datumIndex:u,midPoint:d}=c,p=this.getItemStyleOverrides(String(u),h,r,e),g=p?.fill??r.fill,x=Nxt(g)&&g.bounds==="item"?{centerX:d?.x??0,centerY:d?.y??0}:{centerX:0,centerY:0,innerRadius:n,outerRadius:a};this.updateItemPath(l,c,e),Txt(l,r,p,o,x),l.cornerRadius=p?.cornerRadius??r.cornerRadius,l.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();E$.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),Ixt(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();E$.fromToMotion(this.id,"datums",e,[t],i),Axt(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{angleKey:o,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=a,u=n[Jl.Angle],d=n[Jl.Radius];if(!i||!s||!u||!d)return;const p=s.dataSources.get(this.id)?.[t],g=i.resolveKeysById(this,"angleValue",s)[t],f=i.resolveColumnById(this,"radiusValue-raw",s)[t];if(g==null)return;const x=this.getItemBaseStyle(!1);return Object.assign(x,this.getItemStyleOverrides(String(t),t,x,!1)),this.formatTooltipWithContext(h,{heading:u.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(f)}]},{seriesId:e,datum:p,title:r,angleKey:o,angleName:r,radiusKey:l,radiusName:c,...x})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties,h=T1({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o},r,l,c);return GD._ModuleSupport.isGradientFill(h.fill)&&(h.fill={...h.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:h}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{radiusKey:s,radiusName:n,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i,label:{text:n??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(t){return N$(t.angleValue)}computeLabelsBBox(){return null}},_xt=(E(),w(_)),{SeriesProperties:Ext,FillGradientDefaults:Pxt,FillPatternDefaults:Rxt,FillImageDefaults:Bxt,SeriesTooltip:zxt,Property:Oi,Label:Fxt}=_xt._ModuleSupport,ci=class extends Ext{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new Pxt,this.fillPatternDefaults=new Rxt,this.fillImageDefaults=new Bxt,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Fxt,this.tooltip=new zxt}};m([Oi],ci.prototype,"angleKey",2),m([Oi],ci.prototype,"angleName",2),m([Oi],ci.prototype,"radiusKey",2),m([Oi],ci.prototype,"radiusName",2),m([Oi],ci.prototype,"fill",2),m([Oi],ci.prototype,"fillGradientDefaults",2),m([Oi],ci.prototype,"fillPatternDefaults",2),m([Oi],ci.prototype,"fillImageDefaults",2),m([Oi],ci.prototype,"fillOpacity",2),m([Oi],ci.prototype,"stroke",2),m([Oi],ci.prototype,"strokeWidth",2),m([Oi],ci.prototype,"strokeOpacity",2),m([Oi],ci.prototype,"lineDash",2),m([Oi],ci.prototype,"lineDashOffset",2),m([Oi],ci.prototype,"cornerRadius",2),m([Oi],ci.prototype,"itemStyler",2),m([Oi],ci.prototype,"rotation",2),m([Oi],ci.prototype,"stackGroup",2),m([Oi],ci.prototype,"normalizedTo",2),m([Oi],ci.prototype,"label",2),m([Oi],ci.prototype,"tooltip",2);var jxt=(E(),w(_)),Gxt=(E(),w(_)),{motion:Vxt}=Gxt._ModuleSupport;function R$(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(o,r,l)=>{e.forEach(c=>{const h=t[c];let u=(l==="removed"||l==="updated"?o:r)[c],d=(l==="removed"?o:r)[c];isNaN(d)&&(d=o.previousDatum?.[c]??NaN);const p=u-d;Math.abs(p)>Math.PI&&(u-=Math.sign(p)*2*Math.PI),h.set(r,{from:u,to:d})})},s=(o,r)=>({startAngle:t.startAngle.get(o)[r],endAngle:t.endAngle.get(o)[r]});return{calculate:i,from:o=>s(o,"from"),to:o=>s(o,"to")}}function B$(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function Wxt(t){const e=R$();return{toFn:(n,a,o)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,u,d,p;return o==="removed"?(c=n.innerRadius,h=n.innerRadius,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius):(c=isNaN(a.innerRadius)?t:a.innerRadius,h=isNaN(a.outerRadius)?t:a.outerRadius,u=isNaN(a.columnWidth)?n.columnWidth:a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:r,endAngle:l}},fromFn:(n,a,o)=>{o=B$(n,a,o),e.calculate(n,a,o);const{startAngle:r,endAngle:l}=e.from(a);let c,h,u,d,p;o==="removed"||o==="updated"?(c=n.innerRadius,h=n.outerRadius,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius):(c=t,h=t,u=a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius);const g=Vxt.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:r,endAngle:l,phase:g}}}}function Hxt(t,{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:o,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:o,endAngle:r}}var{SectorBox:VD,motion:Uxt}=jxt._ModuleSupport;function N1(t){const{negative:e,innerRadius:i,outerRadius:s,stackInnerRadius:n,stackOuterRadius:a}=t;return{innerRadius:e?a:n,outerRadius:e?n:a,clipInnerRadius:e?s:i,clipOuterRadius:e?i:s}}function $xt(t){const e=R$();return{toFn:(n,a,o)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,u;if(o==="removed")c=t,h=t,u=new VD(r,l,c,h);else{let d,p;({innerRadius:c,outerRadius:h,clipInnerRadius:d,clipOuterRadius:p}=N1(a)),isNaN(c)&&(c=t),isNaN(h)&&(h=t),isNaN(d)&&(d=t),isNaN(p)&&(p=t),u=new VD(r,l,d,p)}return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u}},fromFn:(n,a,o)=>{o=B$(n,a,o),e.calculate(n,a,o);const{startAngle:r,endAngle:l}=e.from(a);let c,h,u;o==="removed"||o==="updated"?(c=n.innerRadius,h=n.outerRadius,u=n.clipSector):(c=t,h=t),u??(u=new VD(r,l,c,h));const d=Uxt.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u,phase:d}}}}function Kxt(t,e){const{startAngle:i,endAngle:s}=e,{innerRadius:n,outerRadius:a,clipInnerRadius:o,clipOuterRadius:r}=N1(e),l=new VD(i,s,o,r);return{innerRadius:n,outerRadius:a,startAngle:i,endAngle:s,clipSector:l}}var{Sector:Yxt,SectorBox:Zxt,PolarZIndexMap:O1}=yxt._ModuleSupport,WD=class extends P${constructor(t){super(t,{animationResetFns:{item:Kxt}}),this.properties=new ci}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,O1.FOREGROUND,t],this.highlightGroup.zIndex=[0,O1.HIGHLIGHT,t],this.labelGroup.zIndex=[0,O1.LABEL,t],!0):!1}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new Yxt}updateItemPath(t,e,i){const{negative:s}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=s?0:this.properties.cornerRadius,t.endOuterCornerRadius=s?0:this.properties.cornerRadius,t.startInnerCornerRadius=s?this.properties.cornerRadius:0,t.endInnerCornerRadius=s?this.properties.cornerRadius:0,i){const{startAngle:n,endAngle:a}=e,{innerRadius:o,outerRadius:r,clipInnerRadius:l,clipOuterRadius:c}=N1(e);t.innerRadius=o,t.outerRadius=r,t.startAngle=n,t.endAngle=a,t.clipSector=new Zxt(n,a,l,c)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return $xt(t)}};WD.className="NightingaleSeries",WD.type="nightingale";var Xxt=(E(),w(_)),go=(R(),w(nt)),{commonSeriesOptionsDefs:qxt,nightingaleSeriesThemeableOptionsDef:Qxt}=Xxt._ModuleSupport,Jxt={...Qxt,...qxt,type:(0,go.required)((0,go.constant)("nightingale")),angleKey:(0,go.required)(go.string),radiusKey:(0,go.required)(go.string),angleName:go.string,radiusName:go.string,grouped:go.boolean,stacked:go.boolean,stackGroup:go.string,normalizedTo:go.number},_1=(E(),w(_)),{ThemeConstants:{POLAR_AXIS_TYPE:z$,POLAR_AXIS_SHAPE:tbt}}=_1._ModuleSupport,F$={$path:["./shape",tbt.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},ebt={series:{fill:{$palette:"fill"},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$palette:"stroke"}]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:_1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:_1._ModuleSupport.FILL_IMAGE_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[z$.ANGLE_CATEGORY]:{shape:F$,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[z$.RADIUS_NUMBER]:{shape:F$}}},{ThemeConstants:{POLAR_AXIS_TYPE:j$}}=mxt._ModuleSupport,ibt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:t=>new WD(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:j$.ANGLE_CATEGORY},{type:j$.RADIUS_NUMBER}],themeTemplate:ebt,stackable:!0,groupable:!0,stackedByDefault:!0},sbt={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:Jxt,create:t=>new WD(t)},iDt=(E(),w(_)),G$=(E(),w(_)),nbt=(E(),w(_)),{SeriesProperties:abt,FillGradientDefaults:obt,FillPatternDefaults:rbt,FillImageDefaults:lbt,SeriesTooltip:cbt,Property:hi,Label:V$,DropShadow:hbt}=nbt._ModuleSupport,ubt=class extends V${},E1=class extends V${constructor(){super(...arguments),this.spacing=0}};m([hi],E1.prototype,"spacing",2),m([hi],E1.prototype,"placement",2);var Si=class extends abt{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new obt,this.fillPatternDefaults=new rbt,this.fillImageDefaults=new lbt,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new hbt().set({enabled:!1}),this.label=new ubt,this.stageLabel=new E1,this.tooltip=new cbt}};m([hi],Si.prototype,"stageKey",2),m([hi],Si.prototype,"valueKey",2),m([hi],Si.prototype,"fills",2),m([hi],Si.prototype,"fillGradientDefaults",2),m([hi],Si.prototype,"fillPatternDefaults",2),m([hi],Si.prototype,"fillImageDefaults",2),m([hi],Si.prototype,"fillOpacity",2),m([hi],Si.prototype,"strokes",2),m([hi],Si.prototype,"strokeWidth",2),m([hi],Si.prototype,"strokeOpacity",2),m([hi],Si.prototype,"lineDash",2),m([hi],Si.prototype,"lineDashOffset",2),m([hi],Si.prototype,"direction",2),m([hi],Si.prototype,"reverse",2),m([hi],Si.prototype,"spacing",2),m([hi],Si.prototype,"aspectRatio",2),m([hi],Si.prototype,"itemStyler",2),m([hi],Si.prototype,"shadow",2),m([hi],Si.prototype,"label",2),m([hi],Si.prototype,"stageLabel",2),m([hi],Si.prototype,"tooltip",2);function W$(t,{x:e,y:i,top:s,right:n,bottom:a,left:o}){t.x0=e-s/2,t.x1=e+s/2,t.x2=e+a/2,t.x3=e-a/2,t.y0=i-o/2,t.y1=i-n/2,t.y2=i+n/2,t.y3=i+o/2}function dbt(t){return{fromFn:(n,a)=>{const{x:o,y:r}=a;let{top:l,right:c,bottom:h,left:u}=a;return t==="vertical"?(l=0,h=0):(u=0,c=0),{x:o,y:r,top:l,right:c,bottom:h,left:u}},toFn:(n,a)=>{const{x:o,y:r,top:l,right:c,bottom:h,left:u}=a;return{x:o,y:r,top:l,right:c,bottom:h,left:u}},applyFn:W$}}var{StateMachine:pbt,valueProperty:H$,SeriesNodePickMode:U$,CachedTextMeasurerPool:gbt,TextUtils:fbt,createDatumId:mbt,BBox:P1,Group:R1,Selection:HD,Text:$$,PointerEvents:K$,applyShapeStyle:ybt,fromToMotion:xbt,seriesLabelFadeInAnimation:bbt,getShapeStyle:B1}=G$._ModuleSupport,UD=class extends G$._ModuleSupport.DataModelSeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,pickModes:[U$.EXACT_SHAPE_MATCH,U$.NEAREST_NODE]}),this.properties=new Si,this.itemGroup=this.contentGroup.appendChild(new R1({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new R1({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new R1({name:"stageLabelGroup"})),this.datumSelection=HD.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=HD.select(this.itemLabelGroup,$$),this.stageLabelSelection=HD.select(this.stageLabelGroup,$$),this.highlightDatumSelection=HD.select(this.highlightNode,()=>this.nodeFactory()),this.animationState=new pbt("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=K$.None,this.stageLabelGroup.pointerEvents=K$.None}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}nodeFactory(){return new Wr}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}async processData(t){if(this.data==null)return;const{id:e,visible:i,ctx:{legendManager:s}}=this,{stageKey:n,valueKey:a}=this.properties,o="band",r="number",l=(h,u,d)=>i&&s.getItemEnabled({seriesId:e,itemId:d}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(t,this.data,{props:[H$(n,o,{id:"xValue"}),H$(a,r,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:s,visible:n,ctx:{legendManager:a}}=this,{stageKey:o,valueKey:r,direction:l,reverse:c=l==="horizontal",spacing:h,aspectRatio:u,label:d,stageLabel:p}=s;if(e==null||i==null)return;const g=l==="horizontal",f=e.resolveColumnById(this,"xValue",i),x=e.resolveColumnById(this,"yValue",i),y=gbt.getMeasurer({font:p.getFont()});let b,v;g?(b="center",v=p.placement==="before"?"bottom":"top"):(b=p.placement==="after"?"left":"right",v="middle");const M=p.enabled?[]:void 0;let D=0,L=0,A=0;const C=i.dataSources.get(this.id)??[];C.forEach((j,z)=>{const Y=f[z],Z=x[z],X=n&&a.getItemEnabled({seriesId:t,itemId:z});if(A+=Z,M==null)return;const tt=this.getLabelText(this.properties.stageLabel,{datum:j,value:Y,stageKey:o,valueKey:r}),{width:q}=y.measureText(tt),it=tt.split(`
`).length*fbt.getLineHeight(d.fontSize);D=Math.max(D,q),L=Math.max(L,it),M.push({x:NaN,y:NaN,text:tt,textAlign:b,textBaseline:v,visible:X})});const T=this._nodeDataDependencies?.seriesRectWidth??0,N=this._nodeDataDependencies?.seriesRectHeight??0,P=h*(i.input.count-1);let O;if(g){const j=L+p.spacing;O=new P1(0,p.placement==="before"?j:0,T,N-j)}else{const j=D+p.spacing;O=new P1(p.placement==="after"?0:j,0,T-j,N)}if(u!=null&&u!==0){const j=l==="horizontal"?1/u:u,z=Math.min(O.width,O.height*j),Y=z/j;O=new P1(O.x+(O.width-z)/2,O.y+(O.height-Y)/2,z,Y)}let B,G;g?G=p.placement==="before"?O.y-p.spacing:O.y+O.height+p.spacing:B=p.placement==="after"?O.x+O.width+p.spacing:O.x-p.spacing;const V=O.width-(g?P:0),W=O.height-(g?0:P);if(V<0||W<0)return;const H=[],$=[];let F=0;return C.forEach((j,z)=>{const Y=f[z],Z=x[z],X=n&&a.getItemEnabled({seriesId:t,itemId:z}),tt=F+Z,q=(F+tt)/(2*A),it=(tt-F)/A,Q=g?V*q+h*z:V*.5,rt=g?W*.5:W*q+h*z,at=O.x+Q,ht=O.y+rt;if(M!=null){const Vt=M[z];Vt.x=B??at,Vt.y=G??ht}let dt,Mt,Ct,bt;if(g){const Vt=V*it;dt=Vt,Ct=Vt;const Qt=(Q+Vt/2)*(W/O.width),Lt=(Q-Vt/2)*(W/O.width);Mt=c?O.height-Qt:Qt,bt=c?O.height-Lt:Lt}else{const Vt=W*it;Mt=Vt,bt=Vt;const Qt=(rt-Vt/2)*(V/O.height),Lt=(rt+Vt/2)*(V/O.height);dt=c?O.width-Qt:Qt,Ct=c?O.width-Lt:Lt}const qt=this.getLabelText(d,{datum:j,value:Z,stageKey:o,valueKey:r}),Jt={x:at,y:ht,text:qt,textAlign:"center",textBaseline:"middle",visible:X};$.push(Jt),H.push({series:this,itemId:r,datum:j,datumIndex:z,index:z,xValue:Y,yValue:Z,x:at,y:ht,top:dt,right:Mt,bottom:Ct,left:bt,label:Jt,enabled:X,midPoint:{x:at,y:ht}}),F=tt}),{itemId:t,nodeData:H,labelData:$,stageLabelData:M,bounds:O}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:t}){this.checkResize(t);const{datumSelection:e,labelSelection:i,stageLabelSelection:s,highlightDatumSelection:n}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const o=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:s}),this.updateLabelNodes({labelSelection:s,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:n}),this.updateDatumNodes({datumSelection:n,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return B1({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getItemStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,{fills:r,strokes:l,stageKey:c,valueKey:h,itemStyler:u}=o,d=s.fill??r[i%r.length],p=s.stroke??l[i%l.length],g={};if(n||(g.fill=d,g.stroke=p),u!=null){const f=this.cachedDatumCallback(mbt(t,n?"highlight":"node"),()=>this.callWithContext(u,{seriesId:a,datum:e,stageKey:c,valueKey:h,highlighted:n,fill:d,stroke:p,...s}));Object.assign(g,f)}return B1(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{properties:s}=this,{shadow:n}=s,a=this.getItemBaseStyle(i),o=this.contextNodeData?.bounds,r=o?{series:o,axis:o}:void 0;e.each((l,c)=>{const{datumIndex:h,datum:u}=c,d=this.getItemStyleOverrides(String(h),u,h,a,i);ybt(l,a,d,r),W$(l,c),l.fillShadow=n})}updateLabelSelection(t){return t.labelSelection.update(this.properties.label.enabled?t.labelData:[])}updateStageLabelSelection(t){return t.stageLabelSelection.update(t.stageLabelData)}updateLabelNodes(t){const{labelSelection:e,labelProperties:i}=t,{color:s,fontSize:n,fontStyle:a,fontWeight:o,fontFamily:r}=i;e.each((l,{visible:c,x:h,y:u,text:d,textAlign:p,textBaseline:g})=>{l.visible=c,l.x=h,l.y=u,l.text=d,l.fill=s,l.fontStyle=a,l.fontWeight=o,l.fontSize=n,l.fontFamily=r,l.textAlign=p,l.textBaseline=g})}computeFocusBounds(t){const e=this.getNodeData()?.[t.datumIndex];if(e!==void 0){for(const i of this.datumSelection)if(i.datum===e)return i.node}}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,properties:n}=this,{stageKey:a,valueKey:o,tooltip:r}=n;if(!i||!s)return;const l=s.dataSources.get(this.id)?.[t],c=i.resolveColumnById(this,"xValue",s)[t],h=i.resolveColumnById(this,"yValue",s)[t];if(c==null)return;const u=this.getLabelText(this.properties.stageLabel,{datum:s.dataSources.get(this.id)?.[t],value:h,stageKey:a,valueKey:o}),d=this.getItemBaseStyle(!1);return Object.assign(d,this.getItemStyleOverrides(String(t),t,t,d,!1)),this.formatTooltipWithContext(r,{symbol:this.legendItemSymbol(t),data:[{label:String(c),value:u}]},{seriesId:e,datum:l,title:void 0,stageKey:a,valueKey:o,...d})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((n,a)=>{const o=n.distanceSquared(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}legendItemSymbol(t){const{fills:e,strokes:i,strokeWidth:s,fillOpacity:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}=this.properties,l=e[t%e.length]??"black",c=i[t%i.length]??"black";return{marker:B1({fill:l,fillOpacity:n,stroke:c,strokeWidth:s,strokeOpacity:a,lineDash:o,lineDashOffset:r},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(t){const{processedData:e,dataModel:i,id:s,ctx:{legendManager:n},visible:a}=this;if(!i||!e||t!=="category")return[];const{showInLegend:o}=this.properties,r=[],l=i.resolveColumnById(this,"xValue",e);return(e.dataSources.get(this.id)??[]).forEach((h,u)=>{const d=l[u];r.push({legendType:"category",id:s,itemId:u,seriesId:s,enabled:a&&n.getItemEnabled({seriesId:s,itemId:u}),label:{text:d},symbol:this.legendItemSymbol(u),hideInLegend:!o})}),r}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:t,labelSelection:e,properties:i}=this,s=dbt(i.direction);xbt(this.id,"nodes",this.ctx.animationManager,[t],s),bbt(this,"labels",this.ctx.animationManager,e)}};UD.className="PyramidSeries",UD.type="pyramid";var vbt=(E(),w(_)),lf=(R(),w(nt)),{commonSeriesOptionsDefs:Sbt,pyramidSeriesThemeableOptionsDef:Mbt}=vbt._ModuleSupport,Dbt={...Mbt,...Sbt,type:(0,lf.required)((0,lf.constant)("pyramid")),stageKey:(0,lf.required)(lf.string),valueKey:(0,lf.required)(lf.string)},z1=(E(),w(_)),{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:kbt}}=z1._ModuleSupport,Ibt={series:{direction:"vertical",strokeWidth:0,spacing:2,fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:z1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:z1._ModuleSupport.FILL_IMAGE_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},stageLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:kbt,xOffset:3,yOffset:3,blur:5}}},Abt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"pyramid",moduleFactory:t=>new UD(t),solo:!0,tooltipDefaults:{range:"exact"},themeTemplate:Ibt},Cbt={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:Dbt,create:t=>new UD(t)},Lbt=(E(),w(_)),Hr=(E(),w(_)),{ThemeConstants:{POLAR_AXIS_TYPE:wbt}}=Hr._ModuleSupport,Y$={series:{stroke:{$palette:"stroke"},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Hr._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:Hr._ModuleSupport.FILL_IMAGE_DEFAULTS,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[wbt.ANGLE_CATEGORY]:{label:{spacing:10}}}},Tbt=Hr._ModuleSupport.mergeDefaults({series:{stroke:Hr._ModuleSupport.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},Y$),Nbt=Hr._ModuleSupport.mergeDefaults({series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Hr._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:Hr._ModuleSupport.FILL_IMAGE_DEFAULTS,fillOpacity:.8,strokeWidth:2,marker:{enabled:!1,fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Hr._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:Hr._ModuleSupport.FILL_IMAGE_DEFAULTS}}},Y$),Z$=(E(),w(_)),F1=(E(),w(_)),$D=(R(),w(nt)),Obt=(E(),w(_)),{Label:_bt,SeriesMarker:Ebt,SeriesProperties:Pbt,SeriesTooltip:Rbt,Property:Xn}=Obt._ModuleSupport,rn=class extends Pbt{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new Ebt,this.label=new _bt,this.tooltip=new Rbt,this.connectMissingData=!1}};m([Xn],rn.prototype,"angleKey",2),m([Xn],rn.prototype,"radiusKey",2),m([Xn],rn.prototype,"angleName",2),m([Xn],rn.prototype,"radiusName",2),m([Xn],rn.prototype,"stroke",2),m([Xn],rn.prototype,"strokeWidth",2),m([Xn],rn.prototype,"strokeOpacity",2),m([Xn],rn.prototype,"lineDash",2),m([Xn],rn.prototype,"lineDashOffset",2),m([Xn],rn.prototype,"rotation",2),m([Xn],rn.prototype,"marker",2),m([Xn],rn.prototype,"label",2),m([Xn],rn.prototype,"tooltip",2),m([Xn],rn.prototype,"connectMissingData",2);var{ChartAxisDirection:Ko,PolarAxis:Bbt,SeriesNodePickMode:X$,valueProperty:q$,fixNumericExtent:zbt,seriesLabelFadeInAnimation:Fbt,markerFadeInAnimation:jbt,resetMarkerFn:Gbt,animationValidation:Vbt,computeMarkerFocusBounds:Wbt,extent:Hbt,BBox:Ubt,Group:$bt,Path:Kbt,PointerEvents:Ybt,Selection:Q$,Text:Zbt,Marker:Xbt,mergeDefaults:qbt,getShapeStyle:Qbt}=F1._ModuleSupport,Jbt=class extends F1._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},j1=class extends F1._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,categoryKey:"angleValue",useLabelLayer:!0,pickModes:[X$.NEAREST_NODE,X$.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:Gbt},clipFocusBox:!1}),this.properties=new rn,this.NodeEvent=Jbt,this.lineGroup=this.contentGroup.appendChild(new $bt({name:"radar-line"})),this.lineSelection=Q$.select(this.lineGroup,Kbt),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new Xbt}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Ko.Angle)return e.getDomain(this,"angleValue","value",i);{const s=e.getDomain(this,"radiusValue","value",i),n=Hbt(s.length===0?s:[0].concat(s));return zbt(n)}}async processData(t){const{angleKey:e,radiusKey:i}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(Vbt());const n=this.axes[Ko.Radius]?.scale.type,a=this.axes[Ko.Angle]?.scale.type;await this.requestDataModel(t,this.data,{props:[q$(e,a,{id:"angleValue"}),q$(i,n,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[Ko.Radius];return t instanceof Bbt?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}createNodeData(){const{processedData:t,dataModel:e}=this;if(!t||!e)return;const{angleKey:i,radiusKey:s,angleName:n,radiusName:a,marker:o,label:r}=this.properties,l=this.axes[Ko.Angle]?.scale,c=this.axes[Ko.Radius]?.scale;if(!l||!c)return;const h=e.resolveColumnById(this,"angleValue",t),u=e.resolveColumnById(this,"radiusValue",t),d=this.getAxisInnerRadius(),g=(t.dataSources.get(this.id)??[]).map((f,x)=>{const y=h[x],b=u[x],v=l.convert(y),M=this.radius+d-c.convert(b),D=Math.cos(v),L=Math.sin(v),A=D*M,C=L*M;let T;if(r.enabled){const N=this.getLabelText(r,{value:b,datum:f,angleKey:i,radiusKey:s,angleName:n,radiusName:a});if(N){let P="right";(0,$D.isNumberEqual)(D,0)?P="center":D>0&&(P="left");let O="bottom";(0,$D.isNumberEqual)(L,0)?O="middle":L>0&&(O="top"),T={x:A+D*o.size,y:C+L*o.size,text:N,textAlign:P,textBaseline:O}}}return{series:this,datum:f,datumIndex:x,index:x,point:{x:A,y:C,size:o.size},midPoint:{x:A,y:C},label:T,angleValue:y,radiusValue:b,missing:!(0,$D.isFiniteNumber)(v)||!(0,$D.isFiniteNumber)(M)}});return{itemId:s,nodeData:g,labelData:g}}update({seriesRect:t}){const e=this.checkResize(t),i=!this.ctx.animationManager.isSkipped(),{series:s}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&s===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Q$.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){return t?.fill??this.properties.marker.fill}getDatumStylerProperties(t){const{id:e,properties:i}=this,{angleKey:s,radiusKey:n}=i;return{seriesId:e,datum:t,angleKey:s,radiusKey:n}}updateMarkers(t,e){const{visible:i}=this,{marker:s,stroke:n,strokeWidth:a,strokeOpacity:o,highlightStyle:r}=this.properties;let l=[];if(i&&s.shape&&s.enabled)if(e){const u=this.ctx.highlightManager?.getActiveHighlight();u?.datum&&(l=[u])}else l=this.nodeData;const c=qbt(e&&r.item,s.getStyle(),{stroke:n,strokeWidth:a,strokeOpacity:o}),h=this.getShapeFillBBox();t.update(l).each((u,d)=>{this.updateMarkerStyle(s,u,d.datum,d.point,this.getDatumStylerProperties(d),e,c,h)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{angleKey:o,angleName:r,radiusKey:l,radiusName:c,tooltip:h,marker:u}=a,d=n[Ko.Angle],p=n[Ko.Radius];if(!i||!s||!d||!p)return;const g=s.dataSources.get(this.id)?.[t],f=i.resolveColumnById(this,"angleValue",s)[t],x=i.resolveColumnById(this,"radiusValue",s)[t];if(f==null)return;const y=this.getMarkerStyle(u,g,this.getDatumStylerProperties(g),!1);return this.formatTooltipWithContext(h,{heading:d.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:p.formatDatum(x)}]},{seriesId:e,datum:g,title:r,angleKey:o,radiusKey:l,angleName:r,radiusName:c,...y})}legendItemSymbol(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,marker:n}=this.properties;return{marker:Qbt({shape:n.shape,enabled:n.enabled||e<=0,fill:this.getMarkerFill()??n.stroke??t??"rgba(0, 0, 0, 0)",stroke:n.stroke??t??"rgba(0, 0, 0, 0)",fillOpacity:n.fillOpacity,strokeOpacity:n.strokeOpacity,strokeWidth:n.strokeWidth,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset},n.fillGradientDefaults,n.fillPatternDefaults,n.fillImageDefaults),line:{stroke:t,strokeOpacity:i,strokeWidth:e,lineDash:s}}}getLegendData(t){if(t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{radiusKey:n,radiusName:a,showInLegend:o}=this.properties;return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:a??n},symbol:this.legendItemSymbol(),hideInLegend:!o}]}pickNodeClosestDatum(t){const{nodeData:e,centerX:i,centerY:s}=this,{x:n,y:a}=t,o=this.radius;if(Math.sqrt((n-i)**2+(a-s)**2)>o+this.properties.marker.size)return;let l=1/0,c;for(const h of e){const{point:{x:u=NaN,y:d=NaN}={}}=h;if(isNaN(u)||isNaN(d))continue;const p=Math.sqrt((t.x-u-i)**2+(t.y-d-s)**2);p<l&&(l=p,c=h)}if(c){const h=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:h}}}computeLabelsBBox(){const{label:t}=this.properties;this.maybeRefreshNodeData();const e=[],i=new Zbt;return this.nodeData.forEach(s=>{if(!t.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(t),i.setAlign(s.label);const n=i.getBBox();e.push(n)}),e.length===0?null:Ubt.merge(e)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){const t=this.getLineNode();t&&(t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=Ybt.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset)}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const s=this.axes[Ko.Radius],a=this.axes[Ko.Angle]?.isReversed(),r=s?.isReversed()&&!a?[...t].reverse():t,l=[];let c=!1,h;return r.forEach((u,d)=>{let{x:p,y:g}=u.point;const f=isNaN(p)||isNaN(g);f||(h??(h=u)),f&&!i&&(p=0,g=0);const x=d===0||!e&&!i&&(f||c);l.push({x:p,y:g,moveTo:x}),c=f}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:s}=t;s.clear(!0);const n=this.getAxisInnerRadius(),a=this.axes[Ko.Radius],r=a?.isReversed()?this.radius+n-a?.scale.convert(0):n;e.forEach(l=>{const{x:c,y:h,arc:u,radius:d=0,startAngle:p=0,endAngle:g=0,moveTo:f}=l,x=Math.atan2(h,c),y=r*Math.cos(x),b=r*Math.sin(x),v=i,M=y*(1-v)+c*v,D=b*(1-v)+h*v;u?s.arc(c,h,d,p,g):f?s.moveTo(M,D):s.lineTo(M,D)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),jbt(this,i,"added",t),Fbt(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0);for(const{x:s,y:n,moveTo:a}of i)a?e.moveTo(s,n):e.lineTo(s,n);t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{angleKey:e,radiusKey:i},!0)}computeFocusBounds(t){return Wbt(this,t)}};j1.className="RadarSeries";var tvt=(E(),w(_)),{FillGradientDefaults:evt,FillPatternDefaults:ivt,FillImageDefaults:svt,Property:Ax}=tvt._ModuleSupport,cf=class extends rn{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new evt,this.fillPatternDefaults=new ivt,this.fillImageDefaults=new svt,this.fillOpacity=1}};m([Ax],cf.prototype,"fill",2),m([Ax],cf.prototype,"fillGradientDefaults",2),m([Ax],cf.prototype,"fillPatternDefaults",2),m([Ax],cf.prototype,"fillImageDefaults",2),m([Ax],cf.prototype,"fillOpacity",2);var{Group:nvt,Path:avt,PointerEvents:ovt,Selection:rvt,ChartAxisDirection:J$,applyShapeStyle:tK,getShapeFill:lvt,getShapeStyle:cvt}=Z$._ModuleSupport,KD=class extends j1{constructor(t){super(t),this.properties=new cf,this.areaGroup=this.contentGroup.appendChild(new nvt({name:"radar-area"})),this.areaSelection=rvt.select(this.areaGroup,avt),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(t){return t?.fill??this.properties.marker.fill??this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode(),{fillOpacity:e,fill:i}=this.properties,s=cvt({fill:i,fillOpacity:e},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);tK(t,s,void 0,this.getShapeFillBBox()),t.pointerEvents=ovt.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){const t=this.getLinePoints(),e=o=>{const r=this.axes[o];return r instanceof Z$._ModuleSupport.PolarAxis?r:void 0},i=e(J$.Radius),s=e(J$.Angle);if(!i?.isReversed())return t;const a=s?.getAxisLinePoints()?.points??[];return t.concat(...a)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints(),s=lvt(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),n=this.getShapeFillBBox();tK(t,{fill:s,stroke:void 0,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset},void 0,n),t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:a,y:o,moveTo:r,arc:l,radius:c=0,startAngle:h=0,endAngle:u=0})=>{l?e.arc(a,o,c,h,u):r?e.moveTo(a,o):e.lineTo(a,o)}),e.closePath(),t.checkPathDirty()}}};KD.className="RadarAreaSeries",KD.type="radar-area";var hvt=(E(),w(_)),Ah=(R(),w(nt)),{commonSeriesOptionsDefs:uvt,radarAreaSeriesThemeableOptionsDef:dvt}=hvt._ModuleSupport,pvt={...dvt,...uvt,type:(0,Ah.required)((0,Ah.constant)("radar-area")),angleKey:(0,Ah.required)(Ah.string),radiusKey:(0,Ah.required)(Ah.string),angleName:Ah.string,radiusName:Ah.string},{ThemeConstants:{POLAR_AXIS_TYPE:eK}}=Lbt._ModuleSupport,gvt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:t=>new KD(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:eK.ANGLE_CATEGORY},{type:eK.RADIUS_NUMBER}],themeTemplate:Nbt},fvt={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:pvt,create:t=>new KD(t)},mvt=(E(),w(_)),YD=class extends j1{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};YD.className="RadarLineSeries",YD.type="radar-line";var yvt=(E(),w(_)),Ch=(R(),w(nt)),{commonSeriesOptionsDefs:xvt,radarLineSeriesThemeableOptionsDef:bvt}=yvt._ModuleSupport,vvt={...bvt,...xvt,type:(0,Ch.required)((0,Ch.constant)("radar-line")),angleKey:(0,Ch.required)(Ch.string),radiusKey:(0,Ch.required)(Ch.string),angleName:Ch.string,radiusName:Ch.string},{POLAR_AXIS_TYPE:iK}=mvt._ModuleSupport.ThemeConstants,Svt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:t=>new YD(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:iK.ANGLE_CATEGORY},{type:iK.RADIUS_NUMBER}],themeTemplate:Tbt},Mvt={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:vvt,create:t=>new YD(t)},Dvt=(E(),w(_)),Cx=(E(),w(_)),kvt=(R(),w(nt)),Ivt=(E(),w(_)),{SeriesProperties:Avt,FillGradientDefaults:Cvt,FillPatternDefaults:Lvt,FillImageDefaults:wvt,SeriesTooltip:Tvt,Property:_i,Label:Nvt}=Ivt._ModuleSupport,Mi=class extends Avt{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new Cvt,this.fillPatternDefaults=new Lvt,this.fillImageDefaults=new wvt,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Nvt,this.tooltip=new Tvt}};m([_i],Mi.prototype,"angleKey",2),m([_i],Mi.prototype,"radiusKey",2),m([_i],Mi.prototype,"angleName",2),m([_i],Mi.prototype,"radiusName",2),m([_i],Mi.prototype,"fill",2),m([_i],Mi.prototype,"fillGradientDefaults",2),m([_i],Mi.prototype,"fillPatternDefaults",2),m([_i],Mi.prototype,"fillImageDefaults",2),m([_i],Mi.prototype,"fillOpacity",2),m([_i],Mi.prototype,"stroke",2),m([_i],Mi.prototype,"strokeWidth",2),m([_i],Mi.prototype,"strokeOpacity",2),m([_i],Mi.prototype,"lineDash",2),m([_i],Mi.prototype,"lineDashOffset",2),m([_i],Mi.prototype,"cornerRadius",2),m([_i],Mi.prototype,"itemStyler",2),m([_i],Mi.prototype,"rotation",2),m([_i],Mi.prototype,"stackGroup",2),m([_i],Mi.prototype,"normalizedTo",2),m([_i],Mi.prototype,"label",2),m([_i],Mi.prototype,"tooltip",2);var Ovt=(E(),w(_)),{SectorBox:sK,motion:_vt}=Ovt._ModuleSupport;function Evt(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function nK(t){return{toFn:(s,n,a)=>{let o,r,l,c,h;return a==="removed"?(o=t,r=t,l=n.innerRadius,c=n.outerRadius,h=new sK(o,r,l,c)):(o=n.startAngle,r=n.endAngle,l=isNaN(n.innerRadius)?s.innerRadius:n.innerRadius,c=isNaN(n.outerRadius)?s.outerRadius:n.outerRadius,h=n.clipSector),{startAngle:o,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(s,n,a)=>{a=Evt(s,n,a);let o,r,l,c,h;a==="removed"||a==="updated"?(o=s.startAngle,r=s.endAngle,l=s.innerRadius,c=s.outerRadius,h=s.clipSector):(o=t,r=t,l=n.innerRadius,c=n.outerRadius),h??(h=new sK(o,r,l,c));const u=_vt.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:o,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h,phase:u}}}}function Pvt(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:Ur,PolarAxis:Rvt,diff:Bvt,groupAccumulativeValueProperty:aK,keyProperty:zvt,normaliseGroupTo:Fvt,valueProperty:jvt,fixNumericExtent:Gvt,resetLabelFn:Vvt,seriesLabelFadeInAnimation:Wvt,seriesLabelFadeOutAnimation:Hvt,animationValidation:Uvt,angleBetween:$vt,createDatumId:oK,CategoryScale:Kvt,Sector:Yvt,SectorBox:Zvt,motion:rK,isGradientFill:Xvt,applyShapeStyle:qvt,getShapeStyle:G1}=Cx._ModuleSupport,Qvt=class extends Cx._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},ZD=class extends Cx._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,categoryKey:"radiusValue",useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:Pvt,label:Vvt}}),this.properties=new Mi,this.NodeEvent=Qvt,this.groupScale=new Kvt,this.circleCache={r:0,cx:0,cy:0}}get defaultShapeStyle(){const t=this.axes[Ur.Angle]?.scale;return{...this.properties.fillGradientDefaults.toJson(),rotation:Cx._ModuleSupport.toDegrees(t.range[0])+90}}nodeFactory(){return new Yvt}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Ur.Angle){const s=e.getDomain(this,"angleValue-end","value",i),n=[s[0]>0?0:s[0],s[1]<0?0:s[1]];return Gvt(n)}else return e.getDomain(this,"radiusValue","key",i)}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:s}=this.properties,n=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),o=`${a}-trailing`,r=[];(0,kvt.isDefined)(s)&&r.push(Fvt([a,o],Math.abs(s))),n&&(this.processedData&&r.push(Bvt(this.id,this.processedData)),r.push(Uvt()));const l=this.visible?{}:{forceValue:0},c=this.axes[Ur.Radius]?.scale.type,h=this.axes[Ur.Angle]?.scale.type;await this.requestDataModel(t,this.data,{props:[zvt(i,c,{id:"radiusValue"}),jvt(e,h,{id:"angleValue-raw",invalidValue:null,...l}),...aK(e,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},h),...aK(e,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:o,separateNegative:!0,...l},h),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[Ur.Radius];return t instanceof Rvt?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e}=this;if(!e||!t||t.type!=="grouped")return;const i=this.axes[Ur.Angle],s=this.axes[Ur.Radius],n=i?.scale,a=s?.scale;if(!n||!a)return;const o=e.resolveKeysById(this,"radiusValue",t),r=e.resolveColumnById(this,"angleValue-start",t),l=e.resolveColumnById(this,"angleValue-end",t),c=e.resolveColumnById(this,"angleValue-raw",t),h=e.resolveProcessedDataIndexById(this,"angleValue-range");let u=0;s instanceof th&&(u=s.groupPaddingInner);const{groupScale:d}=this,{index:p,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:g}).map((V,W)=>String(W)),d.range=[0,Math.abs(a.bandwidth??0)],d.paddingInner=g>1?u:0;const f=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,x=i.isReversed(),y=s.isReversed(),b=y?this.radius:this.getAxisInnerRadius(),M=(y?this.getAxisInnerRadius():this.radius)+b,{angleKey:D,radiusKey:L,angleName:A,radiusName:C,label:T}=this.properties,N=(V,W,H,$)=>{const F=this.getLabelText(T,{value:W,datum:V,angleKey:D,radiusKey:L,angleName:A,radiusName:C});if(F)return{x:H,y:$,text:F,textAlign:"center",textBaseline:"middle"}},P=[],O={itemId:L,nodeData:P,labelData:P};if(!this.visible)return O;const{dataSources:B}=t,G=B.get(this.id)??[];for(const{datumIndex:V,group:W}of e.forEachGroupDatum(this,t)){const H=G[V],$=o[V];if($==null)return;const F=c[V],j=r[V],z=l[V],Y=F>=0&&!Object.is(F,-0),Z=W.aggregation[h][Y?1:0],X=Y===x;let tt=n.convert(j,{clamp:!0}),q=n.convert(z,{clamp:!0}),it=n.convert(0,{clamp:!0}),Q=n.convert(Z,{clamp:!0});X&&([it,Q]=[Q,it],[tt,q]=[q,tt]);const at=M-a.convert($)+d.convert(String(p)),ht=at+f,dt=(at+ht)/2,Mt=tt+$vt(tt,q)/2,Ct=Math.cos(Mt)*dt,bt=Math.sin(Mt)*dt,qt=this.properties.label.enabled?N(H,F,Ct,bt):void 0,Jt=new Zvt(tt,q,at,ht);P.push({series:this,datum:H,datumIndex:V,point:{x:Ct,y:bt,size:0},midPoint:{x:Ct,y:bt},label:qt,angleValue:F,radiusValue:$,innerRadius:at,outerRadius:ht,startAngle:it,endAngle:Q,clipSector:Jt,reversed:X,index:V})}return O}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return G1({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},this.defaultShapeStyle,e.fillPatternDefaults,e.fillImageDefaults)}getItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{angleKey:o,radiusKey:r,itemStyler:l}=a;let c;return l!=null&&(c=this.cachedDatumCallback(oK(t,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:n,datum:e,highlighted:s,angleKey:o,radiusKey:r,...i}))),G1(c,this.defaultShapeStyle,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateSectorSelection(t,e){let i=[];if(e){const a=this.ctx.highlightManager?.getActiveHighlight();a?.datum&&a.series===this&&i.push(a)}else i=this.nodeData;const s=this.getItemBaseStyle(e),n=this.getShapeFillBBox();t.update(i,void 0,a=>this.getDatumId(a)).each((a,o)=>{const{datum:r,datumIndex:l}=o,c=this.getItemStyleOverrides(String(l),r,s,e),h=c?.cornerRadius??s.cornerRadius,u=c?.fill??s.fill,d=Cx._ModuleSupport.isGradientFill(u)&&u.bounds!=="item"?{centerX:0,centerY:0}:void 0;qvt(a,s,c,n,d),a.lineJoin="round",a.inset=a.stroke!=null?a.strokeWidth/2:0,a.startInnerCornerRadius=r.reversed?h:0,a.startOuterCornerRadius=r.reversed?h:0,a.endInnerCornerRadius=r.reversed?0:h,a.endOuterCornerRadius=r.reversed?0:h,e&&(a.startAngle=o.startAngle,a.endAngle=o.endAngle,a.clipSector=o.clipSector,a.innerRadius=o.innerRadius,a.outerRadius=o.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){const t=this.axes[Ur.Angle]?.scale;let e=0;if(!t)return nK(e);const i=Math.min(t.domain[0],t.domain[1]),s=Math.max(t.domain[0],t.domain[1]);return i<=0&&s>=0&&(e=t.convert(0)),nK(e)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();rK.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),Wvt(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();rK.fromToMotion(this.id,"datums",e,[t],i),Hvt(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a}=this,{angleKey:o,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=a,u=n[Ur.Angle],d=n[Ur.Radius];if(!i||!s||!u||!d)return;const p=s.dataSources.get(this.id)?.[t],g=i.resolveKeysById(this,"radiusValue",s)[t],f=i.resolveColumnById(this,"angleValue-raw",s)[t];if(g==null)return;const x=this.getItemBaseStyle(!1);return Object.assign(x,this.getItemStyleOverrides(String(t),t,x,!1)),this.formatTooltipWithContext(h,{heading:d.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:o,value:u.formatDatum(f)}]},{seriesId:e,datum:p,title:r,angleKey:o,angleName:r,radiusKey:l,radiusName:c,...x})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o,fillPatternDefaults:r,fillImageDefaults:l}=this.properties,c=G1({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:a,lineDashOffset:o},this.defaultShapeStyle,r,l);return Xvt(c.fill)&&(c.fill={...c.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:c}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{angleKey:s,angleName:n,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i,label:{text:n??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(t){return oK(t.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};ZD.className="RadialBarSeries",ZD.type="radial-bar";var Jvt=(E(),w(_)),fo=(R(),w(nt)),{commonSeriesOptionsDefs:tSt,radialBarSeriesThemeableOptionsDef:eSt}=Jvt._ModuleSupport,iSt={...eSt,...tSt,type:(0,fo.required)((0,fo.constant)("radial-bar")),angleKey:(0,fo.required)(fo.string),radiusKey:(0,fo.required)(fo.string),angleName:fo.string,radiusName:fo.string,grouped:fo.boolean,stacked:fo.boolean,stackGroup:fo.string,normalizedTo:fo.number},V1=(E(),w(_)),{ThemeConstants:{POLAR_AXIS_TYPE:sSt}}=V1._ModuleSupport,nSt={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"conic",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:V1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:V1._ModuleSupport.FILL_IMAGE_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}}},axes:{[sSt.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:lK}=Dvt._ModuleSupport.ThemeConstants,aSt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:t=>new ZD(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:lK.ANGLE_NUMBER},{type:lK.RADIUS_CATEGORY}],themeTemplate:nSt,stackable:!0,groupable:!0},oSt={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:iSt,create:t=>new ZD(t)},rSt=(E(),w(_)),lSt=(E(),w(_)),cSt=(E(),w(_)),{Property:cK}=cSt._ModuleSupport,W1=class extends ci{};m([cK],W1.prototype,"columnWidthRatio",2),m([cK],W1.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:hSt,PolarAxis:uSt,RadialColumnShape:dSt,getRadialColumnWidth:pSt}=lSt._ModuleSupport,XD=class extends P${constructor(t){super(t,{animationResetFns:{item:Hxt}}),this.properties=new W1}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new dSt}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return Wxt(t)}isRadiusAxisCircle(){const t=this.axes[hSt.Radius];return t instanceof uSt?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return pSt(t,e,this.radius,i,s)}};XD.className="RadialColumnSeries",XD.type="radial-column";var gSt=(E(),w(_)),mo=(R(),w(nt)),{commonSeriesOptionsDefs:fSt,radialColumnSeriesThemeableOptionsDef:mSt}=gSt._ModuleSupport,ySt={...mSt,...fSt,type:(0,mo.required)((0,mo.constant)("radial-column")),angleKey:(0,mo.required)(mo.string),radiusKey:(0,mo.required)(mo.string),angleName:mo.string,radiusName:mo.string,grouped:mo.boolean,stacked:mo.boolean,stackGroup:mo.string,normalizedTo:mo.number},H1=(E(),w(_)),{ThemeConstants:{POLAR_AXIS_TYPE:hK,POLAR_AXIS_SHAPE:xSt}}=H1._ModuleSupport,uK={$path:["./shape",xSt.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},bSt={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:H1._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:H1._ModuleSupport.FILL_IMAGE_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[hK.ANGLE_CATEGORY]:{shape:uK,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[hK.RADIUS_NUMBER]:{shape:uK,innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:dK}=rSt._ModuleSupport.ThemeConstants,vSt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:t=>new XD(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:dK.ANGLE_CATEGORY},{type:dK.RADIUS_NUMBER}],themeTemplate:bSt,stackable:!0,groupable:!0},SSt={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:ySt,create:t=>new XD(t)},qD=(E(),w(_)),Vd=(E(),w(_)),MSt=(R(),w(nt)),DSt=(E(),w(_)),{SvgPath:kSt,Rotatable:ISt,Translatable:ASt,Scalable:CSt}=DSt._ModuleSupport,U1=class extends ISt(CSt(ASt(kSt))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};U1.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";var $1=(E(),w(_)),sDt=(R(),w(nt)),{BaseProperties:Lx,SeriesTooltip:LSt,SeriesProperties:wSt,PropertiesArray:K1,AxisLabel:TSt,Property:xt,Label:NSt}=$1._ModuleSupport,pK=class extends NSt{};m([xt],pK.prototype,"spacing",2);var Fs=class extends Lx{constructor(){super(...arguments),this.label=new pK}};m([xt],Fs.prototype,"text",2),m([xt],Fs.prototype,"value",2),m([xt],Fs.prototype,"shape",2),m([xt],Fs.prototype,"placement",2),m([xt],Fs.prototype,"spacing",2),m([xt],Fs.prototype,"size",2),m([xt],Fs.prototype,"rotation",2),m([xt],Fs.prototype,"fill",2),m([xt],Fs.prototype,"fillOpacity",2),m([xt],Fs.prototype,"stroke",2),m([xt],Fs.prototype,"strokeWidth",2),m([xt],Fs.prototype,"strokeOpacity",2),m([xt],Fs.prototype,"lineDash",2),m([xt],Fs.prototype,"lineDashOffset",2),m([xt],Fs.prototype,"label",2);var Yo=class extends Lx{constructor(){super(...arguments),this.enabled=!0,this.fills=new K1($1._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};m([xt],Yo.prototype,"enabled",2),m([xt],Yo.prototype,"fills",2),m([xt],Yo.prototype,"fillMode",2),m([xt],Yo.prototype,"fill",2),m([xt],Yo.prototype,"fillOpacity",2),m([xt],Yo.prototype,"stroke",2),m([xt],Yo.prototype,"strokeWidth",2),m([xt],Yo.prototype,"strokeOpacity",2),m([xt],Yo.prototype,"lineDash",2),m([xt],Yo.prototype,"lineDashOffset",2);var wx=class extends Lx{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};m([xt],wx.prototype,"values",2),m([xt],wx.prototype,"step",2),m([xt],wx.prototype,"minSpacing",2),m([xt],wx.prototype,"maxSpacing",2);var OSt=class extends TSt{},An=class extends Lx{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new K1($1._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new wx,this.label=new OSt}};m([xt],An.prototype,"min",2),m([xt],An.prototype,"max",2),m([xt],An.prototype,"fills",2),m([xt],An.prototype,"fillMode",2),m([xt],An.prototype,"fill",2),m([xt],An.prototype,"fillOpacity",2),m([xt],An.prototype,"stroke",2),m([xt],An.prototype,"strokeWidth",2),m([xt],An.prototype,"strokeOpacity",2),m([xt],An.prototype,"lineDash",2),m([xt],An.prototype,"lineDashOffset",2),m([xt],An.prototype,"defaultFill",2),m([xt],An.prototype,"interval",2),m([xt],An.prototype,"label",2);var Zo=class extends Lx{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};m([xt],Zo.prototype,"enabled",2),m([xt],Zo.prototype,"radiusRatio",2),m([xt],Zo.prototype,"spacing",2),m([xt],Zo.prototype,"fill",2),m([xt],Zo.prototype,"fillOpacity",2),m([xt],Zo.prototype,"stroke",2),m([xt],Zo.prototype,"strokeWidth",2),m([xt],Zo.prototype,"strokeOpacity",2),m([xt],Zo.prototype,"lineDash",2),m([xt],Zo.prototype,"lineDashOffset",2);var gK=class extends Gr{};m([xt],gK.prototype,"text",2);var fK=class extends fx{};m([xt],fK.prototype,"text",2);var Ei=class extends wSt{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new vx,this.defaultColorRange=[],this.targets=new K1(Fs),this.defaultTarget=new Fs,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new An,this.bar=new Yo,this.needle=new Zo,this.label=new gK,this.secondaryLabel=new fK,this.tooltip=new LSt}};m([xt],Ei.prototype,"value",2),m([xt],Ei.prototype,"startAngle",2),m([xt],Ei.prototype,"endAngle",2),m([xt],Ei.prototype,"segmentation",2),m([xt],Ei.prototype,"defaultColorRange",2),m([xt],Ei.prototype,"targets",2),m([xt],Ei.prototype,"defaultTarget",2),m([xt],Ei.prototype,"outerRadiusRatio",2),m([xt],Ei.prototype,"innerRadiusRatio",2),m([xt],Ei.prototype,"outerRadius",2),m([xt],Ei.prototype,"innerRadius",2),m([xt],Ei.prototype,"cornerRadius",2),m([xt],Ei.prototype,"cornerMode",2),m([xt],Ei.prototype,"spacing",2),m([xt],Ei.prototype,"scale",2),m([xt],Ei.prototype,"bar",2),m([xt],Ei.prototype,"needle",2),m([xt],Ei.prototype,"label",2),m([xt],Ei.prototype,"secondaryLabel",2),m([xt],Ei.prototype,"tooltip",2);var _St=(E(),w(_)),{SectorBox:Y1}=_St._ModuleSupport;function ESt(t){const{startAngle:e,endAngle:i,clipStartAngle:s,clipEndAngle:n,innerRadius:a,outerRadius:o}=t;if(!(s==null||n==null))return new Y1(Math.max(s,e),Math.min(n,i),a,o)}function mK(t,e,i){return Math.max(t,i.startAngle)<=Math.min(e,i.endAngle)}function Z1(t){return t.clipStartAngle!=null&&t.clipEndAngle!=null}function X1(t,e){const{clipStartAngle:i,clipEndAngle:s,innerRadius:n,outerRadius:a}=t;return new Y1(i,e?i:s,n,a)}function yK(t,e){const i=t?"initial":"update";return{node:{fromFn(a,o){const r=a.previousDatum;let{startAngle:l,endAngle:c}=r??o;const h=r!=null&&Z1(r)?X1(r,t):void 0,u=Z1(o)?X1(o,t):void 0;let d;return h!=null&&u!=null?d=h:h==null&&u!=null?(d=u,l=o.startAngle,c=o.endAngle):h!=null&&u==null?(d=void 0,l=o.startAngle,c=o.endAngle):t&&(c=l),{startAngle:l,endAngle:c,clipSector:d,phase:i}},toFn(a,o){const{startAngle:r,endAngle:l}=o;let c;return Z1(o)&&(c=X1(o,!1)),{startAngle:r,endAngle:l,clipSector:c}},applyFn(a,o){const{startAngle:r,endAngle:l}=o;let{clipSector:c}=o;c!=null&&(c=new Y1(Math.max(r,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const h=c==null||mK(r,l,c);a.startAngle=r,a.endAngle=l,a.clipSector=c,a.visible=h}},needle:{fromFn(a){let{angle:o}=a.previousDatum??a.datum;return t&&(o=e),{rotation:o,phase:i}},toFn(a,o){const{angle:r}=o;return{rotation:r}}}}}function q1(t,e){const{startAngle:i,endAngle:s}=e,n=ESt(e),a=n==null||mK(i,s,n);return{startAngle:i,endAngle:s,clipSector:n,visible:a}}function xK(t,e){const{angle:i}=e;return{rotation:i}}var PSt={top:0,middle:.5,bottom:1};function RSt(t,e,i,s,n,a){const{padding:o,textAlign:r,verticalAlign:l}=s;let c,h;if(i.each((D,L)=>{L.label==="primary"?c=L:L.label==="secondary"&&(h=L)}),c==null)return;const u=bx(t.id,e,c,a?.label);if(u==null)return;const d=h!=null?bx(t.id,e,h,a?.secondaryLabel):void 0,p={padding:o},g=r==="center"?2:1,f=l==="middle"?2:1,x=D=>({width:Math.sqrt(Math.max(n**2-(D/f)**2,0))*g,height:Math.min(D,f*n),meta:null});let y,b,v;if(h!=null&&d!=null){const D=kH(u,c,d,h,p,x);y=D?.label,b=D?.secondaryLabel,v=D?.height??0}else{const D=px(u,c,p,x);y=D?.[0],b=void 0,v=D?.[0].height??0}const M=v*PSt[l];i.each((D,L)=>{let A;if(L.label==="primary"?A=y:L.label==="secondary"&&(A=b),A==null){D.visible=!1;return}D.visible=!0,D.text=A.text,D.fontSize=A.fontSize,D.lineHeight=A.lineHeight,D.textAlign=r,D.textBaseline="middle";const C=L.label==="primary"?A.height/2:v-A.height/2;D.y=L.centerY+C-M,D.x=L.centerX})}var{fromToMotion:Tx,resetMotion:bK,CachedTextMeasurerPool:BSt,SeriesNodePickMode:vK,StateMachine:zSt,createDatumId:Q1,normalizeAngle360:SK,normalizeAngle360Inclusive:J1,isBetweenAngles:QD,sectorBox:FSt,toDegrees:jSt,toRadians:JD,BBox:GSt,Group:Lh,PointerEvents:tk,Selection:wh,Sector:VSt,SectorBox:WSt,Text:MK,Marker:HSt,getColorStops:USt}=Vd._ModuleSupport,$St={inside:90,middle:0,outside:-90},KSt=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],YSt=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],ek=class extends Vd._ModuleSupport.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[vK.EXACT_SHAPE_MATCH,vK.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new Ei,this.scale=new NG,this.scaleGroup=this.contentGroup.appendChild(new Lh({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Lh({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Lh({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Lh({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Lh({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Lh({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Lh({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Lh({name:"tickGroup"})),this.scaleSelection=wh.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=wh.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=wh.select(this.itemNeedleGroup,U1),this.targetSelection=wh.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=wh.select(this.itemTargetLabelGroup,MK),this.labelSelection=wh.select(this.itemLabelGroup,MK),this.highlightTargetSelection=wh.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=wh.select(this.tickGroup,Vd._ModuleSupport.TransformableText),this.datumUnion=new GU,this.animationState=new zSt("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=tk.None,this.tickGroup.pointerEvents=tk.None,this.itemNeedleGroup.pointerEvents=tk.None,this.itemLabelGroup.pointerEvents=tk.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new VSt}markerFactory(){const t=new HSt;return t.size=1,t}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){const{min:e,max:i}=this.properties.scale;return WU(t,{min:e,max:i})}layoutScale(){const{scale:t,properties:e}=this,{seriesRectWidth:i,seriesRectHeight:s}=this.nodeDataDependencies,{scale:n,outerRadius:a}=this.properties,{min:o,max:r,label:l,interval:c}=n,h=JD(e.startAngle-90),u=JD(e.endAngle-90),p=J1(u-h)>Math.PI,g=p||QD(1.5*Math.PI,h,u),f=p||QD(0*Math.PI,h,u),x=p||QD(.5*Math.PI,h,u),y=p||QD(1*Math.PI,h,u);let b;y&&!f?b="right":!y&&f?b="left":b="center";let v;g&&!x?v="bottom":!g&&x?v="top":v="middle";const M=FSt({startAngle:h,endAngle:u,innerRadius:0,outerRadius:.5}),D=-(M.x+M.width/2)*2,L=-(M.y+M.height/2)*2,A=Math.min(i/M.width,s/M.height);t.domain=[o,r],t.range=[h,u],t.arcLength=A/2;const{maxSpacing:C,minSpacing:T}=c,{arcLength:N}=t,P=C?Math.floor(N/C):1,O=T?Math.floor(N/T):1/0,B=Math.floor(4/Math.PI*Math.abs(t.range[0]-t.range[1])),G=Math.max(P,Math.min(O,B)),V=c.values??t.ticks({nice:!1,interval:c.step,minTickCount:P,maxTickCount:O,tickCount:G})?.ticks??[],W=V.reduce((tt,q)=>Math.max(tt,typeof q=="number"?(0,MSt.countFractionDigits)(q):0),0),H=t.tickFormatter({domain:t.domain,ticks:V,fractionDigits:W,specifier:typeof l.format=="string"?l.format:void 0}),$=l.getFont(),F=V.map((tt,q)=>{let it;l.formatter&&(it=c1(this.ctx,l.formatter,{value:tt,index:q,domain:t.domain,boundSeries:void 0})),it===void 0&&(it=H(tt));const{width:Q,height:rt}=BSt.measureText(it,{font:$});return{index:q,value:tt,text:it,width:Q,height:rt}}),j=F.reduce((tt,q)=>Math.max(tt,q.width),0),z=F.reduce((tt,q)=>Math.max(tt,q.height),0),Y=l.enabled?Math.max(j,z)+l.spacing:0,Z=Math.max(.5*A-Y,0),X=a??Z;return this.centerX=i/2+D*X,this.centerY=s/2+L*X,this.radius=X,this.textAlign=b,this.verticalAlign=v,F}createConicGradient(t,e){const{scale:i}=this,{domain:s,range:n}=i,[a,o]=n,{defaultColorRange:r}=this.properties,l=SK((a+o)/2+Math.PI),c=J1(o-a);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:USt(t,r,s,e).map(({color:u,stop:d})=>(d=Math.min(Math.max(d,0),1),d=(a+c*d-l)/(2*Math.PI),d=(d%1+1)%1,{stop:d,color:u})),rotation:jSt(l)+90}}getShapeFillBBox(){const{centerX:t,centerY:e,radius:i}=this;return new GSt(t-i,e-i,2*i,2*i)}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:s=e.text,value:n=e.value??0,shape:a=e.shape??"triangle",rotation:o=e.rotation??0,strokeWidth:r=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:u=e.fill??"black",fillOpacity:d=e.fillOpacity??1,stroke:p=e.stroke??"black",strokeOpacity:g=e.strokeOpacity??1,lineDash:f=e.lineDash??[0],lineDashOffset:x=e.lineDashOffset??0}=i,{enabled:y=e.label.enabled,color:b=e.label.color??"black",fontStyle:v=e.label.fontStyle??"normal",fontWeight:M=e.label.fontWeight??"normal",fontSize:D=e.label.fontSize,fontFamily:L=e.label.fontFamily,spacing:A=e.label.spacing??0}=i.label;return{text:s,value:n,shape:a,placement:l,spacing:c,size:h,rotation:o,fill:u,fillOpacity:d,stroke:p,strokeWidth:r,strokeOpacity:g,lineDash:f,lineDashOffset:x,label:{enabled:y,color:b,fontStyle:v,fontWeight:M,fontSize:D,fontFamily:L,spacing:A}}})}getTargetRadius(t){const{radius:e,properties:i}=this,{innerRadiusRatio:s,outerRadiusRatio:n}=i,{placement:a,spacing:o,size:r}=t,l=e*n,c=e*s;switch(a){case"inside":return Math.max(c-o-r/2,0);case"outside":return l+o+r/2;default:return(c+l)/2}}getTargetLabel(t){const{scale:e}=this,{value:i,size:s,placement:n,label:a}=t,{spacing:o,color:r,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:u}=a,d=void 0,p=e.convert(i),g=SK(p)/(Math.PI/2)|0,f=s/2+o;let x,y,b,v;switch(n){case"outside":({textAlign:x,textBaseline:y}=KSt[g]),b=f*Math.cos(p),v=f*Math.sin(p);break;case"inside":({textAlign:x,textBaseline:y}=YSt[g]),b=-f*Math.cos(p),v=-f*Math.sin(p);break;default:x="center",y="bottom",b=0,v=-f;break}return{offsetX:b,offsetY:v,fill:r,textAlign:x,textBaseline:y,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:u,lineHeight:d}}createNodeData(){const t=this.layoutScale(),{id:e,scale:i,properties:s,radius:n,centerX:a,centerY:o}=this,{value:r,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:h,cornerRadius:u,cornerMode:d,needle:p,bar:g,scale:f,label:x,secondaryLabel:y}=s,{outerRadius:b=n*c,innerRadius:v=n*l}=s,M=this.getTargets(),D=[],L=[],A=[],C=[],T=[],N=d==="item",P=i.convert(i.domain[0]),O=i.convert(r),B=Math.ceil(J1(O-P)*n);let G=h.enabled?h.interval.getSegments(i,B):void 0;const V=g.enabled?g.fill??this.createConicGradient(g.fills,g.fillMode):"rgba(0,0,0,0)",W=f.fill??(g.enabled&&f.fills.length===0?f.defaultFill:void 0)??this.createConicGradient(f.fills,f.fillMode);if(G==null&&N){const H=Math.min(...i.domain),$=Math.max(...i.domain),F={value:r,segmentStart:H,segmentEnd:$},z=Math.min(u,(b-v)/2)/((v+b)/2);D.push({series:this,itemId:"value",datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:o,outerRadius:b,innerRadius:v,startAngle:P-z,endAngle:O+z,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:V}),T.push({series:this,itemId:"scale",datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:o,outerRadius:b,innerRadius:v,startAngle:i.range[0]-z,endAngle:i.range[1]+z,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:W})}else{G??(G=i.domain);for(let H=0;H<G.length-1;H++){const $=G[H],F=G[H+1],j={value:r,segmentStart:$,segmentEnd:F},z=H===0,Y=H===G.length-2,Z=i.convert($),X=i.convert(F);D.push({series:this,itemId:`value-${H}`,datum:j,datumIndex:{type:0},type:0,centerX:a,centerY:o,outerRadius:b,innerRadius:v,startAngle:Z,endAngle:X,clipStartAngle:P,clipEndAngle:O,startCornerRadius:N||z?u:0,endCornerRadius:N||Y?u:0,fill:V}),T.push({series:this,itemId:`scale-${H}`,datum:j,datumIndex:{type:0},type:0,centerX:a,centerY:o,outerRadius:b,innerRadius:v,startAngle:Z,endAngle:X,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:N||z?u:0,endCornerRadius:N||Y?u:0,fill:W})}}if(!p.enabled&&x.enabled){const{text:H,color:$,fontSize:F,minimumFontSize:j,fontStyle:z,fontWeight:Y,fontFamily:Z,lineHeight:X,formatter:tt=q=>this.formatLabel(q.value)}=x;C.push({label:"primary",centerX:a,centerY:o,text:H,value:r,fill:$,fontSize:F,minimumFontSize:j,fontStyle:z,fontWeight:Y,fontFamily:Z,lineHeight:X,formatter:tt})}if(!p.enabled&&y.enabled){const{text:H,color:$,fontSize:F,minimumFontSize:j,fontStyle:z,fontWeight:Y,fontFamily:Z,lineHeight:X,formatter:tt}=y;C.push({label:"secondary",centerX:a,centerY:o,text:H,value:r,fill:$,fontSize:F,minimumFontSize:j,fontStyle:z,fontWeight:Y,fontFamily:Z,lineHeight:X,formatter:tt})}if(p.enabled){let H=p.radiusRatio!=null?n*p.radiusRatio:v;H=Math.max(H-p.spacing,0);const $=i.convert(r);A.push({centerX:a,centerY:o,radius:H,angle:$,series:this})}for(let H=0;H<M.length;H+=1){const $=M[H],{value:F,text:j,size:z,shape:Y,fill:Z,fillOpacity:X,stroke:tt,strokeWidth:q,strokeOpacity:it,lineDash:Q,lineDashOffset:rt}=$;if(F<Math.min(...i.domain)||F>Math.max(...i.domain))continue;const at=this.getTargetRadius($),ht=i.convert(F),dt=JD($.rotation+$St[$.placement]);L.push({series:this,itemId:`target-${H}`,midPoint:{x:at*Math.cos(ht)+a,y:at*Math.sin(ht)+o},datum:{value:F},datumIndex:{type:1,index:H},type:1,value:F,text:j,centerX:a,centerY:o,shape:Y,radius:at,angle:ht,rotation:dt,size:z,fill:Z,fillOpacity:X,stroke:tt,strokeOpacity:it,strokeWidth:q,lineDash:Q,lineDashOffset:rt,label:this.getTargetLabel($)})}return{itemId:e,nodeData:D,needleData:A,targetData:L,labelData:C,scaleData:T,tickData:t}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,needleSelection:s,targetSelection:n,targetLabelSelection:a,scaleSelection:o,highlightTargetSelection:r,tickSelection:l}=this,c=this.checkResize(t);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const h=this.contextNodeData?.nodeData??[],u=this.contextNodeData?.labelData??[],d=this.contextNodeData?.needleData??[],p=this.contextNodeData?.targetData??[],g=this.contextNodeData?.scaleData??[],f=this.contextNodeData?.tickData??[],x=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:g,scaleSelection:o}),this.updateScaleNodes({scaleSelection:o}),this.needleSelection=this.updateNeedleSelection({needleData:d,needleSelection:s}),this.updateNeedleNodes({needleSelection:s}),this.targetSelection=this.updateTargetSelection({targetData:p,targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:p,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:h,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:u,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:x!=null?[x]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:f,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Q1(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:s}=this,{bar:n,segmentation:a}=s,o=a.spacing??0,{fillOpacity:r,stroke:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}=n,d=this.getStrokeWidth(n.strokeWidth),p=i.animationManager.isSkipped(),g=this.getShapeFillBBox();e.each((f,x)=>{const{centerX:y,centerY:b,innerRadius:v,outerRadius:M,startCornerRadius:D,endCornerRadius:L,fill:A}=x;f.centerX=y,f.centerY=b,f.innerRadius=v,f.outerRadius=M,f.pointerEvents=this.properties.bar.enabled?Vd._ModuleSupport.PointerEvents.All:Vd._ModuleSupport.PointerEvents.None,f.fill=A,f.fillBBox=g,f.fillOpacity=r,f.stroke=l,f.strokeOpacity=c,f.strokeWidth=d,f.lineDash=h,f.lineDashOffset=u,f.startOuterCornerRadius=D,f.startInnerCornerRadius=D,f.endOuterCornerRadius=L,f.endInnerCornerRadius=L,f.radialEdgeInset=(o+f.strokeWidth)/2,f.concentricEdgeInset=f.strokeWidth/2,(p||f.previousDatum==null)&&f.setProperties(q1(f,x))}),this.datumUnion.update(e,this.itemGroup,Vd._ModuleSupport.Sector,(f,x,y)=>{f.clipSector??(f.clipSector=new WSt(NaN,NaN,NaN,NaN)),f.centerX=x.centerX,f.centerY=x.centerY,f.outerRadius=f.clipSector.outerRadius=x.outerRadius,f.innerRadius=f.clipSector.innerRadius=x.innerRadius,f.startAngle=f.clipSector.startAngle=x.startAngle,f.startInnerCornerRadius=x.startInnerCornerRadius,f.startOuterCornerRadius=x.startOuterCornerRadius,f.endAngle=y.endAngle,f.clipSector.endAngle=y.clipSector?.endAngle??y.endAngle,f.endInnerCornerRadius=y.endInnerCornerRadius,f.endOuterCornerRadius=y.endOuterCornerRadius,f.pointerEvents=Vd._ModuleSupport.PointerEvents.None})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>Q1(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i,segmentation:s}=this.properties,n=s.spacing??0,{fillOpacity:a,stroke:o,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=i,u=this.getShapeFillBBox();e.each((d,p)=>{const{centerX:g,centerY:f,innerRadius:x,outerRadius:y,startCornerRadius:b,endCornerRadius:v,fill:M}=p;d.centerX=g,d.centerY=f,d.innerRadius=x,d.outerRadius=y,d.fill=M,d.fillBBox=u,d.fillOpacity=a,d.stroke=o,d.strokeOpacity=r,d.strokeWidth=l,d.lineDash=c,d.lineDashOffset=h,d.startOuterCornerRadius=b,d.startInnerCornerRadius=b,d.endOuterCornerRadius=v,d.endInnerCornerRadius=v,d.radialEdgeInset=(n+d.strokeWidth)/2,d.concentricEdgeInset=d.strokeWidth/2,d.setProperties(q1(d,p))})}updateNeedleSelection(t){return t.needleSelection.update(t.needleData,void 0,()=>Q1([]))}updateNeedleNodes(t){const{needleSelection:e}=t,{fill:i,fillOpacity:s,stroke:n,strokeOpacity:a,strokeWidth:o,lineDash:r,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();e.each((h,u)=>{const{centerX:d,centerY:p,radius:g}=u,f=g*2;h.d=U1.defaultPathData,h.fill=i,h.fillOpacity=s,h.stroke=n,h.strokeOpacity=a,h.strokeWidth=o/f,h.lineDash=r.map(x=>x/f),h.lineDashOffset=l/f,h.translationX=d,h.translationY=p,h.scalingX=f,h.scalingY=f,c&&h.setProperties(xK(h,u))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,s=i?this.properties.highlightStyle.item:void 0;e.each((n,a)=>{const{centerX:o,centerY:r,angle:l,radius:c,shape:h,size:u,rotation:d,fill:p,fillOpacity:g,stroke:f,strokeOpacity:x,strokeWidth:y,lineDash:b,lineDashOffset:v}=a;n.shape=h==="line"?HU:h,n.size=u,n.fill=s?.fill??p,n.fillOpacity=s?.fillOpacity??g,n.stroke=s?.stroke??f,n.strokeOpacity=s?.strokeOpacity??x,n.strokeWidth=s?.strokeWidth??y,n.lineDash=s?.lineDash??b,n.lineDashOffset=s?.lineDashOffset??v,n.translationX=o+c*Math.cos(l),n.translationY=r+c*Math.sin(l),n.rotation=l+d})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,s)=>{const{centerX:n,centerY:a,radius:o,angle:r,text:l}=s,{offsetX:c,offsetY:h,fill:u,fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,textAlign:x,textBaseline:y}=s.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=n+o*Math.cos(r)+c,i.y=a+o*Math.sin(r)+h,i.text=l,i.fill=u,i.fontStyle=d,i.fontWeight=p,i.fontSize=g,i.fontFamily=f,i.textAlign=x,i.textBaseline=y})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>e.label)}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((s,n)=>{s.fill=n.fill,s.fontStyle=n.fontStyle,s.fontWeight=n.fontWeight,s.fontFamily=n.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(t){return t.tickSelection.update(t.tickData,void 0,e=>e.index)}updateTickNodes(t){const{scale:e,radius:i,centerX:s,centerY:n,properties:a}=this,{enabled:o,color:r,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u,spacing:d}=a.scale.label,p=JD(a.scale.label.rotation??0);t.tickSelection.each((g,f)=>{if(!o){g.visible=!1;return}g.visible=!0,g.text=f.text,g.fill=r,g.fontFamily=l,g.fontSize=c,g.fontStyle=h,g.fontWeight=u,g.textAlign="center",g.textBaseline="middle";const x=e.convert(f.value),{width:y,height:b}=f,v=Math.abs(i*Math.cos(x)),M=Math.abs(i*Math.sin(x)),D=Math.min(Math.max(Math.abs(i/Math.tan(x)),v-y/2),v+y/2),L=Math.min(Math.max(Math.abs(i*Math.tan(x)),M-b/2),M+b/2),A=Math.hypot(D,L),C=s+(A+d)*Math.cos(x),T=n+(A+d)*Math.sin(x);g.x=C,g.y=T,g.rotationCenterX=C,g.rotationCenterY=T,g.rotation=p})}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,radius:i,textAlign:s,verticalAlign:n}=this,{spacing:a,innerRadiusRatio:o}=this.properties;RSt(this,this.ctx,e,{padding:a,textAlign:s,verticalAlign:n},i*o,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),bK([this.datumSelection],q1),bK([this.needleSelection],xK),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i,s,n,a;if(this.labelSelection.each((o,r)=>{o.opacity=1,r.label==="primary"?(i=o.previousDatum?.value??t.from??r.value,s=r.value):r.label==="secondary"&&(n=o.previousDatum?.value??t.from??r.value,a=r.value)}),!this.labelsHaveExplicitText())if(s==null||a==null)this.formatLabelText();else if(i===s&&n===a)this.formatLabelText({label:s,secondaryLabel:a});else{const o=`${this.id}_labels`;e.animate({id:o,groupId:"label",from:{label:i,secondaryLabel:n},to:{label:s,secondaryLabel:a},phase:t.phase??"update",onUpdate:r=>this.formatLabelText(r)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=yK(!0,this.scale.range[0]);Tx(this.id,"node",t,[this.datumSelection],e,(s,n)=>n.itemId),Tx(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),Tx(this.id,"label",t,[this.labelSelection],VU,(s,n)=>n.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=yK(!1,this.scale.range[0]);Tx(this.id,"node",t,[this.datumSelection],e,(s,n)=>n.itemId),Tx(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:s}=i;let n,a;if(t.type===0?(n=i.value,a=i.label.text):{value:n,text:a}=i.targets[t.index],n!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(n)}]},{seriesId:e,title:void 0,datum:void 0,value:n})}pickNodeClosestDatum(t){return UU(this,t)}pickFocus(t){return $U(this,t)}getCaptionText(){const{value:t}=this.properties,e=[];return e.push(this.formatLabel(t)),this.labelSelection.each((i,s)=>{const n=bx(this.id,this.ctx,s);n!=null&&e.push(n)}),e.join(". ")}getCategoryValue(t){}datumIndexForCategoryValue(t){}};ek.className="RadialGaugeSeries",ek.type="radial-gauge";var{FONT_SIZE_RATIO:ZSt}=qD._ModuleSupport,XSt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:t=>new ek(t),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},qD._ModuleSupport.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",qD._ModuleSupport.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[ZSt.LARGE]},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}}}}},qSt={type:"series",name:"radial-gauge",chartType:"gauge",enterprise:!0,options:qD._ModuleSupport.radialGaugeSeriesOptionsDef,create:t=>new ek(t)},tO=(E(),w(_)),QSt=(E(),w(_)),JSt=(R(),w(nt));function DK(t){t.nodes.sort((e,i)=>Math.round((e.datum.y-i.datum.y)*100)/100||-(e.datum.size-i.datum.size))}function t0t({nodes:t,size:e},{seriesRectHeight:i,nodeSpacing:s,sizeScale:n}){const a=i*e*n;let o=(i-(a+s*(t.length-1)))/2;t.forEach(({datum:r})=>{const l=i*r.size*n;r.y=o,r.height=l,o+=l+s})}function e0t(t,e){const{nodes:i}=t,{seriesRectHeight:s,nodeSpacing:n}=e;DK(t);let a=0,o=0;for(const{datum:c}of i){const h=Math.max(o-c.y,0);c.y+=h,a+=h,o=c.y+c.height+n}if(o-n<s)return a>0;let l=s;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],u=h.y+h.height,d=Math.min(l-u,0);h.y+=d,a+=d,l=h.y-n}return!0}function eO(t,e,i,s,n,a,o,r){const l=(i-t)/(s-e),c=(o-n)/(r-a),h=((a-e)*(l*c)+t*c-n*l)/(c-l);return t<i?h>t&&h<Math.min(i,o):h<t&&h>Math.max(i,o)}function kK(t,e){let i=!1;const s=t.nodes.filter(a=>e(a).length===1);let n=!0;for(let a=0;n&&a<s.length;a+=1){n=!1;for(let o=0;o<s.length-1;o+=1){const{datum:r}=s[o],l=e(s[o])[0].node.datum,{datum:c}=s[o+1],h=e(s[o+1])[0].node.datum;if(!(eO(r.x,r.y,l.x,l.y,c.x,c.y,h.x,h.y)||eO(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||eO(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const d=s[o];s[o]=s[o+1],s[o+1]=d;const p=r.y;r.y=c.y+c.height-r.height,c.y=p,i=!0,n=!0}}return i}function i0t(t){let e=!1;return DK(t),e=kK(t,i=>i.linksBefore)||e,e=kK(t,i=>i.linksAfter)||e,e}function s0t(t){if(t.length===0)return;let e=0,i=0;for(const{node:{datum:s}}of t)e+=s.y*s.size,i+=s.size;return e/i}function IK(t,e,i,s){return t.nodes.forEach(({datum:n,linksBefore:a,linksAfter:o})=>{const r=s===1?a:o,l=s===1?o:a,c=s0t(r);if(c!=null){const h=l.length!==0?i:1;n.y=n.y+(c-n.y)*h}}),e0t(t,e)}function AK(t,e,i){let s=!1;for(const n of t)s=IK(n,e,i,1)||s;return s}function n0t(t,e,i){let s=!1;for(let n=t.length-1;n>=0;n-=1)s=IK(t[n],e,i,-1)||s;return s}function CK(t){let e=!1;for(let i=t.length-1;i>=0;i-=1)e=i0t(t[i])||e;return e}function a0t(t,e){t.forEach(s=>{t0t(s,e)});let i=!1;for(let s=0;s<6;s+=1){const n=AK(t,e,1);i=n0t(t,e,.5);const a=CK(t);if(!n&&!i&&!a)break}i&&(AK(t,e,1),CK(t))}var o0t=(E(),w(_)),{BBox:r0t,Path:l0t,SceneChangeDetection:hf,splitBezier:c0t}=o0t._ModuleSupport;function ik(t,e,i,s,n,a,o,r,l,c){let h,u;if(n!==i&&l!==o){const L=-(s-e)/(n-i),A=-(r-a)/(l-o);h=(o-i+L*e-A*a)/(L-A),u=L*(h-e)+i}else if(n===i&&l!==o)h=e,u=-(r-a)/(l-o)*(h-r)+l;else if(n!==i&&l===o)h=r,u=-(s-e)/(n-i)*(h-e)+i;else throw new Error("Offsetting flat bezier curve");const d=Math.hypot(i-u,e-h),p=(d+c)/d,g=Math.hypot(l-u,r-h),f=(g+c)/g,x=h+(s-h)*p,y=u+(n-u)*p,b=h+(a-h)*f,v=u+(o-u)*f,M=h+(r-h)*f,D=u+(l-u)*f;t.cubicCurveTo(x,y,b,v,M,D)}var Wd=class extends l0t{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const t=Math.min(this.x1,this.x2),e=Math.max(this.x1,this.x2)-t,i=Math.min(this.y1,this.y2),s=Math.max(this.y1,this.y2)-i+this.height;return new r0t(t,i,e,s)}updatePath(){const{path:t,inset:e}=this;t.clear();const i=this.x1+e,s=this.x2-e,n=this.y1+e,a=this.y2+e,o=this.height-2*e;if(o<0||i>s)return;const r=i,l=n+o/2,c=(i+s)/2,h=n+o/2,u=(i+s)/2,d=a+o/2,p=s,g=a+o/2;if(t.moveTo(r,l-o/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)t.cubicCurveTo(c,h-o/2,u,d-o/2,p,g-o/2),t.lineTo(p,g+o/2),t.cubicCurveTo(u,d+o/2,c,h+o/2,r,l+o/2);else{const[f,x]=c0t(r,l,c,h,u,d,p,g,.5),y=(a>n?1:-1)*o/2;ik(t,f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,y),ik(t,x[0].x,x[0].y,x[1].x,x[1].y,x[2].x,x[2].y,x[3].x,x[3].y,-y),t.lineTo(p,g+o/2),ik(t,x[3].x,x[3].y,x[2].x,x[2].y,x[1].x,x[1].y,x[0].x,x[0].y,y),ik(t,f[3].x,f[3].y,f[2].x,f[2].y,f[1].x,f[1].y,f[0].x,f[0].y,-y)}t.closePath()}};m([hf()],Wd.prototype,"x1",2),m([hf()],Wd.prototype,"x2",2),m([hf()],Wd.prototype,"y1",2),m([hf()],Wd.prototype,"y2",2),m([hf()],Wd.prototype,"height",2),m([hf()],Wd.prototype,"inset",2);var h0t=(E(),w(_)),{BaseProperties:LK,FillGradientDefaults:u0t,FillPatternDefaults:d0t,FillImageDefaults:p0t,SeriesTooltip:g0t,SeriesProperties:f0t,Property:Gt,Label:m0t}=h0t._ModuleSupport,wK=class extends m0t{constructor(){super(...arguments),this.spacing=1}};m([Gt],wK.prototype,"spacing",2);var tc=class extends LK{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};m([Gt],tc.prototype,"fill",2),m([Gt],tc.prototype,"fillOpacity",2),m([Gt],tc.prototype,"stroke",2),m([Gt],tc.prototype,"strokeOpacity",2),m([Gt],tc.prototype,"strokeWidth",2),m([Gt],tc.prototype,"lineDash",2),m([Gt],tc.prototype,"lineDashOffset",2),m([Gt],tc.prototype,"itemStyler",2);var yo=class extends LK{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};m([Gt],yo.prototype,"spacing",2),m([Gt],yo.prototype,"width",2),m([Gt],yo.prototype,"alignment",2),m([Gt],yo.prototype,"fill",2),m([Gt],yo.prototype,"fillOpacity",2),m([Gt],yo.prototype,"stroke",2),m([Gt],yo.prototype,"strokeOpacity",2),m([Gt],yo.prototype,"strokeWidth",2),m([Gt],yo.prototype,"lineDash",2),m([Gt],yo.prototype,"lineDashOffset",2),m([Gt],yo.prototype,"itemStyler",2);var Pi=class extends f0t{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new u0t,this.fillPatternDefaults=new d0t,this.fillImageDefaults=new p0t,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new wK,this.link=new tc,this.node=new yo,this.tooltip=new g0t}};m([Gt],Pi.prototype,"nodes",2),m([Gt],Pi.prototype,"fromKey",2),m([Gt],Pi.prototype,"toKey",2),m([Gt],Pi.prototype,"idKey",2),m([Gt],Pi.prototype,"idName",2),m([Gt],Pi.prototype,"labelKey",2),m([Gt],Pi.prototype,"labelName",2),m([Gt],Pi.prototype,"sizeKey",2),m([Gt],Pi.prototype,"sizeName",2),m([Gt],Pi.prototype,"fillGradientDefaults",2),m([Gt],Pi.prototype,"fillPatternDefaults",2),m([Gt],Pi.prototype,"fillImageDefaults",2),m([Gt],Pi.prototype,"defaultColorRange",2),m([Gt],Pi.prototype,"defaultPatternFills",2),m([Gt],Pi.prototype,"fills",2),m([Gt],Pi.prototype,"strokes",2),m([Gt],Pi.prototype,"label",2),m([Gt],Pi.prototype,"link",2),m([Gt],Pi.prototype,"node",2),m([Gt],Pi.prototype,"tooltip",2);var{Transformable:y0t,applyShapeStyle:TK,SeriesNodePickMode:NK,CachedTextMeasurerPool:x0t,TextWrapper:OK,TextUtils:_K,createDatumId:sk,getShapeStyle:nk,Rect:EK,BBox:PK}=QSt._ModuleSupport,ak=class extends xU{constructor(t){super({moduleCtx:t,pickModes:[NK.NEAREST_NODE,NK.EXACT_SHAPE_MATCH]}),this.properties=new Pi}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Wd}nodeFactory(){return new EK}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:n,sizeKey:a,label:{spacing:o},node:{spacing:r,width:l,alignment:c}}=this.properties,{nodeGraph:h,links:u,maxPathLength:d}=this.getNodeGraph(A=>({...A,x:NaN,y:NaN,width:l,height:NaN}),A=>({...A,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),p=h,g=this.isLabelEnabled()?(e-l)*(1-d/(d+1)):0,f=(e-l-2*g)/(d-1),x=[];for(let A=0;A<d;A+=1){const C=g+A*f;x.push({index:A,size:0,nodes:[],x:C})}p.forEach(A=>{const{datum:C,linksBefore:T,linksAfter:N,maxPathLengthBefore:P,maxPathLengthAfter:O}=A,B=Math.max(T.reduce((W,{link:H})=>W+H.size,0),N.reduce((W,{link:H})=>W+H.size,0));if(T.length===0&&N.length===0||B===0){A.columnIndex=-1;return}let G;switch(c){case"left":G=x[P];break;case"right":G=x[d-1-O];break;case"center":{if(T.length!==0)G=x[P];else if(N.length!==0){const W=N.reduce((H,$)=>Math.min(H,$.node.maxPathLengthBefore),d)-1;G=x[W]}else G=x[0];break}case"justify":{G=N.length===0?x[d-1]:x[P];break}}C.x=G.x,C.size=B;const V=this.getLabelText(this.properties.label,{datum:C.datum,value:C.label,fromKey:s,toKey:n,sizeKey:a,size:B});C.label=String(V),G.nodes.push(A),G.size+=B,A.columnIndex=G.index}),p.forEach(A=>{let C=1/0,T=0;A.linksAfter.forEach(N=>{const P=N.node,{columnIndex:O}=P;O<C?(C=O,T=P.datum.size):O===C&&(T=Math.max(T,P.datum.size))}),A.closestColumnIndex=C,A.maxSizeOfClosestNodesAfter=T});const y=x.reduce((A,{size:C,nodes:T})=>{const N=(1-(T.length-1)*(r/i))/C;return Math.min(A,N)},1/0);for(let A=x.length-1;A>=0;A-=1)x[A].nodes.sort((T,N)=>T.closestColumnIndex-N.closestColumnIndex||T.maxSizeOfClosestNodesAfter-N.maxSizeOfClosestNodesAfter||T.datum.size-N.datum.size);a0t(x,{seriesRectHeight:i,nodeSpacing:r,sizeScale:y});let b=!1;if(p.forEach(({datum:A,linksBefore:C,linksAfter:T})=>{b||(b=A.height<0);const N=A.y+A.height,P=G=>G.sort((V,W)=>{const H=V.node.datum,$=W.node.datum,F=H.y+H.height,j=$.y+$.height,z=Math.atan2(H.y-A.y,Math.abs(H.x-A.x))-Math.atan2($.y-A.y,Math.abs($.x-A.x)),Y=Math.atan2(F-N,Math.abs(H.x-A.x))-Math.atan2(j-N,Math.abs($.x-A.x));return z+Y});let O=A.y;P(C).forEach(({link:G})=>{G.y2=O,O+=G.size*i*y});let B=A.y;P(T).forEach(({link:G})=>{G.y1=B,B+=G.size*i*y})}),b){JSt.Logger.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const v=[],M=[],{fontSize:D}=this.properties.label,L=this.properties.label.getFont();return x.forEach((A,C)=>{const T=C===0,N=C===x.length-1;let P=-1/0;A.nodes.sort((O,B)=>O.datum.y-B.datum.y),A.nodes.forEach(({datum:O})=>{if(O.midPoint={x:O.x+O.width/2,y:O.y+O.height/2},v.push(O),O.label==null)return;const B=T?O.x-o:O.x+O.width+o,G=O.y+O.height/2;let V;if(!T&&!N){const F=G-_K.getLineHeight(D),j=G+_K.getLineHeight(D);let z=e;p.forEach(({datum:Z})=>{Z.x>O.x&&Math.max(Z.y,F)<=Math.min(Z.y+Z.height,j)&&(z=Math.min(z,Z.x-o))});const Y=z-O.x-2*o;V=OK.wrapText(O.label,{maxWidth:Y,maxHeight:O.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(V==null||V===""){const F=T||N?o:o*2;V=OK.wrapText(O.label,{maxWidth:f-F,maxHeight:O.height,font:this.properties.label,textWrap:"never"})}if(V==="")return;const{height:W}=x0t.measureText(V,{font:L,textAlign:"left",textBaseline:"middle"}),H=G-W/2,$=G+W/2;H>=P&&(M.push({x:B,y:G,leading:T,text:V}),P=$)})}),u.forEach(A=>{const{fromNode:C,toNode:T,size:N}=A;A.height=i*N*y,A.x1=C.x+l,A.x2=T.x,A.midPoint={x:(A.x1+A.x2)/2,y:(A.y1+A.y2)/2+A.height/2},v.push(A)}),{itemId:t,nodeData:v,labelData:M}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,leading:h,text:u})=>{r.visible=!0,r.x=l,r.y=c,r.text=u,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textAlign=h?"right":"left",r.textBaseline="middle"})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>sk([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}=e.node,l=t?e.highlightStyle.item:void 0;return nk({fill:l?.fill??i,fillOpacity:l?.fillOpacity??s,stroke:l?.stroke??n,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.node.strokeWidth),lineDash:l?.lineDash??o,lineDashOffset:l?.lineDashOffset??r},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getNodeStyleOverrides(t,e,i,s,n,a,o){const{id:r,properties:l}=this,{fills:c,strokes:h,defaultColorRange:u,defaultPatternFills:d}=l,{itemStyler:p}=l.node,g=a.fill??c[i%c.length],f=a.stroke??h[i%h.length],x=u[i%u.length].map(v=>({color:v})),y=d[i%d.length];let b;if(o||(b??(b={}),b.fill=g,b.stroke=f),p!=null){const v=this.cachedDatumCallback(sk(t,"node",o?"highlight":"node"),()=>{const{fillOpacity:M=1,strokeOpacity:D=1,strokeWidth:L=0,lineDash:A=[],lineDashOffset:C=0}=a;return this.callWithContext(p,{seriesId:r,datum:e,highlighted:o,label:n,size:s,fill:g,fillOpacity:M,stroke:f,strokeOpacity:D,strokeWidth:L,lineDash:A,lineDashOffset:C})});b??(b={}),Object.assign(b,v)}return nk(b,{...this.properties.fillGradientDefaults.toJson(),colorStops:x},{...this.properties.fillPatternDefaults.toJson(),fill:y,stroke:y},this.properties.fillImageDefaults)}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseNodeStyle(i),n=this.getShapeFillBBox();e.each((a,o)=>{const{datumIndex:r,size:l,label:c}=o,h=this.getNodeStyleOverrides(String(r.index),o.datum,r.index,l,c,s,i);a.x=o.x,a.y=o.y,a.width=Math.max(o.width,0),a.height=Math.max(o.height,0),TK(a,s,h,n)})}getShapeFillBBox(){const t=this._nodeDataDependencies?.seriesRectWidth??0,e=this._nodeDataDependencies?.seriesRectHeight??0,i=new PK(0,0,t,e);return{series:i,axis:i}}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>sk([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:s,stroke:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}=e.link,l=t?e.highlightStyle.item:void 0;return nk({fill:l?.fill??i,fillOpacity:l?.fillOpacity??s,stroke:l?.stroke??n,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.link.strokeWidth),lineDash:l?.lineDash??o,lineDashOffset:l?.lineDashOffset??r},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getLinkStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,{fills:r,strokes:l,defaultColorRange:c,defaultPatternFills:h}=o,{itemStyler:u}=o.link,d=s.fill??r[i%r.length],p=s.stroke??l[i%l.length],g=c[i%c.length].map(y=>({color:y})),f=h[i%h.length];let x;if(n||(x??(x={}),x.fill=d,x.stroke=p),u!=null){const y=this.cachedDatumCallback(sk(t,"link",n?"highlight":"node"),()=>{const{fillOpacity:b=1,strokeOpacity:v=1,strokeWidth:M=0,lineDash:D=[],lineDashOffset:L=0}=s;return this.callWithContext(u,{seriesId:a,datum:e,highlighted:n,fill:d,fillOpacity:b,stroke:p,strokeOpacity:v,strokeWidth:M,lineDash:D,lineDashOffset:L})});x??(x={}),Object.assign(x,y)}return nk(x,{...this.properties.fillGradientDefaults.toJson(),colorStops:g},{...this.properties.fillPatternDefaults.toJson(),fill:f,stroke:f},this.properties.fillImageDefaults)}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,s=this.getBaseLinkStyle(i),n=this.getShapeFillBBox();e.each((a,o)=>{const{datumIndex:r}=o,l=o.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(r.index),o.datum,l.index,s,i);a.x1=o.x1,a.y1=o.y1,a.x2=o.x2,a.y2=o.y2,a.height=o.height,TK(a,s,c,n),a.inset=a.strokeWidth/2})}getTooltipContent(t){const{id:e,linksProcessedData:i,nodesProcessedData:s,properties:n}=this,{fromKey:a,toKey:o,sizeKey:r,sizeName:l,tooltip:c}=n,h=this.contextNodeData?.nodeData.find(x=>x.datumIndex.type===t.type&&x.datumIndex.index===t.index);if(h==null)return;const u=h.type===0?h.fromNode.index:h.index,d=h.type===0?`${h.fromNode.label} - ${h.toNode.label}`:h.label,p=t.type===0?i?.dataSources.get(this.id)?.[t.index]:s?.dataSources.get(this.id)?.[t.index],g=h.size;let f;if(h.type===0){const x=h.fromNode.datumIndex,y=this.getBaseLinkStyle(!1);Object.assign(y,this.getLinkStyleOverrides(String(t.index),p,x.index,y,!1)),f=y}else{const x=h.label,y=this.getBaseNodeStyle(!1);Object.assign(y,this.getNodeStyleOverrides(String(t.index),p,t.index,g,x,y,!1)),f=y}return this.formatTooltipWithContext(c,{title:d,symbol:this.legendItemSymbol(h.type,u,f),data:r!=null?[{label:l,fallbackLabel:r,value:String(g)}]:[]},{seriesId:e,datum:p,title:d,fromKey:a,toKey:o,sizeKey:r,sizeName:l,size:g,...f})}computeFocusBounds(t){if(t instanceof EK){const{x:e,y:i,width:s,height:n}=t,a=new PK(e,i,s,n);return y0t.toCanvas(this.contentGroup,a)}return t}};ak.className="SankeySeries",ak.type="sankey";var b0t=(E(),w(_)),Ri=(R(),w(nt)),{commonSeriesOptionsDefs:v0t,sankeySeriesThemeableOptionsDef:S0t}=b0t._ModuleSupport,uf={...S0t,...v0t,type:(0,Ri.required)((0,Ri.constant)("sankey")),fromKey:(0,Ri.required)(Ri.string),toKey:(0,Ri.required)(Ri.string),sizeKey:Ri.string,sizeName:Ri.string};uf.fillGradientDefaults=(0,Ri.undocumented)(Ri.fillGradientDefaults),uf.fillPatternDefaults=(0,Ri.undocumented)(Ri.fillPatternDefaults),uf.fillImageDefaults=(0,Ri.undocumented)(Ri.fillImageDefaults),uf.defaultColorRange=(0,Ri.undocumented)((0,Ri.arrayOf)((0,Ri.arrayOf)(Ri.color))),uf.defaultPatternFills=(0,Ri.undocumented)((0,Ri.arrayOf)(Ri.color));var M0t={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:t=>new ak(t),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:tO._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:tO._ModuleSupport.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:tO._ModuleSupport.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}}},D0t={type:"series",name:"sankey",chartType:"flow-proportion",enterprise:!0,options:uf,create:t=>new ak(t)},iO=(E(),w(_)),Nx=(E(),w(_)),k0t=(E(),w(_)),{HierarchySeriesProperties:I0t,HighlightStyle:A0t,SeriesTooltip:C0t,Property:Bi}=k0t._ModuleSupport,Th=class extends A0t{constructor(){super(...arguments),this.label=new Gr,this.secondaryLabel=new Gr}};m([Bi],Th.prototype,"fill",2),m([Bi],Th.prototype,"fillOpacity",2),m([Bi],Th.prototype,"stroke",2),m([Bi],Th.prototype,"strokeWidth",2),m([Bi],Th.prototype,"strokeOpacity",2),m([Bi],Th.prototype,"label",2),m([Bi],Th.prototype,"secondaryLabel",2);var Cn=class extends I0t{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new Th,this.label=new Gr,this.secondaryLabel=new fx,this.tooltip=new C0t}};m([Bi],Cn.prototype,"sizeName",2),m([Bi],Cn.prototype,"labelKey",2),m([Bi],Cn.prototype,"secondaryLabelKey",2),m([Bi],Cn.prototype,"fillOpacity",2),m([Bi],Cn.prototype,"strokeWidth",2),m([Bi],Cn.prototype,"strokeOpacity",2),m([Bi],Cn.prototype,"cornerRadius",2),m([Bi],Cn.prototype,"sectorSpacing",2),m([Bi],Cn.prototype,"padding",2),m([Bi],Cn.prototype,"itemStyler",2),m([Bi],Cn.prototype,"highlightStyle",2),m([Bi],Cn.prototype,"label",2),m([Bi],Cn.prototype,"secondaryLabel",2),m([Bi],Cn.prototype,"tooltip",2);var{fromToMotion:L0t,normalizeAngle360:w0t,createDatumId:T0t,Sector:sO,Group:ok,ScalableGroup:N0t,Selection:nO,TransformableText:aO,BBox:RK,applyShapeStyle:O0t,getShapeStyle:oO}=Nx._ModuleSupport,_0t=class extends Nx._ModuleSupport.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function BK(t,e=0,i=2*Math.PI/t.sumSize){for(const s of t.children){const n=e+s.sumSize*i;s.startAngle=e,s.endAngle=n,BK(s,e,i),e=n}}var rk=class extends Nx._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.NodeClass=_0t,this.properties=new Cn,this.scalingGroup=this.contentGroup.appendChild(new N0t),this.sectorGroup=this.scalingGroup.appendChild(new ok),this.sectorLabelGroup=this.scalingGroup.appendChild(new ok),this.highlightSectorGroup=this.scalingGroup.appendChild(new ok),this.datumSelection=nO.select(this.sectorGroup,sO),this.labelSelection=nO.select(this.sectorLabelGroup,ok),this.highlightSelection=nO.select(this.highlightSectorGroup,sO)}processData(){super.processData(),BK(this.rootNode)}updateSelections(){const t=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(t!=null?[t]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(e==null||e.seriesRect==null)return;const s=Array.from(this.rootNode),n=a=>{a.append([new aO({tag:0}),new aO({tag:1})])};this.datumSelection.update(s,void 0,a=>this.getDatumId(a)),this.labelSelection.update(s,n,a=>this.getDatumId(a))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle:void 0;return oO({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getItemStyleOverrides(t,e,i,s,n,a){const{id:o,properties:r,colorScale:l}=this,{fills:c,strokes:h,itemStyler:u}=r,d=t[0],p=n.fill??c[d%c.length],g=n.stroke??h[d%h.length],f={};if(a||(f.fill=s!=null?l.convert(s):p,f.stroke=g),u!=null){const x=this.cachedDatumCallback(T0t(t.join(":"),a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:o,datum:e,depth:i,highlighted:a,fill:p,stroke:g,...n}));Object.assign(f,x)}return oO(f,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateNodes(){const{chart:t,data:e,maxDepth:i}=this;if(t==null||e==null)return;const{width:s,height:n}=t.seriesRect,{sectorSpacing:a=0,padding:o=0,cornerRadius:r,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:d,sizeKey:p,sizeName:g}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=n/2;const f=a*.5,x=Math.min(s,n)/2,y=x/(i+1),b=-Math.PI/2,v={series:new RK(-x,-x,2*x,2*x),axis:new RK(-x,-x,2*x,2*x)};this.rootNode?.walk(T=>{const{startAngle:N,endAngle:P}=T;if(T.depth!=null){const O=(N+P)/2+b,B=(T.depth+.5)*y;T.midPoint.x=Math.cos(O)*B,T.midPoint.y=Math.sin(O)*B}}),this.rootNode?.walk(T=>{const{datum:N,depth:P,startAngle:O,endAngle:B,parent:G,sumSize:V}=T;T.label=void 0,T.secondaryLabel=void 0,T.contentHeight=0;let W;if(N!=null&&P!=null&&u!=null){const Lt=N[u];W=this.getLabelText(this.properties.label,{depth:P,datum:N,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:d,sizeKey:p,sizeName:g,value:Lt})}W===""&&(W=void 0);let H;if(N!=null&&P!=null&&d!=null){const Lt=N[d];H=this.getLabelText(this.properties.secondaryLabel,{depth:P,datum:N,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:d,sizeKey:p,sizeName:g,value:Lt})}if(H===""&&(H=void 0),P==null)return;const $=P*y+f,F=(P+1)*y-f,j=$>f?f/$:f,z=F>f?f/F:f,Y=O+j,X=B+j-Y,tt=O+z,it=B+z-tt,Q=Lt=>{if(P===0&&G?.sumSize===V)return{width:2*Math.sqrt(F**2-(Lt*.5)**2),height:Lt,meta:0};const se=Lt,js=2*Math.sqrt(F**2-($+se)**2),ln=X<Math.PI?2*$*Math.tan(X*.5):1/0,bo=Math.min(js,ln),Ud=Math.PI/4;let ic,_h;return P===0?(ic=Lt,_h=Math.sqrt(F**2-(ic/2)**2)-Lt/(2*Math.tan(it*.5))):w0t(X)<Ud?(ic=2*$*Math.tan(X*.5),_h=Math.sqrt(F**2-(ic/2)**2)-$):(_h=0,ic=0),bo>=_h?{width:bo,height:se,meta:1}:{width:_h,height:ic,meta:2}},rt=WN(W,this.properties.label,H,this.properties.secondaryLabel,{padding:o},Q);if(rt==null)return;const{width:at,height:ht,meta:dt,label:Mt,secondaryLabel:Ct}=rt,bt=b+(O+B)/2,qt=Math.sin(bt)>=0,Jt=Math.cos(bt)>=0,Vt=(qt?3:12)&(Jt?6:9);let Qt;switch(dt){case 0:Qt=0;break;case 1:{const Wt=F-(y-ht)*.58,se=Math.sqrt((F-o)**2-(at/2)**2);Qt=Math.min(Wt,se);break}case 2:if(P===0){const Lt=ht/(2*Math.tan(X*.5))+at*.5,Wt=Math.sqrt(F**2-(ht*.5)**2)-at*.5;Qt=(Lt+Wt)*.5}else Qt=($+F)*.5;break}if(Mt!=null){const{fontStyle:Lt="normal",fontFamily:Wt,fontWeight:se="normal",color:js="black"}=this.properties.label;T.label={...Mt,fontStyle:Lt,fontFamily:Wt,fontWeight:se,color:js,labelPlacement:dt,circleQuarter:Vt,radius:Qt,theta:bt}}if(Ct!=null){const{fontStyle:Lt="normal",fontFamily:Wt,fontWeight:se="normal",color:js="black"}=this.properties.secondaryLabel;T.secondaryLabel={...Ct,fontStyle:Lt,fontFamily:Wt,fontWeight:se,color:js,labelPlacement:dt,circleQuarter:Vt,radius:Qt,theta:bt}}T.contentHeight=rt.height});const M=(T,N,P,O)=>{const{datum:B,datumIndex:G,depth:V,colorValue:W,startAngle:H,endAngle:$}=T;if(V==null){N.visible=!1;return}N.visible=!0;const F=this.getItemStyleOverrides(G,B,V,W,P,O),j=F.fill??P.fill,z=F.strokeWidth??P.strokeWidth,Y=Nx._ModuleSupport.isGradientFill(j)&&j.bounds!=="item"?v:void 0;O0t(N,P,F,Y),N.centerX=0,N.centerY=0,N.innerRadius=V*y,N.outerRadius=(V+1)*y,N.startAngle=H+b,N.endAngle=$+b,N.inset=f+z*.5,N.cornerRadius=r},D=this.getItemBaseStyle(!1);this.datumSelection.each((T,N)=>{M(N,T,D,!1)});const L=this.getItemBaseStyle(!0);this.highlightSelection.each((T,N)=>{M(N,T,L,!0)});const A=(T,N,P,O)=>{const{depth:B,contentHeight:G}=T,V=P===0,W=V?T.label:T.secondaryLabel;if(B==null||W==null){N.visible=!1;return}const{labelPlacement:H,circleQuarter:$,radius:F,theta:j}=W;let z;switch(O&&(z=(V?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),N.text=W.text,N.fontSize=W.fontSize,N.lineHeight=W.lineHeight,N.fontStyle=W.fontStyle,N.fontFamily=W.fontFamily,N.fontWeight=W.fontWeight,N.fill=z??W.color,H){case 0:N.textAlign="center",N.textBaseline="top",N.translationX=0,N.translationY=(V?0:G-W.height)-G*.5,N.rotation=0;break;case 1:{const Y=($&3)!==0,Z=V===!Y?F:F-(G-W.height);N.textAlign="center",N.textBaseline=Y?"bottom":"top",N.translationX=Math.cos(j)*Z,N.translationY=Math.sin(j)*Z,N.rotation=Y?j-Math.PI*.5:j+Math.PI*.5;break}case 2:{const Y=($&6)!==0,Z=V===!Y?(G-W.height)*.5:(W.height-G)*.5;N.textAlign="center",N.textBaseline="middle",N.translationX=Math.cos(j)*F+Math.cos(j+Math.PI/2)*Z,N.translationY=Math.sin(j)*F+Math.sin(j+Math.PI/2)*Z,N.rotation=Y?j:j+Math.PI;break}}N.visible=!0},C=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(aO).forEach(T=>{const N=T.closestDatum();A(N,T,T.tag,N===C)})}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:s,secondaryLabelKey:n,childrenKey:a,sizeKey:o,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,u=t.reduce((M,D)=>M?.children[D],this.rootNode);if(u==null)return;const{datum:d,depth:p}=u;if(d==null||p==null)return;const g=[],f=o!=null?d[o]:void 0;f!=null&&g.push({label:r,fallbackLabel:o,value:f});const x=l!=null?d[l]:void 0;x!=null&&g.push({label:c,fallbackLabel:l,value:x});const y=this.getItemBaseStyle(!1);Object.assign(y,this.getItemStyleOverrides(t,d,p,x,y,!1));const b=y.fill,v=oO({shape:"square",fill:b,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults);return Nx._ModuleSupport.isGradientFill(v.fill)&&(v.fill={...v.fill,gradient:"linear",rotation:0,reverse:!1}),this.formatTooltipWithContext(h,{title:s!=null?d[s]:void 0,symbol:{marker:v},data:g},{seriesId:e,datum:d,title:void 0,depth:p,labelKey:s,secondaryLabelKey:n,childrenKey:a,sizeKey:o,sizeName:r,colorKey:l,colorName:c,...y})}createNodeData(){}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.datumSelection.selectByClass(sO))}animateEmptyUpdateReady(){L0t(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(t){return t}};rk.className="SunburstSeries",rk.type="sunburst";var E0t=(E(),w(_)),ec=(R(),w(nt)),{commonSeriesOptionsDefs:P0t,sunburstSeriesThemeableOptionsDef:R0t,without:B0t}=E0t._ModuleSupport,z0t={...R0t,...B0t(P0t,["highlightStyle"]),type:(0,ec.required)((0,ec.constant)("sunburst")),labelKey:ec.string,secondaryLabelKey:ec.string,childrenKey:ec.string,sizeKey:ec.string,colorKey:ec.string,sizeName:ec.string,colorName:ec.string},{FONT_SIZE_RATIO:zK}=iO._ModuleSupport,F0t={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:t=>new rk(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:iO._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:iO._ModuleSupport.FILL_IMAGE_DEFAULTS,label:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[zK.LARGE]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},9/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[zK.SMALLEST]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},7/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}}},j0t={type:"series",name:"sunburst",chartType:"hierarchy",enterprise:!0,options:z0t,create:t=>new rk(t)},rO=(E(),w(_)),Ox=(E(),w(_)),G0t=(R(),w(nt)),V0t=(E(),w(_)),{BaseProperties:lk,HierarchySeriesProperties:W0t,HighlightStyle:H0t,SeriesTooltip:U0t,Property:Et,Label:$0t}=V0t._ModuleSupport,FK=class extends $0t{constructor(){super(...arguments),this.spacing=0}};m([Et],FK.prototype,"spacing",2);var xo=class extends lk{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new FK}};m([Et],xo.prototype,"fill",2),m([Et],xo.prototype,"fillOpacity",2),m([Et],xo.prototype,"stroke",2),m([Et],xo.prototype,"strokeWidth",2),m([Et],xo.prototype,"strokeOpacity",2),m([Et],xo.prototype,"cornerRadius",2),m([Et],xo.prototype,"textAlign",2),m([Et],xo.prototype,"gap",2),m([Et],xo.prototype,"padding",2),m([Et],xo.prototype,"interactive",2),m([Et],xo.prototype,"label",2);var _a=class extends lk{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Gr,this.secondaryLabel=new fx}};m([Et],_a.prototype,"fill",2),m([Et],_a.prototype,"fillOpacity",2),m([Et],_a.prototype,"stroke",2),m([Et],_a.prototype,"strokeWidth",2),m([Et],_a.prototype,"strokeOpacity",2),m([Et],_a.prototype,"cornerRadius",2),m([Et],_a.prototype,"textAlign",2),m([Et],_a.prototype,"verticalAlign",2),m([Et],_a.prototype,"gap",2),m([Et],_a.prototype,"padding",2),m([Et],_a.prototype,"label",2),m([Et],_a.prototype,"secondaryLabel",2);var Hd=class extends lk{constructor(){super(...arguments),this.label=new Gr}};m([Et],Hd.prototype,"fill",2),m([Et],Hd.prototype,"fillOpacity",2),m([Et],Hd.prototype,"stroke",2),m([Et],Hd.prototype,"strokeWidth",2),m([Et],Hd.prototype,"strokeOpacity",2),m([Et],Hd.prototype,"label",2);var Nh=class extends lk{constructor(){super(...arguments),this.label=new Gr,this.secondaryLabel=new fx}};m([Et],Nh.prototype,"fill",2),m([Et],Nh.prototype,"fillOpacity",2),m([Et],Nh.prototype,"stroke",2),m([Et],Nh.prototype,"strokeWidth",2),m([Et],Nh.prototype,"strokeOpacity",2),m([Et],Nh.prototype,"label",2),m([Et],Nh.prototype,"secondaryLabel",2);var lO=class extends H0t{constructor(){super(...arguments),this.group=new Hd,this.tile=new Nh}};m([Et],lO.prototype,"group",2),m([Et],lO.prototype,"tile",2);var Xo=class extends W0t{constructor(){super(...arguments),this.highlightStyle=new lO,this.tooltip=new U0t,this.group=new xo,this.tile=new _a,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};m([Et],Xo.prototype,"sizeName",2),m([Et],Xo.prototype,"labelKey",2),m([Et],Xo.prototype,"secondaryLabelKey",2),m([Et],Xo.prototype,"itemStyler",2),m([Et],Xo.prototype,"highlightStyle",2),m([Et],Xo.prototype,"tooltip",2),m([Et],Xo.prototype,"group",2),m([Et],Xo.prototype,"tile",2),m([Et],Xo.prototype,"undocumentedGroupFills",2),m([Et],Xo.prototype,"undocumentedGroupStrokes",2);var{TextUtils:K0t,TextWrapper:Y0t,createDatumId:jK,Rect:GK,Group:VK,BBox:df,Selection:cO,Text:ck,Transformable:Z0t,applyShapeStyle:X0t,getShapeStyle:_x}=Ox._ModuleSupport,q0t=class extends Ox._ModuleSupport.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}},WK=new ck;function Q0t(t,e){const{fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a}=e;WK.setProperties({text:t,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:o,height:r}=WK.getBBox();return{width:o,height:r}}function Oh(t){return t.children.length>0?t.sumSize-t.sizeValue:t.sizeValue}var HK={left:0,center:.5,right:1},J0t={top:0,middle:.5,bottom:1},nDt=class extends Ox._ModuleSupport.Group{distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}},hk=class extends Ox._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.NodeClass=q0t,this.properties=new Xo,this.rectGroup=this.contentGroup.appendChild(new VK),this.datumSelection=cO.select(this.rectGroup,GK),this.labelSelection=cO.select(this.labelGroup,VK),this.highlightSelection=cO.select(this.rectGroup,GK)}groupTitleHeight(t,e){const{labelValue:i}=t,{label:s}=this.properties.group,n=3;if(i!=null){if(s.fontSize>e.width/n||s.fontSize>e.height/n)return;{const{height:a}=Q0t(i,s);return Math.max(a,s.fontSize)}}}getNodePadding(t,e){if(t.parent==null)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:o}=this.properties.tile;return{top:o,right:o,bottom:o,left:o}}const{label:{spacing:i},padding:s}=this.properties.group,n=this.groupTitleHeight(t,e),a=n!=null?n+i:0;return{top:s+a,right:s,bottom:s,left:s}}sortChildren({children:t}){const e=Array.from(t,(s,n)=>n).filter(s=>Oh(t[s])>0).sort((s,n)=>Oh(t[n])-Oh(t[s]));return{sortedChildrenIndices:e,childAt:s=>{const n=e[s];return t[n]}}}squarify(t,e){const{datum:i,children:s}=t;if(e.width<=0||e.height<=0){t.bbox=void 0,t.padding=void 0,t.midPoint.x=NaN,t.midPoint.y=NaN;return}const n=i!=null?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0};t.parent==null?(t.bbox=void 0,t.padding=void 0,t.midPoint.x=NaN,t.midPoint.y=NaN):(t.bbox=e,t.padding=n,t.midPoint.x=e.x+e.width/2,t.midPoint.y=e.y);const{sortedChildrenIndices:a,childAt:o}=this.sortChildren(t),r=a.every(D=>s[D].children.length===0),l=1,c=e.width-n.left-n.right,h=e.height-n.top-n.bottom;if(c<=0||h<=0)return;const u=a.length;let d=0,p=0,g=1/0,f=a.reduce((D,L)=>D+Oh(s[L]),0);const x=new df(e.x+n.left,e.y+n.top,c,h),y=x.clone();let b=0;for(;b<u;){const D=Oh(o(b)),L=Oh(o(p)),A=y.width<y.height;d+=D;const C=A?y.height:y.width,T=A?y.width:y.height,N=T*L/d;let P=C*d/f;const O=Math.max(N,P)/Math.min(N,P),B=Math.abs(l-O);if(B<g){g=B,b++;continue}d-=D,P=C*d/f;let G=A?y.x:y.y;for(let V=p;V<b;V++){const W=o(V),H=Oh(W),$=A?G:y.x,F=A?y.y:G,j=T*H/d,z=A?j:P,Y=A?P:j,Z=new df($,F,z,Y);this.applyGap(x,Z,r),this.squarify(W,Z),f-=H,G+=j}A?(y.y+=P,y.height-=P):(y.x+=P,y.width-=P),p=b,d=0,g=1/0}const v=y.width<y.height;let M=v?y.x:y.y;for(let D=p;D<u;D++){const L=o(D),A=v?M:y.x,C=v?y.y:M,T=Oh(L)/f,N=y.width*(v?T:1),P=y.height*(v?1:T),O=new df(A,C,N,P);this.applyGap(x,O,r),this.squarify(L,O),M+=v?N:P}}applyGap(t,e,i){const s=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,n=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=n(t),o=n(e);["top","right","bottom","left"].forEach(l=>{(0,G0t.isNumberEqual)(a[l],o[l])||e.shrink(s,l)})}createNodeData(){}getGroupBaseStyle(t){const{properties:e}=this,{group:i}=e,s=t?e.highlightStyle.group:void 0;return _x({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getGroupStyleOverrides(t,e,i,s,n){const{id:a,properties:o}=this,{undocumentedGroupFills:r,undocumentedGroupStrokes:l,itemStyler:c}=o,h=s.fill??r[Math.min(i??0,r.length)],u=s.stroke??l[Math.min(i??0,l.length)],d={};if(n||(d.fill=h,d.stroke=u),c!=null){const p=this.cachedDatumCallback(jK(t.join(":"),n?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,depth:i,highlighted:n,fill:h,stroke:u,...s}));Object.assign(d,p)}return _x(d,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getTileBaseStyle(t){const{properties:e}=this,{tile:i}=e,s=t?e.highlightStyle.tile:void 0;return _x({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults)}getTileStyleOverrides(t,e,i,s,n,a){const{id:o,properties:r,colorScale:l}=this,{fills:c,strokes:h,itemStyler:u}=r,d=t[0],p=n.fill??c[d%c.length],g=n.stroke??h[d%h.length],f={};if(a||(f.fill=s!=null?l.convert(s):p,f.stroke=g),u!=null){const x=this.cachedDatumCallback(jK(t.join(":"),a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:o,datum:e,depth:i,highlighted:a,fill:p,stroke:g,...n}));Object.assign(f,x)}return _x(f,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateSelections(){let t=this.ctx.highlightManager?.getActiveHighlight();if(t!=null&&!this.properties.group.interactive&&t.children.length!==0&&(t=void 0),this.highlightSelection.update(t!=null?[t]:[],void 0,n=>this.getDatumId(n)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:e}=this.chart??{};if(!e)return;const i=Array.from(this.rootNode),s=n=>{n.append([new ck({tag:0}),new ck({tag:1})])};this.datumSelection.update(i,void 0,n=>this.getDatumId(n)),this.labelSelection.update(i,s,n=>this.getDatumId(n))}updateNodes(){const{rootNode:t,data:e}=this,{childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,highlightStyle:c,tile:h,group:u}=this.properties,{seriesRect:d}=this.chart??{};if(!d||!e)return;this.rootNode?.walk(A=>{const{datum:C,depth:T,children:N}=A,P=N.length===0,O=P?h.label:u.label;let B;if(C!=null&&T!=null&&a!=null){const V=C[a];B=this.getLabelText(O,{depth:T,datum:C,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,value:V})}B===""&&(B=void 0);let G;if(P&&C!=null&&T!=null&&o!=null){const V=C[o];G=this.getLabelText(h.secondaryLabel,{depth:T,datum:C,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,value:V})}G===""&&(G=void 0),A.labelValue=B,A.secondaryLabelValue=G});const{width:p,height:g}=d;this.squarify(t,new df(0,0,p,g)),this.rootNode?.walk(A=>{const{bbox:C,children:T,labelValue:N,secondaryLabelValue:P}=A;if(A.label=void 0,A.secondaryLabel=void 0,C!=null)if(T.length===0){const O={width:C.width,height:C.height,meta:null},B=WN(N,this.properties.tile.label,P,this.properties.tile.secondaryLabel,{padding:h.padding},()=>O);if(B==null)return;const{height:G,label:V,secondaryLabel:W}=B,{textAlign:H,verticalAlign:$,padding:F}=h,j=HK[H]??.5,z=C.x+F+(C.width-2*F)*j,Y=J0t[$]??.5,Z=C.y+F+G*.5+(C.height-2*F-G)*Y;if(V!=null){const{fontStyle:X="normal",fontFamily:tt,fontWeight:q="normal",color:it="black"}=this.properties.tile.label;A.label={text:V.text,fontSize:V.fontSize,lineHeight:V.lineHeight,fontStyle:X,fontFamily:tt,fontWeight:q,color:it,textAlign:H,verticalAlign:"middle",x:z,y:Z-(G-V.height)*.5}}if(W!=null){const{fontStyle:X="normal",fontFamily:tt,fontWeight:q="normal",color:it="black"}=this.properties.tile.secondaryLabel;A.secondaryLabel={text:W.text,fontSize:W.fontSize,lineHeight:W.fontSize,fontStyle:X,fontFamily:tt,fontWeight:q,color:it,textAlign:H,verticalAlign:"middle",x:z,y:Z+(G-W.height)*.5}}}else{if(N==null)return;{const{padding:O,textAlign:B}=u,G=this.groupTitleHeight(A,C);if(G==null)return;const V=C.width-2*O,W=Y0t.wrapText(N,{maxWidth:C.width-2*O,font:u.label,textWrap:"never"}),H=HK[B]??.5,{fontStyle:$="normal",fontFamily:F,fontWeight:j="normal",color:z="black"}=this.properties.group.label;A.label={text:W,fontSize:u.label.fontSize,lineHeight:K0t.getLineHeight(u.label.fontSize),fontStyle:$,fontFamily:F,fontWeight:j,color:z,textAlign:B,verticalAlign:"middle",x:C.x+O+V*H,y:C.y+O+G*.5}}}});const f={series:new df(0,0,p,g),axis:new df(0,0,p,g)},x=(A,C,T,N,P)=>{const{bbox:O}=A;if(O==null){C.visible=!1;return}const{datum:B,depth:G=-1,datumIndex:V,colorValue:W}=A,H=A.children.length===0,$=H?N:T,F=H?this.getTileStyleOverrides(V,B,G,W,$,P):this.getGroupStyleOverrides(V,B,G,$,P);C.crisp=!0,X0t(C,$,F,f),C.cornerRadius=H?h.cornerRadius:u.cornerRadius,C.zIndex=[0,G,P?1:0];const j=A.parent?.children.every(Z=>Z.children.length===0),z=A.parent!=null?A.parent.bbox:void 0,Y=A.parent!=null?A.parent.padding:void 0;j===!0&&z!=null&&Y!=null?(C.clipBBox=O,C.x=z.x+Y.left,C.y=z.y+Y.top,C.width=z.width-(Y.left+Y.right),C.height=z.height-(Y.top+Y.bottom)):(C.clipBBox=void 0,C.x=O.x,C.y=O.y,C.width=O.width,C.height=O.height),C.visible=!0},y=this.getGroupBaseStyle(!1),b=this.getTileBaseStyle(!1);this.datumSelection.each((A,C)=>x(C,A,y,b,!1));const v=this.getGroupBaseStyle(!0),M=this.getTileBaseStyle(!0);this.highlightSelection.each((A,C)=>{x(C,A,v,M,!0)});const D=(A,C,T,N)=>{const P=A.children.length===0,O=T===0?A.label:A.secondaryLabel;if(O==null){C.visible=!1;return}let B;if(N){const{tile:G,group:V}=c;B=G.secondaryLabel.color,P?T===0&&(B=G.label.color):B=V.label.color}C.text=O.text,C.fontSize=O.fontSize,C.lineHeight=O.lineHeight,C.fontStyle=O.fontStyle,C.fontFamily=O.fontFamily,C.fontWeight=O.fontWeight,C.fill=B??O.color,C.textAlign=O.textAlign,C.textBaseline=O.verticalAlign,C.x=O.x,C.y=O.y,C.visible=!0,C.zIndex=1},L=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(ck).forEach(A=>{const C=A.closestDatum();D(C,A,A.tag,C===L)})}pickNodesExactShape(t){const e=super.pickNodesExactShape(t);return e.sort((i,s)=>s.datumIndex.length-i.datumIndex.length),e}pickNodeClosestDatum(t){const e=this.pickNodesExactShape(t);return e.length!==0?{datum:e[0],distance:0}:this.pickNodeNearestDistantObject(t,this.datumSelection.nodes())}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:s,secondaryLabelKey:n,childrenKey:a,sizeKey:o,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,u=t.reduce((A,C)=>A?.children[C],this.rootNode);if(u==null)return;const{datum:d,depth:p,children:g}=u;if(d==null||p==null)return;const f=g.length===0,x=[],y=o!=null?d[o]:void 0;y!=null&&x.push({label:r,fallbackLabel:o,value:y});const b=l!=null?d[l]:void 0;b!=null&&x.push({label:c,fallbackLabel:l,value:b});let v;f?(v=this.getTileBaseStyle(!1),Object.assign(v,this.getTileStyleOverrides(t,d,p,b,v,!1))):(v=this.getGroupBaseStyle(!1),Object.assign(v,this.getGroupStyleOverrides(t,d,p,v,!1)));const M=v.fill,D=_x({shape:"square",fill:M,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);Ox._ModuleSupport.isGradientFill(D.fill)&&(D.fill={...D.fill,gradient:"linear",rotation:0,reverse:!1});const L=f?{marker:D}:void 0;return this.formatTooltipWithContext(h,{title:s!=null?d[s]:void 0,symbol:L,data:x},{seriesId:e,datum:d,title:void 0,depth:p,labelKey:s,secondaryLabelKey:n,childrenKey:a,sizeKey:o,sizeName:r,colorKey:l,colorName:c,...v})}computeFocusBounds(t){return Z0t.toCanvas(this.contentGroup,t.getBBox())}};hk.className="TreemapSeries",hk.type="treemap";var tMt=(E(),w(_)),zi=(R(),w(nt)),{commonSeriesOptionsDefs:eMt,treemapSeriesThemeableOptionsDef:iMt,without:sMt}=tMt._ModuleSupport,pf={...iMt,...sMt(eMt,["highlightStyle"]),type:(0,zi.required)((0,zi.constant)("treemap")),labelKey:zi.string,secondaryLabelKey:zi.string,childrenKey:zi.string,sizeKey:zi.string,colorKey:zi.string,sizeName:zi.string,colorName:zi.string};pf.fillGradientDefaults=(0,zi.undocumented)(zi.fillGradientDefaults),pf.fillPatternDefaults=(0,zi.undocumented)(zi.fillPatternDefaults),pf.fillImageDefaults=(0,zi.undocumented)(zi.fillImageDefaults),pf.undocumentedGroupFills=(0,zi.undocumented)((0,zi.arrayOf)(zi.color)),pf.undocumentedGroupStrokes=(0,zi.undocumented)((0,zi.arrayOf)(zi.color));var{FONT_SIZE_RATIO:UK}=rO._ModuleSupport,nMt={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:t=>new hk(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:rO._ModuleSupport.FILL_PATTERN_DEFAULTS,fillImageDefaults:rO._ModuleSupport.FILL_IMAGE_DEFAULTS,undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.5]},minimumFontSize:{$rem:[UK.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:[UK.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}}},aMt={type:"series",name:"treemap",chartType:"hierarchy",enterprise:!0,options:pf,create:t=>new hk(t)},aDt=ult._ModuleSupport.ModuleRegistry,oMt=[xlt,aH,SH,sft,Cft,NH,_H,qH,oU,dU],rMt=[blt,vlt,Slt,Mlt,sbt,fvt,Mvt,oSt,SSt],lMt=[Tlt,cgt,D0t],cMt=[Rlt,rmt,qSt],hMt=[Vlt,j0t,aMt],uMt=[Ylt,Cbt],dMt=[ect,Rmt,qmt,Iyt,Zyt,fxt],pMt=[...oMt,...rMt,...lMt,...cMt,...hMt,...uMt,...dMt,Opt,_pt,Ept],gMt=(E(),w(_)),$K=(E(),w(_)),oDt=(E(),w(_)),KK={xMin:Rs,xMax:kn,yMin:$n,yMax:Kn,span:Aa},fMt=1e3,mMt=5;function YK(t,e){return Array.from({length:t},(i,s)=>{const n=s*Aa,a=e[n+Rs],o=e[n+kn];return(a+o)/2|0})}function yMt(t,e,i){if(t.length<fMt)return;const[s,n]=hx(i);let a=cx(t,mMt),{indexData:o,valueData:r}=ux(t,e,e,s,n,a),l=YK(a,o);const c=[{maxRange:a,indexData:o,indices:l,indexes:KK}];for(;a>64;)({indexData:o,valueData:r,maxRange:a}=dx(o,r,a)),l=YK(a,o),c.push({maxRange:a,indexData:o,indices:l,indexes:KK});return c.reverse(),c}var{ChartAxisDirection:xMt,ContinuousScale:bMt,DiscreteTimeScale:vMt}=$K._ModuleSupport,SMt=class extends $K._ModuleSupport.BarSeries{aggregateData(t,e){if(e?.type!=="ungrouped")return;const i=this.axes[xMt.X];if(i==null||!(bMt.is(i.scale)||vMt.is(i.scale)))return;const s=t.resolveKeysById(this,"xValue",e),n=t.resolveColumnById(this,"yValue-raw",e),{index:a}=t.resolveProcessedDataDefById(this,"xValue"),o=e.domain.keys[a];return yMt(s,n,o)}},{BarSeriesModule:MMt}=gMt._ModuleSupport,DMt={...MMt,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new SMt(t)},kMt=(E(),w(_)),ZK=(E(),w(_)),rDt=(E(),w(_)),IMt=1e3,XK=10;function qK(t,e,i,s,n,a){const o=t[a];if(o==null)return!1;const r=HM(o,e,i),l=UM(r,n);return a===s[l+Rs]||a===s[l+kn]||a===s[l+$n]||a===s[l+Kn]}function AMt(t,e,i){if(t.length<IMt)return;const[s,n]=hx(i);let a=cx(t,XK);const{indexData:o,valueData:r}=ux(t,e,e,s,n,a);let l=[];for(let h=0;h<t.length;h+=1)qK(t,s,n,o,a,h)&&l.push(h);const c=[{maxRange:a,indices:l}];for(;l.length>XK&&a>64;)({maxRange:a}=dx(o,r,a,{inPlace:!0})),l=l.filter(qK.bind(null,t,s,n,o,a)),c.push({maxRange:a,indices:l});return c.reverse(),c}var{ChartAxisDirection:CMt,ContinuousScale:LMt,DiscreteTimeScale:wMt}=ZK._ModuleSupport,TMt=class extends ZK._ModuleSupport.LineSeries{aggregateData(t,e){const i=this.axes[CMt.X];if(i==null||!(LMt.is(i.scale)||wMt.is(i.scale)))return;const s=t.resolveColumnById(this,"xValue",e),n=t.resolveColumnById(this,"yValueRaw",e),a=t.getDomain(this,"xValue","value",e);return AMt(s,n,a)}},{LineSeriesModule:NMt}=kMt._ModuleSupport,OMt={...NMt,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new TMt(t)},_Mt=`.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:var(--ag-charts-chrome-font-size-large)}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:calc(var(--ag-charts-spacing) * 2)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-chrome-subtle-text-color);margin-bottom:-1px;padding:var(--input-padding) calc(var(--input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:var(--ag-charts-accent-color);color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-spacing) * -2)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-spacing) * 4);margin:0 calc(var(--ag-charts-spacing) * 4);padding:calc(var(--ag-charts-spacing) * 4) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:16px 18px;flex-wrap:wrap}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-dialog__input-group-label{color:var(--ag-charts-chrome-subtle-text-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-button-focus-background-color);border-color:var(--ag-charts-input-focus-border-color);color:var(--ag-charts-input-focus-text-color);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:calc(var(--ag-charts-border-radius) * 1.5);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:var(--ag-charts-border-radius);overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-accent-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:calc(var(--ag-charts-border-radius) / 2);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{border-top-left-radius:0;border-top-right-radius:0;.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;min-width:34px;text-align:center}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__stroke-width-button:before{background:var(--ag-charts-foreground-color);content:"";margin-right:var(--toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__axis-button--hidden{display:none}.ag-charts-annotations__axis-button{background-color:var(--ag-charts-crosshair-label-background-color);border-radius:calc(var(--ag-charts-border-radius) / 2);border:none;box-sizing:border-box;color:var(--ag-charts-crosshair-label-text-color);cursor:pointer;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);left:0;line-height:16px;overflow:hidden;padding:0;position:absolute;top:0;user-select:none;white-space:nowrap;z-index:var(--ag-charts-layer-annotations)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-background-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--textarea-line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{font-family:var(--ag-charts-chrome-font-family);font-size:calc(var(--ag-charts-chrome-font-size) * (13 / 12));font-weight:var(--ag-charts-chrome-font-weight);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{background:var(--ag-charts-chrome-background-color);border-radius:var(--ag-charts-border-radius);border:var(--ag-charts-border);box-shadow:var(--ag-charts-shadow);color:var(--ag-charts-chrome-text-color);display:table;flex-direction:column;padding:.5em 0;transition:transform .1s ease;white-space:nowrap}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{align-items:center;background:none;border:none;box-sizing:border-box;color:inherit;display:table-row;font:inherit;justify-content:space-between;text-align:left;width:100%;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__icon>img{width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size)}.ag-charts-context-menu__icon,.ag-charts-context-menu__label,.ag-charts-context-menu__rightarrowhead{display:table-cell;vertical-align:middle}.ag-charts-context-menu__cellpadding{padding:.5em 1em}.ag-charts-context-menu__icon{padding-right:0}.ag-charts-context-menu__item[data-focus-override=true],.ag-charts-context-menu__item:focus,.ag-charts-context-menu__item:active{background:var(--ag-charts-focus-color)}.ag-charts-context-menu__item[data-focus-visible-override=true]:focus,.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[data-focus-visible-override=false]{outline:inherit;box-shadow:inherit;z-index:inherit}.ag-charts-context-menu__item[aria-disabled=true]{border:none;color:color-mix(in srgb,var(--ag-charts-input-text-color) 50%,transparent);text-align:left}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{display:table-row}.ag-charts-context-menu__divider>div{padding:5px 0}.ag-charts-context-menu__divider>div:after{content:"";display:block;border-top:1px solid #babfc7}.ag-charts-context-menu__divider.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-font-size);font-weight:var(--ag-charts-font-weight);overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:calc(var(--ag-charts-border-radius) / 2);line-height:calc(var(--ag-charts-font-size) + 8px);background-color:var(--ag-charts-crosshair-label-background-color);color:var(--ag-charts-crosshair-label-text-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{--placeholder-text-color: var(--ag-charts-input-placeholder-text-color);display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--placeholder-text-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--toolbar-button-padding) calc(var(--toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:44px;justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--toolbar-size: 24px;--toolbar-button-padding: 1px;display:flex;font-size:var(--ag-charts-chrome-font-size);height:var(--toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__label{padding-left:var(--ag-charts-spacing);padding-right:var(--ag-charts-spacing)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}.ag-charts-toolbar__button--gap{margin-left:var(--toolbar-gap)}&.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}}.ag-charts-shared-toolbar{gap:var(--toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-border-radius);margin:0}}
`;bg._ModuleSupport.ModuleRegistry.registerMany(pMt);function QK(){bg._ModuleSupport.moduleRegistry.register(Qtt,oet,Bet,jat,Yat,DMt,Tot,Uct,Oht,lgt,ift,Aft,dut,tot,oot,dot,pot,Cot,omt,OMt,Pmt,Xmt,kyt,Yyt,gxt,Xot,yrt,llt,aut,ibt,uet,gvt,Svt,aSt,vSt,Oet,XSt,Ret,Gdt,adt,nrt,Abt,M0t,ort,F0t,Srt,nMt,Mpt,Xrt),bg._ModuleSupport.enterpriseModule.isEnterprise=!0,bg._ModuleSupport.enterpriseModule.styles=_Mt,bg._ModuleSupport.enterpriseModule.licenseManager=t=>new xg(t.container?.ownerDocument??(typeof document>"u"?void 0:document)),bg._ModuleSupport.enterpriseModule.injectWatermark=hlt}Ctt(ww,(E(),w(_)),vo.exports),QK();var EMt={setLicenseKey(t){xg.setLicenseKey(t)}};function JK(){QK(),(0,Nl.setupCommunityModules)()}var PMt={VERSION:Nl.VERSION,_Scene:Nl._Scene,_Theme:Nl._Theme,_Util:Nl._Util,create:Nl.AgCharts.create.bind(Nl.AgCharts),createSparkline:Nl.AgCharts.__createSparkline.bind(Nl.AgCharts),setup:JK,setGridContext:xg.setGridContext.bind(xg),setLicenseKey:xg.setLicenseKey.bind(xg),isEnterprise:!0};if(typeof vo.exports=="object"&&typeof ff=="object"){var RMt=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Object.getOwnPropertyNames(e))!Object.prototype.hasOwnProperty.call(t,n)&&n!==i&&Object.defineProperty(t,n,{get:()=>e[n],enumerable:!(s=Object.getOwnPropertyDescriptor(e,n))||s.enumerable});return t};vo.exports=RMt(vo.exports,ff)}return vo.exports});
