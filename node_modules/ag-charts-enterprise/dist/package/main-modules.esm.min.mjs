var hd=Object.defineProperty,ud=Object.getOwnPropertyDescriptor,h=(e,t,i,s)=>{for(var o=s>1?void 0:s?ud(t,i):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(o=(s?r(t,i,o):r(o))||o);return s&&o&&hd(t,i,o),o};import{_ModuleSupport as dd}from"ag-charts-community";import{_ModuleSupport as fd}from"ag-charts-community";import"ag-charts-core";import{_ModuleSupport as gd}from"ag-charts-community";import{isNumberEqual as Kn}from"ag-charts-core";function da(e,t,i){const s=(a,r,n,l)=>{let c=e[0];for(let p=a;n>0?p<=r:p>r;p+=n){const u=e[p];if(l(c,u))return!0;c=u}return!1},o=Math.floor(e.length/2);return s(t,o,t,i)?!0:s(e.length-t,o,-t,i)}import{_ModuleSupport as yd}from"ag-charts-community";var{AxisInterval:md,Property:Sd}=yd,fa=class extends md{};h([Sd],fa.prototype,"minSpacing",2);import{_ModuleSupport as Fs}from"ag-charts-community";import{countFractionDigits as xd,isNumberEqual as Li}from"ag-charts-core";import{_ModuleSupport as zn}from"ag-charts-community";import{isArray as Dd,isNumberEqual as $n}from"ag-charts-core";import{_ModuleSupport as bd}from"ag-charts-community";import{createId as vd}from"ag-charts-core";var{BaseProperties:Hn,ChartAxisDirection:kd,Property:Ae,Group:ga}=bd,bt=class extends Hn{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};h([Ae],bt.prototype,"enabled",2),h([Ae],bt.prototype,"text",2),h([Ae],bt.prototype,"fontStyle",2),h([Ae],bt.prototype,"fontWeight",2),h([Ae],bt.prototype,"fontSize",2),h([Ae],bt.prototype,"fontFamily",2),h([Ae],bt.prototype,"padding",2),h([Ae],bt.prototype,"color",2),h([Ae],bt.prototype,"parallel",2);var Je=class extends Hn{constructor(){super(...arguments),this.id=vd(this),this.defaultColorRange=[],this.shape="polygon",this.label=new bt,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=kd.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new ga({name:this.id}),this.rangeGroup=new ga({name:this.id}),this.labelGroup=new ga({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){e.fill=this.fill,e.fillOpacity=this.fillOpacity??1,e.stroke=this.stroke,e.strokeOpacity=this.strokeOpacity??1,e.strokeWidth=this.strokeWidth??1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,s,o){const{label:a}=this;e.x=t,e.y=i,e.text=a.text,e.textAlign="center",e.textBaseline=s,e.rotation=o,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=a.color,e.fontFamily=a.fontFamily,e.fontSize=a.fontSize,e.fontStyle=a.fontStyle,e.visible=!0}};h([Ae],Je.prototype,"enabled",2),h([Ae],Je.prototype,"type",2),h([Ae],Je.prototype,"range",2),h([Ae],Je.prototype,"value",2),h([Ae],Je.prototype,"defaultColorRange",2),h([Ae],Je.prototype,"fill",2),h([Ae],Je.prototype,"fillOpacity",2),h([Ae],Je.prototype,"stroke",2),h([Ae],Je.prototype,"strokeWidth",2),h([Ae],Je.prototype,"strokeOpacity",2),h([Ae],Je.prototype,"lineDash",2),h([Ae],Je.prototype,"shape",2),h([Ae],Je.prototype,"label",2);var{ChartAxisDirection:Md,getCrossLineValue:Xn,validateCrossLineValue:Id,normalizeAngle360:ya,Group:Ad,Path:Yn,Sector:Nd,RotatableText:Pd,ContinuousScale:Ld}=zn,ma=class extends Je{constructor(){super(),this.direction=Md.Angle,this.polygonNode=new Yn,this.sectorNode=new Nd,this.lineNode=new Yn,this.crossLineRange=new Ad,this.labelNode=new Pd,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!Ld.is(this.scale))return!0;const[e,t]=this.scale.domain,i=Xn(this);if(Dd(i)){const[s,o]=i;return s>=e&&s<=t&&o>=s&&o<=t}else return i>=e&&i<=t}update(e){const{scale:t}=this;if(!t||!Id(Xn(this),t)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){const{scale:t,type:i,value:s,lineNode:o}=this;if(!e||i!=="line"||!t){o.visible=!1;return}const a=t.convert(s);if(isNaN(a)){o.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:n}=this;o.visible=!0,o.stroke=this.stroke,o.strokeOpacity=this.strokeOpacity??1,o.strokeWidth=this.strokeWidth??1,o.fill=void 0,o.lineDash=this.lineDash;const l=n*Math.cos(a),c=n*Math.sin(a),p=r*Math.cos(a),u=r*Math.sin(a);o.path.clear(!0),o.path.moveTo(p,u),o.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){const{polygonNode:t,range:i,scale:s,shape:o,type:a,ticks:r}=this;if(!e||a!=="range"||o!=="polygon"||!s||!i){t.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:l}=this,c=r.indexOf(i[0]),p=r.indexOf(i[1]),d=(c<=p?r.slice(c,p+1):r.slice(c).concat(r.slice(0,p+1))).map(y=>s.convert(y));t.visible=!0,this.setSectorNodeProps(t);const{path:f}=t;f.clear(!0),d.forEach((y,g)=>{const m=l*Math.cos(y),S=l*Math.sin(y);g===0?f.moveTo(m,S):f.lineTo(m,S)}),n===0?f.lineTo(0,0):d.slice().reverse().forEach(y=>{const g=n*Math.cos(y),m=n*Math.sin(y);f.lineTo(g,m)}),t.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){const{sectorNode:t,range:i,scale:s,shape:o,type:a}=this;if(!e||a!=="range"||o!=="circle"||!s||!i){t.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:n}=this,l=i.map(u=>s.convert(u)),c=s.step??0,p=s instanceof zn.BandScale?c/2:0;t.visible=!0,this.setSectorNodeProps(t),t.centerX=0,t.centerY=0,t.innerRadius=r,t.outerRadius=n,t.startAngle=l[0]-p,t.endAngle=l[1]+p,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:s,scale:o,type:a,ticks:r}=this;if(!e||t.enabled===!1||!t.text||!o||a==="range"&&!s){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:n,axisOuterRadius:l}=this;let c,p,u,d;if(a==="line"){const f=ya(o.convert(this.value)),y=1.5*Math.PI,g=$n(f,y)||f>y||f<Math.PI/2,m=(n+l)/2*Math.cos(f),S=(n+l)/2*Math.sin(f);c=m+t.padding*Math.cos(f+Math.PI/2),p=S+t.padding*Math.sin(f+Math.PI/2),d=g?"top":"bottom",u=g?f:f-Math.PI}else{const[f,y]=s.map(D=>ya(o.convert(D)));let g=(f+y)/2;f>y&&(g-=Math.PI),g=ya(g);const m=($n(g,0)||g>0)&&g<Math.PI;let S;this.shape==="circle"||r.length<3?S=l-t.padding:S=l*Math.cos(Math.PI/r.length)-t.padding,c=S*Math.cos(g),p=S*Math.sin(g),d=m?"bottom":"top",u=m?g-Math.PI/2:g+Math.PI/2}this.setLabelNodeProps(i,c,p,d,u)}};ma.className="AngleCrossLine";var{ChartAxisDirection:Rd,TextWrapper:Td,TextUtils:Od,Property:Sa,toRadians:Qi,normalizeAngle360:qt,normalizeAngle360Inclusive:Cd,Path:wd,RotatableText:Fd,Transformable:Bd,BBox:_d,Selection:qn,Line:Un}=Fs,xa=class extends Fs.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};h([Sa],xa.prototype,"orientation",2);var es=class extends Fs.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=qn.select(this.tickLineGroup,Un,!1),this.gridLineGroupSelection=qn.select(this.gridLineGroup,Un,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new Fs.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new wd),this.includeInvisibleDomains=!0}get direction(){return Rd.Angle}createLabel(){return new xa}calculateRotations(){const e=Qi(this.startAngle),t=qt(e),i=qt(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}calculateTickLayout(e){const{nice:t,scale:i}=this,s={nice:t,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},o=t?i.niceDomain(s,e):e,a=this.generateAngleTicks(o);this.tickData=a;const r=a.map(l=>l.value),n=r.reduce((l,c)=>Math.max(typeof c=="number"?xd(c):0,l),0);return{niceDomain:o,tickDomain:o,ticks:r,rawTickCount:void 0,fractionDigits:n,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const e=qt(-Math.PI/2+Qi(this.startAngle)),t=this.endAngle!=null?Cd(Qi(this.endAngle)-Qi(this.startAngle)):2*Math.PI,i=e+t;return[e,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const e=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?e:[]),this.tickLineGroupSelection.update(this.tick.enabled?e:[]),this.tickLabelGroupSelection.update(this.label.enabled?e:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:e,radiusLineGroup:t}=this,i=Math.floor(e.x),s=Math.floor(e.y);t.translationX=i,t.translationY=s}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:o,y:a,moveTo:r,arc:n,radius:l=0,startAngle:c=0,endAngle:p=0})=>{n?t.arc(o,a,l,c,p):r?t.moveTo(o,a):t.lineTo(o,a)}),s&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[s,o]=this.range,a=Li(o-s,2*Math.PI),r=[];if(t==="circle")a?r.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):r.push({x:i*Math.cos(s),y:i*Math.sin(s),moveTo:!0},{x:0,y:0,radius:i,startAngle:qt(s),endAngle:qt(o),arc:!0,moveTo:!1});else if(t==="polygon"){const n=e.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>e.convert(l));n&&n.length>2&&n.forEach((l,c)=>{const p=i*Math.cos(l),u=i*Math.sin(l),d=c===0;r.push({x:p,y:u,moveTo:d})})}return{points:r,closePath:a}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{style:i,width:s},innerRadiusRatio:o}=this;if(!(i&&t>0))return;const a=t*o,r=i.length;this.gridLineGroupSelection.each((n,l,c)=>{const{value:p}=l,{stroke:u,lineDash:d}=i[c%r],f=e.convert(p);n.x1=a*Math.cos(f),n.y1=a*Math.sin(f),n.x2=t*Math.cos(f),n.y2=t*Math.sin(f),n.stroke=u,n.strokeWidth=s,n.lineDash=d,n.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this;t.each((i,s,o)=>{const a=this.labelData[o];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(e),i.fill=e.color,i.x=a.x,i.y=a.y,i.textAlign=a.textAlign,i.textBaseline=a.textBaseline,i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:s}=this;s.each((o,a)=>{const{value:r}=a,n=e.convert(r),l=Math.cos(n),c=Math.sin(n);o.x1=t*l,o.y1=t*c,o.x2=(t+i.size)*l,o.y2=(t+i.size)*c,o.stroke=i.stroke,o.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:s,gridLength:o,scale:a,tick:r}=this;if(!s.enabled)return[];const n=new Fd,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,p=e.map((u,d)=>{const{value:f}=u,y=o+s.spacing+r.size,g=a.convert(f),m=Math.cos(g),S=Math.sin(g),D=y*m,x=y*S,{textAlign:k,textBaseline:I}=this.getLabelAlign(g),L=d===e.length-1&&f!==e[0]&&Li(qt(g),qt(a.convert(e[0]))),b=this.getLabelRotation(g);let v=this.formatTick(f,d,a.domain);n.text=v,n.x=D,n.y=x,n.setFont(s),n.textAlign=k,n.textBaseline=I,n.rotation=b,b&&(n.rotationCenterX=D,n.rotationCenterY=x);let N=b?Bd.toCanvas(n):n.getBBox();if(N&&t.hideWhenNecessary&&!b){const M=l-N.x,R=N.x+N.width-c,A=1;if(M>A||R>A){const P=N.width-Math.max(M,R);v=Td.wrapText(v,{maxWidth:P,font:s,textWrap:"never"}),v===Od.EllipsisChar&&(v=""),n.text=v,N=n.getBBox()}}return{text:v,x:D,y:x,textAlign:k,textBaseline:I,hidden:v===""||u.hidden||L,rotation:b,box:N}});return s.avoidCollisions&&this.avoidLabelCollisions(p),p}computeLabelsBBox(e,t){this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:_d.merge(i)}getLabelOrientation(){const{label:e}=this;return e instanceof xa?e.orientation:"fixed"}getLabelRotation(e){let t=Qi(this.label.rotation??0);e=qt(e);const i=this.getLabelOrientation();return i==="parallel"?(t+=e,e>=0&&e<Math.PI?t-=Math.PI/2:t+=Math.PI/2):i==="perpendicular"&&(t+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(t+=Math.PI)),t}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let s,o;const a=this.getLabelOrientation(),r=Li(t,0),n=Li(i,0),l=Li(t,1),c=Li(i,-1),p=t>0&&!r,u=i>0&&!n;return a==="parallel"?(s="center",o=l&&n||u?"top":"bottom"):a==="perpendicular"?(s=c||p?"left":"right",o="middle"):(s="right",r?s="center":p&&(s="left"),o="bottom",n?o="middle":u&&(o="top")),{textAlign:s,textBaseline:o}}updateCrossLines(){const{shape:e,gridLength:t,innerRadiusRatio:i}=this;this.crossLines.forEach(s=>{s instanceof ma&&(s.ticks=this.tickData.map(o=>o.value),s.shape=e,s.axisOuterRadius=t,s.axisInnerRadius=t*i)}),super.updateCrossLines()}};es.CrossLineConstructor=ma,h([Sa],es.prototype,"startAngle",2),h([Sa],es.prototype,"endAngle",2);var{Property:Da,CategoryScale:Ed}=gd,ni=class extends es{constructor(e){super(e,new Ed),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new fa}generateAngleTicks(){const{scale:e,gridLength:t}=this,{values:i,minSpacing:s}=this.interval,o=i??e.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks??[];if(o.length<2||s==null)return o.map(c=>({value:c,visible:!0}));const a=o[0],r=e.convert(a),n=t*Math.cos(r),l=t*Math.sin(r);for(let c=1;c<o.length-1;c++){const p=o[c],u=e.convert(p);if(u-r>Math.PI)break;const d=t*Math.cos(u),f=t*Math.sin(u);if(Math.sqrt((d-n)**2+(f-l)**2)>s){const g=new Set([a]);return da(o,c,(m,S)=>{g.add(S)}),o.map(m=>{const S=g.has(m);return{value:m,visible:S}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(e){const{minSpacing:t}=this.label;if(e.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(t==null)return l.box.collidesBBox(c.box);const p=l.box.clone().grow(t/2),u=c.box.clone().grow(t/2);return p.collidesBBox(u)},s=e[0],o=e.at(-1),a=new Set([s]),r=Kn(s.x,o.x)&&Kn(s.y,o.y),n=Math.floor(e.length/2);for(let l=1;l<=n;l++){const c=r?e.slice(0,-1):e;if(!da(c,l,i)){da(c,l,(u,d)=>{a.add(d)});break}}e.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};ni.className="AngleCategoryAxis",ni.type="angle-category",h([Da],ni.prototype,"groupPaddingInner",2),h([Da],ni.prototype,"paddingInner",2),h([Da],ni.prototype,"interval",2);import{_ModuleSupport as Gd}from"ag-charts-community";import{isNumberEqual as jn}from"ag-charts-core";import{_ModuleSupport as Wd}from"ag-charts-community";import{isNumberEqual as Vd}from"ag-charts-core";var{range:Jn,isDenseInterval:Kd,LinearScale:ba}=Wd,Zn=class Vn extends ba{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(t,i){const[s,o]=i;let a=ba.getTickStep(s,o,t);const r=isNaN(t.maxTickCount)?1/0:t.maxTickCount,n=Math.abs(o-s)/a;let l=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return l>r&&(l/=2,a*=2),{count:l,step:a}}ticks(t,i=this.domain){const{arcLength:s}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||s<=0)return{ticks:[],count:0};const{nice:o,interval:a}=t,[r,n]=i;if(a){const c=Math.abs(a),p=this.getPixelRange();if(!Kd((n-r)/c,p))return Jn(r,n,c)}let l;if(o&&this.hasNiceRange()){const c=super.niceDomain(t,i);l=Vn.getNiceStepAndTickCount(t,c).step}else l=ba.getTickStep(r,n,t);return Jn(r,n,l)}hasNiceRange(){const t=this.range.slice().sort((s,o)=>s-o);return[Math.PI,2*Math.PI].some(s=>Vd(s,t[1]-t[0]))}niceDomain(t,i=this.domain){const s=super.niceDomain(t,i);if(!this.hasNiceRange())return s;const o=s[0]>s[1],a=o?s[1]:s[0],{step:r,count:n}=Vn.getNiceStepAndTickCount(t,s),l=1/r,c=r>=1?Math.ceil(a/r+n)*r:Math.ceil((a+n*r)*l)/l;return o?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{Property:va,angleBetween:zd,normalisedExtentWithMetadata:$d,findMinMax:Hd}=Gd,Ri=class extends es{constructor(e){super(e,new Zn),this.shape="circle",this.interval=new fa}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:o}=$d(e,t,i);return{domain:s,clipped:o}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),s=zd(t,i)||2*Math.PI,o=this.gridLength;return s*o}generateAngleTicks(e){const{scale:t,range:i,nice:s}=this,{values:o,step:a,minSpacing:r,maxSpacing:n}=this.interval;let l;if(o==null){const{arcLength:c}=t,p=n?Math.floor(c/n):1,u=r?Math.floor(c/r):1/0,d=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),f=Math.max(p,Math.min(u,d)),y={nice:s,interval:a,tickCount:f,minTickCount:p,maxTickCount:u};l=t.ticks(y,e)?.ticks??[]}else{const[c,p]=Hd(e.map(Number));l=o.filter(u=>u>=c&&u<=p).sort((u,d)=>u-d)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(e){const{minSpacing:t}=this.label,i=(a,r)=>{if(a.hidden||r.hidden)return!1;if(t==null)return a.box.collidesBBox(r.box);const n=a.box.clone().grow(t/2),l=r.box.clone().grow(t/2);return n.collidesBBox(l)},s=e[0],o=e.at(-1);s!==o&&jn(s.x,o.x)&&jn(s.y,o.y)&&(o.hidden=!0);for(let a=1;a<e.length;a*=2){let r=!1;for(let n=a;n<e.length;n+=a){const l=e[n],c=e[n-a];if(i(c,l)){r=!0;break}}if(!r){e.forEach((n,l)=>{l%a>0&&(n.hidden=!0,n.box=void 0)});return}}e.forEach((a,r)=>{r>0&&(a.hidden=!0,a.box=void 0)})}};Ri.className="AngleNumberAxis",Ri.type="angle-number",h([va],Ri.prototype,"min",2),h([va],Ri.prototype,"max",2),h([va],Ri.prototype,"interval",2);import{_ModuleSupport as Qn}from"ag-charts-community";var{OrdinalTimeScale:Xd,Property:Yd,TimeAxisParentLevel:qd}=Qn,Bs=class extends Qn.CategoryAxis{constructor(e){super(e,new Xd),this.parentLevel=new qd}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}};Bs.className="OrdinalTimeAxis",Bs.type="ordinal-time",h([Yd],Bs.prototype,"parentLevel",2);import{_ModuleSupport as Ud}from"ag-charts-community";import{_ModuleSupport as _s}from"ag-charts-community";import{isNumberEqual as jd}from"ag-charts-core";import{_ModuleSupport as el}from"ag-charts-community";import{clamp as tl,isNumberEqual as Jd}from"ag-charts-core";var{ChartAxisDirection:Zd,Property:Qd,getCrossLineValue:ef,validateCrossLineValue:tf,normalizeAngle360FromDegrees:sf,Group:of,Path:af,Sector:rf,RotatableText:nf}=el,il=class extends bt{constructor(){super(...arguments),this.positionAngle=void 0}};h([Qd],il.prototype,"positionAngle",2);var ka=class extends Je{constructor(){super(),this.direction=Zd.Radius,this.label=new il,this.polygonNode=new af,this.sectorNode=new rf,this.crossLineRange=new of,this.labelNode=new nf,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t}=this;if(!t||!tf(ef(this),t)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:s}=this;e&&(e=i>=this.axisInnerRadius&&s<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:s,axisOuterRadius:o}=this;if(!t)return{innerRadius:0,outerRadius:0};const a=l=>o+s-l;let r,n;if(i==="line")r=a(t.convert(this.value)),n=r;else{const l=Math.abs(t?.bandwidth??0),c=e.map(p=>t.convert(p));r=a(Math.max(...c)),n=a(Math.min(...c))+l}this.outerRadius=r,this.innerRadius=n}drawPolygon(e,t,i){t.forEach((s,o)=>{const a=e*Math.cos(s),r=e*Math.sin(s);o===0?i.path.moveTo(a,r):i.path.lineTo(a,r)}),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:s,shape:o,type:a,innerRadius:r,outerRadius:n}=this;if(!e||o!=="polygon"||!s||!t){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(n-l,t,i);const c=t.slice().reverse(),p=a==="line"?n-l:r+l;this.drawPolygon(p,c,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:s,sectorNode:o,shape:a,innerRadius:r,outerRadius:n}=this;if(!e||a!=="circle"||!s){o.visible=!1;return}o.visible=!0,o.startAngle=0,o.endAngle=2*Math.PI;const l=this.getPadding(),c=tl(t,r+l,i),p=tl(t,n-l,i);o.innerRadius=Math.min(c,p),o.outerRadius=Math.max(c,p),this.setSectorNodeProps(o)}updateLabelNode(e){const{innerRadius:t,label:i,labelNode:s,scale:o,shape:a,type:r}=this;if(!e||i.enabled===!1||!i.text||!o){s.visible=!1;return}const n=sf((i.positionAngle??0)-90),l=(Jd(n,0)||n>0)&&n<Math.PI,c=l?n-Math.PI/2:n+Math.PI/2;let p;const u=this.gridAngles??[];r==="line"?p=t+i.padding:a==="circle"||u.length<3?p=t-i.padding:p=t*Math.cos(Math.PI/u.length)-i.padding;const d=p*Math.cos(n),f=p*Math.sin(n);let y;r==="line"?y=l?"top":"bottom":y=l?"bottom":"top",this.setLabelNodeProps(s,d,f,y,c)}getPadding(){const{scale:e}=this;if(!e)return 0;const t=Math.abs(e.bandwidth??0),i=Math.abs(e.step??0);return e instanceof el.BandScale?(i-t)/2:0}};ka.className="RadiusCrossLine";var{ChartAxisDirection:lf,ZIndexMap:cf,Property:Ma,normalizeAngle360:sl,toRadians:pf,Caption:hf,Group:uf,TransformableGroup:ol,Path:df,Line:al,Selection:rl,AxisTickGenerator:ff,AxisGroupZIndexMap:gf}=_s,Ia=class extends _s.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};h([Ma],Ia.prototype,"autoRotate",2),h([Ma],Ia.prototype,"autoRotateAngle",2);var Es=class extends _s.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridLineGroupSelection=rl.select(this.gridLineGroup,al,!1),this.tickGenerator=new ff(this),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new ol({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new ol({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new al({name:`${this.id}-Axis-line`,zIndex:gf.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new uf({name:`${this.id}-gridPaths`,zIndex:cf.AXIS_GRID})),this.gridPathSelection=rl.select(this.gridPathGroup,df),this.headingLabelGroup.appendChild(this.title.caption.node),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return lf.Radius}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:s}=this,o=e*s,a=pf(i);return{translationX:t.x,translationY:t.y-e-o,rotation:a,rotationCenterX:0,rotationCenterY:e+o}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.setProperties(e),this.tickLabelGroup.setProperties(e),this.lineNodeGroup.setProperties(e),this.headingLabelGroup.setProperties(e)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(e,t,i){const o=-Math.PI/2,a=[0,1],r=this.label.getSideFlag(),n=r*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),l=this.tickGenerator.generateTicks({domain:e,niceMode:t,visibleRange:a,primaryTickCount:void 0,parallelFlipRotation:0,regularFlipRotation:o,labelX:n,sideFlag:r,removeOverflowLabels:!1}),{tickData:c}=l,{ticks:p,rawTicks:u,rawTickCount:d,tickDomain:f,fractionDigits:y,niceDomain:g=e}=c,m=p.map(S=>this.getTickLabelProps(S,l));return this.generatedTicks={ticks:p,labels:m},{ticks:u,tickDomain:f,niceDomain:g,rawTickCount:d,fractionDigits:y,timeInterval:void 0}}updateSelections(){const{generatedTicks:e}=this;if(!e)return;const{ticks:t,labels:i}=e;this.gridLineGroupSelection.update(this.gridLength?t:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(t):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const e=_s.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.fill,t.fontFamily=i.fontFamily,t.fontSize=i.fontSize,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.setProperties(e(t,i))})}updateGridLines(){const{gridLine:{style:e,width:t},shape:i,generatedTicks:s}=this;if(!e||!s)return;const o=e.length,a=(d,f)=>{const{stroke:y,lineDash:g}=e[f%o];d.stroke=y,d.strokeWidth=t,d.lineDash=g,d.fill=void 0},[r,n]=this.gridRange??[0,2*Math.PI],l=jd(n-r,2*Math.PI),u=i==="circle"?(d,f)=>{const{path:y}=d;y.clear(!0);const g=this.getTickRadius(f);l?(y.moveTo(g,0),y.arc(0,0,g,0,2*Math.PI)):(y.moveTo(g*Math.cos(r),g*Math.sin(r)),y.arc(0,0,g,sl(r),sl(n))),l&&y.closePath()}:(d,f)=>{const{path:y}=d,g=this.gridAngles;if(y.clear(!0),!g||g.length<3)return;const m=this.getTickRadius(f);g.forEach((S,D)=>{const x=m*Math.cos(S),k=m*Math.sin(S);D===0?y.moveTo(x,k):y.lineTo(x,k),g.forEach((I,L)=>{const b=m*Math.cos(I),v=m*Math.sin(I);L===0?y.moveTo(b,v):y.lineTo(b,v)}),y.closePath()}),y.closePath()};this.gridPathSelection.each((d,f,y)=>{a(d,y),u(d,f)})}updateTitle(){const e=r=>r.defaultValue,{title:t,range:i}=this,{formatter:s=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let o=!1;const a=t.caption.node;t.enabled&&(o=!0,a.rotation=Math.PI/2,a.x=Math.floor((i[0]+i[1])/2),a.y=-hf.SMALL_PADDING,a.textAlign="center",a.textBaseline="bottom",a.text=this.callWithContext(s,this.getTitleFormatterParams(this.scale.domain))),a.visible=o}updateCrossLines(){this.crossLines.forEach(e=>{if(e instanceof ka){const{shape:t,gridAngles:i,range:s,innerRadiusRatio:o}=this,a=s[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=a,e.axisInnerRadius=a*o}}),super.updateCrossLines()}createLabel(){return new Ia}getTickLabelProps(e,t){const{label:i}=this,{rotation:s,textBaseline:o,textAlign:a}=t,r=this.scale.range,n=e.tickLabel??"",c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),p=n!==""&&n!=null,u=s;return{...this.getLabelStyles({value:e.tickLabel}),tickId:e.tickId,rotation:u,text:n,textAlign:a,textBaseline:o,visible:p,x:c,y:e.translationY,rotationCenterX:c,rotationCenterY:e.translationY,range:r}}};Es.CrossLineConstructor=ka,h([Ma],Es.prototype,"positionAngle",2);var{ProxyPropertyOnWrite:nl,Property:Aa,CategoryScale:ll}=Ud,li=class extends Es{constructor(e){super(e,new ll),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}normaliseDataDomain(e){return{domain:e,clipped:!1}}prepareGridPathTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,s=t.range[0],o=s*i;if(ll.is(t)){const a=t.domain,r=a.length-1-a.indexOf(e.tick);return r===0?o:t.inset+t.step*(r-.5)+t.bandwidth/2}else{const a=(s-o)/t.domain.length;return s-e.translationY+o-a/2}}};li.className="RadiusCategoryAxis",li.type="radius-category",h([Aa],li.prototype,"groupPaddingInner",2),h([nl("scale","paddingInner"),Aa],li.prototype,"paddingInner",2),h([nl("scale","paddingOuter"),Aa],li.prototype,"paddingOuter",2);import{_ModuleSupport as yf}from"ag-charts-community";var{Property:cl,normalisedExtentWithMetadata:mf,LinearScale:Sf}=yf,ts=class extends Es{constructor(e){super(e,new Sf),this.shape="polygon"}prepareGridPathTickData(e){const{scale:t}=this,i=t.domain[1];return e.filter(({tick:s})=>s!==i).sort((s,o)=>o.tick-s.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],s=i*this.innerRadiusRatio;return i-e.translationY+s}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:o}=mf(e,t,i);return{domain:s,clipped:o}}};ts.className="RadiusNumberAxis",ts.type="radius-number",h([cl],ts.prototype,"min",2),h([cl],ts.prototype,"max",2);var{ordinalTimeAxisOptionsDefs:xf,angleNumberAxisOptionsDefs:Df,angleCategoryAxisOptionsDefs:bf,radiusNumberAxisOptionsDefs:vf,radiusCategoryAxisOptionsDefs:kf}=fd,pl={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:xf,create:e=>new Bs(e)},hl={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:Df,create:e=>new Ri(e)},ul={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:bf,create:e=>new ni(e)},dl={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:vf,create:e=>new ts(e)},fl={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:kf,create:e=>new li(e)};import{_ModuleSupport as Mf}from"ag-charts-community";import{_ModuleSupport as If}from"ag-charts-community";var{Chart:Af,Property:Nf}=If;function Pf(e){return e.type==="sankey"||e.type==="chord"}var Gs=class extends Af{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const e=this.getOptions();this.nodes!==e.nodes&&(this.nodes=e.nodes);const{nodes:t}=this;this.series.forEach(i=>{Pf(i)&&i.setChartNodes(t)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o,t.visible=this.series.some(a=>a.visible);for(const a of[t,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:o,paddedRect:o}})}};Gs.className="FlowProportionChart",Gs.type="flow-proportion",h([Nf],Gs.prototype,"nodes",2);var{isAgFlowProportionChartOptions:Lf,flowProportionChartOptionsDefs:Rf}=Mf,gl={type:"chart",name:"flow-proportion",enterprise:!0,options:Rf,detect:Lf,create(e,t){return new Gs(e,t)}};import{_ModuleSupport as Tf}from"ag-charts-community";import{_ModuleSupport as Of}from"ag-charts-community";var{Chart:Cf}=Of,Na=class extends Cf{getChartType(){return"gauge"}performLayout(e){const{seriesRoot:t,annotationRoot:i,series:s,seriesArea:o}=this,{layoutBox:a}=e,r=a.clone();a.shrink(o.padding.toJson()),this.seriesRect=r.clone().translate(r.x-a.x,r.y-a.y),this.animationRect=a,t.visible=s.some(n=>n.visible);for(const n of[t,i])n.translationX=Math.floor(a.x),n.translationY=Math.floor(a.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:r,paddedRect:a}})}getAriaLabel(){const e=[],t=this.getCaptionText();t.length!==0&&e.push(t);for(const s of this.series)e.push(s.getCaptionText());const i=e.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};Na.className="GaugeChart",Na.type="gauge";var{isAgGaugeChartOptions:wf,gaugeChartOptionsDefs:Ff}=Tf,yl={type:"chart",name:"gauge",enterprise:!0,options:Ff,detect:wf,create(e,t){return new Na(e,t)}};import{_ModuleSupport as Bf}from"ag-charts-community";import{_ModuleSupport as _f}from"ag-charts-community";var{Chart:Ef}=_f,Pa=class extends Ef{getChartType(){return"hierarchy"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o;for(const a of[t,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);t.visible=this.series[0].visible,t.setClipRect(o.clone()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:o}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};Pa.className="HierarchyChart",Pa.type="hierarchy";var{isAgHierarchyChartOptions:Gf,hierarchyChartOptionsDefs:Wf}=Bf,ml={type:"chart",name:"hierarchy",enterprise:!0,options:Wf,detect:Gf,create(e,t){return new Pa(e,t)}};import{_ModuleSupport as Vf}from"ag-charts-community";import{_ModuleSupport as Kf}from"ag-charts-community";var{Chart:zf}=Kf,La=class extends zf{getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o;for(const a of[t,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:s}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};La.className="StandaloneChart",La.type="standalone";var{isAgStandaloneChartOptions:$f,standaloneChartOptionsDefs:Hf}=Vf,Sl={type:"chart",name:"standalone",enterprise:!0,options:Hf,detect:$f,create(e,t){return new La(e,t)}};import{_ModuleSupport as Xf}from"ag-charts-community";import{_ModuleSupport as Yf}from"ag-charts-community";var{Chart:qf,MercatorScale:xl,NumberAxis:Dl,Property:Uf}=Yf;function bl(e){return e.type==="map-shape"||e.type==="map-line"||e.type==="map-marker"||e.type==="map-shape-background"||e.type==="map-line-background"}var Ws=class extends qf{constructor(e,t){super(e,t),this.xAxis=new Dl(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new Dl(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const e=this.getOptions();this.topology!==e.topology&&(this.topology=e.topology);const{topology:t}=this;this.series.forEach(i=>{bl(i)&&i.setChartTopology(t)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o;const a=this.series.filter(bl),r=a.reduce((c,p)=>{if(!p.visible)return c;const u=p.topologyBounds;return u==null?c:c==null?u:(c.merge(u),c)},void 0);let n;if(r!=null){const{lon0:c,lat0:p,lon1:u,lat1:d}=r,f=[[c,p],[u,d]],y=xl.bounds(f),{width:g,height:m}=o,S=Math.min(g/y.width,m/y.height),D=y.width*S,x=y.height*S,k=(g-D)/2,I=(m-x)/2,L=k,b=I,v=k+D,N=I+x,M=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),R=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),A=(v-L)/(M.max-M.min),P=L-A*M.min,T=(N-b)/(1-R.min-(1-R.max)),w=b-T*(1-R.max);n=new xl(f,[[P,w],[P+A,w+T]])}a.forEach(c=>{c.scale=n});const l=this.series.some(c=>c.visible);t.visible=l;for(const c of[t,i])c.translationX=Math.floor(o.x),c.translationY=Math.floor(o.y),c.setClipRect(o.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:o,paddedRect:o}})}};Ws.className="TopologyChart",Ws.type="topology",h([Uf],Ws.prototype,"topology",2);var{isAgTopologyChartOptions:jf,topologyChartOptionsDefs:Jf}=Xf,vl={type:"chart",name:"topology",enterprise:!0,options:Jf,detect:jf,create(e,t){return new Ws(e,t)}};import{_ModuleSupport as Zf}from"ag-charts-community";import{_ModuleSupport as Qf}from"ag-charts-community";import{arrayOf as eg,arrayOfDefs as kl,boolean as ci,constant as Ml,number as pi,numberRange as tg,optionsDefs as Il,or as hi,positiveNumber as Ra,ratio as Vs,required as ig,string as vt,typeUnion as sg,union as og}from"ag-charts-core";var{annotationCalloutStylesDefs:ag,annotationNoteStylesDefs:rg,annotationTextStylesDef:ng,annotationCommentStylesDefs:lg,annotationMeasurerStylesDefs:Ta,annotationShapeStylesDefs:Al,annotationChannelTextDefs:cg,annotationCrossLineStyleDefs:Nl,annotationFibonacciStylesDefs:Pl,annotationLineStyleDefs:Ll,annotationLineTextDefs:pg,annotationDisjointChannelStyleDefs:hg,annotationParallelChannelStyleDefs:ug}=Qf,is=Il({__type:ig(Ml("date")),value:hi(vt,pi)},"a serializable date object"),Rl=hi(vt,pi,is),Oa=hi(Rl,Il({value:Rl,groupPercentage:tg(-1,1)})),Tl={...cg,label:vt},Wt={...pg,label:vt},ue={x:Oa,y:pi},dg=sg({line:{...Ll,start:ue,end:ue,text:Wt},"horizontal-line":{...Nl,value:Oa,text:Wt},"vertical-line":{...Nl,value:Oa,text:Wt},"disjoint-channel":{...hg,startHeight:Ra,endHeight:Ra,start:ue,end:ue,text:Tl},"parallel-channel":{...ug,height:Ra,start:ue,end:ue,text:Tl},"fibonacci-retracement":{...Pl,start:ue,end:ue,text:Wt,reverse:ci},"fibonacci-retracement-trend-based":{...Pl,start:ue,end:ue,endRetracement:ue,text:Wt,reverse:ci},callout:{...ag,start:ue,end:ue,text:vt},comment:{...lg,...ue,text:vt},note:{...rg,...ue,text:vt},text:{...ng,...ue,text:vt},arrow:{...Ll,text:Wt,start:ue,end:ue},"arrow-up":{...Al,...ue},"arrow-down":{...Al,...ue},"date-range":{...Ta,extendAbove:ci,extendBelow:ci,text:Wt,start:ue,end:ue},"price-range":{...Ta,extendLeft:ci,extendRight:ci,text:Wt,start:ue,end:ue},"date-price-range":{...Ta,text:Wt,start:ue,end:ue}},"an annotation initial state object"),fg={chartType:og("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:kl(dg),legend:kl({visible:ci,seriesId:vt,itemId:vt,legendItemName:vt},"legend state array"),zoom:{rangeX:{start:hi(pi,is),end:hi(pi,is)},rangeY:{start:hi(pi,is),end:hi(pi,is)},ratioX:{start:Vs,end:Vs},ratioY:{start:Vs,end:Vs},autoScaledAxes:eg(Ml("y"))}};import{_ModuleSupport as gg}from"ag-charts-community";import{array as yg,arrayOfDefs as mg,boolean as ss,callback as Sg,color as Ks,fontOptionsDef as xg,number as Ol,positiveNumber as ut,ratio as Dg,typeUnion as bg}from"ag-charts-core";import{_ModuleSupport as vg}from"ag-charts-community";import{_ModuleSupport as Ca}from"ag-charts-community";import"ag-charts-core";function kg(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function Mg(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}import{_ModuleSupport as Cl}from"ag-charts-community";import{Logger as Ig}from"ag-charts-core";var{ScalableGroup:Ag,Rect:os,Line:as,BBox:Ng,Selection:wl,applyShapeFillBBox:Pg}=Cl,Lg=class extends Ag{constructor(){super(),this.append([new os({tag:0}),new os({tag:2}),new os({tag:1}),new as({tag:3}),new as({tag:3}),new as({tag:4}),new as({tag:4})])}updateDatumStyles(e,t,i,s,o){const{bandwidth:a,scaledValues:{xValue:r,medianValue:n}}=e;let{minValue:l,q1Value:c,q3Value:p,maxValue:u}=e.scaledValues;(i&&!s||!i&&s)&&([u,p,c,l]=[l,c,p,u]);const d=(B,G,W,V)=>i?{y:B,x:G,width:V,height:W}:{x:B,y:G,width:W,height:V},f=(B,G,W)=>i?{y1:B,y2:G,x:W}:{x1:B,x2:G,y:W},y=(B,G,W)=>i?{x1:G,x2:W,y:B}:{x:B,y1:G,y2:W},g=(B,G,W,V)=>({x:B,y:G,width:W,height:V}=d(B,G,W,V),new Ng(B,G,W,V)),{fill:m,fillOpacity:S,stroke:D,strokeWidth:x,strokeOpacity:k,lineDash:I,lineDashOffset:L,cornerRadius:b,cap:v,whisker:N}=t,M=wl.select(this,os),[R]=M.selectByTag(0),[A]=M.selectByTag(2),[P]=M.selectByTag(1),T=M.selectByTag(3),w=M.selectByTag(4);N.strokeWidth>a&&(N.strokeWidth=a);const O=d(c,r,p-c,a);A.setProperties(O),R.setProperties(O),R.setProperties({cornerRadius:b});const F=Math.max(Math.round(n-x/2),c+x),E=Math.min(Math.round(n+x/2),p-x);P.setProperties(O),P.setProperties({visible:F<E,cornerRadius:b,clipBBox:g(F,r+x,E-F,Math.max(0,a-x*2))});const C=Math.floor(r+a*(1-v.lengthRatio)/2),_=Math.ceil(r+a*(1+v.lengthRatio)/2);w[0].setProperties(y(l,C,_)),w[1].setProperties(y(u,C,_)),T[0].setProperties(f(Math.round(l+N.strokeWidth/2),c,Math.floor(r+a/2))),T[1].setProperties(f(p,Math.round(u-N.strokeWidth/2),Math.floor(r+a/2))),Pg(R,m,o),R.setProperties({fill:m,fillOpacity:S,strokeWidth:x*2,strokeOpacity:0}),P.setProperties({fill:D,fillOpacity:k,strokeWidth:0});for(const B of[...T,...w])B.setProperties(N);A.setProperties({stroke:D,strokeWidth:x,strokeOpacity:k,lineDash:I,lineDashOffset:L,cornerRadius:b,fillOpacity:0})}distanceSquared(e,t){const i=wl.selectByClass(this,os,as);return Cl.nearestSquared(e,t,i).distanceSquared}get midPoint(){const e=this.datum;return e.midPoint===void 0?(Ig.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):e.midPoint}};import{_ModuleSupport as Rg}from"ag-charts-community";var{BaseProperties:Fl,FillGradientDefaults:Tg,FillPatternDefaults:Og,FillImageDefaults:Cg,AbstractBarSeriesProperties:wg,SeriesTooltip:Fg,Property:ae,mergeDefaults:Bg}=Rg,Bl=class extends Fl{constructor(){super(...arguments),this.lengthRatio=.5}};h([ae],Bl.prototype,"lengthRatio",2);var Ti=class extends Fl{};h([ae],Ti.prototype,"stroke",2),h([ae],Ti.prototype,"strokeWidth",2),h([ae],Ti.prototype,"strokeOpacity",2),h([ae],Ti.prototype,"lineDash",2),h([ae],Ti.prototype,"lineDashOffset",2);var ce=class extends wg{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Tg,this.fillPatternDefaults=new Og,this.fillImageDefaults=new Cg,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new Bl,this.whisker=new Ti,this.tooltip=new Fg}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o}=this,a=super.toJson();return a.whisker=Bg(a.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o}),a}};h([ae],ce.prototype,"xKey",2),h([ae],ce.prototype,"minKey",2),h([ae],ce.prototype,"q1Key",2),h([ae],ce.prototype,"medianKey",2),h([ae],ce.prototype,"q3Key",2),h([ae],ce.prototype,"maxKey",2),h([ae],ce.prototype,"xName",2),h([ae],ce.prototype,"yName",2),h([ae],ce.prototype,"minName",2),h([ae],ce.prototype,"q1Name",2),h([ae],ce.prototype,"medianName",2),h([ae],ce.prototype,"q3Name",2),h([ae],ce.prototype,"maxName",2),h([ae],ce.prototype,"fill",2),h([ae],ce.prototype,"fillGradientDefaults",2),h([ae],ce.prototype,"fillPatternDefaults",2),h([ae],ce.prototype,"fillImageDefaults",2),h([ae],ce.prototype,"fillOpacity",2),h([ae],ce.prototype,"stroke",2),h([ae],ce.prototype,"strokeWidth",2),h([ae],ce.prototype,"strokeOpacity",2),h([ae],ce.prototype,"lineDash",2),h([ae],ce.prototype,"lineDashOffset",2),h([ae],ce.prototype,"cornerRadius",2),h([ae],ce.prototype,"itemStyler",2),h([ae],ce.prototype,"cap",2),h([ae],ce.prototype,"whisker",2),h([ae],ce.prototype,"tooltip",2);var{extractDecoratedProperties:_l,fixNumericExtent:_g,keyProperty:Eg,mergeDefaults:wa,SeriesNodePickMode:El,SMALLEST_KEY_INTERVAL:Gg,valueProperty:rs,diff:Wg,animationValidation:Vg,computeBarFocusBounds:Kg,createDatumId:Gl,ContinuousScale:zg,ChartAxisDirection:$g,motion:Wl,isGradientFill:Hg,getShapeStyle:ns}=Ca,Xg=class extends Ca.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},zs=class extends Ca.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[El.NEAREST_NODE,El.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new ce,this.NodeEvent=Xg}async processData(e){if(!this.visible)return;const{xKey:t,minKey:i,q1Key:s,medianKey:o,q3Key:a,maxKey:r}=this.properties,n=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:p,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:l,yScale:c}),f=[];n&&this.processedData&&f.push(Wg(this.id,this.processedData)),n&&f.push(Vg());const{processedData:y}=await this.requestDataModel(e,this.data,{props:[Eg(t,u,{id:"xValue"}),rs(i,d,{id:"minValue"}),rs(s,d,{id:"q1Value"}),rs(o,d,{id:"medianValue"}),rs(a,d,{id:"q3Value"}),rs(r,d,{id:"maxValue"}),...p?[Gg]:[],...f]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:o,def:a}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[o];return a.type==="key"&&a.valueType==="category"?r:this.padBandExtent(r)}const s=this.domainForClippedRange(e,["minValue","maxValue"],"xValue",!0);return _g(s)}getSeriesRange(e,t){return this.domainForVisibleRange($g.Y,["maxValue","minValue"],"xValue",t,!0)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&s&&o))return;const{xKey:a,fill:r,fillOpacity:n,stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:u,lineDashOffset:d,cap:f,whisker:y}=this.properties,g=[],m=t.resolveKeysById(this,"xValue",i),S=t.resolveColumnById(this,"minValue",i),D=t.resolveColumnById(this,"q1Value",i),x=t.resolveColumnById(this,"medianValue",i),k=t.resolveColumnById(this,"q3Value",i),I=t.resolveColumnById(this,"maxValue",i),{barWidth:L,groupIndex:b}=this.updateGroupScale(s),v=zg.is(s.scale)?L*-.5:0,{groupScale:N}=this,M=this.isVertical(),R={itemId:a,nodeData:g,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};return e&&(i.dataSources.get(this.id)??[]).forEach((P,T)=>{const w=m[T];if(w==null)return;const O=S[T],F=D[T],E=x[T],C=k[T],_=I[T];if([O,F,E,C,_].some(J=>typeof J!="number")||O>F||F>E||E>C||C>_)return;const B={xValue:Math.round(s.scale.convert(w)),minValue:Math.round(o.scale.convert(O)),q1Value:Math.round(o.scale.convert(F)),medianValue:Math.round(o.scale.convert(E)),q3Value:Math.round(o.scale.convert(C)),maxValue:Math.round(o.scale.convert(_))};B.xValue+=Math.round(N.convert(String(b)))+v;const G=Math.round(L),W=Math.abs(B.q3Value-B.q1Value),V=B.xValue+G/2,K=Math.min(B.q3Value,B.q1Value)+W/2,$={x:M?V:K,y:M?K:V};let X;M?X={x:$.x-G/2,y:B.minValue,width:G,height:B.maxValue-B.minValue}:X={x:B.minValue,y:$.y-G/2,width:B.maxValue-B.minValue,height:G},g.push({series:this,itemId:w,datum:P,datumIndex:T,xKey:a,bandwidth:G,scaledValues:B,cap:f,whisker:y,fill:r,fillOpacity:n,stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:u,lineDashOffset:d,midPoint:$,focusRect:X})}),R}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:ns({fill:e,fillOpacity:t,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r},n,l,c)}}getLegendData(e){const{id:t,ctx:{legendManager:i},visible:s}=this,{xKey:o,yName:a,showInLegend:r,legendItemName:n}=this.properties;return!o||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:t}),label:{text:n??a??t},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!r}]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yName:n,medianKey:l,medianName:c,q1Key:p,q1Name:u,q3Key:d,q3Name:f,minKey:y,minName:g,maxKey:m,maxName:S,legendItemName:D,tooltip:x}=o,k=this.getCategoryAxis(),I=this.getValueAxis();if(!i||!s||!k||!I)return;const L=s.dataSources.get(this.id)?.[e],b=i.resolveKeysById(this,"xValue",s)[e],v=i.resolveColumnById(this,"minValue",s)[e],N=i.resolveColumnById(this,"q1Value",s)[e],M=i.resolveColumnById(this,"medianValue",s)[e],R=i.resolveColumnById(this,"q3Value",s)[e],A=i.resolveColumnById(this,"maxValue",s)[e];if(b==null)return;const P=this.getItemBaseStyle(!1);return Object.assign(P,this.getItemStyleOverrides(String(e),L,P,!1)),this.formatTooltipWithContext(x,{heading:k.formatDatum(b),title:D??n,symbol:this.legendItemSymbol(),data:[{label:g,fallbackLabel:y,value:I.formatDatum(v)},{label:u,fallbackLabel:p,value:I.formatDatum(N)},{label:c,fallbackLabel:l,value:I.formatDatum(M)},{label:f,fallbackLabel:d,value:I.formatDatum(R)},{label:S,fallbackLabel:m,value:I.formatDatum(A)}]},{seriesId:t,datum:L,title:n,xKey:a,xName:r,yName:n,medianKey:l,medianName:c,q1Key:p,q1Name:u,q3Key:d,q3Name:f,minKey:y,minName:g,maxKey:m,maxName:S,...P})}animateEmptyUpdateReady({datumSelection:e}){const t=this.isVertical(),{from:i,to:s}=kg(t);Wl.resetMotion([e],Mg(t)),Wl.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[e],i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}getItemBaseStyle(e){const{properties:t}=this,{cornerRadius:i,cap:s,whisker:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}=t,l=e?t.highlightStyle.item:void 0,c=this.getStrokeWidth(t.strokeWidth);return ns({fill:l?.fill??t.fill,fillOpacity:l?.fillOpacity??t.fillOpacity,stroke:l?.stroke??t.stroke,strokeWidth:l?.strokeWidth??c,strokeOpacity:l?.strokeOpacity??t.strokeOpacity,lineDash:l?.lineDash??t.lineDash??[],lineDashOffset:l?.lineDashOffset??t.lineDashOffset,cornerRadius:i,cap:s,whisker:o},a,r,n)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{xKey:r,minKey:n,q1Key:l,medianKey:c,q3Key:p,maxKey:u,fillGradientDefaults:d,fillPatternDefaults:f,fillImageDefaults:y,itemStyler:g}=a;if(g==null)return;const m=this.cachedDatumCallback(Gl(e,s?"highlight":"node"),()=>this.callWithContext(g,{seriesId:o,datum:t,xKey:r,minKey:n,q1Key:l,medianKey:c,q3Key:p,maxKey:u,highlighted:s,...i}));return ns(m,d,f,y)}updateDatumNodes({datumSelection:e,isHighlight:t}){const i=this.isVertical(),s=this.getValueAxis()?.isReversed(),{highlightStyle:o}=this.properties;e.each((a,r)=>{let n=this.getFormattedStyles(r,t?"highlight":"node");t&&(n=wa(o.item,n));const{stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:u,lineDashOffset:d}=n;n.whisker=wa(n.whisker,{stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:u,lineDashOffset:d});const f=this.getShapeFillBBox();a.updateDatumStyles(r,n,i,s,f)})}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new Lg}getFormattedStyles(e,t){const{id:i,properties:s}=this,{xKey:o,minKey:a,q1Key:r,medianKey:n,q3Key:l,maxKey:c,itemStyler:p,cornerRadius:u,fillGradientDefaults:d,fillPatternDefaults:f,fillImageDefaults:y}=s,{datum:g,stroke:m,strokeWidth:S,strokeOpacity:D,lineDash:x,lineDashOffset:k,cap:I,whisker:L}=e;let b,v=1;Hg(e.fill)?b=e.fill:(b=e.fill,v=s.fillOpacity);let N=ns({fill:b,fillOpacity:v,stroke:m,strokeWidth:S,strokeOpacity:D,lineDash:x,lineDashOffset:k,cornerRadius:u,cap:_l(I),whisker:_l(L)},d,f,y);if(p){const M=this.cachedDatumCallback(Gl(g.index,t),()=>this.callWithContext(p,{datum:g,seriesId:i,highlighted:t==="highlight",...N,xKey:o,minKey:a,q1Key:r,medianKey:n,q3Key:l,maxKey:c}));M&&(N=ns(wa(M,N),d,f,y))}return N}computeFocusBounds({datumIndex:e}){return Kg(this,this.contextNodeData?.nodeData[e].focusRect)}};zs.className="BoxPlotSeries",zs.type="box-plot";import{_ModuleSupport as Yg}from"ag-charts-community";import{boolean as qg,constant as Ug,required as ui,string as tt}from"ag-charts-core";var{boxPlotSeriesThemeableOptionsDef:jg,commonSeriesOptionsDefs:Jg}=Yg,Zg={...jg,...Jg,type:ui(Ug("box-plot")),xKey:ui(tt),minKey:ui(tt),q1Key:ui(tt),medianKey:ui(tt),q3Key:ui(tt),maxKey:ui(tt),xName:tt,yName:tt,minName:tt,q1Name:tt,medianName:tt,q3Name:tt,maxName:tt,grouped:qg,legendItemName:tt};import{_ModuleSupport as $s}from"ag-charts-community";var{CARTESIAN_AXIS_TYPE:Vl}=$s.ThemeConstants,Qg={series:{direction:"vertical",fill:{$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$palette:"fill"}]}]},{$palette:"fill"},{$mix:[$s.SAFE_FILL_OPERATION,{$ref:"backgroundColor"},.7]}]},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:$s.FILL_PATTERN_DEFAULTS,fillImageDefaults:$s.FILL_IMAGE_DEFAULTS,strokeWidth:2},axes:{[Vl.NUMBER]:{crosshair:{snap:!1}},[Vl.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},LP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:e=>new zs(e),tooltipDefaults:{range:"exact"},defaultAxes:vg.DIRECTION_SWAP_AXES,themeTemplate:Qg,groupable:!0},Fa={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:Zg,create:e=>new zs(e)};import{_ModuleSupport as ey}from"ag-charts-community";import{_ModuleSupport as ty}from"ag-charts-community";import{_ModuleSupport as Ba}from"ag-charts-community";import{Logger as Kl}from"ag-charts-core";import{_ModuleSupport as iy}from"ag-charts-community";var{findMinMax:sy}=iy,it=0,dt=1,ft=2,gt=3,kt=4;function _a(e,t=1){let i=Math.ceil(Math.log2(e.length/t))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function Ea(e){return sy(e.map(t=>Number(t)))}function Ga(e,t,i){return(e.valueOf()-t)/(i-t)}function Wa(e,t){return Math.min(Math.floor(e*t),t-1)*kt|0}function Va(e,t,i,s,o,a){const r=new Int32Array(a*kt).fill(-1),n=new Float64Array(a*kt).fill(NaN);for(let l=0;l<e.length;l+=1){const c=e[l],p=t[l],u=i[l];if(c==null||p==null||u==null)continue;const d=Ga(c,s,o),f=p.valueOf(),y=u.valueOf(),g=Wa(d,a),m=r[g+it]===-1;(m||d<n[g+it])&&(r[g+it]=l,n[g+it]=d),(m||d>n[g+dt])&&(r[g+dt]=l,n[g+dt]=d),(m||y<n[g+ft])&&(r[g+ft]=l,n[g+ft]=y),(m||f>n[g+gt])&&(r[g+gt]=l,n[g+gt]=f)}return{indexData:r,valueData:n}}function Ka(e,t,i,{inPlace:s=!1}={}){const o=i/2|0,a=s?e:new Int32Array(o*kt),r=s?t:new Float64Array(o*kt);for(let n=0;n<o;n+=1){const l=n*kt|0,c=l*2|0,p=c+kt|0,u=e[p+it]===-1,d=u||t[c+it]<t[p+it]?c:p;a[l+it]=e[d+it],r[l+it]=t[d+it];const f=u||t[c+dt]>t[p+dt]?c:p;a[l+dt]=e[f+dt],r[l+dt]=t[f+dt];const y=u||t[c+ft]<t[p+ft]?c:p;a[l+ft]=e[y+ft],r[l+ft]=t[y+ft];const g=u||t[c+gt]>t[p+gt]?c:p;a[l+gt]=e[g+gt],r[l+gt]=t[g+gt]}return{maxRange:o,indexData:a,valueData:r}}var oy=1e3,zl=it,ay=gt,ry=ft,$l=dt;function ny(e,t,i,s){if(e.length<oy)return;const[o,a]=Ea(s);let r=_a(e),{indexData:n,valueData:l}=Va(e,t,i,o,a,r);const c=[{maxRange:r,indexData:n}];for(;r>64;)({indexData:n,valueData:l,maxRange:r}=Ka(n,l,r)),c.push({maxRange:r,indexData:n});return c.reverse(),c}var{fixNumericExtent:ly,keyProperty:cy,createDatumId:Hl,SeriesNodePickMode:Xl,ChartAxisDirection:Yl,SMALLEST_KEY_INTERVAL:py,valueProperty:Hs,diff:hy,animationValidation:uy,computeBarFocusBounds:dy,visibleRangeIndices:ql,ContinuousScale:fy,DiscreteTimeScale:gy,BandScale:yy,getShapeStyle:za}=Ba,my=class extends Ba.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.openKey=s.properties.openKey,this.closeKey=s.properties.closeKey,this.highKey=s.properties.highKey,this.lowKey=s.properties.lowKey}},Ul=class extends Ba.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Xl.AXIS_ALIGNED,Xl.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=my,this.dataAggregationFilters=void 0}async processData(e){if(!this.visible)return;const{xKey:t,openKey:i,closeKey:s,highKey:o,lowKey:a}=this.properties,r=!this.ctx.animationManager.isSkipped(),n=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:p,yScaleType:u}=this.getScaleInformation({xScale:n,yScale:l}),d=[];r&&(this.processedData&&d.push(hy(this.id,this.processedData)),d.push(uy())),i&&d.push(Hs(i,u,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:f,processedData:y}=await this.requestDataModel(e,this.data,{props:[cy(t,p,{id:"xValue"}),Hs(s,u,{id:"closeValue"}),Hs(o,u,{id:"highValue"}),Hs(a,u,{id:"lowValue"}),...c?[py]:[],...d]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(f,y),this.animationState.transition("updateData")}aggregateData(e,t){const i=this.axes[Yl.X];if(i==null||!(fy.is(i.scale)||gy.is(i.scale)))return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"highValue",t),a=e.resolveColumnById(this,"lowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[r];return ny(s,o,a,n)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:o,def:a}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[o];return a.type==="key"&&a.valueType==="category"?r:this.padBandExtent(r)}const s=this.domainForClippedRange(e,["highValue","lowValue"],"xValue",!0);return ly(s)}getSeriesRange(e,t){return this.domainForVisibleRange(Yl.Y,["highValue","lowValue"],"xValue",t,!0)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["highValue","lowValue"],e,t,i)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&s&&o))return;const a=[],{xKey:r,highKey:n,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],p=t.resolveKeysById(this,"xValue",i),u=t.resolveColumnById(this,"openValue",i),d=t.resolveColumnById(this,"closeValue",i),f=t.resolveColumnById(this,"highValue",i),y=t.resolveColumnById(this,"lowValue",i),{groupScale:g}=this,{barWidth:m,groupIndex:S}=this.updateGroupScale(s),D=g.convert(String(S)),x=m>=1?m:g.rawBandwidth,k=yy.is(s.scale),I={itemId:r,nodeData:a,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!e)return I;const L=(T,w,O,F,E,C,_,B)=>{const G=c[T],W=k?_/2:0,V=s.scale.convert(w)+D+W,K=o.scale.convert(O),$=o.scale.convert(F),X=o.scale.convert(E),J=o.scale.convert(C),Q=F>O,ee=Q?"up":"down",j=Math.min(X,J),U=Math.max(X,J)-j,re={x:V,y:j+U/2};a.push({series:this,itemId:ee,datum:G,datumIndex:T,xKey:r,xValue:w,openValue:O,closeValue:F,highValue:E,lowValue:C,midPoint:re,aggregatedValue:F,isRising:Q,centerX:V,width:_,y:j,height:U,yOpen:K,yClose:$,crisp:B})},{dataAggregationFilters:b}=this,v=s.scale,[N,M]=v.range,R=M-N,A=T=>v.convert(p[T])+D,P=b?.find(T=>T.maxRange>R);if(P==null){let[T,w]=ql(c.length,s.range,O=>{const F=A(O);return[F,F+x]});i.input.count<1e3&&(T=0,w=i.input.count);for(let O=T;O<w;O+=1){const F=p[O];if(F==null)continue;const E=u[O],C=d[O],_=f[O],B=y[O],G=B!=null&&B<=E&&B<=C,W=_!=null&&_>=E&&_>=C;if(!G){Kl.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!W){Kl.warnOnce(`invalid high value for key [${n}] in data element, high value cannot be lower than datum open or close values.`);continue}L(O,F,E,C,_,B,x,!0)}}else{const{maxRange:T,indexData:w}=P,[O,F]=ql(T,s.range,E=>{const C=E*kt,_=w[C+zl],B=w[C+$l];if(_!==-1)return[A(_),A(B)+x]});for(let E=O;E<F;E+=1){const C=E*kt,_=w[C+zl],B=w[C+$l],G=w[C+ay],W=w[C+ry];if(_===-1)continue;const V=(_+B)/2|0,K=p[V];if(K==null)continue;const $=u[_],X=d[B],J=f[G],Q=y[W],ee=Math.abs(A(B)-A(_))+x;L(V,K,$,X,J,Q,ee,!1)}}return I}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemBaseStyle(e,t){const{properties:i}=this,s=i.item[e],o=t?i.highlightStyle.item:void 0,a={fill:o?.fill??s.fill,fillOpacity:o?.fillOpacity??s.fillOpacity,stroke:o?.stroke??s.stroke,strokeWidth:o?.strokeWidth??s.strokeWidth,strokeOpacity:o?.strokeOpacity??s.strokeOpacity,lineDash:o?.lineDash??s.lineDash,lineDashOffset:o?.lineDashOffset??s.lineDashOffset};return s.fillGradientDefaults&&s.fillPatternDefaults&&s.fillImageDefaults?za(a,s.fillGradientDefaults,s.fillPatternDefaults,s.fillImageDefaults):a}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,n=r.item[i],{itemStyler:l}=r;if(l==null)return;const{xKey:c,openKey:p,closeKey:u,highKey:d,lowKey:f}=r,y=this.cachedDatumCallback(Hl(e,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:a,datum:t,itemId:i,xKey:c,openKey:p,closeKey:u,highKey:d,lowKey:f,highlighted:o,...s}));return n.fillGradientDefaults&&n.fillPatternDefaults&&n.fillImageDefaults?za(y,n.fillGradientDefaults,n.fillPatternDefaults,n.fillImageDefaults):y}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yName:n,openKey:l,openName:c,highKey:p,highName:u,lowKey:d,lowName:f,closeKey:y,closeName:g,legendItemName:m,tooltip:S}=o,D=this.getCategoryAxis(),x=this.getValueAxis();if(!i||!s||!D||!x)return;const k=s.dataSources.get(this.id)?.[e],I=i.resolveKeysById(this,"xValue",s)[e],L=i.resolveColumnById(this,"openValue",s)[e],b=i.resolveColumnById(this,"highValue",s)[e],v=i.resolveColumnById(this,"lowValue",s)[e],N=i.resolveColumnById(this,"closeValue",s)[e];if(I==null)return;const M=N>=L?"up":"down",R=this.properties.item[M],A=this.getItemBaseStyle(M,!1);Object.assign(A,this.getItemStyleOverrides(String(e),k,M,A,!1));let P={fill:R.fill??R.stroke,fillOpacity:R.fillOpacity??R.strokeOpacity??1,stroke:R.stroke,strokeWidth:R.strokeWidth??1,strokeOpacity:R.strokeOpacity??1,lineDash:R.lineDash??[0],lineDashOffset:R.lineDashOffset??0};return R.fillGradientDefaults&&R.fillPatternDefaults&&R.fillImageDefaults&&(P=za(P,R.fillGradientDefaults,R.fillPatternDefaults,R.fillImageDefaults)),this.formatTooltipWithContext(S,{heading:D.formatDatum(I),title:m,symbol:{marker:P},data:[{label:c,fallbackLabel:l,value:x.formatDatum(L)},{label:u,fallbackLabel:p,value:x.formatDatum(b)},{label:f,fallbackLabel:d,value:x.formatDatum(v)},{label:g,fallbackLabel:y,value:x.formatDatum(N)}]},{seriesId:t,datum:k,title:n,itemId:M,xKey:a,xName:r,yName:n,openKey:l,openName:c,highKey:p,highName:u,lowKey:d,lowName:f,closeKey:y,closeName:g,...A})}getDatumId(e){return Hl(e.xValue)}computeFocusBounds(e){const t=this.getNodeData()?.at(e.datumIndex);if(t==null)return;const{centerX:i,y:s,width:o,height:a}=t,r={x:i-o/2,y:s,width:o,height:a};return dy(this,r)}};import{_ModuleSupport as Sy}from"ag-charts-community";import{_ModuleSupport as xy}from"ag-charts-community";var{Path:Dy,SceneChangeDetection:Ut,BBox:by}=xy,Ot=class extends Dy{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:e,y:t,width:i,height:s}=this;return new by(e-i/2,t,i,s)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:e,width:t,height:i,crisp:s,strokeAlignment:o}=this;let{centerX:a,yOpen:r,yClose:n}=this,l=a-t/2,c=a+t/2,p=e,u=e+i;if(s&&t>1){a=this.align(a),r=this.align(r),n=this.align(n);const f=this.align(t/2);l=a-f,c=a+f,p=this.align(e),u=p+this.align(p,i)}const d=(p+u)/2;return a+=o,l+=o,c+=o,p-=o,u+=o,r+=r<d?o:-o,n+=n<d?o:-o,{centerX:a,x0:l,x1:c,y0:p,y1:u,yOpen:r,yClose:n}}executeStroke(e,t){const{width:i,strokeWidth:s}=this;i<s&&(e.lineWidth=i),super.executeStroke(e,t)}};h([Ut()],Ot.prototype,"centerX",2),h([Ut()],Ot.prototype,"y",2),h([Ut()],Ot.prototype,"width",2),h([Ut()],Ot.prototype,"height",2),h([Ut()],Ot.prototype,"yOpen",2),h([Ut()],Ot.prototype,"yClose",2),h([Ut()],Ot.prototype,"crisp",2),h([Ut()],Ot.prototype,"strokeAlignment",2);var vy=class extends Ot{updatePath(){const{path:e}=this,{centerX:t,x0:i,x1:s,y0:o,y1:a,yOpen:r,yClose:n}=this.alignedCoordinates();e.clear(),e.moveTo(t,o),e.lineTo(t,a),Math.abs(s-i)>1&&(e.moveTo(i,r),e.lineTo(t,r),e.moveTo(t,n),e.lineTo(s,n))}},{SceneArrayChangeDetection:ky,SceneChangeDetection:Xs,ExtendedPath2D:My,BBox:Iy}=Sy,Oi=class extends Ot{constructor(){super(...arguments),this.wickPath=new My,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:e,centerX:t,yOpen:i,yClose:s}=this,o=Math.min(i,s),r=Math.max(i,s)-o,n=t-e/2,l=t+e/2;return new Iy(n,o,l-n,r)}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,wickStroke:r,wickStrokeWidth:n,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:p,strokeAlignment:u}=this,{centerX:d,x0:f,x1:y,y0:g,y1:m,yOpen:S,yClose:D}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const k=r!=null&&r!==t||n!=null&&n!==i||l!=null&&l!==s||c!=null&&c!==o||p!=null&&p!==a?this.wickPath:e;if(Math.abs(y-f)<=3){k.moveTo(d,g),k.lineTo(d,m);return}const I=Math.min(S,D),L=Math.max(S,D);k.moveTo(d,g),k.lineTo(d,I+i/2),k.moveTo(d,m),k.lineTo(d,L-i/2);const b=u+i/2,v=L-I-2*b;if(v>0)e.rect(f+b,I+b,y-f-2*b,v);else{const N=(I+L)/2;e.moveTo(f,N),e.lineTo(y,N)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:r,wickStroke:n=i,wickStrokeWidth:l=s,wickStrokeOpacity:c=o,wickLineDash:p=a,wickLineDashOffset:u=r}=this;l!==0&&(e.globalAlpha*=c,typeof n=="string"&&(e.strokeStyle=n),e.lineWidth=l,p!=null&&e.setLineDash([...p]),e.lineDashOffset=u,e.stroke(t.getPath2D()))}};h([Xs()],Oi.prototype,"wickStroke",2),h([Xs()],Oi.prototype,"wickStrokeWidth",2),h([Xs()],Oi.prototype,"wickStrokeOpacity",2),h([ky()],Oi.prototype,"wickLineDash",2),h([Xs()],Oi.prototype,"wickLineDashOffset",2);import{_ModuleSupport as Ay}from"ag-charts-community";import{_ModuleSupport as Ny}from"ag-charts-community";var{BaseProperties:jl,Property:Re,AbstractBarSeriesProperties:Py,SeriesTooltip:Ly}=Ny,di=class extends jl{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([Re],di.prototype,"stroke",2),h([Re],di.prototype,"strokeWidth",2),h([Re],di.prototype,"strokeOpacity",2),h([Re],di.prototype,"lineDash",2),h([Re],di.prototype,"lineDashOffset",2);var $a=class extends jl{constructor(){super(...arguments),this.up=new di,this.down=new di}};h([Re],$a.prototype,"up",2),h([Re],$a.prototype,"down",2);var rt=class extends Py{};h([Re],rt.prototype,"xKey",2),h([Re],rt.prototype,"openKey",2),h([Re],rt.prototype,"closeKey",2),h([Re],rt.prototype,"highKey",2),h([Re],rt.prototype,"lowKey",2),h([Re],rt.prototype,"xName",2),h([Re],rt.prototype,"yName",2),h([Re],rt.prototype,"openName",2),h([Re],rt.prototype,"closeName",2),h([Re],rt.prototype,"highName",2),h([Re],rt.prototype,"lowName",2);var Ys=class extends rt{constructor(){super(...arguments),this.tooltip=new Ly,this.item=new $a}};h([Re],Ys.prototype,"tooltip",2),h([Re],Ys.prototype,"item",2),h([Re],Ys.prototype,"itemStyler",2);var{FillGradientDefaults:Ry,FillPatternDefaults:Ty,FillImageDefaults:Oy,BaseProperties:Ha,SeriesTooltip:Cy,Property:Ne}=Ay,Ci=class extends Ha{};h([Ne],Ci.prototype,"stroke",2),h([Ne],Ci.prototype,"strokeWidth",2),h([Ne],Ci.prototype,"strokeOpacity",2),h([Ne],Ci.prototype,"lineDash",2),h([Ne],Ci.prototype,"lineDashOffset",2);var st=class extends Ha{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Ry,this.fillPatternDefaults=new Ty,this.fillImageDefaults=new Oy,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Ci}};h([Ne],st.prototype,"fill",2),h([Ne],st.prototype,"fillGradientDefaults",2),h([Ne],st.prototype,"fillPatternDefaults",2),h([Ne],st.prototype,"fillImageDefaults",2),h([Ne],st.prototype,"fillOpacity",2),h([Ne],st.prototype,"stroke",2),h([Ne],st.prototype,"strokeWidth",2),h([Ne],st.prototype,"strokeOpacity",2),h([Ne],st.prototype,"lineDash",2),h([Ne],st.prototype,"lineDashOffset",2),h([Ne],st.prototype,"cornerRadius",2),h([Ne],st.prototype,"wick",2);var Xa=class extends Ha{constructor(){super(...arguments),this.up=new st,this.down=new st}};h([Ne],Xa.prototype,"up",2),h([Ne],Xa.prototype,"down",2);var qs=class extends rt{constructor(){super(...arguments),this.item=new Xa,this.tooltip=new Cy}};h([Ne],qs.prototype,"item",2),h([Ne],qs.prototype,"tooltip",2),h([Ne],qs.prototype,"itemStyler",2);var{createDatumId:wy,isGradientFill:Jl,isPatternFill:Ya,isImageFill:qa,getShapeFill:Zl,applyShapeStyle:Fy,getShapeStyle:Ua}=ty,Us=class extends Ul{constructor(){super(...arguments),this.properties=new qs}nodeFactory(){return new Oi}updateDatumNodes({datumSelection:e,isHighlight:t}){const{id:i,properties:s}=this,{xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,item:c,itemStyler:p}=s,{up:u,down:d}=c,f=Ua({fill:u.fill,fillOpacity:u.fillOpacity,stroke:u.stroke,strokeWidth:u.strokeWidth,strokeOpacity:u.strokeOpacity,lineDash:u.lineDash,lineDashOffset:u.lineDashOffset},u.fillGradientDefaults,u.fillPatternDefaults,u.fillImageDefaults),y=Ua({fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeWidth:d.strokeWidth,strokeOpacity:d.strokeOpacity,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},d.fillGradientDefaults,d.fillPatternDefaults,d.fillImageDefaults),g=t?s.highlightStyle.item:void 0;e.each((m,S)=>{const{isRising:D,centerX:x,width:k,y:I,height:L,yOpen:b,yClose:v,crisp:N}=S;let M;if(p!=null){const{fill:T,fillOpacity:w,stroke:O,strokeWidth:F,strokeOpacity:E,lineDash:C,lineDashOffset:_}=D?f:y;M=Ua(this.cachedDatumCallback(wy(this.getDatumId(S),t?"highlight":"node"),()=>this.callWithContext(p,{seriesId:i,itemId:S.itemId,xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,datum:S.datum,fill:T,fillOpacity:w,strokeOpacity:E,stroke:O,strokeWidth:F,lineDash:C,lineDashOffset:_,highlighted:t})),D?u.fillGradientDefaults:d.fillGradientDefaults,D?u.fillPatternDefaults:d.fillPatternDefaults,D?u.fillImageDefaults:d.fillImageDefaults)}m.centerX=x,m.width=k,m.y=I,m.height=L,m.yOpen=b,m.yClose=v,m.crisp=N;const R=D?f:y,A=D?u.wick:d.wick;Fy(m,{fill:g?.fill??M?.fill??R.fill,fillOpacity:g?.fillOpacity??M?.fillOpacity??R.fillOpacity,stroke:g?.stroke??M?.stroke??R.stroke,strokeWidth:g?.strokeWidth??M?.strokeWidth??R.strokeWidth,strokeOpacity:g?.strokeOpacity??M?.strokeOpacity??R.strokeOpacity,lineDash:g?.lineDash??M?.lineDash??R.lineDash,lineDashOffset:g?.lineDashOffset??M?.lineDashOffset??R.lineDashOffset},void 0,this.getShapeFillBBox());const P=M?.wick;m.wickStroke=g?.stroke??P?.stroke??A.stroke,m.wickStrokeWidth=g?.strokeWidth??P?.strokeWidth??A.strokeWidth,m.wickStrokeOpacity=g?.strokeOpacity??P?.strokeOpacity??A.strokeOpacity,m.wickLineDash=g?.lineDash??P?.lineDash??A.lineDash,m.wickLineDashOffset=g?.lineDashOffset??P?.lineDashOffset??A.lineDashOffset,m.strokeAlignment=(M?.strokeWidth??R.strokeWidth)/2})}legendItemSymbol(){const{up:e,down:t}=this.properties.item,i=Zl(e.fill,e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults),s=Jl(i)?i.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:Ya(i)||qa(i)?e.stroke:i,stop:0},{color:Ya(i)||qa(i)?e.stroke:i,stop:.5}],o=Zl(t.fill,t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults),a=Jl(o)?o.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:Ya(o)||qa(o)?t.stroke:o,stop:.5}],r={type:"gradient",gradient:"linear",rotation:90,colorStops:[...s,...a],reverse:!1},n={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:e.stroke,stop:0},{color:e.stroke,stop:.5},{color:t.stroke,stop:.5}],reverse:!1};return{marker:{fill:r,fillOpacity:e.fillOpacity,stroke:n,strokeWidth:e.strokeWidth??1,strokeOpacity:e.strokeOpacity??1,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset}}}getLegendData(e){const{id:t,data:i,visible:s,ctx:{legendManager:o}}=this,{xKey:a,yName:r,showInLegend:n,legendItemName:l}=this.properties;return!i?.length||!a||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&o.getItemEnabled({seriesId:t,itemId:t}),label:{text:l??r??t},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!n}]}};Us.className="CandleStickSeries",Us.type="candlestick";import{_ModuleSupport as By}from"ag-charts-community";import{boolean as _y,constant as Ey,number as Gy,required as wi,string as Mt,undocumented as Ql}from"ag-charts-core";var{commonSeriesOptionsDefs:Wy,candlestickSeriesThemeableOptionsDef:Vy}=By,ja={...Vy,...Wy,type:wi(Ey("candlestick")),xKey:wi(Mt),openKey:wi(Mt),highKey:wi(Mt),lowKey:wi(Mt),closeKey:wi(Mt),xName:Mt,yName:Mt,openName:Mt,highName:Mt,lowName:Mt,closeName:Mt};ja.pickOutsideVisibleMinorAxis=Ql(_y),ja.focusPriority=Ql(Gy);import{_ModuleSupport as Ja}from"ag-charts-community";var{CARTESIAN_AXIS_TYPE:ec}=Ja.ThemeConstants;function tc(e){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},e==="up"?"transparent":{$palette:"fill"},{$palette:`${e}.fill`}]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${e}.stroke`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${e}.fill`}]},{$isPattern:[{$palette:`${e}.fill`}]},{$isImage:[{$palette:`${e}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${e}.fill`}]}]},[{$mix:[{$palette:`${e}.fill`},"black",.15]},{$mix:[{$palette:`${e}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:Ja.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ja.FILL_IMAGE_DEFAULTS}}var Ky={series:{item:{up:tc("up"),down:tc("down")},highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[ec.NUMBER]:{crosshair:{snap:!1}},[ec.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:ic,CARTESIAN_POSITION:sc}=ey.ThemeConstants,KP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:e=>new Us(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:ic.NUMBER,position:sc.LEFT},{type:ic.ORDINAL_TIME,position:sc.BOTTOM}],themeTemplate:Ky,groupable:!1},Za={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:ja,create:e=>new Us(e)};import{_ModuleSupport as zy}from"ag-charts-community";import{_ModuleSupport as Qa}from"ag-charts-community";import{Logger as $y}from"ag-charts-core";import{_ModuleSupport as Hy}from"ag-charts-community";import{Logger as Xy,findMaxValue as oc}from"ag-charts-core";var{CachedTextMeasurerPool:ac,TextUtils:rc,TextWrapper:js}=Hy;function Yy(e,t){const{fontSize:i,minimumFontSize:s=i}=e,{fontSize:o,minimumFontSize:a=o}=t,r=i-s,n=o-a;let l=e.fontSize,c=t.fontSize;const p=[{labelFontSize:i,secondaryLabelFontSize:o}];for(;l>s||c>a;){const u=r>0?(l-s)/r:-1,d=n>0?(c-a)/n:-1;u>d?l--:c--,p.push({labelFontSize:l,secondaryLabelFontSize:c})}return p.reverse(),p}function Fi(e,t){return e.lineHeight!=null&&e.fontSize!=null?e.lineHeight*t/e.fontSize:rc.getLineHeight(t)}function nc(e,t,i,s,{padding:o},a){const{spacing:r=0}=t,n=2*o,l=2*o+r,c=(t.minimumFontSize??t.fontSize)+(s.minimumFontSize??s.fontSize);if(c>a(c+l,!1).height-l)return;const p=Yy(t,s),u={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},d={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let f,y;return oc(0,p.length-1,g=>{const{labelFontSize:m,secondaryLabelFontSize:S}=p[g],D=g===0,x=Fi(t,m),k=Fi(s,S),I=a(x+k+l,D),L=I.width-n,b=I.height-l;if(x+k>b||((f==null||f.fontSize!==m)&&(u.fontSize=m,f=cc(t,e,L,b,u,t.wrapping,D?t.overflowStrategy:"hide")),f==null||f.width>L||f.height>b)||((y==null||y.fontSize!==S)&&(d.fontSize=S,y=cc(s,i,L,b,d,s.wrapping,D?s.overflowStrategy:"hide")),y==null))return;const v=f.height+y.height;if(!(y.width>L||v>b))return{width:Math.max(f.width,y.width),height:v+r,meta:I.meta,label:f,secondaryLabel:y}})}function ls(e,t,{padding:i},s){const o=2*i,a=Math.min(t.minimumFontSize??t.fontSize,t.fontSize),r={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return oc(a,t.fontSize,n=>{const l=Fi(t,n),c=n===a,p=s(l+o,c),u=p.width-o,d=p.height-o;if(l>d)return;r.fontSize=n;const f=js.wrapLines(e,{maxWidth:u,maxHeight:d,font:r,textWrap:t.wrapping,overflow:(c?t.overflowStrategy:void 0)??"hide"});if(!f.length)return;const y=qy(f,{lineHeight:l,font:r,maxWidth:u,maxHeight:d});if(y)return[{fontSize:n,lineHeight:l,...y},p.meta]})}function lc(e){return e?.minimumFontSize!=null&&e?.fontSize!=null&&e?.minimumFontSize>e?.fontSize}function er(e,t,i,s,o,a){const r=t.enabled?e:void 0,n=s.enabled?i:void 0;(lc(t)||lc(s))&&Xy.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;r!=null&&n!=null&&(l=nc(r,t,n,s,o,a));let c;if(l==null&&r!=null&&(c=ls(r,t,o,a)),c!=null){const[u,d]=c;l={width:u.width,height:u.height,meta:d,label:u,secondaryLabel:void 0}}let p;if(l==null&&r==null&&n!=null&&(p=ls(n,s,o,a)),p!=null){const[u,d]=p;l={width:u.width,height:u.height,meta:d,label:void 0,secondaryLabel:u}}return l}function cc(e,t,i,s,o,a,r){const n=js.wrapLines(t,{maxWidth:i,maxHeight:s,font:o,textWrap:a,overflow:r});if(!n.length)return;const l=Fi(e,o.fontSize),{width:c}=ac.measureLines(n,{font:o});return{width:c,lineHeight:l,text:n.join(`
`),height:n.length*l,fontSize:o.fontSize}}function qy(e,{font:t,lineHeight:i=rc.defaultLineHeight,maxWidth:s,maxHeight:o=1/0}){let a=i*e.length;for(;a>o;){if(e.length===1)return;e.pop(),e[e.length-1]=js.appendEllipsis(e.at(-1)),a=i*e.length}const r=ac.measureLines(e,{font:t});let n,l;if(r.width>s){const c=[];l=0;for(const p of r.lineMetrics){if(p.width>s){if(!c.length)return;break}c.push(p.text),l=Math.max(l,p.width)}n=js.appendEllipsis(c.join(`
`))}else n=e.join(`
`),l=r.width;return{text:n,width:l,height:a}}import{_ModuleSupport as Uy}from"ag-charts-community";import{_ModuleSupport as pc}from"ag-charts-community";var{Property:cs}=pc,Bi=class extends pc.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};h([cs],Bi.prototype,"wrapping",2),h([cs],Bi.prototype,"overflowStrategy",2),h([cs],Bi.prototype,"lineHeight",2),h([cs],Bi.prototype,"minimumFontSize",2);var Ct=class extends Bi{constructor(){super(...arguments),this.spacing=0}};h([cs],Ct.prototype,"spacing",2);var ps=class extends Bi{},{CartesianSeriesProperties:jy,SeriesTooltip:Jy,Property:ze}=Uy,Ve=class extends jy{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Ct,this.tooltip=new Jy}};h([ze],Ve.prototype,"title",2),h([ze],Ve.prototype,"xKey",2),h([ze],Ve.prototype,"yKey",2),h([ze],Ve.prototype,"colorKey",2),h([ze],Ve.prototype,"xName",2),h([ze],Ve.prototype,"yName",2),h([ze],Ve.prototype,"colorName",2),h([ze],Ve.prototype,"colorRange",2),h([ze],Ve.prototype,"stroke",2),h([ze],Ve.prototype,"strokeOpacity",2),h([ze],Ve.prototype,"strokeWidth",2),h([ze],Ve.prototype,"textAlign",2),h([ze],Ve.prototype,"verticalAlign",2),h([ze],Ve.prototype,"itemPadding",2),h([ze],Ve.prototype,"itemStyler",2),h([ze],Ve.prototype,"label",2),h([ze],Ve.prototype,"tooltip",2);var{SeriesNodePickMode:hc,computeBarFocusBounds:Zy,getMissCount:Qy,valueProperty:tr,ChartAxisDirection:yt,DEFAULT_CARTESIAN_DIRECTION_KEYS:em,DEFAULT_CARTESIAN_DIRECTION_NAMES:tm,createDatumId:im,ColorScale:sm,Rect:om,PointerEvents:am,applyShapeStyle:rm}=Qa,nm=class extends Qa.CartesianSeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.colorKey=s.properties.colorKey}},lm={left:-.5,center:0,right:-.5},cm={top:-.5,middle:0,bottom:-.5},Js=class extends Qa.CartesianSeries{constructor(e){super({moduleCtx:e,directionKeys:em,directionNames:tm,categoryKey:void 0,pickModes:[hc.NEAREST_NODE,hc.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new Ve,this.NodeEvent=nm,this.colorScale=new sm}async processData(e){const t=this.axes[yt.X],i=this.axes[yt.Y];if(!t||!i||!this.data?.length)return;const{xKey:s,yKey:o,colorRange:a,colorKey:r}=this.properties,n=this.axes[yt.X]?.scale,l=this.axes[yt.Y]?.scale,{xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:n,yScale:l}),u=this.colorScale.type,{dataModel:d,processedData:f}=await this.requestDataModel(e,this.data,{props:[tr(s,c,{id:"xValue"}),tr(o,p,{id:"yValue"}),...r?[tr(r,u,{id:"colorValue",invalidValue:null})]:[]]});if(this.isColorScaleValid()){const y=d.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=f.domain.values[y],this.colorScale.range=a,this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=Qy(this,i.defs.values[s].missing);return!(o===0||o===a)}xCoordinateRange(e,t){const i=this.axes[yt.X].scale,s=t*(i.bandwidth??0)/2,o=i.convert(e)+s,a=t*(i.bandwidth??10);return[o,o+a]}yCoordinateRange(e,t){const i=this.axes[yt.Y].scale,s=t*(i.bandwidth??0)/2,o=i.convert(e[0])+s,a=t*(i.bandwidth??10);return[o,o+a]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:e===yt.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,visible:t,axes:i,dataModel:s,processedData:o}=this,a=i[yt.X],r=i[yt.Y];if(!(e&&s&&o&&t&&a&&r))return;if(a.type!=="category"||r.type!=="category"){$y.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${r.type}" instead.`);return}const{xKey:n,xName:l,yKey:c,yName:p,colorKey:u,colorName:d,textAlign:f,verticalAlign:y,itemPadding:g,label:m}=this.properties,S=s.resolveColumnById(this,"xValue",o),D=s.resolveColumnById(this,"yValue",o),x=u?s.resolveColumnById(this,"colorValue",o):void 0,k=a.scale,I=r.scale,L=(k.bandwidth??0)/2,b=(I.bandwidth??0)/2,v=[],N=[],M=k.bandwidth??10,R=I.bandwidth??10,A=(M-2*g)*lm[f],P=(R-2*g)*cm[y],T=()=>({width:M,height:R,meta:null});return(o.dataSources.get(this.id)??[]).forEach((O,F)=>{const E=S[F],C=D[F],_=k.convert(E)+L,B=I.convert(C)+b,G=x?.[F],W=G==null?void 0:this.getLabelText(m,{value:G,datum:O,colorKey:u,colorName:d,xKey:n,yKey:c,xName:l,yName:p}),V=er(W,this.properties.label,void 0,this.properties.label,{padding:g},T),K={x:_,y:B,size:0};if(v.push({series:this,itemId:c,datumIndex:F,yKey:c,xKey:n,xValue:E,yValue:C,colorValue:G,datum:O,point:K,width:M,height:R,midPoint:{x:_,y:B},missing:x!=null&&G==null}),V?.label!=null){const{text:$,fontSize:X,lineHeight:J,height:Q}=V.label,{fontStyle:ee,fontFamily:j,fontWeight:U,color:re}=this.properties.label,le=K.x+A*(M-2*g),Y=K.y+P*(R-2*g)-(V.height-Q)*.5;N.push({series:this,itemId:c,datum:O,datumIndex:F,text:$,fontSize:X,lineHeight:J,fontStyle:ee,fontFamily:j,fontWeight:U,color:re,textAlign:f,verticalAlign:y,x:le,y:Y})}}),{itemId:this.properties.yKey??this.id,nodeData:v,labelData:N,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new om}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s)}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return{fill:i?.fill,fillOpacity:i?.fillOpacity??1,stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity}}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{xKey:n,yKey:l,itemStyler:c}=r,p=this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):"transparent";let u=s.fill==null?{fill:p}:void 0;if(c!=null){u??(u={});const d=this.cachedDatumCallback(im(e,o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:t,xKey:n,yKey:l,highlighted:o,...s,fill:p}));Object.assign(u,d)}return u}updateDatumNodes(e){const{isHighlight:t}=e,i=this.axes[yt.X],[s,o]=i?.visibleRange??[],r=!(s!==0||o!==1),n=this.getItemBaseStyle(t);e.datumSelection.each((l,c)=>{const{datumIndex:p,colorValue:u,datum:d,point:f,width:y,height:g}=c,m=this.getItemStyleOverrides(String(p),d,u,n,t);l.crisp=r,l.x=Math.floor(f.x-y/2),l.y=Math.floor(f.y-g/2),l.width=Math.ceil(y),l.height=Math.ceil(g),rm(l,n,m)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:s}=this.properties.label,o=s?t:[];return i.update(o)}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.text=i.text,t.fontSize=i.fontSize,t.lineHeight=i.lineHeight,t.fontStyle=i.fontStyle,t.fontFamily=i.fontFamily,t.fontWeight=i.fontWeight,t.fill=i.color,t.textAlign=i.textAlign,t.textBaseline=i.verticalAlign,t.x=i.x,t.y=i.y,t.pointerEvents=am.None})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a,colorScale:r}=this,{xKey:n,xName:l,yKey:c,yName:p,colorKey:u,colorName:d,colorRange:f,title:y,legendItemName:g,tooltip:m}=a,S=o[yt.X],D=o[yt.Y];if(!i||!s||!S||!D)return;const x=s.dataSources.get(this.id)?.[e],k=i.resolveColumnById(this,"xValue",s)[e],I=i.resolveColumnById(this,"yValue",s)[e],L=u!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",s)[e]:void 0;if(k==null)return;const b=[];let v;L==null?v=f[0]:(v=r.convert(L),b.push({label:d,fallbackLabel:u,value:String(L)})),b.push({label:l,fallbackLabel:n,value:S.formatDatum(k)},{label:p,fallbackLabel:c,value:D.formatDatum(I)});const N=this.getItemBaseStyle(!1);Object.assign(N,this.getItemStyleOverrides(String(e),x,L,N,!1)),N.fill!=null&&(v=N.fill);const M=v!=null?{marker:{shape:"square",fill:v,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return this.formatTooltipWithContext(m,{title:y??g,symbol:M,data:b},{seriesId:t,datum:x,title:y,xKey:n,xName:l,yKey:c,yName:p,colorKey:u,colorName:d,...N})}getLegendData(e){return e!=="gradient"||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e];if(t===void 0)return;const{width:i,height:s,midPoint:o}=t,a={x:o.x-i/2,y:o.y-s/2,width:i,height:s};return Zy(this,a)}};Js.className="HeatmapSeries",Js.type="heatmap";import{_ModuleSupport as pm}from"ag-charts-community";import{arrayOf as hm,color as um,constant as dm,required as ir,string as _i}from"ag-charts-core";var{commonSeriesOptionsDefs:fm,heatmapSeriesThemeableOptionsDef:gm}=pm,ym={...gm,...fm,type:ir(dm("heatmap")),xKey:ir(_i),yKey:ir(_i),colorKey:_i,xName:_i,yName:_i,colorName:_i,colorRange:hm(um)};import{_ModuleSupport as mm}from"ag-charts-community";var Sm={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$path:["./0",{$palette:"stroke"},{$palette:"strokes"}]}]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},mm.SAFE_RANGE2_OPERATION]},label:{enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:uc,CARTESIAN_POSITION:dc}}=zy,QP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:e=>new Js(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:uc.CATEGORY,position:dc.LEFT},{type:uc.CATEGORY,position:dc.BOTTOM}],themeTemplate:Sm},sr={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:ym,create:e=>new Js(e)};import{_ModuleSupport as xm}from"ag-charts-community";import{_ModuleSupport as Dm}from"ag-charts-community";var{createDatumId:bm}=Dm,Zs=class extends Ul{constructor(){super(...arguments),this.properties=new Ys}nodeFactory(){return new vy}updateDatumNodes({datumSelection:e,isHighlight:t}){const{id:i,properties:s}=this,{xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,item:c,itemStyler:p}=s,{up:u,down:d}=c,{stroke:f,strokeWidth:y,strokeOpacity:g,lineDash:m,lineDashOffset:S}=u,{stroke:D,strokeWidth:x,strokeOpacity:k,lineDash:I,lineDashOffset:L}=d,b=t?s.highlightStyle.item:void 0;e.each((v,N)=>{const{isRising:M,centerX:R,width:A,y:P,height:T,yOpen:w,yClose:O,crisp:F}=N;let E;if(p!=null){const{stroke:C,strokeWidth:_,strokeOpacity:B,lineDash:G,lineDashOffset:W}=M?u:d;E=this.cachedDatumCallback(bm(this.getDatumId(N),t?"highlight":"node"),()=>this.callWithContext(p,{seriesId:i,itemId:N.itemId,xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,datum:N.datum,strokeOpacity:B,stroke:C,strokeWidth:_,lineDash:G,lineDashOffset:W,highlighted:t}))}v.centerX=R,v.width=A,v.y=P,v.height=T,v.yOpen=w,v.yClose=O,v.crisp=F,v.stroke=b?.stroke??E?.stroke??(M?f:D),v.strokeWidth=b?.strokeWidth??E?.strokeWidth??(M?y:x),v.strokeOpacity=b?.strokeOpacity??E?.strokeOpacity??(M?g:k),v.lineDash=b?.lineDash??E?.lineDash??(M?m:I),v.lineDashOffset=b?.lineDashOffset??E?.lineDashOffset??(M?S:L),v.strokeAlignment=(E?.strokeWidth??(M?y:x))/2})}getLegendData(e){const{id:t,data:i,ctx:{legendManager:s},visible:o}=this,{xKey:a,yName:r,item:{up:n,down:l},showInLegend:c,legendItemName:p}=this.properties;if(!i?.length||!a||e!=="category")return[];const u={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:n.stroke,stop:0},{color:n.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:o&&s.getItemEnabled({seriesId:t,itemId:t}),label:{text:p??r??t},symbol:{marker:{fill:u,fillOpacity:n.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:p,hideInLegend:!c}]}};Zs.className="ohlc",Zs.type="ohlc";import{_ModuleSupport as vm}from"ag-charts-community";import{boolean as km,constant as Mm,number as Im,required as Ei,string as It,undocumented as fc}from"ag-charts-core";var{commonSeriesOptionsDefs:Am,ohlcSeriesThemeableOptionsDef:Nm}=vm,or={...Nm,...Am,type:Ei(Mm("ohlc")),xKey:Ei(It),openKey:Ei(It),highKey:Ei(It),lowKey:Ei(It),closeKey:Ei(It),xName:It,yName:It,openName:It,highName:It,lowName:It,closeName:It};or.pickOutsideVisibleMinorAxis=fc(km),or.focusPriority=fc(Im);var{CARTESIAN_AXIS_TYPE:Qs,CARTESIAN_POSITION:gc}=xm.ThemeConstants,oL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:e=>new Zs(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Qs.NUMBER,position:gc.LEFT},{type:Qs.ORDINAL_TIME,position:gc.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}}},axes:{[Qs.NUMBER]:{crosshair:{snap:!1}},[Qs.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},ar={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:or,create:e=>new Zs(e)};import{_ModuleSupport as Pm}from"ag-charts-community";import{_ModuleSupport as eo}from"ag-charts-community";var Lm=1e3;function yc(e,t,i,s,o,a){const r=e[a];if(r==null)return!1;const n=Ga(r,t,i),l=Wa(n,o);return a===s[l+gt]}function mc(e,t,i,s,o,a){const r=e[a];if(r==null)return!1;const n=Ga(r,t,i),l=Wa(n,o);return a===s[l+ft]}function Rm(e,t,i,s){if(e.length<Lm)return;const[o,a]=Ea(s);let r=_a(e);const{indexData:n,valueData:l}=Va(e,t,i,o,a,r);let c=[],p=[];for(let d=0;d<e.length;d+=1)yc(e,o,a,n,r,d)&&c.push(d),mc(e,o,a,n,r,d)&&p.push(d);const u=[{maxRange:r,topIndices:c,bottomIndices:p}];for(;r>64;)({maxRange:r}=Ka(n,l,r,{inPlace:!0})),c=c.filter(yc.bind(null,e,o,a,n,r)),p=p.filter(mc.bind(null,e,o,a,n,r)),u.push({maxRange:r,topIndices:c,bottomIndices:p});return u.reverse(),u}import{_ModuleSupport as Tm}from"ag-charts-community";var{CartesianSeriesProperties:Om,FillGradientDefaults:Cm,FillPatternDefaults:wm,FillImageDefaults:Fm,InterpolationProperties:Bm,SeriesMarker:_m,SeriesTooltip:Em,Property:ge,DropShadow:Gm,Label:Wm}=Tm,rr=class extends Wm{constructor(){super(...arguments),this.placement="outside",this.padding=6}};h([ge],rr.prototype,"placement",2),h([ge],rr.prototype,"padding",2);var Se=class extends Om{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new Cm,this.fillPatternDefaults=new wm,this.fillImageDefaults=new Fm,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Bm,this.shadow=new Gm().set({enabled:!1}),this.marker=new _m,this.label=new rr,this.tooltip=new Em,this.connectMissingData=!1}};h([ge],Se.prototype,"xKey",2),h([ge],Se.prototype,"yLowKey",2),h([ge],Se.prototype,"yHighKey",2),h([ge],Se.prototype,"xName",2),h([ge],Se.prototype,"yName",2),h([ge],Se.prototype,"yLowName",2),h([ge],Se.prototype,"yHighName",2),h([ge],Se.prototype,"fill",2),h([ge],Se.prototype,"fillGradientDefaults",2),h([ge],Se.prototype,"fillPatternDefaults",2),h([ge],Se.prototype,"fillImageDefaults",2),h([ge],Se.prototype,"fillOpacity",2),h([ge],Se.prototype,"stroke",2),h([ge],Se.prototype,"strokeWidth",2),h([ge],Se.prototype,"strokeOpacity",2),h([ge],Se.prototype,"lineDash",2),h([ge],Se.prototype,"lineDashOffset",2),h([ge],Se.prototype,"interpolation",2),h([ge],Se.prototype,"shadow",2),h([ge],Se.prototype,"marker",2),h([ge],Se.prototype,"label",2),h([ge],Se.prototype,"tooltip",2),h([ge],Se.prototype,"connectMissingData",2);import{_ModuleSupport as Vm}from"ag-charts-community";var{CollapseMode:to,isScaleValid:Sc,pairUpSpans:io,prepareAreaFillAnimationFns:Km,plotInterpolatedLinePathStroke:Gi,prepareLinePathPropertyAnimation:zm,areScalingEqual:xc}=Vm;function $m(e,t,i,s){const o=(l,c)=>{Gi(l,c,t.removed),Gi(l,c,i.removed)},a=(l,c)=>{Gi(l,c,t.moved),Gi(l,c,i.moved)},r=(l,c)=>{Gi(l,c,t.added),Gi(l,c,i.added)},n=zm(e,s);return{status:e,path:{addPhaseFn:r,updatePhaseFn:a,removePhaseFn:o},pathProperties:n}}function Hm(e,t,i){const s=e.scales.x?.type==="category",o=t.scales.x?.type==="category";if(s!==o||!Sc(e.scales.x)||!Sc(t.scales.x))return;let a="updated";t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added");const r=io({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},to.Split);if(r==null)return;const n=io({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},to.Split);if(n==null)return;const l=io({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},to.Split);if(l==null)return;const c=io({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},to.Split);if(c==null)return;const p="fade",u=Km(a,r,n,p),d=$m(a,l,c,p),f=(i?.changed??!0)||!xc(e.scales.x,t.scales.x)||!xc(e.scales.y,t.scales.y)||a!=="updated";return{status:a,fill:u,stroke:d,hasMotion:f}}var{valueProperty:Dc,keyProperty:Xm,ChartAxisDirection:Xe,mergeDefaults:Ym,updateLabelNode:qm,fixNumericExtent:bc,buildResetPathFn:Um,resetLabelFn:jm,resetMarkerFn:Jm,resetMarkerPositionFn:vc,pathSwipeInAnimation:Zm,resetMotion:Qm,markerSwipeScaleInAnimation:eS,seriesLabelFadeInAnimation:nr,animationValidation:tS,diff:iS,updateClipPath:kc,computeMarkerFocusBounds:Mc,plotAreaPathFill:sS,plotLinePathStroke:Ic,interpolatePoints:Ac,pathFadeInAnimation:Nc,markerFadeInAnimation:Pc,fromToMotion:Lc,pathMotion:Rc,extent:oS,createDatumId:aS,applyShapeFillBBox:rS,PointerEvents:lr,Group:nS,BBox:lS,ContinuousScale:cS,DiscreteTimeScale:pS,findMinMax:hS,getShapeStyle:uS,getShapeFill:dS,applyShapeStyle:fS}=eo,gS=class extends eo.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},so=class extends eo.CartesianSeries{constructor(e){super({moduleCtx:e,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[eo.SeriesNodePickMode.AXIS_ALIGNED],directionKeys:{[Xe.X]:["xKey"],[Xe.Y]:["yLowKey","yHighKey"]},directionNames:{[Xe.X]:["xName"],[Xe.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:Um({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:jm,marker:(t,i)=>({...Jm(t),...vc(t,i)})},clipFocusBox:!1}),this.properties=new Se,this.NodeEvent=gS,this.dataAggregationFilters=void 0}async processData(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties,o=this.axes[Xe.X]?.scale,a=this.axes[Xe.Y]?.scale,{xScaleType:r,yScaleType:n}=this.getScaleInformation({xScale:o,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(iS(this.id,this.processedData)),c&&l.push(tS());const{dataModel:p,processedData:u}=await this.requestDataModel(e,this.data,{props:[Xm(t,r,{id:"xValue"}),Dc(i,n,{id:"yLowValue"}),Dc(s,n,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(p,u),this.animationState.transition("updateData")}aggregateData(e,t){const i=this.axes[Xe.X];if(i==null||!(cS.is(i.scale)||pS.is(i.scale)))return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[r];return Rm(s,o,a,n)}xCoordinateRange(e){const t=this.axes[Xe.X].scale.convert(e);return[t,t]}yCoordinateRange(e){const t=this.axes[Xe.Y].scale.convert(e[0]);return[t,t]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];const{domain:{keys:[s]}}=t;if(e===Xe.X){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o.def.valueType==="category"?s:bc(oS(s))}else{const o=this.domainForClippedRange(Xe.Y,["yHighValue","yLowValue"],"xValue",!0),a=hS(o);return bc(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(Xe.Y,["yHighValue","yLowValue"],"xValue",t,!0)}createNodeData(){const{data:e,dataModel:t,processedData:i,axes:s}=this,o=s[Xe.X],a=s[Xe.Y];if(!(e&&o&&a&&t&&i))return;const r=o.scale,n=a.scale,{xKey:l,yLowKey:c,yHighKey:p,connectMissingData:u,marker:d,interpolation:f}=this.properties,y=i.dataSources.get(this.id)??[],g=(r.bandwidth??0)/2,m=t.resolveKeysById(this,"xValue",i),S=t.resolveColumnById(this,"yHighValue",i),D=t.resolveColumnById(this,"yLowValue",i),x=_=>r.convert(m[_])+g,k=[],I=[],L=[],b=(_,B,G)=>{const W=y[_],V=m[_];if(V==null)return;const K=L[L.length-1];if(Number.isFinite(B)&&Number.isFinite(G)){const $=(re,le,Y)=>{I.push({index:_,series:this,itemId:re,datum:W,datumIndex:_,midPoint:{x:J,y:Y},yHighValue:B,yLowValue:G,xValue:V,xKey:l,yLowKey:c,yHighKey:p,point:{x:J,y:Y,size:j},enabled:!0});const _e=this.createLabelData({datumIndex:_,point:{x:J,y:Y},value:le,yLowValue:G,yHighValue:B,itemId:re,inverted:X,datum:W,series:this});k.push(_e)},X=G>B,J=x(_),Q=n.convert(B),ee=n.convert(G),{size:j}=d;$("high",B,Q),$("low",G,ee);const U={high:{point:{x:J,y:Q},xDatum:V,yDatum:B},low:{point:{x:J,y:ee},xDatum:V,yDatum:G}};Array.isArray(K)?K.push(U):K!=null?(K.skip+=1,L.push([U])):L.push([U])}else u||(Array.isArray(K)||K==null?L.push({skip:0}):K.skip+=1)},{dataAggregationFilters:v}=this,[N,M]=r.range,R=M-N,A=v?.find(_=>_.maxRange>R),P=A?.topIndices,T=A?.bottomIndices;let[w,O]=this.visibleRange("xValue",o.range,P);w=Math.max(w-1,0),O=Math.min(O+1,P?.length??m.length),i.input.count<1e3&&(w=0,O=i.input.count);for(let _=w;_<O;_+=1){const B=P?.[_]??_,G=T?.[_]??_;b(B,S[B],D[G])}const F=L.flatMap(_=>{if(!Array.isArray(_))return[];const B=_.map(G=>G.high);return Ac(B,f)}),E=L.flatMap(_=>{if(!Array.isArray(_))return[];const B=_.map(G=>G.low);return Ac(B,f)});return{itemId:`${c}-${p}`,labelData:k,nodeData:I,fillData:{itemId:"high",spans:F,phantomSpans:E},highStrokeData:{itemId:"high",spans:F},lowStrokeData:{itemId:"low",spans:E},scales:this.calculateScaling(),visible:this.visible}}createLabelData({datumIndex:e,point:t,value:i,itemId:s,inverted:o,datum:a,series:r}){const{xKey:n,yLowKey:l,yHighKey:c,xName:p,yName:u,yLowName:d,yHighName:f,label:y}=this.properties,{placement:g,padding:m=10}=y;let S=s;o&&(S=s==="low"?"high":"low");const D=g==="outside"&&S==="high"||g==="inside"&&S==="low"?-1:1;return{x:t.x,y:t.y+m*D,series:r,itemId:s,datum:a,datumIndex:e,text:this.getLabelText(y,{value:i,datum:a,itemId:s,xKey:n,yLowKey:l,yHighKey:c,xName:p,yLowName:d,yHighName:f,yName:u}),textAlign:"center",textBaseline:D===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{opacity:t,visible:i}=e,[s,o]=e.paths,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:lr.None,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i});const r=dS(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),n=this.getShapeFillBBox();rS(s,r,n),fS(s,{stroke:void 0,fill:r,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,strokeWidth:a},void 0,n),s.setProperties({pointerEvents:lr.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:t,visible:i}),kc(this,o),kc(this,s)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(e,t){const[i]=e;i.path.clear(),sS(i,t.fillData),i.markDirty("RangeArea")}updateStrokePath(e,t){const[,i]=e;i.path.clear(),Ic(i,t.highStrokeData.spans),Ic(i,t.lowStrokeData.spans),i.markDirty("RangeArea")}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}getMarkerItemBaseStyle(e){const{properties:t}=this,{marker:i}=t,s=e?t.highlightStyle.item:void 0;return{shape:i.shape,size:i.size,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{xKey:r,yHighKey:n,yLowKey:l,marker:c}=a,{itemStyler:p}=c;if(p!=null)return this.cachedDatumCallback(aS(e,s?"highlight":"node"),()=>this.callWithContext(p,{seriesId:o,datum:t,xKey:r,yHighKey:n,yLowKey:l,highlighted:s,...i}))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yLowKey:o,yHighKey:a,marker:r,fill:n,stroke:l,strokeWidth:c,fillOpacity:p,strokeOpacity:u}=this.properties,d=Ym(i&&this.properties.highlightStyle.item,r.getStyle(),{fill:n,fillOpacity:p,stroke:l,strokeWidth:c,strokeOpacity:u}),f=this.getShapeFillBBox();t.each((y,g)=>{this.updateMarkerStyle(r,y,g.datum,g.point,{xKey:s,yHighKey:a,yLowKey:o},i,d,f)}),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.pointerEvents=lr.None})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{qm(t,this.properties.label,i)})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}getHighlightData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}getTooltipContent(e,t){const{id:i,dataModel:s,processedData:o,axes:a,properties:r}=this,{xName:n,yName:l,yLowKey:c,yLowName:p,xKey:u,yHighKey:d,yHighName:f,tooltip:y}=r,g=a[Xe.X],m=a[Xe.Y];if(!s||!o||!g||!m)return;const S=o.dataSources.get(this.id)?.[e],D=s.resolveKeysById(this,"xValue",o)[e],x=s.resolveColumnById(this,"yHighValue",o)[e],k=s.resolveColumnById(this,"yLowValue",o)[e];if(D==null)return;const I=this.getMarkerItemBaseStyle(!1);Object.assign(I,this.getMarkerItemStyleOverrides(String(e),e,I,!1));const L=`${m.formatDatum(k)} - ${m.formatDatum(x)}`;return this.formatTooltipWithContext(y,{heading:g.formatDatum(D),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:`${p??c} - ${f??d}`,value:L}]},{seriesId:i,datum:S,title:l,itemId:t?.itemId??"unknown",xName:n,yName:l,yLowKey:c,yLowName:p,xKey:u,yHighKey:d,yHighName:f,...I})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,marker:a}=this.properties;return{marker:uS({shape:a.shape,fill:a.fill??e,stroke:a.stroke??t,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},a.fillGradientDefaults,a.fillPatternDefaults,a.fillImageDefaults),line:{stroke:t,strokeOpacity:s,strokeWidth:i,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yLowKey:s,yHighKey:o,yName:a,yLowName:r,yHighName:n,showInLegend:l}=this.properties,c=a??`${r??s} - ${n??o}`,p=`${s}-${o}`;return[{legendType:"category",id:t,itemId:p,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new nS}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateAreaPaths(o,s),Zm(this,a,...o),Qm([t],vc),eS(this,a,t),nr(this,"labels",a,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,contextData:o,paths:a,previousContextData:r}=e,[n,l]=a;if(n==null&&l==null)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(a,o)},p=()=>{t.skipCurrentBatch(),c()};if(o==null||r==null){c(),Pc(this,t,"added",i),Nc(this,"fill_path_properties",t,"add",n),Nc(this,"stroke_path_properties",t,"add",l),nr(this,"labels",t,s);return}const u=Hm(o,r,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){p();return}else if(u.status==="no-op")return;Lc(this.id,"fill_path_properties",t,[n],u.fill.pathProperties),Lc(this.id,"stroke_path_properties",t,[l],u.stroke.pathProperties),u.status==="added"?this.updateAreaPaths(a,o):u.status==="removed"?this.updateAreaPaths(a,r):(Rc(this.id,"fill_path_update",t,[n],u.fill.path),Rc(this.id,"stroke_path_update",t,[l],u.stroke.path)),u.hasMotion&&(Pc(this,t,void 0,i),nr(this,"labels",t,s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,o)})}getFormattedMarkerStyle(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,e.datum,{xKey:t,yLowKey:i,yHighKey:s},!0)}computeFocusBounds(e){const t=Mc(this,e),i=Mc(this,{...e,datumIndex:e.datumIndex+1});if(t&&i)return lS.merge([t,i])}isDatumEnabled(e,t){return t%2===0&&super.isDatumEnabled(e,t)}};so.className="RangeAreaSeries",so.type="range-area";import{_ModuleSupport as yS}from"ag-charts-community";import{boolean as mS,constant as SS,number as xS,required as oo,string as fi,undocumented as Tc}from"ag-charts-core";var{commonSeriesOptionsDefs:DS,rangeAreaSeriesThemeableOptionsDef:bS}=yS,cr={...bS,...DS,type:oo(SS("range-area")),xKey:oo(fi),yLowKey:oo(fi),yHighKey:oo(fi),xName:fi,yName:fi,yLowName:fi,yHighName:fi};cr.pickOutsideVisibleMinorAxis=Tc(mS),cr.focusPriority=Tc(xS);import{_ModuleSupport as ao}from"ag-charts-community";var vS={series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:ao.FILL_PATTERN_DEFAULTS,stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:ao.FILL_PATTERN_DEFAULTS,fillImageDefaults:ao.FILL_IMAGE_DEFAULTS,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"}},axes:{[ao.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:Oc,CARTESIAN_POSITION:Cc}}=Pm,uL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:e=>new so(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Oc.NUMBER,position:Cc.LEFT},{type:Oc.CATEGORY,position:Cc.BOTTOM}],themeTemplate:vS},pr={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:cr,create:e=>new so(e)};import{_ModuleSupport as kS}from"ag-charts-community";import{_ModuleSupport as ro}from"ag-charts-community";var MS=1e3,IS=5;function AS(e,t,i,s){if(e.length<MS)return;const[o,a]=Ea(s);let r=_a(e,IS),{indexData:n,valueData:l}=Va(e,t,i,o,a,r);const c=[{maxRange:r,indexData:n}];for(;r>64;)({indexData:n,valueData:l,maxRange:r}=Ka(n,l,r)),c.push({maxRange:r,indexData:n});return c.reverse(),c}import{_ModuleSupport as NS}from"ag-charts-community";var{AbstractBarSeriesProperties:PS,FillGradientDefaults:LS,FillPatternDefaults:RS,FillImageDefaults:TS,SeriesTooltip:OS,Property:ye,DropShadow:CS,Label:wS}=NS,hr=class extends wS{constructor(){super(...arguments),this.placement="inside",this.padding=6}};h([ye],hr.prototype,"placement",2),h([ye],hr.prototype,"padding",2);var xe=class extends PS{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new LS,this.fillPatternDefaults=new RS,this.fillImageDefaults=new TS,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new CS().set({enabled:!1}),this.label=new hr,this.tooltip=new OS,this.fastDataProcessing=!1}};h([ye],xe.prototype,"xKey",2),h([ye],xe.prototype,"yLowKey",2),h([ye],xe.prototype,"yHighKey",2),h([ye],xe.prototype,"xName",2),h([ye],xe.prototype,"yName",2),h([ye],xe.prototype,"yLowName",2),h([ye],xe.prototype,"yHighName",2),h([ye],xe.prototype,"fill",2),h([ye],xe.prototype,"fillGradientDefaults",2),h([ye],xe.prototype,"fillPatternDefaults",2),h([ye],xe.prototype,"fillImageDefaults",2),h([ye],xe.prototype,"fillOpacity",2),h([ye],xe.prototype,"stroke",2),h([ye],xe.prototype,"strokeWidth",2),h([ye],xe.prototype,"strokeOpacity",2),h([ye],xe.prototype,"lineDash",2),h([ye],xe.prototype,"lineDashOffset",2),h([ye],xe.prototype,"cornerRadius",2),h([ye],xe.prototype,"itemStyler",2),h([ye],xe.prototype,"shadow",2),h([ye],xe.prototype,"label",2),h([ye],xe.prototype,"tooltip",2),h([ye],xe.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:wc,valueProperty:Fc,keyProperty:FS,ChartAxisDirection:no,checkCrisp:BS,updateLabelNode:_S,SMALLEST_KEY_INTERVAL:ES,LARGEST_KEY_INTERVAL:GS,diff:WS,prepareBarAnimationFunctions:Bc,midpointStartingBarPosition:_c,resetBarSelectionsFn:VS,fixNumericExtent:KS,seriesLabelFadeInAnimation:Ec,resetLabelFn:zS,animationValidation:$S,computeBarFocusBounds:HS,visibleRangeIndices:Gc,createDatumId:XS,ContinuousScale:Wc,DiscreteTimeScale:YS,Rect:qS,PointerEvents:US,motion:Vc,applyShapeStyle:jS,findMinMax:JS,getShapeStyle:ur,areScalingEqual:ZS}=ro,QS=class extends ro.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},lo=class extends ro.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[wc.AXIS_ALIGNED,wc.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:VS,label:zS}}),this.properties=new xe,this.dataAggregationFilters=void 0,this.NodeEvent=QS}async processData(e){const{xKey:t,yLowKey:i,yHighKey:s,fastDataProcessing:o}=this.properties,a=!o,r=this.getCategoryAxis()?.scale,n=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:r,yScale:n}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(WS(this.id,this.processedData)),u.push($S()));const d=this.visible?{}:{forceValue:0},{dataModel:f,processedData:y}=await this.requestDataModel(e,this.data,{props:[FS(t,c,{id:"xValue"}),Fc(i,p,{id:"yLowValue",invalidValue:null,...d}),Fc(s,p,{id:"yHighValue",invalidValue:null,...d}),...l?[ES,GS]:[],...u],groupByKeys:a});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.largestDataInterval=y.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(f,y),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="grouped")return;const i=this.axes[no.X];if(i==null||!(Wc.is(i.scale)||YS.is(i.scale)))return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[r];return AS(s,o,a,n)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[s]}=t.domain;if(e===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o?.def.valueType==="category"?s:this.padBandExtent(s)}else{const o=this.domainForClippedRange(e,["yHighValue","yLowValue"],"xValue",!0),a=JS(o);return KS(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(no.Y,["yHighValue","yLowValue"],"xValue",t,!0)}createNodeData(){const{data:e,dataModel:t,groupScale:i,processedData:s,visible:o}=this,a=this.getCategoryAxis(),r=this.getValueAxis();if(!(e&&a&&r&&t&&s?.dataSources))return;const n=a.scale,l=r.scale,c=this.getBarDirection()===no.X,{xKey:p,yLowKey:u,yHighKey:d,strokeWidth:f}=this.properties,y=`${u}-${d}`,g={itemId:y,nodeData:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!o)return g;const m=s.dataSources.get(this.id)??[],S=t.resolveKeysById(this,"xValue",s),D=t.resolveColumnById(this,"yLowValue",s),x=t.resolveColumnById(this,"yHighValue",s),{barWidth:k,groupIndex:I}=this.updateGroupScale(a),L=Wc.is(n)?k*-.5:0,b=i.convert(String(I)),v=BS(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),N=O=>Math.round(n.convert(S[O]))+b+L,M=(O,F,E,C,_,B,G)=>{const W=m[O],V=S[O];if(V==null)return;const K=D[O],$=x[O];if(!Number.isFinite(K?.valueOf())||!Number.isFinite($?.valueOf()))return;const[X,J]=K<$?[K,$]:[$,K],Q=Math.round(l.convert(B)),ee=Math.round(l.convert(_)),j=Math.max(f,Math.abs(ee-Q)),U={x:c?Math.min(Q,ee):E,y:c?E:Math.min(Q,ee),width:c?j:C,height:c?C:j},re={x:U.x+U.width/2,y:U.y+U.height/2},le=this.createLabelData({datumIndex:O,rect:U,barAlongX:c,yLowValue:X,yHighValue:J,datum:W,series:this}),Y={index:F,valueIndex:O,series:this,itemId:y,datum:W,datumIndex:O,xValue:V,yLowValue:K,yHighValue:$,yLowKey:u,yHighKey:d,xKey:p,x:U.x,y:U.y,width:U.width,height:U.height,midPoint:re,crisp:G,labels:le};g.nodeData.push(Y),g.labelData.push(...le)},{dataAggregationFilters:R}=this,[A,P]=n.range,T=P-A,w=R?.find(O=>O.maxRange>T);if(w!=null){const{maxRange:O,indexData:F}=w,[E,C]=Gc(O,a.range,_=>{const B=_*kt,G=F[B+it],W=F[B+dt];if(G===-1)return;const V=(G+W)/2|0;return[N(V),N(W)+k]});for(let _=E;_<C;_+=1){const B=_*kt,G=F[B+it],W=F[B+dt],V=F[B+ft],K=F[B+gt];if(G===-1)continue;const $=(G+W)/2|0;if(S[$]==null)continue;const J=N($),Q=Math.abs(N(G)-N(W))+k,ee=D[V],j=x[K];M($,0,J,Q,ee,j,!1)}}else if(s.type==="ungrouped"){let[O,F]=Gc(m.length,a.range,E=>[N(E),k]);s.input.count<1e3&&(O=0,F=s.input.count);for(let E=O;E<F;E+=1){const C=N(E),_=k,B=D[E],G=x[E];M(E,0,C,_,B,G,v)}}else for(const{datumIndex:O,groupIndex:F}of t.forEachGroupDatum(this,s)){const E=N(O),C=k,_=D[O],B=x[O];M(O,F,E,C,_,B,v)}return g}createLabelData({datumIndex:e,rect:t,barAlongX:i,yLowValue:s,yHighValue:o,datum:a,series:r}){const{xKey:n,yLowKey:l,yHighKey:c,xName:p,yLowName:u,yHighName:d,yName:f,label:y}=this.properties,g={datum:a,xKey:n,yLowKey:l,yHighKey:c,xName:p,yLowName:u,yHighName:d,yName:f},{placement:m,padding:S}=y,x=S*(m==="outside"?1:-1),k={datumIndex:e,x:t.x+(i?-x:t.width/2),y:t.y+(i?t.height/2:t.height+x),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(y,{itemId:"low",value:s,...g}),itemId:"low",datum:a,series:r},I={datumIndex:e,x:t.x+(i?t.width+x:t.width/2),y:t.y+(i?t.height/2:-x),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(y,{itemId:"high",value:o,...g}),itemId:"high",datum:a,series:r};return m==="outside"&&(k.textAlign=i?"right":"center",k.textBaseline=i?"middle":"top",I.textAlign=i?"left":"center",I.textBaseline=i?"middle":"bottom"),[k,I]}nodeFactory(){return new qS}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s,void 0,o=>this.getDatumId(o))}getItemBaseStyle(e){const{properties:t}=this,{cornerRadius:i,fillGradientDefaults:s,fillPatternDefaults:o,fillImageDefaults:a}=t,r=e?t.highlightStyle.item:void 0;return ur({fill:r?.fill??t.fill,fillOpacity:r?.fillOpacity??t.fillOpacity,stroke:r?.stroke??t.stroke,strokeWidth:r?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:r?.strokeOpacity??t.strokeOpacity,lineDash:r?.lineDash??t.lineDash??[],lineDashOffset:r?.lineDashOffset??t.lineDashOffset,cornerRadius:i},s,o,a)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{xKey:r,yHighKey:n,yLowKey:l,itemStyler:c,fillGradientDefaults:p,fillPatternDefaults:u,fillImageDefaults:d}=a;if(c==null)return;const f=this.cachedDatumCallback(XS(e,s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:o,datum:t,xKey:r,yHighKey:n,yLowKey:l,highlighted:s,...i}));return ur(f,p,u,d)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getCategoryDirection()===no.X,o=this.getItemBaseStyle(i),a=this.getShapeFillBBox();t.each((r,n)=>{const l=this.getItemStyleOverrides(String(n.datumIndex),n.datum,o,i);jS(r,o,l,a),r.cornerRadius=l?.cornerRadius??o.cornerRadius,r.visible=s?n.width>0:n.height>0,r.crisp=n.crisp})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=US.None})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{_S(t,this.properties.label,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yName:n,yLowKey:l,yHighKey:c,yLowName:p,yHighName:u,tooltip:d}=o,f=this.getCategoryAxis(),y=this.getValueAxis();if(!i||!s||!f||!y)return;const g=s.dataSources.get(this.id)?.[e],m=i.resolveKeysById(this,"xValue",s)[e],S=i.resolveColumnById(this,"yHighValue",s)[e],D=i.resolveColumnById(this,"yLowValue",s)[e];if(m==null)return;const x=this.getItemBaseStyle(!1);Object.assign(x,this.getItemStyleOverrides(String(e),g,x,!1));const k=`${y.formatDatum(D)} - ${y.formatDatum(S)}`;return this.formatTooltipWithContext(d,{heading:f.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:n,fallbackLabel:`${p??l} - ${u??c}`,value:k}]},{seriesId:t,datum:g,title:n,xKey:a,xName:r,yName:n,yLowKey:l,yHighKey:c,yLowName:p,yHighName:u,...x})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:s,strokeOpacity:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:ur({fill:e,stroke:t,fillOpacity:s,strokeOpacity:o,strokeWidth:i,lineDash:a,lineDashOffset:r},n,l,c)}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yName:s,yLowName:o,yHighName:a,yLowKey:r,yHighKey:n,showInLegend:l}=this.properties,c=s??`${o??r} - ${a??n}`,p=`${r}-${n}`;return[{legendType:"category",id:t,itemId:p,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=Bc(_c(this.isVertical(),"normal"));Vc.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],i),Ec(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s,previousContextData:o}=e,a=ro.calculateDataDiff(this.id,t,this.getDatumId.bind(this),s,o,this.processedData);this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=o==null?"fade":"normal",n=Bc(_c(this.isVertical(),r));Vc.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n,(l,c)=>this.getDatumId(c),a),(a?.changed||!ZS(s.groupScale,o?.groupScale))&&Ec(this,"labels",this.ctx.animationManager,i)}getDatumId(e){return`${e.xValue}-${e.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return HS(this,this.contextNodeData?.nodeData[e])}};lo.className="RangeBarSeries",lo.type="range-bar";import{_ModuleSupport as ex}from"ag-charts-community";import{boolean as Kc,constant as tx,number as ix,required as co,string as gi,undocumented as dr}from"ag-charts-core";var{commonSeriesOptionsDefs:sx,rangeBarSeriesThemeableOptionsDef:ox}=ex,po={...ox,...sx,type:co(tx("range-bar")),xKey:co(gi),yLowKey:co(gi),yHighKey:co(gi),xName:gi,yName:gi,yLowName:gi,yHighName:gi};po.pickOutsideVisibleMinorAxis=dr(Kc),po.fastDataProcessing=dr(Kc),po.focusPriority=dr(ix);import{_ModuleSupport as fr}from"ag-charts-community";var ax={series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:fr.FILL_PATTERN_DEFAULTS,fillImageDefaults:fr.FILL_IMAGE_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},placement:"inside"}},axes:{[fr.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},xL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:e=>new lo(e),tooltipDefaults:{range:"exact"},defaultAxes:kS.DIRECTION_SWAP_AXES,themeTemplate:ax,groupable:!0},gr={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:po,create:e=>new lo(e)};import{_ModuleSupport as rx}from"ag-charts-community";import{_ModuleSupport as yi}from"ag-charts-community";import{_ModuleSupport as nx}from"ag-charts-community";var{AbstractBarSeriesProperties:lx,BaseProperties:hs,FillGradientDefaults:cx,FillPatternDefaults:px,FillImageDefaults:hx,PropertiesArray:ux,SeriesTooltip:dx,Property:te,DropShadow:fx,Label:gx}=nx,ho=class extends hs{};h([te],ho.prototype,"totalType",2),h([te],ho.prototype,"index",2),h([te],ho.prototype,"axisLabel",2);var zc=class extends hs{};h([te],zc.prototype,"renderer",2);var yr=class extends gx{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};h([te],yr.prototype,"placement",2),h([te],yr.prototype,"padding",2);var Ge=class extends hs{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new cx,this.fillPatternDefaults=new px,this.fillImageDefaults=new hx,this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new fx().set({enabled:!1}),this.label=new yr,this.tooltip=new zc}};h([te],Ge.prototype,"name",2),h([te],Ge.prototype,"fill",2),h([te],Ge.prototype,"fillGradientDefaults",2),h([te],Ge.prototype,"fillPatternDefaults",2),h([te],Ge.prototype,"fillImageDefaults",2),h([te],Ge.prototype,"stroke",2),h([te],Ge.prototype,"fillOpacity",2),h([te],Ge.prototype,"strokeOpacity",2),h([te],Ge.prototype,"lineDash",2),h([te],Ge.prototype,"lineDashOffset",2),h([te],Ge.prototype,"strokeWidth",2),h([te],Ge.prototype,"cornerRadius",2),h([te],Ge.prototype,"itemStyler",2),h([te],Ge.prototype,"shadow",2),h([te],Ge.prototype,"label",2),h([te],Ge.prototype,"tooltip",2);var mi=class extends hs{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};h([te],mi.prototype,"enabled",2),h([te],mi.prototype,"stroke",2),h([te],mi.prototype,"strokeOpacity",2),h([te],mi.prototype,"lineDash",2),h([te],mi.prototype,"lineDashOffset",2),h([te],mi.prototype,"strokeWidth",2);var uo=class extends hs{constructor(){super(...arguments),this.positive=new Ge,this.negative=new Ge,this.total=new Ge}};h([te],uo.prototype,"positive",2),h([te],uo.prototype,"negative",2),h([te],uo.prototype,"total",2);var Vt=class extends lx{constructor(){super(...arguments),this.item=new uo,this.totals=new ux(ho),this.line=new mi,this.tooltip=new dx}};h([te],Vt.prototype,"xKey",2),h([te],Vt.prototype,"yKey",2),h([te],Vt.prototype,"xName",2),h([te],Vt.prototype,"yName",2),h([te],Vt.prototype,"item",2),h([te],Vt.prototype,"totals",2),h([te],Vt.prototype,"line",2),h([te],Vt.prototype,"tooltip",2);var{adjustLabelPlacement:yx,SeriesNodePickMode:$c,fixNumericExtent:mx,valueProperty:Hc,keyProperty:Sx,accumulativeValueProperty:fo,trailingAccumulatedValueProperty:xx,ChartAxisDirection:mr,createDatumId:Dx,checkCrisp:bx,updateLabelNode:vx,prepareBarAnimationFunctions:kx,collapsedStartingBarPosition:Mx,resetBarSelectionsFn:Ix,seriesLabelFadeInAnimation:Ax,resetLabelFn:Nx,animationValidation:Px,DEFAULT_CARTESIAN_DIRECTION_KEYS:Lx,DEFAULT_CARTESIAN_DIRECTION_NAMES:Rx,computeBarFocusBounds:Tx,isContinuous:Xc,Rect:Ox,motion:Cx,applyShapeStyle:wx,getShapeStyle:Sr}=yi,go=class extends yi.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:Lx,directionNames:Rx,categoryKey:void 0,pickModes:[$c.NEAREST_NODE,$c.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:Ix,label:Nx}}),this.properties=new Vt,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){const{xKey:t,yKey:i,totals:s}=this.properties,{data:o=[]}=this;if(!this.visible)return;const a=D=>Xc(D)&&Number(D)>=0,r=D=>Xc(D)&&Number(D)>=0,n=D=>D==="total"||D==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],p=s.reduce((D,x)=>{const k=D.get(x.index);return k?k.push(x):D.set(x.index,[x]),D},new Map);o.forEach((D,x)=>{c.push(D),p.get(x)?.forEach(k=>c.push({...k.toJson(),[t]:k.axisLabel}))});const u=[];this.ctx.animationManager.isSkipped()||u.push(Px());const d=this.getCategoryAxis()?.scale,f=this.getValueAxis()?.scale,{isContinuousX:y,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:f}),{processedData:S}=await this.requestDataModel(e,c,{props:[Sx(t,g,{id:"xValue"}),fo(i,m,{...l,id:"yCurrent"}),fo(i,m,{...l,missingValue:0,id:"yCurrentTotal"}),fo(i,m,{...l,id:"yCurrentPositive",validation:a}),fo(i,m,{...l,id:"yCurrentNegative",validation:r}),xx(i,m,{...l,id:"yPrevious"}),Hc(i,m,{id:"yRaw"}),Hc("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:n}),...y?[yi.SMALLEST_KEY_INTERVAL,yi.LARGEST_KEY_INTERVAL]:[],...u]});this.smallestDataInterval=S.reduced?.smallestKeyInterval,this.largestDataInterval=S.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[s],values:o}=t.domain;if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return s;const r=e===mr.Y,n=this.getCategoryAxis().isReversed();return this.padBandExtent(s,n!==r)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),r=o[a],n=[Math.min(0,r[0]),Math.max(0,r[1])];return mx(n)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!e||!s||!o||!t||!i)return;const{line:a}=this.properties,r=s.scale,n=o.scale,l=this.getBarDirection()===mr.X,c=this.getBandwidth(s)??10,p=s.isReversed(),u=o.isReversed();if(i.type!=="ungrouped")return;const d={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!this.visible)return d;const f=[],y=t.resolveKeysById(this,"xValue",i),g=t.resolveColumnById(this,"yRaw",i),m=t.resolveColumnById(this,"totalTypeValue",i),S=t.resolveColumnById(this,"yCurrent",i),D=t.resolveColumnById(this,"yPrevious",i),x=t.resolveColumnById(this,"yCurrentTotal",i),k=bx(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function I(T,w,O){return T||w?{cumulativeValue:x[O],trailingValue:w?b:0}:{cumulativeValue:S[O],trailingValue:D[O]}}function L(T,w,O,F,E){return T?F:w?(F??0)-(E??0):O}let b=0;const{xKey:v,yKey:N,xName:M,yName:R}=this.properties;(i.dataSources.get(this.id)??[]).forEach((T,w)=>{const O=m[w],F=this.isSubtotal(O),E=this.isTotal(O),C=E||F,_=y[w];if(_==null)return;const B=Math.round(r.convert(_)),G=g[w],{cumulativeValue:W,trailingValue:V}=I(E,F,w);C&&(b=W??0);const K=Math.round(n.convert(W)),$=Math.round(n.convert(V)),X=L(E,F,G,W,V),J=(X??0)>=0,Q=this.getSeriesItemType(J,O),{strokeWidth:ee,label:j}=this.getItemConfig(Q),U=J?K:$,re=J?$:K,le=Math.max(ee,Math.abs(re-U)),Y={x:l?Math.min(U,re):B,y:l?B:Math.min(U,re),width:l?le:c,height:l?c:le},_e={x:Y.x+Y.width/2,y:Y.y+Y.height/2},Ee=C?K:$,pe=Math.floor(a.strokeWidth)%2/2,Me=p?K:Ee,ne=p?Ee:K;let fe,Ie;l?(fe={x:Me+pe,y:Y.y},Ie={x:ne+pe,y:Y.y+Y.height}):(fe={x:Y.x,y:Me+pe},Ie={x:Y.x+Y.width,y:ne+pe});const at={x:p?Ie.x:fe.x,y:p?Ie.y:fe.y,x2:p?fe.x:Ie.x,y2:p?fe.y:Ie.y,size:0};f.push(at);const Dt=Q==="subtotal"?"total":Q,Et=this.getLabelText(j,{itemId:Dt,value:X,datum:T,xKey:v,yKey:N,xName:M,yName:R}),ri={index:w,series:this,itemId:Q,datum:T,datumIndex:w,cumulativeValue:W??0,xValue:_,yValue:X,yKey:N,xKey:v,x:Y.x,y:Y.y,width:Y.width,height:Y.height,midPoint:_e,crisp:k,label:{text:Et,...yx({isUpward:(X??-1)>=0!==u,isVertical:!l,placement:j.placement,padding:j.padding,rect:Y})}};d.nodeData.push(ri),d.labelData.push(ri)});const P=this.properties.line.enabled;return S!=null&&P&&(d.pointData=f),d}updateSeriesItemTypes(){const{dataModel:e,seriesItemTypes:t,processedData:i}=this;if(!e||!i)return;t.clear();const s=e.resolveProcessedDataIndexById(this,"yCurrentPositive"),o=e.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=e.resolveProcessedDataIndexById(this,"totalTypeValue"),r=i.domain.values[s]??[],n=i.domain.values[o]??[];r.length>0&&t.add("positive"),n.length>0&&t.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&t.add("total")})}isSubtotal(e){return e==="subtotal"}isTotal(e){return e==="total"}nodeFactory(){return new Ox}getSeriesItemType(e,t){return t??(e?"positive":"negative")}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s)}getItemStyle(e,t,i,s){const{id:o,properties:a}=this,r=a.item[i==="subtotal"?"total":i],n=s?a.highlightStyle.item:void 0,{itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:p,fillImageDefaults:u}=r,{xKey:d,yKey:f}=a,y=Sr({fill:n?.fill??r.fill,fillOpacity:n?.fillOpacity??r.fillOpacity,stroke:n?.stroke??r.stroke,strokeWidth:n?.strokeWidth??r.strokeWidth,strokeOpacity:n?.strokeOpacity??r.strokeOpacity,lineDash:n?.lineDash??r.lineDash??[],lineDashOffset:n?.lineDashOffset??r.lineDashOffset,cornerRadius:r.cornerRadius},c,p,u);if(l!=null){let g=this.cachedDatumCallback(Dx(e,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:o,itemId:i,datum:t,xKey:d,yKey:f,highlighted:s,...y}));g=Sr(g,c,p,u),Object.assign(y,g)}return y}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getCategoryDirection()===mr.X,o=this.getShapeFillBBox();t.each((a,r)=>{const n=r.itemId,l=this.getItemStyle(String(r.datumIndex),r.datum,n,i);wx(a,l,void 0,o),a.visible=s?r.width>0:r.height>0,a.crisp=r.crisp})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(t.length===0)return i.update([]);const s=t.filter(o=>{const{label:a}=this.getItemConfig(o.itemId);return a.enabled});return i.update(s)}updateLabelNodes(e){e.labelSelection.each((t,i)=>{vx(t,this.getItemConfig(i.itemId).label,i.label)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yKey:n,yName:l,tooltip:c}=o,p=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!s||!p||!u)return;const d=s.dataSources.get(this.id)?.[e],f=i.resolveKeysById(this,"xValue",s)[e],y=i.resolveColumnById(this,"yRaw",s)[e],g=i.resolveColumnById(this,"yCurrentTotal",s),m=i.resolveColumnById(this,"totalTypeValue",s);if(f==null)return;const S=m[e],D=(y??0)>=0,x=this.getSeriesItemType(D,S);let k;if(this.isTotal(S))k=g[e];else if(this.isSubtotal(S)){k=g[e];for(let L=e-1;L>=0;L-=1)if(this.isSubtotal(m[L])){k=k-g[L];break}}else k=y;const I=this.getItemStyle(String(e),d,x,!1);return this.formatTooltipWithContext(c,{heading:p.formatDatum(f),symbol:this.legendItemSymbol(x),data:[{label:l,fallbackLabel:n,value:u.formatDatum(k)}]},{seriesId:t,datum:d,title:l,itemId:x,xKey:a,xName:r,yKey:n,yName:l,...I})}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:s,strokeOpacity:o,strokeWidth:a,lineDash:r,lineDashOffset:n,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:p}=this.getItemConfig(e);return{marker:Sr({fill:t,stroke:i,fillOpacity:s,strokeOpacity:o,strokeWidth:a,lineDash:r,lineDashOffset:n},l,c,p)}}getLegendData(e){if(e!=="category")return[];const{id:t,seriesItemTypes:i}=this,s=[],o=r=>r.charAt(0).toUpperCase()+r.substring(1),{showInLegend:a}=this.properties;return i.forEach(r=>{const{name:n}=this.getItemConfig(r);s.push({legendType:"category",id:t,itemId:r,seriesId:t,enabled:!0,label:{text:n??o(r)},symbol:this.legendItemSymbol(r),hideInLegend:!a,isFixed:!0})}),s}toggleSeriesItem(){}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s}=e,o=kx(Mx(this.isVertical(),this.axes,"normal"));Cx.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o),Ax(this,"labels",this.ctx.animationManager,i);const{pointData:a}=s;a&&(this.isVertical()?this.animateConnectorLinesVertical(e):this.animateConnectorLinesHorizontal(e))}animateConnectorLinesHorizontal(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:s}=i;this.updateLineNode(i);const o=this.getValueAxis(),a=o?.isReversed(),r=a?(p,u)=>p<u:(p,u)=>p>u,n=o?.scale.convert(0),l=t.reduce((p,u)=>(r(u.x,p)&&(p=u.x),p),a?1/0:0),c=(p,u,d,f,y)=>(p-u)/(d-u)*(y-f)+f;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:l,ease:yi.Motion.easeOut,collapsable:!1,onUpdate(p){s.clear(!0),t.forEach((u,d)=>{const f=c(p,n,l,n,u.x),y=c(p,n,l,n,u.x2);d!==0&&s.lineTo(f,u.y),s.moveTo(y,u.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateConnectorLinesVertical(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:s}=i;this.updateLineNode(i);const o=this.getValueAxis(),a=o?.isReversed(),r=a?(p,u)=>p>u:(p,u)=>p<u,n=o?.scale.convert(0),l=t.reduce((p,u)=>(r(u.y,p)&&(p=u.y),p),a?0:1/0),c=(p,u,d,f,y)=>(p-u)/(d-u)*(y-f)+f;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:l,ease:yi.Motion.easeOut,collapsable:!1,onUpdate(p){s.clear(!0),t.forEach((u,d)=>{const f=c(p,n,l,n,u.y),y=c(p,n,l,n,u.y2);d!==0&&s.lineTo(u.x,f),s.moveTo(u.x2,y)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath({contextData:e,paths:t}){if(t.length===0)return;const[i]=t;this.updateLineNode(i);const{path:s}=i;s.clear(!0);const{pointData:o}=e;o&&(o.forEach((a,r)=>{r!==0&&s.lineTo(a.x,a.y),s.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:this.getStrokeWidth(i),strokeOpacity:s,lineDash:o,lineDashOffset:a,lineJoin:"round",pointerEvents:yi.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return Tx(this,this.contextNodeData?.nodeData[e])}};go.className="WaterfallSeries",go.type="waterfall";import{_ModuleSupport as Fx}from"ag-charts-community";import{arrayOfDefs as Bx,constant as _x,positiveNumber as Ex,required as Wi,string as us,union as Gx}from"ag-charts-core";var{commonSeriesOptionsDefs:Wx,waterfallSeriesThemeableOptionsDef:Vx}=Fx,Kx={...Vx,...Wx,type:Wi(_x("waterfall")),xKey:Wi(us),yKey:Wi(us),xName:us,yName:us,totals:Bx({totalType:Wi(Gx("total","subtotal")),index:Wi(Ex),axisLabel:Wi(us)},"a total definition options array")};import{_ModuleSupport as Yc}from"ag-charts-community";function xr(e,t){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`./${t}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${e}.fill`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${e}.fill`}]},{$isPattern:[{$palette:`${e}.fill`}]},{$isImage:[{$palette:`${e}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${e}.fill`}]}]},[{$mix:[{$palette:`${e}.fill`},"black",.15]},{$mix:[{$palette:`${e}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:Yc.FILL_PATTERN_DEFAULTS,fillImageDefaults:Yc.FILL_IMAGE_DEFAULTS,stroke:{$palette:`${e}.stroke`},strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end"}}}var zx={series:{item:{positive:xr("altUp",0),negative:xr("altDown",1),total:xr("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},AL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:e=>new go(e),tooltipDefaults:{range:"exact"},defaultAxes:rx.DIRECTION_SWAP_AXES,themeTemplate:zx},Dr={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:Kx,create:e=>new go(e)},{NewAreaSeriesModule:$x,NewBarSeriesModule:Hx,NewBubbleSeriesModule:Xx,NewHistogramSeriesModule:Yx,NewLineSeriesModule:qx,NewScatterSeriesModule:Ux,numberFormatValidator:jx,without:nt}=gg,qc={width:ut,height:ut,grip:ss,fill:Ks,stroke:Ks,strokeWidth:ut,cornerRadius:ut},lt=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],Jx={enabled:ss,height:ut,spacing:ut,cornerRadius:Ol,mask:{fill:Ks,fillOpacity:Dg,stroke:Ks,strokeWidth:ut},minHandle:qc,maxHandle:qc,miniChart:{enabled:ss,padding:{top:ut,bottom:ut},label:{enabled:ss,avoidCollisions:ss,spacing:ut,format:jx,formatter:Sg,interval:{minSpacing:ut,maxSpacing:ut,values:yg,step:Ol},...xg},series:mg(bg({area:nt($x.options,lt),bar:nt(Hx.options,[...lt,"errorBar","label","legendItemName","direction"]),"box-plot":nt(Fa.options,[...lt,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"]),bubble:nt(Xx.options,[...lt,"title","label","labelKey","labelName","sizeName"]),candlestick:nt(Za.options,lt),heatmap:nt(sr.options,[...lt,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"]),histogram:nt(Yx.options,[...lt,"label"]),line:nt(qx.options,[...lt,"errorBar","title","label"]),ohlc:nt(ar.options,lt),"range-area":nt(pr.options,[...lt,"label","yLowName","yHighName"]),"range-bar":nt(gr.options,[...lt,"direction","label","yLowName","yHighName"]),scatter:nt(Ux.options,[...lt,"errorBar","title","label","labelKey","labelName"]),waterfall:nt(Dr.options,[...lt,"direction"])},"miniChart series options"))}},{annotationOptionsDef:Zx}=Zf,Qx={type:"plugin",name:"annotations",chartType:"cartesian",options:Zx,create(){return null}},eD={type:"plugin",name:"navigator",chartType:"cartesian",options:Jx,create(){return null}},tD={type:"plugin",name:"initialState",options:fg,create(){return null}};import{_ModuleSupport as Uc}from"ag-charts-community";import{_ModuleSupport as iD}from"ag-charts-community";import{Logger as sD}from"ag-charts-core";import{_ModuleSupport as jc}from"ag-charts-community";import{Logger as oD}from"ag-charts-core";function Jc(e,t,i){i||(t=aD(t));const s=new Map;for(const a of e)s.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let o=0;return s.forEach((a,r)=>{o=Math.max(o,br(s,t,a,r,-1,[])+br(s,t,a,r,1,[])+1)}),{links:t,nodeGraph:s,maxPathLength:o}}function Zc(e,t,i,s){const o=s.indexOf(t);if(o!==-1){for(let r=o;r<s.length;r+=1)i.add(s[r]);return}s.push(t);const{toNode:a}=t;for(const r of e)r.fromNode===a&&Zc(e,r,i,s);s.pop()}function aD(e){const t=new Set;for(const i of e)Zc(e,i,t,[]);return t.size!==0&&oD.warnOnce("Some links formed circular references. These will be removed from the output."),t.size===0?e:e.filter(i=>!t.has(i))}function br(e,t,i,s,o,a){if(a.includes(s))return 1/0;let r=o===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(r===-1){r=0;const n=o===-1?i.linksBefore:i.linksAfter;for(const l of t){const{fromNode:c,toNode:p}=l,u=o===-1?p.id:c.id,d=o===-1?c.id:p.id,f=s===u?e.get(d):void 0;f!=null&&(n.push({node:f,link:l}),a?.push(s),r=Math.max(r,br(e,t,f,d,o,a)+1),a?.pop())}o===-1?i.maxPathLengthBefore=r:i.maxPathLengthAfter=r}return r}var{Series:rD,DataController:nD,keyProperty:lD,valueProperty:yo,Selection:Si,Group:Vi,TransformableText:cD}=jc,pD=class extends jc.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s);const{datumIndex:o}=i,a=s.contextNodeData?.nodeData.find(r=>r.datumIndex.type===o.type&&r.datumIndex.index===o.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},Qc=class extends rD{constructor(){super(...arguments),this.NodeEvent=pD,this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Vi({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Vi({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Vi({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Vi({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Vi({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Vi({name:"nodeGroup"})),this.labelSelection=Si.select(this.labelGroup,cD),this.linkSelection=Si.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Si.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Si.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Si.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Si.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Si.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(e){this._chartNodes=e,this.nodes===e&&(this.nodeDataRefresh=!0)}async processData(e){const{data:t,nodes:i}=this;if(t==null)return;const{fromKey:s,toKey:o,sizeKey:a,idKey:r,labelKey:n}=this.properties,l=new nD("standalone",e.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[lD(r,void 0,{id:"idValue",includeProperty:!1}),...n!=null?[yo(n,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,p=e.request(this.id,t,{props:[yo(s,void 0,{id:"fromValue",includeProperty:!1}),yo(o,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[yo(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[u,d]=await Promise.all([c,p]);this.nodesDataModel=u?.dataModel,this.nodesProcessedData=u?.processedData,this.linksDataModel=d?.dataModel,this.linksProcessedData=d?.processedData;const f=new Map;if(u==null){const y=d.dataModel.resolveColumnById(this,"fromValue",d.processedData),g=d.dataModel.resolveColumnById(this,"toValue",d.processedData),m=S=>{const D=f.size;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:D},type:1,index:D,linksBefore:[],linksAfter:[],id:S,size:0,label:S}};d.processedData.dataSources.get(this.id)?.forEach((S,D)=>{const x=y[D],k=g[D];x==null||k==null||(f.has(x)||f.set(x,m(x)),f.has(k)||f.set(k,m(k)))})}else{const y=u.dataModel.resolveColumnById(this,"idValue",u.processedData),g=n!=null?u.dataModel.resolveColumnById(this,"labelValue",u.processedData):void 0;u.processedData.dataSources.get(this.id)?.forEach((m,S)=>{const D=y[S],x=g?.[S];f.set(D,{series:this,itemId:void 0,datum:m,datumIndex:{type:1,index:S},type:1,index:S,linksBefore:[],linksAfter:[],id:D,size:0,label:x})})}this.processedNodes=f}getNodeGraph(e,t,{includeCircularReferences:i}){const{linksDataModel:s,linksProcessedData:o}=this;if(s==null||o==null){const{links:y,nodeGraph:g,maxPathLength:m}=Jc(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:g,links:y,maxPathLength:m}}const{sizeKey:a}=this.properties,r=s.resolveColumnById(this,"fromValue",o),n=s.resolveColumnById(this,"toValue",o),l=a!=null?s.resolveColumnById(this,"sizeValue",o):void 0,c=new Map;this.processedNodes.forEach(y=>{const g=e(y);c.set(y.id,g)});const p=[];o.dataSources.get(this.id)?.forEach((y,g)=>{const m=r[g],S=n[g],D=l!=null?l[g]:1,x=c.get(m),k=c.get(S);if(D<=0||x==null||k==null)return;const I=t({series:this,itemId:void 0,datum:y,datumIndex:{type:0,index:g},type:0,index:g,fromNode:x,toNode:k,size:D});p.push(I)});const{links:u,nodeGraph:d,maxPathLength:f}=Jc(c.values(),p,i);return d.forEach(y=>{y.datum.linksBefore=y.linksBefore.map(g=>g.link),y.datum.linksAfter=y.linksAfter.map(g=>g.link)}),this.nodeCount=d.size,this.linkCount=u.length,{nodeGraph:d,links:u,maxPathLength:f}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){const{seriesRect:t}=e,i={seriesRectWidth:t?.width??0,seriesRectHeight:t?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const s=this.contextNodeData?.nodeData??[],o=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:p}=a;a=p!=null?s.find(u=>u.type===1&&u.id===p):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlightStyle.series.dimOpacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:s.filter(p=>p.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:s.filter(p=>p.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let r,n,l,c;a?.type===1?(r=s.filter(p=>p.type===0&&(p.toNode===a||p.fromNode===a)),n=r.map(p=>p.fromNode===a?p.toNode:p.fromNode),n.push(a),l=[],c=[a]):a?.type===0?(r=[a],n=[a.fromNode,a.toNode],l=[a],c=[]):(r=[],n=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:r,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:n,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(e){}getSeriesDomain(e){return[]}getSeriesRange(e,t){return[NaN,NaN]}legendItemSymbol(e,t,i={}){const{fills:s,strokes:o}=this.properties,{fill:a=s[t%s.length],fillOpacity:r=1,stroke:n=o[t%o.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:p=[0],lineDashOffset:u=0}=i;return{marker:{fill:a,fillOpacity:r,stroke:n,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:u}}}getLegendData(e){if(e!=="category")return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:s},o)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:s??i},symbol:this.legendItemSymbol(1,o),hideInLegend:!t,isFixed:!0}))}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.linkSelection.each((o,a)=>{const r=o.containsPoint(e,t)?0:1/0;r<i&&(i=r,s=a)}),this.nodeSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}getDatumAriaText(e,t){if(e.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(e.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t})}pickFocus(e){const{datumIndexDelta:t,otherIndexDelta:i}=e,s=this.contextNodeData?.nodeData[e.datumIndex-e.datumIndexDelta];let o=s;if(i!==0||t===0)return;if(s?.type===0){const n=Array.from(this.linkSelection,p=>p.datum),c=n.indexOf(s)+t;if(c>=0&&c<n.length)o=n[c];else if(c>0)o=n[n.length-1];else{const p=Array.from(this.nodeSelection,u=>u.datum);o=p[p.length-1]}}else if(s?.type===1){const n=Array.from(this.nodeSelection,p=>p.datum),c=n.indexOf(s)+t;c>=0&&c<n.length?o=n[c]:c<0?o=n[0]:o=Array.from(this.linkSelection,u=>u.datum)[0]}if(o==null)return;const a=o.type===1?Array.from(this.nodeSelection).find(n=>n.datum===o):Array.from(this.linkSelection).find(n=>n.datum===o);if(a==null)return;const r=this.computeFocusBounds(a.node);if(r!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:r,clipFocusBox:!0}}getCategoryValue(e){}datumIndexForCategoryValue(e){}};import{_ModuleSupport as hD}from"ag-charts-community";var{Path:uD,SceneChangeDetection:jt}=hD;function ep({radius:e,startAngle:t,endAngle:i,tension:s}){const o=e*Math.cos(t),a=e*Math.sin(t),r=e*Math.cos(i),n=e*Math.sin(i),l=o*s,c=a*s,p=r*s,u=n*s;return{x:[o,l,p,r],y:[a,c,u,n]}}var Kt=class extends uD{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(e,t,i,s,o,a,r,n){const{path:l,tension:c}=this,p=1-c;l.cubicCurveTo((i-e)*p+e,(s-t)*p+t,(o-r)*p+r,(a-n)*p+n,r,n)}updatePath(){const{path:e,centerX:t,centerY:i,radius:s}=this;let{startAngle1:o,endAngle1:a,startAngle2:r,endAngle2:n}=this;o>r&&([o,r]=[r,o],[a,n]=[n,a]),e.clear();const l=t+s*Math.cos(o),c=i+s*Math.sin(o);e.moveTo(l,c),this.tensionedCurveTo(l,c,t,i,t,i,t+s*Math.cos(n),i+s*Math.sin(n)),e.arc(t,i,s,n,r,!0),this.tensionedCurveTo(t+s*Math.cos(r),i+s*Math.sin(r),t,i,t,i,t+s*Math.cos(a),i+s*Math.sin(a)),e.arc(t,i,s,a,o,!0),e.closePath()}};h([jt()],Kt.prototype,"centerX",2),h([jt()],Kt.prototype,"centerY",2),h([jt()],Kt.prototype,"radius",2),h([jt()],Kt.prototype,"startAngle1",2),h([jt()],Kt.prototype,"endAngle1",2),h([jt()],Kt.prototype,"startAngle2",2),h([jt()],Kt.prototype,"endAngle2",2),h([jt()],Kt.prototype,"tension",2);import{_ModuleSupport as dD}from"ag-charts-community";var{FillGradientDefaults:fD,FillPatternDefaults:gD,FillImageDefaults:yD,BaseProperties:tp,SeriesTooltip:mD,SeriesProperties:SD,Property:ie,Label:xD}=dD,vr=class extends xD{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};h([ie],vr.prototype,"spacing",2),h([ie],vr.prototype,"maxWidth",2);var wt=class extends tp{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};h([ie],wt.prototype,"fill",2),h([ie],wt.prototype,"fillOpacity",2),h([ie],wt.prototype,"stroke",2),h([ie],wt.prototype,"strokeOpacity",2),h([ie],wt.prototype,"strokeWidth",2),h([ie],wt.prototype,"lineDash",2),h([ie],wt.prototype,"lineDashOffset",2),h([ie],wt.prototype,"tension",2),h([ie],wt.prototype,"itemStyler",2);var At=class extends tp{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([ie],At.prototype,"spacing",2),h([ie],At.prototype,"width",2),h([ie],At.prototype,"fill",2),h([ie],At.prototype,"fillOpacity",2),h([ie],At.prototype,"stroke",2),h([ie],At.prototype,"strokeOpacity",2),h([ie],At.prototype,"strokeWidth",2),h([ie],At.prototype,"lineDash",2),h([ie],At.prototype,"lineDashOffset",2),h([ie],At.prototype,"itemStyler",2);var We=class extends SD{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new fD,this.fillPatternDefaults=new gD,this.fillImageDefaults=new yD,this.fills=[],this.strokes=[],this.label=new vr,this.link=new wt,this.node=new At,this.tooltip=new mD}};h([ie],We.prototype,"fromKey",2),h([ie],We.prototype,"toKey",2),h([ie],We.prototype,"idKey",2),h([ie],We.prototype,"idName",2),h([ie],We.prototype,"labelKey",2),h([ie],We.prototype,"labelName",2),h([ie],We.prototype,"sizeKey",2),h([ie],We.prototype,"sizeName",2),h([ie],We.prototype,"nodes",2),h([ie],We.prototype,"fillGradientDefaults",2),h([ie],We.prototype,"fillPatternDefaults",2),h([ie],We.prototype,"fillImageDefaults",2),h([ie],We.prototype,"fills",2),h([ie],We.prototype,"strokes",2),h([ie],We.prototype,"label",2),h([ie],We.prototype,"link",2),h([ie],We.prototype,"node",2),h([ie],We.prototype,"tooltip",2);var{SeriesNodePickMode:ip,CachedTextMeasurerPool:DD,TextWrapper:bD,TextUtils:vD,createDatumId:mo,angleBetween:So,normalizeAngle360:kD,isBetweenAngles:sp,Sector:MD,evaluateBezier:xo,applyShapeStyle:op,getShapeStyle:Do,BBox:ID}=iD,bo=e=>e.startAngle+So(e.startAngle,e.endAngle)/2,vo=class extends Qc{constructor(e){super({moduleCtx:e,pickModes:[ip.NEAREST_NODE,ip.EXACT_SHAPE_MATCH]}),this.properties=new We}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Kt}nodeFactory(){return new MD}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:o,sizeKey:a,label:{spacing:r,maxWidth:n,fontSize:l},node:{width:c,spacing:p}}=this.properties,u=t/2,d=i/2;let f=[];const{nodeGraph:y,links:g}=this.getNodeGraph(P=>({...P,centerX:u,centerY:d,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),P=>({...P,centerX:u,centerY:d,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let m=0;y.forEach(({datum:P,linksBefore:T,linksAfter:w},O)=>{const F=T.reduce((E,{link:C})=>E+C.size,0)+w.reduce((E,{link:C})=>E+C.size,0);if(F===0)y.delete(O);else{P.size=F,m+=P.size;const E=this.getLabelText(this.properties.label,{datum:P.datum,value:P.label,fromKey:s,toKey:o,sizeKey:a,size:P.size});P.label=String(E)}});let S=0;if(this.isLabelEnabled()){const P=this.properties.label.getFont();let T=0;y.forEach(({datum:w})=>{const{id:O,label:F}=w;if(F==null)return;const E=bD.wrapText(F,{maxWidth:n,font:this.properties.label,textWrap:"never"}),{width:C}=DD.measureText(E,{font:P,textAlign:"left",textBaseline:"middle"});T=Math.max(C,T),f.push({id:O,text:E,centerX:u,centerY:d,angle:NaN,radius:NaN})}),S=T+r}const D=y.size;let x=Math.min(t,i)/2-c-S,k=p/x;if(S!==0&&(D*k>=1.5*Math.PI||x<=0)&&(f=[],x=Math.min(t,i)/2-c,k=p/x),D*k>=2*Math.PI||x<=0){sD.warnOnce("There was insufficient space to display the Chord Series.");return}const I=x,L=x+c,b=Math.max((2*Math.PI-D*k)/m,0);let v=0;y.forEach(({datum:P})=>{P.innerRadius=I,P.outerRadius=L,P.startAngle=v,P.endAngle=v+P.size*b,v=P.endAngle+k;const T=(P.innerRadius+P.outerRadius)/2,w=bo(P);P.midPoint={x:P.centerX+T*Math.cos(w),y:P.centerY+T*Math.sin(w)}});const N=[];y.forEach(({datum:P,linksBefore:T,linksAfter:w})=>{const O=bo(P),F=[...T.map(C=>({link:C.link,distance:So(bo(C.node.datum),O),after:!1})),...w.map(C=>({link:C.link,distance:So(bo(C.node.datum),O),after:!0}))];let E=P.startAngle;F.toSorted((C,_)=>C.distance-_.distance).forEach(({link:C,after:_})=>{const B=C.size*b;_?(C.startAngle1=E,C.endAngle1=E+B):(C.startAngle2=E,C.endAngle2=E+B),E+=C.size*b}),N.push(P)});const{tension:M}=this.properties.link;g.forEach(P=>{P.radius=x;const T=ep({radius:x,startAngle:P.startAngle1,endAngle:P.endAngle2,tension:M}),w=ep({radius:x,startAngle:P.startAngle2,endAngle:P.endAngle1,tension:M}),O=xo(...T.x,.5),F=xo(...T.y,.5),E=xo(...w.x,.5),C=xo(...w.y,.5);P.midPoint={x:P.centerX+(O+E)/2,y:P.centerY+(F+C)/2},N.push(P)}),f.forEach(P=>{const T=y.get(P.id)?.datum;T!=null&&(P.radius=L+r,P.angle=kD(T.startAngle+So(T.startAngle,T.endAngle)/2))}),f.sort((P,T)=>P.angle-T.angle);let R=1/0,A=-1/0;return f=f.filter(P=>{const T=vD.getLineHeight(l),w=Math.atan2(T/2,P.radius),O=P.angle-w,F=P.angle+w;return sp(R,O,F)||sp(A,O,F)?!1:(R=Math.min(O,R),A=Math.max(F,A),!0)}),{itemId:e,nodeData:N,labelData:f}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{text:l,centerX:c,centerY:p,radius:u,angle:d})=>{n.visible=!0,n.translationX=c+u*Math.cos(d),n.translationY=p+u*Math.sin(d),n.text=l,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textBaseline="middle",Math.cos(d)>=0?(n.textAlign="left",n.rotation=d):(n.textAlign="right",n.rotation=d-Math.PI)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>mo([t.type,t.id]))}getBaseNodeStyle(e){const{properties:t}=this,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,lineDash:r,lineDashOffset:n}=t.node,l=e?t.highlightStyle.item:void 0;return Do({fill:l?.fill??i,fillOpacity:l?.fillOpacity??s,stroke:l?.stroke??o,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(t.node.strokeWidth),lineDash:l?.lineDash??r,lineDashOffset:l?.lineDashOffset??n},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getNodeStyleOverrides(e,t,i,s,o,a,r){const{id:n,properties:l}=this,{fills:c,strokes:p}=l,{itemStyler:u}=l.node,d=a.fill??c[i%c.length],f=a.stroke??p[i%p.length];let y;if(r||(y??(y={}),y.fill=d,y.stroke=f),u!=null){const g=this.cachedDatumCallback(mo(e,"node",r?"highlight":"node"),()=>{const{fillOpacity:m=1,strokeOpacity:S=1,strokeWidth:D=0,lineDash:x=[],lineDashOffset:k=0}=a;return this.callWithContext(u,{seriesId:n,datum:t,highlighted:r,label:o,size:s,fill:d,fillOpacity:m,stroke:f,strokeOpacity:S,strokeWidth:D,lineDash:x,lineDashOffset:k})});y??(y={}),Object.assign(y,g)}return Do(y,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getBaseNodeStyle(i),o=this.getShapeFillBBox();t.each((a,r)=>{const{datumIndex:n,size:l,label:c}=r,p=this.getNodeStyleOverrides(String(n.index),r.datum,n.index,l,c,s,i);op(a,s,p,o),a.centerX=r.centerX,a.centerY=r.centerY,a.innerRadius=r.innerRadius,a.outerRadius=r.outerRadius,a.startAngle=r.startAngle,a.endAngle=r.endAngle,a.inset=a.strokeWidth/2})}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>mo([t.type,t.index,t.fromNode.id,t.toNode.id]))}getBaseLinkStyle(e){const{properties:t}=this,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,lineDash:r,lineDashOffset:n,tension:l}=t.link,c=e?t.highlightStyle.item:void 0;return Do({fill:c?.fill??i,fillOpacity:c?.fillOpacity??s,stroke:c?.stroke??o,strokeOpacity:c?.strokeOpacity??a,strokeWidth:c?.strokeWidth??this.getStrokeWidth(t.link.strokeWidth),lineDash:c?.lineDash??r,lineDashOffset:c?.lineDashOffset??n,tension:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getLinkStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{fills:n,strokes:l}=r,{itemStyler:c}=r.link,p=s.fill??n[i%n.length],u=s.stroke??l[i%l.length];let d;if(o||(d??(d={}),d.fill=p,d.stroke=u),c!=null){const f=this.cachedDatumCallback(mo(e,"link",o?"highlight":"node"),()=>{const{fillOpacity:y=1,strokeOpacity:g=1,strokeWidth:m=0,lineDash:S=[],lineDashOffset:D=0,tension:x}=s;return this.callWithContext(c,{seriesId:a,datum:t,highlighted:o,tension:x,fill:p,fillOpacity:y,stroke:u,strokeOpacity:g,strokeWidth:m,lineDash:S,lineDashOffset:D})});d??(d={}),Object.assign(d,f)}return Do(d,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getBaseLinkStyle(i),o=this.getShapeFillBBox();t.each((a,r)=>{const{datumIndex:n}=r,l=r.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(n.index),r.datum,l.index,s,i);a.centerX=r.centerX,a.centerY=r.centerY,a.radius=r.radius,a.startAngle1=r.startAngle1,a.endAngle1=r.endAngle1,a.startAngle2=r.startAngle2,a.endAngle2=r.endAngle2,op(a,s,c,o),a.tension=c?.tension??s.tension})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(e,t),s=(e-i)/2,o=(t-i)/2,a=new ID(s,o,e,t);return{series:a,axis:a}}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:s,properties:o}=this,{fromKey:a,toKey:r,sizeKey:n,sizeName:l,tooltip:c}=o,p=this.contextNodeData?.nodeData.find(m=>m.datumIndex.type===e.type&&m.datumIndex.index===e.index);if(p==null)return;const u=p.type===0?p.fromNode.index:p.index,d=p.type===0?`${p.fromNode.label} - ${p.toNode.label}`:p.label,f=e.type===0?i?.dataSources.get(this.id)?.[e.index]:s?.dataSources.get(this.id)?.[e.index],y=p.size;let g;if(p.type===0){const m=p.fromNode.datumIndex,S=this.getBaseLinkStyle(!1);Object.assign(S,this.getLinkStyleOverrides(String(e.index),f,m.index,S,!1)),g=S}else{const m=p.label,S=this.getBaseNodeStyle(!1);Object.assign(S,this.getNodeStyleOverrides(String(e.index),f,e.index,y,m,S,!1)),g=S}return this.formatTooltipWithContext(c,{title:d,symbol:this.legendItemSymbol(p.type,u,g),data:n!=null?[{label:l,fallbackLabel:n,value:String(y)}]:[]},{seriesId:t,datum:f,title:d,fromKey:a,toKey:r,sizeKey:n,sizeName:l,size:y,...g})}computeFocusBounds(e){return e}};vo.className="ChordSeries",vo.type="chord";import{_ModuleSupport as AD}from"ag-charts-community";import{constant as ND,fillGradientDefaults as PD,fillImageDefaults as LD,fillPatternDefaults as RD,required as kr,string as ko,undocumented as Mr}from"ag-charts-core";var{commonSeriesOptionsDefs:TD,chordSeriesThemeableOptionsDef:OD}=AD,Mo={...OD,...TD,type:kr(ND("chord")),fromKey:kr(ko),toKey:kr(ko),sizeKey:ko,sizeName:ko};Mo.fillGradientDefaults=Mr(PD),Mo.fillPatternDefaults=Mr(RD),Mo.fillImageDefaults=Mr(LD);var BL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:e=>new vo(e),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Uc.FILL_PATTERN_DEFAULTS,fillImageDefaults:Uc.FILL_IMAGE_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},ap={type:"series",name:"chord",chartType:"flow-proportion",enterprise:!0,options:Mo,create:e=>new vo(e)};import"ag-charts-community";import{_ModuleSupport as Ir}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Ki,CARTESIAN_POSITION:zi},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:CD}}=Ir,GL={$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},[{type:Ki.NUMBER,position:zi.LEFT},{type:Ki.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"before"]},zi.TOP,zi.BOTTOM]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}}],[{type:Ki.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"after"]},zi.RIGHT,zi.LEFT]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}},{type:Ki.NUMBER,position:zi.BOTTOM}]]},WL={series:{direction:"vertical",strokeWidth:0,spacingRatio:.25,fills:[{$palette:"fill"}],strokes:[{$palette:"stroke"}],fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Ir.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ir.FILL_IMAGE_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:0},shadow:{enabled:!1,color:CD,xOffset:3,yOffset:3,blur:5}},axes:{[Ki.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(e){return Math.abs(e.value).toFixed(e.fractionDigits??0)}}},[Ki.CATEGORY]:{line:{enabled:!1}}}};import{_ModuleSupport as wD}from"ag-charts-community";import{_ModuleSupport as Ar}from"ag-charts-community";import{_ModuleSupport as FD}from"ag-charts-community";var{lineDistanceSquared:Io,BBox:BD,Path:_D,SceneChangeDetection:Jt}=FD,rp=1e-6;function np([e,t],[i,s]){return Math.abs(e-i)<=rp&&Math.abs(t-s)<=rp}var Ft=class extends _D{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:s,x2:o,y2:a,x3:r,y3:n}=this;return{x:(e+i+o+r)/4,y:(t+s+a+n)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:s,x1:o,y1:a,x2:r,y2:n,x3:l,y3:c}=this;return Math.min(Io(e,t,i,s,o,a,1/0),Io(e,t,o,a,r,n,1/0),Io(e,t,r,n,l,c,1/0),Io(e,t,l,c,i,s,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:s,x2:o,y2:a,x3:r,y3:n}=this,l=Math.min(e,i,o,r),c=Math.max(e,i,o,r)-l,p=Math.min(t,s,a,n),u=Math.max(t,s,a,n)-p;return new BD(l,p,c,u)}updatePath(){const{path:e,x0:t,y0:i,x1:s,y1:o,x2:a,y2:r,x3:n,y3:l}=this,c=[[t,i],[s,o],[a,r],[n,l]];e.clear();let p,u;c.forEach(d=>{if(p!=null&&np(p,d)||u!=null&&np(u,d))return;const[f,y]=d;p==null?e.moveTo(f,y):e.lineTo(f,y),p??(p=d),u=d}),e.closePath()}};h([Jt()],Ft.prototype,"x0",2),h([Jt()],Ft.prototype,"y0",2),h([Jt()],Ft.prototype,"x1",2),h([Jt()],Ft.prototype,"y1",2),h([Jt()],Ft.prototype,"x2",2),h([Jt()],Ft.prototype,"y2",2),h([Jt()],Ft.prototype,"x3",2),h([Jt()],Ft.prototype,"y3",2);import{_ModuleSupport as ED}from"ag-charts-community";var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:GD}=ED;function lp(e,t,i,s){const{x0:o,y0:a,x1:r,y1:n,x2:l,y2:c,x3:p,y3:u,opacity:d}=e;return i?{x0:(o+p)/2,y0:(a+u)/2,x1:(r+l)/2,y1:(n+c)/2,x2:(r+l)/2,y2:(n+c)/2,x3:(o+p)/2,y3:(a+u)/2,opacity:d}:{x0:(o+r)/2,y0:(a+n)/2,x1:(o+r)/2,y1:(a+n)/2,x2:(l+p)/2,y2:(c+u)/2,x3:(l+p)/2,y3:(c+u)/2,opacity:d}}function WD(e,t){const i=a=>a==null;return{fromFn:(a,r,n)=>{n==="updated"&&i(r)?n="removed":n==="updated"&&i(a.previousDatum)&&(n="added");let l;n==="added"&&a.previousDatum==null&&t==="fade"?l={...ds(a,r),opacity:0}:n==="unknown"||n==="added"?l=lp(r,a.previousDatum,e,t):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=GD[n];return{...l,phase:c}},toFn:(a,r,n)=>{let l;return n==="removed"&&a.datum==null&&t==="fade"?l={...ds(a,r),opacity:0}:n==="removed"||i(r)?l=lp(r,a.previousDatum,e,t):l=ds(a,r),l}}}function ds(e,t){const{x0:i,y0:s,x1:o,y1:a,x2:r,y2:n,x3:l,y3:c,opacity:p}=t;return{x0:i,y0:s,x1:o,y1:a,x2:r,y2:n,x3:l,y3:c,opacity:p}}var{SeriesNodePickMode:cp,SeriesZIndexMap:pp,valueProperty:VD,keyProperty:KD,ChartAxisDirection:zD,updateLabelNode:$D,SMALLEST_KEY_INTERVAL:HD,LARGEST_KEY_INTERVAL:XD,diff:YD,fixNumericExtent:qD,seriesLabelFadeInAnimation:hp,resetMotion:UD,resetLabelFn:jD,animationValidation:JD,computeBarFocusBounds:ZD,ContinuousScale:QD,Group:eb,Selection:tb,PointerEvents:up,motion:ib,checkCrisp:sb,createDatumId:ob,applyShapeStyle:ab,getShapeStyle:rb,getShapeFill:nb}=Ar,lb=class extends Ar.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.stageKey,this.yKey=s.properties.valueKey}},dp=class extends Ar.AbstractBarSeries{constructor({moduleCtx:e,animationResetFns:t}){super({moduleCtx:e,pickModes:[cp.AXIS_ALIGNED,cp.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["stageKey"],y:["valueKey"]},directionNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:t.datum,label:jD}}),this.NodeEvent=lb,this.connectorNodeGroup=this.contentGroup.appendChild(new eb({name:`${this.id}-series-connectorNodes`,zIndex:pp.BACKGROUND})),this.connectorSelection=tb.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=up.None}get pickModeAxis(){return"main-category"}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.connectorNodeGroup.zIndex=[pp.BACKGROUND,e],!0):!1}isVertical(){return!super.isVertical()}connectionFactory(){return new Ft}async processData(e){const{stageKey:t,valueKey:i}=this.properties,{visible:s,id:o}=this,a=(y,g,m)=>s&&this.ctx.legendManager.getItemEnabled({seriesId:o,itemId:m}),r=this.getCategoryAxis()?.scale,n=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:r,yScale:n}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(YD(this.id,this.processedData)),u.push(JD()));const d=this.visible?{}:{forceValue:0},{processedData:f}=await this.requestDataModel(e,this.data,{props:[KD(t,c,{id:"xValue"}),VD(i,p,{id:"yValue",...d,validation:a,invalidValue:0}),...l?[HD,XD]:[],...u],groupByKeys:!1});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.largestDataInterval=f.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:s,ctx:{legendManager:o}}=this;if(!t||!i)return[];const{keys:[a]}=t.domain;if(e===this.getCategoryDirection()){const r=i.resolveProcessedDataDefById(this,"xValue");return r?.def.type==="key"&&r?.def.valueType==="category"?this.hasData?a.filter((n,l)=>o.getItemEnabled({seriesId:s,itemId:l})):[]:this.padBandExtent(a)}else{const r=this.domainForClippedRange(e,["yValue"],"xValue",!0),n=Math.max(...r),l=[-n,n];return qD(l)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{hasData:e,data:t,dataModel:i,groupScale:s,processedData:o,id:a,ctx:{legendManager:r}}=this,n=this.getCategoryAxis(),l=this.getValueAxis();if(!(e&&t&&n&&l&&i&&o?.type==="ungrouped"))return;const c=n.scale,p=l.scale,u=this.getBarDirection()===zD.X,{stageKey:d,valueKey:f}=this.properties,{strokeWidth:y}=this.barStyle(),g=`${f}`,m={itemId:g,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},S=this.visible;if(!S)return m;const D=i.resolveKeysById(this,"xValue",o),x=i.resolveColumnById(this,"yValue",o),{barWidth:k,groupIndex:I}=this.updateGroupScale(n),L=QD.is(c)?k*-.5:0,b=sb(n?.scale,n?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let v;return(o.dataSources.get(this.id)??[]).forEach((M,R)=>{const A=S&&r.getItemEnabled({seriesId:a,itemId:R}),P=D[R];if(P==null)return;const T=Math.round(c.convert(P))+s.convert(String(I))+L,w=x[R],O=Math.round(p.convert(-w)),F=Math.round(p.convert(w)),E=Math.max(y,Math.abs(F-O)),C={x:u?Math.min(F,O):T,y:u?T:Math.min(F,O),width:u?E:k,height:u?k:E},_={x:C.x+C.width/2,y:C.y+C.height/2},B=this.createLabelData({datumIndex:R,rect:C,barAlongX:u,yDatum:w,datum:M,visible:A}),G={index:R,series:this,itemId:g,datum:M,datumIndex:R,xValue:P,yValue:w,xKey:d,yKey:f,x:C.x,y:C.y,width:C.width,height:C.height,midPoint:_,strokeWidth:y,crisp:b,label:B,visible:A};if(m.nodeData.push(G),B!=null&&m.labelData.push(B),v!=null){const W=v.rect,V=v.nodeDatum,K=v.datumIndex;u?m.connectorData.push({datum:V,datumIndex:K,x0:W.x,y0:W.y+W.height,x1:W.x+W.width,y1:W.y+W.height,x2:C.x+C.width,y2:C.y,x3:C.x,y3:C.y,opacity:1}):m.connectorData.push({datum:V,datumIndex:K,x0:W.x+W.width,y0:W.y,x1:C.x,y1:C.y,x2:C.x,y2:C.y+C.height,x3:W.x+W.width,y3:W.y+W.height,opacity:1})}A&&(v={itemId:g,rect:C,nodeDatum:G,datumIndex:R})}),m}updateNodes(e,t,i){super.updateNodes(e,t,i);const{connectorSelection:s}=this,o=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:s,connectorData:o}),this.updateConnectorNodes({connectorSelection:s})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s,void 0,o=>this.getDatumId(o))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,s=>this.getDatumId(s.datum))}updateConnectorNodes(e){const{fills:t,strokes:i,fillGradientDefaults:s,fillPatternDefaults:o,fillImageDefaults:a}=this.properties,{fill:r,fillOpacity:n,stroke:l,strokeOpacity:c,strokeWidth:p,lineDash:u,lineDashOffset:d}=this.connectorStyle(),f=this.getShapeFillBBox();e.connectorSelection.each((y,g)=>{const{datumIndex:m}=g;y.setProperties(ds(y,g));const S=nb(r??t[m%t.length],s,o,a);ab(y,{fill:S,stroke:l??i[m%i.length],fillOpacity:n,strokeOpacity:c,strokeWidth:p,lineDash:u,lineDashOffset:d},void 0,f)})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=up.None})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{$D(t,this.properties.label,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{stageKey:a,valueKey:r,tooltip:n}=o,l=this.getCategoryAxis(),c=this.getValueAxis();if(!i||!s||!l||!c)return;const p=s.dataSources.get(this.id)?.[e],u=i.resolveKeysById(this,"xValue",s)[e],d=i.resolveColumnById(this,"yValue",s)[e];if(u!=null)return this.formatTooltipWithContext(n,{symbol:this.legendItemSymbol(e),data:[{label:l.formatDatum(u),value:c.formatDatum(d)}]},{seriesId:t,datum:p,title:a,stageKey:a,valueKey:r,...this.tooltipStyle(p,e)})}resetAllAnimation(e){super.resetAllAnimation(e),UD([this.connectorSelection],ds)}animateEmptyUpdateReady({labelSelection:e}){const{connectorSelection:t}=this,i=this.isVertical(),o=WD(i,"normal");ib.fromToMotion(this.id,"connectors",this.ctx.animationManager,[t],o),hp(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),hp(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return ob(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return ZD(this,this.contextNodeData?.nodeData[e])}legendItemSymbol(e){const{strokeWidth:t,fillOpacity:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,fillGradientDefaults:r,fillPatternDefaults:n,fillImageDefaults:l}=this.barStyle(),{fills:c,strokes:p}=this.properties,u=c[e%c.length]??"black",d=p[e%p.length]??"black";return{marker:rb({fill:u,fillOpacity:i,stroke:d,strokeWidth:t,strokeOpacity:s,lineDash:o,lineDashOffset:a},r,n,l)}}getLegendData(e){const{id:t,processedData:i,dataModel:s,ctx:{legendManager:o},visible:a}=this;if(!s||!i||e!=="category")return[];const{showInLegend:r}=this.properties,n=s.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const p=n[c];if(p!=null)return{legendType:"category",id:t,datum:l,itemId:c,seriesId:t,enabled:a&&o.getItemEnabled({seriesId:t,itemId:c}),label:{text:String(p)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!r}}).filter(l=>l!=null)}};import{_ModuleSupport as cb}from"ag-charts-community";var{FillGradientDefaults:pb,FillPatternDefaults:hb,FillImageDefaults:ub,Label:db,AbstractBarSeriesProperties:fb,SeriesTooltip:gb,AxisLabel:yb,Property:Ke}=cb,Nr=class extends db{constructor(){super(...arguments),this.spacing=0}};h([Ke],Nr.prototype,"placement",2),h([Ke],Nr.prototype,"spacing",2);var fp=class extends yb{};h([Ke],fp.prototype,"placement",2);var Ye=class extends fb{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new pb,this.fillPatternDefaults=new hb,this.fillImageDefaults=new ub,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new Nr,this.stageLabel=new fp,this.tooltip=new gb}};h([Ke],Ye.prototype,"stageKey",2),h([Ke],Ye.prototype,"valueKey",2),h([Ke],Ye.prototype,"fills",2),h([Ke],Ye.prototype,"fillGradientDefaults",2),h([Ke],Ye.prototype,"fillPatternDefaults",2),h([Ke],Ye.prototype,"fillImageDefaults",2),h([Ke],Ye.prototype,"fillOpacity",2),h([Ke],Ye.prototype,"strokes",2),h([Ke],Ye.prototype,"strokeWidth",2),h([Ke],Ye.prototype,"strokeOpacity",2),h([Ke],Ye.prototype,"lineDash",2),h([Ke],Ye.prototype,"lineDashOffset",2),h([Ke],Ye.prototype,"label",2),h([Ke],Ye.prototype,"stageLabel",2),h([Ke],Ye.prototype,"tooltip",2);function gp(e,{x:t,y:i,width:s,height:o,opacity:a}){return{x1:t,y1:i,x2:t+s,y2:i+o,opacity:a}}var{formatValue:mb,Line:Sb}=wD,Pr=class extends dp{constructor(e){super({moduleCtx:e,animationResetFns:{datum:gp}}),this.properties=new Ye}get hasData(){const{id:e,ctx:{legendManager:t}}=this,i=this.data?.reduce((s,o,a)=>s+(t.getItemEnabled({seriesId:e,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}connectorStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}}nodeFactory(){return new Sb}createLabelData({datumIndex:e,rect:t,barAlongX:i,yDatum:s,datum:o,visible:a}){const{stageKey:r,valueKey:n,label:l}=this.properties,{spacing:c,placement:p}=l;let u,d,f,y;if(i)switch(u=t.x+t.width/2,f="center",p){case"before":d=t.y-c,y="bottom";break;case"after":d=t.y+t.height+c,y="top";break;default:d=t.y+t.height/2,y="middle"}else switch(d=t.y+t.height/2,y="middle",p){case"before":u=t.x-c,f="right";break;case"after":u=t.x+t.width+c,f="left";break;default:u=t.x+t.width/2,f="center"}return{x:u,y:d,textAlign:f,textBaseline:y,text:this.getLabelText(l,{itemId:n,value:s,datum:o,stageKey:r,valueKey:n},g=>mb(g,0)),itemId:n,datum:o,datumIndex:e,series:this,visible:a}}updateDatumNodes(e){const t=e.isHighlight?this.properties.highlightStyle.item:void 0;e.datumSelection.each((i,s)=>{i.setProperties(gp(i,s)),i.stroke=t?.stroke,i.strokeWidth=t?.strokeWidth??0,i.strokeOpacity=t?.strokeOpacity??1,i.lineDash=t?.lineDash,i.lineDashOffset=t?.lineDashOffset??0})}tooltipStyle(e,t){const{fills:i,strokes:s}=this.properties,o=i[t%i.length]??"black",a=s[t%s.length]??"black",{fillOpacity:r,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:p}=this.barStyle();return{fill:o,fillOpacity:r,stroke:a,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:p}}};Pr.className="ConeFunnelSeries",Pr.type="cone-funnel";import{_ModuleSupport as xb}from"ag-charts-community";import{constant as Db,required as Lr,string as yp}from"ag-charts-core";var{commonSeriesOptionsDefs:bb,coneFunnelSeriesThemeableOptionsDef:vb}=xb,kb={...vb,...bb,type:Lr(Db("cone-funnel")),stageKey:Lr(yp),valueKey:Lr(yp)};import{_ModuleSupport as fs}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:mp}}=fs,UL={series:{direction:"vertical",fills:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},fs.SAFE_RANGE2_OPERATION]},strokes:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},fs.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:fs.FILL_PATTERN_DEFAULTS,fillImageDefaults:fs.FILL_IMAGE_DEFAULTS,strokeWidth:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4}},seriesArea:{padding:{top:20,bottom:20}},axes:{[mp.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(e){return Math.abs(e.value).toFixed(e.fractionDigits??0)}}},[mp.CATEGORY]:{line:{enabled:!1}}}},Sp={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:kb,create:e=>new Pr(e)};import"ag-charts-community";import{_ModuleSupport as Mb}from"ag-charts-community";import{_ModuleSupport as Ib}from"ag-charts-community";var{FillGradientDefaults:Ab,FillPatternDefaults:Nb,FillImageDefaults:Pb,Label:Lb,DropShadow:Rb,AbstractBarSeriesProperties:Tb,BaseProperties:Ob,SeriesTooltip:Cb,AxisLabel:wb,Property:he}=Ib,Fb=class extends Lb{},xp=class extends wb{};h([he],xp.prototype,"placement",2);var zt=class extends Ob{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([he],zt.prototype,"enabled",2),h([he],zt.prototype,"fill",2),h([he],zt.prototype,"fillOpacity",2),h([he],zt.prototype,"stroke",2),h([he],zt.prototype,"strokeWidth",2),h([he],zt.prototype,"strokeOpacity",2),h([he],zt.prototype,"lineDash",2),h([he],zt.prototype,"lineDashOffset",2);var Be=class extends Tb{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new Ab,this.fillPatternDefaults=new Nb,this.fillImageDefaults=new Pb,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new zt,this.shadow=new Rb().set({enabled:!1}),this.label=new Fb,this.stageLabel=new xp,this.tooltip=new Cb}};h([he],Be.prototype,"stageKey",2),h([he],Be.prototype,"valueKey",2),h([he],Be.prototype,"fills",2),h([he],Be.prototype,"fillGradientDefaults",2),h([he],Be.prototype,"fillPatternDefaults",2),h([he],Be.prototype,"fillImageDefaults",2),h([he],Be.prototype,"fillOpacity",2),h([he],Be.prototype,"strokes",2),h([he],Be.prototype,"strokeWidth",2),h([he],Be.prototype,"strokeOpacity",2),h([he],Be.prototype,"lineDash",2),h([he],Be.prototype,"lineDashOffset",2),h([he],Be.prototype,"spacingRatio",2),h([he],Be.prototype,"itemStyler",2),h([he],Be.prototype,"dropOff",2),h([he],Be.prototype,"shadow",2),h([he],Be.prototype,"label",2),h([he],Be.prototype,"stageLabel",2),h([he],Be.prototype,"tooltip",2);var{ChartAxisDirection:Bb,resetBarSelectionsFn:_b,prepareBarAnimationFunctions:Dp,midpointStartingBarPosition:bp,createDatumId:Eb,formatValue:Gb,Rect:Wb,motion:vp,applyShapeStyle:Vb,getShapeStyle:kp}=Mb,Rr=class extends dp{constructor(e){super({moduleCtx:e,animationResetFns:{datum:_b}}),this.properties=new Be}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}}connectorStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r}=this.properties.dropOff;return{fill:e,fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}nodeFactory(){return new Wb}createLabelData({datumIndex:e,rect:t,yDatum:i,datum:s,visible:o}){const{valueKey:a,stageKey:r,label:n}=this.properties;return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:this.getLabelText(n,{itemId:r,value:i,datum:s,valueKey:a,stageKey:r},l=>Gb(l,0)),itemId:r,datum:s,datumIndex:e,series:this,visible:o}}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return kp({fill:i?.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{stageKey:n,valueKey:l,fills:c,strokes:p,itemStyler:u}=r,d=s.fill??c[i%c.length]??"black",f=s.stroke??p[i%p.length]??"black",y={};if(o||(y.fill=d,y.stroke=f),u!=null){const g=this.cachedDatumCallback(Eb(e,o?"highlight":"node"),()=>{const{fillOpacity:m,strokeOpacity:S,strokeWidth:D,lineDash:x,lineDashOffset:k}=s;return this.callWithContext(u,{seriesId:a,datum:t,highlighted:o,stageKey:n,valueKey:l,fill:d,fillOpacity:m,stroke:f,strokeOpacity:S,strokeWidth:D,lineDash:x,lineDashOffset:k})});Object.assign(y,g)}return kp(y,r.fillGradientDefaults,r.fillPatternDefaults,r.fillImageDefaults)}updateDatumNodes(e){const{shadow:t}=this.properties,{datumSelection:i,isHighlight:s}=e,o=this.getCategoryDirection()===Bb.X,a=this.getItemBaseStyle(s),r=this.getShapeFillBBox();i.each((n,l)=>{const{datumIndex:c}=l,p=this.getItemStyleOverrides(String(l.datumIndex),l.datum,c,a,s);Vb(n,a,p,r),n.visible=o?l.width>0:l.height>0,n.crisp=l.crisp,n.fillShadow=t})}tooltipStyle(e,t){const i=this.getItemBaseStyle(!1);return Object.assign(i,this.getItemStyleOverrides(String(t),e,t,i,!1)),i}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),o=Dp(bp(i,"normal"));vp.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e);const{datumSelection:t}=e,{processedData:i}=this,s=i?.reduced?.diff?.[this.id],o=Dp(bp(this.isVertical(),"fade"));vp.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o,(a,r)=>r.xValue,s)}};Rr.className="FunnelSeries",Rr.type="funnel";import{_ModuleSupport as Kb}from"ag-charts-community";import{constant as zb,required as Tr,string as Mp}from"ag-charts-core";var{commonSeriesOptionsDefs:$b,funnelSeriesThemeableOptionsDef:Hb}=Kb,Xb={...Hb,...$b,type:Tr(zb("funnel")),stageKey:Tr(Mp),valueKey:Tr(Mp)},Ip={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:Xb,create:e=>new Rr(e)};import{_ModuleSupport as Or}from"ag-charts-community";import{_ModuleSupport as $i}from"ag-charts-community";var Ap=class{*[Symbol.iterator](){const{node:e,datum:t}=this;e&&t&&(yield{node:e,datum:t})}nodes(){return this.node?[this.node]:[]}update(e,t,i,s){const o=e.nodes();if(o.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,t.appendChild(this.node));const a=o[0],r=o.toReversed().find(n=>n.datum.datum.value>n.datum.datum.segmentStart)??o[o.length-1];this.node.datum=this.datum=a.datum,s(this.node,a,r)}}};import{_ModuleSupport as Yb}from"ag-charts-community";var Np={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function Pp(e,t){if(e==null)return"";const{min:i,max:s}=t,o=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=s!==0?Math.ceil(Math.log10(Math.abs(s))):0,r=Math.max(2-Math.max(o,a),0);return e.toFixed(r)}function gs(e,t,i,s){if(i.text!=null)return i.text;const o=s??i.value;let a;if(i?.formatter!=null&&(a=Cr(t,i.formatter,{seriesId:e,datum:void 0,value:o})),a!=null)return String(a)}function Cr(e,t,i){return Yb.callWithContext(e.chartService,void 0,t,[i])}import"ag-charts-community";function Lp({path:e,x:t,y:i,size:s}){e.moveTo(t,i-s/2),e.lineTo(t,i+s/2)}import"ag-charts-community";import{clamp as Rp,iterate as qb}from"ag-charts-core";function Tp(e,t){const i=qb(e.datumUnion.nodes(),e.targetSelection.nodes());return e.pickNodeNearestDistantObject(t,i)}function Op(e,t){const i=[{data:e.contextNodeData?.nodeData,selection:e.datumUnion},{data:e.contextNodeData?.targetData,selection:e.targetSelection}].filter(l=>l.data&&l.data.length>0),s=Rp(0,t.otherIndex+t.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:o,selection:a}=i[s];if(o==null||o.length===0)return;const r=Rp(0,t.datumIndex,o.length-1),n=o[r];for(const l of a)if(l.datum===n)return{bounds:l.node,clipFocusBox:!0,datum:n,datumIndex:r,otherIndex:s}}import{_ModuleSupport as wr}from"ag-charts-community";import{_ModuleSupport as Ub}from"ag-charts-community";import{Logger as jb}from"ag-charts-core";var{BaseProperties:Cp,Property:Hi}=Ub,Ao=class extends Cp{getSegments(e,t){const{values:i,step:s,count:o}=this,a=Math.min(...e.domain),r=Math.max(...e.domain);let n;if(i!=null){const l=i.filter(c=>c>a&&c<r).sort((c,p)=>c-p);n=[a,...l,r]}else if(s!=null){const l=[];for(let c=a;c<r;c+=s)l.push(c);l.push(r),n=l}else if(o!=null){const l=o+1;n=Array.from({length:l+1},(c,p)=>p/l*(r-a)+a)}else{const l=e.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.filter(c=>c>a&&c<r);n=l!=null?[a,...l,r]:void 0}return n!=null&&n.length>t&&(jb.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),n=void 0),n??(n=[a,r]),n}};h([Hi],Ao.prototype,"values",2),h([Hi],Ao.prototype,"step",2),h([Hi],Ao.prototype,"count",2);var ys=class extends Cp{constructor(){super(...arguments),this.enabled=!1,this.interval=new Ao,this.spacing=0}};h([Hi],ys.prototype,"enabled",2),h([Hi],ys.prototype,"interval",2),h([Hi],ys.prototype,"spacing",2);var{BaseProperties:No,SeriesTooltip:Jb,SeriesProperties:Zb,PropertiesArray:Fr,Property:H,Label:Qb,AxisLabel:ev}=wr,wp=class extends Qb{};h([H],wp.prototype,"spacing",2);var $e=class extends No{constructor(){super(...arguments),this.value=0,this.label=new wp}};h([H],$e.prototype,"text",2),h([H],$e.prototype,"value",2),h([H],$e.prototype,"shape",2),h([H],$e.prototype,"placement",2),h([H],$e.prototype,"spacing",2),h([H],$e.prototype,"size",2),h([H],$e.prototype,"rotation",2),h([H],$e.prototype,"fill",2),h([H],$e.prototype,"fillOpacity",2),h([H],$e.prototype,"stroke",2),h([H],$e.prototype,"strokeWidth",2),h([H],$e.prototype,"strokeOpacity",2),h([H],$e.prototype,"lineDash",2),h([H],$e.prototype,"lineDashOffset",2),h([H],$e.prototype,"label",2);var ct=class extends No{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new Fr(wr.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([H],ct.prototype,"enabled",2),h([H],ct.prototype,"thickness",2),h([H],ct.prototype,"thicknessRatio",2),h([H],ct.prototype,"fills",2),h([H],ct.prototype,"fillMode",2),h([H],ct.prototype,"fill",2),h([H],ct.prototype,"fillOpacity",2),h([H],ct.prototype,"stroke",2),h([H],ct.prototype,"strokeWidth",2),h([H],ct.prototype,"strokeOpacity",2),h([H],ct.prototype,"lineDash",2),h([H],ct.prototype,"lineDashOffset",2);var ms=class extends No{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};h([H],ms.prototype,"values",2),h([H],ms.prototype,"step",2),h([H],ms.prototype,"minSpacing",2),h([H],ms.prototype,"maxSpacing",2);var Fp=class extends ev{constructor(){super(...arguments),this.placement=void 0}};h([H],Fp.prototype,"placement",2);var qe=class extends No{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new Fr(wr.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new ms,this.label=new Fp}};h([H],qe.prototype,"min",2),h([H],qe.prototype,"max",2),h([H],qe.prototype,"fills",2),h([H],qe.prototype,"fillMode",2),h([H],qe.prototype,"fill",2),h([H],qe.prototype,"fillOpacity",2),h([H],qe.prototype,"stroke",2),h([H],qe.prototype,"strokeWidth",2),h([H],qe.prototype,"strokeOpacity",2),h([H],qe.prototype,"lineDash",2),h([H],qe.prototype,"lineDashOffset",2),h([H],qe.prototype,"defaultFill",2),h([H],qe.prototype,"interval",2),h([H],qe.prototype,"label",2);var Po=class extends Ct{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};h([H],Po.prototype,"text",2),h([H],Po.prototype,"placement",2),h([H],Po.prototype,"avoidCollisions",2);var Ue=class extends Zb{constructor(){super(...arguments),this.value=0,this.segmentation=new ys,this.defaultColorRange=[],this.targets=new Fr($e),this.defaultTarget=new $e,this.defaultScale=new qe,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new qe,this.bar=new ct,this.label=new Po,this.tooltip=new Jb}};h([H],Ue.prototype,"value",2),h([H],Ue.prototype,"segmentation",2),h([H],Ue.prototype,"defaultColorRange",2),h([H],Ue.prototype,"targets",2),h([H],Ue.prototype,"defaultTarget",2),h([H],Ue.prototype,"defaultScale",2),h([H],Ue.prototype,"direction",2),h([H],Ue.prototype,"thickness",2),h([H],Ue.prototype,"cornerRadius",2),h([H],Ue.prototype,"cornerMode",2),h([H],Ue.prototype,"margin",2),h([H],Ue.prototype,"scale",2),h([H],Ue.prototype,"bar",2),h([H],Ue.prototype,"label",2),h([H],Ue.prototype,"tooltip",2);import{_ModuleSupport as tv}from"ag-charts-community";var{CachedTextMeasurerPool:iv,BBox:sv}=tv;function Br(e){const{x0:t,y0:i,x1:s,y1:o,horizontalInset:a,verticalInset:r}=e,n=Math.min(t,s)+a,l=Math.min(i,o)+r,c=Math.max(Math.abs(s-t)-2*a,0),p=Math.max(Math.abs(o-i)-2*r,0);return{x:n,y:l,width:c,height:p}}function ov(e,t){if(t==null)return!0;const i=Br(e),s=1e-6,o=i.x+s,a=i.y+s,r=i.x+i.width-s,n=i.y+i.height-s,l=t.x,c=t.x+t.width,p=t.y,u=t.y+t.height;return Math.max(o,l)<=Math.min(r,c)&&Math.max(a,p)<=Math.min(n,u)}function _r(e){const{clipX0:t,clipX1:i,clipY0:s,clipY1:o}=e;return t!=null&&i!=null||s!=null&&o!=null}function av(e){if(!_r(e))return;const{x0:t,y0:i,x1:s,y1:o}=e,{x:a,y:r,width:n,height:l}=Br(e);let{clipX0:c,clipX1:p,clipY0:u,clipY1:d}=e;(c==null||p==null)&&(c=t,p=s),(u==null||d==null)&&(u=i,d=o);const f=Math.min(c,p),y=Math.min(u,d),g=Math.abs(p-c),m=Math.abs(d-u);return c=Math.max(a,f),u=Math.max(r,y),p=Math.min(a+n,f+g),d=Math.min(r+l,y+m),new sv(Math.min(c,p),Math.min(u,d),Math.abs(p-c),Math.abs(d-u))}function Bp(e,t){const i=e?"initial":"update";return{node:{fromFn(o,a){const r=o.previousDatum;let{x0:n,y0:l,x1:c,y1:p,clipX0:u,clipY0:d,clipX1:f,clipY1:y}=r??a;const{horizontalInset:g,verticalInset:m}=a,S=r!=null&&_r(r),D=_r(a);return S&&D||(!S&&D?({x0:n,y0:l,x1:c,y1:p,clipX0:u,clipY0:d,clipX1:f,clipY1:y}=a,e&&(t?f=a.clipX0:y=a.clipY0)):S&&!D?({x0:n,y0:l,x1:c,y1:p}=a,u=void 0,d=void 0,f=void 0,y=void 0):e&&(t?c=n:p=l)),{x0:n,y0:l,x1:c,y1:p,clipX0:u,clipY0:d,clipX1:f,clipY1:y,horizontalInset:g,verticalInset:m,phase:i}},toFn(o,a){const{x0:r,y0:n,x1:l,y1:c,clipX0:p,clipY0:u,clipX1:d,clipY1:f,horizontalInset:y,verticalInset:g}=a;return{x0:r,y0:n,x1:l,y1:c,clipX0:p,clipY0:u,clipX1:d,clipY1:f,horizontalInset:y,verticalInset:g}},applyFn(o,a){o.setProperties(Lo(o,a))}}}}function Lo(e,t){const{x:i,y:s,width:o,height:a}=Br(t),r=av(t),n=ov(t,r);return{x:i,y:s,width:o,height:a,clipBBox:r,visible:n}}var rv={Before:"right",Center:"center",After:"left"},nv={Before:"top",Center:"middle",After:"bottom"},lv={Before:-1,Center:-.5,After:0},cv={Before:0,Center:-.5,After:-1};function pv(e,t,i,s,o,a){const{seriesRect:r,gaugeRect:n,barRect:l}=o,{padding:c,horizontal:p}=s;i.each((u,d)=>{const f=gs(e.id,t,d,a?.label);let y,g;d.placement==="outside-start"?p?(y=n.x,g=r.height):(y=r.width,g=r.height-(n.y+n.height)):d.placement==="outside-end"?p?(y=r.width-(n.x+n.width),g=r.height):(y=r.width,g=n.y):d.avoidCollisions&&(y=n.width,g=n.height);let m;if(f==null)return;if(y!=null&&g!=null)m=ls(f,d,{padding:c},()=>({width:y,height:g,meta:null}))?.[0];else{const w={fontSize:d.fontSize,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontFamily:d.fontFamily,lineHeight:d.lineHeight},{width:O,height:F}=iv.measureText(f,{font:w});m={text:f,fontSize:d.fontSize,lineHeight:Fi(d,d.fontSize),width:O,height:F}}if(m==null){u.visible=!1;return}const S=p?n.x:n.y+n.height,D=p?n.x+n.width:n.y,x=p?l.x:l.y+l.height,k=p?l.x+l.width:l.y,I=d.spacing*(p?1:-1);let L,b,v,N;switch(d.placement){case"outside-start":L=-1/0,b=1/0,v=S-I,N="Before";break;case"outside-end":L=-1/0,b=1/0,v=D+I,N="After";break;case"inside-start":L=S,b=k,v=S+I,N="After";break;case"inside-end":L=k,b=D,v=D-I,N="Before";break;case"inside-center":L=S,b=D,v=(S+D)/2,N="Center";break;case"bar-inside":L=x,b=k,v=(x+k)/2,N="Center";break;case"bar-inside-end":L=x,b=k,v=k-I,N="Before";break;case"bar-outside-end":L=k,b=D,v=k+I,N="After";break;case"bar-end":L=-1/0,b=1/0,v=k,N="Center";break}const M=p?v:n.x+n.width/2,R=p?n.y+n.height/2:v;let A,P;p?(A=M+lv[N]*m.width,P=A+m.width):(A=R+cv[N]*m.height,P=A+m.height);const T=Math.min(A,P)>=Math.min(L,b)&&Math.max(A,P)<=Math.max(L,b);if(d.avoidCollisions&&!T){u.visible=!1;return}u.visible=!0,u.text=m.text,u.fontSize=m.fontSize,u.lineHeight=m.lineHeight,u.textAlign=p?rv[N]:"center",u.textBaseline=p?"middle":nv[N],u.x=M,u.y=R})}var{fromToMotion:Er,resetMotion:hv,SeriesNodePickMode:_p,StateMachine:uv,createDatumId:Ep,CachedTextMeasurerPool:dv,toRadians:Gp,BBox:Zt,Group:xi,PointerEvents:Wp,Selection:Di,Rect:fv,Text:Vp,TransformableText:gv,Marker:yv,LinearScale:mv,AxisTickGenerator:Sv,NiceMode:xv,easing:Dv,getColorStops:bv,findRangeExtent:vv}=$i,kv={before:180,middle:0,after:0},Mv={before:90,middle:0,after:-90},Iv=class{constructor(e,t){this.gauge=e,this.ctx=t}get defaultTickMinSpacing(){return 0}get range(){return this.gauge.range}get reverse(){return!1}get scale(){return this.gauge.scale}get label(){return this.gauge.properties.scale.label}get interval(){return this.gauge.properties.scale.interval}formatTick(e,t,i,s,o,a){const{label:r}=this;return this.formatWithContext(e,t,i)??(r.format!=null?a?.(e):void 0)??this.gauge.formatLabel(e)}formatWithContext(e,t,i){let s;return this.label.formatter&&(s=Cr(this.ctx,this.label.formatter,{value:e,index:t,domain:i,boundSeries:void 0})),s}inRange(){return!0}},Ro=class extends $i.Series{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[_p.EXACT_SHAPE_MATCH,_p.NEAREST_NODE]}),this.properties=new Ue,this.seriesRect=Zt.NaN,this.gaugeRect=Zt.NaN,this.scale=new mv,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new xi({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new xi({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new xi({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new xi({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new xi({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new xi({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new xi({name:"tickGroup"})),this.scaleSelection=Di.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=Di.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=Di.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=Di.select(this.itemTargetLabelGroup,Vp),this.labelSelection=Di.select(this.itemLabelGroup,Vp),this.highlightTargetSelection=Di.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=Di.select(this.tickGroup,gv),this.datumUnion=new Ap,this.axis=new Iv(this,e),this.tickGenerator=new Sv(this.axis),this.animationState=new uv("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=Wp.None,this.tickGroup.pointerEvents=Wp.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const e=new fv;return e.crisp=!0,e}markerFactory(){return new yv}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return Pp(e,this.properties.scale)}createLinearGradient(e,t,i){const{properties:s,horizontal:o}=this,{defaultColorRange:a}=s;return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:bv(t,a,e.domain,i),rotation:o?90:0}}getShapeFillBBox(){const{properties:e,originX:t,originY:i,horizontal:s,scale:o}=this,{thickness:a}=e,r=vv(o.range);return new Zt(t,i,s?r:a,s?a:r)}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:s=t.text,value:o=t.value??0,shape:a=t.shape??"triangle",rotation:r=t.rotation??0,strokeWidth:n=t.strokeWidth??0,placement:l=t.placement??"middle",spacing:c=t.spacing??0,size:p=t.size??0,fill:u=t.fill??"black",fillOpacity:d=t.fillOpacity??1,stroke:f=t.stroke??"black",strokeOpacity:y=t.strokeOpacity??1,lineDash:g=t.lineDash??[0],lineDashOffset:m=t.lineDashOffset??0}=i,{enabled:S=t.label.enabled,color:D=t.label.color??"black",fontStyle:x=t.label.fontStyle??"normal",fontWeight:k=t.label.fontWeight??"normal",fontSize:I=t.label.fontSize,fontFamily:L=t.label.fontFamily,spacing:b=t.label.spacing??0}=i.label;return{text:s,value:o,shape:a,placement:l,spacing:c,size:p,rotation:r,fill:u,fillOpacity:d,stroke:f,strokeWidth:n,strokeOpacity:y,lineDash:g,lineDashOffset:m,label:{enabled:S,color:D,fontStyle:x,fontWeight:k,fontSize:I,fontFamily:L,spacing:b}}})}getTargetPoint(e){const{properties:t,originX:i,originY:s,horizontal:o,scale:a,gaugeRect:r}=this,{thickness:n}=t,{value:l,placement:c,spacing:p,size:u}=e,d=a.convert(l);let f;switch(c){case"before":f=-(p+u/2);break;case"after":f=n+p+u/2;break;default:f=n/2;break}return{x:i+r.x+(o?d:f),y:s+r.y+(o?f:d)}}getTargetLabel(e){const{size:t,placement:i,label:s}=e,{spacing:o,color:a,fontStyle:r,fontWeight:n,fontSize:l,fontFamily:c}=s,p=void 0,u=t/2+o;let d,f,y=0,g=0;return this.horizontal?(d="center",i==="after"?(f="top",g=u):(f="bottom",g=-u)):(f="middle",i==="before"?(d="right",y=-u):(d="left",y=u)),{offsetX:y,offsetY:g,fill:a,textAlign:d,textBaseline:f,fontStyle:r,fontWeight:n,fontSize:l,fontFamily:c,lineHeight:p}}labelDatum(e,t){const{placement:i,avoidCollisions:s,spacing:o,text:a,color:r,fontSize:n,minimumFontSize:l,fontStyle:c,fontWeight:p,fontFamily:u,lineHeight:d,wrapping:f,overflowStrategy:y,formatter:g=m=>this.formatLabel(m.value)}=e;return{placement:i,avoidCollisions:s,spacing:o,text:a,value:t,fill:r,fontSize:n,minimumFontSize:l,fontStyle:c,fontWeight:p,fontFamily:u,lineHeight:d,wrapping:f,overflowStrategy:y,formatter:g}}verticalLabelInset(){const{properties:e}=this,{label:t}=e,i=t.text?.split(`
`),s=Fi(t,t.fontSize)*(i?.length??1);return t.spacing+s}horizontalLabelInset(){const{scale:e,properties:t}=this,{scale:i,label:s}=t,o=s.text?.split(`
`),a=s.getFont(),r=i.interval.values??e.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5})?.ticks??[],l=(o??r?.map(c=>gs(this.id,this.ctx,this.labelDatum(s,c))??"")).reduce((c,p)=>{const{width:u}=dv.measureText(p,{font:a});return Math.max(c,u)},0);return s.spacing+l}createNodeData(){const{id:e,properties:t,horizontal:i,scale:s,seriesRect:o}=this,{value:a,segmentation:r,thickness:n,cornerRadius:l,cornerMode:c,bar:p,scale:u,label:d}=t;s.domain=[u.min,u.max],s.range=i?[0,o.width]:[o.height,0];let f,y;i?(y=1,f=Math.PI/2):u.label.placement==="before"?(y=1,f=0):(y=-1,f=0);const g=f-Math.PI/2;let m,S,D,x;i?(m=0,S=o.width,D=(o.height-n)/2,x=D+n,d.placement==="outside-start"?m+=this.horizontalLabelInset():d.placement==="outside-end"&&(S-=this.horizontalLabelInset())):(m=(o.width-n)/2,S=m+n,x=0,D=o.height,d.placement==="outside-start"?D-=this.verticalLabelInset():d.placement==="outside-end"&&(x+=this.verticalLabelInset())),this.gaugeRect=new Zt(Math.min(m,S),Math.min(D,x),Math.abs(S-m),Math.abs(x-D));const k=0,I=0;s.domain=[u.min,u.max],s.range=i?[m,S]:[D,x];const{ticks:L}=this.tickGenerator.generateTicks({domain:s.domain,primaryTickCount:void 0,visibleRange:[0,1],niceMode:xv.Off,labelX:0,parallelFlipRotation:f,regularFlipRotation:g,sideFlag:y,removeOverflowLabels:!1}).tickData,b=!1,v=this.getTargets(),N=[],M=[],R=[],A=[],[P,T]=s.range,w=Math.abs(T-P),O=i?s.convert(a):S,F=i?x:s.convert(a),E=r.enabled?r.spacing/2:0,C=i?E:0,_=i?0:E,B=Math.min(p.thickness??Math.round(p.thicknessRatio*n),n),G=-(n-B)/2,W=i?0:G,V=i?G:0,K=c==="item",$=Math.ceil(w);let X=r.enabled?r.interval.getSegments(s,$):void 0;const J=p.fill??this.createLinearGradient(s,p.fills,p.fillMode),Q=u.fill??(p.enabled&&u.fills.length===0?u.defaultFill:void 0)??this.createLinearGradient(s,u.fills,u.fillMode);if(X==null&&K){const j=Math.min(...s.domain),U=Math.max(...s.domain),re={value:a,segmentStart:j,segmentEnd:U};if(p.enabled){const Me=Math.min(l,B/2,w/2)*(b?-1:1),ne=i?Me:0,fe=i?0:Me;N.push({series:this,itemId:"value",datum:re,datumIndex:{type:0},type:0,x0:k+m-ne-W,y0:I+D-fe-V,x1:k+O+ne+W,y1:I+F+fe+V,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:J,horizontalInset:C,verticalInset:_})}const Y=Math.min(l,n/2,w/2)*(b?-1:1),_e=i?Y:0,Ee=i?0:Y;A.push({series:this,itemId:"scale",datum:re,datumIndex:{type:0},type:0,x0:k+m-_e,y0:I+D-Ee,x1:k+S+_e,y1:I+x+Ee,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:Q,horizontalInset:C,verticalInset:_})}else{X??(X=s.domain);const j=k+m-W,U=I+D-V,re=k+O+W,le=I+F+V;for(let Y=0;Y<X.length-1;Y+=1){const _e=X[Y+0],Ee=X[Y+1],pe={value:a,segmentStart:_e,segmentEnd:Ee},Me=Y===0,ne=Y===X.length-2,fe=s.convert(_e),Ie=s.convert(Ee),at=K||Me?l:0,Dt=K||ne?l:0,Et=i?at:Dt,ri=Dt,Gt=i?Dt:at,Yt=at;p.enabled&&N.push({series:this,itemId:`value-${Y}`,datum:pe,datumIndex:{type:0},type:0,x0:k+(i?fe:m),y0:I+(i?D:fe),x1:k+(i?Ie:S),y1:I+(i?x:Ie),clipX0:j,clipY0:U,clipX1:re,clipY1:le,topLeftCornerRadius:Et,topRightCornerRadius:ri,bottomRightCornerRadius:Gt,bottomLeftCornerRadius:Yt,fill:J,horizontalInset:C,verticalInset:_}),A.push({series:this,itemId:`scale-${Y}`,datum:pe,datumIndex:{type:0},type:0,x0:k+(i?fe:m),y0:I+(i?D:fe),x1:k+(i?Ie:S),y1:I+(i?x:Ie),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:Et,topRightCornerRadius:ri,bottomRightCornerRadius:Gt,bottomLeftCornerRadius:Yt,fill:Q,horizontalInset:C,verticalInset:_})}}d.enabled&&R.push(this.labelDatum(d,a));const ee=i?kv:Mv;for(let j=0;j<v.length;j+=1){const U=v[j],{value:re,text:le,shape:Y,size:_e,fill:Ee,fillOpacity:pe,stroke:Me,strokeWidth:ne,strokeOpacity:fe,lineDash:Ie,lineDashOffset:at}=U,Dt=this.getTargetPoint(U),Et=Gp(U.rotation+ee[U.placement]);M.push({series:this,itemId:`target-${j}`,midPoint:Dt,datum:{value:re},datumIndex:{type:1,index:j},type:1,value:re,text:le,x:Dt.x,y:Dt.y,shape:Y,size:_e,rotation:Et,fill:Ee,fillOpacity:pe,stroke:Me,strokeOpacity:fe,strokeWidth:ne,lineDash:Ie,lineDashOffset:at,label:this.getTargetLabel(U)})}return{itemId:e,nodeData:N,tickData:L,targetData:M,labelData:R,scaleData:A}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,targetSelection:s,targetLabelSelection:o,scaleSelection:a,highlightTargetSelection:r,tickSelection:n}=this;this.seriesRect=e??Zt.NaN;const l=this.checkResize(e);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],p=this.contextNodeData?.labelData??[],u=this.contextNodeData?.targetData??[],d=this.contextNodeData?.scaleData??[],f=this.contextNodeData?.tickData??[],y=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:d,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:u,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:u,targetLabelSelection:o}),this.updateTargetLabelNodes({targetLabelSelection:o}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:p,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:y!=null?[y]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:f,tickSelection:n}),this.updateTickNodes({tickSelection:n}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Ep(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:s}=this,{bar:o}=s,{fillOpacity:a,stroke:r,strokeOpacity:n,lineDash:l,lineDashOffset:c}=o,p=this.getStrokeWidth(o.strokeWidth),u=i.animationManager.isSkipped(),d=this.getShapeFillBBox();t.each((f,y)=>{const{topLeftCornerRadius:g,topRightCornerRadius:m,bottomRightCornerRadius:S,bottomLeftCornerRadius:D,fill:x}=y;f.fill=x,f.fillBBox=d,f.fillOpacity=a,f.stroke=r,f.strokeOpacity=n,f.strokeWidth=p,f.lineDash=l,f.lineDashOffset=c,f.topLeftCornerRadius=g,f.topRightCornerRadius=m,f.bottomRightCornerRadius=S,f.bottomLeftCornerRadius=D,f.pointerEvents=this.properties.bar.enabled?$i.PointerEvents.All:$i.PointerEvents.None,(u||f.previousDatum==null)&&f.setProperties(Lo(f,y))}),this.datumUnion.update(t,this.itemGroup,$i.Rect,(f,y,g)=>{f.pointerEvents=$i.PointerEvents.None,f.clipBBox??(f.clipBBox=new Zt(NaN,NaN,NaN,NaN)),f.x=y.x,f.y=y.y,f.clipBBox.x=y.clipBBox?.x??y.x,f.clipBBox.y=y.clipBBox?.y??y.y,this.horizontal?(f.height=f.clipBBox.height=g.height,f.width=g===y?g.width:g.x+g.width,f.clipBBox.width=f.width-(g.width-(g.clipBBox?.width??g.width)),f.topLeftCornerRadius=y.topLeftCornerRadius,f.bottomLeftCornerRadius=y.bottomLeftCornerRadius,f.topRightCornerRadius=g.topRightCornerRadius,f.bottomRightCornerRadius=g.bottomRightCornerRadius):(f.width=f.clipBBox.width=g.width,f.height=g===y?g.height:g.x+g.height,f.clipBBox.height=f.height-(g.height-(g.clipBBox?.height??g.height)),f.topLeftCornerRadius=y.topLeftCornerRadius,f.topRightCornerRadius=y.topRightCornerRadius,f.bottomLeftCornerRadius=g.bottomLeftCornerRadius,f.bottomRightCornerRadius=g.bottomRightCornerRadius)})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>Ep(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i}=this.properties,{fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:r,lineDash:n,lineDashOffset:l}=i,c=this.getShapeFillBBox();t.each((p,u)=>{const{topLeftCornerRadius:d,topRightCornerRadius:f,bottomRightCornerRadius:y,bottomLeftCornerRadius:g,fill:m}=u;p.fill=m,p.fillBBox=c,p.fillOpacity=s,p.stroke=o,p.strokeOpacity=a,p.strokeWidth=r,p.lineDash=n,p.lineDashOffset=l,p.topLeftCornerRadius=d,p.topRightCornerRadius=f,p.bottomRightCornerRadius=y,p.bottomLeftCornerRadius=g,p.setProperties(Lo(p,u))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e,s=i?this.properties.highlightStyle.item:void 0;t.each((o,a)=>{const{x:r,y:n,shape:l,size:c,rotation:p,fill:u,fillOpacity:d,stroke:f,strokeOpacity:y,strokeWidth:g,lineDash:m,lineDashOffset:S}=a;o.size=c,o.shape=l==="line"?Lp:l,o.fill=s?.fill??u,o.fillOpacity=s?.fillOpacity??d,o.stroke=s?.stroke??f,o.strokeOpacity=s?.strokeOpacity??y,o.strokeWidth=s?.strokeWidth??g,o.lineDash=s?.lineDash??m,o.lineDashOffset=s?.lineDashOffset??S,o.translationX=r,o.translationY=n,o.rotation=p})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,s)=>{const{x:o,y:a,text:r}=s,{offsetX:n,offsetY:l,fill:c,fontStyle:p,fontWeight:u,fontSize:d,fontFamily:f,textAlign:y,textBaseline:g}=s.label;i.visible=!0,i.x=o+n,i.y=a+l,i.text=r,i.fill=c,i.fontStyle=p,i.fontWeight=u,i.fontSize=d,i.fontFamily=f,i.textAlign=y,i.textBaseline=g})}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.tickId)}updateTickNodes(e){const{gaugeRect:t,properties:i}=this,s=i.defaultScale,{enabled:o,color:a,fontFamily:r=s.label.fontFamily,fontSize:n=s.label.fontSize,fontStyle:l,fontWeight:c=s.label.fontWeight,spacing:p}=i.scale.label;let{placement:u}=i.scale.label;const d=Gp(i.scale.label.rotation??0);let f,y,g,m;this.horizontal?(u??(u="after"),f="center",y=u==="before"?"bottom":"top",m=this.originY+t.y+(u==="before"?-p:t.height+p)):(u??(u="before"),f=u==="before"?"end":"start",y="middle",g=this.originX+t.x+(u==="before"?-p:t.width+p)),e.tickSelection.each((S,D)=>{if(!o){S.visible=!1;return}const x=g??D.translationY,k=m??D.translationY;S.visible=!0,S.text=D.tickLabel,S.fill=a,S.fontFamily=r,S.fontSize=n,S.fontStyle=l,S.fontWeight=c,S.textBaseline=y,S.textAlign=f,S.x=x,S.y=k,S.rotationCenterX=x,S.rotationCenterY=k,S.rotation=d})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>"primary")}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((s,o)=>{s.fill=o.fill,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontFamily=o.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,horizontal:i,scale:s,seriesRect:o,gaugeRect:a}=this,{x:r,y:n,width:l,height:c}=a,p=e?.label??this.properties.value;let u;if(i){const y=s.convert(p);u=new Zt(r,n,y-r,c)}else{const y=s.convert(p);u=new Zt(r,y,l,c-y)}const d={seriesRect:o,gaugeRect:a,barRect:u},{margin:f}=this.properties;pv(this,this.ctx,t,{padding:f,horizontal:i},d,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),hv([this.datumSelection],Lo),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i=0,s=0;if(this.labelSelection.each((o,a)=>{o.opacity=1,i=o.previousDatum?.value??e.from??a.value,s=a.value}),!this.labelsHaveExplicitText())if(i===s)this.formatLabelText({label:s});else{const o=`${this.id}_labels`;t.animate({id:o,groupId:"label",from:{label:i},to:{label:s},phase:e.phase??"update",ease:Dv.easeOut,onUpdate:a=>this.formatLabelText(a)})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Bp(!0,this.horizontal);Er(this.id,"node",e,[this.datumSelection],t,(i,s)=>s.itemId),Er(this.id,"label",e,[this.labelSelection],Np,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Bp(!1,this.horizontal);Er(this.id,"node",e,[this.datumSelection],t,(i,s)=>s.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:s}=i;let o,a;if(e.type===0?(o=i.value,a=i.label.text):{value:o,text:a}=i.targets[e.index],o!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Tp(this,e)}pickFocus(e){return Op(this,e)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(e){}datumIndexForCategoryValue(e){}};Ro.className="LinearGaugeSeries",Ro.type="linear-gauge";var hR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:e=>new Ro(e),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},Or.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",Or.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{spacing:11}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[2]},minimumFontSize:12,spacing:18,color:{$ref:"backgroundColor"}},margin:4}}},Kp={type:"series",name:"linear-gauge",chartType:"gauge",enterprise:!0,options:Or.linearGaugeSeriesOptionsDef,create:e=>new Ro(e)};import{_ModuleSupport as zp}from"ag-charts-community";var Ss={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1}};import{_ModuleSupport as $p}from"ag-charts-community";import{Logger as Hp}from"ag-charts-core";import{_ModuleSupport as Av}from"ag-charts-community";var Nv=1e-9;function Xp(e,t,i,s){const[o,a]=e,[r,n]=t,l=r-o,c=n-a,p=l*l+c*c;let u,d;if(Math.abs(p)<Nv)u=o,d=a;else{let g=((i-o)*l+(s-a)*c)/p;g=Math.max(0,Math.min(1,g)),u=o+g*(r-o),d=a+g*(n-a)}const f=i-u,y=s-d;return f*f+y*y}function Yp(e,t,i){let s=1/0,o=e[e.length-1];for(const a of e)s=Math.min(s,Xp(o,a,t,i)),o=a;return Math.sqrt(s)}function Gr(e){let[t,i]=e[0],s=0;for(let o=1;o<e.length;o+=1){const[a,r]=e[o],n=Math.hypot(a-t,r-i);s+=n,t=a,i=r}return s}function To(e){if(e.length===0)return;const t=Gr(e)/2;let[i,s]=e[0],o=0;for(let a=1;a<e.length;a+=1){const[r,n]=e[a],l=Math.hypot(r-i,n-s),c=o+l;if(c>t){const p=(t-o)/l,u=[i+(r-i)*p,s+(n-s)*p],d=Math.atan2(n-s,r-i);return{point:u,angle:d}}o=c,i=r,s=n}}import{_ModuleSupport as Pv}from"ag-charts-community";var{LonLatBBox:Lv}=Pv;function xs(e,t,i,s,o){return e==null?e=new Lv(t,i,s,o):(e.lon0=Math.min(e.lon0,t),e.lat0=Math.min(e.lat0,i),e.lon1=Math.max(e.lon1,s),e.lat1=Math.max(e.lat1,o)),e}function bi(e,t){return e.forEach(i=>{const[s,o]=i;t=xs(t,s,o,s,o)}),t}function Rv(e){if(e.length===0)return;let t=0,i=0,s=0,[o,a]=e[e.length-1];for(const[r,n]of e){const l=o*n-r*a;s+=l,t+=(o+r)*l,i+=(a+n)*l,o=r,a=n}return s*=3,[t/s,i/s]}function Oo(e,t,i){let s=!1,o=1/0;for(const a of e){let r=a[a.length-1],[n,l]=r;for(const c of a){const[p,u]=c;u>i!=l>i&&t<(n-p)*(i-u)/(l-u)+p&&(s=!s),o=Math.min(o,Xp(r,c,t,i)),r=c,n=p,l=u}}return(s?-1:1)*Math.sqrt(o)}var{Path:Tv,ExtendedPath2D:Ov,BBox:Cv,SceneChangeDetection:wv,SceneObjectChangeDetection:Fv,objectsEqual:Bv}=Av,Xi=class extends Tv{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new Ov}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=e!=null?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(e,t)?!1:this.geometryDistance(i,e,t)<=0}distanceSquared(e,t){const{projectedGeometry:i}=this;if(i==null)return 1/0;const s=this.geometryDistance(i,e,t);return s>0?s*s:0}geometryDistance(e,t,i){const{renderMode:s,strokeWidth:o}=this,a=(s&1)!==0,r=(s&2)!==0,n=Math.max(o/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,t,i)),1/0);case"MultiPolygon":return a?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(Oo(c,t,i),0)),1/0):1/0;case"Polygon":return a?Math.max(Oo(e.coordinates,t,i),0):1/0;case"MultiLineString":return r?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(Yp(c,t,i)-n,0)),1/0):1/0;case"LineString":return r?Math.max(Yp(e.coordinates,t,i)-n,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:s,strokePath:o}=this,a=(i&1)!==0,r=(i&2)!==0;switch(e.type){case"GeometryCollection":e.geometries.forEach(n=>{t=this.drawGeometry(n,t)});break;case"MultiPolygon":a&&e.coordinates.forEach(n=>{t=this.drawPolygon(s,n,t)});break;case"Polygon":a&&(t=this.drawPolygon(s,e.coordinates,t));break;case"LineString":r&&(t=this.drawLineString(o,e.coordinates,t,!1));break;case"MultiLineString":r&&e.coordinates.forEach(n=>{t=this.drawLineString(o,n,t,!1)});break;case"Point":case"MultiPoint":break}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let s=1;s<t.length;s+=1){const o=t[s];this.drawLineString(e,o,void 0,!0)}return i}drawLineString(e,t,i,s){if(t.length<2)return i;const o=s?t.length-1:t.length;for(let a=0;a<o;a+=1){const[r,n]=t[a];if(a===0?e.moveTo(r,n):e.lineTo(r,n),i==null)i=new Cv(r,n,0,0);else{const{x:l,y:c}=i,p=l+i.width,u=c+i.height;i.x=Math.min(l,r),i.y=Math.min(c,n),i.width=Math.max(p,r)-i.x,i.height=Math.max(u,n)-i.y}}return s&&e.closePath(),i}};h([Fv({equals:Bv})],Xi.prototype,"projectedGeometry",2),h([wv()],Xi.prototype,"renderMode",2);function Yi(e,t){if(e.bbox!=null){const[i,s,o,a]=e.bbox;return t=xs(t,i,s,o,a),t}switch(e.type){case"GeometryCollection":e.geometries.forEach(i=>{t=Yi(i,t)});break;case"MultiPolygon":e.coordinates.forEach(i=>{i.length>0&&(t=bi(i[0],t))});break;case"Polygon":e.coordinates.length>0&&(t=bi(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach(i=>{t=bi(i,t)});break;case"LineString":t=bi(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach(i=>{const[s,o]=i;t=xs(t,s,o,s,o)});break;case"Point":{const[i,s]=e.coordinates;t=xs(t,i,s,i,s);break}}return t}function Co(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(s=>{const o=Co(s);if(o==null)return;const a=bi(o[0],void 0);if(a==null)return;const r=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(t==null||r>t)&&(t=r,i=o)}),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach(s=>{const o=bi(s[0],void 0);if(o==null)return;const a=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(t==null||a>t)&&(t=a,i=s)}),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function wo(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(s=>{const o=wo(s);if(o==null)return;const a=Gr(o);a!=null&&(t==null||a>t)&&(t=a,i=o)}),i}case"MultiLineString":{let t=0,i;return e.coordinates.forEach(s=>{const o=Gr(s);o>t&&(t=o,i=s)}),i}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Wr(e,t){if(e==null)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some(i=>Wr(i,t));case"MultiPolygon":case"Polygon":return(t&1)!==0;case"MultiLineString":case"LineString":return(t&2)!==0;case"MultiPoint":case"Point":return(t&4)!==0}}function Qt(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map(i=>Qt(i,t))};case"Polygon":return{type:"Polygon",coordinates:Vr(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:_v(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:Vr(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:Kr(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:Kr(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function _v(e,t){return e.map(i=>Vr(i,t))}function Vr(e,t){return e.map(i=>Kr(i,t))}function Kr(e,t){return e.map(i=>t.convert(i))}function Ev(){return{fromFn:(i,s,o)=>o==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,s,o)=>o==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function qp(e,t){const i=e.contextNodeData?.nodeData[t.datumIndex];if(i!==void 0){for(const s of e.datumSelection.nodes())if(s.datum===i)return s}}import{_ModuleSupport as Up}from"ag-charts-community";var SR=class extends Up.SeriesProperties{},Ds=class extends Up.DataModelSeries{addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",e=>{this.onLegendItemClick(e)}),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>{this.onLegendItemDoubleClick(e)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}};import{_ModuleSupport as Gv}from"ag-charts-community";var{Property:be,SeriesProperties:Wv,SeriesTooltip:Vv,Label:Kv}=Gv,De=class extends Wv{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new Kv,this.tooltip=new Vv}};h([be],De.prototype,"topology",2),h([be],De.prototype,"title",2),h([be],De.prototype,"legendItemName",2),h([be],De.prototype,"idKey",2),h([be],De.prototype,"topologyIdKey",2),h([be],De.prototype,"idName",2),h([be],De.prototype,"labelKey",2),h([be],De.prototype,"labelName",2),h([be],De.prototype,"sizeKey",2),h([be],De.prototype,"sizeName",2),h([be],De.prototype,"colorKey",2),h([be],De.prototype,"colorName",2),h([be],De.prototype,"sizeDomain",2),h([be],De.prototype,"colorRange",2),h([be],De.prototype,"maxStrokeWidth",2),h([be],De.prototype,"stroke",2),h([be],De.prototype,"strokeOpacity",2),h([be],De.prototype,"strokeWidth",2),h([be],De.prototype,"lineDash",2),h([be],De.prototype,"lineDashOffset",2),h([be],De.prototype,"itemStyler",2),h([be],De.prototype,"label",2),h([be],De.prototype,"tooltip",2);var{getMissCount:zv,createDatumId:jp,SeriesNodePickMode:Jp,valueProperty:bs,CachedTextMeasurerPool:$v,ColorScale:Hv,LinearScale:Xv,Selection:zr,Text:Yv,Transformable:qv}=$p,Fo=class extends Ds{constructor(e){super({moduleCtx:e,categoryKey:void 0,useLabelLayer:!0,pickModes:[Jp.EXACT_SHAPE_MATCH,Jp.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new De,this._chartTopology=void 0,this.colorScale=new Hv,this.sizeScale=new Xv,this.datumSelection=zr.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=zr.select(this.labelGroup,Yv),this.highlightDatumSelection=zr.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0):!1}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Xi;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:s,colorScale:o}=this,{topologyIdKey:a,idKey:r,sizeKey:n,colorKey:l,labelKey:c,sizeDomain:p,colorRange:u}=this.properties,d=new Map;i?.features.forEach(x=>{const k=x.properties?.[a];k==null||!Wr(x.geometry,2)||d.set(k,x)});const f=this.sizeScale.type,y=this.colorScale.type,g=this.scale?.type,{dataModel:m,processedData:S}=await this.requestDataModel(e,t,{props:[bs(r,g,{id:"idValue",includeProperty:!1}),bs(r,g,{id:"featureValue",includeProperty:!1,processor:()=>x=>d.get(x)}),...c!=null?[bs(c,"band",{id:"labelValue"})]:[],...n!=null?[bs(n,f,{id:"sizeValue"})]:[],...l!=null?[bs(l,y,{id:"colorValue"})]:[]]}),D=m.resolveColumnById(this,"featureValue",S);if(this.topologyBounds=D.reduce((x,k)=>{const I=k?.geometry;return I==null?x:Yi(I,x)},void 0),n!=null){const x=m.resolveProcessedDataIndexById(this,"sizeValue"),k=S.domain.values[x]??[];s.domain=p??k}if(u!=null&&this.isColorScaleValid()){const x=m.resolveProcessedDataIndexById(this,"colorValue");o.domain=S.domain.values[x],o.range=u,o.update()}i==null&&Hp.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=zv(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelDatum(e,t,i,s){if(t==null||i==null)return;const o=wo(i);if(o==null)return;const{idKey:a,idName:r,sizeKey:n,sizeName:l,colorKey:c,colorName:p,labelKey:u,labelName:d,label:f}=this.properties,y=this.getLabelText(f,{value:t,datum:e,idKey:a,idName:r,sizeKey:n,sizeName:l,colorKey:c,colorName:p,labelKey:u,labelName:d});if(y==null)return;const g=$v.measureText(String(y),{font:s}),m=To(o);if(m==null)return;const[S,D]=m.point,{width:x,height:k}=g;return{point:{x:S,y:D,size:0},label:{width:x,height:k,text:y},anchor:void 0,placement:void 0}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:s,properties:o,scale:a}=this,{idKey:r,sizeKey:n,colorKey:l,labelKey:c,label:p}=o;if(t==null||i==null)return;const u=t.resolveColumnById(this,"idValue",i),d=t.resolveColumnById(this,"featureValue",i),f=c!=null?t.resolveColumnById(this,"labelValue",i):void 0,y=n!=null?t.resolveColumnById(this,"sizeValue",i):void 0,g=l!=null?t.resolveColumnById(this,"colorValue",i):void 0,m=o.maxStrokeWidth??o.strokeWidth;s.range=[Math.min(o.strokeWidth,m),m];const S=p.getFont(),D=new Map;i.dataSources.get(this.id)?.forEach((v,N)=>{const M=u[N],R=d[N]?.geometry??void 0,A=R!=null&&a!=null?Qt(R,a):void 0;M!=null&&A!=null&&D.set(M,A)});const x=[],k=[],I=[];(i.dataSources.get(this.id)??[]).forEach((v,N)=>{const M=u[N],R=g?.[N],A=y?.[N],P=f?.[N],T=D.get(M);T==null&&I.push(M);const w=this.getLabelDatum(v,P,T,S);w!=null&&k.push(w),x.push({series:this,itemId:r,datum:v,datumIndex:N,idValue:M,labelValue:P,colorValue:R,sizeValue:A,projectedGeometry:T})});const b=10;if(I.length>b){const v=I.length-b;I.length=b,I.push(`(+${v} more)`)}return I.length>0&&Hp.warnOnce("some data items do not have matches in the provided topology",I),{itemId:e,nodeData:x,labelData:k}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,highlightDatumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let i=this.ctx.highlightManager?.getActiveHighlight();i!=null&&(i.series!==this||i.datum==null)&&(i=void 0);const s=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>jp(t.idValue))}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return{stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset}}getItemStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l,sizeScale:c}=this,{colorRange:p,itemStyler:u}=n;let d;if(!a&&i!=null&&(d??(d={}),d.stroke=this.isColorScaleValid()?l.convert(i):p?.[0]??n.stroke),s!=null&&(d??(d={}),d.strokeWidth=c.convert(s,{clamp:!0})),u!=null){const f=this.cachedDatumCallback(jp(e,a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:t,highlighted:a,...o,...d}));d??(d={}),Object.assign(d,f)}return d}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getItemBaseStyle(i);t.each((o,a)=>{const{datum:r,datumIndex:n,colorValue:l,sizeValue:c,projectedGeometry:p}=a;if(p==null){o.visible=!1,o.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(n),r,l,c,s,i);o.visible=!0,o.projectedGeometry=p,o.stroke=u?.stroke??s.stroke,o.strokeWidth=u?.strokeWidth??s.strokeWidth,o.strokeOpacity=u?.strokeOpacity??s.strokeOpacity,o.lineDash=u?.lineDash??s.lineDash,o.lineDashOffset=u?.lineDashOffset??s.lineDashOffset})}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=$p.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{x:l,y:c,width:p,height:u,text:d})=>{n.visible=!0,n.x=l+p/2,n.y=c+u/2,n.text=d,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textAlign="center",n.textBaseline="middle"})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,s=i!=null?wo(i):void 0,o=s!=null?To(s)?.point:void 0,a=o!=null?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{strokeWidth:o,strokeOpacity:a,lineDash:r}=s;let{stroke:n}=s;if(e!=null&&this.isColorScaleValid()){const c=t.resolveColumnById(this,"colorValue",i)[e];n=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:n,strokeWidth:o,strokeOpacity:a,lineDash:r}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:r,idKey:n,idName:l,colorKey:c,colorName:p,colorRange:u,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&u!=null){const f=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,colorName:p,colorRange:u,colorDomain:f}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:r??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{idKey:a,idName:r,colorKey:n,colorName:l,sizeKey:c,sizeName:p,labelKey:u,labelName:d,title:f,legendItemName:y,tooltip:g}=o;if(!i||!s)return;const m=s.dataSources.get(this.id)?.[e],S=i.resolveColumnById(this,"idValue",s),D=[],x=c!=null?i.resolveColumnById(this,"sizeValue",s)[e]:void 0,k=n!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0;if(c!=null&&D.push({label:p,fallbackLabel:c,value:String(x)}),n!=null&&D.push({label:l,fallbackLabel:n,value:String(k)}),u!=null&&u!==a){const L=i.resolveColumnById(this,"labelValue",s)[e];D.push({label:d,fallbackLabel:u,value:L})}const I=this.getItemBaseStyle(!1);return Object.assign(I,this.getItemStyleOverrides(String(e),e,k,x,I,!1)),this.formatTooltipWithContext(g,{heading:S[e],title:f??y,symbol:this.legendItemSymbol(e),data:D},{seriesId:t,datum:m,title:f,idKey:a,idName:r,colorKey:n,colorName:l,sizeKey:c,sizeName:p,labelKey:u,labelName:d,...I})}computeFocusBounds(e){const t=qp(this,e);return t?qv.toCanvas(this.contentGroup,t.getBBox()):void 0}};Fo.className="MapLineSeries",Fo.type="map-line";import{_ModuleSupport as Uv}from"ag-charts-community";import{and as jv,arrayLength as Jv,arrayOf as Zv,color as Qv,constant as ek,geoJson as tk,required as Zp,string as Nt,undocumented as ik}from"ag-charts-core";var{commonSeriesOptionsDefs:sk,mapLineSeriesThemeableOptionsDef:ok,without:ak}=Uv,Qp={...ok,...ak(sk,["highlightStyle"]),type:Zp(ek("map-line")),idKey:Zp(Nt),sizeKey:Nt,colorKey:Nt,labelKey:Nt,idName:Nt,sizeName:Nt,colorName:Nt,labelName:Nt,topology:tk,topologyIdKey:Nt,legendItemName:Nt,title:Nt};Qp.colorRange=ik(jv(Zv(Qv),Jv(1)));var vR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:e=>new Fo(e),tooltipDefaults:{range:"exact"},themeTemplate:{...Ss,series:{stroke:zp.SAFE_STROKE_FILL_OPERATION,colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},zp.SAFE_RANGE2_OPERATION]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},eh={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:Qp,create:e=>new Fo(e)};import"ag-charts-community";import{_ModuleSupport as rk}from"ag-charts-community";import{Logger as nk}from"ag-charts-core";import{_ModuleSupport as lk}from"ag-charts-community";var{Property:vi,SeriesProperties:ck,SeriesTooltip:pk}=lk,ei=class extends ck{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new pk}};h([vi],ei.prototype,"topology",2),h([vi],ei.prototype,"stroke",2),h([vi],ei.prototype,"strokeOpacity",2),h([vi],ei.prototype,"strokeWidth",2),h([vi],ei.prototype,"lineDash",2),h([vi],ei.prototype,"lineDashOffset",2),h([vi],ei.prototype,"tooltip",2);var{createDatumId:hk,SeriesNodePickMode:uk,Group:dk,Selection:fk,PointerEvents:gk}=rk,Bo=class extends Ds{constructor(e){super({moduleCtx:e,categoryKey:void 0,useLabelLayer:!0,pickModes:[uk.EXACT_SHAPE_MATCH]}),this.properties=new ei,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new dk({name:"itemGroup"})),this.datumSelection=fk.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0):!1}nodeFactory(){const e=new Xi;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=gk.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const s=i.geometry;return s==null?t:Yi(s,t)},void 0),e==null&&nk.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(t==null)return;const s=[],o=[];return t.features.forEach((a,r)=>{const{geometry:n}=a,l=n!=null&&i!=null?Qt(n,i):void 0;l!=null&&s.push({series:this,itemId:r,datum:a,datumIndex:0,index:r,projectedGeometry:l})}),{itemId:e,nodeData:s,labelData:o}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>hk(t.index))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{stroke:s,strokeOpacity:o,lineDash:a,lineDashOffset:r}=t,n=this.getStrokeWidth(t.strokeWidth);i.each((l,c)=>{const{projectedGeometry:p}=c;if(p==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=p,l.stroke=s,l.strokeWidth=n,l.strokeOpacity=o,l.lineDash=a,l.lineDashOffset=r})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}};Bo.className="MapLineBackgroundSeries",Bo.type="map-line-background";import{_ModuleSupport as yk}from"ag-charts-community";import{constant as mk,geoJson as Sk,required as xk}from"ag-charts-core";var{mapLineBackgroundSeriesThemeableOptionsDef:Dk}=yk,bk={...Dk,type:xk(mk("map-line-background")),topology:Sk},LR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:e=>new Bo(e),tooltipDefaults:{range:"exact"},themeTemplate:{...Ss,series:{stroke:{$path:["./1",{$palette:"stroke"},{$palette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},th={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:bk,create:e=>new Bo(e)};import{_ModuleSupport as $r}from"ag-charts-community";import{ValidationError as vk,validate as kk}from"ag-charts-core";import{_ModuleSupport as ih}from"ag-charts-community";import{Logger as Mk}from"ag-charts-core";var Ik=(e,t,i)=>{let s=e,o=s;for(const a of t)if(s==null||i(s.value,a)>0)s={value:a,next:s},o=s;else{for(o=o;o.next!=null&&i(o.next.value,a)<=0;)o=o.next;o.next={value:a,next:o.next}}return s};function sh(e,t,i){const s=bi(e[0],void 0);if(s==null)return;const o=(s.lon0+s.lon1)/2,a=(s.lat0+s.lat1)/2,r=Math.abs(s.lon1-s.lon0),n=Math.abs(s.lat1-s.lat0),l=Rv(e[0]),[c,p]=l,u=-Oo(e,c,p);let d;const f=(I,L)=>{const v=Math.max(L-u,0);return I-.5*v},y=(I,L,b)=>{const{distance:v,maxDistance:N}=i(e,I,L,b),M=Math.hypot(c-I,p-L),R=Math.min(Math.max(c,I-b/2),I+b/2),A=Math.min(Math.max(p,L-b/2),L+b/2),P=Math.hypot(c-R,p-A),T=f(v,M),w=f(N,P);return{distance:v,maxDistance:N,value:T,maxValue:w,x:I,y:L,stride:b}},g=(I,L,b,v)=>{const N=y(L,b,v);N.maxDistance>=0&&I.push(N)},m=Math.min(r,n)/2;let S={value:y(o,a,m),next:null};for(;S!=null;){const I=S.value,{distance:L,value:b,maxValue:v,x:N,y:M,stride:R}=I;if(S=S.next,L>0&&(d==null||b>d.value)&&(d=I),d!=null&&v-d.value<=t)continue;const A=R/2,P=[];g(P,N-A,M-A,A),g(P,N+A,M-A,A),g(P,N-A,M+A,A),g(P,N+A,M+A,A),P.sort(oh),S=Ik(S,P,oh)}if(d==null)return;const{distance:D,x,y:k}=d;return{x,y:k,distance:D}}var oh=(e,t)=>t.maxValue-e.maxValue;function Hr(e,t){const i=sh(e,t,(a,r,n,l)=>{const c=-Oo(a,r,n),p=c+l*Math.SQRT2;return{distance:c,maxDistance:p}});if(i==null)return;const{x:s,y:o}=i;return[s,o]}function ah(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap(s=>ah(s,t));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const s=Co(e);i=s!=null?Hr(s,t):void 0;break}case"Polygon":{const s=e.coordinates;i=s!=null?Hr(s,t):void 0;break}case"MultiLineString":{const s=wo(e);i=s!=null?To(s)?.point:void 0;break}case"LineString":{const s=e.coordinates;i=To(s)?.point;break}}return i!=null?[i]:[]}import{_ModuleSupport as Ak}from"ag-charts-community";var{BBox:Nk}=Ak;function rh(e){if(!e)return;const{range:t}=e,i=t[0][0],s=t[0][1],o=t[1][0]-i,a=t[1][1]-s,r=new Nk(i,s,o,a);return{series:r,axis:r}}import{_ModuleSupport as Pk}from"ag-charts-community";var{FillGradientDefaults:Lk,FillPatternDefaults:Rk,FillImageDefaults:Tk,Property:se,SeriesProperties:Ok,SeriesTooltip:Ck,Label:wk}=Pk,nh=class extends wk{constructor(){super(...arguments),this.placement="bottom"}};h([se],nh.prototype,"placement",2);var oe=class extends Ok{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillGradientDefaults=new Lk,this.fillPatternDefaults=new Rk,this.fillImageDefaults=new Tk,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new nh,this.tooltip=new Ck}};h([se],oe.prototype,"topology",2),h([se],oe.prototype,"title",2),h([se],oe.prototype,"legendItemName",2),h([se],oe.prototype,"idKey",2),h([se],oe.prototype,"topologyIdKey",2),h([se],oe.prototype,"idName",2),h([se],oe.prototype,"latitudeKey",2),h([se],oe.prototype,"latitudeName",2),h([se],oe.prototype,"longitudeKey",2),h([se],oe.prototype,"longitudeName",2),h([se],oe.prototype,"labelKey",2),h([se],oe.prototype,"labelName",2),h([se],oe.prototype,"sizeKey",2),h([se],oe.prototype,"sizeName",2),h([se],oe.prototype,"colorKey",2),h([se],oe.prototype,"colorName",2),h([se],oe.prototype,"colorRange",2),h([se],oe.prototype,"shape",2),h([se],oe.prototype,"size",2),h([se],oe.prototype,"maxSize",2),h([se],oe.prototype,"sizeDomain",2),h([se],oe.prototype,"fill",2),h([se],oe.prototype,"fillGradientDefaults",2),h([se],oe.prototype,"fillPatternDefaults",2),h([se],oe.prototype,"fillImageDefaults",2),h([se],oe.prototype,"fillOpacity",2),h([se],oe.prototype,"stroke",2),h([se],oe.prototype,"strokeWidth",2),h([se],oe.prototype,"strokeOpacity",2),h([se],oe.prototype,"lineDash",2),h([se],oe.prototype,"lineDashOffset",2),h([se],oe.prototype,"itemStyler",2),h([se],oe.prototype,"label",2),h([se],oe.prototype,"tooltip",2);var{CachedTextMeasurerPool:Fk,fromToMotion:Bk,StateMachine:_k,getMissCount:Ek,createDatumId:lh,SeriesNodePickMode:ch,valueProperty:ki,computeMarkerFocusBounds:Gk,ColorScale:Wk,LinearScale:Vk,Group:Kk,Selection:Xr,Text:zk,Marker:Yr,applyShapeStyle:$k,getShapeStyle:ph}=ih,_o=class extends Ds{constructor(e){super({moduleCtx:e,categoryKey:void 0,useLabelLayer:!0,pickModes:[ch.EXACT_SHAPE_MATCH,ch.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new oe,this._chartTopology=void 0,this.colorScale=new Wk,this.sizeScale=new Vk,this.markerGroup=this.contentGroup.appendChild(new Kk({name:"markerGroup"})),this.labelSelection=Xr.select(this.labelGroup,zk,!1),this.markerSelection=Xr.select(this.markerGroup,Yr,!1),this.highlightMarkerSelection=Xr.select(this.highlightNode,Yr),this.animationState=new _k("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const e=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[3,e],this.highlightGroup.zIndex=[4,e],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:s,colorScale:o}=this,{topologyIdKey:a,idKey:r,latitudeKey:n,longitudeKey:l,sizeKey:c,colorKey:p,labelKey:u,sizeDomain:d,colorRange:f}=this.properties,y=new Map;i?.features.forEach(v=>{const N=v.properties?.[a];N!=null&&y.set(N,v)});const g=this.sizeScale.type,m=this.colorScale.type,S=this.scale?.type,D=n!=null&&l!=null,{dataModel:x,processedData:k}=await this.requestDataModel(e,t,{props:[...r!=null?[ki(r,S,{id:"idValue",includeProperty:!1}),ki(r,S,{id:"featureValue",includeProperty:!1,processor:()=>v=>y.get(v)})]:[],...D?[ki(n,S,{id:"latValue"}),ki(l,S,{id:"lonValue"})]:[],...u?[ki(u,"band",{id:"labelValue"})]:[],...c?[ki(c,g,{id:"sizeValue"})]:[],...p?[ki(p,m,{id:"colorValue"})]:[]]}),I=r!=null?x.resolveColumnById(this,"featureValue",k):void 0,L=D?x.resolveColumnById(this,"latValue",k):void 0,b=D?x.resolveColumnById(this,"lonValue",k):void 0;if(this.topologyBounds=k.dataSources.get(this.id)?.reduce((v,N,M)=>{const A=I?.[M]?.geometry;if(A!=null&&(v=Yi(A,v)),L!=null&&b!=null){const P=b[M],T=L[M];v=xs(v,P,T,P,T)}return v},void 0),c!=null){const v=x.resolveProcessedDataIndexById(this,"sizeValue"),N=k.domain.values[v]??[];s.domain=d??N}if(f!=null&&this.isColorScaleValid()){const v=x.resolveProcessedDataIndexById(this,"colorValue");o.domain=k.domain.values[v],o.range=f,o.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=Ek(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelDatum(e,t,i,s,o,a){if(t==null)return;const{idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:u,sizeKey:d,sizeName:f,colorKey:y,colorName:g,labelKey:m,labelName:S,label:D,shape:x}=this.properties,{placement:k}=D,I=this.getLabelText(D,{value:t,datum:e,idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:u,sizeKey:d,sizeName:f,colorKey:y,colorName:g,labelKey:m,labelName:S});if(I==null)return;const{width:L,height:b}=Fk.measureText(String(I),{font:a}),v=Yr.anchor(x);return{point:{x:i,y:s,size:o},label:{width:L,height:b,text:I},anchor:v,placement:k}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:s,properties:o,scale:a}=this,{idKey:r,latitudeKey:n,longitudeKey:l,sizeKey:c,colorKey:p,labelKey:u,label:d}=o;if(t==null||i==null||a==null)return;const f=n!=null&&l!=null,y=r!=null?t.resolveColumnById(this,"idValue",i):void 0,g=r!=null?t.resolveColumnById(this,"featureValue",i):void 0,m=f?t.resolveColumnById(this,"latValue",i):void 0,S=f?t.resolveColumnById(this,"lonValue",i):void 0,D=u!=null?t.resolveColumnById(this,"labelValue",i):void 0,x=c!=null?t.resolveColumnById(this,"sizeValue",i):void 0,k=p!=null?t.resolveColumnById(this,"colorValue",i):void 0,I=o.maxSize??o.size;s.range=[Math.min(o.size,I),I];const L=d.getFont();let b;y!=null&&g!=null&&(b=new Map,i.dataSources.get(this.id)?.forEach((P,T)=>{const w=y[T],O=g[T]?.geometry??void 0,F=O!=null&&a!=null?Qt(O,a):void 0;w!=null&&F!=null&&b.set(w,F)}));const v=[],N=[],M=[];(i.dataSources.get(this.id)??[]).forEach((P,T)=>{const w=y?.[T],O=S?.[T],F=m?.[T],E=k?.[T],C=x?.[T],_=D?.[T],B=C!=null?s.convert(C,{clamp:!0}):o.size,G=w!=null?b?.get(w):void 0;if(w!=null&&Qt==null&&M.push(w),O!=null&&F!=null){const[W,V]=a.convert([O,F]),K=this.getLabelDatum(P,_,W,V,B,L);K&&N.push(K),v.push({series:this,itemId:n,datum:P,datumIndex:T,index:-1,idValue:w,lonValue:O,latValue:F,labelValue:_,sizeValue:C,colorValue:E,point:{x:W,y:V,size:B},midPoint:{x:W,y:V}})}else G!=null&&ah(G,1).forEach(([W,V],K)=>{const $=this.getLabelDatum(P,_,W,V,B,L);$&&N.push($),v.push({series:this,itemId:n,datum:P,datumIndex:T,index:K,idValue:w,lonValue:O,latValue:F,labelValue:_,sizeValue:C,colorValue:E,point:{x:W,y:V,size:B},midPoint:{x:W,y:V}})})});const A=10;if(M.length>A){const P=M.length-A;M.length=A,M.push(`(+${P} more)`)}return M.length>0&&Mk.warnOnce("some data items do not have matches in the provided topology",M),{itemId:e,nodeData:v,labelData:N}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:e}){const t=this.checkResize(e),i=this.checkScaleChange(),{markerSelection:s,highlightMarkerSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const r=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:r,markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:o}),this.updateMarkerNodes({markerSelection:o,isHighlight:!0,highlightedDatum:a}),(i||t)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=ih.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{x:l,y:c,width:p,height:u,text:d})=>{n.visible=!0,n.x=l+p/2,n.y=c+u/2,n.text=d,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textAlign="center",n.textBaseline="middle"})}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,s=>lh([s.index,s.idValue,s.lonValue,s.latValue]))}getMarkerItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return ph({shape:t.shape,size:t.size,fill:i?.fill??t.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getMarkerItemStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l,sizeScale:c}=this,{colorRange:p,itemStyler:u}=n;let d;if(d??(d={}),!a&&i!=null&&(d.fill=this.isColorScaleValid()?l.convert(i):p?.[0]??n.fill),s!=null&&(d.size=c.convert(s,{clamp:!0})),u!=null){const f=this.cachedDatumCallback(lh(e,a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:t,highlighted:a,...o,...d}));d??(d={}),Object.assign(d,f)}return d}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:s}=e,o=this.getMarkerItemBaseStyle(i),a=rh(this.scale);t.each((r,n)=>{const{datumIndex:l,datum:c,point:p,colorValue:u,sizeValue:d}=n,f=this.getMarkerItemStyleOverrides(String(l),c,u,d,o,i);r.shape=f?.shape??o.shape,r.size=f?.size??o.size,$k(r,o,f,a),r.x=p.x,r.y=p.y,r.scalingCenterX=p.x,r.scalingCenterY=p.y,r.zIndex=!i&&s!=null&&c===s.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t=Ev();Bk(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(e){const{x:t,y:i}=e;let s=1/0,o;return this.contextNodeData?.nodeData.forEach(a=>{const{x:r,y:n,size:l}=a.point,c=Math.max(Math.abs(r-t)-l,0),p=Math.max(Math.abs(n-i)-l,0),u=c*c+p*p;u<s&&(s=u,o=a)}),o!=null?{datum:o,distance:Math.sqrt(s)}:void 0}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{shape:o,fillOpacity:a,stroke:r,strokeWidth:n,strokeOpacity:l,lineDash:c,lineDashOffset:p}=s;let{fill:u}=s;if(e!=null&&this.isColorScaleValid()){const f=t.resolveColumnById(this,"colorValue",i)[e];u=this.colorScale.convert(f)}return{marker:ph({shape:o,fill:u,fillOpacity:a,stroke:r,strokeWidth:n,strokeOpacity:l,lineDash:c,lineDashOffset:p},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:r,idName:n,idKey:l,colorKey:c,colorName:p,colorRange:u,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&u!=null){const f=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,colorName:p,colorRange:u,colorDomain:f}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:r??a??n??l??s},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{idKey:a,idName:r,latitudeKey:n,latitudeName:l,longitudeKey:c,longitudeName:p,colorKey:u,colorName:d,sizeKey:f,sizeName:y,labelKey:g,labelName:m,title:S,legendItemName:D,tooltip:x}=o;if(!i||!s)return;const k=s.dataSources.get(this.id)?.[e],I=f!=null?i.resolveColumnById(this,"sizeValue",s)[e]:void 0,L=u!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,b=[];if(I!=null&&b.push({label:y,fallbackLabel:f,value:String(I)}),L!=null&&b.push({label:d,fallbackLabel:u,value:String(L)}),g!=null&&g!==a){const M=i.resolveColumnById(this,"labelValue",s)[e];b.push({label:m,fallbackLabel:g,value:M})}let v;if(a!=null)v=i.resolveColumnById(this,"idValue",s)[e];else if(n!=null&&c!=null){const M=i.resolveColumnById(this,"latValue",s)[e],R=i.resolveColumnById(this,"lonValue",s)[e];v=`${Math.abs(M).toFixed(4)}\xB0 ${M>=0?"N":"S"}, ${Math.abs(R).toFixed(4)}\xB0 ${R>=0?"W":"E"}`}const N=this.getMarkerItemBaseStyle(!1);return Object.assign(N,this.getMarkerItemStyleOverrides(String(e),e,L,I,N,!1)),this.formatTooltipWithContext(x,{heading:v,title:S??D,symbol:this.legendItemSymbol(e),data:b},{seriesId:t,datum:k,title:S,idKey:a,idName:r,latitudeKey:n,latitudeName:l,longitudeKey:c,longitudeName:p,colorKey:u,colorName:d,sizeKey:f,sizeName:y,labelKey:g,labelName:m,...N})}getFormattedMarkerStyle(e){const{datumIndex:t,colorValue:i,sizeValue:s}=e,o=this.getMarkerItemBaseStyle(!1);return Object.assign(o,this.getMarkerItemStyleOverrides(String(t),t,i,s,o,!1)),{size:o.size}}computeFocusBounds(e){return Gk(this,e)}};_o.className="MapMarkerSeries",_o.type="map-marker";import{_ModuleSupport as Hk}from"ag-charts-community";import{constant as Xk,geoJson as Yk,required as qk,string as Ze}from"ag-charts-core";var{commonSeriesOptionsDefs:Uk,mapMarkerSeriesThemeableOptionsDef:jk,without:Jk}=Hk,Zk={...jk,...Jk(Uk,["highlightStyle"]),type:qk(Xk("map-marker")),idKey:Ze,latitudeKey:Ze,longitudeKey:Ze,sizeKey:Ze,colorKey:Ze,labelKey:Ze,idName:Ze,latitudeName:Ze,longitudeName:Ze,sizeName:Ze,colorName:Ze,labelName:Ze,topology:Yk,topologyIdKey:Ze,legendItemName:Ze,title:Ze},ER={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:e=>new _o(e),tooltipDefaults:{range:"exact"},themeTemplate:{...Ss,series:{shape:"circle",maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},$r.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:$r.FILL_PATTERN_DEFAULTS,fillImageDefaults:$r.FILL_IMAGE_DEFAULTS,fillOpacity:.5,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},hh={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:Zk,create:e=>new _o(e),validate(e,t,i){const s=kk(e,t,i),{cleared:o,invalid:a}=s;if(o?.idKey==null&&(o?.latitudeKey==null||o?.longitudeKey==null)){const r=l=>i?`${i}.${l}`:l,n=`Either \`${r("idKey")}\` or both \`${r("latitudeKey")}\` and \`${r("longitudeKey")}\` are required.`;a.push(new vk("required",n,null,i))}return s}};import{_ModuleSupport as qr}from"ag-charts-community";import{_ModuleSupport as uh}from"ag-charts-community";import{Logger as dh}from"ag-charts-core";function Qk(e,{aspectRatio:t,precision:i}){const s=sh(e,i,(l,c,p,u)=>{const d=t0(l,c,p,t),f=d+2*u*t,y=d*Math.SQRT2,g=f*Math.SQRT2;return{distance:y,maxDistance:g}});if(s==null)return;const{x:o,y:a,distance:r}=s,n=r/Math.SQRT2;return{x:o,y:a,maxWidth:n}}function e0(e,t,i,s,o){const[a,r]=e,[n,l]=t,c=1/o,p=n-a,u=l-r,[d,f]=r<=l?e:t,[y,g]=a<=n?e:t,[m,S]=r<=l?t:e,[D,x]=a<=n?t:e;let k=1/0;if(p!==0){const M=u/p;for(let R=0;R<=1;R+=1){const A=R===0?c:-c,P=(M*a-r-A*i+s)/(M-A);if(P>=y&&P<=D){const T=Math.abs(i-P)*2;k=Math.min(k,T)}}}else for(let M=0;M<=1;M+=1){const A=(M===0?c:-c)*(a-i)+s;if(A>=f&&A<=S){const T=Math.abs(s-A)*2*o;k=Math.min(k,T)}}const I=o,L=Math.abs((d-i)/(f-s)),b=Math.abs((m-i)/(S-s));if(S<s&&b<I){const R=Math.abs(s-S)*2*o;k=Math.min(k,R)}else if(f>s&&L<I){const R=Math.abs(s-f)*2*o;k=Math.min(k,R)}const v=Math.abs((g-s)/(y-i)),N=Math.abs((x-s)/(D-i));if(D<i&&N<c){const M=Math.abs(i-D)*2;k=Math.min(k,M)}else if(y>i&&v<c){const M=Math.abs(i-y)*2;k=Math.min(k,M)}return k}function t0(e,t,i,s){let o=!1,a=1/0;for(const r of e){let n=r[r.length-1],[l,c]=n;for(const p of r){const[u,d]=p;d>i!=c>i&&t<(l-u)*(i-d)/(c-d)+u&&(o=!o);const f=e0(n,p,t,i,s);a=Math.min(a,f),n=p,l=u,c=d}}return(o?1:-1)*a}function Eo(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function i0(e,t,i,s,o,a){const r=o-a/2,n=o+a/2,[l,c]=t,[p,u]=i,d=p-l,f=u-c,[y,g]=l<=p?t:i,[m,S]=l<=p?i:t;if(d!==0){const D=f/d;for(let x=0;x<=1;x+=1){const I=((x===0?r:n)-c)/D+l;I>=y&&I<=m&&Eo(e,s,I)}}else Math.max(r,Math.min(c,u))<=Math.min(n,Math.max(c,u))&&Eo(e,s,l);return m<s&&S>=r&&S<=n?Eo(e,s,m):y>s&&g>=r&&g<=n&&Eo(e,s,y),e}function s0(e,t,i,s){const o={minX:-1/0,maxX:1/0};for(const n of e){let l=n[n.length-1];for(const c of n)i0(o,l,c,t,i,s),l=c}const{minX:a,maxX:r}=o;return Number.isFinite(a)&&Number.isFinite(r)?{x:t+(a+r)/2,width:r-a}:{x:t,width:0}}import{_ModuleSupport as o0}from"ag-charts-community";var{Property:me,SeriesProperties:a0,SeriesTooltip:r0,FillGradientDefaults:n0,FillPatternDefaults:l0,FillImageDefaults:c0}=o0,de=class extends a0{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillGradientDefaults=new n0,this.fillPatternDefaults=new l0,this.fillImageDefaults=new c0,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new ps,this.tooltip=new r0}};h([me],de.prototype,"topology",2),h([me],de.prototype,"title",2),h([me],de.prototype,"legendItemName",2),h([me],de.prototype,"idKey",2),h([me],de.prototype,"idName",2),h([me],de.prototype,"topologyIdKey",2),h([me],de.prototype,"labelKey",2),h([me],de.prototype,"labelName",2),h([me],de.prototype,"colorKey",2),h([me],de.prototype,"colorName",2),h([me],de.prototype,"colorRange",2),h([me],de.prototype,"fill",2),h([me],de.prototype,"fillGradientDefaults",2),h([me],de.prototype,"fillPatternDefaults",2),h([me],de.prototype,"fillImageDefaults",2),h([me],de.prototype,"fillOpacity",2),h([me],de.prototype,"stroke",2),h([me],de.prototype,"strokeOpacity",2),h([me],de.prototype,"strokeWidth",2),h([me],de.prototype,"lineDash",2),h([me],de.prototype,"lineDashOffset",2),h([me],de.prototype,"padding",2),h([me],de.prototype,"itemStyler",2),h([me],de.prototype,"label",2),h([me],de.prototype,"tooltip",2);var{getMissCount:p0,createDatumId:fh,SeriesNodePickMode:gh,valueProperty:Go,CachedTextMeasurerPool:h0,TextUtils:yh,ColorScale:u0,Group:mh,Selection:Ur,Text:d0,PointerEvents:f0,applyShapeStyle:g0,getShapeStyle:jr}=uh,Sh=uh.MercatorScale.fixedScale(),Wo=class extends Ds{constructor(e){super({moduleCtx:e,categoryKey:void 0,useLabelLayer:!0,pickModes:[gh.EXACT_SHAPE_MATCH,gh.NEAREST_NODE]}),this.properties=new de,this._chartTopology=void 0,this.colorScale=new u0,this.itemGroup=this.contentGroup.appendChild(new mh({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new mh({name:"itemLabelGroup"})),this.datumSelection=Ur.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Ur.select(this.itemLabelGroup,d0),this.highlightDatumSelection=Ur.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=f0.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Xi;return e.renderMode=1,e.lineJoin="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,colorScale:s}=this,{topologyIdKey:o,idKey:a,colorKey:r,labelKey:n,colorRange:l}=this.properties,c=new Map;i?.features.forEach(g=>{const m=g.properties?.[o];m==null||!Wr(g.geometry,1)||c.set(m,g)});const p=this.colorScale.type,u=this.scale?.type,{dataModel:d,processedData:f}=await this.requestDataModel(e,t,{props:[Go(a,u,{id:"idValue",includeProperty:!1}),Go(a,u,{id:"featureValue",includeProperty:!1,processor:()=>g=>c.get(g)}),...n?[Go(n,"band",{id:"labelValue"})]:[],...r?[Go(r,p,{id:"colorValue"})]:[]]}),y=d.resolveColumnById(this,"featureValue",f);if(this.topologyBounds=y.reduce((g,m)=>{const S=m?.geometry;return S==null?g:Yi(S,g)},void 0),l!=null&&this.isColorScaleValid()){const g=d.resolveProcessedDataIndexById(this,"colorValue");s.domain=f.domain.values[g],s.range=l,s.update()}i==null&&dh.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=p0(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelLayout(e,t,i,s,o){if(t==null||s==null)return;const{idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:p,padding:u,label:d}=this.properties,f=this.getLabelText(d,{value:t,datum:e,idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:p});if(f==null)return;const y=h0.measureText(String(f),{font:i}),g=f.split(`
`).length,m=(y.width+2*u)/(g*yh.getLineHeight(d.fontSize)+2*u);if(o?.geometry===s&&o?.labelText===f&&o?.aspectRatio===m)return o;const S=Qt(s,Sh),D=Co(S);if(D==null)return;const x=Qk(D,{aspectRatio:m,precision:.001});if(x==null)return;const{x:k,y:I,maxWidth:L}=x;return{geometry:s,labelText:f,aspectRatio:m,x:k,y:I,maxWidth:L,fixedPolygon:D}}getLabelDatum(e,t){const{scale:i}=this;if(i==null)return;const{padding:s,label:o}=this.properties,{labelText:a,aspectRatio:r,x:n,y:l,maxWidth:c,fixedPolygon:p}=e,u={width:Math.ceil(c*t),height:Math.ceil(c*t/r),meta:n},d=ls(a,o,{padding:s},(k,I)=>{if(!I)return u;const L=s0(p,n,l,k/t);return{width:L.width*t,height:k,meta:L.x}});if(d==null)return;const[{text:f,fontSize:y,lineHeight:g,width:m},S]=d;if(f===yh.EllipsisChar)return;const D=m<u.width?n:S,x=this.scale.convert(Sh.invert([D,l]));return{x:x[0],y:x[1],text:f,fontSize:y,lineHeight:g}}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:s,scale:o,previousLabelLayouts:a}=this,{idKey:r,colorKey:n,labelKey:l,label:c}=s;if(t==null||i==null)return;const p=o!=null?(o.range[1][0]-o.range[0][0])/o.bounds.width:NaN,u=t.resolveColumnById(this,"idValue",i),d=t.resolveColumnById(this,"featureValue",i),f=l!=null?t.resolveColumnById(this,"labelValue",i):void 0,y=n!=null?t.resolveColumnById(this,"colorValue",i):void 0,g=c.getFont(),m=new Map;this.previousLabelLayouts=m;const S=[],D=[],x=[];(i.dataSources.get(this.id)??[]).forEach((L,b)=>{const v=u[b],N=y?.[b],M=f?.[b],R=d[b]?.geometry??void 0;R==null&&x.push(v);const A=this.getLabelLayout(L,M,g,R,a?.get(v));A!=null&&m.set(v,A);const P=A!=null&&o!=null?this.getLabelDatum(A,p):void 0;P!=null&&D.push(P);const T=R!=null&&o!=null?Qt(R,o):void 0;S.push({series:this,itemId:r,datum:L,datumIndex:b,idValue:v,colorValue:N,labelValue:M,projectedGeometry:T})});const I=10;if(x.length>I){const L=x.length-I;x.length=I,x.push(`(+${L} more)`)}return x.length>0&&dh.warnOnce("some data items do not have matches in the provided topology",x),{itemId:e,nodeData:S,labelData:D}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,labelSelection:t,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let s=this.ctx.highlightManager?.getActiveHighlight();s!=null&&(s.series!==this||s.datum==null)&&(s=void 0);const o=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:t}),this.updateLabelNodes({labelSelection:t}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:s!=null?[s]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>fh(t.idValue))}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return jr({fill:i?.fill??t.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r,colorScale:n}=this,{colorRange:l,itemStyler:c}=r;let p;if(!o&&i!=null&&(p??(p={}),p.fill=this.isColorScaleValid()?n.convert(i):l?.[0]??r.fill),c!=null){const u=this.cachedDatumCallback(fh(e,o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:t,highlighted:o,...s,...p}));p??(p={}),Object.assign(p,u)}return jr(p,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getItemBaseStyle(i),o=rh(this.scale);t.each((a,r)=>{const{datum:n,datumIndex:l,colorValue:c,projectedGeometry:p}=r;if(p==null){a.visible=!1,a.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(l),n,c,s,i);a.visible=!0,a.projectedGeometry=p,g0(a,s,u,o)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontFamily:a}=this.properties.label;t.each((r,{x:n,y:l,text:c,fontSize:p,lineHeight:u})=>{r.visible=!0,r.x=n,r.y=l,r.text=c,r.fill=i,r.fontStyle=s,r.fontWeight=o,r.fontSize=p,r.lineHeight=u,r.fontFamily=a,r.textAlign="center",r.textBaseline="middle"})}resetAnimation(){}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,s=i!=null?Co(i):void 0,o=s!=null?Hr(s,2):void 0,a=o!=null?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{fillOpacity:o,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c}=s;let{fill:p}=s;if(e!=null&&this.isColorScaleValid()){const d=t.resolveColumnById(this,"colorValue",i)[e];p=this.colorScale.convert(d)}return{marker:jr({fill:p,fillOpacity:o,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:r,idKey:n,idName:l,colorKey:c,colorName:p,colorRange:u,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&u!=null){const f=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,colorName:p,colorRange:u,colorDomain:f}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:r??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:p,legendItemName:u,title:d,tooltip:f}=o;if(!i||!s)return;const y=s.dataSources.get(this.id)?.[e],g=i.resolveColumnById(this,"idValue",s)[e],m=n!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,S=[];if(m!=null&&S.push({label:l,fallbackLabel:n,value:String(m)}),c!=null&&c!==a){const x=i.resolveColumnById(this,"labelValue",s)[e];S.push({label:p,fallbackLabel:c,value:x})}const D=this.getItemBaseStyle(!1);return Object.assign(D,this.getItemStyleOverrides(String(e),e,m,D,!1)),this.formatTooltipWithContext(f,{heading:g,title:d??u,symbol:this.legendItemSymbol(e),data:S},{seriesId:t,datum:y,title:d,idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:p,...D})}computeFocusBounds(e){return qp(this,e)}};Wo.className="MapShapeSeries",Wo.type="map-shape";import{_ModuleSupport as y0}from"ag-charts-community";import{constant as m0,geoJson as S0,required as xh,string as $t}from"ag-charts-core";var{commonSeriesOptionsDefs:x0,mapShapeSeriesThemeableOptionsDef:D0,without:b0}=y0,v0={...D0,...b0(x0,["highlightStyle"]),type:xh(m0("map-shape")),idKey:xh($t),colorKey:$t,labelKey:$t,idName:$t,colorName:$t,labelName:$t,topology:S0,topologyIdKey:$t,legendItemName:$t,title:$t},HR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:e=>new Wo(e),tooltipDefaults:{range:"exact"},themeTemplate:{...Ss,series:{fill:{$palette:"fill"},stroke:{$ref:"backgroundColor"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},qr.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:qr.FILL_PATTERN_DEFAULTS,fillImageDefaults:qr.FILL_IMAGE_DEFAULTS,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:{$ref:"backgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"}},tooltip:{range:"exact"}}},Dh={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:v0,create:e=>new Wo(e)};import{_ModuleSupport as bh}from"ag-charts-community";import{_ModuleSupport as k0}from"ag-charts-community";import{Logger as M0}from"ag-charts-core";import{_ModuleSupport as I0}from"ag-charts-community";var{FillGradientDefaults:A0,FillPatternDefaults:N0,FillImageDefaults:P0,Property:mt,SeriesProperties:L0,SeriesTooltip:R0}=I0,pt=class extends L0{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillGradientDefaults=new A0,this.fillPatternDefaults=new N0,this.fillImageDefaults=new P0,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new R0}};h([mt],pt.prototype,"topology",2),h([mt],pt.prototype,"fill",2),h([mt],pt.prototype,"fillGradientDefaults",2),h([mt],pt.prototype,"fillPatternDefaults",2),h([mt],pt.prototype,"fillImageDefaults",2),h([mt],pt.prototype,"fillOpacity",2),h([mt],pt.prototype,"stroke",2),h([mt],pt.prototype,"strokeOpacity",2),h([mt],pt.prototype,"strokeWidth",2),h([mt],pt.prototype,"lineDash",2),h([mt],pt.prototype,"lineDashOffset",2),h([mt],pt.prototype,"tooltip",2);var{createDatumId:T0,SeriesNodePickMode:O0,Selection:C0,Group:w0,PointerEvents:F0,getShapeStyle:B0}=k0,Vo=class extends Ds{constructor(e){super({moduleCtx:e,categoryKey:void 0,useLabelLayer:!0,pickModes:[O0.EXACT_SHAPE_MATCH]}),this.properties=new pt,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new w0({name:"itemGroup"})),this.datumSelection=C0.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0):!1}nodeFactory(){const e=new Xi;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=F0.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const s=i.geometry;return s==null?t:Yi(s,t)},void 0),e==null&&M0.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(t==null)return;const s=[],o=[];return t.features.forEach((a,r)=>{const{geometry:n}=a,l=n!=null&&i!=null?Qt(n,i):void 0;l!=null&&s.push({series:this,itemId:r,datum:a,datumIndex:0,index:r,projectedGeometry:l})}),{itemId:e,nodeData:s,labelData:o}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>T0(t.index))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l}=t,c=this.getStrokeWidth(t.strokeWidth);i.each((p,u)=>{const{projectedGeometry:d}=u;if(d==null){p.visible=!1,p.projectedGeometry=void 0;return}p.visible=!0,p.projectedGeometry=d;const f=B0({fill:s,fillOpacity:o,stroke:a,strokeWidth:c,strokeOpacity:r,lineDash:n,lineDashOffset:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);p.setProperties(f)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}};Vo.className="MapShapeBackgroundSeries",Vo.type="map-shape-background";import{_ModuleSupport as _0}from"ag-charts-community";import{constant as E0,geoJson as G0,required as W0}from"ag-charts-core";var{commonSeriesOptionsDefs:V0,mapShapeBackgroundSeriesThemeableOptionsDef:K0}=_0,z0={...K0,...V0,type:W0(E0("map-shape-background")),topology:G0},ZR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:e=>new Vo(e),tooltipDefaults:{range:"exact"},themeTemplate:{...Ss,series:{fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$ref:"backgroundColor"},strokeWidth:1,fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:[{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]},{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}],rotation:0,reverse:!1},fillPatternDefaults:{...bh.FILL_PATTERN_DEFAULTS,fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]}},fillImageDefaults:bh.FILL_IMAGE_DEFAULTS}}},vh={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:z0,create:e=>new Vo(e)};import{_ModuleSupport as $0}from"ag-charts-community";import{_ModuleSupport as H0}from"ag-charts-community";import{_ModuleSupport as Ko}from"ag-charts-community";import{isDefined as X0}from"ag-charts-core";var{ChartAxisDirection:Ht,PolarAxis:Y0,diff:q0,fixNumericExtent:U0,groupAccumulativeValueProperty:kh,keyProperty:j0,normaliseGroupTo:J0,resetLabelFn:Z0,seriesLabelFadeInAnimation:Q0,seriesLabelFadeOutAnimation:eM,valueProperty:tM,animationValidation:iM,createDatumId:Mh,SeriesNodePickMode:Ih,normalizeAngle360:Ah,CategoryScale:sM,motion:Nh,applyShapeStyle:oM,isGradientFill:aM,getShapeStyle:Jr}=Ko,rM=class extends Ko.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},Ph=class extends Ko.PolarSeries{constructor(e,{animationResetFns:t}){super({moduleCtx:e,categoryKey:"angleValue",useLabelLayer:!0,canHaveAxes:!0,pickModes:[Ih.NEAREST_NODE,Ih.EXACT_SHAPE_MATCH],animationResetFns:{...t,label:Z0}}),this.NodeEvent=rM,this.groupScale=new sM,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Ht.Angle)return t.getDomain(this,"angleValue","key",i);{const s=t.getDomain(this,"radiusValue-end","value",i),o=Number.isFinite(s[1]-s[0])?[s[0]>0?0:s[0],s[1]<0?0:s[1]]:[];return U0(o)}}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),r=`${a}-trailing`,n=[];X0(s)&&n.push(J0([a,r],Math.abs(s))),o&&this.processedData&&n.push(q0(this.id,this.processedData)),o&&n.push(iM());const l=this.visible?{}:{forceValue:0},c=this.axes[Ht.Radius]?.scale.type,p=this.axes[Ht.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[j0(t,p,{id:"angleValue"}),tM(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...kh(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...kh(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},c),...n],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e!==s.r||t!==s.cx||i!==s.cy?(this.circleCache={r:e,cx:t,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Ht.Radius]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Ht.Radius];return e instanceof Y0?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t,groupScale:i}=this;if(!t||!e||e.type!=="grouped")return;const s=this.axes[Ht.Angle],o=this.axes[Ht.Radius],a=s?.scale,r=o?.scale;if(!a||!r)return;const n=t.resolveKeysById(this,"angleValue",e),l=t.resolveColumnById(this,"radiusValue-start",e),c=t.resolveColumnById(this,"radiusValue-end",e),p=t.resolveColumnById(this,"radiusValue-raw",e),u=t.resolveProcessedDataIndexById(this,"radiusValue-range");let d=0,f=0;s instanceof ni&&(d=s.groupPaddingInner,f=s.paddingInner);const g=(a.bandwidth??0)*(1-f),{index:m,visibleGroupCount:S}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:S}).map((O,F)=>String(F)),i.range=[-g/2,g/2],i.paddingInner=S>1?d:0;const D=this.isRadiusAxisReversed(),x=D?this.radius:this.getAxisInnerRadius(),k=D?this.getAxisInnerRadius():this.radius,I=k+x,{angleKey:L,radiusKey:b,angleName:v,radiusName:N,label:M}=this.properties,R=(O,F,E,C)=>{const _=this.getLabelText(M,{value:F,datum:O,angleKey:L,radiusKey:b,angleName:v,radiusName:N});if(_)return{x:E,y:C,text:_,textAlign:"center",textBaseline:"middle"}},A=[],P={itemId:b,nodeData:A,labelData:A};if(!this.visible)return P;const{dataSources:T}=e,w=T.get(this.id)??[];for(const{datumIndex:O,group:F}of t.forEachGroupDatum(this,e)){const E=w[O],C=n[O];if(C==null)return;const _=p[O],B=_>=0&&!Object.is(_,-0),G=l[O],W=c[O],V=F.aggregation[u][B?1:0]??0,K=B===D;if(G===void 0||W===void 0)return;let $,X;if(w.length===1)$=-.5*Math.PI,X=1.5*Math.PI;else{const pe=a.convert(C);$=Ah(pe+i.convert(String(m))),X=Ah($+i.bandwidth)}const J=$+i.bandwidth/2,Q=I-r.convert(G),ee=I-r.convert(W),j=(Q+ee)/2,U=I-r.convert(0),re=I-r.convert(V),le=Math.cos(J)*j,Y=Math.sin(J)*j,_e=this.properties.label.enabled?R(E,_,le,Y):void 0,Ee=this.getColumnWidth($,X);A.push({series:this,datum:E,datumIndex:O,point:{x:le,y:Y,size:0},midPoint:{x:le,y:Y},label:_e,angleValue:C,radiusValue:_,negative:K,innerRadius:Q,outerRadius:ee,stackInnerRadius:U,stackOuterRadius:re,startAngle:$,endAngle:X,midAngle:J,axisInnerRadius:x,axisOuterRadius:k,columnWidth:Ee,index:O})}return{itemId:b,nodeData:A,labelData:A}}getColumnWidth(e,t){return NaN}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return Jr({fill:i?.fill??t.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset,cornerRadius:t.cornerRadius},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{angleKey:r,radiusKey:n,itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:p,fillImageDefaults:u}=a;if(l==null)return;const d=this.cachedDatumCallback(Mh(e,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:o,datum:t,highlighted:s,angleKey:r,radiusKey:n,...i}));return Jr(d,c,p,u)}updateSectorSelection(e,t){let i=[];if(t){const l=this.ctx.highlightManager?.getActiveHighlight();l?.datum&&l.series===this&&i.push(l)}else i=this.nodeData;const s=this.isRadiusAxisReversed(),o=s?this.radius:this.getAxisInnerRadius(),a=s?this.getAxisInnerRadius():this.radius,r=this.getShapeFillBBox(),n=this.getItemBaseStyle(t);e.update(i,void 0,l=>this.getDatumId(l)).each((l,c)=>{const{datum:p,datumIndex:u,midPoint:d}=c,f=this.getItemStyleOverrides(String(u),p,n,t),y=f?.fill??n.fill,m=aM(y)&&y.bounds==="item"?{centerX:d?.x??0,centerY:d?.y??0}:{centerX:0,centerY:0,innerRadius:o,outerRadius:a};this.updateItemPath(l,c,t),oM(l,n,f,r,m),l.cornerRadius=f?.cornerRadius??n.cornerRadius,l.lineJoin="round"})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();Nh.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),Q0(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();Nh.fromToMotion(this.id,"datums",t,[e],i),eM(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:p}=a,u=o[Ht.Angle],d=o[Ht.Radius];if(!i||!s||!u||!d)return;const f=s.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"angleValue",s)[e],g=i.resolveColumnById(this,"radiusValue-raw",s)[e];if(y==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(e),e,m,!1)),this.formatTooltipWithContext(p,{heading:u.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(g)}]},{seriesId:t,datum:f,title:n,angleKey:r,angleName:n,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l,fillImageDefaults:c}=this.properties,p=Jr({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r},n,l,c);return Ko.isGradientFill(p.fill)&&(p.fill={...p.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:p}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{radiusKey:s,radiusName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i,label:{text:o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return Mh(e.angleValue)}computeLabelsBBox(){return null}};import{_ModuleSupport as nM}from"ag-charts-community";var{SeriesProperties:lM,FillGradientDefaults:cM,FillPatternDefaults:pM,FillImageDefaults:hM,SeriesTooltip:uM,Property:Te,Label:dM}=nM,ve=class extends lM{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new cM,this.fillPatternDefaults=new pM,this.fillImageDefaults=new hM,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new dM,this.tooltip=new uM}};h([Te],ve.prototype,"angleKey",2),h([Te],ve.prototype,"angleName",2),h([Te],ve.prototype,"radiusKey",2),h([Te],ve.prototype,"radiusName",2),h([Te],ve.prototype,"fill",2),h([Te],ve.prototype,"fillGradientDefaults",2),h([Te],ve.prototype,"fillPatternDefaults",2),h([Te],ve.prototype,"fillImageDefaults",2),h([Te],ve.prototype,"fillOpacity",2),h([Te],ve.prototype,"stroke",2),h([Te],ve.prototype,"strokeWidth",2),h([Te],ve.prototype,"strokeOpacity",2),h([Te],ve.prototype,"lineDash",2),h([Te],ve.prototype,"lineDashOffset",2),h([Te],ve.prototype,"cornerRadius",2),h([Te],ve.prototype,"itemStyler",2),h([Te],ve.prototype,"rotation",2),h([Te],ve.prototype,"stackGroup",2),h([Te],ve.prototype,"normalizedTo",2),h([Te],ve.prototype,"label",2),h([Te],ve.prototype,"tooltip",2);import{_ModuleSupport as fM}from"ag-charts-community";import{_ModuleSupport as gM}from"ag-charts-community";var{motion:yM}=gM;function Lh(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(r,n,l)=>{t.forEach(c=>{const p=e[c];let u=(l==="removed"||l==="updated"?r:n)[c],d=(l==="removed"?r:n)[c];isNaN(d)&&(d=r.previousDatum?.[c]??NaN);const f=u-d;Math.abs(f)>Math.PI&&(u-=Math.sign(f)*2*Math.PI),p.set(n,{from:u,to:d})})},s=(r,n)=>({startAngle:e.startAngle.get(r)[n],endAngle:e.endAngle.get(r)[n]});return{calculate:i,from:r=>s(r,"from"),to:r=>s(r,"to")}}function Rh(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function mM(e){const t=Lh();return{toFn:(o,a,r)=>{const{startAngle:n,endAngle:l}=t.to(a);let c,p,u,d,f;return r==="removed"?(c=o.innerRadius,p=o.innerRadius,u=o.columnWidth,d=o.axisInnerRadius,f=o.axisOuterRadius):(c=isNaN(a.innerRadius)?e:a.innerRadius,p=isNaN(a.outerRadius)?e:a.outerRadius,u=isNaN(a.columnWidth)?o.columnWidth:a.columnWidth,d=a.axisInnerRadius,f=a.axisOuterRadius),{innerRadius:c,outerRadius:p,columnWidth:u,axisInnerRadius:d,axisOuterRadius:f,startAngle:n,endAngle:l}},fromFn:(o,a,r)=>{r=Rh(o,a,r),t.calculate(o,a,r);const{startAngle:n,endAngle:l}=t.from(a);let c,p,u,d,f;r==="removed"||r==="updated"?(c=o.innerRadius,p=o.outerRadius,u=o.columnWidth,d=o.axisInnerRadius,f=o.axisOuterRadius):(c=e,p=e,u=a.columnWidth,d=a.axisInnerRadius,f=a.axisOuterRadius);const y=yM.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:p,columnWidth:u,axisInnerRadius:d,axisOuterRadius:f,startAngle:n,endAngle:l,phase:y}}}}function SM(e,{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:o,axisOuterRadius:a,startAngle:r,endAngle:n}){return{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:o,axisOuterRadius:a,startAngle:r,endAngle:n}}var{SectorBox:zo,motion:xM}=fM;function Zr(e){const{negative:t,innerRadius:i,outerRadius:s,stackInnerRadius:o,stackOuterRadius:a}=e;return{innerRadius:t?a:o,outerRadius:t?o:a,clipInnerRadius:t?s:i,clipOuterRadius:t?i:s}}function DM(e){const t=Lh();return{toFn:(o,a,r)=>{const{startAngle:n,endAngle:l}=t.to(a);let c,p,u;if(r==="removed")c=e,p=e,u=new zo(n,l,c,p);else{let d,f;({innerRadius:c,outerRadius:p,clipInnerRadius:d,clipOuterRadius:f}=Zr(a)),isNaN(c)&&(c=e),isNaN(p)&&(p=e),isNaN(d)&&(d=e),isNaN(f)&&(f=e),u=new zo(n,l,d,f)}return{innerRadius:c,outerRadius:p,startAngle:n,endAngle:l,clipSector:u}},fromFn:(o,a,r)=>{r=Rh(o,a,r),t.calculate(o,a,r);const{startAngle:n,endAngle:l}=t.from(a);let c,p,u;r==="removed"||r==="updated"?(c=o.innerRadius,p=o.outerRadius,u=o.clipSector):(c=e,p=e),u??(u=new zo(n,l,c,p));const d=xM.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:p,startAngle:n,endAngle:l,clipSector:u,phase:d}}}}function bM(e,t){const{startAngle:i,endAngle:s}=t,{innerRadius:o,outerRadius:a,clipInnerRadius:r,clipOuterRadius:n}=Zr(t),l=new zo(i,s,r,n);return{innerRadius:o,outerRadius:a,startAngle:i,endAngle:s,clipSector:l}}var{Sector:vM,SectorBox:kM,PolarZIndexMap:Qr}=H0,$o=class extends Ph{constructor(e){super(e,{animationResetFns:{item:bM}}),this.properties=new ve}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[0,Qr.FOREGROUND,e],this.highlightGroup.zIndex=[0,Qr.HIGHLIGHT,e],this.labelGroup.zIndex=[0,Qr.LABEL,e],!0):!1}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new vM}updateItemPath(e,t,i){const{negative:s}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=s?0:this.properties.cornerRadius,e.endOuterCornerRadius=s?0:this.properties.cornerRadius,e.startInnerCornerRadius=s?this.properties.cornerRadius:0,e.endInnerCornerRadius=s?this.properties.cornerRadius:0,i){const{startAngle:o,endAngle:a}=t,{innerRadius:r,outerRadius:n,clipInnerRadius:l,clipOuterRadius:c}=Zr(t);e.innerRadius=r,e.outerRadius=n,e.startAngle=o,e.endAngle=a,e.clipSector=new kM(o,a,l,c)}}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return DM(e)}};$o.className="NightingaleSeries",$o.type="nightingale";import{_ModuleSupport as MM}from"ag-charts-community";import{boolean as Th,constant as IM,number as AM,required as en,string as vs}from"ag-charts-core";var{commonSeriesOptionsDefs:NM,nightingaleSeriesThemeableOptionsDef:PM}=MM,LM={...PM,...NM,type:en(IM("nightingale")),angleKey:en(vs),radiusKey:en(vs),angleName:vs,radiusName:vs,grouped:Th,stacked:Th,stackGroup:vs,normalizedTo:AM};import{_ModuleSupport as tn}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:Oh,POLAR_AXIS_SHAPE:RM}}=tn,Ch={$path:["./shape",RM.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},TM={series:{fill:{$palette:"fill"},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$palette:"stroke"}]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:tn.FILL_PATTERN_DEFAULTS,fillImageDefaults:tn.FILL_IMAGE_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[Oh.ANGLE_CATEGORY]:{shape:Ch,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Oh.RADIUS_NUMBER]:{shape:Ch}}},{ThemeConstants:{POLAR_AXIS_TYPE:wh}}=$0,cT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:e=>new $o(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:wh.ANGLE_CATEGORY},{type:wh.RADIUS_NUMBER}],themeTemplate:TM,stackable:!0,groupable:!0,stackedByDefault:!0},Fh={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:LM,create:e=>new $o(e)};import"ag-charts-community";import{_ModuleSupport as Bh}from"ag-charts-community";import{_ModuleSupport as OM}from"ag-charts-community";var{SeriesProperties:CM,FillGradientDefaults:wM,FillPatternDefaults:FM,FillImageDefaults:BM,SeriesTooltip:_M,Property:ke,Label:_h,DropShadow:EM}=OM,GM=class extends _h{},sn=class extends _h{constructor(){super(...arguments),this.spacing=0}};h([ke],sn.prototype,"spacing",2),h([ke],sn.prototype,"placement",2);var Pe=class extends CM{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new wM,this.fillPatternDefaults=new FM,this.fillImageDefaults=new BM,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new EM().set({enabled:!1}),this.label=new GM,this.stageLabel=new sn,this.tooltip=new _M}};h([ke],Pe.prototype,"stageKey",2),h([ke],Pe.prototype,"valueKey",2),h([ke],Pe.prototype,"fills",2),h([ke],Pe.prototype,"fillGradientDefaults",2),h([ke],Pe.prototype,"fillPatternDefaults",2),h([ke],Pe.prototype,"fillImageDefaults",2),h([ke],Pe.prototype,"fillOpacity",2),h([ke],Pe.prototype,"strokes",2),h([ke],Pe.prototype,"strokeWidth",2),h([ke],Pe.prototype,"strokeOpacity",2),h([ke],Pe.prototype,"lineDash",2),h([ke],Pe.prototype,"lineDashOffset",2),h([ke],Pe.prototype,"direction",2),h([ke],Pe.prototype,"reverse",2),h([ke],Pe.prototype,"spacing",2),h([ke],Pe.prototype,"aspectRatio",2),h([ke],Pe.prototype,"itemStyler",2),h([ke],Pe.prototype,"shadow",2),h([ke],Pe.prototype,"label",2),h([ke],Pe.prototype,"stageLabel",2),h([ke],Pe.prototype,"tooltip",2);function Eh(e,{x:t,y:i,top:s,right:o,bottom:a,left:r}){e.x0=t-s/2,e.x1=t+s/2,e.x2=t+a/2,e.x3=t-a/2,e.y0=i-r/2,e.y1=i-o/2,e.y2=i+o/2,e.y3=i+r/2}function WM(e){return{fromFn:(o,a)=>{const{x:r,y:n}=a;let{top:l,right:c,bottom:p,left:u}=a;return e==="vertical"?(l=0,p=0):(u=0,c=0),{x:r,y:n,top:l,right:c,bottom:p,left:u}},toFn:(o,a)=>{const{x:r,y:n,top:l,right:c,bottom:p,left:u}=a;return{x:r,y:n,top:l,right:c,bottom:p,left:u}},applyFn:Eh}}var{StateMachine:VM,valueProperty:Gh,SeriesNodePickMode:Wh,CachedTextMeasurerPool:KM,TextUtils:zM,createDatumId:$M,BBox:on,Group:an,Selection:Ho,Text:Vh,PointerEvents:Kh,applyShapeStyle:HM,fromToMotion:XM,seriesLabelFadeInAnimation:YM,getShapeStyle:rn}=Bh,nn=class extends Bh.DataModelSeries{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[Wh.EXACT_SHAPE_MATCH,Wh.NEAREST_NODE]}),this.properties=new Pe,this.itemGroup=this.contentGroup.appendChild(new an({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new an({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new an({name:"stageLabelGroup"})),this.datumSelection=Ho.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Ho.select(this.itemLabelGroup,Vh),this.stageLabelSelection=Ho.select(this.stageLabelGroup,Vh),this.highlightDatumSelection=Ho.select(this.highlightNode,()=>this.nodeFactory()),this.animationState=new VM("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=Kh.None,this.stageLabelGroup.pointerEvents=Kh.None}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}nodeFactory(){return new Ft}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}async processData(e){if(this.data==null)return;const{id:t,visible:i,ctx:{legendManager:s}}=this,{stageKey:o,valueKey:a}=this.properties,r="band",n="number",l=(p,u,d)=>i&&s.getItemEnabled({seriesId:t,itemId:d}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[Gh(o,r,{id:"xValue"}),Gh(a,n,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:s,visible:o,ctx:{legendManager:a}}=this,{stageKey:r,valueKey:n,direction:l,reverse:c=l==="horizontal",spacing:p,aspectRatio:u,label:d,stageLabel:f}=s;if(t==null||i==null)return;const y=l==="horizontal",g=t.resolveColumnById(this,"xValue",i),m=t.resolveColumnById(this,"yValue",i),S=KM.getMeasurer({font:f.getFont()});let D,x;y?(D="center",x=f.placement==="before"?"bottom":"top"):(D=f.placement==="after"?"left":"right",x="middle");const k=f.enabled?[]:void 0;let I=0,L=0,b=0;const v=i.dataSources.get(this.id)??[];v.forEach((_,B)=>{const G=g[B],W=m[B],V=o&&a.getItemEnabled({seriesId:e,itemId:B});if(b+=W,k==null)return;const K=this.getLabelText(this.properties.stageLabel,{datum:_,value:G,stageKey:r,valueKey:n}),{width:$}=S.measureText(K),X=K.split(`
`).length*zM.getLineHeight(d.fontSize);I=Math.max(I,$),L=Math.max(L,X),k.push({x:NaN,y:NaN,text:K,textAlign:D,textBaseline:x,visible:V})});const N=this._nodeDataDependencies?.seriesRectWidth??0,M=this._nodeDataDependencies?.seriesRectHeight??0,R=p*(i.input.count-1);let A;if(y){const _=L+f.spacing;A=new on(0,f.placement==="before"?_:0,N,M-_)}else{const _=I+f.spacing;A=new on(f.placement==="after"?0:_,0,N-_,M)}if(u!=null&&u!==0){const _=l==="horizontal"?1/u:u,B=Math.min(A.width,A.height*_),G=B/_;A=new on(A.x+(A.width-B)/2,A.y+(A.height-G)/2,B,G)}let P,T;y?T=f.placement==="before"?A.y-f.spacing:A.y+A.height+f.spacing:P=f.placement==="after"?A.x+A.width+f.spacing:A.x-f.spacing;const w=A.width-(y?R:0),O=A.height-(y?0:R);if(w<0||O<0)return;const F=[],E=[];let C=0;return v.forEach((_,B)=>{const G=g[B],W=m[B],V=o&&a.getItemEnabled({seriesId:e,itemId:B}),K=C+W,$=(C+K)/(2*b),X=(K-C)/b,J=y?w*$+p*B:w*.5,Q=y?O*.5:O*$+p*B,ee=A.x+J,j=A.y+Q;if(k!=null){const pe=k[B];pe.x=P??ee,pe.y=T??j}let U,re,le,Y;if(y){const pe=w*X;U=pe,le=pe;const Me=(J+pe/2)*(O/A.width),ne=(J-pe/2)*(O/A.width);re=c?A.height-Me:Me,Y=c?A.height-ne:ne}else{const pe=O*X;re=pe,Y=pe;const Me=(Q-pe/2)*(w/A.height),ne=(Q+pe/2)*(w/A.height);U=c?A.width-Me:Me,le=c?A.width-ne:ne}const _e=this.getLabelText(d,{datum:_,value:W,stageKey:r,valueKey:n}),Ee={x:ee,y:j,text:_e,textAlign:"center",textBaseline:"middle",visible:V};E.push(Ee),F.push({series:this,itemId:n,datum:_,datumIndex:B,index:B,xValue:G,yValue:W,x:ee,y:j,top:U,right:re,bottom:le,left:Y,label:Ee,enabled:V,midPoint:{x:ee,y:j}}),C=K}),{itemId:e,nodeData:F,labelData:E,stageLabelData:k,bounds:A}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:e}){this.checkResize(e);const{datumSelection:t,labelSelection:i,stageLabelSelection:s,highlightDatumSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const r=this.contextNodeData?.nodeData??[],n=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:n,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:s}),this.updateLabelNodes({labelSelection:s,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:o}),this.updateDatumNodes({datumSelection:o,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return rn({fill:i?.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{fills:n,strokes:l,stageKey:c,valueKey:p,itemStyler:u}=r,d=s.fill??n[i%n.length],f=s.stroke??l[i%l.length],y={};if(o||(y.fill=d,y.stroke=f),u!=null){const g=this.cachedDatumCallback($M(e,o?"highlight":"node"),()=>this.callWithContext(u,{seriesId:a,datum:t,stageKey:c,valueKey:p,highlighted:o,fill:d,stroke:f,...s}));Object.assign(y,g)}return rn(y,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{properties:s}=this,{shadow:o}=s,a=this.getItemBaseStyle(i),r=this.contextNodeData?.bounds,n=r?{series:r,axis:r}:void 0;t.each((l,c)=>{const{datumIndex:p,datum:u}=c,d=this.getItemStyleOverrides(String(p),u,p,a,i);HM(l,a,d,n),Eh(l,c),l.fillShadow=o})}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){const{labelSelection:t,labelProperties:i}=e,{color:s,fontSize:o,fontStyle:a,fontWeight:r,fontFamily:n}=i;t.each((l,{visible:c,x:p,y:u,text:d,textAlign:f,textBaseline:y})=>{l.visible=c,l.x=p,l.y=u,l.text=d,l.fill=s,l.fontStyle=a,l.fontWeight=r,l.fontSize=o,l.fontFamily=n,l.textAlign=f,l.textBaseline=y})}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0){for(const i of this.datumSelection)if(i.datum===t)return i.node}}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{stageKey:a,valueKey:r,tooltip:n}=o;if(!i||!s)return;const l=s.dataSources.get(this.id)?.[e],c=i.resolveColumnById(this,"xValue",s)[e],p=i.resolveColumnById(this,"yValue",s)[e];if(c==null)return;const u=this.getLabelText(this.properties.stageLabel,{datum:s.dataSources.get(this.id)?.[e],value:p,stageKey:a,valueKey:r}),d=this.getItemBaseStyle(!1);return Object.assign(d,this.getItemStyleOverrides(String(e),e,e,d,!1)),this.formatTooltipWithContext(n,{symbol:this.legendItemSymbol(e),data:[{label:String(c),value:u}]},{seriesId:t,datum:l,title:void 0,stageKey:a,valueKey:r,...d})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}legendItemSymbol(e){const{fills:t,strokes:i,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:r,lineDashOffset:n}=this.properties,l=t[e%t.length]??"black",c=i[e%i.length]??"black";return{marker:rn({fill:l,fillOpacity:o,stroke:c,strokeWidth:s,strokeOpacity:a,lineDash:r,lineDashOffset:n},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i,id:s,ctx:{legendManager:o},visible:a}=this;if(!i||!t||e!=="category")return[];const{showInLegend:r}=this.properties,n=[],l=i.resolveColumnById(this,"xValue",t);return(t.dataSources.get(this.id)??[]).forEach((p,u)=>{const d=l[u];n.push({legendType:"category",id:s,itemId:u,seriesId:s,enabled:a&&o.getItemEnabled({seriesId:s,itemId:u}),label:{text:d},symbol:this.legendItemSymbol(u),hideInLegend:!r})}),n}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:e,labelSelection:t,properties:i}=this,s=WM(i.direction);XM(this.id,"nodes",this.ctx.animationManager,[e],s),YM(this,"labels",this.ctx.animationManager,t)}};nn.className="PyramidSeries",nn.type="pyramid";import{_ModuleSupport as qM}from"ag-charts-community";import{constant as UM,required as ln,string as zh}from"ag-charts-core";var{commonSeriesOptionsDefs:jM,pyramidSeriesThemeableOptionsDef:JM}=qM,ZM={...JM,...jM,type:ln(UM("pyramid")),stageKey:ln(zh),valueKey:ln(zh)};import{_ModuleSupport as cn}from"ag-charts-community";var{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:QM}}=cn,yT={series:{direction:"vertical",strokeWidth:0,spacing:2,fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:cn.FILL_PATTERN_DEFAULTS,fillImageDefaults:cn.FILL_IMAGE_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},stageLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:QM,xOffset:3,yOffset:3,blur:5}}},$h={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:ZM,create:e=>new nn(e)};import{_ModuleSupport as e2}from"ag-charts-community";import{_ModuleSupport as Bt}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:t2}}=Bt,Hh={series:{stroke:{$palette:"stroke"},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Bt.FILL_PATTERN_DEFAULTS,fillImageDefaults:Bt.FILL_IMAGE_DEFAULTS,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[t2.ANGLE_CATEGORY]:{label:{spacing:10}}}},i2=Bt.mergeDefaults({series:{stroke:Bt.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},Hh),s2=Bt.mergeDefaults({series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Bt.FILL_PATTERN_DEFAULTS,fillImageDefaults:Bt.FILL_IMAGE_DEFAULTS,fillOpacity:.8,strokeWidth:2,marker:{enabled:!1,fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Bt.FILL_PATTERN_DEFAULTS,fillImageDefaults:Bt.FILL_IMAGE_DEFAULTS}}},Hh);import{_ModuleSupport as Xh}from"ag-charts-community";import{_ModuleSupport as pn}from"ag-charts-community";import{isFiniteNumber as Yh,isNumberEqual as qh}from"ag-charts-core";import{_ModuleSupport as o2}from"ag-charts-community";var{Label:a2,SeriesMarker:r2,SeriesProperties:n2,SeriesTooltip:l2,Property:ot}=o2,je=class extends n2{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new r2,this.label=new a2,this.tooltip=new l2,this.connectMissingData=!1}};h([ot],je.prototype,"angleKey",2),h([ot],je.prototype,"radiusKey",2),h([ot],je.prototype,"angleName",2),h([ot],je.prototype,"radiusName",2),h([ot],je.prototype,"stroke",2),h([ot],je.prototype,"strokeWidth",2),h([ot],je.prototype,"strokeOpacity",2),h([ot],je.prototype,"lineDash",2),h([ot],je.prototype,"lineDashOffset",2),h([ot],je.prototype,"rotation",2),h([ot],je.prototype,"marker",2),h([ot],je.prototype,"label",2),h([ot],je.prototype,"tooltip",2),h([ot],je.prototype,"connectMissingData",2);var{ChartAxisDirection:Pt,PolarAxis:c2,SeriesNodePickMode:Uh,valueProperty:jh,fixNumericExtent:p2,seriesLabelFadeInAnimation:h2,markerFadeInAnimation:u2,resetMarkerFn:d2,animationValidation:f2,computeMarkerFocusBounds:g2,extent:y2,BBox:m2,Group:S2,Path:x2,PointerEvents:D2,Selection:Jh,Text:b2,Marker:v2,mergeDefaults:k2,getShapeStyle:M2}=pn,I2=class extends pn.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},hn=class extends pn.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"angleValue",useLabelLayer:!0,pickModes:[Uh.NEAREST_NODE,Uh.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:d2},clipFocusBox:!1}),this.properties=new je,this.NodeEvent=I2,this.lineGroup=this.contentGroup.appendChild(new S2({name:"radar-line"})),this.lineSelection=Jh.select(this.lineGroup,x2),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new v2}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Pt.Angle)return t.getDomain(this,"angleValue","value",i);{const s=t.getDomain(this,"radiusValue","value",i),o=y2(s.length===0?s:[0].concat(s));return p2(o)}}async processData(e){const{angleKey:t,radiusKey:i}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(f2());const o=this.axes[Pt.Radius]?.scale.type,a=this.axes[Pt.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[jh(t,a,{id:"angleValue"}),jh(i,o,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[Pt.Radius];return e instanceof c2?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){const{processedData:e,dataModel:t}=this;if(!e||!t)return;const{angleKey:i,radiusKey:s,angleName:o,radiusName:a,marker:r,label:n}=this.properties,l=this.axes[Pt.Angle]?.scale,c=this.axes[Pt.Radius]?.scale;if(!l||!c)return;const p=t.resolveColumnById(this,"angleValue",e),u=t.resolveColumnById(this,"radiusValue",e),d=this.getAxisInnerRadius(),y=(e.dataSources.get(this.id)??[]).map((g,m)=>{const S=p[m],D=u[m],x=l.convert(S),k=this.radius+d-c.convert(D),I=Math.cos(x),L=Math.sin(x),b=I*k,v=L*k;let N;if(n.enabled){const M=this.getLabelText(n,{value:D,datum:g,angleKey:i,radiusKey:s,angleName:o,radiusName:a});if(M){let R="right";qh(I,0)?R="center":I>0&&(R="left");let A="bottom";qh(L,0)?A="middle":L>0&&(A="top"),N={x:b+I*r.size,y:v+L*r.size,text:M,textAlign:R,textBaseline:A}}}return{series:this,datum:g,datumIndex:m,index:m,point:{x:b,y:v,size:r.size},midPoint:{x:b,y:v},label:N,angleValue:S,radiusValue:D,missing:!Yh(x)||!Yh(k)}});return{itemId:s,nodeData:y,labelData:y}}update({seriesRect:e}){const t=this.checkResize(e),i=!this.ctx.animationManager.isSkipped(),{series:s}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&s===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Jh.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){return e?.fill??this.properties.marker.fill}getDatumStylerProperties(e){const{id:t,properties:i}=this,{angleKey:s,radiusKey:o}=i;return{seriesId:t,datum:e,angleKey:s,radiusKey:o}}updateMarkers(e,t){const{visible:i}=this,{marker:s,stroke:o,strokeWidth:a,strokeOpacity:r,highlightStyle:n}=this.properties;let l=[];if(i&&s.shape&&s.enabled)if(t){const u=this.ctx.highlightManager?.getActiveHighlight();u?.datum&&(l=[u])}else l=this.nodeData;const c=k2(t&&n.item,s.getStyle(),{stroke:o,strokeWidth:a,strokeOpacity:r}),p=this.getShapeFillBBox();e.update(l).each((u,d)=>{this.updateMarkerStyle(s,u,d.datum,d.point,this.getDatumStylerProperties(d),t,c,p)})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:p,marker:u}=a,d=o[Pt.Angle],f=o[Pt.Radius];if(!i||!s||!d||!f)return;const y=s.dataSources.get(this.id)?.[e],g=i.resolveColumnById(this,"angleValue",s)[e],m=i.resolveColumnById(this,"radiusValue",s)[e];if(g==null)return;const S=this.getMarkerStyle(u,y,this.getDatumStylerProperties(y),!1);return this.formatTooltipWithContext(p,{heading:d.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:f.formatDatum(m)}]},{seriesId:t,datum:y,title:n,angleKey:r,radiusKey:l,angleName:n,radiusName:c,...S})}legendItemSymbol(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,marker:o}=this.properties;return{marker:M2({shape:o.shape,enabled:o.enabled||t<=0,fill:this.getMarkerFill()??o.stroke??e??"rgba(0, 0, 0, 0)",stroke:o.stroke??e??"rgba(0, 0, 0, 0)",fillOpacity:o.fillOpacity,strokeOpacity:o.strokeOpacity,strokeWidth:o.strokeWidth,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset},o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults),line:{stroke:e,strokeOpacity:i,strokeWidth:t,lineDash:s}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{radiusKey:o,radiusName:a,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:o}),label:{text:a??o},symbol:this.legendItemSymbol(),hideInLegend:!r}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:s}=this,{x:o,y:a}=e,r=this.radius;if(Math.sqrt((o-i)**2+(a-s)**2)>r+this.properties.marker.size)return;let l=1/0,c;for(const p of t){const{point:{x:u=NaN,y:d=NaN}={}}=p;if(isNaN(u)||isNaN(d))continue;const f=Math.sqrt((e.x-u-i)**2+(e.y-d-s)**2);f<l&&(l=f,c=p)}if(c){const p=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:p}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new b2;return this.nodeData.forEach(s=>{if(!e.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(e),i.setAlign(s.label);const o=i.getBBox();t.push(o)}),t.length===0?null:m2.merge(t)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){const e=this.getLineNode();e&&(e.fill=void 0,e.lineJoin="round",e.lineCap="round",e.pointerEvents=D2.None,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset)}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(e.length===0)return[];const s=this.axes[Pt.Radius],a=this.axes[Pt.Angle]?.isReversed(),n=s?.isReversed()&&!a?[...e].reverse():e,l=[];let c=!1,p;return n.forEach((u,d)=>{let{x:f,y}=u.point;const g=isNaN(f)||isNaN(y);g||(p??(p=u)),g&&!i&&(f=0,y=0);const m=d===0||!t&&!i&&(g||c);l.push({x:f,y,moveTo:m}),c=g}),p!==void 0&&l.push({x:p.point.x,y:p.point.y,moveTo:!1}),l}animateSinglePath(e,t,i){const{path:s}=e;s.clear(!0);const o=this.getAxisInnerRadius(),a=this.axes[Pt.Radius],n=a?.isReversed()?this.radius+o-a?.scale.convert(0):o;t.forEach(l=>{const{x:c,y:p,arc:u,radius:d=0,startAngle:f=0,endAngle:y=0,moveTo:g}=l,m=Math.atan2(p,c),S=n*Math.cos(m),D=n*Math.sin(m),x=i,k=S*(1-x)+c*x,I=D*(1-x)+p*x;u?s.arc(c,p,d,f,y):g?s.moveTo(k,I):s.lineTo(k,I)}),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),u2(this,i,"added",e),h2(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear(!0);for(const{x:s,y:o,moveTo:a}of i)a?t.moveTo(s,o):t.lineTo(s,o);e.checkPathDirty()}}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,e.datum,{angleKey:t,radiusKey:i},!0)}computeFocusBounds(e){return g2(this,e)}};hn.className="RadarSeries";import{_ModuleSupport as A2}from"ag-charts-community";var{FillGradientDefaults:N2,FillPatternDefaults:P2,FillImageDefaults:L2,Property:ks}=A2,qi=class extends je{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new N2,this.fillPatternDefaults=new P2,this.fillImageDefaults=new L2,this.fillOpacity=1}};h([ks],qi.prototype,"fill",2),h([ks],qi.prototype,"fillGradientDefaults",2),h([ks],qi.prototype,"fillPatternDefaults",2),h([ks],qi.prototype,"fillImageDefaults",2),h([ks],qi.prototype,"fillOpacity",2);var{Group:R2,Path:T2,PointerEvents:O2,Selection:C2,ChartAxisDirection:Zh,applyShapeStyle:Qh,getShapeFill:w2,getShapeStyle:F2}=Xh,Xo=class extends hn{constructor(e){super(e),this.properties=new qi,this.areaGroup=this.contentGroup.appendChild(new R2({name:"radar-area"})),this.areaSelection=C2.select(this.areaGroup,T2),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){return e?.fill??this.properties.marker.fill??this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const e=this.getAreaNode(),{fillOpacity:t,fill:i}=this.properties,s=F2({fill:i,fillOpacity:t},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);Qh(e,s,void 0,this.getShapeFillBBox()),e.pointerEvents=O2.None,e.stroke=void 0}animatePaths(e){super.animatePaths(e),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),e)}getAreaPoints(){const e=this.getLinePoints(),t=r=>{const n=this.axes[r];return n instanceof Xh.PolarAxis?n:void 0},i=t(Zh.Radius),s=t(Zh.Angle);if(!i?.isReversed())return e;const a=s?.getAxisLinePoints()?.points??[];return e.concat(...a)}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints(),s=w2(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),o=this.getShapeFillBBox();Qh(e,{fill:s,stroke:void 0,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset},void 0,o),e.lineJoin=e.lineCap="round",t.clear(!0),i.forEach(({x:a,y:r,moveTo:n,arc:l,radius:c=0,startAngle:p=0,endAngle:u=0})=>{l?t.arc(a,r,c,p,u):n?t.moveTo(a,r):t.lineTo(a,r)}),t.closePath(),e.checkPathDirty()}}};Xo.className="RadarAreaSeries",Xo.type="radar-area";import{_ModuleSupport as B2}from"ag-charts-community";import{constant as _2,required as un,string as Yo}from"ag-charts-core";var{commonSeriesOptionsDefs:E2,radarAreaSeriesThemeableOptionsDef:G2}=B2,W2={...G2,...E2,type:un(_2("radar-area")),angleKey:un(Yo),radiusKey:un(Yo),angleName:Yo,radiusName:Yo},{ThemeConstants:{POLAR_AXIS_TYPE:eu}}=e2,AT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:e=>new Xo(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:eu.ANGLE_CATEGORY},{type:eu.RADIUS_NUMBER}],themeTemplate:s2},tu={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:W2,create:e=>new Xo(e)};import{_ModuleSupport as V2}from"ag-charts-community";var qo=class extends hn{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};qo.className="RadarLineSeries",qo.type="radar-line";import{_ModuleSupport as K2}from"ag-charts-community";import{constant as z2,required as dn,string as Uo}from"ag-charts-core";var{commonSeriesOptionsDefs:$2,radarLineSeriesThemeableOptionsDef:H2}=K2,X2={...H2,...$2,type:dn(z2("radar-line")),angleKey:dn(Uo),radiusKey:dn(Uo),angleName:Uo,radiusName:Uo},{POLAR_AXIS_TYPE:iu}=V2.ThemeConstants,RT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:e=>new qo(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:iu.ANGLE_CATEGORY},{type:iu.RADIUS_NUMBER}],themeTemplate:i2},su={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:X2,create:e=>new qo(e)};import{_ModuleSupport as Y2}from"ag-charts-community";import{_ModuleSupport as Ms}from"ag-charts-community";import{isDefined as q2}from"ag-charts-core";import{_ModuleSupport as U2}from"ag-charts-community";var{SeriesProperties:j2,FillGradientDefaults:J2,FillPatternDefaults:Z2,FillImageDefaults:Q2,SeriesTooltip:eI,Property:Oe,Label:tI}=U2,Le=class extends j2{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new J2,this.fillPatternDefaults=new Z2,this.fillImageDefaults=new Q2,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new tI,this.tooltip=new eI}};h([Oe],Le.prototype,"angleKey",2),h([Oe],Le.prototype,"radiusKey",2),h([Oe],Le.prototype,"angleName",2),h([Oe],Le.prototype,"radiusName",2),h([Oe],Le.prototype,"fill",2),h([Oe],Le.prototype,"fillGradientDefaults",2),h([Oe],Le.prototype,"fillPatternDefaults",2),h([Oe],Le.prototype,"fillImageDefaults",2),h([Oe],Le.prototype,"fillOpacity",2),h([Oe],Le.prototype,"stroke",2),h([Oe],Le.prototype,"strokeWidth",2),h([Oe],Le.prototype,"strokeOpacity",2),h([Oe],Le.prototype,"lineDash",2),h([Oe],Le.prototype,"lineDashOffset",2),h([Oe],Le.prototype,"cornerRadius",2),h([Oe],Le.prototype,"itemStyler",2),h([Oe],Le.prototype,"rotation",2),h([Oe],Le.prototype,"stackGroup",2),h([Oe],Le.prototype,"normalizedTo",2),h([Oe],Le.prototype,"label",2),h([Oe],Le.prototype,"tooltip",2);import{_ModuleSupport as iI}from"ag-charts-community";var{SectorBox:ou,motion:sI}=iI;function oI(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function au(e){return{toFn:(s,o,a)=>{let r,n,l,c,p;return a==="removed"?(r=e,n=e,l=o.innerRadius,c=o.outerRadius,p=new ou(r,n,l,c)):(r=o.startAngle,n=o.endAngle,l=isNaN(o.innerRadius)?s.innerRadius:o.innerRadius,c=isNaN(o.outerRadius)?s.outerRadius:o.outerRadius,p=o.clipSector),{startAngle:r,endAngle:n,innerRadius:l,outerRadius:c,clipSector:p}},fromFn:(s,o,a)=>{a=oI(s,o,a);let r,n,l,c,p;a==="removed"||a==="updated"?(r=s.startAngle,n=s.endAngle,l=s.innerRadius,c=s.outerRadius,p=s.clipSector):(r=e,n=e,l=o.innerRadius,c=o.outerRadius),p??(p=new ou(r,n,l,c));const u=sI.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:r,endAngle:n,innerRadius:l,outerRadius:c,clipSector:p,phase:u}}}}function aI(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{ChartAxisDirection:_t,PolarAxis:rI,diff:nI,groupAccumulativeValueProperty:ru,keyProperty:lI,normaliseGroupTo:cI,valueProperty:pI,fixNumericExtent:hI,resetLabelFn:uI,seriesLabelFadeInAnimation:dI,seriesLabelFadeOutAnimation:fI,animationValidation:gI,angleBetween:yI,createDatumId:nu,CategoryScale:mI,Sector:SI,SectorBox:xI,motion:lu,isGradientFill:DI,applyShapeStyle:bI,getShapeStyle:fn}=Ms,vI=class extends Ms.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},jo=class extends Ms.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"radiusValue",useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:aI,label:uI}}),this.properties=new Le,this.NodeEvent=vI,this.groupScale=new mI,this.circleCache={r:0,cx:0,cy:0}}get defaultShapeStyle(){const e=this.axes[_t.Angle]?.scale;return{...this.properties.fillGradientDefaults.toJson(),rotation:Ms.toDegrees(e.range[0])+90}}nodeFactory(){return new SI}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===_t.Angle){const s=t.getDomain(this,"angleValue-end","value",i),o=[s[0]>0?0:s[0],s[1]<0?0:s[1]];return hI(o)}else return t.getDomain(this,"radiusValue","key",i)}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),r=`${a}-trailing`,n=[];q2(s)&&n.push(cI([a,r],Math.abs(s))),o&&(this.processedData&&n.push(nI(this.id,this.processedData)),n.push(gI()));const l=this.visible?{}:{forceValue:0},c=this.axes[_t.Radius]?.scale.type,p=this.axes[_t.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[lI(i,c,{id:"radiusValue"}),pI(t,p,{id:"angleValue-raw",invalidValue:null,...l}),...ru(t,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},p),...ru(t,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},p),...n],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[_t.Radius];return e instanceof rI?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t}=this;if(!t||!e||e.type!=="grouped")return;const i=this.axes[_t.Angle],s=this.axes[_t.Radius],o=i?.scale,a=s?.scale;if(!o||!a)return;const r=t.resolveKeysById(this,"radiusValue",e),n=t.resolveColumnById(this,"angleValue-start",e),l=t.resolveColumnById(this,"angleValue-end",e),c=t.resolveColumnById(this,"angleValue-raw",e),p=t.resolveProcessedDataIndexById(this,"angleValue-range");let u=0;s instanceof li&&(u=s.groupPaddingInner);const{groupScale:d}=this,{index:f,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:y}).map((w,O)=>String(O)),d.range=[0,Math.abs(a.bandwidth??0)],d.paddingInner=y>1?u:0;const g=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,m=i.isReversed(),S=s.isReversed(),D=S?this.radius:this.getAxisInnerRadius(),k=(S?this.getAxisInnerRadius():this.radius)+D,{angleKey:I,radiusKey:L,angleName:b,radiusName:v,label:N}=this.properties,M=(w,O,F,E)=>{const C=this.getLabelText(N,{value:O,datum:w,angleKey:I,radiusKey:L,angleName:b,radiusName:v});if(C)return{x:F,y:E,text:C,textAlign:"center",textBaseline:"middle"}},R=[],A={itemId:L,nodeData:R,labelData:R};if(!this.visible)return A;const{dataSources:P}=e,T=P.get(this.id)??[];for(const{datumIndex:w,group:O}of t.forEachGroupDatum(this,e)){const F=T[w],E=r[w];if(E==null)return;const C=c[w],_=n[w],B=l[w],G=C>=0&&!Object.is(C,-0),W=O.aggregation[p][G?1:0],V=G===m;let K=o.convert(_,{clamp:!0}),$=o.convert(B,{clamp:!0}),X=o.convert(0,{clamp:!0}),J=o.convert(W,{clamp:!0});V&&([X,J]=[J,X],[K,$]=[$,K]);const ee=k-a.convert(E)+d.convert(String(f)),j=ee+g,U=(ee+j)/2,re=K+yI(K,$)/2,le=Math.cos(re)*U,Y=Math.sin(re)*U,_e=this.properties.label.enabled?M(F,C,le,Y):void 0,Ee=new xI(K,$,ee,j);R.push({series:this,datum:F,datumIndex:w,point:{x:le,y:Y,size:0},midPoint:{x:le,y:Y},label:_e,angleValue:C,radiusValue:E,innerRadius:ee,outerRadius:j,startAngle:X,endAngle:J,clipSector:Ee,reversed:V,index:w})}return A}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return fn({fill:i?.fill??t.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset,cornerRadius:t.cornerRadius},this.defaultShapeStyle,t.fillPatternDefaults,t.fillImageDefaults)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{angleKey:r,radiusKey:n,itemStyler:l}=a;let c;return l!=null&&(c=this.cachedDatumCallback(nu(e,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:o,datum:t,highlighted:s,angleKey:r,radiusKey:n,...i}))),fn(c,this.defaultShapeStyle,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateSectorSelection(e,t){let i=[];if(t){const a=this.ctx.highlightManager?.getActiveHighlight();a?.datum&&a.series===this&&i.push(a)}else i=this.nodeData;const s=this.getItemBaseStyle(t),o=this.getShapeFillBBox();e.update(i,void 0,a=>this.getDatumId(a)).each((a,r)=>{const{datum:n,datumIndex:l}=r,c=this.getItemStyleOverrides(String(l),n,s,t),p=c?.cornerRadius??s.cornerRadius,u=c?.fill??s.fill,d=Ms.isGradientFill(u)&&u.bounds!=="item"?{centerX:0,centerY:0}:void 0;bI(a,s,c,o,d),a.lineJoin="round",a.inset=a.stroke!=null?a.strokeWidth/2:0,a.startInnerCornerRadius=n.reversed?p:0,a.startOuterCornerRadius=n.reversed?p:0,a.endInnerCornerRadius=n.reversed?0:p,a.endOuterCornerRadius=n.reversed?0:p,t&&(a.startAngle=r.startAngle,a.endAngle=r.endAngle,a.clipSector=r.clipSector,a.innerRadius=r.innerRadius,a.outerRadius=r.outerRadius)})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1})}getBarTransitionFunctions(){const e=this.axes[_t.Angle]?.scale;let t=0;if(!e)return au(t);const i=Math.min(e.domain[0],e.domain[1]),s=Math.max(e.domain[0],e.domain[1]);return i<=0&&s>=0&&(t=e.convert(0)),au(t)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();lu.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),dI(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();lu.fromToMotion(this.id,"datums",t,[e],i),fI(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:p}=a,u=o[_t.Angle],d=o[_t.Radius];if(!i||!s||!u||!d)return;const f=s.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"radiusValue",s)[e],g=i.resolveColumnById(this,"angleValue-raw",s)[e];if(y==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(e),e,m,!1)),this.formatTooltipWithContext(p,{heading:d.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:n,fallbackLabel:r,value:u.formatDatum(g)}]},{seriesId:t,datum:f,title:n,angleKey:r,angleName:n,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r,fillPatternDefaults:n,fillImageDefaults:l}=this.properties,c=fn({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r},this.defaultShapeStyle,n,l);return DI(c.fill)&&(c.fill={...c.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:c}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{angleKey:s,angleName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i,label:{text:o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return nu(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};jo.className="RadialBarSeries",jo.type="radial-bar";import{_ModuleSupport as kI}from"ag-charts-community";import{boolean as cu,constant as MI,number as II,required as gn,string as Is}from"ag-charts-core";var{commonSeriesOptionsDefs:AI,radialBarSeriesThemeableOptionsDef:NI}=kI,PI={...NI,...AI,type:gn(MI("radial-bar")),angleKey:gn(Is),radiusKey:gn(Is),angleName:Is,radiusName:Is,grouped:cu,stacked:cu,stackGroup:Is,normalizedTo:II};import{_ModuleSupport as yn}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:LI}}=yn,RI={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"conic",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:yn.FILL_PATTERN_DEFAULTS,fillImageDefaults:yn.FILL_IMAGE_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}}},axes:{[LI.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:pu}=Y2.ThemeConstants,GT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:e=>new jo(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:pu.ANGLE_NUMBER},{type:pu.RADIUS_CATEGORY}],themeTemplate:RI,stackable:!0,groupable:!0},hu={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:PI,create:e=>new jo(e)};import{_ModuleSupport as TI}from"ag-charts-community";import{_ModuleSupport as OI}from"ag-charts-community";import{_ModuleSupport as CI}from"ag-charts-community";var{Property:uu}=CI,mn=class extends ve{};h([uu],mn.prototype,"columnWidthRatio",2),h([uu],mn.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:wI,PolarAxis:FI,RadialColumnShape:BI,getRadialColumnWidth:_I}=OI,Jo=class extends Ph{constructor(e){super(e,{animationResetFns:{item:SM}}),this.properties=new mn}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new BI}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return mM(e)}isRadiusAxisCircle(){const e=this.axes[wI.Radius];return e instanceof FI?e.shape==="circle":!1}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return _I(e,t,this.radius,i,s)}};Jo.className="RadialColumnSeries",Jo.type="radial-column";import{_ModuleSupport as EI}from"ag-charts-community";import{boolean as du,constant as GI,number as WI,required as Sn,string as As}from"ag-charts-core";var{commonSeriesOptionsDefs:VI,radialColumnSeriesThemeableOptionsDef:KI}=EI,zI={...KI,...VI,type:Sn(GI("radial-column")),angleKey:Sn(As),radiusKey:Sn(As),angleName:As,radiusName:As,grouped:du,stacked:du,stackGroup:As,normalizedTo:WI};import{_ModuleSupport as xn}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:fu,POLAR_AXIS_SHAPE:$I}}=xn,gu={$path:["./shape",$I.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},HI={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:xn.FILL_PATTERN_DEFAULTS,fillImageDefaults:xn.FILL_IMAGE_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[fu.ANGLE_CATEGORY]:{shape:gu,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[fu.RADIUS_NUMBER]:{shape:gu,innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:yu}=TI.ThemeConstants,XT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:e=>new Jo(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:yu.ANGLE_CATEGORY},{type:yu.RADIUS_NUMBER}],themeTemplate:HI,stackable:!0,groupable:!0},mu={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:zI,create:e=>new Jo(e)};import{_ModuleSupport as Zo}from"ag-charts-community";import{_ModuleSupport as Mi}from"ag-charts-community";import{countFractionDigits as XI}from"ag-charts-core";import{_ModuleSupport as YI}from"ag-charts-community";var{SvgPath:qI,Rotatable:UI,Translatable:jI,Scalable:JI}=YI,Dn=class extends UI(JI(jI(qI))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};Dn.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";import{_ModuleSupport as bn}from"ag-charts-community";import"ag-charts-core";var{BaseProperties:Ns,SeriesTooltip:ZI,SeriesProperties:QI,PropertiesArray:vn,AxisLabel:eA,Property:z,Label:tA}=bn,Su=class extends tA{};h([z],Su.prototype,"spacing",2);var He=class extends Ns{constructor(){super(...arguments),this.label=new Su}};h([z],He.prototype,"text",2),h([z],He.prototype,"value",2),h([z],He.prototype,"shape",2),h([z],He.prototype,"placement",2),h([z],He.prototype,"spacing",2),h([z],He.prototype,"size",2),h([z],He.prototype,"rotation",2),h([z],He.prototype,"fill",2),h([z],He.prototype,"fillOpacity",2),h([z],He.prototype,"stroke",2),h([z],He.prototype,"strokeWidth",2),h([z],He.prototype,"strokeOpacity",2),h([z],He.prototype,"lineDash",2),h([z],He.prototype,"lineDashOffset",2),h([z],He.prototype,"label",2);var Lt=class extends Ns{constructor(){super(...arguments),this.enabled=!0,this.fills=new vn(bn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([z],Lt.prototype,"enabled",2),h([z],Lt.prototype,"fills",2),h([z],Lt.prototype,"fillMode",2),h([z],Lt.prototype,"fill",2),h([z],Lt.prototype,"fillOpacity",2),h([z],Lt.prototype,"stroke",2),h([z],Lt.prototype,"strokeWidth",2),h([z],Lt.prototype,"strokeOpacity",2),h([z],Lt.prototype,"lineDash",2),h([z],Lt.prototype,"lineDashOffset",2);var Ps=class extends Ns{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};h([z],Ps.prototype,"values",2),h([z],Ps.prototype,"step",2),h([z],Ps.prototype,"minSpacing",2),h([z],Ps.prototype,"maxSpacing",2);var iA=class extends eA{},Qe=class extends Ns{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new vn(bn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Ps,this.label=new iA}};h([z],Qe.prototype,"min",2),h([z],Qe.prototype,"max",2),h([z],Qe.prototype,"fills",2),h([z],Qe.prototype,"fillMode",2),h([z],Qe.prototype,"fill",2),h([z],Qe.prototype,"fillOpacity",2),h([z],Qe.prototype,"stroke",2),h([z],Qe.prototype,"strokeWidth",2),h([z],Qe.prototype,"strokeOpacity",2),h([z],Qe.prototype,"lineDash",2),h([z],Qe.prototype,"lineDashOffset",2),h([z],Qe.prototype,"defaultFill",2),h([z],Qe.prototype,"interval",2),h([z],Qe.prototype,"label",2);var Rt=class extends Ns{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([z],Rt.prototype,"enabled",2),h([z],Rt.prototype,"radiusRatio",2),h([z],Rt.prototype,"spacing",2),h([z],Rt.prototype,"fill",2),h([z],Rt.prototype,"fillOpacity",2),h([z],Rt.prototype,"stroke",2),h([z],Rt.prototype,"strokeWidth",2),h([z],Rt.prototype,"strokeOpacity",2),h([z],Rt.prototype,"lineDash",2),h([z],Rt.prototype,"lineDashOffset",2);var xu=class extends Ct{};h([z],xu.prototype,"text",2);var Du=class extends ps{};h([z],Du.prototype,"text",2);var Ce=class extends QI{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new ys,this.defaultColorRange=[],this.targets=new vn(He),this.defaultTarget=new He,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new Qe,this.bar=new Lt,this.needle=new Rt,this.label=new xu,this.secondaryLabel=new Du,this.tooltip=new ZI}};h([z],Ce.prototype,"value",2),h([z],Ce.prototype,"startAngle",2),h([z],Ce.prototype,"endAngle",2),h([z],Ce.prototype,"segmentation",2),h([z],Ce.prototype,"defaultColorRange",2),h([z],Ce.prototype,"targets",2),h([z],Ce.prototype,"defaultTarget",2),h([z],Ce.prototype,"outerRadiusRatio",2),h([z],Ce.prototype,"innerRadiusRatio",2),h([z],Ce.prototype,"outerRadius",2),h([z],Ce.prototype,"innerRadius",2),h([z],Ce.prototype,"cornerRadius",2),h([z],Ce.prototype,"cornerMode",2),h([z],Ce.prototype,"spacing",2),h([z],Ce.prototype,"scale",2),h([z],Ce.prototype,"bar",2),h([z],Ce.prototype,"needle",2),h([z],Ce.prototype,"label",2),h([z],Ce.prototype,"secondaryLabel",2),h([z],Ce.prototype,"tooltip",2);import{_ModuleSupport as sA}from"ag-charts-community";var{SectorBox:kn}=sA;function oA(e){const{startAngle:t,endAngle:i,clipStartAngle:s,clipEndAngle:o,innerRadius:a,outerRadius:r}=e;if(!(s==null||o==null))return new kn(Math.max(s,t),Math.min(o,i),a,r)}function bu(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function Mn(e){return e.clipStartAngle!=null&&e.clipEndAngle!=null}function In(e,t){const{clipStartAngle:i,clipEndAngle:s,innerRadius:o,outerRadius:a}=e;return new kn(i,t?i:s,o,a)}function vu(e,t){const i=e?"initial":"update";return{node:{fromFn(a,r){const n=a.previousDatum;let{startAngle:l,endAngle:c}=n??r;const p=n!=null&&Mn(n)?In(n,e):void 0,u=Mn(r)?In(r,e):void 0;let d;return p!=null&&u!=null?d=p:p==null&&u!=null?(d=u,l=r.startAngle,c=r.endAngle):p!=null&&u==null?(d=void 0,l=r.startAngle,c=r.endAngle):e&&(c=l),{startAngle:l,endAngle:c,clipSector:d,phase:i}},toFn(a,r){const{startAngle:n,endAngle:l}=r;let c;return Mn(r)&&(c=In(r,!1)),{startAngle:n,endAngle:l,clipSector:c}},applyFn(a,r){const{startAngle:n,endAngle:l}=r;let{clipSector:c}=r;c!=null&&(c=new kn(Math.max(n,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const p=c==null||bu(n,l,c);a.startAngle=n,a.endAngle=l,a.clipSector=c,a.visible=p}},needle:{fromFn(a){let{angle:r}=a.previousDatum??a.datum;return e&&(r=t),{rotation:r,phase:i}},toFn(a,r){const{angle:n}=r;return{rotation:n}}}}}function An(e,t){const{startAngle:i,endAngle:s}=t,o=oA(t),a=o==null||bu(i,s,o);return{startAngle:i,endAngle:s,clipSector:o,visible:a}}function ku(e,t){const{angle:i}=t;return{rotation:i}}var aA={top:0,middle:.5,bottom:1};function rA(e,t,i,s,o,a){const{padding:r,textAlign:n,verticalAlign:l}=s;let c,p;if(i.each((I,L)=>{L.label==="primary"?c=L:L.label==="secondary"&&(p=L)}),c==null)return;const u=gs(e.id,t,c,a?.label);if(u==null)return;const d=p!=null?gs(e.id,t,p,a?.secondaryLabel):void 0,f={padding:r},y=n==="center"?2:1,g=l==="middle"?2:1,m=I=>({width:Math.sqrt(Math.max(o**2-(I/g)**2,0))*y,height:Math.min(I,g*o),meta:null});let S,D,x;if(p!=null&&d!=null){const I=nc(u,c,d,p,f,m);S=I?.label,D=I?.secondaryLabel,x=I?.height??0}else{const I=ls(u,c,f,m);S=I?.[0],D=void 0,x=I?.[0].height??0}const k=x*aA[l];i.each((I,L)=>{let b;if(L.label==="primary"?b=S:L.label==="secondary"&&(b=D),b==null){I.visible=!1;return}I.visible=!0,I.text=b.text,I.fontSize=b.fontSize,I.lineHeight=b.lineHeight,I.textAlign=n,I.textBaseline="middle";const v=L.label==="primary"?b.height/2:x-b.height/2;I.y=L.centerY+v-k,I.x=L.centerX})}var{fromToMotion:Ls,resetMotion:Mu,CachedTextMeasurerPool:nA,SeriesNodePickMode:Iu,StateMachine:lA,createDatumId:Nn,normalizeAngle360:Au,normalizeAngle360Inclusive:Pn,isBetweenAngles:Qo,sectorBox:cA,toDegrees:pA,toRadians:ea,BBox:hA,Group:ti,PointerEvents:ta,Selection:ii,Sector:uA,SectorBox:dA,Text:Nu,Marker:fA,getColorStops:gA}=Mi,yA={inside:90,middle:0,outside:-90},mA=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],SA=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],ia=class extends Mi.Series{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Iu.EXACT_SHAPE_MATCH,Iu.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new Ce,this.scale=new Zn,this.scaleGroup=this.contentGroup.appendChild(new ti({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new ti({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new ti({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new ti({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new ti({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new ti({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new ti({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new ti({name:"tickGroup"})),this.scaleSelection=ii.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=ii.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=ii.select(this.itemNeedleGroup,Dn),this.targetSelection=ii.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=ii.select(this.itemTargetLabelGroup,Nu),this.labelSelection=ii.select(this.itemLabelGroup,Nu),this.highlightTargetSelection=ii.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=ii.select(this.tickGroup,Mi.TransformableText),this.datumUnion=new Ap,this.animationState=new lA("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=ta.None,this.tickGroup.pointerEvents=ta.None,this.itemNeedleGroup.pointerEvents=ta.None,this.itemLabelGroup.pointerEvents=ta.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new uA}markerFactory(){const e=new fA;return e.size=1,e}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{min:t,max:i}=this.properties.scale;return Pp(e,{min:t,max:i})}layoutScale(){const{scale:e,properties:t}=this,{seriesRectWidth:i,seriesRectHeight:s}=this.nodeDataDependencies,{scale:o,outerRadius:a}=this.properties,{min:r,max:n,label:l,interval:c}=o,p=ea(t.startAngle-90),u=ea(t.endAngle-90),f=Pn(u-p)>Math.PI,y=f||Qo(1.5*Math.PI,p,u),g=f||Qo(0*Math.PI,p,u),m=f||Qo(.5*Math.PI,p,u),S=f||Qo(1*Math.PI,p,u);let D;S&&!g?D="right":!S&&g?D="left":D="center";let x;y&&!m?x="bottom":!y&&m?x="top":x="middle";const k=cA({startAngle:p,endAngle:u,innerRadius:0,outerRadius:.5}),I=-(k.x+k.width/2)*2,L=-(k.y+k.height/2)*2,b=Math.min(i/k.width,s/k.height);e.domain=[r,n],e.range=[p,u],e.arcLength=b/2;const{maxSpacing:v,minSpacing:N}=c,{arcLength:M}=e,R=v?Math.floor(M/v):1,A=N?Math.floor(M/N):1/0,P=Math.floor(4/Math.PI*Math.abs(e.range[0]-e.range[1])),T=Math.max(R,Math.min(A,P)),w=c.values??e.ticks({nice:!1,interval:c.step,minTickCount:R,maxTickCount:A,tickCount:T})?.ticks??[],O=w.reduce((K,$)=>Math.max(K,typeof $=="number"?XI($):0),0),F=e.tickFormatter({domain:e.domain,ticks:w,fractionDigits:O,specifier:typeof l.format=="string"?l.format:void 0}),E=l.getFont(),C=w.map((K,$)=>{let X;l.formatter&&(X=Cr(this.ctx,l.formatter,{value:K,index:$,domain:e.domain,boundSeries:void 0})),X===void 0&&(X=F(K));const{width:J,height:Q}=nA.measureText(X,{font:E});return{index:$,value:K,text:X,width:J,height:Q}}),_=C.reduce((K,$)=>Math.max(K,$.width),0),B=C.reduce((K,$)=>Math.max(K,$.height),0),G=l.enabled?Math.max(_,B)+l.spacing:0,W=Math.max(.5*b-G,0),V=a??W;return this.centerX=i/2+I*V,this.centerY=s/2+L*V,this.radius=V,this.textAlign=D,this.verticalAlign=x,C}createConicGradient(e,t){const{scale:i}=this,{domain:s,range:o}=i,[a,r]=o,{defaultColorRange:n}=this.properties,l=Au((a+r)/2+Math.PI),c=Pn(r-a);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:gA(e,n,s,t).map(({color:u,stop:d})=>(d=Math.min(Math.max(d,0),1),d=(a+c*d-l)/(2*Math.PI),d=(d%1+1)%1,{stop:d,color:u})),rotation:pA(l)+90}}getShapeFillBBox(){const{centerX:e,centerY:t,radius:i}=this;return new hA(e-i,t-i,2*i,2*i)}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:s=t.text,value:o=t.value??0,shape:a=t.shape??"triangle",rotation:r=t.rotation??0,strokeWidth:n=t.strokeWidth??0,placement:l=t.placement??"middle",spacing:c=t.spacing??0,size:p=t.size??0,fill:u=t.fill??"black",fillOpacity:d=t.fillOpacity??1,stroke:f=t.stroke??"black",strokeOpacity:y=t.strokeOpacity??1,lineDash:g=t.lineDash??[0],lineDashOffset:m=t.lineDashOffset??0}=i,{enabled:S=t.label.enabled,color:D=t.label.color??"black",fontStyle:x=t.label.fontStyle??"normal",fontWeight:k=t.label.fontWeight??"normal",fontSize:I=t.label.fontSize,fontFamily:L=t.label.fontFamily,spacing:b=t.label.spacing??0}=i.label;return{text:s,value:o,shape:a,placement:l,spacing:c,size:p,rotation:r,fill:u,fillOpacity:d,stroke:f,strokeWidth:n,strokeOpacity:y,lineDash:g,lineDashOffset:m,label:{enabled:S,color:D,fontStyle:x,fontWeight:k,fontSize:I,fontFamily:L,spacing:b}}})}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:s,outerRadiusRatio:o}=i,{placement:a,spacing:r,size:n}=e,l=t*o,c=t*s;switch(a){case"inside":return Math.max(c-r-n/2,0);case"outside":return l+r+n/2;default:return(c+l)/2}}getTargetLabel(e){const{scale:t}=this,{value:i,size:s,placement:o,label:a}=e,{spacing:r,color:n,fontStyle:l,fontWeight:c,fontSize:p,fontFamily:u}=a,d=void 0,f=t.convert(i),y=Au(f)/(Math.PI/2)|0,g=s/2+r;let m,S,D,x;switch(o){case"outside":({textAlign:m,textBaseline:S}=mA[y]),D=g*Math.cos(f),x=g*Math.sin(f);break;case"inside":({textAlign:m,textBaseline:S}=SA[y]),D=-g*Math.cos(f),x=-g*Math.sin(f);break;default:m="center",S="bottom",D=0,x=-g;break}return{offsetX:D,offsetY:x,fill:n,textAlign:m,textBaseline:S,fontStyle:l,fontWeight:c,fontSize:p,fontFamily:u,lineHeight:d}}createNodeData(){const e=this.layoutScale(),{id:t,scale:i,properties:s,radius:o,centerX:a,centerY:r}=this,{value:n,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:p,cornerRadius:u,cornerMode:d,needle:f,bar:y,scale:g,label:m,secondaryLabel:S}=s,{outerRadius:D=o*c,innerRadius:x=o*l}=s,k=this.getTargets(),I=[],L=[],b=[],v=[],N=[],M=d==="item",R=i.convert(i.domain[0]),A=i.convert(n),P=Math.ceil(Pn(A-R)*o);let T=p.enabled?p.interval.getSegments(i,P):void 0;const w=y.enabled?y.fill??this.createConicGradient(y.fills,y.fillMode):"rgba(0,0,0,0)",O=g.fill??(y.enabled&&g.fills.length===0?g.defaultFill:void 0)??this.createConicGradient(g.fills,g.fillMode);if(T==null&&M){const F=Math.min(...i.domain),E=Math.max(...i.domain),C={value:n,segmentStart:F,segmentEnd:E},B=Math.min(u,(D-x)/2)/((x+D)/2);I.push({series:this,itemId:"value",datum:C,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:D,innerRadius:x,startAngle:R-B,endAngle:A+B,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:w}),N.push({series:this,itemId:"scale",datum:C,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:D,innerRadius:x,startAngle:i.range[0]-B,endAngle:i.range[1]+B,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:O})}else{T??(T=i.domain);for(let F=0;F<T.length-1;F++){const E=T[F],C=T[F+1],_={value:n,segmentStart:E,segmentEnd:C},B=F===0,G=F===T.length-2,W=i.convert(E),V=i.convert(C);I.push({series:this,itemId:`value-${F}`,datum:_,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:D,innerRadius:x,startAngle:W,endAngle:V,clipStartAngle:R,clipEndAngle:A,startCornerRadius:M||B?u:0,endCornerRadius:M||G?u:0,fill:w}),N.push({series:this,itemId:`scale-${F}`,datum:_,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:D,innerRadius:x,startAngle:W,endAngle:V,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:M||B?u:0,endCornerRadius:M||G?u:0,fill:O})}}if(!f.enabled&&m.enabled){const{text:F,color:E,fontSize:C,minimumFontSize:_,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K=$=>this.formatLabel($.value)}=m;v.push({label:"primary",centerX:a,centerY:r,text:F,value:n,fill:E,fontSize:C,minimumFontSize:_,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K})}if(!f.enabled&&S.enabled){const{text:F,color:E,fontSize:C,minimumFontSize:_,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K}=S;v.push({label:"secondary",centerX:a,centerY:r,text:F,value:n,fill:E,fontSize:C,minimumFontSize:_,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K})}if(f.enabled){let F=f.radiusRatio!=null?o*f.radiusRatio:x;F=Math.max(F-f.spacing,0);const E=i.convert(n);b.push({centerX:a,centerY:r,radius:F,angle:E,series:this})}for(let F=0;F<k.length;F+=1){const E=k[F],{value:C,text:_,size:B,shape:G,fill:W,fillOpacity:V,stroke:K,strokeWidth:$,strokeOpacity:X,lineDash:J,lineDashOffset:Q}=E;if(C<Math.min(...i.domain)||C>Math.max(...i.domain))continue;const ee=this.getTargetRadius(E),j=i.convert(C),U=ea(E.rotation+yA[E.placement]);L.push({series:this,itemId:`target-${F}`,midPoint:{x:ee*Math.cos(j)+a,y:ee*Math.sin(j)+r},datum:{value:C},datumIndex:{type:1,index:F},type:1,value:C,text:_,centerX:a,centerY:r,shape:G,radius:ee,angle:j,rotation:U,size:B,fill:W,fillOpacity:V,stroke:K,strokeOpacity:X,strokeWidth:$,lineDash:J,lineDashOffset:Q,label:this.getTargetLabel(E)})}return{itemId:t,nodeData:I,needleData:b,targetData:L,labelData:v,scaleData:N,tickData:e}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,needleSelection:s,targetSelection:o,targetLabelSelection:a,scaleSelection:r,highlightTargetSelection:n,tickSelection:l}=this,c=this.checkResize(e);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const p=this.contextNodeData?.nodeData??[],u=this.contextNodeData?.labelData??[],d=this.contextNodeData?.needleData??[],f=this.contextNodeData?.targetData??[],y=this.contextNodeData?.scaleData??[],g=this.contextNodeData?.tickData??[],m=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:y,scaleSelection:r}),this.updateScaleNodes({scaleSelection:r}),this.needleSelection=this.updateNeedleSelection({needleData:d,needleSelection:s}),this.updateNeedleNodes({needleSelection:s}),this.targetSelection=this.updateTargetSelection({targetData:f,targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:f,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:p,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:u,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:m!=null?[m]:[],targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:g,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Nn(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:s}=this,{bar:o,segmentation:a}=s,r=a.spacing??0,{fillOpacity:n,stroke:l,strokeOpacity:c,lineDash:p,lineDashOffset:u}=o,d=this.getStrokeWidth(o.strokeWidth),f=i.animationManager.isSkipped(),y=this.getShapeFillBBox();t.each((g,m)=>{const{centerX:S,centerY:D,innerRadius:x,outerRadius:k,startCornerRadius:I,endCornerRadius:L,fill:b}=m;g.centerX=S,g.centerY=D,g.innerRadius=x,g.outerRadius=k,g.pointerEvents=this.properties.bar.enabled?Mi.PointerEvents.All:Mi.PointerEvents.None,g.fill=b,g.fillBBox=y,g.fillOpacity=n,g.stroke=l,g.strokeOpacity=c,g.strokeWidth=d,g.lineDash=p,g.lineDashOffset=u,g.startOuterCornerRadius=I,g.startInnerCornerRadius=I,g.endOuterCornerRadius=L,g.endInnerCornerRadius=L,g.radialEdgeInset=(r+g.strokeWidth)/2,g.concentricEdgeInset=g.strokeWidth/2,(f||g.previousDatum==null)&&g.setProperties(An(g,m))}),this.datumUnion.update(t,this.itemGroup,Mi.Sector,(g,m,S)=>{g.clipSector??(g.clipSector=new dA(NaN,NaN,NaN,NaN)),g.centerX=m.centerX,g.centerY=m.centerY,g.outerRadius=g.clipSector.outerRadius=m.outerRadius,g.innerRadius=g.clipSector.innerRadius=m.innerRadius,g.startAngle=g.clipSector.startAngle=m.startAngle,g.startInnerCornerRadius=m.startInnerCornerRadius,g.startOuterCornerRadius=m.startOuterCornerRadius,g.endAngle=S.endAngle,g.clipSector.endAngle=S.clipSector?.endAngle??S.endAngle,g.endInnerCornerRadius=S.endInnerCornerRadius,g.endOuterCornerRadius=S.endOuterCornerRadius,g.pointerEvents=Mi.PointerEvents.None})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>Nn(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i,segmentation:s}=this.properties,o=s.spacing??0,{fillOpacity:a,stroke:r,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:p}=i,u=this.getShapeFillBBox();t.each((d,f)=>{const{centerX:y,centerY:g,innerRadius:m,outerRadius:S,startCornerRadius:D,endCornerRadius:x,fill:k}=f;d.centerX=y,d.centerY=g,d.innerRadius=m,d.outerRadius=S,d.fill=k,d.fillBBox=u,d.fillOpacity=a,d.stroke=r,d.strokeOpacity=n,d.strokeWidth=l,d.lineDash=c,d.lineDashOffset=p,d.startOuterCornerRadius=D,d.startInnerCornerRadius=D,d.endOuterCornerRadius=x,d.endInnerCornerRadius=x,d.radialEdgeInset=(o+d.strokeWidth)/2,d.concentricEdgeInset=d.strokeWidth/2,d.setProperties(An(d,f))})}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,()=>Nn([]))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:r,lineDash:n,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();t.each((p,u)=>{const{centerX:d,centerY:f,radius:y}=u,g=y*2;p.d=Dn.defaultPathData,p.fill=i,p.fillOpacity=s,p.stroke=o,p.strokeOpacity=a,p.strokeWidth=r/g,p.lineDash=n.map(m=>m/g),p.lineDashOffset=l/g,p.translationX=d,p.translationY=f,p.scalingX=g,p.scalingY=g,c&&p.setProperties(ku(p,u))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e,s=i?this.properties.highlightStyle.item:void 0;t.each((o,a)=>{const{centerX:r,centerY:n,angle:l,radius:c,shape:p,size:u,rotation:d,fill:f,fillOpacity:y,stroke:g,strokeOpacity:m,strokeWidth:S,lineDash:D,lineDashOffset:x}=a;o.shape=p==="line"?Lp:p,o.size=u,o.fill=s?.fill??f,o.fillOpacity=s?.fillOpacity??y,o.stroke=s?.stroke??g,o.strokeOpacity=s?.strokeOpacity??m,o.strokeWidth=s?.strokeWidth??S,o.lineDash=s?.lineDash??D,o.lineDashOffset=s?.lineDashOffset??x,o.translationX=r+c*Math.cos(l),o.translationY=n+c*Math.sin(l),o.rotation=l+d})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,s)=>{const{centerX:o,centerY:a,radius:r,angle:n,text:l}=s,{offsetX:c,offsetY:p,fill:u,fontStyle:d,fontWeight:f,fontSize:y,fontFamily:g,textAlign:m,textBaseline:S}=s.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=o+r*Math.cos(n)+c,i.y=a+r*Math.sin(n)+p,i.text=l,i.fill=u,i.fontStyle=d,i.fontWeight=f,i.fontSize=y,i.fontFamily=g,i.textAlign=m,i.textBaseline=S})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>t.label)}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((s,o)=>{s.fill=o.fill,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontFamily=o.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.index)}updateTickNodes(e){const{scale:t,radius:i,centerX:s,centerY:o,properties:a}=this,{enabled:r,color:n,fontFamily:l,fontSize:c,fontStyle:p,fontWeight:u,spacing:d}=a.scale.label,f=ea(a.scale.label.rotation??0);e.tickSelection.each((y,g)=>{if(!r){y.visible=!1;return}y.visible=!0,y.text=g.text,y.fill=n,y.fontFamily=l,y.fontSize=c,y.fontStyle=p,y.fontWeight=u,y.textAlign="center",y.textBaseline="middle";const m=t.convert(g.value),{width:S,height:D}=g,x=Math.abs(i*Math.cos(m)),k=Math.abs(i*Math.sin(m)),I=Math.min(Math.max(Math.abs(i/Math.tan(m)),x-S/2),x+S/2),L=Math.min(Math.max(Math.abs(i*Math.tan(m)),k-D/2),k+D/2),b=Math.hypot(I,L),v=s+(b+d)*Math.cos(m),N=o+(b+d)*Math.sin(m);y.x=v,y.y=N,y.rotationCenterX=v,y.rotationCenterY=N,y.rotation=f})}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,radius:i,textAlign:s,verticalAlign:o}=this,{spacing:a,innerRadiusRatio:r}=this.properties;rA(this,this.ctx,t,{padding:a,textAlign:s,verticalAlign:o},i*r,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Mu([this.datumSelection],An),Mu([this.needleSelection],ku),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i,s,o,a;if(this.labelSelection.each((r,n)=>{r.opacity=1,n.label==="primary"?(i=r.previousDatum?.value??e.from??n.value,s=n.value):n.label==="secondary"&&(o=r.previousDatum?.value??e.from??n.value,a=n.value)}),!this.labelsHaveExplicitText())if(s==null||a==null)this.formatLabelText();else if(i===s&&o===a)this.formatLabelText({label:s,secondaryLabel:a});else{const r=`${this.id}_labels`;t.animate({id:r,groupId:"label",from:{label:i,secondaryLabel:o},to:{label:s,secondaryLabel:a},phase:e.phase??"update",onUpdate:n=>this.formatLabelText(n)})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=vu(!0,this.scale.range[0]);Ls(this.id,"node",e,[this.datumSelection],t,(s,o)=>o.itemId),Ls(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),Ls(this.id,"label",e,[this.labelSelection],Np,(s,o)=>o.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=vu(!1,this.scale.range[0]);Ls(this.id,"node",e,[this.datumSelection],t,(s,o)=>o.itemId),Ls(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:s}=i;let o,a;if(e.type===0?(o=i.value,a=i.label.text):{value:o,text:a}=i.targets[e.index],o!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Tp(this,e)}pickFocus(e){return Op(this,e)}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each((i,s)=>{const o=gs(this.id,this.ctx,s);o!=null&&t.push(o)}),t.join(". ")}getCategoryValue(e){}datumIndexForCategoryValue(e){}};ia.className="RadialGaugeSeries",ia.type="radial-gauge";var{FONT_SIZE_RATIO:xA}=Zo,eO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:e=>new ia(e),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},Zo.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",Zo.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[xA.LARGE]},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}}}}},Pu={type:"series",name:"radial-gauge",chartType:"gauge",enterprise:!0,options:Zo.radialGaugeSeriesOptionsDef,create:e=>new ia(e)};import{_ModuleSupport as Ln}from"ag-charts-community";import{_ModuleSupport as DA}from"ag-charts-community";import{Logger as bA}from"ag-charts-core";function Lu(e){e.nodes.sort((t,i)=>Math.round((t.datum.y-i.datum.y)*100)/100||-(t.datum.size-i.datum.size))}function vA({nodes:e,size:t},{seriesRectHeight:i,nodeSpacing:s,sizeScale:o}){const a=i*t*o;let r=(i-(a+s*(e.length-1)))/2;e.forEach(({datum:n})=>{const l=i*n.size*o;n.y=r,n.height=l,r+=l+s})}function kA(e,t){const{nodes:i}=e,{seriesRectHeight:s,nodeSpacing:o}=t;Lu(e);let a=0,r=0;for(const{datum:c}of i){const p=Math.max(r-c.y,0);c.y+=p,a+=p,r=c.y+c.height+o}if(r-o<s)return a>0;let l=s;for(let c=i.length-1;c>=0;c-=1){const{datum:p}=i[c],u=p.y+p.height,d=Math.min(l-u,0);p.y+=d,a+=d,l=p.y-o}return!0}function Rn(e,t,i,s,o,a,r,n){const l=(i-e)/(s-t),c=(r-o)/(n-a),p=((a-t)*(l*c)+e*c-o*l)/(c-l);return e<i?p>e&&p<Math.min(i,r):p<e&&p>Math.max(i,r)}function Ru(e,t){let i=!1;const s=e.nodes.filter(a=>t(a).length===1);let o=!0;for(let a=0;o&&a<s.length;a+=1){o=!1;for(let r=0;r<s.length-1;r+=1){const{datum:n}=s[r],l=t(s[r])[0].node.datum,{datum:c}=s[r+1],p=t(s[r+1])[0].node.datum;if(!(Rn(n.x,n.y,l.x,l.y,c.x,c.y,p.x,p.y)||Rn(n.x,n.y+n.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,p.x,p.y+p.height/2)||Rn(n.x,n.y+n.height,l.x,l.y+l.height,c.x,c.y+c.height,p.x,p.y+p.height)))continue;const d=s[r];s[r]=s[r+1],s[r+1]=d;const f=n.y;n.y=c.y+c.height-n.height,c.y=f,i=!0,o=!0}}return i}function MA(e){let t=!1;return Lu(e),t=Ru(e,i=>i.linksBefore)||t,t=Ru(e,i=>i.linksAfter)||t,t}function IA(e){if(e.length===0)return;let t=0,i=0;for(const{node:{datum:s}}of e)t+=s.y*s.size,i+=s.size;return t/i}function Tu(e,t,i,s){return e.nodes.forEach(({datum:o,linksBefore:a,linksAfter:r})=>{const n=s===1?a:r,l=s===1?r:a,c=IA(n);if(c!=null){const p=l.length!==0?i:1;o.y=o.y+(c-o.y)*p}}),kA(e,t)}function Ou(e,t,i){let s=!1;for(const o of e)s=Tu(o,t,i,1)||s;return s}function AA(e,t,i){let s=!1;for(let o=e.length-1;o>=0;o-=1)s=Tu(e[o],t,i,-1)||s;return s}function Cu(e){let t=!1;for(let i=e.length-1;i>=0;i-=1)t=MA(e[i])||t;return t}function NA(e,t){e.forEach(s=>{vA(s,t)});let i=!1;for(let s=0;s<6;s+=1){const o=Ou(e,t,1);i=AA(e,t,.5);const a=Cu(e);if(!o&&!i&&!a)break}i&&(Ou(e,t,1),Cu(e))}import{_ModuleSupport as PA}from"ag-charts-community";var{BBox:LA,Path:RA,SceneChangeDetection:Ui,splitBezier:TA}=PA;function sa(e,t,i,s,o,a,r,n,l,c){let p,u;if(o!==i&&l!==r){const L=-(s-t)/(o-i),b=-(n-a)/(l-r);p=(r-i+L*t-b*a)/(L-b),u=L*(p-t)+i}else if(o===i&&l!==r)p=t,u=-(n-a)/(l-r)*(p-n)+l;else if(o!==i&&l===r)p=n,u=-(s-t)/(o-i)*(p-t)+i;else throw new Error("Offsetting flat bezier curve");const d=Math.hypot(i-u,t-p),f=(d+c)/d,y=Math.hypot(l-u,n-p),g=(y+c)/y,m=p+(s-p)*f,S=u+(o-u)*f,D=p+(a-p)*g,x=u+(r-u)*g,k=p+(n-p)*g,I=u+(l-u)*g;e.cubicCurveTo(m,S,D,x,k,I)}var Ii=class extends RA{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),s=Math.max(this.y1,this.y2)-i+this.height;return new LA(e,i,t,s)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.x1+t,s=this.x2-t,o=this.y1+t,a=this.y2+t,r=this.height-2*t;if(r<0||i>s)return;const n=i,l=o+r/2,c=(i+s)/2,p=o+r/2,u=(i+s)/2,d=a+r/2,f=s,y=a+r/2;if(e.moveTo(n,l-r/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)e.cubicCurveTo(c,p-r/2,u,d-r/2,f,y-r/2),e.lineTo(f,y+r/2),e.cubicCurveTo(u,d+r/2,c,p+r/2,n,l+r/2);else{const[g,m]=TA(n,l,c,p,u,d,f,y,.5),S=(a>o?1:-1)*r/2;sa(e,g[0].x,g[0].y,g[1].x,g[1].y,g[2].x,g[2].y,g[3].x,g[3].y,S),sa(e,m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,-S),e.lineTo(f,y+r/2),sa(e,m[3].x,m[3].y,m[2].x,m[2].y,m[1].x,m[1].y,m[0].x,m[0].y,S),sa(e,g[3].x,g[3].y,g[2].x,g[2].y,g[1].x,g[1].y,g[0].x,g[0].y,-S)}e.closePath()}};h([Ui()],Ii.prototype,"x1",2),h([Ui()],Ii.prototype,"x2",2),h([Ui()],Ii.prototype,"y1",2),h([Ui()],Ii.prototype,"y2",2),h([Ui()],Ii.prototype,"height",2),h([Ui()],Ii.prototype,"inset",2);import{_ModuleSupport as OA}from"ag-charts-community";var{BaseProperties:wu,FillGradientDefaults:CA,FillPatternDefaults:wA,FillImageDefaults:FA,SeriesTooltip:BA,SeriesProperties:_A,Property:Z,Label:EA}=OA,Fu=class extends EA{constructor(){super(...arguments),this.spacing=1}};h([Z],Fu.prototype,"spacing",2);var Xt=class extends wu{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([Z],Xt.prototype,"fill",2),h([Z],Xt.prototype,"fillOpacity",2),h([Z],Xt.prototype,"stroke",2),h([Z],Xt.prototype,"strokeOpacity",2),h([Z],Xt.prototype,"strokeWidth",2),h([Z],Xt.prototype,"lineDash",2),h([Z],Xt.prototype,"lineDashOffset",2),h([Z],Xt.prototype,"itemStyler",2);var St=class extends wu{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([Z],St.prototype,"spacing",2),h([Z],St.prototype,"width",2),h([Z],St.prototype,"alignment",2),h([Z],St.prototype,"fill",2),h([Z],St.prototype,"fillOpacity",2),h([Z],St.prototype,"stroke",2),h([Z],St.prototype,"strokeOpacity",2),h([Z],St.prototype,"strokeWidth",2),h([Z],St.prototype,"lineDash",2),h([Z],St.prototype,"lineDashOffset",2),h([Z],St.prototype,"itemStyler",2);var we=class extends _A{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new CA,this.fillPatternDefaults=new wA,this.fillImageDefaults=new FA,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new Fu,this.link=new Xt,this.node=new St,this.tooltip=new BA}};h([Z],we.prototype,"nodes",2),h([Z],we.prototype,"fromKey",2),h([Z],we.prototype,"toKey",2),h([Z],we.prototype,"idKey",2),h([Z],we.prototype,"idName",2),h([Z],we.prototype,"labelKey",2),h([Z],we.prototype,"labelName",2),h([Z],we.prototype,"sizeKey",2),h([Z],we.prototype,"sizeName",2),h([Z],we.prototype,"fillGradientDefaults",2),h([Z],we.prototype,"fillPatternDefaults",2),h([Z],we.prototype,"fillImageDefaults",2),h([Z],we.prototype,"defaultColorRange",2),h([Z],we.prototype,"defaultPatternFills",2),h([Z],we.prototype,"fills",2),h([Z],we.prototype,"strokes",2),h([Z],we.prototype,"label",2),h([Z],we.prototype,"link",2),h([Z],we.prototype,"node",2),h([Z],we.prototype,"tooltip",2);var{Transformable:GA,applyShapeStyle:Bu,SeriesNodePickMode:_u,CachedTextMeasurerPool:WA,TextWrapper:Eu,TextUtils:Gu,createDatumId:oa,getShapeStyle:aa,Rect:Wu,BBox:Vu}=DA,ra=class extends Qc{constructor(e){super({moduleCtx:e,pickModes:[_u.NEAREST_NODE,_u.EXACT_SHAPE_MATCH]}),this.properties=new we}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Ii}nodeFactory(){return new Wu}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:o,sizeKey:a,label:{spacing:r},node:{spacing:n,width:l,alignment:c}}=this.properties,{nodeGraph:p,links:u,maxPathLength:d}=this.getNodeGraph(b=>({...b,x:NaN,y:NaN,width:l,height:NaN}),b=>({...b,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),f=p,y=this.isLabelEnabled()?(t-l)*(1-d/(d+1)):0,g=(t-l-2*y)/(d-1),m=[];for(let b=0;b<d;b+=1){const v=y+b*g;m.push({index:b,size:0,nodes:[],x:v})}f.forEach(b=>{const{datum:v,linksBefore:N,linksAfter:M,maxPathLengthBefore:R,maxPathLengthAfter:A}=b,P=Math.max(N.reduce((O,{link:F})=>O+F.size,0),M.reduce((O,{link:F})=>O+F.size,0));if(N.length===0&&M.length===0||P===0){b.columnIndex=-1;return}let T;switch(c){case"left":T=m[R];break;case"right":T=m[d-1-A];break;case"center":{if(N.length!==0)T=m[R];else if(M.length!==0){const O=M.reduce((F,E)=>Math.min(F,E.node.maxPathLengthBefore),d)-1;T=m[O]}else T=m[0];break}case"justify":{T=M.length===0?m[d-1]:m[R];break}}v.x=T.x,v.size=P;const w=this.getLabelText(this.properties.label,{datum:v.datum,value:v.label,fromKey:s,toKey:o,sizeKey:a,size:P});v.label=String(w),T.nodes.push(b),T.size+=P,b.columnIndex=T.index}),f.forEach(b=>{let v=1/0,N=0;b.linksAfter.forEach(M=>{const R=M.node,{columnIndex:A}=R;A<v?(v=A,N=R.datum.size):A===v&&(N=Math.max(N,R.datum.size))}),b.closestColumnIndex=v,b.maxSizeOfClosestNodesAfter=N});const S=m.reduce((b,{size:v,nodes:N})=>{const M=(1-(N.length-1)*(n/i))/v;return Math.min(b,M)},1/0);for(let b=m.length-1;b>=0;b-=1)m[b].nodes.sort((N,M)=>N.closestColumnIndex-M.closestColumnIndex||N.maxSizeOfClosestNodesAfter-M.maxSizeOfClosestNodesAfter||N.datum.size-M.datum.size);NA(m,{seriesRectHeight:i,nodeSpacing:n,sizeScale:S});let D=!1;if(f.forEach(({datum:b,linksBefore:v,linksAfter:N})=>{D||(D=b.height<0);const M=b.y+b.height,R=T=>T.sort((w,O)=>{const F=w.node.datum,E=O.node.datum,C=F.y+F.height,_=E.y+E.height,B=Math.atan2(F.y-b.y,Math.abs(F.x-b.x))-Math.atan2(E.y-b.y,Math.abs(E.x-b.x)),G=Math.atan2(C-M,Math.abs(F.x-b.x))-Math.atan2(_-M,Math.abs(E.x-b.x));return B+G});let A=b.y;R(v).forEach(({link:T})=>{T.y2=A,A+=T.size*i*S});let P=b.y;R(N).forEach(({link:T})=>{T.y1=P,P+=T.size*i*S})}),D){bA.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const x=[],k=[],{fontSize:I}=this.properties.label,L=this.properties.label.getFont();return m.forEach((b,v)=>{const N=v===0,M=v===m.length-1;let R=-1/0;b.nodes.sort((A,P)=>A.datum.y-P.datum.y),b.nodes.forEach(({datum:A})=>{if(A.midPoint={x:A.x+A.width/2,y:A.y+A.height/2},x.push(A),A.label==null)return;const P=N?A.x-r:A.x+A.width+r,T=A.y+A.height/2;let w;if(!N&&!M){const C=T-Gu.getLineHeight(I),_=T+Gu.getLineHeight(I);let B=t;f.forEach(({datum:W})=>{W.x>A.x&&Math.max(W.y,C)<=Math.min(W.y+W.height,_)&&(B=Math.min(B,W.x-r))});const G=B-A.x-2*r;w=Eu.wrapText(A.label,{maxWidth:G,maxHeight:A.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(w==null||w===""){const C=N||M?r:r*2;w=Eu.wrapText(A.label,{maxWidth:g-C,maxHeight:A.height,font:this.properties.label,textWrap:"never"})}if(w==="")return;const{height:O}=WA.measureText(w,{font:L,textAlign:"left",textBaseline:"middle"}),F=T-O/2,E=T+O/2;F>=R&&(k.push({x:P,y:T,leading:N,text:w}),R=E)})}),u.forEach(b=>{const{fromNode:v,toNode:N,size:M}=b;b.height=i*M*S,b.x1=v.x+l,b.x2=N.x,b.midPoint={x:(b.x1+b.x2)/2,y:(b.y1+b.y2)/2+b.height/2},x.push(b)}),{itemId:e,nodeData:x,labelData:k}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{x:l,y:c,leading:p,text:u})=>{n.visible=!0,n.x=l,n.y=c,n.text=u,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textAlign=p?"right":"left",n.textBaseline="middle"})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>oa([t.type,t.id]))}getBaseNodeStyle(e){const{properties:t}=this,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,lineDash:r,lineDashOffset:n}=t.node,l=e?t.highlightStyle.item:void 0;return aa({fill:l?.fill??i,fillOpacity:l?.fillOpacity??s,stroke:l?.stroke??o,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(t.node.strokeWidth),lineDash:l?.lineDash??r,lineDashOffset:l?.lineDashOffset??n},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getNodeStyleOverrides(e,t,i,s,o,a,r){const{id:n,properties:l}=this,{fills:c,strokes:p,defaultColorRange:u,defaultPatternFills:d}=l,{itemStyler:f}=l.node,y=a.fill??c[i%c.length],g=a.stroke??p[i%p.length],m=u[i%u.length].map(x=>({color:x})),S=d[i%d.length];let D;if(r||(D??(D={}),D.fill=y,D.stroke=g),f!=null){const x=this.cachedDatumCallback(oa(e,"node",r?"highlight":"node"),()=>{const{fillOpacity:k=1,strokeOpacity:I=1,strokeWidth:L=0,lineDash:b=[],lineDashOffset:v=0}=a;return this.callWithContext(f,{seriesId:n,datum:t,highlighted:r,label:o,size:s,fill:y,fillOpacity:k,stroke:g,strokeOpacity:I,strokeWidth:L,lineDash:b,lineDashOffset:v})});D??(D={}),Object.assign(D,x)}return aa(D,{...this.properties.fillGradientDefaults.toJson(),colorStops:m},{...this.properties.fillPatternDefaults.toJson(),fill:S,stroke:S},this.properties.fillImageDefaults)}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getBaseNodeStyle(i),o=this.getShapeFillBBox();t.each((a,r)=>{const{datumIndex:n,size:l,label:c}=r,p=this.getNodeStyleOverrides(String(n.index),r.datum,n.index,l,c,s,i);a.x=r.x,a.y=r.y,a.width=Math.max(r.width,0),a.height=Math.max(r.height,0),Bu(a,s,p,o)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=new Vu(0,0,e,t);return{series:i,axis:i}}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>oa([t.type,t.index,t.fromNode.id,t.toNode.id]))}getBaseLinkStyle(e){const{properties:t}=this,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,lineDash:r,lineDashOffset:n}=t.link,l=e?t.highlightStyle.item:void 0;return aa({fill:l?.fill??i,fillOpacity:l?.fillOpacity??s,stroke:l?.stroke??o,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(t.link.strokeWidth),lineDash:l?.lineDash??r,lineDashOffset:l?.lineDashOffset??n},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getLinkStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{fills:n,strokes:l,defaultColorRange:c,defaultPatternFills:p}=r,{itemStyler:u}=r.link,d=s.fill??n[i%n.length],f=s.stroke??l[i%l.length],y=c[i%c.length].map(S=>({color:S})),g=p[i%p.length];let m;if(o||(m??(m={}),m.fill=d,m.stroke=f),u!=null){const S=this.cachedDatumCallback(oa(e,"link",o?"highlight":"node"),()=>{const{fillOpacity:D=1,strokeOpacity:x=1,strokeWidth:k=0,lineDash:I=[],lineDashOffset:L=0}=s;return this.callWithContext(u,{seriesId:a,datum:t,highlighted:o,fill:d,fillOpacity:D,stroke:f,strokeOpacity:x,strokeWidth:k,lineDash:I,lineDashOffset:L})});m??(m={}),Object.assign(m,S)}return aa(m,{...this.properties.fillGradientDefaults.toJson(),colorStops:y},{...this.properties.fillPatternDefaults.toJson(),fill:g,stroke:g},this.properties.fillImageDefaults)}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getBaseLinkStyle(i),o=this.getShapeFillBBox();t.each((a,r)=>{const{datumIndex:n}=r,l=r.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(n.index),r.datum,l.index,s,i);a.x1=r.x1,a.y1=r.y1,a.x2=r.x2,a.y2=r.y2,a.height=r.height,Bu(a,s,c,o),a.inset=a.strokeWidth/2})}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:s,properties:o}=this,{fromKey:a,toKey:r,sizeKey:n,sizeName:l,tooltip:c}=o,p=this.contextNodeData?.nodeData.find(m=>m.datumIndex.type===e.type&&m.datumIndex.index===e.index);if(p==null)return;const u=p.type===0?p.fromNode.index:p.index,d=p.type===0?`${p.fromNode.label} - ${p.toNode.label}`:p.label,f=e.type===0?i?.dataSources.get(this.id)?.[e.index]:s?.dataSources.get(this.id)?.[e.index],y=p.size;let g;if(p.type===0){const m=p.fromNode.datumIndex,S=this.getBaseLinkStyle(!1);Object.assign(S,this.getLinkStyleOverrides(String(e.index),f,m.index,S,!1)),g=S}else{const m=p.label,S=this.getBaseNodeStyle(!1);Object.assign(S,this.getNodeStyleOverrides(String(e.index),f,e.index,y,m,S,!1)),g=S}return this.formatTooltipWithContext(c,{title:d,symbol:this.legendItemSymbol(p.type,u,g),data:n!=null?[{label:l,fallbackLabel:n,value:String(y)}]:[]},{seriesId:t,datum:f,title:d,fromKey:a,toKey:r,sizeKey:n,sizeName:l,size:y,...g})}computeFocusBounds(e){if(e instanceof Wu){const{x:t,y:i,width:s,height:o}=e,a=new Vu(t,i,s,o);return GA.toCanvas(this.contentGroup,a)}return e}};ra.className="SankeySeries",ra.type="sankey";import{_ModuleSupport as VA}from"ag-charts-community";import{arrayOf as Tn,color as Ku,constant as KA,fillGradientDefaults as zA,fillImageDefaults as $A,fillPatternDefaults as HA,required as On,string as na,undocumented as Rs}from"ag-charts-core";var{commonSeriesOptionsDefs:XA,sankeySeriesThemeableOptionsDef:YA}=VA,ji={...YA,...XA,type:On(KA("sankey")),fromKey:On(na),toKey:On(na),sizeKey:na,sizeName:na};ji.fillGradientDefaults=Rs(zA),ji.fillPatternDefaults=Rs(HA),ji.fillImageDefaults=Rs($A),ji.defaultColorRange=Rs(Tn(Tn(Ku))),ji.defaultPatternFills=Rs(Tn(Ku));var lO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:e=>new ra(e),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Ln.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ln.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:Ln.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}}},zu={type:"series",name:"sankey",chartType:"flow-proportion",enterprise:!0,options:ji,create:e=>new ra(e)};import{_ModuleSupport as Cn}from"ag-charts-community";import{_ModuleSupport as Ts}from"ag-charts-community";import{_ModuleSupport as qA}from"ag-charts-community";var{HierarchySeriesProperties:UA,HighlightStyle:jA,SeriesTooltip:JA,Property:Fe}=qA,si=class extends jA{constructor(){super(...arguments),this.label=new Ct,this.secondaryLabel=new Ct}};h([Fe],si.prototype,"fill",2),h([Fe],si.prototype,"fillOpacity",2),h([Fe],si.prototype,"stroke",2),h([Fe],si.prototype,"strokeWidth",2),h([Fe],si.prototype,"strokeOpacity",2),h([Fe],si.prototype,"label",2),h([Fe],si.prototype,"secondaryLabel",2);var et=class extends UA{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new si,this.label=new Ct,this.secondaryLabel=new ps,this.tooltip=new JA}};h([Fe],et.prototype,"sizeName",2),h([Fe],et.prototype,"labelKey",2),h([Fe],et.prototype,"secondaryLabelKey",2),h([Fe],et.prototype,"fillOpacity",2),h([Fe],et.prototype,"strokeWidth",2),h([Fe],et.prototype,"strokeOpacity",2),h([Fe],et.prototype,"cornerRadius",2),h([Fe],et.prototype,"sectorSpacing",2),h([Fe],et.prototype,"padding",2),h([Fe],et.prototype,"itemStyler",2),h([Fe],et.prototype,"highlightStyle",2),h([Fe],et.prototype,"label",2),h([Fe],et.prototype,"secondaryLabel",2),h([Fe],et.prototype,"tooltip",2);var{fromToMotion:ZA,normalizeAngle360:QA,createDatumId:eN,Sector:wn,Group:la,ScalableGroup:tN,Selection:Fn,TransformableText:Bn,BBox:$u,applyShapeStyle:iN,getShapeStyle:_n}=Ts,sN=class extends Ts.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function Hu(e,t=0,i=2*Math.PI/e.sumSize){for(const s of e.children){const o=t+s.sumSize*i;s.startAngle=t,s.endAngle=o,Hu(s,t,i),t=o}}var ca=class extends Ts.HierarchySeries{constructor(){super(...arguments),this.NodeClass=sN,this.properties=new et,this.scalingGroup=this.contentGroup.appendChild(new tN),this.sectorGroup=this.scalingGroup.appendChild(new la),this.sectorLabelGroup=this.scalingGroup.appendChild(new la),this.highlightSectorGroup=this.scalingGroup.appendChild(new la),this.datumSelection=Fn.select(this.sectorGroup,wn),this.labelSelection=Fn.select(this.sectorLabelGroup,la),this.highlightSelection=Fn.select(this.highlightSectorGroup,wn)}processData(){super.processData(),Hu(this.rootNode)}updateSelections(){const e=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(e!=null?[e]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const s=Array.from(this.rootNode),o=a=>{a.append([new Bn({tag:0}),new Bn({tag:1})])};this.datumSelection.update(s,void 0,a=>this.getDatumId(a)),this.labelSelection.update(s,o,a=>this.getDatumId(a))}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle:void 0;return _n({fill:i?.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l}=this,{fills:c,strokes:p,itemStyler:u}=n,d=e[0],f=o.fill??c[d%c.length],y=o.stroke??p[d%p.length],g={};if(a||(g.fill=s!=null?l.convert(s):f,g.stroke=y),u!=null){const m=this.cachedDatumCallback(eN(e.join(":"),a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:t,depth:i,highlighted:a,fill:f,stroke:y,...o}));Object.assign(g,m)}return _n(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateNodes(){const{chart:e,data:t,maxDepth:i}=this;if(e==null||t==null)return;const{width:s,height:o}=e.seriesRect,{sectorSpacing:a=0,padding:r=0,cornerRadius:n,childrenKey:l,colorKey:c,colorName:p,labelKey:u,secondaryLabelKey:d,sizeKey:f,sizeName:y}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=o/2;const g=a*.5,m=Math.min(s,o)/2,S=m/(i+1),D=-Math.PI/2,x={series:new $u(-m,-m,2*m,2*m),axis:new $u(-m,-m,2*m,2*m)};this.rootNode?.walk(N=>{const{startAngle:M,endAngle:R}=N;if(N.depth!=null){const A=(M+R)/2+D,P=(N.depth+.5)*S;N.midPoint.x=Math.cos(A)*P,N.midPoint.y=Math.sin(A)*P}}),this.rootNode?.walk(N=>{const{datum:M,depth:R,startAngle:A,endAngle:P,parent:T,sumSize:w}=N;N.label=void 0,N.secondaryLabel=void 0,N.contentHeight=0;let O;if(M!=null&&R!=null&&u!=null){const ne=M[u];O=this.getLabelText(this.properties.label,{depth:R,datum:M,childrenKey:l,colorKey:c,colorName:p,labelKey:u,secondaryLabelKey:d,sizeKey:f,sizeName:y,value:ne})}O===""&&(O=void 0);let F;if(M!=null&&R!=null&&d!=null){const ne=M[d];F=this.getLabelText(this.properties.secondaryLabel,{depth:R,datum:M,childrenKey:l,colorKey:c,colorName:p,labelKey:u,secondaryLabelKey:d,sizeKey:f,sizeName:y,value:ne})}if(F===""&&(F=void 0),R==null)return;const E=R*S+g,C=(R+1)*S-g,_=E>g?g/E:g,B=C>g?g/C:g,G=A+_,V=P+_-G,K=A+B,X=P+B-K,J=ne=>{if(R===0&&T?.sumSize===w)return{width:2*Math.sqrt(C**2-(ne*.5)**2),height:ne,meta:0};const Ie=ne,at=2*Math.sqrt(C**2-(E+Ie)**2),Dt=V<Math.PI?2*E*Math.tan(V*.5):1/0,Et=Math.min(at,Dt),ri=Math.PI/4;let Gt,Yt;return R===0?(Gt=ne,Yt=Math.sqrt(C**2-(Gt/2)**2)-ne/(2*Math.tan(X*.5))):QA(V)<ri?(Gt=2*E*Math.tan(V*.5),Yt=Math.sqrt(C**2-(Gt/2)**2)-E):(Yt=0,Gt=0),Et>=Yt?{width:Et,height:Ie,meta:1}:{width:Yt,height:Gt,meta:2}},Q=er(O,this.properties.label,F,this.properties.secondaryLabel,{padding:r},J);if(Q==null)return;const{width:ee,height:j,meta:U,label:re,secondaryLabel:le}=Q,Y=D+(A+P)/2,_e=Math.sin(Y)>=0,Ee=Math.cos(Y)>=0,pe=(_e?3:12)&(Ee?6:9);let Me;switch(U){case 0:Me=0;break;case 1:{const fe=C-(S-j)*.58,Ie=Math.sqrt((C-r)**2-(ee/2)**2);Me=Math.min(fe,Ie);break}case 2:if(R===0){const ne=j/(2*Math.tan(V*.5))+ee*.5,fe=Math.sqrt(C**2-(j*.5)**2)-ee*.5;Me=(ne+fe)*.5}else Me=(E+C)*.5;break}if(re!=null){const{fontStyle:ne="normal",fontFamily:fe,fontWeight:Ie="normal",color:at="black"}=this.properties.label;N.label={...re,fontStyle:ne,fontFamily:fe,fontWeight:Ie,color:at,labelPlacement:U,circleQuarter:pe,radius:Me,theta:Y}}if(le!=null){const{fontStyle:ne="normal",fontFamily:fe,fontWeight:Ie="normal",color:at="black"}=this.properties.secondaryLabel;N.secondaryLabel={...le,fontStyle:ne,fontFamily:fe,fontWeight:Ie,color:at,labelPlacement:U,circleQuarter:pe,radius:Me,theta:Y}}N.contentHeight=Q.height});const k=(N,M,R,A)=>{const{datum:P,datumIndex:T,depth:w,colorValue:O,startAngle:F,endAngle:E}=N;if(w==null){M.visible=!1;return}M.visible=!0;const C=this.getItemStyleOverrides(T,P,w,O,R,A),_=C.fill??R.fill,B=C.strokeWidth??R.strokeWidth,G=Ts.isGradientFill(_)&&_.bounds!=="item"?x:void 0;iN(M,R,C,G),M.centerX=0,M.centerY=0,M.innerRadius=w*S,M.outerRadius=(w+1)*S,M.startAngle=F+D,M.endAngle=E+D,M.inset=g+B*.5,M.cornerRadius=n},I=this.getItemBaseStyle(!1);this.datumSelection.each((N,M)=>{k(M,N,I,!1)});const L=this.getItemBaseStyle(!0);this.highlightSelection.each((N,M)=>{k(M,N,L,!0)});const b=(N,M,R,A)=>{const{depth:P,contentHeight:T}=N,w=R===0,O=w?N.label:N.secondaryLabel;if(P==null||O==null){M.visible=!1;return}const{labelPlacement:F,circleQuarter:E,radius:C,theta:_}=O;let B;switch(A&&(B=(w?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),M.text=O.text,M.fontSize=O.fontSize,M.lineHeight=O.lineHeight,M.fontStyle=O.fontStyle,M.fontFamily=O.fontFamily,M.fontWeight=O.fontWeight,M.fill=B??O.color,F){case 0:M.textAlign="center",M.textBaseline="top",M.translationX=0,M.translationY=(w?0:T-O.height)-T*.5,M.rotation=0;break;case 1:{const G=(E&3)!==0,W=w===!G?C:C-(T-O.height);M.textAlign="center",M.textBaseline=G?"bottom":"top",M.translationX=Math.cos(_)*W,M.translationY=Math.sin(_)*W,M.rotation=G?_-Math.PI*.5:_+Math.PI*.5;break}case 2:{const G=(E&6)!==0,W=w===!G?(T-O.height)*.5:(O.height-T)*.5;M.textAlign="center",M.textBaseline="middle",M.translationX=Math.cos(_)*C+Math.cos(_+Math.PI/2)*W,M.translationY=Math.sin(_)*C+Math.sin(_+Math.PI/2)*W,M.rotation=G?_:_+Math.PI;break}}M.visible=!0},v=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Bn).forEach(N=>{const M=N.closestDatum();b(M,N,N.tag,M===v)})}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,tooltip:p}=i,u=e.reduce((k,I)=>k?.children[I],this.rootNode);if(u==null)return;const{datum:d,depth:f}=u;if(d==null||f==null)return;const y=[],g=r!=null?d[r]:void 0;g!=null&&y.push({label:n,fallbackLabel:r,value:g});const m=l!=null?d[l]:void 0;m!=null&&y.push({label:c,fallbackLabel:l,value:m});const S=this.getItemBaseStyle(!1);Object.assign(S,this.getItemStyleOverrides(e,d,f,m,S,!1));const D=S.fill,x=_n({shape:"square",fill:D,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults);return Ts.isGradientFill(x.fill)&&(x.fill={...x.fill,gradient:"linear",rotation:0,reverse:!1}),this.formatTooltipWithContext(p,{title:s!=null?d[s]:void 0,symbol:{marker:x},data:y},{seriesId:t,datum:d,title:void 0,depth:f,labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,...S})}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.datumSelection.selectByClass(wn))}animateEmptyUpdateReady(){ZA(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(e){return e}};ca.className="SunburstSeries",ca.type="sunburst";import{_ModuleSupport as oN}from"ag-charts-community";import{constant as aN,required as rN,string as Ai}from"ag-charts-core";var{commonSeriesOptionsDefs:nN,sunburstSeriesThemeableOptionsDef:lN,without:cN}=oN,pN={...lN,...cN(nN,["highlightStyle"]),type:rN(aN("sunburst")),labelKey:Ai,secondaryLabelKey:Ai,childrenKey:Ai,sizeKey:Ai,colorKey:Ai,sizeName:Ai,colorName:Ai},{FONT_SIZE_RATIO:Xu}=Cn,fO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:e=>new ca(e),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Cn.FILL_PATTERN_DEFAULTS,fillImageDefaults:Cn.FILL_IMAGE_DEFAULTS,label:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[Xu.LARGE]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},9/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[Xu.SMALLEST]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},7/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}}},Yu={type:"series",name:"sunburst",chartType:"hierarchy",enterprise:!0,options:pN,create:e=>new ca(e)};import{_ModuleSupport as En}from"ag-charts-community";import{_ModuleSupport as Os}from"ag-charts-community";import{isNumberEqual as hN}from"ag-charts-core";import{_ModuleSupport as uN}from"ag-charts-community";var{BaseProperties:pa,HierarchySeriesProperties:dN,HighlightStyle:fN,SeriesTooltip:gN,Property:q,Label:yN}=uN,qu=class extends yN{constructor(){super(...arguments),this.spacing=0}};h([q],qu.prototype,"spacing",2);var xt=class extends pa{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new qu}};h([q],xt.prototype,"fill",2),h([q],xt.prototype,"fillOpacity",2),h([q],xt.prototype,"stroke",2),h([q],xt.prototype,"strokeWidth",2),h([q],xt.prototype,"strokeOpacity",2),h([q],xt.prototype,"cornerRadius",2),h([q],xt.prototype,"textAlign",2),h([q],xt.prototype,"gap",2),h([q],xt.prototype,"padding",2),h([q],xt.prototype,"interactive",2),h([q],xt.prototype,"label",2);var ht=class extends pa{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Ct,this.secondaryLabel=new ps}};h([q],ht.prototype,"fill",2),h([q],ht.prototype,"fillOpacity",2),h([q],ht.prototype,"stroke",2),h([q],ht.prototype,"strokeWidth",2),h([q],ht.prototype,"strokeOpacity",2),h([q],ht.prototype,"cornerRadius",2),h([q],ht.prototype,"textAlign",2),h([q],ht.prototype,"verticalAlign",2),h([q],ht.prototype,"gap",2),h([q],ht.prototype,"padding",2),h([q],ht.prototype,"label",2),h([q],ht.prototype,"secondaryLabel",2);var Ni=class extends pa{constructor(){super(...arguments),this.label=new Ct}};h([q],Ni.prototype,"fill",2),h([q],Ni.prototype,"fillOpacity",2),h([q],Ni.prototype,"stroke",2),h([q],Ni.prototype,"strokeWidth",2),h([q],Ni.prototype,"strokeOpacity",2),h([q],Ni.prototype,"label",2);var oi=class extends pa{constructor(){super(...arguments),this.label=new Ct,this.secondaryLabel=new ps}};h([q],oi.prototype,"fill",2),h([q],oi.prototype,"fillOpacity",2),h([q],oi.prototype,"stroke",2),h([q],oi.prototype,"strokeWidth",2),h([q],oi.prototype,"strokeOpacity",2),h([q],oi.prototype,"label",2),h([q],oi.prototype,"secondaryLabel",2);var Gn=class extends fN{constructor(){super(...arguments),this.group=new Ni,this.tile=new oi}};h([q],Gn.prototype,"group",2),h([q],Gn.prototype,"tile",2);var Tt=class extends dN{constructor(){super(...arguments),this.highlightStyle=new Gn,this.tooltip=new gN,this.group=new xt,this.tile=new ht,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};h([q],Tt.prototype,"sizeName",2),h([q],Tt.prototype,"labelKey",2),h([q],Tt.prototype,"secondaryLabelKey",2),h([q],Tt.prototype,"itemStyler",2),h([q],Tt.prototype,"highlightStyle",2),h([q],Tt.prototype,"tooltip",2),h([q],Tt.prototype,"group",2),h([q],Tt.prototype,"tile",2),h([q],Tt.prototype,"undocumentedGroupFills",2),h([q],Tt.prototype,"undocumentedGroupStrokes",2);var{TextUtils:mN,TextWrapper:SN,createDatumId:Uu,Rect:ju,Group:Ju,BBox:Ji,Selection:Wn,Text:ha,Transformable:xN,applyShapeStyle:DN,getShapeStyle:Cs}=Os,bN=class extends Os.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}},Zu=new ha;function vN(e,t){const{fontStyle:i,fontWeight:s,fontSize:o,fontFamily:a}=t;Zu.setProperties({text:e,fontStyle:i,fontWeight:s,fontSize:o,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:r,height:n}=Zu.getBBox();return{width:r,height:n}}function ai(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var Qu={left:0,center:.5,right:1},kN={top:0,middle:.5,bottom:1},xO=class extends Os.Group{distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}},ua=class extends Os.HierarchySeries{constructor(){super(...arguments),this.NodeClass=bN,this.properties=new Tt,this.rectGroup=this.contentGroup.appendChild(new Ju),this.datumSelection=Wn.select(this.rectGroup,ju),this.labelSelection=Wn.select(this.labelGroup,Ju),this.highlightSelection=Wn.select(this.rectGroup,ju)}groupTitleHeight(e,t){const{labelValue:i}=e,{label:s}=this.properties.group,o=3;if(i!=null){if(s.fontSize>t.width/o||s.fontSize>t.height/o)return;{const{height:a}=vN(i,s);return Math.max(a,s.fontSize)}}}getNodePadding(e,t){if(e.parent==null)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:i},padding:s}=this.properties.group,o=this.groupTitleHeight(e,t),a=o!=null?o+i:0;return{top:s+a,right:s,bottom:s,left:s}}sortChildren({children:e}){const t=Array.from(e,(s,o)=>o).filter(s=>ai(e[s])>0).sort((s,o)=>ai(e[o])-ai(e[s]));return{sortedChildrenIndices:t,childAt:s=>{const o=t[s];return e[o]}}}squarify(e,t){const{datum:i,children:s}=e;if(t.width<=0||t.height<=0){e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN;return}const o=i!=null?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0};e.parent==null?(e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN):(e.bbox=t,e.padding=o,e.midPoint.x=t.x+t.width/2,e.midPoint.y=t.y);const{sortedChildrenIndices:a,childAt:r}=this.sortChildren(e),n=a.every(I=>s[I].children.length===0),l=1,c=t.width-o.left-o.right,p=t.height-o.top-o.bottom;if(c<=0||p<=0)return;const u=a.length;let d=0,f=0,y=1/0,g=a.reduce((I,L)=>I+ai(s[L]),0);const m=new Ji(t.x+o.left,t.y+o.top,c,p),S=m.clone();let D=0;for(;D<u;){const I=ai(r(D)),L=ai(r(f)),b=S.width<S.height;d+=I;const v=b?S.height:S.width,N=b?S.width:S.height,M=N*L/d;let R=v*d/g;const A=Math.max(M,R)/Math.min(M,R),P=Math.abs(l-A);if(P<y){y=P,D++;continue}d-=I,R=v*d/g;let T=b?S.x:S.y;for(let w=f;w<D;w++){const O=r(w),F=ai(O),E=b?T:S.x,C=b?S.y:T,_=N*F/d,B=b?_:R,G=b?R:_,W=new Ji(E,C,B,G);this.applyGap(m,W,n),this.squarify(O,W),g-=F,T+=_}b?(S.y+=R,S.height-=R):(S.x+=R,S.width-=R),f=D,d=0,y=1/0}const x=S.width<S.height;let k=x?S.x:S.y;for(let I=f;I<u;I++){const L=r(I),b=x?k:S.x,v=x?S.y:k,N=ai(L)/g,M=S.width*(x?N:1),R=S.height*(x?1:N),A=new Ji(b,v,M,R);this.applyGap(m,A,n),this.squarify(L,A),k+=x?M:R}}applyGap(e,t,i){const s=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,o=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=o(e),r=o(t);["top","right","bottom","left"].forEach(l=>{hN(a[l],r[l])||t.shrink(s,l)})}createNodeData(){}getGroupBaseStyle(e){const{properties:t}=this,{group:i}=t,s=e?t.highlightStyle.group:void 0;return Cs({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getGroupStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{undocumentedGroupFills:n,undocumentedGroupStrokes:l,itemStyler:c}=r,p=s.fill??n[Math.min(i??0,n.length)],u=s.stroke??l[Math.min(i??0,l.length)],d={};if(o||(d.fill=p,d.stroke=u),c!=null){const f=this.cachedDatumCallback(Uu(e.join(":"),o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:t,depth:i,highlighted:o,fill:p,stroke:u,...s}));Object.assign(d,f)}return Cs(d,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getTileBaseStyle(e){const{properties:t}=this,{tile:i}=t,s=e?t.highlightStyle.tile:void 0;return Cs({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getTileStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l}=this,{fills:c,strokes:p,itemStyler:u}=n,d=e[0],f=o.fill??c[d%c.length],y=o.stroke??p[d%p.length],g={};if(a||(g.fill=s!=null?l.convert(s):f,g.stroke=y),u!=null){const m=this.cachedDatumCallback(Uu(e.join(":"),a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:t,depth:i,highlighted:a,fill:f,stroke:y,...o}));Object.assign(g,m)}return Cs(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateSelections(){let e=this.ctx.highlightManager?.getActiveHighlight();if(e!=null&&!this.properties.group.interactive&&e.children.length!==0&&(e=void 0),this.highlightSelection.update(e!=null?[e]:[],void 0,o=>this.getDatumId(o)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=this.chart??{};if(!t)return;const i=Array.from(this.rootNode),s=o=>{o.append([new ha({tag:0}),new ha({tag:1})])};this.datumSelection.update(i,void 0,o=>this.getDatumId(o)),this.labelSelection.update(i,s,o=>this.getDatumId(o))}updateNodes(){const{rootNode:e,data:t}=this,{childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,highlightStyle:c,tile:p,group:u}=this.properties,{seriesRect:d}=this.chart??{};if(!d||!t)return;this.rootNode?.walk(b=>{const{datum:v,depth:N,children:M}=b,R=M.length===0,A=R?p.label:u.label;let P;if(v!=null&&N!=null&&a!=null){const w=v[a];P=this.getLabelText(A,{depth:N,datum:v,childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,value:w})}P===""&&(P=void 0);let T;if(R&&v!=null&&N!=null&&r!=null){const w=v[r];T=this.getLabelText(p.secondaryLabel,{depth:N,datum:v,childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,value:w})}T===""&&(T=void 0),b.labelValue=P,b.secondaryLabelValue=T});const{width:f,height:y}=d;this.squarify(e,new Ji(0,0,f,y)),this.rootNode?.walk(b=>{const{bbox:v,children:N,labelValue:M,secondaryLabelValue:R}=b;if(b.label=void 0,b.secondaryLabel=void 0,v!=null)if(N.length===0){const A={width:v.width,height:v.height,meta:null},P=er(M,this.properties.tile.label,R,this.properties.tile.secondaryLabel,{padding:p.padding},()=>A);if(P==null)return;const{height:T,label:w,secondaryLabel:O}=P,{textAlign:F,verticalAlign:E,padding:C}=p,_=Qu[F]??.5,B=v.x+C+(v.width-2*C)*_,G=kN[E]??.5,W=v.y+C+T*.5+(v.height-2*C-T)*G;if(w!=null){const{fontStyle:V="normal",fontFamily:K,fontWeight:$="normal",color:X="black"}=this.properties.tile.label;b.label={text:w.text,fontSize:w.fontSize,lineHeight:w.lineHeight,fontStyle:V,fontFamily:K,fontWeight:$,color:X,textAlign:F,verticalAlign:"middle",x:B,y:W-(T-w.height)*.5}}if(O!=null){const{fontStyle:V="normal",fontFamily:K,fontWeight:$="normal",color:X="black"}=this.properties.tile.secondaryLabel;b.secondaryLabel={text:O.text,fontSize:O.fontSize,lineHeight:O.fontSize,fontStyle:V,fontFamily:K,fontWeight:$,color:X,textAlign:F,verticalAlign:"middle",x:B,y:W+(T-O.height)*.5}}}else{if(M==null)return;{const{padding:A,textAlign:P}=u,T=this.groupTitleHeight(b,v);if(T==null)return;const w=v.width-2*A,O=SN.wrapText(M,{maxWidth:v.width-2*A,font:u.label,textWrap:"never"}),F=Qu[P]??.5,{fontStyle:E="normal",fontFamily:C,fontWeight:_="normal",color:B="black"}=this.properties.group.label;b.label={text:O,fontSize:u.label.fontSize,lineHeight:mN.getLineHeight(u.label.fontSize),fontStyle:E,fontFamily:C,fontWeight:_,color:B,textAlign:P,verticalAlign:"middle",x:v.x+A+w*F,y:v.y+A+T*.5}}}});const g={series:new Ji(0,0,f,y),axis:new Ji(0,0,f,y)},m=(b,v,N,M,R)=>{const{bbox:A}=b;if(A==null){v.visible=!1;return}const{datum:P,depth:T=-1,datumIndex:w,colorValue:O}=b,F=b.children.length===0,E=F?M:N,C=F?this.getTileStyleOverrides(w,P,T,O,E,R):this.getGroupStyleOverrides(w,P,T,E,R);v.crisp=!0,DN(v,E,C,g),v.cornerRadius=F?p.cornerRadius:u.cornerRadius,v.zIndex=[0,T,R?1:0];const _=b.parent?.children.every(W=>W.children.length===0),B=b.parent!=null?b.parent.bbox:void 0,G=b.parent!=null?b.parent.padding:void 0;_===!0&&B!=null&&G!=null?(v.clipBBox=A,v.x=B.x+G.left,v.y=B.y+G.top,v.width=B.width-(G.left+G.right),v.height=B.height-(G.top+G.bottom)):(v.clipBBox=void 0,v.x=A.x,v.y=A.y,v.width=A.width,v.height=A.height),v.visible=!0},S=this.getGroupBaseStyle(!1),D=this.getTileBaseStyle(!1);this.datumSelection.each((b,v)=>m(v,b,S,D,!1));const x=this.getGroupBaseStyle(!0),k=this.getTileBaseStyle(!0);this.highlightSelection.each((b,v)=>{m(v,b,x,k,!0)});const I=(b,v,N,M)=>{const R=b.children.length===0,A=N===0?b.label:b.secondaryLabel;if(A==null){v.visible=!1;return}let P;if(M){const{tile:T,group:w}=c;P=T.secondaryLabel.color,R?N===0&&(P=T.label.color):P=w.label.color}v.text=A.text,v.fontSize=A.fontSize,v.lineHeight=A.lineHeight,v.fontStyle=A.fontStyle,v.fontFamily=A.fontFamily,v.fontWeight=A.fontWeight,v.fill=P??A.color,v.textAlign=A.textAlign,v.textBaseline=A.verticalAlign,v.x=A.x,v.y=A.y,v.visible=!0,v.zIndex=1},L=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(ha).forEach(b=>{const v=b.closestDatum();I(v,b,b.tag,v===L)})}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,s)=>s.datumIndex.length-i.datumIndex.length),t}pickNodeClosestDatum(e){const t=this.pickNodesExactShape(e);return t.length!==0?{datum:t[0],distance:0}:this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,tooltip:p}=i,u=e.reduce((b,v)=>b?.children[v],this.rootNode);if(u==null)return;const{datum:d,depth:f,children:y}=u;if(d==null||f==null)return;const g=y.length===0,m=[],S=r!=null?d[r]:void 0;S!=null&&m.push({label:n,fallbackLabel:r,value:S});const D=l!=null?d[l]:void 0;D!=null&&m.push({label:c,fallbackLabel:l,value:D});let x;g?(x=this.getTileBaseStyle(!1),Object.assign(x,this.getTileStyleOverrides(e,d,f,D,x,!1))):(x=this.getGroupBaseStyle(!1),Object.assign(x,this.getGroupStyleOverrides(e,d,f,x,!1)));const k=x.fill,I=Cs({shape:"square",fill:k,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);Os.isGradientFill(I.fill)&&(I.fill={...I.fill,gradient:"linear",rotation:0,reverse:!1});const L=g?{marker:I}:void 0;return this.formatTooltipWithContext(p,{title:s!=null?d[s]:void 0,symbol:L,data:m},{seriesId:t,datum:d,title:void 0,depth:f,labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,...x})}computeFocusBounds(e){return xN.toCanvas(this.contentGroup,e.getBBox())}};ua.className="TreemapSeries",ua.type="treemap";import{_ModuleSupport as MN}from"ag-charts-community";import{arrayOf as ed,color as td,constant as IN,fillGradientDefaults as AN,fillImageDefaults as NN,fillPatternDefaults as PN,required as LN,string as Pi,undocumented as ws}from"ag-charts-core";var{commonSeriesOptionsDefs:RN,treemapSeriesThemeableOptionsDef:TN,without:ON}=MN,Zi={...TN,...ON(RN,["highlightStyle"]),type:LN(IN("treemap")),labelKey:Pi,secondaryLabelKey:Pi,childrenKey:Pi,sizeKey:Pi,colorKey:Pi,sizeName:Pi,colorName:Pi};Zi.fillGradientDefaults=ws(AN),Zi.fillPatternDefaults=ws(PN),Zi.fillImageDefaults=ws(NN),Zi.undocumentedGroupFills=ws(ed(td)),Zi.undocumentedGroupStrokes=ws(ed(td));var{FONT_SIZE_RATIO:id}=En,vO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:e=>new ua(e),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:En.FILL_PATTERN_DEFAULTS,fillImageDefaults:En.FILL_IMAGE_DEFAULTS,undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.5]},minimumFontSize:{$rem:[id.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:[id.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}}},sd={type:"series",name:"treemap",chartType:"hierarchy",enterprise:!0,options:Zi,create:e=>new ua(e)},CN=dd.ModuleRegistry,od=[pl,Fa,Za,Sp,Ip,sr,ar,pr,gr,Dr],ad=[hl,ul,dl,fl,Fh,tu,su,hu,mu],rd=[gl,ap,zu],nd=[yl,Kp,Pu],ld=[ml,Yu,sd],cd=[Sl,$h],pd=[vl,eh,th,hh,Dh,vh],wN=[...od,...ad,...rd,...nd,...ld,...cd,...pd,Qx,eD,tD];export{od as AllCartesianEnterpriseModules,wN as AllEnterpriseModules,rd as AllFlowProportionEnterpriseModules,nd as AllGaugeEnterpriseModules,ld as AllHierarchyEnterpriseModules,ad as AllPolarEnterpriseModules,cd as AllStandaloneEnterpriseModules,pd as AllTopologyEnterpriseModules,ul as AngleCategoryAxisModule,hl as AngleNumberAxisModule,Fa as BoxPlotSeriesModule,Za as CandlestickSeriesModule,ap as ChordSeriesModule,Sp as ConeFunnelSeriesModule,gl as FlowProportionChartModule,Ip as FunnelSeriesModule,yl as GaugeChartModule,sr as HeatmapSeriesModule,ml as HierarchyChartModule,Kp as LinearGaugeSeriesModule,th as MapLineBackgroundSeriesModule,eh as MapLineSeriesModule,hh as MapMarkerSeriesModule,vh as MapShapeBackgroundSeriesModule,Dh as MapShapeSeriesModule,CN as ModuleRegistry,Fh as NightingaleSeriesModule,ar as OhlcSeriesModule,pl as OrdinalTimeAxisModule,$h as PyramidSeriesModule,tu as RadarAreaSeriesModule,su as RadarLineSeriesModule,hu as RadialBarSeriesModule,mu as RadialColumnSeriesModule,Pu as RadialGaugeSeriesModule,fl as RadiusCategoryAxisModule,dl as RadiusNumberAxisModule,pr as RangeAreaSeriesModule,gr as RangeBarSeriesModule,zu as SankeySeriesModule,Sl as StandaloneChartModule,Yu as SunburstSeriesModule,vl as TopologyChartModule,sd as TreemapSeriesModule,Dr as WaterfallSeriesModule};
